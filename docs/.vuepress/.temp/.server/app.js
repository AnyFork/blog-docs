"use strict";
Object.defineProperties(exports, { __esModule: { value: true }, [Symbol.toStringTag]: { value: "Module" } });
var vue = require("vue");
var vueRouter = require("vue-router");
var devtoolsApi = require("@vue/devtools-api");
var serverRenderer = require("vue/server-renderer");
var shared = require("@vuepress/shared");
var Typed = require("typed.js");
var core = require("@vueuse/core");
var dayjs = require("dayjs");
var utc = require("dayjs/plugin/utc");
var timezone = require("dayjs/plugin/timezone");
var vicon = require("@vicons/antd");
var Paginate = require("vuejs-paginate-next");
function _interopDefaultLegacy(e2) {
  return e2 && typeof e2 === "object" && "default" in e2 ? e2 : { "default": e2 };
}
function _interopNamespace(e2) {
  if (e2 && e2.__esModule)
    return e2;
  var n2 = Object.create(null, { [Symbol.toStringTag]: { value: "Module" } });
  if (e2) {
    Object.keys(e2).forEach(function(k2) {
      if (k2 !== "default") {
        var d2 = Object.getOwnPropertyDescriptor(e2, k2);
        Object.defineProperty(n2, k2, d2.get ? d2 : {
          enumerable: true,
          get: function() {
            return e2[k2];
          }
        });
      }
    });
  }
  n2["default"] = e2;
  return Object.freeze(n2);
}
var Typed__default = /* @__PURE__ */ _interopDefaultLegacy(Typed);
var dayjs__default = /* @__PURE__ */ _interopDefaultLegacy(dayjs);
var utc__default = /* @__PURE__ */ _interopDefaultLegacy(utc);
var timezone__default = /* @__PURE__ */ _interopDefaultLegacy(timezone);
var vicon__namespace = /* @__PURE__ */ _interopNamespace(vicon);
var Paginate__default = /* @__PURE__ */ _interopDefaultLegacy(Paginate);
const pagesData$1 = {
  "v-8daa1a0e": () => Promise.resolve().then(function() {
    return index_html$5;
  }).then(({ data: data2 }) => data2),
  "v-d5fe0c96": () => Promise.resolve().then(function() {
    return index_html$4;
  }).then(({ data: data2 }) => data2),
  "v-3706649a": () => Promise.resolve().then(function() {
    return _404_html$2;
  }).then(({ data: data2 }) => data2)
};
const siteData$1 = JSON.parse('{"base":"/blog-docs/","lang":"zh-CN","title":"\u5C0F\u7D2B\u5FF5\u6C81","description":"\u8D44\u6599\u6587\u6863\u6C47\u96C6\u7F51\u7AD9","head":[["link",{"rel":"shortcut icon","type":"image/x-icon","href":"/blog-docs/favicon.ico"}],["meta",{"name":"viewport","content":"width=device-width,initial-scale=1,user-scalable=no"}],["meta",{"name":"referrer","content":"never"}],["link",{"rel":"manifest","href":"/blog-docs/manifest.json"}],["meta",{"name":"theme-color","content":"#3eaf7c"}],["script",{"language":"javascript","type":"text/javascript","src":"/blog-docs/js/jquery.min.js"}],["script",{"language":"javascript","type":"text/javascript","src":"/blog-docs/js/flux.min.js"}]],"locales":{}}');
const pagesComponents = {
  "v-8daa1a0e": vue.defineAsyncComponent(() => Promise.resolve().then(function() {
    return index_html$3;
  })),
  "v-d5fe0c96": vue.defineAsyncComponent(() => Promise.resolve().then(function() {
    return index_html$1;
  })),
  "v-3706649a": vue.defineAsyncComponent(() => Promise.resolve().then(function() {
    return _404_html$1;
  }))
};
const layoutComponents = {
  "404": vue.defineAsyncComponent(() => Promise.resolve().then(function() {
    return _404$1;
  })),
  "Layout": vue.defineAsyncComponent(() => Promise.resolve().then(function() {
    return Layout$1;
  }))
};
var pagesData = vue.ref(pagesData$1);
var pageDataEmpty = vue.readonly({
  key: "",
  path: "",
  title: "",
  lang: "",
  frontmatter: {},
  excerpt: "",
  headers: []
});
var pageData = vue.ref(pageDataEmpty);
var usePageData = () => pageData;
if (false) {
  __VUE_HMR_RUNTIME__.updatePageData = (data2) => {
    pagesData.value[data2.key] = () => Promise.resolve(data2);
    if (data2.key === pageData.value.key) {
      pageData.value = data2;
    }
  };
}
var pageFrontmatterSymbol = Symbol("");
var usePageFrontmatter = () => {
  const pageFrontmatter = vue.inject(pageFrontmatterSymbol);
  if (!pageFrontmatter) {
    throw new Error("usePageFrontmatter() is called without provider.");
  }
  return pageFrontmatter;
};
var pageHeadSymbol = Symbol("");
var usePageHead = () => {
  const pageHead = vue.inject(pageHeadSymbol);
  if (!pageHead) {
    throw new Error("usePageHead() is called without provider.");
  }
  return pageHead;
};
var pageHeadTitleSymbol = Symbol("");
var pageLangSymbol = Symbol("");
var usePageLang = () => {
  const pageLang = vue.inject(pageLangSymbol);
  if (!pageLang) {
    throw new Error("usePageLang() is called without provider.");
  }
  return pageLang;
};
var routeLocaleSymbol = Symbol("");
var useRouteLocale = () => {
  const routeLocale = vue.inject(routeLocaleSymbol);
  if (!routeLocale) {
    throw new Error("useRouteLocale() is called without provider.");
  }
  return routeLocale;
};
var siteData = vue.ref(siteData$1);
var useSiteData = () => siteData;
if (false) {
  __VUE_HMR_RUNTIME__.updateSiteData = (data2) => {
    siteData.value = data2;
  };
}
var siteLocaleDataSymbol = Symbol("");
var useSiteLocaleData = () => {
  const siteLocaleData = vue.inject(siteLocaleDataSymbol);
  if (!siteLocaleData) {
    throw new Error("useSiteLocaleData() is called without provider.");
  }
  return siteLocaleData;
};
var resolvers = vue.reactive({
  resolvePageData: async (pageKey) => {
    const pageDataResolver = pagesData.value[pageKey];
    const pageData2 = await (pageDataResolver == null ? void 0 : pageDataResolver());
    return pageData2 != null ? pageData2 : pageDataEmpty;
  },
  resolvePageFrontmatter: (pageData2) => pageData2.frontmatter,
  resolvePageHead: (headTitle, frontmatter, siteLocale) => {
    const description = shared.isString(frontmatter.description) ? frontmatter.description : siteLocale.description;
    const head = [
      ...shared.isArray(frontmatter.head) ? frontmatter.head : [],
      ...siteLocale.head,
      ["title", {}, headTitle],
      ["meta", { name: "description", content: description }]
    ];
    return shared.dedupeHead(head);
  },
  resolvePageHeadTitle: (page, siteLocale) => `${page.title ? `${page.title} | ` : ``}${siteLocale.title}`,
  resolvePageLang: (pageData2) => pageData2.lang || "en",
  resolveRouteLocale: (locales2, routePath) => shared.resolveLocalePath(locales2, routePath),
  resolveSiteLocaleData: (site, routeLocale) => ({
    ...site,
    ...site.locales[routeLocale]
  })
});
var ClientOnly = vue.defineComponent({
  name: "ClientOnly",
  setup(_2, ctx) {
    const isMounted = vue.ref(false);
    vue.onMounted(() => {
      isMounted.value = true;
    });
    return () => {
      var _a, _b;
      return isMounted.value ? (_b = (_a = ctx.slots).default) == null ? void 0 : _b.call(_a) : null;
    };
  }
});
var Content = vue.defineComponent({
  name: "Content",
  props: {
    pageKey: {
      type: String,
      required: false,
      default: ""
    }
  },
  setup(props) {
    const page = usePageData();
    const pageComponent = vue.computed(() => pagesComponents[props.pageKey || page.value.key]);
    return () => pageComponent.value ? vue.h(pageComponent.value) : vue.h("div", "404 Not Found");
  }
});
var Vuepress = vue.defineComponent({
  name: "Vuepress",
  setup() {
    const page = usePageData();
    const layoutComponent = vue.computed(() => {
      let layoutName;
      if (page.value.path) {
        const frontmatterLayout = page.value.frontmatter.layout;
        if (shared.isString(frontmatterLayout)) {
          layoutName = frontmatterLayout;
        } else {
          layoutName = "Layout";
        }
      } else {
        layoutName = "404";
      }
      return layoutComponents[layoutName] || vue.resolveComponent(layoutName, false);
    });
    return () => vue.h(layoutComponent.value);
  }
});
var withBase = (url) => {
  if (shared.isLinkHttp(url))
    return url;
  const base = useSiteData().value.base;
  return `${base}${shared.removeLeadingSlash(url)}`;
};
var defineClientConfig = (clientConfig) => clientConfig;
function r$1(r2, e2, n2) {
  var i2, t2, o2;
  void 0 === e2 && (e2 = 50), void 0 === n2 && (n2 = {});
  var a2 = null != (i2 = n2.isImmediate) && i2, u2 = null != (t2 = n2.callback) && t2, c2 = n2.maxWait, v2 = Date.now(), l2 = [];
  function f2() {
    if (void 0 !== c2) {
      var r3 = Date.now() - v2;
      if (r3 + e2 >= c2)
        return c2 - r3;
    }
    return e2;
  }
  var d2 = function() {
    var e3 = [].slice.call(arguments), n3 = this;
    return new Promise(function(i3, t3) {
      var c3 = a2 && void 0 === o2;
      if (void 0 !== o2 && clearTimeout(o2), o2 = setTimeout(function() {
        if (o2 = void 0, v2 = Date.now(), !a2) {
          var i4 = r2.apply(n3, e3);
          u2 && u2(i4), l2.forEach(function(r3) {
            return (0, r3.resolve)(i4);
          }), l2 = [];
        }
      }, f2()), c3) {
        var d3 = r2.apply(n3, e3);
        return u2 && u2(d3), i3(d3);
      }
      l2.push({ resolve: i3, reject: t3 });
    });
  };
  return d2.cancel = function(r3) {
    void 0 !== o2 && clearTimeout(o2), l2.forEach(function(e3) {
      return (0, e3.reject)(r3);
    }), l2 = [];
  }, d2;
}
var clientConfig0 = defineClientConfig({
  setup() {
    return;
  }
});
const getScrollTop = () => window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
const scrollToTop = () => window.scrollTo({ top: 0, behavior: "smooth" });
var vars$4 = "";
var backToTop = "";
const BackToTop = vue.defineComponent({
  name: "BackToTop",
  setup() {
    const scrollTop = vue.ref(0);
    const show = vue.computed(() => scrollTop.value > 300);
    const onScroll = r$1(() => {
      scrollTop.value = getScrollTop();
    }, 100);
    vue.onMounted(() => {
      scrollTop.value = getScrollTop();
      window.addEventListener("scroll", () => onScroll());
    });
    const backToTopEl = vue.h("div", { class: "back-to-top", onClick: scrollToTop });
    return () => vue.h(vue.Transition, {
      name: "back-to-top"
    }, () => show.value ? backToTopEl : null);
  }
});
var clientConfig1 = defineClientConfig({
  rootComponents: [BackToTop]
});
var vars$3 = "";
var externalLinkIcon = "";
const svg = vue.h("svg", {
  "class": "external-link-icon",
  "xmlns": "http://www.w3.org/2000/svg",
  "aria-hidden": "true",
  "focusable": "false",
  "x": "0px",
  "y": "0px",
  "viewBox": "0 0 100 100",
  "width": "15",
  "height": "15"
}, [
  vue.h("path", {
    fill: "currentColor",
    d: "M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"
  }),
  vue.h("polygon", {
    fill: "currentColor",
    points: "45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"
  })
]);
const ExternalLinkIcon = vue.defineComponent({
  name: "ExternalLinkIcon",
  props: {
    locales: {
      type: Object,
      required: false,
      default: () => ({})
    }
  },
  setup(props) {
    const routeLocale = useRouteLocale();
    const locale = vue.computed(() => {
      var _a;
      return (_a = props.locales[routeLocale.value]) != null ? _a : {
        openInNewWindow: "open in new window"
      };
    });
    return () => vue.h("span", [
      svg,
      vue.h("span", {
        class: "external-link-icon-sr-only"
      }, locale.value.openInNewWindow)
    ]);
  }
});
const locales = { "/": { "openInNewWindow": "open in new window" } };
var clientConfig2 = defineClientConfig({
  enhance({ app }) {
    app.component("ExternalLinkIcon", vue.h(ExternalLinkIcon, { locales }));
  }
});
var vars$2 = "";
var mediumZoom = "";
var clientConfig3 = defineClientConfig({
  enhance({ app, router }) {
    return;
  }
});
/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */
const nprogress$1 = {
  settings: {
    minimum: 0.08,
    easing: "ease",
    speed: 200,
    trickle: true,
    trickleRate: 0.02,
    trickleSpeed: 800,
    barSelector: '[role="bar"]',
    parent: "body",
    template: '<div class="bar" role="bar"></div>'
  },
  status: null,
  set: (n2) => {
    const started = nprogress$1.isStarted();
    n2 = clamp(n2, nprogress$1.settings.minimum, 1);
    nprogress$1.status = n2 === 1 ? null : n2;
    const progress = nprogress$1.render(!started);
    const bar = progress.querySelector(nprogress$1.settings.barSelector);
    const speed = nprogress$1.settings.speed;
    const ease = nprogress$1.settings.easing;
    progress.offsetWidth;
    queue((next) => {
      css(bar, {
        transform: "translate3d(" + toBarPerc(n2) + "%,0,0)",
        transition: "all " + speed + "ms " + ease
      });
      if (n2 === 1) {
        css(progress, {
          transition: "none",
          opacity: "1"
        });
        progress.offsetWidth;
        setTimeout(function() {
          css(progress, {
            transition: "all " + speed + "ms linear",
            opacity: "0"
          });
          setTimeout(function() {
            nprogress$1.remove();
            next();
          }, speed);
        }, speed);
      } else {
        setTimeout(() => next(), speed);
      }
    });
    return nprogress$1;
  },
  isStarted: () => typeof nprogress$1.status === "number",
  start: () => {
    if (!nprogress$1.status)
      nprogress$1.set(0);
    const work = () => {
      setTimeout(() => {
        if (!nprogress$1.status)
          return;
        nprogress$1.trickle();
        work();
      }, nprogress$1.settings.trickleSpeed);
    };
    if (nprogress$1.settings.trickle)
      work();
    return nprogress$1;
  },
  done: (force) => {
    if (!force && !nprogress$1.status)
      return nprogress$1;
    return nprogress$1.inc(0.3 + 0.5 * Math.random()).set(1);
  },
  inc: (amount) => {
    let n2 = nprogress$1.status;
    if (!n2) {
      return nprogress$1.start();
    }
    if (typeof amount !== "number") {
      amount = (1 - n2) * clamp(Math.random() * n2, 0.1, 0.95);
    }
    n2 = clamp(n2 + amount, 0, 0.994);
    return nprogress$1.set(n2);
  },
  trickle: () => nprogress$1.inc(Math.random() * nprogress$1.settings.trickleRate),
  render: (fromStart) => {
    if (nprogress$1.isRendered()) {
      return document.getElementById("nprogress");
    }
    addClass(document.documentElement, "nprogress-busy");
    const progress = document.createElement("div");
    progress.id = "nprogress";
    progress.innerHTML = nprogress$1.settings.template;
    const bar = progress.querySelector(nprogress$1.settings.barSelector);
    const perc = fromStart ? "-100" : toBarPerc(nprogress$1.status || 0);
    const parent = document.querySelector(nprogress$1.settings.parent);
    css(bar, {
      transition: "all 0 linear",
      transform: "translate3d(" + perc + "%,0,0)"
    });
    if (parent !== document.body) {
      addClass(parent, "nprogress-custom-parent");
    }
    parent == null ? void 0 : parent.appendChild(progress);
    return progress;
  },
  remove: () => {
    removeClass(document.documentElement, "nprogress-busy");
    removeClass(document.querySelector(nprogress$1.settings.parent), "nprogress-custom-parent");
    const progress = document.getElementById("nprogress");
    progress && removeElement(progress);
  },
  isRendered: () => !!document.getElementById("nprogress")
};
const clamp = (n2, min, max) => {
  if (n2 < min)
    return min;
  if (n2 > max)
    return max;
  return n2;
};
const toBarPerc = (n2) => (-1 + n2) * 100;
const queue = function() {
  const pending = [];
  function next() {
    const fn2 = pending.shift();
    if (fn2) {
      fn2(next);
    }
  }
  return function(fn2) {
    pending.push(fn2);
    if (pending.length === 1)
      next();
  };
}();
const css = function() {
  const cssPrefixes = ["Webkit", "O", "Moz", "ms"];
  const cssProps = {};
  function camelCase(string) {
    return string.replace(/^-ms-/, "ms-").replace(/-([\da-z])/gi, function(match, letter) {
      return letter.toUpperCase();
    });
  }
  function getVendorProp(name) {
    const style2 = document.body.style;
    if (name in style2)
      return name;
    let i2 = cssPrefixes.length;
    const capName = name.charAt(0).toUpperCase() + name.slice(1);
    let vendorName;
    while (i2--) {
      vendorName = cssPrefixes[i2] + capName;
      if (vendorName in style2)
        return vendorName;
    }
    return name;
  }
  function getStyleProp(name) {
    name = camelCase(name);
    return cssProps[name] || (cssProps[name] = getVendorProp(name));
  }
  function applyCss(element, prop, value) {
    prop = getStyleProp(prop);
    element.style[prop] = value;
  }
  return function(element, properties) {
    for (const prop in properties) {
      const value = properties[prop];
      if (value !== void 0 && Object.prototype.hasOwnProperty.call(properties, prop))
        applyCss(element, prop, value);
    }
  };
}();
const hasClass = (element, name) => {
  const list = typeof element === "string" ? element : classList(element);
  return list.indexOf(" " + name + " ") >= 0;
};
const addClass = (element, name) => {
  const oldList = classList(element);
  const newList = oldList + name;
  if (hasClass(oldList, name))
    return;
  element.className = newList.substring(1);
};
const removeClass = (element, name) => {
  const oldList = classList(element);
  if (!hasClass(element, name))
    return;
  const newList = oldList.replace(" " + name + " ", " ");
  element.className = newList.substring(1, newList.length - 1);
};
const classList = (element) => {
  return (" " + (element.className || "") + " ").replace(/\s+/gi, " ");
};
const removeElement = (element) => {
  element && element.parentNode && element.parentNode.removeChild(element);
};
var vars$1 = "";
var nprogress = "";
const useNprogress = () => {
  vue.onMounted(() => {
    const router = vueRouter.useRouter();
    const loadedPages = /* @__PURE__ */ new Set();
    loadedPages.add(router.currentRoute.value.path);
    router.beforeEach((to2) => {
      if (!loadedPages.has(to2.path)) {
        nprogress$1.start();
      }
    });
    router.afterEach((to2) => {
      loadedPages.add(to2.path);
      nprogress$1.done();
    });
  });
};
var clientConfig4 = defineClientConfig({
  setup() {
    useNprogress();
  }
});
const themeData$1 = JSON.parse(`{"logo":"/images/logo.png","author":"\u5C0F\u7D2B\u5FF5\u6C81","authorAvatar":"/images/logo.png","socialLinks":[{"icon":"GithubOutlined","link":"https://anyFork.github.io/blog-docs/"},{"icon":"GoogleCircleFilled","link":"https://anyFork.gitee.io/blog-docs/"}],"friendLink":[{"title":"vuepress 2.x","link":"https://v2.vuepress.vuejs.org/zh/"},{"title":"vuepress 1.x\u793E\u533A","link":"https://vuepress-community.netlify.app/zh/"},{"title":"vuepress-theme-reco 2.x","link":"http://v2.vuepress-reco.recoluan.com/"},{"title":"TypeScript\u4E2D\u6587\u6587\u6863","link":"https://ts.yayujs.com/"}],"colorMode":"auto","sidebarDepth":3,"navbar":[{"text":"\u9996\u9875","link":"/","icon":"HomeOutlined"},{"text":"\u5206\u7C7B","link":"/category","icon":"AppstoreOutlined"},{"text":"\u6807\u7B7E","link":"/tags","icon":"TagsOutlined"},{"text":"Java\u6587\u6863","children":[{"text":"Java\u8BBE\u8BA1\u6A21\u5F0F","link":"/design-pattern/","activeMatch":"/design-pattern/"},{"text":"Active on /foo/","link":"/not-foo/","activeMatch":"^/foo/"}]}],"sidebar":{"/design-patterns/":[{"text":"VuePress Reference","collapsible":true,"children":["/reference/cli.md","/reference/config.md"]},{"text":"Bundlers Reference","collapsible":true,"children":["/reference/bundler/vite.md","/reference/bundler/webpack.md"]}]},"locales":{"/":{"selectLanguageName":"English"}},"colorModeSwitch":true,"repo":null,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","editLink":true,"editLinkText":"Edit this page","lastUpdated":true,"lastUpdatedText":"Last Updated","contributors":true,"contributorsText":"Contributors","notFound":["There's nothing here.","How did we get here?","That's a Four-Oh-Four.","Looks like we've got some broken links."],"backToHome":"Take me home","openInNewWindow":"open in new window","toggleColorMode":"toggle color mode","toggleSidebar":"toggle sidebar"}`);
const themeData = vue.ref(themeData$1);
const useThemeData = () => themeData;
if (false) {
  __VUE_HMR_RUNTIME__.updateThemeData = (data2) => {
    themeData.value = data2;
  };
}
const themeLocaleDataSymbol = Symbol("");
const useThemeLocaleData$1 = () => {
  const themeLocaleData = vue.inject(themeLocaleDataSymbol);
  if (!themeLocaleData) {
    throw new Error("useThemeLocaleData() is called without provider.");
  }
  return themeLocaleData;
};
const resolveThemeLocaleData = (theme, routeLocale) => {
  var _a;
  return {
    ...theme,
    ...(_a = theme.locales) == null ? void 0 : _a[routeLocale]
  };
};
var clientConfig5 = defineClientConfig({
  enhance({ app }) {
    const themeData2 = useThemeData();
    const routeLocale = app._context.provides[routeLocaleSymbol];
    const themeLocaleData = vue.computed(() => resolveThemeLocaleData(themeData2.value, routeLocale.value));
    app.provide(themeLocaleDataSymbol, themeLocaleData);
    Object.defineProperties(app.config.globalProperties, {
      $theme: {
        get() {
          return themeData2.value;
        }
      },
      $themeLocale: {
        get() {
          return themeLocaleData.value;
        }
      }
    });
    {
      devtoolsApi.setupDevtoolsPlugin({
        app,
        id: "org.vuejs.vuepress.plugin-theme-data",
        label: "VuePress Theme Data Plugin",
        packageName: "@vuepress/plugin-theme-data",
        homepage: "https://v2.vuepress.vuejs.org",
        logo: "https://v2.vuepress.vuejs.org/images/hero.png",
        componentStateTypes: ["VuePress"]
      }, (api) => {
        api.on.inspectComponent((payload) => {
          payload.instanceData.state.push({
            type: "VuePress",
            key: "themeData",
            editable: false,
            value: themeData2.value
          }, {
            type: "VuePress",
            key: "themeLocaleData",
            editable: false,
            value: themeLocaleData.value
          });
        });
      });
    }
  }
});
var _export_sfc = (sfc, props) => {
  const target = sfc.__vccOpts || sfc;
  for (const [key, val] of props) {
    target[key] = val;
  }
  return target;
};
const _sfc_main$x = /* @__PURE__ */ vue.defineComponent({
  __name: "Badge",
  __ssrInlineRender: true,
  props: {
    type: {
      type: String,
      required: false,
      default: "tip"
    },
    text: {
      type: String,
      required: false,
      default: ""
    },
    vertical: {
      type: String,
      required: false,
      default: void 0
    }
  },
  setup(__props) {
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<span${serverRenderer.ssrRenderAttrs(vue.mergeProps({
        class: ["badge", __props.type],
        style: {
          verticalAlign: __props.vertical
        }
      }, _attrs))}>`);
      serverRenderer.ssrRenderSlot(_ctx.$slots, "default", {}, () => {
        _push(`${serverRenderer.ssrInterpolate(__props.text)}`);
      }, _push, _parent);
      _push(`</span>`);
    };
  }
});
const _sfc_setup$x = _sfc_main$x.setup;
_sfc_main$x.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/global/Badge.vue");
  return _sfc_setup$x ? _sfc_setup$x(props, ctx) : void 0;
};
var Badge = /* @__PURE__ */ _export_sfc(_sfc_main$x, [["__file", "Badge.vue"]]);
const CodeGroup = vue.defineComponent({
  name: "CodeGroup",
  setup(_2, { slots }) {
    const activeIndex = vue.ref(-1);
    const tabRefs = vue.ref([]);
    const activateNext = (i2 = activeIndex.value) => {
      if (i2 < tabRefs.value.length - 1) {
        activeIndex.value = i2 + 1;
      } else {
        activeIndex.value = 0;
      }
      tabRefs.value[activeIndex.value].focus();
    };
    const activatePrev = (i2 = activeIndex.value) => {
      if (i2 > 0) {
        activeIndex.value = i2 - 1;
      } else {
        activeIndex.value = tabRefs.value.length - 1;
      }
      tabRefs.value[activeIndex.value].focus();
    };
    const keyboardHandler = (event, i2) => {
      if (event.key === " " || event.key === "Enter") {
        event.preventDefault();
        activeIndex.value = i2;
      } else if (event.key === "ArrowRight") {
        event.preventDefault();
        activateNext(i2);
      } else if (event.key === "ArrowLeft") {
        event.preventDefault();
        activatePrev(i2);
      }
    };
    return () => {
      var _a;
      const items = (((_a = slots.default) == null ? void 0 : _a.call(slots)) || []).filter((vnode) => vnode.type.name === "CodeGroupItem").map((vnode) => {
        if (vnode.props === null) {
          vnode.props = {};
        }
        return vnode;
      });
      if (items.length === 0) {
        return null;
      }
      if (activeIndex.value < 0 || activeIndex.value > items.length - 1) {
        activeIndex.value = items.findIndex((vnode) => vnode.props.active === "" || vnode.props.active === true);
        if (activeIndex.value === -1) {
          activeIndex.value = 0;
        }
      } else {
        items.forEach((vnode, i2) => {
          vnode.props.active = i2 === activeIndex.value;
        });
      }
      return vue.h("div", { class: "code-group" }, [
        vue.h("div", { class: "code-group__nav" }, vue.h("ul", { class: "code-group__ul" }, items.map((vnode, i2) => {
          const isActive = i2 === activeIndex.value;
          return vue.h("li", { class: "code-group__li" }, vue.h("button", {
            ref: (element) => {
              if (element) {
                tabRefs.value[i2] = element;
              }
            },
            class: {
              "code-group__nav-tab": true,
              "code-group__nav-tab-active": isActive
            },
            ariaPressed: isActive,
            ariaExpanded: isActive,
            onClick: () => activeIndex.value = i2,
            onKeydown: (e2) => keyboardHandler(e2, i2)
          }, vnode.props.title));
        }))),
        items
      ]);
    };
  }
});
const __default__$1 = vue.defineComponent({
  name: "CodeGroupItem"
});
const _sfc_main$w = /* @__PURE__ */ vue.defineComponent({
  ...__default__$1,
  __ssrInlineRender: true,
  props: {
    title: {
      type: String,
      required: true
    },
    active: {
      type: Boolean,
      required: false,
      default: false
    }
  },
  setup(__props) {
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({
        class: ["code-group-item", { "code-group-item__active": __props.active }],
        "aria-selected": __props.active
      }, _attrs))}>`);
      serverRenderer.ssrRenderSlot(_ctx.$slots, "default", {}, null, _push, _parent);
      _push(`</div>`);
    };
  }
});
const _sfc_setup$w = _sfc_main$w.setup;
_sfc_main$w.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/global/CodeGroupItem.vue");
  return _sfc_setup$w ? _sfc_setup$w(props, ctx) : void 0;
};
var CodeGroupItem = /* @__PURE__ */ _export_sfc(_sfc_main$w, [["__file", "CodeGroupItem.vue"]]);
const darkModeSymbol = Symbol("");
const useDarkMode = () => {
  const isDarkMode = vue.inject(darkModeSymbol);
  if (!isDarkMode) {
    throw new Error("useDarkMode() is called without provider.");
  }
  return isDarkMode;
};
const setupDarkMode = () => {
  const themeLocale = useThemeLocaleData();
  const isDarkPreferred = core.usePreferredDark();
  const darkStorage = core.useStorage("vuepress-color-scheme", themeLocale.value.colorMode);
  const isDarkMode = vue.computed({
    get() {
      if (!themeLocale.value.colorModeSwitch) {
        return themeLocale.value.colorMode === "dark";
      }
      if (darkStorage.value === "auto") {
        return isDarkPreferred.value;
      }
      return darkStorage.value === "dark";
    },
    set(val) {
      if (val === isDarkPreferred.value) {
        darkStorage.value = "auto";
      } else {
        darkStorage.value = val ? "dark" : "light";
      }
    }
  });
  vue.provide(darkModeSymbol, isDarkMode);
  updateHtmlDarkClass(isDarkMode);
};
const updateHtmlDarkClass = (isDarkMode) => {
  const update = (value = isDarkMode.value) => {
    const htmlEl = window == null ? void 0 : window.document.querySelector("html");
    htmlEl == null ? void 0 : htmlEl.classList.toggle("dark", value);
  };
  vue.onMounted(() => {
    vue.watch(isDarkMode, update, { immediate: true });
  });
  vue.onUnmounted(() => update());
};
const useResolveRouteWithRedirect = (...args) => {
  const router = vueRouter.useRouter();
  const route = router.resolve(...args);
  const lastMatched = route.matched[route.matched.length - 1];
  if (!(lastMatched == null ? void 0 : lastMatched.redirect)) {
    return route;
  }
  const { redirect } = lastMatched;
  const resolvedRedirect = shared.isFunction(redirect) ? redirect(route) : redirect;
  const resolvedRedirectObj = shared.isString(resolvedRedirect) ? { path: resolvedRedirect } : resolvedRedirect;
  return useResolveRouteWithRedirect({
    hash: route.hash,
    query: route.query,
    params: route.params,
    ...resolvedRedirectObj
  });
};
const useNavLink = (item) => {
  const resolved = useResolveRouteWithRedirect(encodeURI(item));
  return {
    text: resolved.meta.title || item,
    link: resolved.name === "404" ? item : resolved.fullPath
  };
};
let promise = null;
let promiseResolve = null;
const scrollPromise = {
  wait: () => promise,
  pending: () => {
    promise = new Promise((resolve) => promiseResolve = resolve);
  },
  resolve: () => {
    promiseResolve == null ? void 0 : promiseResolve();
    promise = null;
    promiseResolve = null;
  }
};
const useScrollPromise = () => scrollPromise;
const sidebarItemsSymbol = Symbol("sidebarItems");
const useSidebarItems = () => {
  const sidebarItems = vue.inject(sidebarItemsSymbol);
  if (!sidebarItems) {
    throw new Error("useSidebarItems() is called without provider.");
  }
  return sidebarItems;
};
const setupSidebarItems = () => {
  const themeLocale = useThemeLocaleData();
  const frontmatter = usePageFrontmatter();
  const sidebarItems = vue.computed(() => resolveSidebarItems(frontmatter.value, themeLocale.value));
  vue.provide(sidebarItemsSymbol, sidebarItems);
};
const resolveSidebarItems = (frontmatter, themeLocale) => {
  var _a, _b, _c, _d;
  const sidebarConfig = (_b = (_a = frontmatter.sidebar) != null ? _a : themeLocale.sidebar) != null ? _b : "auto";
  const sidebarDepth = (_d = (_c = frontmatter.sidebarDepth) != null ? _c : themeLocale.sidebarDepth) != null ? _d : 2;
  if (frontmatter.home || sidebarConfig === false) {
    return [];
  }
  if (sidebarConfig === "auto") {
    return resolveAutoSidebarItems(sidebarDepth);
  }
  if (shared.isArray(sidebarConfig)) {
    return resolveArraySidebarItems(sidebarConfig, sidebarDepth);
  }
  if (shared.isPlainObject(sidebarConfig)) {
    return resolveMultiSidebarItems(sidebarConfig, sidebarDepth);
  }
  return [];
};
const headerToSidebarItem = (header, sidebarDepth) => ({
  text: header.title,
  link: `#${header.slug}`,
  children: headersToSidebarItemChildren(header.children, sidebarDepth)
});
const headersToSidebarItemChildren = (headers, sidebarDepth) => sidebarDepth > 0 ? headers.map((header) => headerToSidebarItem(header, sidebarDepth - 1)) : [];
const resolveAutoSidebarItems = (sidebarDepth) => {
  const page = usePageData();
  return [
    {
      text: page.value.title,
      children: headersToSidebarItemChildren(page.value.headers, sidebarDepth)
    }
  ];
};
const resolveArraySidebarItems = (sidebarConfig, sidebarDepth) => {
  const route = vueRouter.useRoute();
  const page = usePageData();
  const handleChildItem = (item) => {
    var _a;
    let childItem;
    if (shared.isString(item)) {
      childItem = useNavLink(item);
    } else {
      childItem = item;
    }
    if (childItem.children) {
      return {
        ...childItem,
        children: childItem.children.map((item2) => handleChildItem(item2))
      };
    }
    if (childItem.link === route.path) {
      const headers = ((_a = page.value.headers[0]) == null ? void 0 : _a.level) === 1 ? page.value.headers[0].children : page.value.headers;
      return {
        ...childItem,
        children: headersToSidebarItemChildren(headers, sidebarDepth)
      };
    }
    return childItem;
  };
  return sidebarConfig.map((item) => handleChildItem(item));
};
const resolveMultiSidebarItems = (sidebarConfig, sidebarDepth) => {
  var _a;
  const route = vueRouter.useRoute();
  const sidebarPath = shared.resolveLocalePath(sidebarConfig, route.path);
  const matchedSidebarConfig = (_a = sidebarConfig[sidebarPath]) != null ? _a : [];
  return resolveArraySidebarItems(matchedSidebarConfig, sidebarDepth);
};
const useThemeLocaleData = () => useThemeLocaleData$1();
var index = "";
var clientConfig6 = defineClientConfig({
  enhance({ app, router }) {
    app.component("Badge", Badge);
    app.component("CodeGroup", CodeGroup);
    app.component("CodeGroupItem", CodeGroupItem);
    app.component("AutoLinkExternalIcon", () => {
      const ExternalLinkIcon2 = app.component("ExternalLinkIcon");
      if (ExternalLinkIcon2) {
        return vue.h(ExternalLinkIcon2);
      }
      return null;
    });
    app.component("NavbarSearch", () => {
      const SearchComponent = app.component("Docsearch") || app.component("SearchBox");
      if (SearchComponent) {
        return vue.h(SearchComponent);
      }
      return null;
    });
    const scrollBehavior = router.options.scrollBehavior;
    router.options.scrollBehavior = async (...args) => {
      await useScrollPromise().wait();
      return scrollBehavior(...args);
    };
  },
  setup() {
    setupDarkMode();
    setupSidebarItems();
  }
});
var clientConfig7 = {
  enhance: ({ app }) => {
    app.component("Icon", vue.defineAsyncComponent(() => Promise.resolve().then(function() {
      return Icon$1;
    }))), app.component("Item", vue.defineAsyncComponent(() => Promise.resolve().then(function() {
      return Item$1;
    }))), app.component("Pagination", vue.defineAsyncComponent(() => Promise.resolve().then(function() {
      return Pagination$1;
    })));
  }
};
/*! @docsearch/js 3.2.1 | MIT License | Â© Algolia, Inc. and contributors | https://docsearch.algolia.com */
function e(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function t(t2) {
  for (var n2 = 1; n2 < arguments.length; n2++) {
    var o2 = null != arguments[n2] ? arguments[n2] : {};
    n2 % 2 ? e(Object(o2), true).forEach(function(e2) {
      r(t2, e2, o2[e2]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t2, Object.getOwnPropertyDescriptors(o2)) : e(Object(o2)).forEach(function(e2) {
      Object.defineProperty(t2, e2, Object.getOwnPropertyDescriptor(o2, e2));
    });
  }
  return t2;
}
function n$1(e2) {
  return n$1 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
    return typeof e3;
  } : function(e3) {
    return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
  }, n$1(e2);
}
function r(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function o() {
  return o = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, o.apply(this, arguments);
}
function c(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function i$1(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || u(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function a$1(e2) {
  return function(e3) {
    if (Array.isArray(e3))
      return l$1(e3);
  }(e2) || function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }(e2) || u(e2) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function u(e2, t2) {
  if (e2) {
    if ("string" == typeof e2)
      return l$1(e2, t2);
    var n2 = Object.prototype.toString.call(e2).slice(8, -1);
    return "Object" === n2 && e2.constructor && (n2 = e2.constructor.name), "Map" === n2 || "Set" === n2 ? Array.from(e2) : "Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? l$1(e2, t2) : void 0;
  }
}
function l$1(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
var s, f$1, p, m, d, h = {}, v = [], y = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;
function _(e2, t2) {
  for (var n2 in t2)
    e2[n2] = t2[n2];
  return e2;
}
function b$1(e2) {
  var t2 = e2.parentNode;
  t2 && t2.removeChild(e2);
}
function g(e2, t2, n2) {
  var r2, o2, c2, i2 = arguments, a2 = {};
  for (c2 in t2)
    "key" == c2 ? r2 = t2[c2] : "ref" == c2 ? o2 = t2[c2] : a2[c2] = t2[c2];
  if (arguments.length > 3)
    for (n2 = [n2], c2 = 3; c2 < arguments.length; c2++)
      n2.push(i2[c2]);
  if (null != n2 && (a2.children = n2), "function" == typeof e2 && null != e2.defaultProps)
    for (c2 in e2.defaultProps)
      void 0 === a2[c2] && (a2[c2] = e2.defaultProps[c2]);
  return O(e2, a2, r2, o2, null);
}
function O(e2, t2, n2, r2, o2) {
  var c2 = { type: e2, props: t2, key: n2, ref: r2, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, __h: null, constructor: void 0, __v: null == o2 ? ++s.__v : o2 };
  return null != s.vnode && s.vnode(c2), c2;
}
function S(e2) {
  return e2.children;
}
function E(e2, t2) {
  this.props = e2, this.context = t2;
}
function w(e2, t2) {
  if (null == t2)
    return e2.__ ? w(e2.__, e2.__.__k.indexOf(e2) + 1) : null;
  for (var n2; t2 < e2.__k.length; t2++)
    if (null != (n2 = e2.__k[t2]) && null != n2.__e)
      return n2.__e;
  return "function" == typeof e2.type ? w(e2) : null;
}
function j(e2) {
  var t2, n2;
  if (null != (e2 = e2.__) && null != e2.__c) {
    for (e2.__e = e2.__c.base = null, t2 = 0; t2 < e2.__k.length; t2++)
      if (null != (n2 = e2.__k[t2]) && null != n2.__e) {
        e2.__e = e2.__c.base = n2.__e;
        break;
      }
    return j(e2);
  }
}
function P(e2) {
  (!e2.__d && (e2.__d = true) && f$1.push(e2) && !I$1.__r++ || m !== s.debounceRendering) && ((m = s.debounceRendering) || p)(I$1);
}
function I$1() {
  for (var e2; I$1.__r = f$1.length; )
    e2 = f$1.sort(function(e3, t2) {
      return e3.__v.__b - t2.__v.__b;
    }), f$1 = [], e2.some(function(e3) {
      var t2, n2, r2, o2, c2, i2;
      e3.__d && (c2 = (o2 = (t2 = e3).__v).__e, (i2 = t2.__P) && (n2 = [], (r2 = _({}, o2)).__v = o2.__v + 1, L$1(i2, o2, r2, t2.__n, void 0 !== i2.ownerSVGElement, null != o2.__h ? [c2] : null, n2, null == c2 ? w(o2) : c2, o2.__h), q(n2, o2), o2.__e != c2 && j(o2)));
    });
}
function k$1(e2, t2, n2, r2, o2, c2, i2, a2, u2, l2) {
  var s2, f2, p2, m2, d2, y2, _2, b2 = r2 && r2.__k || v, g2 = b2.length;
  for (n2.__k = [], s2 = 0; s2 < t2.length; s2++)
    if (null != (m2 = n2.__k[s2] = null == (m2 = t2[s2]) || "boolean" == typeof m2 ? null : "string" == typeof m2 || "number" == typeof m2 ? O(null, m2, null, null, m2) : Array.isArray(m2) ? O(S, { children: m2 }, null, null, null) : m2.__b > 0 ? O(m2.type, m2.props, m2.key, null, m2.__v) : m2)) {
      if (m2.__ = n2, m2.__b = n2.__b + 1, null === (p2 = b2[s2]) || p2 && m2.key == p2.key && m2.type === p2.type)
        b2[s2] = void 0;
      else
        for (f2 = 0; f2 < g2; f2++) {
          if ((p2 = b2[f2]) && m2.key == p2.key && m2.type === p2.type) {
            b2[f2] = void 0;
            break;
          }
          p2 = null;
        }
      L$1(e2, m2, p2 = p2 || h, o2, c2, i2, a2, u2, l2), d2 = m2.__e, (f2 = m2.ref) && p2.ref != f2 && (_2 || (_2 = []), p2.ref && _2.push(p2.ref, null, m2), _2.push(f2, m2.__c || d2, m2)), null != d2 ? (null == y2 && (y2 = d2), "function" == typeof m2.type && null != m2.__k && m2.__k === p2.__k ? m2.__d = u2 = D(m2, u2, e2) : u2 = A(e2, m2, p2, b2, d2, u2), l2 || "option" !== n2.type ? "function" == typeof n2.type && (n2.__d = u2) : e2.value = "") : u2 && p2.__e == u2 && u2.parentNode != e2 && (u2 = w(p2));
    }
  for (n2.__e = y2, s2 = g2; s2--; )
    null != b2[s2] && ("function" == typeof n2.type && null != b2[s2].__e && b2[s2].__e == n2.__d && (n2.__d = w(r2, s2 + 1)), U(b2[s2], b2[s2]));
  if (_2)
    for (s2 = 0; s2 < _2.length; s2++)
      H$1(_2[s2], _2[++s2], _2[++s2]);
}
function D(e2, t2, n2) {
  var r2, o2;
  for (r2 = 0; r2 < e2.__k.length; r2++)
    (o2 = e2.__k[r2]) && (o2.__ = e2, t2 = "function" == typeof o2.type ? D(o2, t2, n2) : A(n2, o2, o2, e2.__k, o2.__e, t2));
  return t2;
}
function C(e2, t2) {
  return t2 = t2 || [], null == e2 || "boolean" == typeof e2 || (Array.isArray(e2) ? e2.some(function(e3) {
    C(e3, t2);
  }) : t2.push(e2)), t2;
}
function A(e2, t2, n2, r2, o2, c2) {
  var i2, a2, u2;
  if (void 0 !== t2.__d)
    i2 = t2.__d, t2.__d = void 0;
  else if (null == n2 || o2 != c2 || null == o2.parentNode)
    e:
      if (null == c2 || c2.parentNode !== e2)
        e2.appendChild(o2), i2 = null;
      else {
        for (a2 = c2, u2 = 0; (a2 = a2.nextSibling) && u2 < r2.length; u2 += 2)
          if (a2 == o2)
            break e;
        e2.insertBefore(o2, c2), i2 = c2;
      }
  return void 0 !== i2 ? i2 : o2.nextSibling;
}
function x(e2, t2, n2) {
  "-" === t2[0] ? e2.setProperty(t2, n2) : e2[t2] = null == n2 ? "" : "number" != typeof n2 || y.test(t2) ? n2 : n2 + "px";
}
function N$1(e2, t2, n2, r2, o2) {
  var c2;
  e:
    if ("style" === t2)
      if ("string" == typeof n2)
        e2.style.cssText = n2;
      else {
        if ("string" == typeof r2 && (e2.style.cssText = r2 = ""), r2)
          for (t2 in r2)
            n2 && t2 in n2 || x(e2.style, t2, "");
        if (n2)
          for (t2 in n2)
            r2 && n2[t2] === r2[t2] || x(e2.style, t2, n2[t2]);
      }
    else if ("o" === t2[0] && "n" === t2[1])
      c2 = t2 !== (t2 = t2.replace(/Capture$/, "")), t2 = t2.toLowerCase() in e2 ? t2.toLowerCase().slice(2) : t2.slice(2), e2.l || (e2.l = {}), e2.l[t2 + c2] = n2, n2 ? r2 || e2.addEventListener(t2, c2 ? R : T, c2) : e2.removeEventListener(t2, c2 ? R : T, c2);
    else if ("dangerouslySetInnerHTML" !== t2) {
      if (o2)
        t2 = t2.replace(/xlink[H:h]/, "h").replace(/sName$/, "s");
      else if ("href" !== t2 && "list" !== t2 && "form" !== t2 && "download" !== t2 && t2 in e2)
        try {
          e2[t2] = null == n2 ? "" : n2;
          break e;
        } catch (e3) {
        }
      "function" == typeof n2 || (null != n2 && (false !== n2 || "a" === t2[0] && "r" === t2[1]) ? e2.setAttribute(t2, n2) : e2.removeAttribute(t2));
    }
}
function T(e2) {
  this.l[e2.type + false](s.event ? s.event(e2) : e2);
}
function R(e2) {
  this.l[e2.type + true](s.event ? s.event(e2) : e2);
}
function L$1(e2, t2, n2, r2, o2, c2, i2, a2, u2) {
  var l2, f2, p2, m2, d2, h2, v2, y2, b2, g2, O2, w2 = t2.type;
  if (void 0 !== t2.constructor)
    return null;
  null != n2.__h && (u2 = n2.__h, a2 = t2.__e = n2.__e, t2.__h = null, c2 = [a2]), (l2 = s.__b) && l2(t2);
  try {
    e:
      if ("function" == typeof w2) {
        if (y2 = t2.props, b2 = (l2 = w2.contextType) && r2[l2.__c], g2 = l2 ? b2 ? b2.props.value : l2.__ : r2, n2.__c ? v2 = (f2 = t2.__c = n2.__c).__ = f2.__E : ("prototype" in w2 && w2.prototype.render ? t2.__c = f2 = new w2(y2, g2) : (t2.__c = f2 = new E(y2, g2), f2.constructor = w2, f2.render = F), b2 && b2.sub(f2), f2.props = y2, f2.state || (f2.state = {}), f2.context = g2, f2.__n = r2, p2 = f2.__d = true, f2.__h = []), null == f2.__s && (f2.__s = f2.state), null != w2.getDerivedStateFromProps && (f2.__s == f2.state && (f2.__s = _({}, f2.__s)), _(f2.__s, w2.getDerivedStateFromProps(y2, f2.__s))), m2 = f2.props, d2 = f2.state, p2)
          null == w2.getDerivedStateFromProps && null != f2.componentWillMount && f2.componentWillMount(), null != f2.componentDidMount && f2.__h.push(f2.componentDidMount);
        else {
          if (null == w2.getDerivedStateFromProps && y2 !== m2 && null != f2.componentWillReceiveProps && f2.componentWillReceiveProps(y2, g2), !f2.__e && null != f2.shouldComponentUpdate && false === f2.shouldComponentUpdate(y2, f2.__s, g2) || t2.__v === n2.__v) {
            f2.props = y2, f2.state = f2.__s, t2.__v !== n2.__v && (f2.__d = false), f2.__v = t2, t2.__e = n2.__e, t2.__k = n2.__k, f2.__h.length && i2.push(f2);
            break e;
          }
          null != f2.componentWillUpdate && f2.componentWillUpdate(y2, f2.__s, g2), null != f2.componentDidUpdate && f2.__h.push(function() {
            f2.componentDidUpdate(m2, d2, h2);
          });
        }
        f2.context = g2, f2.props = y2, f2.state = f2.__s, (l2 = s.__r) && l2(t2), f2.__d = false, f2.__v = t2, f2.__P = e2, l2 = f2.render(f2.props, f2.state, f2.context), f2.state = f2.__s, null != f2.getChildContext && (r2 = _(_({}, r2), f2.getChildContext())), p2 || null == f2.getSnapshotBeforeUpdate || (h2 = f2.getSnapshotBeforeUpdate(m2, d2)), O2 = null != l2 && l2.type === S && null == l2.key ? l2.props.children : l2, k$1(e2, Array.isArray(O2) ? O2 : [O2], t2, n2, r2, o2, c2, i2, a2, u2), f2.base = t2.__e, t2.__h = null, f2.__h.length && i2.push(f2), v2 && (f2.__E = f2.__ = null), f2.__e = false;
      } else
        null == c2 && t2.__v === n2.__v ? (t2.__k = n2.__k, t2.__e = n2.__e) : t2.__e = M(n2.__e, t2, n2, r2, o2, c2, i2, u2);
    (l2 = s.diffed) && l2(t2);
  } catch (e3) {
    t2.__v = null, (u2 || null != c2) && (t2.__e = a2, t2.__h = !!u2, c2[c2.indexOf(a2)] = null), s.__e(e3, t2, n2);
  }
}
function q(e2, t2) {
  s.__c && s.__c(t2, e2), e2.some(function(t3) {
    try {
      e2 = t3.__h, t3.__h = [], e2.some(function(e3) {
        e3.call(t3);
      });
    } catch (e3) {
      s.__e(e3, t3.__v);
    }
  });
}
function M(e2, t2, n2, r2, o2, c2, i2, a2) {
  var u2, l2, s2, f2, p2 = n2.props, m2 = t2.props, d2 = t2.type, y2 = 0;
  if ("svg" === d2 && (o2 = true), null != c2) {
    for (; y2 < c2.length; y2++)
      if ((u2 = c2[y2]) && (u2 === e2 || (d2 ? u2.localName == d2 : 3 == u2.nodeType))) {
        e2 = u2, c2[y2] = null;
        break;
      }
  }
  if (null == e2) {
    if (null === d2)
      return document.createTextNode(m2);
    e2 = o2 ? document.createElementNS("http://www.w3.org/2000/svg", d2) : document.createElement(d2, m2.is && m2), c2 = null, a2 = false;
  }
  if (null === d2)
    p2 === m2 || a2 && e2.data === m2 || (e2.data = m2);
  else {
    if (c2 = c2 && v.slice.call(e2.childNodes), l2 = (p2 = n2.props || h).dangerouslySetInnerHTML, s2 = m2.dangerouslySetInnerHTML, !a2) {
      if (null != c2)
        for (p2 = {}, f2 = 0; f2 < e2.attributes.length; f2++)
          p2[e2.attributes[f2].name] = e2.attributes[f2].value;
      (s2 || l2) && (s2 && (l2 && s2.__html == l2.__html || s2.__html === e2.innerHTML) || (e2.innerHTML = s2 && s2.__html || ""));
    }
    if (function(e3, t3, n3, r3, o3) {
      var c3;
      for (c3 in n3)
        "children" === c3 || "key" === c3 || c3 in t3 || N$1(e3, c3, null, n3[c3], r3);
      for (c3 in t3)
        o3 && "function" != typeof t3[c3] || "children" === c3 || "key" === c3 || "value" === c3 || "checked" === c3 || n3[c3] === t3[c3] || N$1(e3, c3, t3[c3], n3[c3], r3);
    }(e2, m2, p2, o2, a2), s2)
      t2.__k = [];
    else if (y2 = t2.props.children, k$1(e2, Array.isArray(y2) ? y2 : [y2], t2, n2, r2, o2 && "foreignObject" !== d2, c2, i2, e2.firstChild, a2), null != c2)
      for (y2 = c2.length; y2--; )
        null != c2[y2] && b$1(c2[y2]);
    a2 || ("value" in m2 && void 0 !== (y2 = m2.value) && (y2 !== e2.value || "progress" === d2 && !y2) && N$1(e2, "value", y2, p2.value, false), "checked" in m2 && void 0 !== (y2 = m2.checked) && y2 !== e2.checked && N$1(e2, "checked", y2, p2.checked, false));
  }
  return e2;
}
function H$1(e2, t2, n2) {
  try {
    "function" == typeof e2 ? e2(t2) : e2.current = t2;
  } catch (e3) {
    s.__e(e3, n2);
  }
}
function U(e2, t2, n2) {
  var r2, o2, c2;
  if (s.unmount && s.unmount(e2), (r2 = e2.ref) && (r2.current && r2.current !== e2.__e || H$1(r2, null, t2)), n2 || "function" == typeof e2.type || (n2 = null != (o2 = e2.__e)), e2.__e = e2.__d = void 0, null != (r2 = e2.__c)) {
    if (r2.componentWillUnmount)
      try {
        r2.componentWillUnmount();
      } catch (e3) {
        s.__e(e3, t2);
      }
    r2.base = r2.__P = null;
  }
  if (r2 = e2.__k)
    for (c2 = 0; c2 < r2.length; c2++)
      r2[c2] && U(r2[c2], t2, n2);
  null != o2 && b$1(o2);
}
function F(e2, t2, n2) {
  return this.constructor(e2, n2);
}
function B(e2, t2, n2) {
  var r2, o2, c2;
  s.__ && s.__(e2, t2), o2 = (r2 = "function" == typeof n2) ? null : n2 && n2.__k || t2.__k, c2 = [], L$1(t2, e2 = (!r2 && n2 || t2).__k = g(S, null, [e2]), o2 || h, h, void 0 !== t2.ownerSVGElement, !r2 && n2 ? [n2] : o2 ? null : t2.firstChild ? v.slice.call(t2.childNodes) : null, c2, !r2 && n2 ? n2 : o2 ? o2.__e : t2.firstChild, r2), q(c2, e2);
}
function V(e2, t2) {
  B(e2, t2, V);
}
function z$1(e2, t2, n2) {
  var r2, o2, c2, i2 = arguments, a2 = _({}, e2.props);
  for (c2 in t2)
    "key" == c2 ? r2 = t2[c2] : "ref" == c2 ? o2 = t2[c2] : a2[c2] = t2[c2];
  if (arguments.length > 3)
    for (n2 = [n2], c2 = 3; c2 < arguments.length; c2++)
      n2.push(i2[c2]);
  return null != n2 && (a2.children = n2), O(e2.type, a2, r2 || e2.key, o2 || e2.ref, null);
}
s = { __e: function(e2, t2) {
  for (var n2, r2, o2; t2 = t2.__; )
    if ((n2 = t2.__c) && !n2.__)
      try {
        if ((r2 = n2.constructor) && null != r2.getDerivedStateFromError && (n2.setState(r2.getDerivedStateFromError(e2)), o2 = n2.__d), null != n2.componentDidCatch && (n2.componentDidCatch(e2), o2 = n2.__d), o2)
          return n2.__E = n2;
      } catch (t3) {
        e2 = t3;
      }
  throw e2;
}, __v: 0 }, E.prototype.setState = function(e2, t2) {
  var n2;
  n2 = null != this.__s && this.__s !== this.state ? this.__s : this.__s = _({}, this.state), "function" == typeof e2 && (e2 = e2(_({}, n2), this.props)), e2 && _(n2, e2), null != e2 && this.__v && (t2 && this.__h.push(t2), P(this));
}, E.prototype.forceUpdate = function(e2) {
  this.__v && (this.__e = true, e2 && this.__h.push(e2), P(this));
}, E.prototype.render = S, f$1 = [], p = "function" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, I$1.__r = 0, d = 0;
var W$1, K, J, $ = 0, Q = [], Y = s.__b, G = s.__r, Z$1 = s.diffed, X = s.__c, ee = s.unmount;
function te(e2, t2) {
  s.__h && s.__h(K, e2, $ || t2), $ = 0;
  var n2 = K.__H || (K.__H = { __: [], __h: [] });
  return e2 >= n2.__.length && n2.__.push({}), n2.__[e2];
}
function ne(e2) {
  return $ = 1, re(pe, e2);
}
function re(e2, t2, n2) {
  var r2 = te(W$1++, 2);
  return r2.t = e2, r2.__c || (r2.__ = [n2 ? n2(t2) : pe(void 0, t2), function(e3) {
    var t3 = r2.t(r2.__[0], e3);
    r2.__[0] !== t3 && (r2.__ = [t3, r2.__[1]], r2.__c.setState({}));
  }], r2.__c = K), r2.__;
}
function oe(e2, t2) {
  var n2 = te(W$1++, 3);
  !s.__s && fe(n2.__H, t2) && (n2.__ = e2, n2.__H = t2, K.__H.__h.push(n2));
}
function ce(e2, t2) {
  var n2 = te(W$1++, 4);
  !s.__s && fe(n2.__H, t2) && (n2.__ = e2, n2.__H = t2, K.__h.push(n2));
}
function ie(e2, t2) {
  var n2 = te(W$1++, 7);
  return fe(n2.__H, t2) && (n2.__ = e2(), n2.__H = t2, n2.__h = e2), n2.__;
}
function ae() {
  Q.forEach(function(e2) {
    if (e2.__P)
      try {
        e2.__H.__h.forEach(le), e2.__H.__h.forEach(se), e2.__H.__h = [];
      } catch (t2) {
        e2.__H.__h = [], s.__e(t2, e2.__v);
      }
  }), Q = [];
}
s.__b = function(e2) {
  K = null, Y && Y(e2);
}, s.__r = function(e2) {
  G && G(e2), W$1 = 0;
  var t2 = (K = e2.__c).__H;
  t2 && (t2.__h.forEach(le), t2.__h.forEach(se), t2.__h = []);
}, s.diffed = function(e2) {
  Z$1 && Z$1(e2);
  var t2 = e2.__c;
  t2 && t2.__H && t2.__H.__h.length && (1 !== Q.push(t2) && J === s.requestAnimationFrame || ((J = s.requestAnimationFrame) || function(e3) {
    var t3, n2 = function() {
      clearTimeout(r2), ue && cancelAnimationFrame(t3), setTimeout(e3);
    }, r2 = setTimeout(n2, 100);
    ue && (t3 = requestAnimationFrame(n2));
  })(ae)), K = void 0;
}, s.__c = function(e2, t2) {
  t2.some(function(e3) {
    try {
      e3.__h.forEach(le), e3.__h = e3.__h.filter(function(e4) {
        return !e4.__ || se(e4);
      });
    } catch (n2) {
      t2.some(function(e4) {
        e4.__h && (e4.__h = []);
      }), t2 = [], s.__e(n2, e3.__v);
    }
  }), X && X(e2, t2);
}, s.unmount = function(e2) {
  ee && ee(e2);
  var t2 = e2.__c;
  if (t2 && t2.__H)
    try {
      t2.__H.__.forEach(le);
    } catch (e3) {
      s.__e(e3, t2.__v);
    }
};
var ue = "function" == typeof requestAnimationFrame;
function le(e2) {
  var t2 = K;
  "function" == typeof e2.__c && e2.__c(), K = t2;
}
function se(e2) {
  var t2 = K;
  e2.__c = e2.__(), K = t2;
}
function fe(e2, t2) {
  return !e2 || e2.length !== t2.length || t2.some(function(t3, n2) {
    return t3 !== e2[n2];
  });
}
function pe(e2, t2) {
  return "function" == typeof t2 ? t2(e2) : t2;
}
function me(e2, t2) {
  for (var n2 in t2)
    e2[n2] = t2[n2];
  return e2;
}
function de(e2, t2) {
  for (var n2 in e2)
    if ("__source" !== n2 && !(n2 in t2))
      return true;
  for (var r2 in t2)
    if ("__source" !== r2 && e2[r2] !== t2[r2])
      return true;
  return false;
}
function he(e2) {
  this.props = e2;
}
(he.prototype = new E()).isPureReactComponent = true, he.prototype.shouldComponentUpdate = function(e2, t2) {
  return de(this.props, e2) || de(this.state, t2);
};
var ve = s.__b;
s.__b = function(e2) {
  e2.type && e2.type.__f && e2.ref && (e2.props.ref = e2.ref, e2.ref = null), ve && ve(e2);
};
var ye = "undefined" != typeof Symbol && Symbol.for && Symbol.for("react.forward_ref") || 3911;
var _e = function(e2, t2) {
  return null == e2 ? null : C(C(e2).map(t2));
}, be = { map: _e, forEach: _e, count: function(e2) {
  return e2 ? C(e2).length : 0;
}, only: function(e2) {
  var t2 = C(e2);
  if (1 !== t2.length)
    throw "Children.only";
  return t2[0];
}, toArray: C }, ge = s.__e;
function Oe() {
  this.__u = 0, this.t = null, this.__b = null;
}
function Se(e2) {
  var t2 = e2.__.__c;
  return t2 && t2.__e && t2.__e(e2);
}
function Ee() {
  this.u = null, this.o = null;
}
s.__e = function(e2, t2, n2) {
  if (e2.then) {
    for (var r2, o2 = t2; o2 = o2.__; )
      if ((r2 = o2.__c) && r2.__c)
        return null == t2.__e && (t2.__e = n2.__e, t2.__k = n2.__k), r2.__c(e2, t2);
  }
  ge(e2, t2, n2);
}, (Oe.prototype = new E()).__c = function(e2, t2) {
  var n2 = t2.__c, r2 = this;
  null == r2.t && (r2.t = []), r2.t.push(n2);
  var o2 = Se(r2.__v), c2 = false, i2 = function() {
    c2 || (c2 = true, n2.componentWillUnmount = n2.__c, o2 ? o2(a2) : a2());
  };
  n2.__c = n2.componentWillUnmount, n2.componentWillUnmount = function() {
    i2(), n2.__c && n2.__c();
  };
  var a2 = function() {
    if (!--r2.__u) {
      if (r2.state.__e) {
        var e3 = r2.state.__e;
        r2.__v.__k[0] = function e4(t4, n3, r3) {
          return t4 && (t4.__v = null, t4.__k = t4.__k && t4.__k.map(function(t5) {
            return e4(t5, n3, r3);
          }), t4.__c && t4.__c.__P === n3 && (t4.__e && r3.insertBefore(t4.__e, t4.__d), t4.__c.__e = true, t4.__c.__P = r3)), t4;
        }(e3, e3.__c.__P, e3.__c.__O);
      }
      var t3;
      for (r2.setState({ __e: r2.__b = null }); t3 = r2.t.pop(); )
        t3.forceUpdate();
    }
  }, u2 = true === t2.__h;
  r2.__u++ || u2 || r2.setState({ __e: r2.__b = r2.__v.__k[0] }), e2.then(i2, i2);
}, Oe.prototype.componentWillUnmount = function() {
  this.t = [];
}, Oe.prototype.render = function(e2, t2) {
  if (this.__b) {
    if (this.__v.__k) {
      var n2 = document.createElement("div"), r2 = this.__v.__k[0].__c;
      this.__v.__k[0] = function e3(t3, n3, r3) {
        return t3 && (t3.__c && t3.__c.__H && (t3.__c.__H.__.forEach(function(e4) {
          "function" == typeof e4.__c && e4.__c();
        }), t3.__c.__H = null), null != (t3 = me({}, t3)).__c && (t3.__c.__P === r3 && (t3.__c.__P = n3), t3.__c = null), t3.__k = t3.__k && t3.__k.map(function(t4) {
          return e3(t4, n3, r3);
        })), t3;
      }(this.__b, n2, r2.__O = r2.__P);
    }
    this.__b = null;
  }
  var o2 = t2.__e && g(S, null, e2.fallback);
  return o2 && (o2.__h = null), [g(S, null, t2.__e ? null : e2.children), o2];
};
var we = function(e2, t2, n2) {
  if (++n2[1] === n2[0] && e2.o.delete(t2), e2.props.revealOrder && ("t" !== e2.props.revealOrder[0] || !e2.o.size))
    for (n2 = e2.u; n2; ) {
      for (; n2.length > 3; )
        n2.pop()();
      if (n2[1] < n2[0])
        break;
      e2.u = n2 = n2[2];
    }
};
function je(e2) {
  return this.getChildContext = function() {
    return e2.context;
  }, e2.children;
}
function Pe(e2) {
  var t2 = this, n2 = e2.i;
  t2.componentWillUnmount = function() {
    B(null, t2.l), t2.l = null, t2.i = null;
  }, t2.i && t2.i !== n2 && t2.componentWillUnmount(), e2.__v ? (t2.l || (t2.i = n2, t2.l = { nodeType: 1, parentNode: n2, childNodes: [], appendChild: function(e3) {
    this.childNodes.push(e3), t2.i.appendChild(e3);
  }, insertBefore: function(e3, n3) {
    this.childNodes.push(e3), t2.i.appendChild(e3);
  }, removeChild: function(e3) {
    this.childNodes.splice(this.childNodes.indexOf(e3) >>> 1, 1), t2.i.removeChild(e3);
  } }), B(g(je, { context: t2.context }, e2.__v), t2.l)) : t2.l && t2.componentWillUnmount();
}
function Ie(e2, t2) {
  return g(Pe, { __v: e2, i: t2 });
}
(Ee.prototype = new E()).__e = function(e2) {
  var t2 = this, n2 = Se(t2.__v), r2 = t2.o.get(e2);
  return r2[0]++, function(o2) {
    var c2 = function() {
      t2.props.revealOrder ? (r2.push(o2), we(t2, e2, r2)) : o2();
    };
    n2 ? n2(c2) : c2();
  };
}, Ee.prototype.render = function(e2) {
  this.u = null, this.o = /* @__PURE__ */ new Map();
  var t2 = C(e2.children);
  e2.revealOrder && "b" === e2.revealOrder[0] && t2.reverse();
  for (var n2 = t2.length; n2--; )
    this.o.set(t2[n2], this.u = [1, 0, this.u]);
  return e2.children;
}, Ee.prototype.componentDidUpdate = Ee.prototype.componentDidMount = function() {
  var e2 = this;
  this.o.forEach(function(t2, n2) {
    we(e2, n2, t2);
  });
};
var ke = "undefined" != typeof Symbol && Symbol.for && Symbol.for("react.element") || 60103, De = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/, Ce = function(e2) {
  return ("undefined" != typeof Symbol && "symbol" == n$1(Symbol()) ? /fil|che|rad/i : /fil|che|ra/i).test(e2);
};
function Ae(e2, t2, n2) {
  return null == t2.__k && (t2.textContent = ""), B(e2, t2), "function" == typeof n2 && n2(), e2 ? e2.__c : null;
}
E.prototype.isReactComponent = {}, ["componentWillMount", "componentWillReceiveProps", "componentWillUpdate"].forEach(function(e2) {
  Object.defineProperty(E.prototype, e2, { configurable: true, get: function() {
    return this["UNSAFE_" + e2];
  }, set: function(t2) {
    Object.defineProperty(this, e2, { configurable: true, writable: true, value: t2 });
  } });
});
var xe = s.event;
function Ne() {
}
function Te() {
  return this.cancelBubble;
}
function Re() {
  return this.defaultPrevented;
}
s.event = function(e2) {
  return xe && (e2 = xe(e2)), e2.persist = Ne, e2.isPropagationStopped = Te, e2.isDefaultPrevented = Re, e2.nativeEvent = e2;
};
var Le, qe = { configurable: true, get: function() {
  return this.class;
} }, Me = s.vnode;
s.vnode = function(e2) {
  var t2 = e2.type, n2 = e2.props, r2 = n2;
  if ("string" == typeof t2) {
    for (var o2 in r2 = {}, n2) {
      var c2 = n2[o2];
      "value" === o2 && "defaultValue" in n2 && null == c2 || ("defaultValue" === o2 && "value" in n2 && null == n2.value ? o2 = "value" : "download" === o2 && true === c2 ? c2 = "" : /ondoubleclick/i.test(o2) ? o2 = "ondblclick" : /^onchange(textarea|input)/i.test(o2 + t2) && !Ce(n2.type) ? o2 = "oninput" : /^on(Ani|Tra|Tou|BeforeInp)/.test(o2) ? o2 = o2.toLowerCase() : De.test(o2) ? o2 = o2.replace(/[A-Z0-9]/, "-$&").toLowerCase() : null === c2 && (c2 = void 0), r2[o2] = c2);
    }
    "select" == t2 && r2.multiple && Array.isArray(r2.value) && (r2.value = C(n2.children).forEach(function(e3) {
      e3.props.selected = -1 != r2.value.indexOf(e3.props.value);
    })), "select" == t2 && null != r2.defaultValue && (r2.value = C(n2.children).forEach(function(e3) {
      e3.props.selected = r2.multiple ? -1 != r2.defaultValue.indexOf(e3.props.value) : r2.defaultValue == e3.props.value;
    })), e2.props = r2;
  }
  t2 && n2.class != n2.className && (qe.enumerable = "className" in n2, null != n2.className && (r2.class = n2.className), Object.defineProperty(r2, "className", qe)), e2.$$typeof = ke, Me && Me(e2);
};
var He = s.__r;
s.__r = function(e2) {
  He && He(e2), Le = e2.__c;
};
var Ue = { ReactCurrentDispatcher: { current: { readContext: function(e2) {
  return Le.__n[e2.__c].props.value;
} } } };
"object" == ("undefined" == typeof performance ? "undefined" : n$1(performance)) && "function" == typeof performance.now && performance.now.bind(performance);
function Fe(e2) {
  return !!e2 && e2.$$typeof === ke;
}
var Be = { useState: ne, useReducer: re, useEffect: oe, useLayoutEffect: ce, useRef: function(e2) {
  return $ = 5, ie(function() {
    return { current: e2 };
  }, []);
}, useImperativeHandle: function(e2, t2, n2) {
  $ = 6, ce(function() {
    "function" == typeof e2 ? e2(t2()) : e2 && (e2.current = t2());
  }, null == n2 ? n2 : n2.concat(e2));
}, useMemo: ie, useCallback: function(e2, t2) {
  return $ = 8, ie(function() {
    return e2;
  }, t2);
}, useContext: function(e2) {
  var t2 = K.context[e2.__c], n2 = te(W$1++, 9);
  return n2.__c = e2, t2 ? (null == n2.__ && (n2.__ = true, t2.sub(K)), t2.props.value) : e2.__;
}, useDebugValue: function(e2, t2) {
  s.useDebugValue && s.useDebugValue(t2 ? t2(e2) : e2);
}, version: "16.8.0", Children: be, render: Ae, hydrate: function(e2, t2, n2) {
  return V(e2, t2), "function" == typeof n2 && n2(), e2 ? e2.__c : null;
}, unmountComponentAtNode: function(e2) {
  return !!e2.__k && (B(null, e2), true);
}, createPortal: Ie, createElement: g, createContext: function(e2, t2) {
  var n2 = { __c: t2 = "__cC" + d++, __: e2, Consumer: function(e3, t3) {
    return e3.children(t3);
  }, Provider: function(e3) {
    var n3, r2;
    return this.getChildContext || (n3 = [], (r2 = {})[t2] = this, this.getChildContext = function() {
      return r2;
    }, this.shouldComponentUpdate = function(e4) {
      this.props.value !== e4.value && n3.some(P);
    }, this.sub = function(e4) {
      n3.push(e4);
      var t3 = e4.componentWillUnmount;
      e4.componentWillUnmount = function() {
        n3.splice(n3.indexOf(e4), 1), t3 && t3.call(e4);
      };
    }), e3.children;
  } };
  return n2.Provider.__ = n2.Consumer.contextType = n2;
}, createFactory: function(e2) {
  return g.bind(null, e2);
}, cloneElement: function(e2) {
  return Fe(e2) ? z$1.apply(null, arguments) : e2;
}, createRef: function() {
  return { current: null };
}, Fragment: S, isValidElement: Fe, findDOMNode: function(e2) {
  return e2 && (e2.base || 1 === e2.nodeType && e2) || null;
}, Component: E, PureComponent: he, memo: function(e2, t2) {
  function n2(e3) {
    var n3 = this.props.ref, r3 = n3 == e3.ref;
    return !r3 && n3 && (n3.call ? n3(null) : n3.current = null), t2 ? !t2(this.props, e3) || !r3 : de(this.props, e3);
  }
  function r2(t3) {
    return this.shouldComponentUpdate = n2, g(e2, t3);
  }
  return r2.displayName = "Memo(" + (e2.displayName || e2.name) + ")", r2.prototype.isReactComponent = true, r2.__f = true, r2;
}, forwardRef: function(e2) {
  function t2(t3, r2) {
    var o2 = me({}, t3);
    return delete o2.ref, e2(o2, (r2 = t3.ref || r2) && ("object" != n$1(r2) || "current" in r2) ? r2 : null);
  }
  return t2.$$typeof = ye, t2.render = t2, t2.prototype.isReactComponent = t2.__f = true, t2.displayName = "ForwardRef(" + (e2.displayName || e2.name) + ")", t2;
}, unstable_batchedUpdates: function(e2, t2) {
  return e2(t2);
}, StrictMode: S, Suspense: Oe, SuspenseList: Ee, lazy: function(e2) {
  var t2, n2, r2;
  function o2(o3) {
    if (t2 || (t2 = e2()).then(function(e3) {
      n2 = e3.default || e3;
    }, function(e3) {
      r2 = e3;
    }), r2)
      throw r2;
    if (!n2)
      throw t2;
    return g(n2, o3);
  }
  return o2.displayName = "Lazy", o2.__f = true, o2;
}, __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: Ue };
function Ve() {
  return Be.createElement("svg", { width: "15", height: "15", className: "DocSearch-Control-Key-Icon" }, Be.createElement("path", { d: "M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953", strokeWidth: "1.2", stroke: "currentColor", fill: "none", strokeLinecap: "square" }));
}
function ze() {
  return Be.createElement("svg", { width: "20", height: "20", className: "DocSearch-Search-Icon", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }));
}
var We = ["translations"];
function Ke() {
  return Ke = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, Ke.apply(this, arguments);
}
function Je(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return $e(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return $e(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function $e(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Qe(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
var Ye = Be.forwardRef(function(e2, t2) {
  var n2 = e2.translations, r2 = void 0 === n2 ? {} : n2, o2 = Qe(e2, We), c2 = r2.buttonText, i2 = void 0 === c2 ? "Search" : c2, a2 = r2.buttonAriaLabel, u2 = void 0 === a2 ? "Search" : a2, l2 = Je(ne(null), 2), s2 = l2[0], f2 = l2[1];
  return oe(function() {
    "undefined" != typeof navigator && (/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) ? f2("\u2318") : f2("Ctrl"));
  }, []), Be.createElement("button", Ke({ type: "button", className: "DocSearch DocSearch-Button", "aria-label": u2 }, o2, { ref: t2 }), Be.createElement("span", { className: "DocSearch-Button-Container" }, Be.createElement(ze, null), Be.createElement("span", { className: "DocSearch-Button-Placeholder" }, i2)), Be.createElement("span", { className: "DocSearch-Button-Keys" }, null !== s2 && Be.createElement(Be.Fragment, null, Be.createElement("kbd", { className: "DocSearch-Button-Key" }, "Ctrl" === s2 ? Be.createElement(Ve, null) : s2), Be.createElement("kbd", { className: "DocSearch-Button-Key" }, "K"))));
});
function Ge(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Ze(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Ze(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Ze(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Xe(e2) {
  return Xe = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
    return typeof e3;
  } : function(e3) {
    return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
  }, Xe(e2);
}
function et(e2) {
  var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : /* @__PURE__ */ new Set();
  if (!e2 || "object" !== Xe(e2))
    return e2;
  if (t2.has(e2))
    return "[Circular]";
  var n2 = t2.add(e2);
  return Array.isArray(e2) ? e2.map(function(e3) {
    return et(e3, n2);
  }) : Object.fromEntries(Object.entries(e2).map(function(e3) {
    var t3 = Ge(e3, 2);
    return [t3[0], et(t3[1], n2)];
  }));
}
function tt(e2) {
  return e2.reduce(function(e3, t2) {
    return e3.concat(t2);
  }, []);
}
var nt = 0;
function rt(e2) {
  return 0 === e2.collections.length ? 0 : e2.collections.reduce(function(e3, t2) {
    return e3 + t2.items.length;
  }, 0);
}
function ot(e2, t2) {
  if (!e2)
    throw new Error("[Autocomplete] ".concat("function" == typeof t2 ? t2() : t2));
}
var ct = function() {
}, it = [{ segment: "autocomplete-core", version: "1.7.1" }], at = { current: {} };
function ut(e2) {
  (function(e3, t2) {
    if (!e3) {
      var n2 = t2.trim();
      at.current[n2] || (at.current[n2] = true, console.warn("[Autocomplete] ".concat(n2)));
    }
  })(!e2.debug, "The `debug` option is meant for development debugging and should not be used in production.");
}
function lt(e2, t2) {
  var n2 = t2;
  return { then: function(t3, r2) {
    return lt(e2.then(ft(t3, n2, e2), ft(r2, n2, e2)), n2);
  }, catch: function(t3) {
    return lt(e2.catch(ft(t3, n2, e2)), n2);
  }, finally: function(t3) {
    return t3 && n2.onCancelList.push(t3), lt(e2.finally(ft(t3 && function() {
      return n2.onCancelList = [], t3();
    }, n2, e2)), n2);
  }, cancel: function() {
    n2.isCanceled = true;
    var e3 = n2.onCancelList;
    n2.onCancelList = [], e3.forEach(function(e4) {
      e4();
    });
  }, isCanceled: function() {
    return true === n2.isCanceled;
  } };
}
function st(e2) {
  return lt(e2, { isCanceled: false, onCancelList: [] });
}
function ft(e2, t2, n2) {
  return e2 ? function(n3) {
    return t2.isCanceled ? n3 : e2(n3);
  } : n2;
}
function pt(e2, t2, n2, r2) {
  if (!n2)
    return null;
  if (e2 < 0 && (null === t2 || null !== r2 && 0 === t2))
    return n2 + e2;
  var o2 = (null === t2 ? -1 : t2) + e2;
  return o2 <= -1 || o2 >= n2 ? null === r2 ? null : 0 : o2;
}
function mt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function dt(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function ht(e2) {
  return ht = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
    return typeof e3;
  } : function(e3) {
    return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
  }, ht(e2);
}
function vt(e2, t2) {
  var n2 = [];
  return Promise.resolve(e2(t2)).then(function(e3) {
    return ot(Array.isArray(e3), function() {
      return "The `getSources` function must return an array of sources but returned type ".concat(JSON.stringify(ht(e3)), ":\n\n").concat(JSON.stringify(et(e3), null, 2));
    }), Promise.all(e3.filter(function(e4) {
      return Boolean(e4);
    }).map(function(e4) {
      if (ot("string" == typeof e4.sourceId, "A source must provide a `sourceId` string."), n2.includes(e4.sourceId))
        throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(e4.sourceId), " is not unique."));
      n2.push(e4.sourceId);
      var t3 = function(e5) {
        for (var t4 = 1; t4 < arguments.length; t4++) {
          var n3 = null != arguments[t4] ? arguments[t4] : {};
          t4 % 2 ? mt(Object(n3), true).forEach(function(t5) {
            dt(e5, t5, n3[t5]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e5, Object.getOwnPropertyDescriptors(n3)) : mt(Object(n3)).forEach(function(t5) {
            Object.defineProperty(e5, t5, Object.getOwnPropertyDescriptor(n3, t5));
          });
        }
        return e5;
      }({ getItemInputValue: function(e5) {
        return e5.state.query;
      }, getItemUrl: function() {
      }, onSelect: function(e5) {
        (0, e5.setIsOpen)(false);
      }, onActive: ct }, e4);
      return Promise.resolve(t3);
    }));
  });
}
function yt(e2) {
  var t2 = function(e3) {
    var t3 = e3.collections.map(function(e4) {
      return e4.items.length;
    }).reduce(function(e4, t4, n3) {
      var r3 = (e4[n3 - 1] || 0) + t4;
      return e4.push(r3), e4;
    }, []).reduce(function(t4, n3) {
      return n3 <= e3.activeItemId ? t4 + 1 : t4;
    }, 0);
    return e3.collections[t3];
  }(e2);
  if (!t2)
    return null;
  var n2 = t2.items[function(e3) {
    for (var t3 = e3.state, n3 = e3.collection, r3 = false, o2 = 0, c2 = 0; false === r3; ) {
      var i2 = t3.collections[o2];
      if (i2 === n3) {
        r3 = true;
        break;
      }
      c2 += i2.items.length, o2++;
    }
    return t3.activeItemId - c2;
  }({ state: e2, collection: t2 })], r2 = t2.source;
  return { item: n2, itemInputValue: r2.getItemInputValue({ item: n2, state: e2 }), itemUrl: r2.getItemUrl({ item: n2, state: e2 }), source: r2 };
}
var _t = /((gt|sm)-|galaxy nexus)|samsung[- ]/i;
function bt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function gt(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? bt(Object(n2), true).forEach(function(t3) {
      Ot(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : bt(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Ot(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function St(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Et(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function wt(e2, t2, n2) {
  var r2, o2 = t2.initialState;
  return { getState: function() {
    return o2;
  }, dispatch: function(r3, c2) {
    var i2 = function(e3) {
      for (var t3 = 1; t3 < arguments.length; t3++) {
        var n3 = null != arguments[t3] ? arguments[t3] : {};
        t3 % 2 ? St(Object(n3), true).forEach(function(t4) {
          Et(e3, t4, n3[t4]);
        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e3, Object.getOwnPropertyDescriptors(n3)) : St(Object(n3)).forEach(function(t4) {
          Object.defineProperty(e3, t4, Object.getOwnPropertyDescriptor(n3, t4));
        });
      }
      return e3;
    }({}, o2);
    o2 = e2(o2, { type: r3, props: t2, payload: c2 }), n2({ state: o2, prevState: i2 });
  }, pendingRequests: (r2 = [], { add: function(e3) {
    return r2.push(e3), e3.finally(function() {
      r2 = r2.filter(function(t3) {
        return t3 !== e3;
      });
    });
  }, cancelAll: function() {
    r2.forEach(function(e3) {
      return e3.cancel();
    });
  }, isEmpty: function() {
    return 0 === r2.length;
  } }) };
}
function jt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Pt(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? jt(Object(n2), true).forEach(function(t3) {
      It(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : jt(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function It(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function kt(e2) {
  return function(e3) {
    if (Array.isArray(e3))
      return Dt(e3);
  }(e2) || function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }(e2) || function(e3, t2) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Dt(e3, t2);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Dt(e3, t2);
  }(e2) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Dt(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Ct(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function At(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? Ct(Object(n2), true).forEach(function(t3) {
      xt(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : Ct(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function xt(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Nt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Tt(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? Nt(Object(n2), true).forEach(function(t3) {
      Rt(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : Nt(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Rt(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Lt(e2) {
  return Lt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
    return typeof e3;
  } : function(e3) {
    return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
  }, Lt(e2);
}
function qt(e2) {
  return function(e3) {
    if (Array.isArray(e3))
      return Mt(e3);
  }(e2) || function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }(e2) || function(e3, t2) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Mt(e3, t2);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Mt(e3, t2);
  }(e2) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Mt(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Ht(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Ut(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? Ht(Object(n2), true).forEach(function(t3) {
      Ft(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : Ht(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Ft(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Bt(e2) {
  return Boolean(e2.execute);
}
function Vt(e2, t2) {
  return n2 = e2, Boolean(null == n2 ? void 0 : n2.execute) ? Ut(Ut({}, e2), {}, { requests: e2.queries.map(function(n3) {
    return { query: n3, sourceId: t2, transformResponse: e2.transformResponse };
  }) }) : { items: e2, sourceId: t2 };
  var n2;
}
function zt(e2) {
  var t2 = e2.reduce(function(e3, t3) {
    if (!Bt(t3))
      return e3.push(t3), e3;
    var n2 = t3.searchClient, r2 = t3.execute, o2 = t3.requesterId, c2 = t3.requests, i2 = e3.find(function(e4) {
      return Bt(t3) && Bt(e4) && e4.searchClient === n2 && Boolean(o2) && e4.requesterId === o2;
    });
    if (i2) {
      var a2;
      (a2 = i2.items).push.apply(a2, qt(c2));
    } else {
      var u2 = { execute: r2, requesterId: o2, items: c2, searchClient: n2 };
      e3.push(u2);
    }
    return e3;
  }, []).map(function(e3) {
    if (!Bt(e3))
      return Promise.resolve(e3);
    var t3 = e3, n2 = t3.execute, r2 = t3.items;
    return n2({ searchClient: t3.searchClient, requests: r2 });
  });
  return Promise.all(t2).then(function(e3) {
    return tt(e3);
  });
}
function Wt(e2, t2) {
  return t2.map(function(t3) {
    var n2 = e2.filter(function(e3) {
      return e3.sourceId === t3.sourceId;
    }), r2 = n2.map(function(e3) {
      return e3.items;
    }), o2 = n2[0].transformResponse, c2 = o2 ? o2(function(e3) {
      var t4 = e3.map(function(e4) {
        var t5;
        return gt(gt({}, e4), {}, { hits: null === (t5 = e4.hits) || void 0 === t5 ? void 0 : t5.map(function(t6) {
          return gt(gt({}, t6), {}, { __autocomplete_indexName: e4.index, __autocomplete_queryID: e4.queryID });
        }) });
      });
      return { results: t4, hits: t4.map(function(e4) {
        return e4.hits;
      }).filter(Boolean), facetHits: t4.map(function(e4) {
        var t5;
        return null === (t5 = e4.facetHits) || void 0 === t5 ? void 0 : t5.map(function(e5) {
          return { label: e5.value, count: e5.count, _highlightResult: { label: { value: e5.highlighted } } };
        });
      }).filter(Boolean) };
    }(r2)) : r2;
    return ot(Array.isArray(c2), function() {
      return 'The `getItems` function from source "'.concat(t3.sourceId, '" must return an array of items but returned type ').concat(JSON.stringify(Lt(c2)), ":\n\n").concat(JSON.stringify(et(c2), null, 2), ".\n\nSee: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems");
    }), ot(c2.every(Boolean), 'The `getItems` function from source "'.concat(t3.sourceId, '" must return an array of items but returned ').concat(JSON.stringify(void 0), ".\n\nDid you forget to return items?\n\nSee: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems")), { source: t3, items: c2 };
  });
}
var Kt = ["event", "nextState", "props", "query", "refresh", "store"];
function Jt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function $t(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? Jt(Object(n2), true).forEach(function(t3) {
      Qt(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : Jt(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Qt(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Yt(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
var Gt, Zt, Xt, en = null, tn = (Gt = -1, Zt = -1, Xt = void 0, function(e2) {
  var t2 = ++Gt;
  return Promise.resolve(e2).then(function(e3) {
    return Xt && t2 < Zt ? Xt : (Zt = t2, Xt = e3, e3);
  });
});
function nn(e2) {
  var t2 = e2.event, n2 = e2.nextState, r2 = void 0 === n2 ? {} : n2, o2 = e2.props, c2 = e2.query, i2 = e2.refresh, a2 = e2.store, u2 = Yt(e2, Kt);
  en && o2.environment.clearTimeout(en);
  var l2 = u2.setCollections, s2 = u2.setIsOpen, f2 = u2.setQuery, p2 = u2.setActiveItemId, m2 = u2.setStatus;
  if (f2(c2), p2(o2.defaultActiveItemId), !c2 && false === o2.openOnFocus) {
    var d2, h2 = a2.getState().collections.map(function(e3) {
      return $t($t({}, e3), {}, { items: [] });
    });
    m2("idle"), l2(h2), s2(null !== (d2 = r2.isOpen) && void 0 !== d2 ? d2 : o2.shouldPanelOpen({ state: a2.getState() }));
    var v2 = st(tn(h2).then(function() {
      return Promise.resolve();
    }));
    return a2.pendingRequests.add(v2);
  }
  m2("loading"), en = o2.environment.setTimeout(function() {
    m2("stalled");
  }, o2.stallThreshold);
  var y2 = st(tn(o2.getSources($t({ query: c2, refresh: i2, state: a2.getState() }, u2)).then(function(e3) {
    return Promise.all(e3.map(function(e4) {
      return Promise.resolve(e4.getItems($t({ query: c2, refresh: i2, state: a2.getState() }, u2))).then(function(t3) {
        return Vt(t3, e4.sourceId);
      });
    })).then(zt).then(function(t3) {
      return Wt(t3, e3);
    }).then(function(e4) {
      return function(e5) {
        var t3 = e5.collections, n3 = e5.props, r3 = e5.state, o3 = t3.reduce(function(e6, t4) {
          return Tt(Tt({}, e6), {}, Rt({}, t4.source.sourceId, Tt(Tt({}, t4.source), {}, { getItems: function() {
            return tt(t4.items);
          } })));
        }, {});
        return tt(n3.reshape({ sources: Object.values(o3), sourcesBySourceId: o3, state: r3 })).filter(Boolean).map(function(e6) {
          return { source: e6, items: e6.getItems() };
        });
      }({ collections: e4, props: o2, state: a2.getState() });
    });
  }))).then(function(e3) {
    var n3;
    m2("idle"), l2(e3);
    var f3 = o2.shouldPanelOpen({ state: a2.getState() });
    s2(null !== (n3 = r2.isOpen) && void 0 !== n3 ? n3 : o2.openOnFocus && !c2 && f3 || f3);
    var p3 = yt(a2.getState());
    if (null !== a2.getState().activeItemId && p3) {
      var d3 = p3.item, h3 = p3.itemInputValue, v3 = p3.itemUrl, y3 = p3.source;
      y3.onActive($t({ event: t2, item: d3, itemInputValue: h3, itemUrl: v3, refresh: i2, source: y3, state: a2.getState() }, u2));
    }
  }).finally(function() {
    m2("idle"), en && o2.environment.clearTimeout(en);
  });
  return a2.pendingRequests.add(y2);
}
var rn = ["event", "props", "refresh", "store"];
function on(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function cn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? on(Object(n2), true).forEach(function(t3) {
      an(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : on(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function an(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function un(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
var ln = ["props", "refresh", "store"], sn = ["inputElement", "formElement", "panelElement"], fn = ["inputElement"], pn = ["inputElement", "maxLength"], mn = ["item", "source"];
function dn(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function hn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? dn(Object(n2), true).forEach(function(t3) {
      vn(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : dn(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function vn(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function yn(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function _n(e2) {
  var t2 = e2.props, n2 = e2.refresh, r2 = e2.store, o2 = yn(e2, ln);
  return { getEnvironmentProps: function(e3) {
    var n3 = e3.inputElement, o3 = e3.formElement, c2 = e3.panelElement;
    function i2(e4) {
      !r2.getState().isOpen && r2.pendingRequests.isEmpty() || e4.target === n3 || false === [o3, c2].some(function(t3) {
        return n4 = t3, r3 = e4.target, n4 === r3 || n4.contains(r3);
        var n4, r3;
      }) && (r2.dispatch("blur", null), t2.debug || r2.pendingRequests.cancelAll());
    }
    return hn({ onTouchStart: i2, onMouseDown: i2, onTouchMove: function(e4) {
      false !== r2.getState().isOpen && n3 === t2.environment.document.activeElement && e4.target !== n3 && n3.blur();
    } }, yn(e3, sn));
  }, getRootProps: function(e3) {
    return hn({ role: "combobox", "aria-expanded": r2.getState().isOpen, "aria-haspopup": "listbox", "aria-owns": r2.getState().isOpen ? "".concat(t2.id, "-list") : void 0, "aria-labelledby": "".concat(t2.id, "-label") }, e3);
  }, getFormProps: function(e3) {
    e3.inputElement;
    return hn({ action: "", noValidate: true, role: "search", onSubmit: function(c2) {
      var i2;
      c2.preventDefault(), t2.onSubmit(hn({ event: c2, refresh: n2, state: r2.getState() }, o2)), r2.dispatch("submit", null), null === (i2 = e3.inputElement) || void 0 === i2 || i2.blur();
    }, onReset: function(c2) {
      var i2;
      c2.preventDefault(), t2.onReset(hn({ event: c2, refresh: n2, state: r2.getState() }, o2)), r2.dispatch("reset", null), null === (i2 = e3.inputElement) || void 0 === i2 || i2.focus();
    } }, yn(e3, fn));
  }, getLabelProps: function(e3) {
    return hn({ htmlFor: "".concat(t2.id, "-input"), id: "".concat(t2.id, "-label") }, e3);
  }, getInputProps: function(e3) {
    var c2;
    function i2(e4) {
      (t2.openOnFocus || Boolean(r2.getState().query)) && nn(hn({ event: e4, props: t2, query: r2.getState().completion || r2.getState().query, refresh: n2, store: r2 }, o2)), r2.dispatch("focus", null);
    }
    var a2 = e3 || {}, u2 = (a2.inputElement, a2.maxLength), l2 = void 0 === u2 ? 512 : u2, s2 = yn(a2, pn), f2 = yt(r2.getState()), p2 = function(e4) {
      return Boolean(e4 && e4.match(_t));
    }((null === (c2 = t2.environment.navigator) || void 0 === c2 ? void 0 : c2.userAgent) || ""), m2 = null != f2 && f2.itemUrl && !p2 ? "go" : "search";
    return hn({ "aria-autocomplete": "both", "aria-activedescendant": r2.getState().isOpen && null !== r2.getState().activeItemId ? "".concat(t2.id, "-item-").concat(r2.getState().activeItemId) : void 0, "aria-controls": r2.getState().isOpen ? "".concat(t2.id, "-list") : void 0, "aria-labelledby": "".concat(t2.id, "-label"), value: r2.getState().completion || r2.getState().query, id: "".concat(t2.id, "-input"), autoComplete: "off", autoCorrect: "off", autoCapitalize: "off", enterKeyHint: m2, spellCheck: "false", autoFocus: t2.autoFocus, placeholder: t2.placeholder, maxLength: l2, type: "search", onChange: function(e4) {
      nn(hn({ event: e4, props: t2, query: e4.currentTarget.value.slice(0, l2), refresh: n2, store: r2 }, o2));
    }, onKeyDown: function(e4) {
      !function(e5) {
        var t3 = e5.event, n3 = e5.props, r3 = e5.refresh, o3 = e5.store, c3 = un(e5, rn);
        if ("ArrowUp" === t3.key || "ArrowDown" === t3.key) {
          var i3 = function() {
            var e6 = n3.environment.document.getElementById("".concat(n3.id, "-item-").concat(o3.getState().activeItemId));
            e6 && (e6.scrollIntoViewIfNeeded ? e6.scrollIntoViewIfNeeded(false) : e6.scrollIntoView(false));
          }, a3 = function() {
            var e6 = yt(o3.getState());
            if (null !== o3.getState().activeItemId && e6) {
              var n4 = e6.item, i4 = e6.itemInputValue, a4 = e6.itemUrl, u4 = e6.source;
              u4.onActive(cn({ event: t3, item: n4, itemInputValue: i4, itemUrl: a4, refresh: r3, source: u4, state: o3.getState() }, c3));
            }
          };
          t3.preventDefault(), false === o3.getState().isOpen && (n3.openOnFocus || Boolean(o3.getState().query)) ? nn(cn({ event: t3, props: n3, query: o3.getState().query, refresh: r3, store: o3 }, c3)).then(function() {
            o3.dispatch(t3.key, { nextActiveItemId: n3.defaultActiveItemId }), a3(), setTimeout(i3, 0);
          }) : (o3.dispatch(t3.key, {}), a3(), i3());
        } else if ("Escape" === t3.key)
          t3.preventDefault(), o3.dispatch(t3.key, null), o3.pendingRequests.cancelAll();
        else if ("Tab" === t3.key)
          o3.dispatch("blur", null), o3.pendingRequests.cancelAll();
        else if ("Enter" === t3.key) {
          if (null === o3.getState().activeItemId || o3.getState().collections.every(function(e6) {
            return 0 === e6.items.length;
          }))
            return void (n3.debug || o3.pendingRequests.cancelAll());
          t3.preventDefault();
          var u3 = yt(o3.getState()), l3 = u3.item, s3 = u3.itemInputValue, f3 = u3.itemUrl, p3 = u3.source;
          if (t3.metaKey || t3.ctrlKey)
            void 0 !== f3 && (p3.onSelect(cn({ event: t3, item: l3, itemInputValue: s3, itemUrl: f3, refresh: r3, source: p3, state: o3.getState() }, c3)), n3.navigator.navigateNewTab({ itemUrl: f3, item: l3, state: o3.getState() }));
          else if (t3.shiftKey)
            void 0 !== f3 && (p3.onSelect(cn({ event: t3, item: l3, itemInputValue: s3, itemUrl: f3, refresh: r3, source: p3, state: o3.getState() }, c3)), n3.navigator.navigateNewWindow({ itemUrl: f3, item: l3, state: o3.getState() }));
          else if (t3.altKey)
            ;
          else {
            if (void 0 !== f3)
              return p3.onSelect(cn({ event: t3, item: l3, itemInputValue: s3, itemUrl: f3, refresh: r3, source: p3, state: o3.getState() }, c3)), void n3.navigator.navigate({ itemUrl: f3, item: l3, state: o3.getState() });
            nn(cn({ event: t3, nextState: { isOpen: false }, props: n3, query: s3, refresh: r3, store: o3 }, c3)).then(function() {
              p3.onSelect(cn({ event: t3, item: l3, itemInputValue: s3, itemUrl: f3, refresh: r3, source: p3, state: o3.getState() }, c3));
            });
          }
        }
      }(hn({ event: e4, props: t2, refresh: n2, store: r2 }, o2));
    }, onFocus: i2, onBlur: ct, onClick: function(n3) {
      e3.inputElement !== t2.environment.document.activeElement || r2.getState().isOpen || i2(n3);
    } }, s2);
  }, getPanelProps: function(e3) {
    return hn({ onMouseDown: function(e4) {
      e4.preventDefault();
    }, onMouseLeave: function() {
      r2.dispatch("mouseleave", null);
    } }, e3);
  }, getListProps: function(e3) {
    return hn({ role: "listbox", "aria-labelledby": "".concat(t2.id, "-label"), id: "".concat(t2.id, "-list") }, e3);
  }, getItemProps: function(e3) {
    var c2 = e3.item, i2 = e3.source, a2 = yn(e3, mn);
    return hn({ id: "".concat(t2.id, "-item-").concat(c2.__autocomplete_id), role: "option", "aria-selected": r2.getState().activeItemId === c2.__autocomplete_id, onMouseMove: function(e4) {
      if (c2.__autocomplete_id !== r2.getState().activeItemId) {
        r2.dispatch("mousemove", c2.__autocomplete_id);
        var t3 = yt(r2.getState());
        if (null !== r2.getState().activeItemId && t3) {
          var i3 = t3.item, a3 = t3.itemInputValue, u2 = t3.itemUrl, l2 = t3.source;
          l2.onActive(hn({ event: e4, item: i3, itemInputValue: a3, itemUrl: u2, refresh: n2, source: l2, state: r2.getState() }, o2));
        }
      }
    }, onMouseDown: function(e4) {
      e4.preventDefault();
    }, onClick: function(e4) {
      var a3 = i2.getItemInputValue({ item: c2, state: r2.getState() }), u2 = i2.getItemUrl({ item: c2, state: r2.getState() });
      (u2 ? Promise.resolve() : nn(hn({ event: e4, nextState: { isOpen: false }, props: t2, query: a3, refresh: n2, store: r2 }, o2))).then(function() {
        i2.onSelect(hn({ event: e4, item: c2, itemInputValue: a3, itemUrl: u2, refresh: n2, source: i2, state: r2.getState() }, o2));
      });
    } }, a2);
  } };
}
function bn(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function gn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? bn(Object(n2), true).forEach(function(t3) {
      On(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : bn(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function On(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Sn(e2) {
  var t2, n2, r2, o2, c2 = e2.plugins, i2 = e2.options, a2 = null === (t2 = ((null === (n2 = i2.__autocomplete_metadata) || void 0 === n2 ? void 0 : n2.userAgents) || [])[0]) || void 0 === t2 ? void 0 : t2.segment, u2 = a2 ? On({}, a2, Object.keys((null === (r2 = i2.__autocomplete_metadata) || void 0 === r2 ? void 0 : r2.options) || {})) : {};
  return { plugins: c2.map(function(e3) {
    return { name: e3.name, options: Object.keys(e3.__autocomplete_pluginOptions || []) };
  }), options: gn({ "autocomplete-core": Object.keys(i2) }, u2), ua: it.concat((null === (o2 = i2.__autocomplete_metadata) || void 0 === o2 ? void 0 : o2.userAgents) || []) };
}
function En(e2) {
  var t2, n2 = e2.state;
  return false === n2.isOpen || null === n2.activeItemId ? null : (null === (t2 = yt(n2)) || void 0 === t2 ? void 0 : t2.itemInputValue) || null;
}
function wn(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function jn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? wn(Object(n2), true).forEach(function(t3) {
      Pn(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : wn(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Pn(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
var In = function(e2, t2) {
  switch (t2.type) {
    case "setActiveItemId":
    case "mousemove":
      return jn(jn({}, e2), {}, { activeItemId: t2.payload });
    case "setQuery":
      return jn(jn({}, e2), {}, { query: t2.payload, completion: null });
    case "setCollections":
      return jn(jn({}, e2), {}, { collections: t2.payload });
    case "setIsOpen":
      return jn(jn({}, e2), {}, { isOpen: t2.payload });
    case "setStatus":
      return jn(jn({}, e2), {}, { status: t2.payload });
    case "setContext":
      return jn(jn({}, e2), {}, { context: jn(jn({}, e2.context), t2.payload) });
    case "ArrowDown":
      var n2 = jn(jn({}, e2), {}, { activeItemId: t2.payload.hasOwnProperty("nextActiveItemId") ? t2.payload.nextActiveItemId : pt(1, e2.activeItemId, rt(e2), t2.props.defaultActiveItemId) });
      return jn(jn({}, n2), {}, { completion: En({ state: n2 }) });
    case "ArrowUp":
      var r2 = jn(jn({}, e2), {}, { activeItemId: pt(-1, e2.activeItemId, rt(e2), t2.props.defaultActiveItemId) });
      return jn(jn({}, r2), {}, { completion: En({ state: r2 }) });
    case "Escape":
      return e2.isOpen ? jn(jn({}, e2), {}, { activeItemId: null, isOpen: false, completion: null }) : jn(jn({}, e2), {}, { activeItemId: null, query: "", status: "idle", collections: [] });
    case "submit":
      return jn(jn({}, e2), {}, { activeItemId: null, isOpen: false, status: "idle" });
    case "reset":
      return jn(jn({}, e2), {}, { activeItemId: true === t2.props.openOnFocus ? t2.props.defaultActiveItemId : null, status: "idle", query: "" });
    case "focus":
      return jn(jn({}, e2), {}, { activeItemId: t2.props.defaultActiveItemId, isOpen: (t2.props.openOnFocus || Boolean(e2.query)) && t2.props.shouldPanelOpen({ state: e2 }) });
    case "blur":
      return t2.props.debug ? e2 : jn(jn({}, e2), {}, { isOpen: false, activeItemId: null });
    case "mouseleave":
      return jn(jn({}, e2), {}, { activeItemId: t2.props.defaultActiveItemId });
    default:
      return ot(false, "The reducer action ".concat(JSON.stringify(t2.type), " is not supported.")), e2;
  }
};
function kn(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Dn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? kn(Object(n2), true).forEach(function(t3) {
      Cn(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : kn(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Cn(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function An(e2) {
  ut(e2);
  var t2 = [], n2 = function(e3, t3) {
    var n3, r3 = "undefined" != typeof window ? window : {}, o3 = e3.plugins || [];
    return At(At({ debug: false, openOnFocus: false, placeholder: "", autoFocus: false, defaultActiveItemId: null, stallThreshold: 300, environment: r3, shouldPanelOpen: function(e4) {
      return rt(e4.state) > 0;
    }, reshape: function(e4) {
      return e4.sources;
    } }, e3), {}, { id: null !== (n3 = e3.id) && void 0 !== n3 ? n3 : "autocomplete-".concat(nt++), plugins: o3, initialState: At({ activeItemId: null, query: "", completion: null, collections: [], isOpen: false, status: "idle", context: {} }, e3.initialState), onStateChange: function(t4) {
      var n4;
      null === (n4 = e3.onStateChange) || void 0 === n4 || n4.call(e3, t4), o3.forEach(function(e4) {
        var n5;
        return null === (n5 = e4.onStateChange) || void 0 === n5 ? void 0 : n5.call(e4, t4);
      });
    }, onSubmit: function(t4) {
      var n4;
      null === (n4 = e3.onSubmit) || void 0 === n4 || n4.call(e3, t4), o3.forEach(function(e4) {
        var n5;
        return null === (n5 = e4.onSubmit) || void 0 === n5 ? void 0 : n5.call(e4, t4);
      });
    }, onReset: function(t4) {
      var n4;
      null === (n4 = e3.onReset) || void 0 === n4 || n4.call(e3, t4), o3.forEach(function(e4) {
        var n5;
        return null === (n5 = e4.onReset) || void 0 === n5 ? void 0 : n5.call(e4, t4);
      });
    }, getSources: function(n4) {
      return Promise.all([].concat(kt(o3.map(function(e4) {
        return e4.getSources;
      })), [e3.getSources]).filter(Boolean).map(function(e4) {
        return vt(e4, n4);
      })).then(function(e4) {
        return tt(e4);
      }).then(function(e4) {
        return e4.map(function(e5) {
          return At(At({}, e5), {}, { onSelect: function(n5) {
            e5.onSelect(n5), t3.forEach(function(e6) {
              var t4;
              return null === (t4 = e6.onSelect) || void 0 === t4 ? void 0 : t4.call(e6, n5);
            });
          }, onActive: function(n5) {
            e5.onActive(n5), t3.forEach(function(e6) {
              var t4;
              return null === (t4 = e6.onActive) || void 0 === t4 ? void 0 : t4.call(e6, n5);
            });
          } });
        });
      });
    }, navigator: At({ navigate: function(e4) {
      var t4 = e4.itemUrl;
      r3.location.assign(t4);
    }, navigateNewTab: function(e4) {
      var t4 = e4.itemUrl, n4 = r3.open(t4, "_blank", "noopener");
      null == n4 || n4.focus();
    }, navigateNewWindow: function(e4) {
      var t4 = e4.itemUrl;
      r3.open(t4, "_blank", "noopener");
    } }, e3.navigator) });
  }(e2, t2), r2 = wt(In, n2, function(e3) {
    var t3 = e3.prevState, r3 = e3.state;
    n2.onStateChange(Dn({ prevState: t3, state: r3, refresh: i2 }, o2));
  }), o2 = function(e3) {
    var t3 = e3.store;
    return { setActiveItemId: function(e4) {
      t3.dispatch("setActiveItemId", e4);
    }, setQuery: function(e4) {
      t3.dispatch("setQuery", e4);
    }, setCollections: function(e4) {
      var n3 = 0, r3 = e4.map(function(e5) {
        return Pt(Pt({}, e5), {}, { items: tt(e5.items).map(function(e6) {
          return Pt(Pt({}, e6), {}, { __autocomplete_id: n3++ });
        }) });
      });
      t3.dispatch("setCollections", r3);
    }, setIsOpen: function(e4) {
      t3.dispatch("setIsOpen", e4);
    }, setStatus: function(e4) {
      t3.dispatch("setStatus", e4);
    }, setContext: function(e4) {
      t3.dispatch("setContext", e4);
    } };
  }({ store: r2 }), c2 = _n(Dn({ props: n2, refresh: i2, store: r2 }, o2));
  function i2() {
    return nn(Dn({ event: new Event("input"), nextState: { isOpen: r2.getState().isOpen }, props: n2, query: r2.getState().query, refresh: i2, store: r2 }, o2));
  }
  return n2.plugins.forEach(function(e3) {
    var n3;
    return null === (n3 = e3.subscribe) || void 0 === n3 ? void 0 : n3.call(e3, Dn(Dn({}, o2), {}, { refresh: i2, onSelect: function(e4) {
      t2.push({ onSelect: e4 });
    }, onActive: function(e4) {
      t2.push({ onActive: e4 });
    } }));
  }), function(e3) {
    var t3, n3, r3 = e3.metadata, o3 = e3.environment;
    if (null === (t3 = o3.navigator) || void 0 === t3 || null === (n3 = t3.userAgent) || void 0 === n3 ? void 0 : n3.includes("Algolia Crawler")) {
      var c3 = o3.document.createElement("meta"), i3 = o3.document.querySelector("head");
      c3.name = "algolia:metadata", setTimeout(function() {
        c3.content = JSON.stringify(r3), i3.appendChild(c3);
      }, 0);
    }
  }({ metadata: Sn({ plugins: n2.plugins, options: e2 }), environment: n2.environment }), Dn(Dn({ refresh: i2 }, c2), o2);
}
function xn(e2) {
  var t2 = e2.translations, n2 = (void 0 === t2 ? {} : t2).searchByText, r2 = void 0 === n2 ? "Search by" : n2;
  return Be.createElement("a", { href: "https://www.algolia.com/ref/docsearch/?utm_source=".concat(window.location.hostname, "&utm_medium=referral&utm_content=powered_by&utm_campaign=docsearch"), target: "_blank", rel: "noopener noreferrer" }, Be.createElement("span", { className: "DocSearch-Label" }, r2), Be.createElement("svg", { width: "77", height: "19", "aria-label": "Algolia", role: "img" }, Be.createElement("path", { d: "M2.5067 0h14.0245c1.384.001 2.5058 1.1205 2.5068 2.5017V16.5c-.0014 1.3808-1.1232 2.4995-2.5068 2.5H2.5067C1.1232 18.9995.0014 17.8808 0 16.5V2.4958A2.495 2.495 0 01.735.7294 2.505 2.505 0 012.5068 0zM37.95 15.0695c-3.7068.0168-3.7068-2.986-3.7068-3.4634L34.2372.3576 36.498 0v11.1794c0 .2715 0 1.9889 1.452 1.994v1.8961zm-9.1666-1.8388c.694 0 1.2086-.0397 1.5678-.1088v-2.2934a5.3639 5.3639 0 00-1.3303-.1679 4.8283 4.8283 0 00-.758.0582 2.2845 2.2845 0 00-.688.2024c-.2029.0979-.371.2362-.4919.4142-.1268.1788-.185.2826-.185.5533 0 .5297.185.8359.5205 1.0375.3355.2016.7928.3053 1.365.3053v-.0008zm-.1969-8.1817c.7463 0 1.3768.092 1.8856.2767.5088.1838.9195.4428 1.2204.7717.3068.334.5147.7777.6423 1.251.1327.4723.196.991.196 1.5603v5.798c-.5235.1036-1.05.192-1.5787.2649-.7048.1037-1.4976.156-2.3774.156-.5832 0-1.1215-.0582-1.6016-.167a3.385 3.385 0 01-1.2432-.5364 2.6034 2.6034 0 01-.8037-.9565c-.191-.3922-.29-.9447-.29-1.5208 0-.5533.11-.905.3246-1.2863a2.7351 2.7351 0 01.8849-.9329c.376-.242.8029-.415 1.2948-.5187a7.4517 7.4517 0 011.5381-.156 7.1162 7.1162 0 011.6667.2024V8.886c0-.259-.0296-.5061-.093-.7372a1.5847 1.5847 0 00-.3245-.6158 1.5079 1.5079 0 00-.6119-.4158 2.6788 2.6788 0 00-.966-.173c-.5206 0-.9948.0634-1.4283.1384a6.5481 6.5481 0 00-1.065.259l-.2712-1.849c.2831-.0986.7048-.1964 1.2491-.2943a9.2979 9.2979 0 011.752-.1501v.0008zm44.6597 8.1193c.6947 0 1.2086-.0405 1.567-.1097v-2.2942a5.3743 5.3743 0 00-1.3303-.1679c-.2485 0-.503.0177-.7573.0582a2.2853 2.2853 0 00-.688.2024 1.2333 1.2333 0 00-.4918.4142c-.1268.1788-.1843.2826-.1843.5533 0 .5297.1843.8359.5198 1.0375.3414.2066.7927.3053 1.365.3053v.0009zm-.191-8.1767c.7463 0 1.3768.0912 1.8856.2759.5087.1847.9195.4436 1.2204.7717.3.329.5147.7786.6414 1.251a5.7248 5.7248 0 01.197 1.562v5.7972c-.3466.0742-.874.1602-1.5788.2648-.7049.1038-1.4976.1552-2.3774.1552-.5832 0-1.1215-.0573-1.6016-.167a3.385 3.385 0 01-1.2432-.5356 2.6034 2.6034 0 01-.8038-.9565c-.191-.3922-.2898-.9447-.2898-1.5216 0-.5533.1098-.905.3245-1.2854a2.7373 2.7373 0 01.8849-.9338c.376-.2412.8029-.4141 1.2947-.5178a7.4545 7.4545 0 012.325-.1097c.2781.0287.5672.081.879.156v-.3686a2.7781 2.7781 0 00-.092-.738 1.5788 1.5788 0 00-.3246-.6166 1.5079 1.5079 0 00-.612-.415 2.6797 2.6797 0 00-.966-.1729c-.5205 0-.9947.0633-1.4282.1384a6.5608 6.5608 0 00-1.065.259l-.2712-1.8498c.283-.0979.7048-.1957 1.2491-.2935a9.8597 9.8597 0 011.752-.1494zm-6.79-1.072c-.7576.001-1.373-.6103-1.3759-1.3664 0-.755.6128-1.3664 1.376-1.3664.764 0 1.3775.6115 1.3775 1.3664s-.6195 1.3664-1.3776 1.3664zm1.1393 11.1507h-2.2726V5.3409l2.2734-.3568v10.0845l-.0008.0017zm-3.984 0c-3.707.0168-3.707-2.986-3.707-3.4642L59.7069.3576 61.9685 0v11.1794c0 .2715 0 1.9889 1.452 1.994V15.0703zm-7.3512-4.979c0-.975-.2138-1.7873-.6305-2.3516-.4167-.571-.9998-.852-1.747-.852-.7454 0-1.3302.281-1.7452.852-.4166.5702-.6195 1.3765-.6195 2.3516 0 .9851.208 1.6473.6254 2.2183.4158.576.9998.8587 1.7461.8587.7454 0 1.3303-.2885 1.747-.8595.4158-.5761.6237-1.2315.6237-2.2184v.0009zm2.3132-.006c0 .7609-.1099 1.3361-.3356 1.9654a4.654 4.654 0 01-.9533 1.6076A4.214 4.214 0 0155.613 14.69c-.579.2412-1.4697.3795-1.9143.3795-.4462-.005-1.3303-.1324-1.9033-.3795a4.307 4.307 0 01-1.474-1.0316c-.4115-.4445-.7293-.9801-.9609-1.6076a5.3423 5.3423 0 01-.3465-1.9653c0-.7608.104-1.493.3356-2.1155a4.683 4.683 0 01.9719-1.5958 4.3383 4.3383 0 011.479-1.0257c.5739-.242 1.2043-.3567 1.8864-.3567.6829 0 1.3125.1197 1.8906.3567a4.1245 4.1245 0 011.4816 1.0257 4.7587 4.7587 0 01.9592 1.5958c.2426.6225.3643 1.3547.3643 2.1155zm-17.0198 0c0 .9448.208 1.9932.6238 2.431.4166.4386.955.6579 1.6142.6579.3584 0 .6998-.0523 1.0176-.1502.3186-.0978.5721-.2134.775-.3517V7.0784a8.8706 8.8706 0 00-1.4926-.1906c-.8206-.0236-1.4452.312-1.8847.8468-.4335.5365-.6533 1.476-.6533 2.3516v-.0008zm6.2863 4.4485c0 1.5385-.3938 2.662-1.1866 3.3773-.791.7136-2.0005 1.0712-3.6308 1.0712-.5958 0-1.834-.1156-2.8228-.334l.3643-1.7865c.8282.173 1.9202.2193 2.4932.2193.9077 0 1.555-.1847 1.943-.5533.388-.3686.578-.916.578-1.643v-.3687a6.8289 6.8289 0 01-.8848.3349c-.3634.1096-.786.167-1.261.167-.6246 0-1.1917-.0979-1.7055-.2944a3.5554 3.5554 0 01-1.3244-.8645c-.3642-.3796-.6541-.8579-.8561-1.4289-.2028-.571-.3068-1.59-.3068-2.339 0-.7034.1099-1.5856.3245-2.1735.2198-.5871.5316-1.0949.9542-1.515.4167-.42.9255-.743 1.5213-.98a5.5923 5.5923 0 012.052-.3855c.7353 0 1.4114.092 2.0707.2024.6592.1088 1.2204.2236 1.6776.35v8.945-.0008zM11.5026 4.2418v-.6511c-.0005-.4553-.3704-.8241-.8266-.8241H8.749c-.4561 0-.826.3688-.8265.824v.669c0 .0742.0693.1264.1445.1096a6.0346 6.0346 0 011.6768-.2362 6.125 6.125 0 011.6202.2185.1116.1116 0 00.1386-.1097zm-5.2806.852l-.3296-.3282a.8266.8266 0 00-1.168 0l-.393.3922a.8199.8199 0 000 1.164l.3237.323c.0524.0515.1268.0397.1733-.0117.191-.259.3989-.507.6305-.7372.2374-.2362.48-.4437.7462-.6335.0575-.0354.0634-.1155.017-.1687zm3.5159 2.069v2.818c0 .081.0879.1392.1622.0987l2.5102-1.2964c.0574-.0287.0752-.0987.0464-.1552a3.1237 3.1237 0 00-2.603-1.574c-.0575 0-.115.0456-.115.1097l-.0008-.0009zm.0008 6.789c-2.0933.0005-3.7915-1.6912-3.7947-3.7804C5.9468 8.0821 7.6452 6.39 9.7387 6.391c2.0932-.0005 3.7911 1.6914 3.794 3.7804a3.7783 3.7783 0 01-1.1124 2.675 3.7936 3.7936 0 01-2.6824 1.1054h.0008zM9.738 4.8002c-1.9218 0-3.6975 1.0232-4.6584 2.6841a5.359 5.359 0 000 5.3683c.9609 1.661 2.7366 2.6841 4.6584 2.6841a5.3891 5.3891 0 003.8073-1.5725 5.3675 5.3675 0 001.578-3.7987 5.3574 5.3574 0 00-1.5771-3.797A5.379 5.379 0 009.7387 4.801l-.0008-.0008z", fill: "currentColor", fillRule: "evenodd" })));
}
function Nn(e2) {
  return Be.createElement("svg", { width: "15", height: "15", "aria-label": e2.ariaLabel, role: "img" }, Be.createElement("g", { fill: "none", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "1.2" }, e2.children));
}
function Tn(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = n2.selectText, o2 = void 0 === r2 ? "to select" : r2, c2 = n2.selectKeyAriaLabel, i2 = void 0 === c2 ? "Enter key" : c2, a2 = n2.navigateText, u2 = void 0 === a2 ? "to navigate" : a2, l2 = n2.navigateUpKeyAriaLabel, s2 = void 0 === l2 ? "Arrow up" : l2, f2 = n2.navigateDownKeyAriaLabel, p2 = void 0 === f2 ? "Arrow down" : f2, m2 = n2.closeText, d2 = void 0 === m2 ? "to close" : m2, h2 = n2.closeKeyAriaLabel, v2 = void 0 === h2 ? "Escape key" : h2, y2 = n2.searchByText, _2 = void 0 === y2 ? "Search by" : y2;
  return Be.createElement(Be.Fragment, null, Be.createElement("div", { className: "DocSearch-Logo" }, Be.createElement(xn, { translations: { searchByText: _2 } })), Be.createElement("ul", { className: "DocSearch-Commands" }, Be.createElement("li", null, Be.createElement("kbd", { className: "DocSearch-Commands-Key" }, Be.createElement(Nn, { ariaLabel: i2 }, Be.createElement("path", { d: "M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3" }))), Be.createElement("span", { className: "DocSearch-Label" }, o2)), Be.createElement("li", null, Be.createElement("kbd", { className: "DocSearch-Commands-Key" }, Be.createElement(Nn, { ariaLabel: p2 }, Be.createElement("path", { d: "M7.5 3.5v8M10.5 8.5l-3 3-3-3" }))), Be.createElement("kbd", { className: "DocSearch-Commands-Key" }, Be.createElement(Nn, { ariaLabel: s2 }, Be.createElement("path", { d: "M7.5 11.5v-8M10.5 6.5l-3-3-3 3" }))), Be.createElement("span", { className: "DocSearch-Label" }, u2)), Be.createElement("li", null, Be.createElement("kbd", { className: "DocSearch-Commands-Key" }, Be.createElement(Nn, { ariaLabel: v2 }, Be.createElement("path", { d: "M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956" }))), Be.createElement("span", { className: "DocSearch-Label" }, d2))));
}
function Rn(e2) {
  var t2 = e2.hit, n2 = e2.children;
  return Be.createElement("a", { href: t2.url }, n2);
}
function Ln() {
  return Be.createElement("svg", { viewBox: "0 0 38 38", stroke: "currentColor", strokeOpacity: ".5" }, Be.createElement("g", { fill: "none", fillRule: "evenodd" }, Be.createElement("g", { transform: "translate(1 1)", strokeWidth: "2" }, Be.createElement("circle", { strokeOpacity: ".3", cx: "18", cy: "18", r: "18" }), Be.createElement("path", { d: "M36 18c0-9.94-8.06-18-18-18" }, Be.createElement("animateTransform", { attributeName: "transform", type: "rotate", from: "0 18 18", to: "360 18 18", dur: "1s", repeatCount: "indefinite" })))));
}
function qn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("g", { stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }, Be.createElement("path", { d: "M3.18 6.6a8.23 8.23 0 1112.93 9.94h0a8.23 8.23 0 01-11.63 0" }), Be.createElement("path", { d: "M6.44 7.25H2.55V3.36M10.45 6v5.6M10.45 11.6L13 13" })));
}
function Mn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }));
}
function Hn() {
  return Be.createElement("svg", { className: "DocSearch-Hit-Select-Icon", width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("g", { stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }, Be.createElement("path", { d: "M18 3v4c0 2-2 4-4 4H2" }), Be.createElement("path", { d: "M8 17l-6-6 6-6" })));
}
var Un = function() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M17 6v12c0 .52-.2 1-1 1H4c-.7 0-1-.33-1-1V2c0-.55.42-1 1-1h8l5 5zM14 8h-3.13c-.51 0-.87-.34-.87-.87V4", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinejoin: "round" }));
};
function Fn(e2) {
  switch (e2.type) {
    case "lvl1":
      return Be.createElement(Un, null);
    case "content":
      return Be.createElement(Vn, null);
    default:
      return Be.createElement(Bn, null);
  }
}
function Bn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M13 13h4-4V8H7v5h6v4-4H7V8H3h4V3v5h6V3v5h4-4v5zm-6 0v4-4H3h4z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }));
}
function Vn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M17 5H3h14zm0 5H3h14zm0 5H3h14z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinejoin: "round" }));
}
function zn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M10 14.2L5 17l1-5.6-4-4 5.5-.7 2.5-5 2.5 5 5.6.8-4 4 .9 5.5z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinejoin: "round" }));
}
function Wn() {
  return Be.createElement("svg", { width: "40", height: "40", viewBox: "0 0 20 20", fill: "none", fillRule: "evenodd", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round" }, Be.createElement("path", { d: "M19 4.8a16 16 0 00-2-1.2m-3.3-1.2A16 16 0 001.1 4.7M16.7 8a12 12 0 00-2.8-1.4M10 6a12 12 0 00-6.7 2M12.3 14.7a4 4 0 00-4.5 0M14.5 11.4A8 8 0 0010 10M3 16L18 2M10 18h0" }));
}
function Kn() {
  return Be.createElement("svg", { width: "40", height: "40", viewBox: "0 0 20 20", fill: "none", fillRule: "evenodd", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round" }, Be.createElement("path", { d: "M15.5 4.8c2 3 1.7 7-1 9.7h0l4.3 4.3-4.3-4.3a7.8 7.8 0 01-9.8 1m-2.2-2.2A7.8 7.8 0 0113.2 2.4M2 18L18 2" }));
}
function Jn(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = n2.titleText, o2 = void 0 === r2 ? "Unable to fetch results" : r2, c2 = n2.helpText, i2 = void 0 === c2 ? "You might want to check your network connection." : c2;
  return Be.createElement("div", { className: "DocSearch-ErrorScreen" }, Be.createElement("div", { className: "DocSearch-Screen-Icon" }, Be.createElement(Wn, null)), Be.createElement("p", { className: "DocSearch-Title" }, o2), Be.createElement("p", { className: "DocSearch-Help" }, i2));
}
var $n = ["translations"];
function Qn(e2) {
  return function(e3) {
    if (Array.isArray(e3))
      return Yn(e3);
  }(e2) || function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }(e2) || function(e3, t2) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Yn(e3, t2);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Yn(e3, t2);
  }(e2) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Yn(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Gn(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function Zn(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = Gn(e2, $n), o2 = n2.noResultsText, c2 = void 0 === o2 ? "No results for" : o2, i2 = n2.suggestedQueryText, a2 = void 0 === i2 ? "Try searching for" : i2, u2 = n2.reportMissingResultsText, l2 = void 0 === u2 ? "Believe this query should return results?" : u2, s2 = n2.reportMissingResultsLinkText, f2 = void 0 === s2 ? "Let us know." : s2, p2 = r2.state.context.searchSuggestions;
  return Be.createElement("div", { className: "DocSearch-NoResults" }, Be.createElement("div", { className: "DocSearch-Screen-Icon" }, Be.createElement(Kn, null)), Be.createElement("p", { className: "DocSearch-Title" }, c2, ' "', Be.createElement("strong", null, r2.state.query), '"'), p2 && p2.length > 0 && Be.createElement("div", { className: "DocSearch-NoResults-Prefill-List" }, Be.createElement("p", { className: "DocSearch-Help" }, a2, ":"), Be.createElement("ul", null, p2.slice(0, 3).reduce(function(e3, t3) {
    return [].concat(Qn(e3), [Be.createElement("li", { key: t3 }, Be.createElement("button", { className: "DocSearch-Prefill", key: t3, type: "button", onClick: function() {
      r2.setQuery(t3.toLowerCase() + " "), r2.refresh(), r2.inputRef.current.focus();
    } }, t3))]);
  }, []))), r2.getMissingResultsUrl && Be.createElement("p", { className: "DocSearch-Help" }, "".concat(l2, " "), Be.createElement("a", { href: r2.getMissingResultsUrl({ query: r2.state.query }), target: "_blank", rel: "noopener noreferrer" }, f2)));
}
var Xn = ["hit", "attribute", "tagName"];
function er(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function tr(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? er(Object(n2), true).forEach(function(t3) {
      nr(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : er(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function nr(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function rr(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function or(e2, t2) {
  return t2.split(".").reduce(function(e3, t3) {
    return null != e3 && e3[t3] ? e3[t3] : null;
  }, e2);
}
function cr(e2) {
  var t2 = e2.hit, n2 = e2.attribute, r2 = e2.tagName;
  return g(void 0 === r2 ? "span" : r2, tr(tr({}, rr(e2, Xn)), {}, { dangerouslySetInnerHTML: { __html: or(t2, "_snippetResult.".concat(n2, ".value")) || or(t2, n2) } }));
}
function ir(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return ar(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return ar(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function ar(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function ur() {
  return ur = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, ur.apply(this, arguments);
}
function lr(e2) {
  return e2.collection && 0 !== e2.collection.items.length ? Be.createElement("section", { className: "DocSearch-Hits" }, Be.createElement("div", { className: "DocSearch-Hit-source" }, e2.title), Be.createElement("ul", e2.getListProps(), e2.collection.items.map(function(t2, n2) {
    return Be.createElement(sr, ur({ key: [e2.title, t2.objectID].join(":"), item: t2, index: n2 }, e2));
  }))) : null;
}
function sr(e2) {
  var t2 = e2.item, n2 = e2.index, r2 = e2.renderIcon, o2 = e2.renderAction, c2 = e2.getItemProps, i2 = e2.onItemClick, a2 = e2.collection, u2 = e2.hitComponent, l2 = ir(Be.useState(false), 2), s2 = l2[0], f2 = l2[1], p2 = ir(Be.useState(false), 2), m2 = p2[0], d2 = p2[1], h2 = Be.useRef(null), v2 = u2;
  return Be.createElement("li", ur({ className: ["DocSearch-Hit", t2.__docsearch_parent && "DocSearch-Hit--Child", s2 && "DocSearch-Hit--deleting", m2 && "DocSearch-Hit--favoriting"].filter(Boolean).join(" "), onTransitionEnd: function() {
    h2.current && h2.current();
  } }, c2({ item: t2, source: a2.source, onClick: function() {
    i2(t2);
  } })), Be.createElement(v2, { hit: t2 }, Be.createElement("div", { className: "DocSearch-Hit-Container" }, r2({ item: t2, index: n2 }), t2.hierarchy[t2.type] && "lvl1" === t2.type && Be.createElement("div", { className: "DocSearch-Hit-content-wrapper" }, Be.createElement(cr, { className: "DocSearch-Hit-title", hit: t2, attribute: "hierarchy.lvl1" }), t2.content && Be.createElement(cr, { className: "DocSearch-Hit-path", hit: t2, attribute: "content" })), t2.hierarchy[t2.type] && ("lvl2" === t2.type || "lvl3" === t2.type || "lvl4" === t2.type || "lvl5" === t2.type || "lvl6" === t2.type) && Be.createElement("div", { className: "DocSearch-Hit-content-wrapper" }, Be.createElement(cr, { className: "DocSearch-Hit-title", hit: t2, attribute: "hierarchy.".concat(t2.type) }), Be.createElement(cr, { className: "DocSearch-Hit-path", hit: t2, attribute: "hierarchy.lvl1" })), "content" === t2.type && Be.createElement("div", { className: "DocSearch-Hit-content-wrapper" }, Be.createElement(cr, { className: "DocSearch-Hit-title", hit: t2, attribute: "content" }), Be.createElement(cr, { className: "DocSearch-Hit-path", hit: t2, attribute: "hierarchy.lvl1" })), o2({ item: t2, runDeleteTransition: function(e3) {
    f2(true), h2.current = e3;
  }, runFavoriteTransition: function(e3) {
    d2(true), h2.current = e3;
  } }))));
}
function fr(e2, t2) {
  return e2.reduce(function(e3, n2) {
    var r2 = t2(n2);
    return e3.hasOwnProperty(r2) || (e3[r2] = []), e3[r2].length < 5 && e3[r2].push(n2), e3;
  }, {});
}
function pr(e2) {
  return e2;
}
function mr() {
}
var dr = /(<mark>|<\/mark>)/g, hr = RegExp(dr.source);
function vr(e2) {
  var t2, n2, r2, o2, c2, i2 = e2;
  if (!i2.__docsearch_parent && !e2._highlightResult)
    return e2.hierarchy.lvl0;
  var a2 = ((i2.__docsearch_parent ? null === (t2 = i2.__docsearch_parent) || void 0 === t2 || null === (n2 = t2._highlightResult) || void 0 === n2 || null === (r2 = n2.hierarchy) || void 0 === r2 ? void 0 : r2.lvl0 : null === (o2 = e2._highlightResult) || void 0 === o2 || null === (c2 = o2.hierarchy) || void 0 === c2 ? void 0 : c2.lvl0) || {}).value;
  return a2 && hr.test(a2) ? a2.replace(dr, "") : a2;
}
function yr() {
  return yr = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, yr.apply(this, arguments);
}
function _r(e2) {
  return Be.createElement("div", { className: "DocSearch-Dropdown-Container" }, e2.state.collections.map(function(t2) {
    if (0 === t2.items.length)
      return null;
    var n2 = vr(t2.items[0]);
    return Be.createElement(lr, yr({}, e2, { key: t2.source.sourceId, title: n2, collection: t2, renderIcon: function(e3) {
      var n3, r2 = e3.item, o2 = e3.index;
      return Be.createElement(Be.Fragment, null, r2.__docsearch_parent && Be.createElement("svg", { className: "DocSearch-Hit-Tree", viewBox: "0 0 24 54" }, Be.createElement("g", { stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }, r2.__docsearch_parent !== (null === (n3 = t2.items[o2 + 1]) || void 0 === n3 ? void 0 : n3.__docsearch_parent) ? Be.createElement("path", { d: "M8 6v21M20 27H8.3" }) : Be.createElement("path", { d: "M8 6v42M20 27H8.3" }))), Be.createElement("div", { className: "DocSearch-Hit-icon" }, Be.createElement(Fn, { type: r2.type })));
    }, renderAction: function() {
      return Be.createElement("div", { className: "DocSearch-Hit-action" }, Be.createElement(Hn, null));
    } }));
  }), e2.resultsFooterComponent && Be.createElement("section", { className: "DocSearch-HitsFooter" }, Be.createElement(e2.resultsFooterComponent, { state: e2.state })));
}
var br = ["translations"];
function gr() {
  return gr = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, gr.apply(this, arguments);
}
function Or(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function Sr(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = Or(e2, br), o2 = n2.recentSearchesTitle, c2 = void 0 === o2 ? "Recent" : o2, i2 = n2.noRecentSearchesText, a2 = void 0 === i2 ? "No recent searches" : i2, u2 = n2.saveRecentSearchButtonTitle, l2 = void 0 === u2 ? "Save this search" : u2, s2 = n2.removeRecentSearchButtonTitle, f2 = void 0 === s2 ? "Remove this search from history" : s2, p2 = n2.favoriteSearchesTitle, m2 = void 0 === p2 ? "Favorite" : p2, d2 = n2.removeFavoriteSearchButtonTitle, h2 = void 0 === d2 ? "Remove this search from favorites" : d2;
  return "idle" === r2.state.status && false === r2.hasCollections ? r2.disableUserPersonalization ? null : Be.createElement("div", { className: "DocSearch-StartScreen" }, Be.createElement("p", { className: "DocSearch-Help" }, a2)) : false === r2.hasCollections ? null : Be.createElement("div", { className: "DocSearch-Dropdown-Container" }, Be.createElement(lr, gr({}, r2, { title: c2, collection: r2.state.collections[0], renderIcon: function() {
    return Be.createElement("div", { className: "DocSearch-Hit-icon" }, Be.createElement(qn, null));
  }, renderAction: function(e3) {
    var t3 = e3.item, n3 = e3.runFavoriteTransition, o3 = e3.runDeleteTransition;
    return Be.createElement(Be.Fragment, null, Be.createElement("div", { className: "DocSearch-Hit-action" }, Be.createElement("button", { className: "DocSearch-Hit-action-button", title: l2, type: "submit", onClick: function(e4) {
      e4.preventDefault(), e4.stopPropagation(), n3(function() {
        r2.favoriteSearches.add(t3), r2.recentSearches.remove(t3), r2.refresh();
      });
    } }, Be.createElement(zn, null))), Be.createElement("div", { className: "DocSearch-Hit-action" }, Be.createElement("button", { className: "DocSearch-Hit-action-button", title: f2, type: "submit", onClick: function(e4) {
      e4.preventDefault(), e4.stopPropagation(), o3(function() {
        r2.recentSearches.remove(t3), r2.refresh();
      });
    } }, Be.createElement(Mn, null))));
  } })), Be.createElement(lr, gr({}, r2, { title: m2, collection: r2.state.collections[1], renderIcon: function() {
    return Be.createElement("div", { className: "DocSearch-Hit-icon" }, Be.createElement(zn, null));
  }, renderAction: function(e3) {
    var t3 = e3.item, n3 = e3.runDeleteTransition;
    return Be.createElement("div", { className: "DocSearch-Hit-action" }, Be.createElement("button", { className: "DocSearch-Hit-action-button", title: h2, type: "submit", onClick: function(e4) {
      e4.preventDefault(), e4.stopPropagation(), n3(function() {
        r2.favoriteSearches.remove(t3), r2.refresh();
      });
    } }, Be.createElement(Mn, null)));
  } })));
}
var Er = ["translations"];
function wr() {
  return wr = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, wr.apply(this, arguments);
}
function jr(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
var Pr = Be.memo(function(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = jr(e2, Er);
  if ("error" === r2.state.status)
    return Be.createElement(Jn, { translations: null == n2 ? void 0 : n2.errorScreen });
  var o2 = r2.state.collections.some(function(e3) {
    return e3.items.length > 0;
  });
  return r2.state.query ? false === o2 ? Be.createElement(Zn, wr({}, r2, { translations: null == n2 ? void 0 : n2.noResultsScreen })) : Be.createElement(_r, r2) : Be.createElement(Sr, wr({}, r2, { hasCollections: o2, translations: null == n2 ? void 0 : n2.startScreen }));
}, function(e2, t2) {
  return "loading" === t2.state.status || "stalled" === t2.state.status;
}), Ir = ["translations"];
function kr() {
  return kr = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, kr.apply(this, arguments);
}
function Dr(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function Cr(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = Dr(e2, Ir), o2 = n2.resetButtonTitle, c2 = void 0 === o2 ? "Clear the query" : o2, i2 = n2.resetButtonAriaLabel, a2 = void 0 === i2 ? "Clear the query" : i2, u2 = n2.cancelButtonText, l2 = void 0 === u2 ? "Cancel" : u2, s2 = n2.cancelButtonAriaLabel, f2 = void 0 === s2 ? "Cancel" : s2, p2 = r2.getFormProps({ inputElement: r2.inputRef.current }).onReset;
  return Be.useEffect(function() {
    r2.autoFocus && r2.inputRef.current && r2.inputRef.current.focus();
  }, [r2.autoFocus, r2.inputRef]), Be.useEffect(function() {
    r2.isFromSelection && r2.inputRef.current && r2.inputRef.current.select();
  }, [r2.isFromSelection, r2.inputRef]), Be.createElement(Be.Fragment, null, Be.createElement("form", { className: "DocSearch-Form", onSubmit: function(e3) {
    e3.preventDefault();
  }, onReset: p2 }, Be.createElement("label", kr({ className: "DocSearch-MagnifierLabel" }, r2.getLabelProps()), Be.createElement(ze, null)), Be.createElement("div", { className: "DocSearch-LoadingIndicator" }, Be.createElement(Ln, null)), Be.createElement("input", kr({ className: "DocSearch-Input", ref: r2.inputRef }, r2.getInputProps({ inputElement: r2.inputRef.current, autoFocus: r2.autoFocus, maxLength: 64 }))), Be.createElement("button", { type: "reset", title: c2, className: "DocSearch-Reset", "aria-label": a2, hidden: !r2.state.query }, Be.createElement(Mn, null))), Be.createElement("button", { className: "DocSearch-Cancel", type: "reset", "aria-label": f2, onClick: r2.onClose }, l2));
}
var Ar = ["_highlightResult", "_snippetResult"];
function xr(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function Nr(e2) {
  return false === function() {
    var e3 = "__TEST_KEY__";
    try {
      return localStorage.setItem(e3, ""), localStorage.removeItem(e3), true;
    } catch (e4) {
      return false;
    }
  }() ? { setItem: function() {
  }, getItem: function() {
    return [];
  } } : { setItem: function(t2) {
    return window.localStorage.setItem(e2, JSON.stringify(t2));
  }, getItem: function() {
    var t2 = window.localStorage.getItem(e2);
    return t2 ? JSON.parse(t2) : [];
  } };
}
function Tr(e2) {
  var t2 = e2.key, n2 = e2.limit, r2 = void 0 === n2 ? 5 : n2, o2 = Nr(t2), c2 = o2.getItem().slice(0, r2);
  return { add: function(e3) {
    var t3 = e3, n3 = (t3._highlightResult, t3._snippetResult, xr(t3, Ar)), i2 = c2.findIndex(function(e4) {
      return e4.objectID === n3.objectID;
    });
    i2 > -1 && c2.splice(i2, 1), c2.unshift(n3), c2 = c2.slice(0, r2), o2.setItem(c2);
  }, remove: function(e3) {
    c2 = c2.filter(function(t3) {
      return t3.objectID !== e3.objectID;
    }), o2.setItem(c2);
  }, getAll: function() {
    return c2;
  } };
}
var Rr = ["facetName", "facetQuery"];
function Lr(e2) {
  var t2, n2 = "algoliasearch-client-js-".concat(e2.key), r2 = function() {
    return void 0 === t2 && (t2 = e2.localStorage || window.localStorage), t2;
  }, o2 = function() {
    return JSON.parse(r2().getItem(n2) || "{}");
  };
  return { get: function(e3, t3) {
    var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { miss: function() {
      return Promise.resolve();
    } };
    return Promise.resolve().then(function() {
      var n4 = JSON.stringify(e3), r3 = o2()[n4];
      return Promise.all([r3 || t3(), void 0 !== r3]);
    }).then(function(e4) {
      var t4 = i$1(e4, 2), r3 = t4[0], o3 = t4[1];
      return Promise.all([r3, o3 || n3.miss(r3)]);
    }).then(function(e4) {
      return i$1(e4, 1)[0];
    });
  }, set: function(e3, t3) {
    return Promise.resolve().then(function() {
      var c2 = o2();
      return c2[JSON.stringify(e3)] = t3, r2().setItem(n2, JSON.stringify(c2)), t3;
    });
  }, delete: function(e3) {
    return Promise.resolve().then(function() {
      var t3 = o2();
      delete t3[JSON.stringify(e3)], r2().setItem(n2, JSON.stringify(t3));
    });
  }, clear: function() {
    return Promise.resolve().then(function() {
      r2().removeItem(n2);
    });
  } };
}
function qr(e2) {
  var t2 = a$1(e2.caches), n2 = t2.shift();
  return void 0 === n2 ? { get: function(e3, t3) {
    var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { miss: function() {
      return Promise.resolve();
    } };
    return t3().then(function(e4) {
      return Promise.all([e4, n3.miss(e4)]);
    }).then(function(e4) {
      return i$1(e4, 1)[0];
    });
  }, set: function(e3, t3) {
    return Promise.resolve(t3);
  }, delete: function(e3) {
    return Promise.resolve();
  }, clear: function() {
    return Promise.resolve();
  } } : { get: function(e3, r2) {
    var o2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { miss: function() {
      return Promise.resolve();
    } };
    return n2.get(e3, r2, o2).catch(function() {
      return qr({ caches: t2 }).get(e3, r2, o2);
    });
  }, set: function(e3, r2) {
    return n2.set(e3, r2).catch(function() {
      return qr({ caches: t2 }).set(e3, r2);
    });
  }, delete: function(e3) {
    return n2.delete(e3).catch(function() {
      return qr({ caches: t2 }).delete(e3);
    });
  }, clear: function() {
    return n2.clear().catch(function() {
      return qr({ caches: t2 }).clear();
    });
  } };
}
function Mr() {
  var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { serializable: true }, t2 = {};
  return { get: function(n2, r2) {
    var o2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { miss: function() {
      return Promise.resolve();
    } }, c2 = JSON.stringify(n2);
    if (c2 in t2)
      return Promise.resolve(e2.serializable ? JSON.parse(t2[c2]) : t2[c2]);
    var i2 = r2(), a2 = o2 && o2.miss || function() {
      return Promise.resolve();
    };
    return i2.then(function(e3) {
      return a2(e3);
    }).then(function() {
      return i2;
    });
  }, set: function(n2, r2) {
    return t2[JSON.stringify(n2)] = e2.serializable ? JSON.stringify(r2) : r2, Promise.resolve(r2);
  }, delete: function(e3) {
    return delete t2[JSON.stringify(e3)], Promise.resolve();
  }, clear: function() {
    return t2 = {}, Promise.resolve();
  } };
}
function Hr(e2) {
  for (var t2 = e2.length - 1; t2 > 0; t2--) {
    var n2 = Math.floor(Math.random() * (t2 + 1)), r2 = e2[t2];
    e2[t2] = e2[n2], e2[n2] = r2;
  }
  return e2;
}
function Ur(e2, t2) {
  return t2 ? (Object.keys(t2).forEach(function(n2) {
    e2[n2] = t2[n2](e2);
  }), e2) : e2;
}
function Fr(e2) {
  for (var t2 = arguments.length, n2 = new Array(t2 > 1 ? t2 - 1 : 0), r2 = 1; r2 < t2; r2++)
    n2[r2 - 1] = arguments[r2];
  var o2 = 0;
  return e2.replace(/%s/g, function() {
    return encodeURIComponent(n2[o2++]);
  });
}
var Br = { WithinQueryParameters: 0, WithinHeaders: 1 };
function Vr(e2, t2) {
  var n2 = e2 || {}, r2 = n2.data || {};
  return Object.keys(n2).forEach(function(e3) {
    -1 === ["timeout", "headers", "queryParameters", "data", "cacheable"].indexOf(e3) && (r2[e3] = n2[e3]);
  }), { data: Object.entries(r2).length > 0 ? r2 : void 0, timeout: n2.timeout || t2, headers: n2.headers || {}, queryParameters: n2.queryParameters || {}, cacheable: n2.cacheable };
}
var zr = { Read: 1, Write: 2, Any: 3 }, Wr = 1, Kr = 2, Jr = 3;
function $r(e2) {
  var n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Wr;
  return t(t({}, e2), {}, { status: n2, lastUpdate: Date.now() });
}
function Qr(e2) {
  return "string" == typeof e2 ? { protocol: "https", url: e2, accept: zr.Any } : { protocol: e2.protocol || "https", url: e2.url, accept: e2.accept || zr.Any };
}
var Yr = "GET", Gr = "POST";
function Zr(e2, t2) {
  return Promise.all(t2.map(function(t3) {
    return e2.get(t3, function() {
      return Promise.resolve($r(t3));
    });
  })).then(function(e3) {
    var n2 = e3.filter(function(e4) {
      return function(e5) {
        return e5.status === Wr || Date.now() - e5.lastUpdate > 12e4;
      }(e4);
    }), r2 = e3.filter(function(e4) {
      return function(e5) {
        return e5.status === Jr && Date.now() - e5.lastUpdate <= 12e4;
      }(e4);
    }), o2 = [].concat(a$1(n2), a$1(r2));
    return { getTimeout: function(e4, t3) {
      return (0 === r2.length && 0 === e4 ? 1 : r2.length + 3 + e4) * t3;
    }, statelessHosts: o2.length > 0 ? o2.map(function(e4) {
      return Qr(e4);
    }) : t2 };
  });
}
function Xr(e2, n2, r2, o2) {
  var c2 = [], i2 = function(e3, n3) {
    if (e3.method === Yr || void 0 === e3.data && void 0 === n3.data)
      return;
    var r3 = Array.isArray(e3.data) ? e3.data : t(t({}, e3.data), n3.data);
    return JSON.stringify(r3);
  }(r2, o2), u2 = function(e3, n3) {
    var r3 = t(t({}, e3.headers), n3.headers), o3 = {};
    return Object.keys(r3).forEach(function(e4) {
      var t2 = r3[e4];
      o3[e4.toLowerCase()] = t2;
    }), o3;
  }(e2, o2), l2 = r2.method, s2 = r2.method !== Yr ? {} : t(t({}, r2.data), o2.data), f2 = t(t(t({ "x-algolia-agent": e2.userAgent.value }, e2.queryParameters), s2), o2.queryParameters), p2 = 0, m2 = function t2(n3, a2) {
    var s3 = n3.pop();
    if (void 0 === s3)
      throw { name: "RetryError", message: "Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.", transporterStackTrace: ro(c2) };
    var m3 = { data: i2, headers: u2, method: l2, url: to(s3, r2.path, f2), connectTimeout: a2(p2, e2.timeouts.connect), responseTimeout: a2(p2, o2.timeout) }, d2 = function(e3) {
      var t3 = { request: m3, response: e3, host: s3, triesLeft: n3.length };
      return c2.push(t3), t3;
    }, h2 = { onSucess: function(e3) {
      return function(e4) {
        try {
          return JSON.parse(e4.content);
        } catch (t3) {
          throw function(e5, t4) {
            return { name: "DeserializationError", message: e5, response: t4 };
          }(t3.message, e4);
        }
      }(e3);
    }, onRetry: function(r3) {
      var o3 = d2(r3);
      return r3.isTimedOut && p2++, Promise.all([e2.logger.info("Retryable failure", oo(o3)), e2.hostsCache.set(s3, $r(s3, r3.isTimedOut ? Jr : Kr))]).then(function() {
        return t2(n3, a2);
      });
    }, onFail: function(e3) {
      throw d2(e3), function(e4, t3) {
        var n4 = e4.content, r3 = e4.status, o3 = n4;
        try {
          o3 = JSON.parse(n4).message;
        } catch (e5) {
        }
        return function(e5, t4, n5) {
          return { name: "ApiError", message: e5, status: t4, transporterStackTrace: n5 };
        }(o3, r3, t3);
      }(e3, ro(c2));
    } };
    return e2.requester.send(m3).then(function(e3) {
      return function(e4, t3) {
        return function(e5) {
          var t4 = e5.status;
          return e5.isTimedOut || function(e6) {
            var t5 = e6.isTimedOut, n4 = e6.status;
            return !t5 && 0 == ~~n4;
          }(e5) || 2 != ~~(t4 / 100) && 4 != ~~(t4 / 100);
        }(e4) ? t3.onRetry(e4) : 2 == ~~(e4.status / 100) ? t3.onSucess(e4) : t3.onFail(e4);
      }(e3, h2);
    });
  };
  return Zr(e2.hostsCache, n2).then(function(e3) {
    return m2(a$1(e3.statelessHosts).reverse(), e3.getTimeout);
  });
}
function eo(e2) {
  var t2 = { value: "Algolia for JavaScript (".concat(e2, ")"), add: function(e3) {
    var n2 = "; ".concat(e3.segment).concat(void 0 !== e3.version ? " (".concat(e3.version, ")") : "");
    return -1 === t2.value.indexOf(n2) && (t2.value = "".concat(t2.value).concat(n2)), t2;
  } };
  return t2;
}
function to(e2, t2, n2) {
  var r2 = no(n2), o2 = "".concat(e2.protocol, "://").concat(e2.url, "/").concat("/" === t2.charAt(0) ? t2.substr(1) : t2);
  return r2.length && (o2 += "?".concat(r2)), o2;
}
function no(e2) {
  return Object.keys(e2).map(function(t2) {
    return Fr("%s=%s", t2, (n2 = e2[t2], "[object Object]" === Object.prototype.toString.call(n2) || "[object Array]" === Object.prototype.toString.call(n2) ? JSON.stringify(e2[t2]) : e2[t2]));
    var n2;
  }).join("&");
}
function ro(e2) {
  return e2.map(function(e3) {
    return oo(e3);
  });
}
function oo(e2) {
  var n2 = e2.request.headers["x-algolia-api-key"] ? { "x-algolia-api-key": "*****" } : {};
  return t(t({}, e2), {}, { request: t(t({}, e2.request), {}, { headers: t(t({}, e2.request.headers), n2) }) });
}
var co = function(e2) {
  var n2 = e2.appId, r2 = function(e3, t2, n3) {
    var r3 = { "x-algolia-api-key": n3, "x-algolia-application-id": t2 };
    return { headers: function() {
      return e3 === Br.WithinHeaders ? r3 : {};
    }, queryParameters: function() {
      return e3 === Br.WithinQueryParameters ? r3 : {};
    } };
  }(void 0 !== e2.authMode ? e2.authMode : Br.WithinHeaders, n2, e2.apiKey), o2 = function(e3) {
    var t2 = e3.hostsCache, n3 = e3.logger, r3 = e3.requester, o3 = e3.requestsCache, c3 = e3.responsesCache, a2 = e3.timeouts, u2 = e3.userAgent, l2 = e3.hosts, s2 = e3.queryParameters, f2 = { hostsCache: t2, logger: n3, requester: r3, requestsCache: o3, responsesCache: c3, timeouts: a2, userAgent: u2, headers: e3.headers, queryParameters: s2, hosts: l2.map(function(e4) {
      return Qr(e4);
    }), read: function(e4, t3) {
      var n4 = Vr(t3, f2.timeouts.read), r4 = function() {
        return Xr(f2, f2.hosts.filter(function(e5) {
          return 0 != (e5.accept & zr.Read);
        }), e4, n4);
      };
      if (true !== (void 0 !== n4.cacheable ? n4.cacheable : e4.cacheable))
        return r4();
      var o4 = { request: e4, mappedRequestOptions: n4, transporter: { queryParameters: f2.queryParameters, headers: f2.headers } };
      return f2.responsesCache.get(o4, function() {
        return f2.requestsCache.get(o4, function() {
          return f2.requestsCache.set(o4, r4()).then(function(e5) {
            return Promise.all([f2.requestsCache.delete(o4), e5]);
          }, function(e5) {
            return Promise.all([f2.requestsCache.delete(o4), Promise.reject(e5)]);
          }).then(function(e5) {
            var t4 = i$1(e5, 2);
            return t4[0], t4[1];
          });
        });
      }, { miss: function(e5) {
        return f2.responsesCache.set(o4, e5);
      } });
    }, write: function(e4, t3) {
      return Xr(f2, f2.hosts.filter(function(e5) {
        return 0 != (e5.accept & zr.Write);
      }), e4, Vr(t3, f2.timeouts.write));
    } };
    return f2;
  }(t(t({ hosts: [{ url: "".concat(n2, "-dsn.algolia.net"), accept: zr.Read }, { url: "".concat(n2, ".algolia.net"), accept: zr.Write }].concat(Hr([{ url: "".concat(n2, "-1.algolianet.com") }, { url: "".concat(n2, "-2.algolianet.com") }, { url: "".concat(n2, "-3.algolianet.com") }])) }, e2), {}, { headers: t(t(t({}, r2.headers()), { "content-type": "application/x-www-form-urlencoded" }), e2.headers), queryParameters: t(t({}, r2.queryParameters()), e2.queryParameters) })), c2 = { transporter: o2, appId: n2, addAlgoliaAgent: function(e3, t2) {
    o2.userAgent.add({ segment: e3, version: t2 });
  }, clearCache: function() {
    return Promise.all([o2.requestsCache.clear(), o2.responsesCache.clear()]).then(function() {
    });
  } };
  return Ur(c2, e2.methods);
}, io = function(e2) {
  return function(t2) {
    var n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r2 = { transporter: e2.transporter, appId: e2.appId, indexName: t2 };
    return Ur(r2, n2.methods);
  };
}, ao = function(e2) {
  return function(n2, r2) {
    var o2 = n2.map(function(e3) {
      return t(t({}, e3), {}, { params: no(e3.params || {}) });
    });
    return e2.transporter.read({ method: Gr, path: "1/indexes/*/queries", data: { requests: o2 }, cacheable: true }, r2);
  };
}, uo = function(e2) {
  return function(n2, r2) {
    return Promise.all(n2.map(function(n3) {
      var o2 = n3.params, i2 = o2.facetName, a2 = o2.facetQuery, u2 = c(o2, Rr);
      return io(e2)(n3.indexName, { methods: { searchForFacetValues: fo } }).searchForFacetValues(i2, a2, t(t({}, r2), u2));
    }));
  };
}, lo = function(e2) {
  return function(t2, n2, r2) {
    return e2.transporter.read({ method: Gr, path: Fr("1/answers/%s/prediction", e2.indexName), data: { query: t2, queryLanguages: n2 }, cacheable: true }, r2);
  };
}, so = function(e2) {
  return function(t2, n2) {
    return e2.transporter.read({ method: Gr, path: Fr("1/indexes/%s/query", e2.indexName), data: { query: t2 }, cacheable: true }, n2);
  };
}, fo = function(e2) {
  return function(t2, n2, r2) {
    return e2.transporter.read({ method: Gr, path: Fr("1/indexes/%s/facets/%s/query", e2.indexName, t2), data: { facetQuery: n2 }, cacheable: true }, r2);
  };
}, po = 1, mo = 2, ho = 3;
function vo(e2, n2, r2) {
  var o2, c2 = { appId: e2, apiKey: n2, timeouts: { connect: 1, read: 2, write: 30 }, requester: { send: function(e3) {
    return new Promise(function(t2) {
      var n3 = new XMLHttpRequest();
      n3.open(e3.method, e3.url, true), Object.keys(e3.headers).forEach(function(t3) {
        return n3.setRequestHeader(t3, e3.headers[t3]);
      });
      var r3, o3 = function(e4, r4) {
        return setTimeout(function() {
          n3.abort(), t2({ status: 0, content: r4, isTimedOut: true });
        }, 1e3 * e4);
      }, c3 = o3(e3.connectTimeout, "Connection timeout");
      n3.onreadystatechange = function() {
        n3.readyState > n3.OPENED && void 0 === r3 && (clearTimeout(c3), r3 = o3(e3.responseTimeout, "Socket timeout"));
      }, n3.onerror = function() {
        0 === n3.status && (clearTimeout(c3), clearTimeout(r3), t2({ content: n3.responseText || "Network request failed", status: n3.status, isTimedOut: false }));
      }, n3.onload = function() {
        clearTimeout(c3), clearTimeout(r3), t2({ content: n3.responseText, status: n3.status, isTimedOut: false });
      }, n3.send(e3.data);
    });
  } }, logger: (o2 = ho, { debug: function(e3, t2) {
    return po >= o2 && console.debug(e3, t2), Promise.resolve();
  }, info: function(e3, t2) {
    return mo >= o2 && console.info(e3, t2), Promise.resolve();
  }, error: function(e3, t2) {
    return console.error(e3, t2), Promise.resolve();
  } }), responsesCache: Mr(), requestsCache: Mr({ serializable: false }), hostsCache: qr({ caches: [Lr({ key: "".concat("4.8.5", "-").concat(e2) }), Mr()] }), userAgent: eo("4.8.5").add({ segment: "Browser", version: "lite" }), authMode: Br.WithinQueryParameters };
  return co(t(t(t({}, c2), r2), {}, { methods: { search: ao, searchForFacetValues: uo, multipleQueries: ao, multipleSearchForFacetValues: uo, initIndex: function(e3) {
    return function(t2) {
      return io(e3)(t2, { methods: { search: so, searchForFacetValues: fo, findAnswers: lo } });
    };
  } } }));
}
vo.version = "4.8.5";
var yo = ["footer", "searchBox"];
function _o() {
  return _o = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, _o.apply(this, arguments);
}
function bo(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function go(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? bo(Object(n2), true).forEach(function(t3) {
      Oo(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : bo(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Oo(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function So(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Eo(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Eo(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Eo(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function wo(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function jo(e2) {
  var t2 = e2.appId, n2 = e2.apiKey, r2 = e2.indexName, o2 = e2.placeholder, c2 = void 0 === o2 ? "Search docs" : o2, i2 = e2.searchParameters, a2 = e2.onClose, u2 = void 0 === a2 ? mr : a2, l2 = e2.transformItems, s2 = void 0 === l2 ? pr : l2, f2 = e2.hitComponent, p2 = void 0 === f2 ? Rn : f2, m2 = e2.resultsFooterComponent, d2 = void 0 === m2 ? function() {
    return null;
  } : m2, h2 = e2.navigator, v2 = e2.initialScrollY, y2 = void 0 === v2 ? 0 : v2, _2 = e2.transformSearchClient, b2 = void 0 === _2 ? pr : _2, g2 = e2.disableUserPersonalization, O2 = void 0 !== g2 && g2, S2 = e2.initialQuery, E2 = void 0 === S2 ? "" : S2, w2 = e2.translations, j2 = void 0 === w2 ? {} : w2, P2 = e2.getMissingResultsUrl, I2 = j2.footer, k2 = j2.searchBox, D2 = wo(j2, yo), C2 = So(Be.useState({ query: "", collections: [], completion: null, context: {}, isOpen: false, activeItemId: null, status: "idle" }), 2), A2 = C2[0], x2 = C2[1], N2 = Be.useRef(null), T2 = Be.useRef(null), R2 = Be.useRef(null), L2 = Be.useRef(null), q2 = Be.useRef(null), M2 = Be.useRef(10), H2 = Be.useRef("undefined" != typeof window ? window.getSelection().toString().slice(0, 64) : "").current, U2 = Be.useRef(E2 || H2).current, F2 = function(e3, t3, n3) {
    return Be.useMemo(function() {
      var r3 = vo(e3, t3);
      return r3.addAlgoliaAgent("docsearch", "3.2.1"), false === /docsearch.js \(.*\)/.test(r3.transporter.userAgent.value) && r3.addAlgoliaAgent("docsearch-react", "3.2.1"), n3(r3);
    }, [e3, t3, n3]);
  }(t2, n2, b2), B2 = Be.useRef(Tr({ key: "__DOCSEARCH_FAVORITE_SEARCHES__".concat(r2), limit: 10 })).current, V2 = Be.useRef(Tr({ key: "__DOCSEARCH_RECENT_SEARCHES__".concat(r2), limit: 0 === B2.getAll().length ? 7 : 4 })).current, z2 = Be.useCallback(function(e3) {
    if (!O2) {
      var t3 = "content" === e3.type ? e3.__docsearch_parent : e3;
      t3 && -1 === B2.getAll().findIndex(function(e4) {
        return e4.objectID === t3.objectID;
      }) && V2.add(t3);
    }
  }, [B2, V2, O2]), W2 = Be.useMemo(function() {
    return An({ id: "docsearch", defaultActiveItemId: 0, placeholder: c2, openOnFocus: true, initialState: { query: U2, context: { searchSuggestions: [] } }, navigator: h2, onStateChange: function(e3) {
      x2(e3.state);
    }, getSources: function(e3) {
      var t3 = e3.query, n3 = e3.state, o3 = e3.setContext, c3 = e3.setStatus;
      return t3 ? F2.search([{ query: t3, indexName: r2, params: go({ attributesToRetrieve: ["hierarchy.lvl0", "hierarchy.lvl1", "hierarchy.lvl2", "hierarchy.lvl3", "hierarchy.lvl4", "hierarchy.lvl5", "hierarchy.lvl6", "content", "type", "url"], attributesToSnippet: ["hierarchy.lvl1:".concat(M2.current), "hierarchy.lvl2:".concat(M2.current), "hierarchy.lvl3:".concat(M2.current), "hierarchy.lvl4:".concat(M2.current), "hierarchy.lvl5:".concat(M2.current), "hierarchy.lvl6:".concat(M2.current), "content:".concat(M2.current)], snippetEllipsisText: "\u2026", highlightPreTag: "<mark>", highlightPostTag: "</mark>", hitsPerPage: 20 }, i2) }]).catch(function(e4) {
        throw "RetryError" === e4.name && c3("error"), e4;
      }).then(function(e4) {
        var t4 = e4.results[0], r3 = t4.hits, c4 = t4.nbHits, i3 = fr(r3, function(e5) {
          return vr(e5);
        });
        return n3.context.searchSuggestions.length < Object.keys(i3).length && o3({ searchSuggestions: Object.keys(i3) }), o3({ nbHits: c4 }), Object.values(i3).map(function(e5, t5) {
          return { sourceId: "hits".concat(t5), onSelect: function(e6) {
            var t6 = e6.item, n4 = e6.event;
            z2(t6), n4.shiftKey || n4.ctrlKey || n4.metaKey || u2();
          }, getItemUrl: function(e6) {
            return e6.item.url;
          }, getItems: function() {
            return Object.values(fr(e5, function(e6) {
              return e6.hierarchy.lvl1;
            })).map(s2).map(function(e6) {
              return e6.map(function(t6) {
                return go(go({}, t6), {}, { __docsearch_parent: "lvl1" !== t6.type && e6.find(function(e7) {
                  return "lvl1" === e7.type && e7.hierarchy.lvl1 === t6.hierarchy.lvl1;
                }) });
              });
            }).flat();
          } };
        });
      }) : O2 ? [] : [{ sourceId: "recentSearches", onSelect: function(e4) {
        var t4 = e4.item, n4 = e4.event;
        z2(t4), n4.shiftKey || n4.ctrlKey || n4.metaKey || u2();
      }, getItemUrl: function(e4) {
        return e4.item.url;
      }, getItems: function() {
        return V2.getAll();
      } }, { sourceId: "favoriteSearches", onSelect: function(e4) {
        var t4 = e4.item, n4 = e4.event;
        z2(t4), n4.shiftKey || n4.ctrlKey || n4.metaKey || u2();
      }, getItemUrl: function(e4) {
        return e4.item.url;
      }, getItems: function() {
        return B2.getAll();
      } }];
    } });
  }, [r2, i2, F2, u2, V2, B2, z2, U2, c2, h2, s2, O2]), K2 = W2.getEnvironmentProps, J2 = W2.getRootProps, $2 = W2.refresh;
  return function(e3) {
    var t3 = e3.getEnvironmentProps, n3 = e3.panelElement, r3 = e3.formElement, o3 = e3.inputElement;
    Be.useEffect(function() {
      if (n3 && r3 && o3) {
        var e4 = t3({ panelElement: n3, formElement: r3, inputElement: o3 }), c3 = e4.onTouchStart, i3 = e4.onTouchMove;
        return window.addEventListener("touchstart", c3), window.addEventListener("touchmove", i3), function() {
          window.removeEventListener("touchstart", c3), window.removeEventListener("touchmove", i3);
        };
      }
    }, [t3, n3, r3, o3]);
  }({ getEnvironmentProps: K2, panelElement: L2.current, formElement: R2.current, inputElement: q2.current }), function(e3) {
    var t3 = e3.container;
    Be.useEffect(function() {
      if (t3) {
        var e4 = t3.querySelectorAll("a[href]:not([disabled]), button:not([disabled]), input:not([disabled])"), n3 = e4[0], r3 = e4[e4.length - 1];
        return t3.addEventListener("keydown", o3), function() {
          t3.removeEventListener("keydown", o3);
        };
      }
      function o3(e5) {
        "Tab" === e5.key && (e5.shiftKey ? document.activeElement === n3 && (e5.preventDefault(), r3.focus()) : document.activeElement === r3 && (e5.preventDefault(), n3.focus()));
      }
    }, [t3]);
  }({ container: N2.current }), Be.useEffect(function() {
    return document.body.classList.add("DocSearch--active"), function() {
      var e3, t3;
      document.body.classList.remove("DocSearch--active"), null === (e3 = (t3 = window).scrollTo) || void 0 === e3 || e3.call(t3, 0, y2);
    };
  }, []), Be.useEffect(function() {
    window.matchMedia("(max-width: 768px)").matches && (M2.current = 5);
  }, []), Be.useEffect(function() {
    L2.current && (L2.current.scrollTop = 0);
  }, [A2.query]), Be.useEffect(function() {
    U2.length > 0 && ($2(), q2.current && q2.current.focus());
  }, [U2, $2]), Be.useEffect(function() {
    function e3() {
      if (T2.current) {
        var e4 = 0.01 * window.innerHeight;
        T2.current.style.setProperty("--docsearch-vh", "".concat(e4, "px"));
      }
    }
    return e3(), window.addEventListener("resize", e3), function() {
      window.removeEventListener("resize", e3);
    };
  }, []), Be.createElement("div", _o({ ref: N2 }, J2({ "aria-expanded": true }), { className: ["DocSearch", "DocSearch-Container", "stalled" === A2.status && "DocSearch-Container--Stalled", "error" === A2.status && "DocSearch-Container--Errored"].filter(Boolean).join(" "), role: "button", tabIndex: 0, onMouseDown: function(e3) {
    e3.target === e3.currentTarget && u2();
  } }), Be.createElement("div", { className: "DocSearch-Modal", ref: T2 }, Be.createElement("header", { className: "DocSearch-SearchBar", ref: R2 }, Be.createElement(Cr, _o({}, W2, { state: A2, autoFocus: 0 === U2.length, inputRef: q2, isFromSelection: Boolean(U2) && U2 === H2, translations: k2, onClose: u2 }))), Be.createElement("div", { className: "DocSearch-Dropdown", ref: L2 }, Be.createElement(Pr, _o({}, W2, { indexName: r2, state: A2, hitComponent: p2, resultsFooterComponent: d2, disableUserPersonalization: O2, recentSearches: V2, favoriteSearches: B2, inputRef: q2, translations: D2, getMissingResultsUrl: P2, onItemClick: function(e3) {
    z2(e3), u2();
  } }))), Be.createElement("footer", { className: "DocSearch-Footer" }, Be.createElement(Tn, { translations: I2 }))));
}
function Po() {
  return Po = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, Po.apply(this, arguments);
}
function Io(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return ko(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return ko(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function ko(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Do(e2) {
  var t2, n2, r2 = Be.useRef(null), o2 = Io(Be.useState(false), 2), c2 = o2[0], i2 = o2[1], a2 = Io(Be.useState((null == e2 ? void 0 : e2.initialQuery) || void 0), 2), u2 = a2[0], l2 = a2[1], s2 = Be.useCallback(function() {
    i2(true);
  }, [i2]), f2 = Be.useCallback(function() {
    i2(false);
  }, [i2]);
  return function(e3) {
    var t3 = e3.isOpen, n3 = e3.onOpen, r3 = e3.onClose, o3 = e3.onInput, c3 = e3.searchButtonRef;
    Be.useEffect(function() {
      function e4(e5) {
        (27 === e5.keyCode && t3 || "k" === e5.key && (e5.metaKey || e5.ctrlKey) || !function(e6) {
          var t4 = e6.target, n4 = t4.tagName;
          return t4.isContentEditable || "INPUT" === n4 || "SELECT" === n4 || "TEXTAREA" === n4;
        }(e5) && "/" === e5.key && !t3) && (e5.preventDefault(), t3 ? r3() : document.body.classList.contains("DocSearch--active") || document.body.classList.contains("DocSearch--active") || n3()), c3 && c3.current === document.activeElement && o3 && /[a-zA-Z0-9]/.test(String.fromCharCode(e5.keyCode)) && o3(e5);
      }
      return window.addEventListener("keydown", e4), function() {
        window.removeEventListener("keydown", e4);
      };
    }, [t3, n3, r3, o3, c3]);
  }({ isOpen: c2, onOpen: s2, onClose: f2, onInput: Be.useCallback(function(e3) {
    i2(true), l2(e3.key);
  }, [i2, l2]), searchButtonRef: r2 }), Be.createElement(Be.Fragment, null, Be.createElement(Ye, { ref: r2, translations: null == e2 || null === (t2 = e2.translations) || void 0 === t2 ? void 0 : t2.button, onClick: s2 }), c2 && Ie(Be.createElement(jo, Po({}, e2, { initialScrollY: window.scrollY, initialQuery: u2, translations: null == e2 || null === (n2 = e2.translations) || void 0 === n2 ? void 0 : n2.modal, onClose: f2 })), document.body));
}
function Co(e2) {
  Ae(Be.createElement(Do, o({}, e2, { transformSearchClient: function(t2) {
    return t2.addAlgoliaAgent("docsearch.js", "3.2.1"), e2.transformSearchClient ? e2.transformSearchClient(t2) : t2;
  } })), function(e3) {
    var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : window;
    return "string" == typeof e3 ? t2.document.querySelector(e3) : e3;
  }(e2.container, e2.environment));
}
const isSpecialClick = (event) => event.button === 1 || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;
const useDocsearchShim = () => {
  const router = vueRouter.useRouter();
  const site = useSiteData();
  return {
    hitComponent: ({ hit, children }) => {
      const routePath = shared.resolveRoutePathFromUrl(hit.url, site.value.base);
      return {
        type: "a",
        ref: void 0,
        constructor: void 0,
        key: void 0,
        props: {
          href: hit.url,
          onClick: (event) => {
            if (isSpecialClick(event)) {
              return;
            }
            event.preventDefault();
            router.push(routePath);
          },
          children
        },
        __v: null
      };
    },
    navigator: {
      navigate: ({ itemUrl }) => {
        router.push(itemUrl);
      }
    },
    transformSearchClient: (searchClient) => {
      const searchWithDebounce = r$1(searchClient.search, 500);
      return {
        ...searchClient,
        search: async (...args) => searchWithDebounce(...args)
      };
    }
  };
};
var style = "";
var docsearch = "";
const Docsearch = vue.defineComponent({
  name: "Docsearch",
  props: {
    containerId: {
      type: String,
      required: false,
      default: "docsearch-container"
    },
    options: {
      type: Object,
      required: true
    }
  },
  setup(props) {
    const routeLocale = useRouteLocale();
    const lang = usePageLang();
    const docsearchShim = useDocsearchShim();
    const propsLocale = vue.computed(() => {
      var _a;
      return {
        ...props.options,
        ...(_a = props.options.locales) == null ? void 0 : _a[routeLocale.value]
      };
    });
    const facetFilters = [];
    const initialize = () => {
      var _a, _b;
      const rawFacetFilters = (_b = (_a = propsLocale.value.searchParameters) == null ? void 0 : _a.facetFilters) != null ? _b : [];
      facetFilters.splice(0, facetFilters.length, `lang:${lang.value}`, ...shared.isArray(rawFacetFilters) ? rawFacetFilters : [rawFacetFilters]);
      Co({
        ...docsearchShim,
        ...propsLocale.value,
        container: `#${props.containerId}`,
        searchParameters: {
          ...propsLocale.value.searchParameters,
          facetFilters
        }
      });
    };
    vue.onMounted(() => {
      initialize();
      vue.watch([routeLocale, propsLocale], ([curRouteLocale, curPropsLocale], [prevRouteLocale, prevPropsLocale]) => {
        if (curRouteLocale === prevRouteLocale)
          return;
        if (JSON.stringify(curPropsLocale) !== JSON.stringify(prevPropsLocale)) {
          initialize();
        }
      });
      vue.watch(lang, (curLang, prevLang) => {
        if (curLang !== prevLang) {
          const prevIndex = facetFilters.findIndex((item) => item === `lang:${prevLang}`);
          if (prevIndex > -1) {
            facetFilters.splice(prevIndex, 1, `lang:${curLang}`);
          }
        }
      });
    });
    return () => vue.h("div", { id: props.containerId });
  }
});
const options = { "apiKey": "e3224f6a8f05632af9c14c9767650b54", "indexName": "anyfork", "appId": "09V7PWK61N", "placeholder": "\u641C\u7D22\u6587\u6863", "locales": { "/": { "placeholder": "\u641C\u7D22\u6587\u6863", "translations": { "button": { "buttonText": "\u641C\u7D22\u6587\u6863" } } } } };
var clientConfig8 = defineClientConfig({
  enhance({ app }) {
    app.component("Docsearch", () => vue.h(Docsearch, { options }));
  }
});
const pwaEventSymbol = Symbol("pwaEvent");
const usePwaEvent = () => {
  const pwaEvent = vue.inject(pwaEventSymbol);
  if (!pwaEvent) {
    throw new Error("usePwaEvent() is called without provider.");
  }
  return pwaEvent;
};
const useSkipWaiting = (registration) => {
  const worker = registration.waiting;
  if (!worker)
    return;
  const channel = new MessageChannel();
  worker.postMessage({ type: "SKIP_WAITING" }, [channel.port2]);
};
var clientConfig9 = defineClientConfig({
  setup() {
    return;
  }
});
var vars = "";
var pwaPopup = "";
vue.defineComponent({
  name: "PwaPopup",
  props: {
    locales: {
      type: Object,
      required: false,
      default: () => ({})
    }
  },
  setup(props) {
    const event = usePwaEvent();
    const routeLocale = useRouteLocale();
    const locale = vue.computed(() => {
      var _a;
      return (_a = props.locales[routeLocale.value]) != null ? _a : {
        message: "New content is available.",
        buttonText: "Refresh"
      };
    });
    const show = vue.ref(false);
    const registration = vue.ref(null);
    const onClick = () => {
      show.value = false;
      if (registration.value) {
        useSkipWaiting(registration.value);
        location.reload(true);
      }
    };
    event.on("updated", (reg) => {
      if (reg) {
        registration.value = reg;
        show.value = true;
      }
    });
    return () => vue.h(vue.Transition, {
      name: "pwa-popup"
    }, () => show.value ? vue.h("div", {
      class: "pwa-popup"
    }, [
      locale.value.message,
      vue.h("br"),
      vue.h("button", {
        onClick
      }, locale.value.buttonText)
    ]) : null);
  }
});
var clientConfig10 = defineClientConfig({
  rootComponents: [
    vue.defineComponent(() => {
      return () => null;
    })
  ]
});
var hopeInject = "";
var clientConfig11 = {};
var message = "";
const f = (t2) => {
  const e2 = useRouteLocale();
  return vue.computed(() => t2[e2.value]);
};
class b {
  constructor() {
    const t2 = "message-container", e2 = document.getElementById(t2);
    e2 ? this.containerElement = e2 : (this.containerElement = document.createElement("div"), this.containerElement.id = t2, document.body.appendChild(this.containerElement));
  }
  pop(t2, e2 = 2e3) {
    const n2 = document.createElement("div");
    n2.className = "message move-in", n2.innerHTML = t2, this.containerElement.appendChild(n2), e2 > 0 && setTimeout(() => {
      this.close(n2);
    }, e2);
  }
  close(t2) {
    t2.className = t2.className.replace("move-in", ""), t2.className += "move-out", t2.addEventListener("animationend", () => {
      t2.remove();
    });
  }
}
Object.freeze({}), Object.freeze([]);
var L, H = function() {
  var t2 = 1e3, e2 = 6e4, n2 = 36e5, r2 = "millisecond", i2 = "second", s2 = "minute", o2 = "hour", a2 = "day", u2 = "week", c2 = "month", f2 = "quarter", d2 = "year", h2 = "date", l2 = "Invalid Date", m2 = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/, p2 = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g, $2 = { name: "en", weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_") }, v2 = function(t3, e3, n3) {
    var r3 = String(t3);
    return !r3 || r3.length >= e3 ? t3 : "" + Array(e3 + 1 - r3.length).join(n3) + t3;
  }, y2 = { s: v2, z: function(t3) {
    var e3 = -t3.utcOffset(), n3 = Math.abs(e3), r3 = Math.floor(n3 / 60), i3 = n3 % 60;
    return (e3 <= 0 ? "+" : "-") + v2(r3, 2, "0") + ":" + v2(i3, 2, "0");
  }, m: function t3(e3, n3) {
    if (e3.date() < n3.date())
      return -t3(n3, e3);
    var r3 = 12 * (n3.year() - e3.year()) + (n3.month() - e3.month()), i3 = e3.clone().add(r3, c2), s3 = n3 - i3 < 0, o3 = e3.clone().add(r3 + (s3 ? -1 : 1), c2);
    return +(-(r3 + (n3 - i3) / (s3 ? i3 - o3 : o3 - i3)) || 0);
  }, a: function(t3) {
    return t3 < 0 ? Math.ceil(t3) || 0 : Math.floor(t3);
  }, p: function(t3) {
    return { M: c2, y: d2, w: u2, d: a2, D: h2, h: o2, m: s2, s: i2, ms: r2, Q: f2 }[t3] || String(t3 || "").toLowerCase().replace(/s$/, "");
  }, u: function(t3) {
    return void 0 === t3;
  } }, g2 = "en", M2 = {};
  M2[g2] = $2;
  var D2 = function(t3) {
    return t3 instanceof S2;
  }, _2 = function t3(e3, n3, r3) {
    var i3;
    if (!e3)
      return g2;
    if ("string" == typeof e3) {
      var s3 = e3.toLowerCase();
      M2[s3] && (i3 = s3), n3 && (M2[s3] = n3, i3 = s3);
      var o3 = e3.split("-");
      if (!i3 && o3.length > 1)
        return t3(o3[0]);
    } else {
      var a3 = e3.name;
      M2[a3] = e3, i3 = a3;
    }
    return !r3 && i3 && (g2 = i3), i3 || !r3 && g2;
  }, Y2 = function(t3, e3) {
    if (D2(t3))
      return t3.clone();
    var n3 = "object" == typeof e3 ? e3 : {};
    return n3.date = t3, n3.args = arguments, new S2(n3);
  }, w2 = y2;
  w2.l = _2, w2.i = D2, w2.w = function(t3, e3) {
    return Y2(t3, { locale: e3.$L, utc: e3.$u, x: e3.$x, $offset: e3.$offset });
  };
  var S2 = function() {
    function $3(t3) {
      this.$L = _2(t3.locale, null, true), this.parse(t3);
    }
    var v3 = $3.prototype;
    return v3.parse = function(t3) {
      this.$d = function(t4) {
        var e3 = t4.date, n3 = t4.utc;
        if (null === e3)
          return new Date(NaN);
        if (w2.u(e3))
          return new Date();
        if (e3 instanceof Date)
          return new Date(e3);
        if ("string" == typeof e3 && !/Z$/i.test(e3)) {
          var r3 = e3.match(m2);
          if (r3) {
            var i3 = r3[2] - 1 || 0, s3 = (r3[7] || "0").substring(0, 3);
            return n3 ? new Date(Date.UTC(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3)) : new Date(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3);
          }
        }
        return new Date(e3);
      }(t3), this.$x = t3.x || {}, this.init();
    }, v3.init = function() {
      var t3 = this.$d;
      this.$y = t3.getFullYear(), this.$M = t3.getMonth(), this.$D = t3.getDate(), this.$W = t3.getDay(), this.$H = t3.getHours(), this.$m = t3.getMinutes(), this.$s = t3.getSeconds(), this.$ms = t3.getMilliseconds();
    }, v3.$utils = function() {
      return w2;
    }, v3.isValid = function() {
      return !(this.$d.toString() === l2);
    }, v3.isSame = function(t3, e3) {
      var n3 = Y2(t3);
      return this.startOf(e3) <= n3 && n3 <= this.endOf(e3);
    }, v3.isAfter = function(t3, e3) {
      return Y2(t3) < this.startOf(e3);
    }, v3.isBefore = function(t3, e3) {
      return this.endOf(e3) < Y2(t3);
    }, v3.$g = function(t3, e3, n3) {
      return w2.u(t3) ? this[e3] : this.set(n3, t3);
    }, v3.unix = function() {
      return Math.floor(this.valueOf() / 1e3);
    }, v3.valueOf = function() {
      return this.$d.getTime();
    }, v3.startOf = function(t3, e3) {
      var n3 = this, r3 = !!w2.u(e3) || e3, f3 = w2.p(t3), l3 = function(t4, e4) {
        var i3 = w2.w(n3.$u ? Date.UTC(n3.$y, e4, t4) : new Date(n3.$y, e4, t4), n3);
        return r3 ? i3 : i3.endOf(a2);
      }, m3 = function(t4, e4) {
        return w2.w(n3.toDate()[t4].apply(n3.toDate("s"), (r3 ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e4)), n3);
      }, p3 = this.$W, $4 = this.$M, v4 = this.$D, y3 = "set" + (this.$u ? "UTC" : "");
      switch (f3) {
        case d2:
          return r3 ? l3(1, 0) : l3(31, 11);
        case c2:
          return r3 ? l3(1, $4) : l3(0, $4 + 1);
        case u2:
          var g3 = this.$locale().weekStart || 0, M3 = (p3 < g3 ? p3 + 7 : p3) - g3;
          return l3(r3 ? v4 - M3 : v4 + (6 - M3), $4);
        case a2:
        case h2:
          return m3(y3 + "Hours", 0);
        case o2:
          return m3(y3 + "Minutes", 1);
        case s2:
          return m3(y3 + "Seconds", 2);
        case i2:
          return m3(y3 + "Milliseconds", 3);
        default:
          return this.clone();
      }
    }, v3.endOf = function(t3) {
      return this.startOf(t3, false);
    }, v3.$set = function(t3, e3) {
      var n3, u3 = w2.p(t3), f3 = "set" + (this.$u ? "UTC" : ""), l3 = (n3 = {}, n3[a2] = f3 + "Date", n3[h2] = f3 + "Date", n3[c2] = f3 + "Month", n3[d2] = f3 + "FullYear", n3[o2] = f3 + "Hours", n3[s2] = f3 + "Minutes", n3[i2] = f3 + "Seconds", n3[r2] = f3 + "Milliseconds", n3)[u3], m3 = u3 === a2 ? this.$D + (e3 - this.$W) : e3;
      if (u3 === c2 || u3 === d2) {
        var p3 = this.clone().set(h2, 1);
        p3.$d[l3](m3), p3.init(), this.$d = p3.set(h2, Math.min(this.$D, p3.daysInMonth())).$d;
      } else
        l3 && this.$d[l3](m3);
      return this.init(), this;
    }, v3.set = function(t3, e3) {
      return this.clone().$set(t3, e3);
    }, v3.get = function(t3) {
      return this[w2.p(t3)]();
    }, v3.add = function(r3, f3) {
      var h3, l3 = this;
      r3 = Number(r3);
      var m3 = w2.p(f3), p3 = function(t3) {
        var e3 = Y2(l3);
        return w2.w(e3.date(e3.date() + Math.round(t3 * r3)), l3);
      };
      if (m3 === c2)
        return this.set(c2, this.$M + r3);
      if (m3 === d2)
        return this.set(d2, this.$y + r3);
      if (m3 === a2)
        return p3(1);
      if (m3 === u2)
        return p3(7);
      var $4 = (h3 = {}, h3[s2] = e2, h3[o2] = n2, h3[i2] = t2, h3)[m3] || 1, v4 = this.$d.getTime() + r3 * $4;
      return w2.w(v4, this);
    }, v3.subtract = function(t3, e3) {
      return this.add(-1 * t3, e3);
    }, v3.format = function(t3) {
      var e3 = this, n3 = this.$locale();
      if (!this.isValid())
        return n3.invalidDate || l2;
      var r3 = t3 || "YYYY-MM-DDTHH:mm:ssZ", i3 = w2.z(this), s3 = this.$H, o3 = this.$m, a3 = this.$M, u3 = n3.weekdays, c3 = n3.months, f3 = function(t4, n4, i4, s4) {
        return t4 && (t4[n4] || t4(e3, r3)) || i4[n4].slice(0, s4);
      }, d3 = function(t4) {
        return w2.s(s3 % 12 || 12, t4, "0");
      }, h3 = n3.meridiem || function(t4, e4, n4) {
        var r4 = t4 < 12 ? "AM" : "PM";
        return n4 ? r4.toLowerCase() : r4;
      }, m3 = { YY: String(this.$y).slice(-2), YYYY: this.$y, M: a3 + 1, MM: w2.s(a3 + 1, 2, "0"), MMM: f3(n3.monthsShort, a3, c3, 3), MMMM: f3(c3, a3), D: this.$D, DD: w2.s(this.$D, 2, "0"), d: String(this.$W), dd: f3(n3.weekdaysMin, this.$W, u3, 2), ddd: f3(n3.weekdaysShort, this.$W, u3, 3), dddd: u3[this.$W], H: String(s3), HH: w2.s(s3, 2, "0"), h: d3(1), hh: d3(2), a: h3(s3, o3, true), A: h3(s3, o3, false), m: String(o3), mm: w2.s(o3, 2, "0"), s: String(this.$s), ss: w2.s(this.$s, 2, "0"), SSS: w2.s(this.$ms, 3, "0"), Z: i3 };
      return r3.replace(p2, function(t4, e4) {
        return e4 || m3[t4] || i3.replace(":", "");
      });
    }, v3.utcOffset = function() {
      return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);
    }, v3.diff = function(r3, h3, l3) {
      var m3, p3 = w2.p(h3), $4 = Y2(r3), v4 = ($4.utcOffset() - this.utcOffset()) * e2, y3 = this - $4, g3 = w2.m(this, $4);
      return g3 = (m3 = {}, m3[d2] = g3 / 12, m3[c2] = g3, m3[f2] = g3 / 3, m3[u2] = (y3 - v4) / 6048e5, m3[a2] = (y3 - v4) / 864e5, m3[o2] = y3 / n2, m3[s2] = y3 / e2, m3[i2] = y3 / t2, m3)[p3] || y3, l3 ? g3 : w2.a(g3);
    }, v3.daysInMonth = function() {
      return this.endOf(c2).$D;
    }, v3.$locale = function() {
      return M2[this.$L];
    }, v3.locale = function(t3, e3) {
      if (!t3)
        return this.$L;
      var n3 = this.clone(), r3 = _2(t3, e3, true);
      return r3 && (n3.$L = r3), n3;
    }, v3.clone = function() {
      return w2.w(this.$d, this);
    }, v3.toDate = function() {
      return new Date(this.valueOf());
    }, v3.toJSON = function() {
      return this.isValid() ? this.toISOString() : null;
    }, v3.toISOString = function() {
      return this.$d.toISOString();
    }, v3.toString = function() {
      return this.$d.toUTCString();
    }, $3;
  }(), b2 = S2.prototype;
  return Y2.prototype = b2, [["$ms", r2], ["$s", i2], ["$m", s2], ["$H", o2], ["$W", a2], ["$M", c2], ["$y", d2], ["$D", h2]].forEach(function(t3) {
    b2[t3[1]] = function(e3) {
      return this.$g(e3, t3[0], t3[1]);
    };
  }), Y2.extend = function(t3, e3) {
    return t3.$i || (t3(e3, S2, Y2), t3.$i = true), Y2;
  }, Y2.locale = _2, Y2.isDayjs = D2, Y2.unix = function(t3) {
    return Y2(1e3 * t3);
  }, Y2.en = M2[g2], Y2.Ls = M2, Y2.p = {}, Y2;
}(), z = (L = { LTS: "h:mm:ss A", LT: "h:mm A", L: "MM/DD/YYYY", LL: "MMMM D, YYYY", LLL: "MMMM D, YYYY h:mm A", LLLL: "dddd, MMMM D, YYYY h:mm A" }, function(t2, e2, n2) {
  var r2 = e2.prototype, i2 = r2.format;
  n2.en.formats = L, r2.format = function(t3) {
    void 0 === t3 && (t3 = "YYYY-MM-DDTHH:mm:ssZ");
    var e3 = this.$locale().formats, n3 = function(t4, e4) {
      return t4.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g, function(t5, n4, r3) {
        var i3 = r3 && r3.toUpperCase();
        return n4 || e4[r3] || L[r3] || e4[i3].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, function(t6, e5, n5) {
          return e5 || n5.slice(1);
        });
      });
    }(t3, void 0 === e3 ? {} : e3);
    return i2.call(this, n3);
  };
}), N = function(t2, e2, n2) {
  var r2 = e2.prototype, i2 = function(t3) {
    var e3, i3 = t3.date, s3 = t3.utc, o3 = {};
    if (!((e3 = i3) instanceof Date) && !(e3 instanceof Array) && e3 instanceof Object) {
      if (!Object.keys(i3).length)
        return new Date();
      var a3 = s3 ? n2.utc() : n2();
      Object.keys(i3).forEach(function(t4) {
        var e4, n3;
        o3[e4 = t4, n3 = r2.$utils().p(e4), "date" === n3 ? "day" : n3] = i3[t4];
      });
      var u3 = o3.day || (o3.year || o3.month >= 0 ? 1 : a3.date()), c2 = o3.year || a3.year(), f2 = o3.month >= 0 ? o3.month : o3.year || o3.day ? 0 : a3.month(), d2 = o3.hour || 0, h2 = o3.minute || 0, l2 = o3.second || 0, m2 = o3.millisecond || 0;
      return s3 ? new Date(Date.UTC(c2, f2, u3, d2, h2, l2, m2)) : new Date(c2, f2, u3, d2, h2, l2, m2);
    }
    return i3;
  }, s2 = r2.parse;
  r2.parse = function(t3) {
    t3.date = i2.bind(this)(t3), s2.bind(this)(t3);
  };
  var o2 = r2.set, a2 = r2.add, u2 = function(t3, e3, n3, r3) {
    if (void 0 === r3 && (r3 = 1), e3 instanceof Object) {
      var i3 = Object.keys(e3), s3 = this;
      return i3.forEach(function(n4) {
        s3 = t3.bind(s3)(e3[n4] * r3, n4);
      }), s3;
    }
    return t3.bind(this)(e3 * r3, n3);
  };
  r2.set = function(t3, e3) {
    return e3 = void 0 === e3 ? t3 : e3, u2.bind(this)(function(t4, e4) {
      return o2.bind(this)(e4, t4);
    }, e3, t3);
  }, r2.add = function(t3, e3) {
    return u2.bind(this)(a2, t3, e3);
  }, r2.subtract = function(t3, e3) {
    return u2.bind(this)(a2, t3, e3, -1);
  };
}, k = function() {
  var t2 = { year: 0, month: 1, day: 2, hour: 3, minute: 4, second: 5 }, e2 = {};
  return function(n2, r2, i2) {
    var s2, o2 = function(t3, n3, r3) {
      void 0 === r3 && (r3 = {});
      var i3 = new Date(t3), s3 = function(t4, n4) {
        void 0 === n4 && (n4 = {});
        var r4 = n4.timeZoneName || "short", i4 = t4 + "|" + r4, s4 = e2[i4];
        return s4 || (s4 = new Intl.DateTimeFormat("en-US", { hour12: false, timeZone: t4, year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit", timeZoneName: r4 }), e2[i4] = s4), s4;
      }(n3, r3);
      return s3.formatToParts(i3);
    }, a2 = function(e3, n3) {
      for (var r3 = o2(e3, n3), s3 = [], a3 = 0; a3 < r3.length; a3 += 1) {
        var u3 = r3[a3], c3 = u3.type, f2 = u3.value, d2 = t2[c3];
        d2 >= 0 && (s3[d2] = parseInt(f2, 10));
      }
      var h2 = s3[3], l2 = 24 === h2 ? 0 : h2, m2 = s3[0] + "-" + s3[1] + "-" + s3[2] + " " + l2 + ":" + s3[4] + ":" + s3[5] + ":000", p2 = +e3;
      return (i2.utc(m2).valueOf() - (p2 -= p2 % 1e3)) / 6e4;
    }, u2 = r2.prototype;
    u2.tz = function(t3, e3) {
      void 0 === t3 && (t3 = s2);
      var n3 = this.utcOffset(), r3 = this.toDate(), o3 = r3.toLocaleString("en-US", { timeZone: t3 }), a3 = Math.round((r3 - new Date(o3)) / 1e3 / 60), u3 = i2(o3).$set("millisecond", this.$ms).utcOffset(15 * -Math.round(r3.getTimezoneOffset() / 15) - a3, true);
      if (e3) {
        var c3 = u3.utcOffset();
        u3 = u3.add(n3 - c3, "minute");
      }
      return u3.$x.$timezone = t3, u3;
    }, u2.offsetName = function(t3) {
      var e3 = this.$x.$timezone || i2.tz.guess(), n3 = o2(this.valueOf(), e3, { timeZoneName: t3 }).find(function(t4) {
        return "timezonename" === t4.type.toLowerCase();
      });
      return n3 && n3.value;
    };
    var c2 = u2.startOf;
    u2.startOf = function(t3, e3) {
      if (!this.$x || !this.$x.$timezone)
        return c2.call(this, t3, e3);
      var n3 = i2(this.format("YYYY-MM-DD HH:mm:ss:SSS"));
      return c2.call(n3, t3, e3).tz(this.$x.$timezone, true);
    }, i2.tz = function(t3, e3, n3) {
      var r3 = n3 && e3, o3 = n3 || e3 || s2, u3 = a2(+i2(), o3);
      if ("string" != typeof t3)
        return i2(t3).tz(o3);
      var c3 = function(t4, e4, n4) {
        var r4 = t4 - 60 * e4 * 1e3, i3 = a2(r4, n4);
        if (e4 === i3)
          return [r4, e4];
        var s3 = a2(r4 -= 60 * (i3 - e4) * 1e3, n4);
        return i3 === s3 ? [r4, i3] : [t4 - 60 * Math.min(i3, s3) * 1e3, Math.max(i3, s3)];
      }(i2.utc(t3, r3).valueOf(), u3, o3), f2 = c3[0], d2 = c3[1], h2 = i2(f2).utcOffset(d2);
      return h2.$x.$timezone = o3, h2;
    }, i2.tz.guess = function() {
      return Intl.DateTimeFormat().resolvedOptions().timeZone;
    }, i2.tz.setDefault = function(t3) {
      s2 = t3;
    };
  };
}(), I = function() {
  var t2 = "minute", e2 = /[+-]\d\d(?::?\d\d)?/g, n2 = /([+-]|\d\d)/g;
  return function(r2, i2, s2) {
    var o2 = i2.prototype;
    s2.utc = function(t3) {
      return new i2({ date: t3, utc: true, args: arguments });
    }, o2.utc = function(e3) {
      var n3 = s2(this.toDate(), { locale: this.$L, utc: true });
      return e3 ? n3.add(this.utcOffset(), t2) : n3;
    }, o2.local = function() {
      return s2(this.toDate(), { locale: this.$L, utc: false });
    };
    var a2 = o2.parse;
    o2.parse = function(t3) {
      t3.utc && (this.$u = true), this.$utils().u(t3.$offset) || (this.$offset = t3.$offset), a2.call(this, t3);
    };
    var u2 = o2.init;
    o2.init = function() {
      if (this.$u) {
        var t3 = this.$d;
        this.$y = t3.getUTCFullYear(), this.$M = t3.getUTCMonth(), this.$D = t3.getUTCDate(), this.$W = t3.getUTCDay(), this.$H = t3.getUTCHours(), this.$m = t3.getUTCMinutes(), this.$s = t3.getUTCSeconds(), this.$ms = t3.getUTCMilliseconds();
      } else
        u2.call(this);
    };
    var c2 = o2.utcOffset;
    o2.utcOffset = function(r3, i3) {
      var s3 = this.$utils().u;
      if (s3(r3))
        return this.$u ? 0 : s3(this.$offset) ? c2.call(this) : this.$offset;
      if ("string" == typeof r3 && (r3 = function(t3) {
        void 0 === t3 && (t3 = "");
        var r4 = t3.match(e2);
        if (!r4)
          return null;
        var i4 = ("" + r4[0]).match(n2) || ["-", 0, 0], s4 = i4[0], o4 = 60 * +i4[1] + +i4[2];
        return 0 === o4 ? 0 : "+" === s4 ? o4 : -o4;
      }(r3), null === r3))
        return this;
      var o3 = Math.abs(r3) <= 16 ? 60 * r3 : r3, a3 = this;
      if (i3)
        return a3.$offset = o3, a3.$u = 0 === r3, a3;
      if (0 !== r3) {
        var u3 = this.$u ? this.toDate().getTimezoneOffset() : -1 * this.utcOffset();
        (a3 = this.local().add(o3 + u3, t2)).$offset = o3, a3.$x.$localOffset = u3;
      } else
        a3 = this.utc();
      return a3;
    };
    var f2 = o2.format;
    o2.format = function(t3) {
      var e3 = t3 || (this.$u ? "YYYY-MM-DDTHH:mm:ss[Z]" : "");
      return f2.call(this, e3);
    }, o2.valueOf = function() {
      var t3 = this.$utils().u(this.$offset) ? 0 : this.$offset + (this.$x.$localOffset || this.$d.getTimezoneOffset());
      return this.$d.valueOf() - 6e4 * t3;
    }, o2.isUTC = function() {
      return !!this.$u;
    }, o2.toISOString = function() {
      return this.toDate().toISOString();
    }, o2.toString = function() {
      return this.toDate().toUTCString();
    };
    var d2 = o2.toDate;
    o2.toDate = function(t3) {
      return "s" === t3 && this.$offset ? s2(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate() : d2.call(this);
    };
    var h2 = o2.diff;
    o2.diff = function(t3, e3, n3) {
      if (t3 && this.$u === t3.$u)
        return h2.call(this, t3, e3, n3);
      var r3 = this.local(), i3 = s2(t3).local();
      return h2.call(r3, i3, e3, n3);
    };
  };
}();
H.extend(z), H.extend(N), H.extend(I), H.extend(k);
const W = { name: "zh-cn", weekdays: "\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"), weekdaysShort: "\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"), weekdaysMin: "\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"), months: "\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"), monthsShort: "1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"), ordinal: (t2, e2) => "W" === e2 ? `${t2}\u5468` : `${t2}\u65E5`, weekStart: 1, yearStart: 4, formats: { LT: "HH:mm", LTS: "HH:mm:ss", L: "YYYY/MM/DD", LL: "YYYY\u5E74M\u6708D\u65E5", LLL: "YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206", LLLL: "YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206", l: "YYYY/M/D", ll: "YYYY\u5E74M\u6708D\u65E5", lll: "YYYY\u5E74M\u6708D\u65E5 HH:mm", llll: "YYYY\u5E74M\u6708D\u65E5dddd HH:mm" }, relativeTime: { future: "%s\u5185", past: "%s\u524D", s: "\u51E0\u79D2", m: "1 \u5206\u949F", mm: "%d \u5206\u949F", h: "1 \u5C0F\u65F6", hh: "%d \u5C0F\u65F6", d: "1 \u5929", dd: "%d \u5929", M: "1 \u4E2A\u6708", MM: "%d \u4E2A\u6708", y: "1 \u5E74", yy: "%d \u5E74" }, meridiem: (t2, e2) => {
  const n2 = 100 * t2 + e2;
  return n2 < 600 ? "\u51CC\u6668" : n2 < 900 ? "\u65E9\u4E0A" : n2 < 1100 ? "\u4E0A\u5348" : n2 < 1300 ? "\u4E2D\u5348" : n2 < 1800 ? "\u4E0B\u5348" : "\u665A\u4E0A";
} }, Z = { name: "en", weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_") };
H.locale("zh", W), H.locale("en", Z), H.extend(N), H.extend(I), H.extend(k);
var balloon = "";
var button = "";
const n = { "selector": '.theme-default-content div[class*="language-"] pre' }, a = () => !!navigator && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/iu.test(navigator.userAgent), l = () => {
  const e2 = vueRouter.useRoute(), l2 = f({ "/": { "copy": "copy", "hint": "\u590D\u5236\u6210\u529F!" } });
  let i2;
  const p2 = (e3) => {
    if (!e3.hasAttribute("copy-code-registered")) {
      const t2 = document.createElement("button");
      n.pure ? (t2.className = "copy-code-pure-button", t2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon-copy-code"><path d="M704 896v80c0 26.51-21.49 48-48 48H112c-26.51 0-48-21.49-48-48V240c0-26.51 21.49-48 48-48h144v592c0 61.758 50.242 112 112 112h336zm0-688V0H368c-26.51 0-48 21.49-48 48v736c0 26.51 21.49 48 48 48h544c26.51 0 48-21.49 48-48V256H752c-26.4 0-48-21.6-48-48zm241.942-62.058L814.058 14.058A48 48 0 0 0 780.118 0H768v192h192v-12.118a48 48 0 0 0-14.058-33.94z"/></svg>') : (t2.className = "copy-code-button", t2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="icon-copy-code"><path fill="currentColor" d="M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 00-6-6H102a6 6 0 00-6 6v20a6 6 0 006 6h180a6 6 0 006-6z" /></svg>'), t2.addEventListener("click", () => {
        ((e4) => {
          const t3 = document.getSelection(), o2 = !!(t3 && t3.rangeCount > 0) && t3.getRangeAt(0), c2 = document.createElement("textarea");
          c2.value = e4, c2.setAttribute("readonly", ""), c2.style.position = "absolute", c2.style.top = "-9999px", document.body.appendChild(c2), c2.select(), document.execCommand("copy"), n.pure || i2.pop(`<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#06a35a"><path d="M822.812 824.618c-83.076 81.992-188.546 124.614-316.05 127.865-122.085-3.251-223.943-45.873-305.935-127.865S76.213 640.406 72.962 518.682c3.251-127.503 45.873-232.973 127.865-316.05 81.992-83.075 184.211-126.058 305.936-129.309 127.503 3.251 232.973 46.234 316.049 129.31 83.076 83.076 126.059 188.546 129.31 316.05-2.89 121.723-46.234 223.943-129.31 305.935zM432.717 684.111c3.973 3.974 8.307 5.78 13.364 6.14 5.057.362 9.753-1.444 13.365-5.417l292.57-287.515c3.974-3.973 5.78-8.307 5.78-13.364s-1.806-9.753-5.78-13.365l1.807 1.806c-3.973-3.973-8.669-5.779-14.087-6.14-5.418-.361-10.475 1.445-14.809 5.418L460.529 592.006c-3.973 3.25-8.669 4.695-14.448 4.695-5.78 0-10.836-1.445-15.531-3.973l-94.273-72.962c-4.335-3.251-9.392-4.335-14.448-3.973s-9.392 3.25-12.642 7.585l-2.89 3.973c-3.25 4.334-4.334 9.391-3.973 14.81.722 5.417 2.528 10.113 5.779 14.086L432.717 684.11z"/></svg><span>${l2.value.copy} \u{1F389}</span>`, n.duration), document.body.removeChild(c2), o2 && t3 && (t3.removeAllRanges(), t3.addRange(o2));
        })(e3.innerText);
      }), t2.setAttribute("aria-label", l2.value.hint), t2.setAttribute("data-balloon-pos", "left"), e3.parentElement && e3.parentElement.insertBefore(t2, e3), e3.setAttribute("copy-code-registered", "");
    }
  }, d2 = () => {
    const e3 = n.selector;
    setTimeout(() => {
      document.querySelectorAll(e3).forEach(p2);
    }, n.delay || 500);
  };
  vue.onMounted(() => {
    i2 = new b(), a() && !n.showInMobile || d2();
  }), vue.watch(() => e2.path, () => {
    a() && !n.showInMobile || d2();
  });
};
var i = defineClientConfig({ setup: () => {
  l();
} });
const _sfc_main$v = /* @__PURE__ */ vue.defineComponent({
  __name: "NavbarBrand",
  __ssrInlineRender: true,
  setup(__props) {
    const routeLocale = useRouteLocale();
    const siteLocale = useSiteLocaleData();
    const themeLocale = useThemeLocaleData();
    const isDarkMode = useDarkMode();
    const navbarBrandLink = vue.computed(
      () => themeLocale.value.home || routeLocale.value
    );
    const navbarBrandTitle = vue.computed(() => siteLocale.value.title);
    const navbarBrandLogo = vue.computed(() => {
      if (isDarkMode.value && themeLocale.value.logoDark !== void 0) {
        return themeLocale.value.logoDark;
      }
      return themeLocale.value.logo;
    });
    const NavbarBrandLogo = () => {
      if (!navbarBrandLogo.value)
        return null;
      const img = vue.h("img", {
        class: "logo",
        src: withBase(navbarBrandLogo.value),
        alt: navbarBrandTitle.value
      });
      if (themeLocale.value.logoDark === void 0) {
        return img;
      }
      return vue.h(ClientOnly, () => img);
    };
    return (_ctx, _push, _parent, _attrs) => {
      const _component_RouterLink = vue.resolveComponent("RouterLink");
      _push(serverRenderer.ssrRenderComponent(_component_RouterLink, vue.mergeProps({ to: vue.unref(navbarBrandLink) }, _attrs), {
        default: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(serverRenderer.ssrRenderComponent(NavbarBrandLogo, null, null, _parent2, _scopeId));
            if (vue.unref(navbarBrandTitle)) {
              _push2(`<span class="${serverRenderer.ssrRenderClass([{ "can-hide": vue.unref(navbarBrandLogo) }, "site-name"])}"${_scopeId}>${serverRenderer.ssrInterpolate(vue.unref(navbarBrandTitle))}</span>`);
            } else {
              _push2(`<!---->`);
            }
          } else {
            return [
              vue.createVNode(NavbarBrandLogo),
              vue.unref(navbarBrandTitle) ? (vue.openBlock(), vue.createBlock("span", {
                key: 0,
                class: ["site-name", { "can-hide": vue.unref(navbarBrandLogo) }]
              }, vue.toDisplayString(vue.unref(navbarBrandTitle)), 3)) : vue.createCommentVNode("", true)
            ];
          }
        }),
        _: 1
      }, _parent));
    };
  }
});
const _sfc_setup$v = _sfc_main$v.setup;
_sfc_main$v.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/NavbarBrand.vue");
  return _sfc_setup$v ? _sfc_setup$v(props, ctx) : void 0;
};
var NavbarBrand = /* @__PURE__ */ _export_sfc(_sfc_main$v, [["__file", "NavbarBrand.vue"]]);
const __default__ = vue.defineComponent({
  inheritAttrs: false
});
const _sfc_main$u = /* @__PURE__ */ vue.defineComponent({
  ...__default__,
  __name: "AutoLink",
  __ssrInlineRender: true,
  props: {
    item: {
      type: Object,
      required: true
    }
  },
  setup(__props) {
    const props = __props;
    const route = vueRouter.useRoute();
    const site = useSiteData();
    const { item } = vue.toRefs(props);
    const hasHttpProtocol = vue.computed(() => shared.isLinkHttp(item.value.link));
    const hasNonHttpProtocol = vue.computed(
      () => shared.isLinkMailto(item.value.link) || shared.isLinkTel(item.value.link)
    );
    const linkTarget = vue.computed(() => {
      if (hasNonHttpProtocol.value)
        return void 0;
      if (item.value.target)
        return item.value.target;
      if (hasHttpProtocol.value)
        return "_blank";
      return void 0;
    });
    const isBlankTarget = vue.computed(() => linkTarget.value === "_blank");
    const isRouterLink = vue.computed(
      () => !hasHttpProtocol.value && !hasNonHttpProtocol.value && !isBlankTarget.value
    );
    const linkRel = vue.computed(() => {
      if (hasNonHttpProtocol.value)
        return void 0;
      if (item.value.rel)
        return item.value.rel;
      if (isBlankTarget.value)
        return "noopener noreferrer";
      return void 0;
    });
    const linkAriaLabel = vue.computed(() => item.value.ariaLabel || item.value.text);
    const shouldBeActiveInSubpath = vue.computed(() => {
      const localeKeys = Object.keys(site.value.locales);
      if (localeKeys.length) {
        return !localeKeys.some((key) => key === item.value.link);
      }
      return item.value.link !== "/";
    });
    const isActiveInSubpath = vue.computed(() => {
      if (!shouldBeActiveInSubpath.value) {
        return false;
      }
      return route.path.startsWith(item.value.link);
    });
    const isActive = vue.computed(() => {
      if (!isRouterLink.value) {
        return false;
      }
      if (item.value.activeMatch) {
        return new RegExp(item.value.activeMatch).test(route.path);
      }
      return isActiveInSubpath.value;
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_RouterLink = vue.resolveComponent("RouterLink");
      const _component_AutoLinkExternalIcon = vue.resolveComponent("AutoLinkExternalIcon");
      if (vue.unref(isRouterLink)) {
        _push(serverRenderer.ssrRenderComponent(_component_RouterLink, vue.mergeProps({
          class: { "router-link-active": vue.unref(isActive) },
          to: vue.unref(item).link,
          "aria-label": vue.unref(linkAriaLabel)
        }, _ctx.$attrs, _attrs), {
          default: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
            if (_push2) {
              serverRenderer.ssrRenderSlot(_ctx.$slots, "before", {}, null, _push2, _parent2, _scopeId);
              _push2(` ${serverRenderer.ssrInterpolate(vue.unref(item).text)} `);
              serverRenderer.ssrRenderSlot(_ctx.$slots, "after", {}, null, _push2, _parent2, _scopeId);
            } else {
              return [
                vue.renderSlot(_ctx.$slots, "before"),
                vue.createTextVNode(" " + vue.toDisplayString(vue.unref(item).text) + " ", 1),
                vue.renderSlot(_ctx.$slots, "after")
              ];
            }
          }),
          _: 3
        }, _parent));
      } else {
        _push(`<a${serverRenderer.ssrRenderAttrs(vue.mergeProps({
          class: "external-link",
          href: vue.unref(item).link,
          rel: vue.unref(linkRel),
          target: vue.unref(linkTarget),
          "aria-label": vue.unref(linkAriaLabel)
        }, _ctx.$attrs, _attrs))}>`);
        serverRenderer.ssrRenderSlot(_ctx.$slots, "before", {}, null, _push, _parent);
        _push(` ${serverRenderer.ssrInterpolate(vue.unref(item).text)} `);
        if (vue.unref(isBlankTarget)) {
          _push(serverRenderer.ssrRenderComponent(_component_AutoLinkExternalIcon, null, null, _parent));
        } else {
          _push(`<!---->`);
        }
        serverRenderer.ssrRenderSlot(_ctx.$slots, "after", {}, null, _push, _parent);
        _push(`</a>`);
      }
    };
  }
});
const _sfc_setup$u = _sfc_main$u.setup;
_sfc_main$u.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/AutoLink.vue");
  return _sfc_setup$u ? _sfc_setup$u(props, ctx) : void 0;
};
var AutoLink = /* @__PURE__ */ _export_sfc(_sfc_main$u, [["__file", "AutoLink.vue"]]);
const _sfc_main$t = /* @__PURE__ */ vue.defineComponent({
  __name: "DropdownTransition",
  __ssrInlineRender: true,
  setup(__props) {
    return (_ctx, _push, _parent, _attrs) => {
      serverRenderer.ssrRenderSlotInner(_ctx.$slots, "default", {}, null, _push, _parent, null, true);
    };
  }
});
const _sfc_setup$t = _sfc_main$t.setup;
_sfc_main$t.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/DropdownTransition.vue");
  return _sfc_setup$t ? _sfc_setup$t(props, ctx) : void 0;
};
var DropdownTransition = /* @__PURE__ */ _export_sfc(_sfc_main$t, [["__file", "DropdownTransition.vue"]]);
const _sfc_main$s = /* @__PURE__ */ vue.defineComponent({
  __name: "NavbarDropdown",
  __ssrInlineRender: true,
  props: {
    item: {
      type: Object,
      required: true
    }
  },
  setup(__props) {
    const props = __props;
    const { item } = vue.toRefs(props);
    const dropdownAriaLabel = vue.computed(
      () => item.value.ariaLabel || item.value.text
    );
    const open = vue.ref(false);
    const route = vueRouter.useRoute();
    vue.watch(
      () => route.path,
      () => {
        open.value = false;
      }
    );
    const isLastItemOfArray = (item2, arr) => arr[arr.length - 1] === item2;
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({
        class: ["navbar-dropdown-wrapper", { open: open.value }]
      }, _attrs))}><button class="navbar-dropdown-title" type="button"${serverRenderer.ssrRenderAttr("aria-label", vue.unref(dropdownAriaLabel))}><span class="title">${serverRenderer.ssrInterpolate(vue.unref(item).text)}</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button"${serverRenderer.ssrRenderAttr("aria-label", vue.unref(dropdownAriaLabel))}><span class="title">${serverRenderer.ssrInterpolate(vue.unref(item).text)}</span><span class="${serverRenderer.ssrRenderClass([open.value ? "down" : "right", "arrow"])}"></span></button>`);
      _push(serverRenderer.ssrRenderComponent(DropdownTransition, null, {
        default: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<ul style="${serverRenderer.ssrRenderStyle(open.value ? null : { display: "none" })}" class="navbar-dropdown"${_scopeId}><!--[-->`);
            serverRenderer.ssrRenderList(vue.unref(item).children, (child) => {
              _push2(`<li class="navbar-dropdown-item"${_scopeId}>`);
              if (child.children) {
                _push2(`<!--[--><h4 class="navbar-dropdown-subtitle"${_scopeId}>`);
                if (child.link) {
                  _push2(serverRenderer.ssrRenderComponent(AutoLink, {
                    item: child,
                    onFocusout: ($event) => isLastItemOfArray(child, vue.unref(item).children) && child.children.length === 0 && (open.value = false)
                  }, null, _parent2, _scopeId));
                } else {
                  _push2(`<span${_scopeId}>${serverRenderer.ssrInterpolate(child.text)}</span>`);
                }
                _push2(`</h4><ul class="navbar-dropdown-subitem-wrapper"${_scopeId}><!--[-->`);
                serverRenderer.ssrRenderList(child.children, (grandchild) => {
                  _push2(`<li class="navbar-dropdown-subitem"${_scopeId}>`);
                  _push2(serverRenderer.ssrRenderComponent(AutoLink, {
                    item: grandchild,
                    onFocusout: ($event) => isLastItemOfArray(grandchild, child.children) && isLastItemOfArray(child, vue.unref(item).children) && (open.value = false)
                  }, null, _parent2, _scopeId));
                  _push2(`</li>`);
                });
                _push2(`<!--]--></ul><!--]-->`);
              } else {
                _push2(serverRenderer.ssrRenderComponent(AutoLink, {
                  item: child,
                  onFocusout: ($event) => isLastItemOfArray(child, vue.unref(item).children) && (open.value = false)
                }, null, _parent2, _scopeId));
              }
              _push2(`</li>`);
            });
            _push2(`<!--]--></ul>`);
          } else {
            return [
              vue.withDirectives(vue.createVNode("ul", { class: "navbar-dropdown" }, [
                (vue.openBlock(true), vue.createBlock(vue.Fragment, null, vue.renderList(vue.unref(item).children, (child) => {
                  return vue.openBlock(), vue.createBlock("li", {
                    key: child.text,
                    class: "navbar-dropdown-item"
                  }, [
                    child.children ? (vue.openBlock(), vue.createBlock(vue.Fragment, { key: 0 }, [
                      vue.createVNode("h4", { class: "navbar-dropdown-subtitle" }, [
                        child.link ? (vue.openBlock(), vue.createBlock(AutoLink, {
                          key: 0,
                          item: child,
                          onFocusout: ($event) => isLastItemOfArray(child, vue.unref(item).children) && child.children.length === 0 && (open.value = false)
                        }, null, 8, ["item", "onFocusout"])) : (vue.openBlock(), vue.createBlock("span", { key: 1 }, vue.toDisplayString(child.text), 1))
                      ]),
                      vue.createVNode("ul", { class: "navbar-dropdown-subitem-wrapper" }, [
                        (vue.openBlock(true), vue.createBlock(vue.Fragment, null, vue.renderList(child.children, (grandchild) => {
                          return vue.openBlock(), vue.createBlock("li", {
                            key: grandchild.link,
                            class: "navbar-dropdown-subitem"
                          }, [
                            vue.createVNode(AutoLink, {
                              item: grandchild,
                              onFocusout: ($event) => isLastItemOfArray(grandchild, child.children) && isLastItemOfArray(child, vue.unref(item).children) && (open.value = false)
                            }, null, 8, ["item", "onFocusout"])
                          ]);
                        }), 128))
                      ])
                    ], 64)) : (vue.openBlock(), vue.createBlock(AutoLink, {
                      key: 1,
                      item: child,
                      onFocusout: ($event) => isLastItemOfArray(child, vue.unref(item).children) && (open.value = false)
                    }, null, 8, ["item", "onFocusout"]))
                  ]);
                }), 128))
              ], 512), [
                [vue.vShow, open.value]
              ])
            ];
          }
        }),
        _: 1
      }, _parent));
      _push(`</div>`);
    };
  }
});
const _sfc_setup$s = _sfc_main$s.setup;
_sfc_main$s.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/NavbarDropdown.vue");
  return _sfc_setup$s ? _sfc_setup$s(props, ctx) : void 0;
};
var NavbarDropdown = /* @__PURE__ */ _export_sfc(_sfc_main$s, [["__file", "NavbarDropdown.vue"]]);
const normalizePath = (path) => decodeURI(path).replace(/#.*$/, "").replace(/(index)?\.(md|html)$/, "");
const isActiveLink = (link, route) => {
  if (route.hash === link) {
    return true;
  }
  const currentPath = normalizePath(route.path);
  const targetPath = normalizePath(link);
  return currentPath === targetPath;
};
const isActiveSidebarItem = (item, route) => {
  if (item.link && isActiveLink(item.link, route)) {
    return true;
  }
  if (item.children) {
    return item.children.some((child) => isActiveSidebarItem(child, route));
  }
  return false;
};
const resolveRepoType = (repo) => {
  if (!shared.isLinkHttp(repo) || /github\.com/.test(repo))
    return "GitHub";
  if (/bitbucket\.org/.test(repo))
    return "Bitbucket";
  if (/gitlab\.com/.test(repo))
    return "GitLab";
  if (/gitee\.com/.test(repo))
    return "Gitee";
  return null;
};
const editLinkPatterns = {
  GitHub: ":repo/edit/:branch/:path",
  GitLab: ":repo/-/edit/:branch/:path",
  Gitee: ":repo/edit/:branch/:path",
  Bitbucket: ":repo/src/:branch/:path?mode=edit&spa=0&at=:branch&fileviewer=file-view-default"
};
const resolveEditLinkPatterns = ({ docsRepo, editLinkPattern }) => {
  if (editLinkPattern) {
    return editLinkPattern;
  }
  const repoType = resolveRepoType(docsRepo);
  if (repoType !== null) {
    return editLinkPatterns[repoType];
  }
  return null;
};
const resolveEditLink = ({ docsRepo, docsBranch, docsDir, filePathRelative, editLinkPattern }) => {
  if (!filePathRelative)
    return null;
  const pattern = resolveEditLinkPatterns({ docsRepo, editLinkPattern });
  if (!pattern)
    return null;
  return pattern.replace(/:repo/, shared.isLinkHttp(docsRepo) ? docsRepo : `https://github.com/${docsRepo}`).replace(/:branch/, docsBranch).replace(/:path/, shared.removeLeadingSlash(`${shared.removeEndingSlash(docsDir)}/${filePathRelative}`));
};
const _sfc_main$r = /* @__PURE__ */ vue.defineComponent({
  __name: "NavbarItems",
  __ssrInlineRender: true,
  setup(__props) {
    const useNavbarSelectLanguage = () => {
      const router = vueRouter.useRouter();
      const routeLocale = useRouteLocale();
      const siteLocale = useSiteLocaleData();
      const themeLocale = useThemeLocaleData();
      return vue.computed(() => {
        var _a, _b, _c;
        const localePaths = Object.keys(siteLocale.value.locales);
        if (localePaths.length < 2) {
          return [];
        }
        const currentPath = router.currentRoute.value.path;
        const currentFullPath = router.currentRoute.value.fullPath;
        const currentHash = router.currentRoute.value.hash;
        const languageDropdown = {
          text: (_a = themeLocale.value.selectLanguageText) != null ? _a : "unknown language",
          ariaLabel: (_c = (_b = themeLocale.value.selectLanguageAriaLabel) != null ? _b : themeLocale.value.selectLanguageText) != null ? _c : "unknown language",
          children: localePaths.map((targetLocalePath) => {
            var _a2, _b2, _c2, _d, _e2, _f;
            const targetSiteLocale = (_b2 = (_a2 = siteLocale.value.locales) == null ? void 0 : _a2[targetLocalePath]) != null ? _b2 : {};
            const targetThemeLocale = (_d = (_c2 = themeLocale.value.locales) == null ? void 0 : _c2[targetLocalePath]) != null ? _d : {};
            const targetLang = `${targetSiteLocale.lang}`;
            const text = (_e2 = targetThemeLocale.selectLanguageName) != null ? _e2 : targetLang;
            let link;
            if (targetLang === siteLocale.value.lang) {
              link = currentFullPath;
            } else {
              const targetLocalePage = currentPath.replace(routeLocale.value, targetLocalePath);
              if (router.getRoutes().some((item) => item.path === targetLocalePage)) {
                link = `${targetLocalePage}${currentHash}`;
              } else {
                link = (_f = targetThemeLocale.home) != null ? _f : targetLocalePath;
              }
            }
            return {
              text,
              link
            };
          })
        };
        return [languageDropdown];
      });
    };
    const useNavbarRepo = () => {
      const themeLocale = useThemeLocaleData();
      const repo = vue.computed(() => themeLocale.value.repo);
      const repoType = vue.computed(() => repo.value ? resolveRepoType(repo.value) : null);
      const repoLink = vue.computed(() => {
        if (repo.value && !shared.isLinkHttp(repo.value)) {
          return `https://github.com/${repo.value}`;
        }
        return repo.value;
      });
      const repoLabel = vue.computed(() => {
        if (!repoLink.value)
          return null;
        if (themeLocale.value.repoLabel)
          return themeLocale.value.repoLabel;
        if (repoType.value === null)
          return "Source";
        return repoType.value;
      });
      return vue.computed(() => {
        if (!repoLink.value || !repoLabel.value) {
          return [];
        }
        return [
          {
            text: repoLabel.value,
            link: repoLink.value
          }
        ];
      });
    };
    const resolveNavbarItem = (item) => {
      if (shared.isString(item)) {
        return useNavLink(item);
      }
      if (item.children) {
        return {
          ...item,
          children: item.children.map(resolveNavbarItem)
        };
      }
      return item;
    };
    const useNavbarConfig = () => {
      const themeLocale = useThemeLocaleData();
      return vue.computed(() => (themeLocale.value.navbar || []).map(resolveNavbarItem));
    };
    const navbarConfig = useNavbarConfig();
    const navbarSelectLanguage = useNavbarSelectLanguage();
    const navbarRepo = useNavbarRepo();
    const navbarLinks = vue.computed(() => [...navbarConfig.value, ...navbarSelectLanguage.value, ...navbarRepo.value]);
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Icon = vue.resolveComponent("Icon");
      if (vue.unref(navbarLinks).length) {
        _push(`<nav${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "navbar-items inline-flex items-center" }, _attrs))}><!--[-->`);
        serverRenderer.ssrRenderList(vue.unref(navbarLinks), (item) => {
          _push(`<div class="navbar-item">`);
          if (item.children) {
            _push(serverRenderer.ssrRenderComponent(NavbarDropdown, {
              item,
              class: "!flex !items-center"
            }, null, _parent));
          } else if (item.icon) {
            _push(serverRenderer.ssrRenderComponent(AutoLink, {
              item,
              class: "!flex !items-center !text-[#000]"
            }, {
              before: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
                if (_push2) {
                  _push2(serverRenderer.ssrRenderComponent(_component_Icon, {
                    icon: item.icon,
                    iconColor: "#000"
                  }, null, _parent2, _scopeId));
                } else {
                  return [
                    vue.createVNode(_component_Icon, {
                      icon: item.icon,
                      iconColor: "#000"
                    }, null, 8, ["icon"])
                  ];
                }
              }),
              _: 2
            }, _parent));
          } else {
            _push(serverRenderer.ssrRenderComponent(AutoLink, { item }, null, _parent));
          }
          _push(`</div>`);
        });
        _push(`<!--]--></nav>`);
      } else {
        _push(`<!---->`);
      }
    };
  }
});
const _sfc_setup$r = _sfc_main$r.setup;
_sfc_main$r.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/NavbarItems.vue");
  return _sfc_setup$r ? _sfc_setup$r(props, ctx) : void 0;
};
var NavbarItems = /* @__PURE__ */ _export_sfc(_sfc_main$r, [["__file", "NavbarItems.vue"]]);
const _sfc_main$q = /* @__PURE__ */ vue.defineComponent({
  __name: "ToggleColorModeButton",
  __ssrInlineRender: true,
  setup(__props) {
    const themeLocale = useThemeLocaleData();
    const isDarkMode = useDarkMode();
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<button${serverRenderer.ssrRenderAttrs(vue.mergeProps({
        class: "toggle-color-mode-button",
        title: vue.unref(themeLocale).toggleColorMode
      }, _attrs))}><svg style="${serverRenderer.ssrRenderStyle(!vue.unref(isDarkMode) ? null : { display: "none" })}" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="${serverRenderer.ssrRenderStyle(vue.unref(isDarkMode) ? null : { display: "none" })}" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button>`);
    };
  }
});
const _sfc_setup$q = _sfc_main$q.setup;
_sfc_main$q.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/ToggleColorModeButton.vue");
  return _sfc_setup$q ? _sfc_setup$q(props, ctx) : void 0;
};
var ToggleColorModeButton = /* @__PURE__ */ _export_sfc(_sfc_main$q, [["__file", "ToggleColorModeButton.vue"]]);
const _sfc_main$p = /* @__PURE__ */ vue.defineComponent({
  __name: "ToggleSidebarButton",
  __ssrInlineRender: true,
  emits: ["toggle"],
  setup(__props) {
    const themeLocale = useThemeLocaleData();
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({
        class: "toggle-sidebar-button",
        title: vue.unref(themeLocale).toggleSidebar,
        "aria-expanded": "false",
        role: "button",
        tabindex: "0"
      }, _attrs))}><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div>`);
    };
  }
});
const _sfc_setup$p = _sfc_main$p.setup;
_sfc_main$p.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/ToggleSidebarButton.vue");
  return _sfc_setup$p ? _sfc_setup$p(props, ctx) : void 0;
};
var ToggleSidebarButton = /* @__PURE__ */ _export_sfc(_sfc_main$p, [["__file", "ToggleSidebarButton.vue"]]);
const _sfc_main$o = /* @__PURE__ */ vue.defineComponent({
  __name: "Navbar",
  __ssrInlineRender: true,
  emits: ["toggle-sidebar"],
  setup(__props) {
    const themeLocale = useThemeLocaleData();
    const navbar = vue.ref(null);
    const navbarBrand = vue.ref(null);
    const linksWrapperMaxWidth = vue.ref(0);
    const linksWrapperStyle = vue.computed(() => {
      if (!linksWrapperMaxWidth.value) {
        return {};
      }
      return {
        maxWidth: linksWrapperMaxWidth.value + "px"
      };
    });
    vue.onMounted(() => {
      const MOBILE_DESKTOP_BREAKPOINT = 719;
      const navbarHorizontalPadding = getCssValue(navbar.value, "paddingLeft") + getCssValue(navbar.value, "paddingRight");
      const handleLinksWrapWidth = () => {
        var _a;
        if (window.innerWidth <= MOBILE_DESKTOP_BREAKPOINT) {
          linksWrapperMaxWidth.value = 0;
        } else {
          linksWrapperMaxWidth.value = navbar.value.offsetWidth - navbarHorizontalPadding - (((_a = navbarBrand.value) == null ? void 0 : _a.offsetWidth) || 0);
        }
      };
      handleLinksWrapWidth();
      window.addEventListener("resize", handleLinksWrapWidth, false);
      window.addEventListener("orientationchange", handleLinksWrapWidth, false);
    });
    function getCssValue(el, property) {
      var _a, _b, _c;
      const val = (_c = (_b = (_a = el == null ? void 0 : el.ownerDocument) == null ? void 0 : _a.defaultView) == null ? void 0 : _b.getComputedStyle(el, null)) == null ? void 0 : _c[property];
      const num = Number.parseInt(val, 10);
      return Number.isNaN(num) ? 0 : num;
    }
    return (_ctx, _push, _parent, _attrs) => {
      const _component_NavbarSearch = vue.resolveComponent("NavbarSearch");
      _push(`<header${serverRenderer.ssrRenderAttrs(vue.mergeProps({
        ref_key: "navbar",
        ref: navbar,
        class: "navbar"
      }, _attrs))}>`);
      _push(serverRenderer.ssrRenderComponent(ToggleSidebarButton, {
        onToggle: ($event) => _ctx.$emit("toggle-sidebar")
      }, null, _parent));
      _push(`<span>`);
      _push(serverRenderer.ssrRenderComponent(NavbarBrand, null, null, _parent));
      _push(`</span><div class="navbar-items-wrapper" style="${serverRenderer.ssrRenderStyle(vue.unref(linksWrapperStyle))}">`);
      serverRenderer.ssrRenderSlot(_ctx.$slots, "before", {}, null, _push, _parent);
      _push(serverRenderer.ssrRenderComponent(NavbarItems, { class: "can-hide" }, null, _parent));
      serverRenderer.ssrRenderSlot(_ctx.$slots, "after", {}, null, _push, _parent);
      if (vue.unref(themeLocale).colorModeSwitch) {
        _push(serverRenderer.ssrRenderComponent(ToggleColorModeButton, null, null, _parent));
      } else {
        _push(`<!---->`);
      }
      _push(serverRenderer.ssrRenderComponent(_component_NavbarSearch, null, null, _parent));
      _push(`</div></header>`);
    };
  }
});
const _sfc_setup$o = _sfc_main$o.setup;
_sfc_main$o.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/Navbar.vue");
  return _sfc_setup$o ? _sfc_setup$o(props, ctx) : void 0;
};
var Navbar = /* @__PURE__ */ _export_sfc(_sfc_main$o, [["__file", "Navbar.vue"]]);
const _sfc_main$n = /* @__PURE__ */ vue.defineComponent({
  __name: "BlogItemInfo",
  __ssrInlineRender: true,
  props: {
    page: null
  },
  setup(__props) {
    const props = __props;
    dayjs__default["default"].extend(utc__default["default"]);
    dayjs__default["default"].extend(timezone__default["default"]);
    const themeData2 = useThemeData();
    const author = vue.computed(() => props.page.frontmatter.author || themeData2.value.author);
    const formatDateValue = (value) => {
      return value ? dayjs__default["default"].tz(value, "Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss") : "";
    };
    vue.computed(() => {
      const { minutes, words } = props.page.readingTime;
      console.log(minutes, words);
      if (minutes && words) {
        if (minutes < 1) {
          return { minutes: "\u5C11\u4E8E1\u5206\u949F", words: `${words}\u5B57` };
        } else {
          return { minutes: `\u5927\u7EA6${Math.floor(minutes)}\u5206\u949F`, words: `${words}\u5B57` };
        }
      } else {
        return { minutes: void 0, words: void 0 };
      }
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Icon = vue.resolveComponent("Icon");
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "w-full h-9 mt-[15px] flex items-center" }, _attrs))}>`);
      if (vue.unref(author)) {
        _push(serverRenderer.ssrRenderComponent(_component_Icon, {
          icon: "UserOutlined",
          text: vue.unref(author),
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, _parent));
      } else {
        _push(`<!---->`);
      }
      if (formatDateValue(__props.page.frontmatter.date)) {
        _push(serverRenderer.ssrRenderComponent(_component_Icon, {
          icon: "FieldTimeOutlined",
          text: formatDateValue(__props.page.frontmatter.date),
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, _parent));
      } else {
        _push(`<!---->`);
      }
      if (__props.page.frontmatter.categories) {
        _push(serverRenderer.ssrRenderComponent(_component_Icon, {
          icon: "AppstoreOutlined",
          text: __props.page.frontmatter.categories,
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, _parent));
      } else {
        _push(`<!---->`);
      }
      if (__props.page.frontmatter.tags) {
        _push(serverRenderer.ssrRenderComponent(_component_Icon, {
          icon: "TagsOutlined",
          text: __props.page.frontmatter.tags,
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, _parent));
      } else {
        _push(`<!---->`);
      }
      _push(`</div>`);
    };
  }
});
const _sfc_setup$n = _sfc_main$n.setup;
_sfc_main$n.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/Blog/BlogItemInfo.vue");
  return _sfc_setup$n ? _sfc_setup$n(props, ctx) : void 0;
};
var BlogItemInfo = /* @__PURE__ */ _export_sfc(_sfc_main$n, [["__file", "BlogItemInfo.vue"]]);
var BlogItem_vue_vue_type_style_index_0_scoped_true_lang = "";
const _sfc_main$m = /* @__PURE__ */ vue.defineComponent({
  __name: "BlogItem",
  __ssrInlineRender: true,
  props: {
    page: null,
    position: null
  },
  setup(__props) {
    return (_ctx, _push, _parent, _attrs) => {
      const _component_router_link = vue.resolveComponent("router-link");
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "blog-item w-full h-[300px] py-[16px] px-[20px] rounded dark:bg-[#181818] bg-[#fff] shadow-box mb-[20px] cursor-pointer box-border" }, _attrs))} data-v-fd4a4f8e>`);
      if (__props.position == "left") {
        _push(`<div class="left-box flex mt-[15px] items-center" data-v-fd4a4f8e><div class="img h-[200px] rounded-[8px] overflow-hidden flex-[0_0_50%]" data-v-fd4a4f8e><img${serverRenderer.ssrRenderAttr("src", __props.page.frontmatter.image ? __props.page.frontmatter.image : vue.unref(withBase)("/images/index/bg1.jpg"))} class="w-full h-full scale-100 transition-transform duration-[.6s]" data-v-fd4a4f8e></div><div class="content flex-1 pl-[40px] flex flex-wrap m-0 px-[0.2rem] overflow-hidden" data-v-fd4a4f8e><div class="title w-full text-[1.28rem]" data-v-fd4a4f8e>`);
        _push(serverRenderer.ssrRenderComponent(_component_router_link, {
          to: __props.page.path,
          class: "font-bold text-[color:var(--text-color)] truncate block",
          title: __props.page.title
        }, {
          default: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`${serverRenderer.ssrInterpolate(__props.page.title)}`);
            } else {
              return [
                vue.createTextVNode(vue.toDisplayString(__props.page.title), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(`</div><div class="abstract w-full h-[180px] font-normal indent-6" data-v-fd4a4f8e>${__props.page.excerpt}</div></div></div>`);
      } else {
        _push(`<div class="right-box flex mt-[15px] items-center" data-v-fd4a4f8e><div class="content flex-1 pr-[40px] flex flex-wrap m-0 px-[0.2rem] overflow-hidden" data-v-fd4a4f8e><div class="title w-full text-[1.28rem]" data-v-fd4a4f8e>`);
        _push(serverRenderer.ssrRenderComponent(_component_router_link, {
          to: __props.page.path,
          class: "font-bold text-[color:var(--text-color)] truncate block",
          title: __props.page.title
        }, {
          default: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`${serverRenderer.ssrInterpolate(__props.page.title)}`);
            } else {
              return [
                vue.createTextVNode(vue.toDisplayString(__props.page.title), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(`</div><div class="abstract w-full h-[180px] font-normal indent-6" data-v-fd4a4f8e>${__props.page.excerpt}</div></div><div class="img h-[200px] rounded-[8px] overflow-hidden flex-[0_0_50%] mr-[1rem]" data-v-fd4a4f8e><img${serverRenderer.ssrRenderAttr("src", __props.page.frontmatter.image ? __props.page.frontmatter.image : vue.unref(withBase)("/images/index/bg1.jpg"))} class="w-full h-full scale-100 transition-transform duration-[.6s]" data-v-fd4a4f8e></div></div>`);
      }
      _push(serverRenderer.ssrRenderComponent(BlogItemInfo, { page: __props.page }, null, _parent));
      _push(`</div>`);
    };
  }
});
const _sfc_setup$m = _sfc_main$m.setup;
_sfc_main$m.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/Blog/BlogItem.vue");
  return _sfc_setup$m ? _sfc_setup$m(props, ctx) : void 0;
};
var BlogItem = /* @__PURE__ */ _export_sfc(_sfc_main$m, [["__scopeId", "data-v-fd4a4f8e"], ["__file", "BlogItem.vue"]]);
const usePostData = () => {
  const posts = [{ "data": { "key": "v-8daa1a0e", "path": "/", "title": "", "lang": "zh-CN", "frontmatter": { "home": true, "heroText": ["\u5B66\u800C\u65F6\u4E60\u4E4B\uFF0C\u4E0D\u4EA6\u8BF4\u4E4E?^1000", "\u5B66\u4E60\u8981\u6709\u4E09\u5FC3\uFF0C\u4E00\u4FE1\u5FC3\uFF0C\u4E8C\u51B3\u5FC3\uFF0C\u4E09\u6052\u5FC3"], "tagline": "\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77.", "bgImage": ["https://pic.netbian.com/uploads/allimg/220304/001005-16463238059274.jpg", "https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg", "https://pic.netbian.com/uploads/allimg/220507/092102-165188646268bd.jpg"], "bgImageSec": 1e4, "isBgImagetrigger": true, "needDefaultImages": true, "bgImageStyle": { "height": "550px", "color": "#fff" }, "showArrow": true, "summary": "", "hobby": ["\u6E38\u6CF3", "\u6ED1\u96EA", "\u4E52\u4E53\u7403", "\u770B\u5C0F\u8BF4", "\u7F16\u7A0B", "\u65C5\u6E38", "\u770B\u7535\u89C6"], "bubbles": true, "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/blog-docs/" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:type", "content": "website" }], ["meta", { "property": "og:updated_time", "content": "2022-08-18T04:40:38.000Z" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "article:modified_time", "content": "2022-08-18T04:40:38.000Z" }]] }, "excerpt": "", "headers": [], "git": { "updatedTime": 1660797638e3, "contributors": [{ "name": "AnyFork", "email": "zhangtao19910722", "commits": 8 }, { "name": "anyfork", "email": "874957743@qq.com", "commits": 2 }, { "name": "\u5F20\u6D9B", "email": "tzhang@yhtech.co", "commits": 1 }] }, "filePathRelative": "README.md", "readingTime": { "minutes": 0.93, "words": 279 } }, "key": "v-8daa1a0e", "path": "/", "title": "", "lang": "zh-CN", "frontmatter": { "home": true, "heroText": ["\u5B66\u800C\u65F6\u4E60\u4E4B\uFF0C\u4E0D\u4EA6\u8BF4\u4E4E?^1000", "\u5B66\u4E60\u8981\u6709\u4E09\u5FC3\uFF0C\u4E00\u4FE1\u5FC3\uFF0C\u4E8C\u51B3\u5FC3\uFF0C\u4E09\u6052\u5FC3"], "tagline": "\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77.", "bgImage": ["https://pic.netbian.com/uploads/allimg/220304/001005-16463238059274.jpg", "https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg", "https://pic.netbian.com/uploads/allimg/220507/092102-165188646268bd.jpg"], "bgImageSec": 1e4, "isBgImagetrigger": true, "needDefaultImages": true, "bgImageStyle": { "height": "550px", "color": "#fff" }, "showArrow": true, "summary": "", "hobby": ["\u6E38\u6CF3", "\u6ED1\u96EA", "\u4E52\u4E53\u7403", "\u770B\u5C0F\u8BF4", "\u7F16\u7A0B", "\u65C5\u6E38", "\u770B\u7535\u89C6"], "bubbles": true, "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/blog-docs/" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:type", "content": "website" }], ["meta", { "property": "og:updated_time", "content": "2022-08-18T04:40:38.000Z" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "article:modified_time", "content": "2022-08-18T04:40:38.000Z" }]] }, "excerpt": "", "headers": [], "content": "---\r\nhome: true\r\n#\u4E3B\u6807\u9898\u6587\u672C\uFF0C\u4E3A\u6570\u7EC4\u65F6\u4F1A\u4F7F\u7528\u6253\u5370\u673A\u6253\u5370\u529F\u80FD\uFF0C\u975E\u6570\u7EC4\u9759\u6001\u6587\u672C\r\nheroText:\r\n  - \u5B66\u800C\u65F6\u4E60\u4E4B\uFF0C\u4E0D\u4EA6\u8BF4\u4E4E?^1000\r\n  - \u5B66\u4E60\u8981\u6709\u4E09\u5FC3\uFF0C\u4E00\u4FE1\u5FC3\uFF0C\u4E8C\u51B3\u5FC3\uFF0C\u4E09\u6052\u5FC3\r\n#\u526F\u6807\u9898\r\ntagline: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77.\r\n#\u80CC\u666F\u56FE\u7247\uFF0C\u53EF\u4EE5\u4E3A\u6570\u7EC4,\u53EF\u4EE5\u4E3A\u8FDC\u7A0B\u80CC\u666F\u56FE\u7247\uFF0C\u56FE\u7247\u8D44\u6E90\u7F51\uFF1Ahttps://pic.netbian.com/4kmeinv/\r\nbgImage:\r\n  - https://pic.netbian.com/uploads/allimg/220304/001005-16463238059274.jpg\r\n  - https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg\r\n  - https://pic.netbian.com/uploads/allimg/220507/092102-165188646268bd.jpg\r\n#\u80CC\u666F\u56FE\u7247\u5207\u6362\u65F6\u95F4\u95F4\u9694\uFF1A\u9ED8\u8BA44\u79D2\uFF0C\u5355\u4F4D\u6BEB\u79D2\r\nbgImageSec: 10000\r\n#\u80CC\u666F\u56FE\u7247\u662F\u5426\u52A8\u6001\u5207\u6362,\u9ED8\u8BA4true\uFF0Cfalse\u6BCF\u6B21\u5237\u65B0\u4F1A\u66F4\u6362\u56FE\u7247\r\nisBgImagetrigger: true\r\n#\u662F\u5426\u4F7F\u7528\u7CFB\u7EDF\u9ED8\u8BA4\u7684\u80CC\u666F\u56FE\u7247\uFF0C\u9ED8\u8BA4true,\u5F00\u542F\u540E\u4F1A\u548C\u81EA\u5B9A\u4E49\u7684\u80CC\u666F\u56FE\u7247\u4E00\u8D77\u4F7F\u7528\r\nneedDefaultImages: true\r\n#\u80CC\u666F\u56FE\u7247\u6837\u5F0F\r\nbgImageStyle: { height: '550px', color: '#fff' }\r\n#\u662F\u5426\u5C55\u793A\u7BAD\u5934\r\nshowArrow: true\r\n#\u4E2A\u4EBA\u6458\u8981\r\nsummary: \u52A0\u6CB9,\u4E3A\u66F4\u7F8E\u597D\u7684\u660E\u5929\u800C\u6218!\r\n#\u5174\u8DA3\u7231\u597D\r\nhobby:\r\n  - \u6E38\u6CF3\r\n  - \u6ED1\u96EA\r\n  - \u4E52\u4E53\u7403\r\n  - \u770B\u5C0F\u8BF4\r\n  - \u7F16\u7A0B\r\n  - \u65C5\u6E38\r\n  - \u770B\u7535\u89C6\r\n# \u662F\u5426\u663E\u793A\u9996\u9875\u6C14\u6CE1\r\nbubbles: true\r\n---\r\n", "contentRendered": "", "date": "0000-00-00", "deps": [], "links": [], "pathInferred": "/", "pathLocale": "/", "permalink": null, "routeMeta": { "title": "" }, "sfcBlocks": [], "slug": "README", "filePath": "C:/Users/Administrator/Desktop/blog-docs/docs/README.md", "filePathRelative": "README.md", "componentFilePath": "C:/Users/Administrator/Desktop/blog-docs/docs/.vuepress/.temp/pages/index.html.vue", "componentFilePathRelative": "pages/index.html.vue", "componentFileChunkName": "v-8daa1a0e", "dataFilePath": "C:/Users/Administrator/Desktop/blog-docs/docs/.vuepress/.temp/pages/index.html.js", "dataFilePathRelative": "pages/index.html.js", "dataFileChunkName": "v-8daa1a0e", "htmlFilePath": "C:/Users/Administrator/Desktop/blog-docs/dist/index.html", "htmlFilePathRelative": "index.html" }, { "data": { "key": "v-d5fe0c96", "path": "/design-pattern/", "title": "\u8BBE\u8BA1\u6A21\u5F0F", "lang": "zh-CN", "frontmatter": { "title": "\u8BBE\u8BA1\u6A21\u5F0F", "description": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F", "sidebar": "auto", "tags": "\u8BBE\u8BA1\u6A21\u5F0F", "categories": "java", "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/blog-docs/design-pattern/" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:title", "content": "\u8BBE\u8BA1\u6A21\u5F0F" }], ["meta", { "property": "og:description", "content": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F" }], ["meta", { "property": "og:type", "content": "article" }], ["meta", { "property": "og:updated_time", "content": "2022-08-18T09:15:40.000Z" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "article:modified_time", "content": "2022-08-18T09:15:40.000Z" }]] }, "excerpt": "<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>\n", "headers": [{ "level": 1, "title": "1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0", "slug": "_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0", "children": [{ "level": 2, "title": "1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F", "slug": "_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F", "children": [] }, { "level": 2, "title": "1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5", "slug": "_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5", "children": [] }, { "level": 2, "title": "1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027", "slug": "_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027", "children": [] }, { "level": 2, "title": "1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B", "slug": "_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B", "children": [] }] }, { "level": 1, "title": "2\uFF0CUML \u56FE", "slug": "_2-uml-\u56FE", "children": [{ "level": 2, "title": "2.1 \u7C7B\u56FE\u6982\u8FF0", "slug": "_2-1-\u7C7B\u56FE\u6982\u8FF0", "children": [] }, { "level": 2, "title": "2.2 \u7C7B\u56FE\u7684\u4F5C\u7528", "slug": "_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528", "children": [] }, { "level": 2, "title": "2.3 \u7C7B\u56FE\u8868\u793A\u6CD5", "slug": "_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5", "children": [{ "level": 3, "title": "2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F", "slug": "_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F", "children": [] }, { "level": 3, "title": "2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F", "slug": "_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F", "children": [{ "level": 4, "title": "2.3.2.1 \u5173\u8054\u5173\u7CFB", "slug": "_2-3-2-1-\u5173\u8054\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.2 \u805A\u5408\u5173\u7CFB", "slug": "_2-3-2-2-\u805A\u5408\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.3 \u7EC4\u5408\u5173\u7CFB", "slug": "_2-3-2-3-\u7EC4\u5408\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.4 \u4F9D\u8D56\u5173\u7CFB", "slug": "_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.5 \u7EE7\u627F\u5173\u7CFB", "slug": "_2-3-2-5-\u7EE7\u627F\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.6 \u5B9E\u73B0\u5173\u7CFB", "slug": "_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB", "children": [] }] }] }] }, { "level": 1, "title": "3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219", "slug": "_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219", "children": [{ "level": 2, "title": "3.1 \u5F00\u95ED\u539F\u5219", "slug": "_3-1-\u5F00\u95ED\u539F\u5219", "children": [] }, { "level": 2, "title": "3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219", "slug": "_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219", "children": [] }, { "level": 2, "title": "3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219", "slug": "_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219", "children": [] }, { "level": 2, "title": "3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219", "slug": "_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219", "children": [] }, { "level": 2, "title": "3.5 \u8FEA\u7C73\u7279\u6CD5\u5219", "slug": "_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219", "children": [] }, { "level": 2, "title": "3.6 \u5408\u6210\u590D\u7528\u539F\u5219", "slug": "_3-6-\u5408\u6210\u590D\u7528\u539F\u5219", "children": [] }] }, { "level": 1, "title": "4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F", "slug": "_4-\u521B\u5EFA\u8005\u6A21\u5F0F", "children": [{ "level": 2, "title": "4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F", "slug": "_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784", "slug": "_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0", "slug": "_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898", "slug": "_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898", "children": [{ "level": 4, "title": "4.1.3.1 \u95EE\u9898\u6F14\u793A", "slug": "_4-1-3-1-\u95EE\u9898\u6F14\u793A", "children": [] }, { "level": 4, "title": "4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3", "slug": "_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3", "children": [] }] }, { "level": 3, "title": "4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B", "slug": "_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B", "children": [] }] }, { "level": 2, "title": "4.2 \u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.2.1 \u6982\u8FF0", "slug": "_4-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.2.1 \u7ED3\u6784", "slug": "_4-2-2-1-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.2.2 \u5B9E\u73B0", "slug": "_4-2-2-2-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.2.4 \u4F18\u7F3A\u70B9", "slug": "_4-2-2-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 4, "title": "4.2.2.3 \u6269\u5C55", "slug": "_4-2-2-3-\u6269\u5C55", "children": [] }] }, { "level": 3, "title": "4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F", "slug": "_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.3.1 \u6982\u5FF5", "slug": "_4-2-3-1-\u6982\u5FF5", "children": [] }, { "level": 4, "title": "4.2.3.2 \u7ED3\u6784", "slug": "_4-2-3-2-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.3.3 \u5B9E\u73B0", "slug": "_4-2-3-3-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.3.4 \u4F18\u7F3A\u70B9", "slug": "_4-2-3-4-\u4F18\u7F3A\u70B9", "children": [] }] }, { "level": 3, "title": "4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.4.1 \u6982\u5FF5", "slug": "_4-2-4-1-\u6982\u5FF5", "children": [] }, { "level": 4, "title": "4.2.4.2 \u7ED3\u6784", "slug": "_4-2-4-2-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.4.2 \u5B9E\u73B0", "slug": "_4-2-4-2-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.4.3 \u4F18\u7F3A\u70B9", "slug": "_4-2-4-3-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 4, "title": "4.2.4.4 \u4F7F\u7528\u573A\u666F", "slug": "_4-2-4-4-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 3, "title": "4.2.5 \u6A21\u5F0F\u6269\u5C55", "slug": "_4-2-5-\u6A21\u5F0F\u6269\u5C55", "children": [] }, { "level": 3, "title": "4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5", "slug": "_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5", "children": [] }] }, { "level": 2, "title": "4.3 \u539F\u578B\u6A21\u5F0F", "slug": "_4-3-\u539F\u578B\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.3.1 \u6982\u8FF0", "slug": "_4-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.3.2 \u7ED3\u6784", "slug": "_4-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.3.3 \u5B9E\u73B0", "slug": "_4-3-3-\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "4.3.4 \u6848\u4F8B", "slug": "_4-3-4-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "4.3.5 \u4F7F\u7528\u573A\u666F", "slug": "_4-3-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09", "slug": "_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686", "children": [] }] }, { "level": 2, "title": "4.5 \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.4.1 \u6982\u8FF0", "slug": "_4-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.4.2 \u7ED3\u6784", "slug": "_4-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.4.3 \u5B9E\u4F8B", "slug": "_4-4-3-\u5B9E\u4F8B", "children": [] }, { "level": 3, "title": "4.4.4 \u4F18\u7F3A\u70B9", "slug": "_4-4-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "4.4.5 \u4F7F\u7528\u573A\u666F", "slug": "_4-4-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "4.4.6 \u6A21\u5F0F\u6269\u5C55", "slug": "_4-4-6-\u6A21\u5F0F\u6269\u5C55", "children": [] }] }, { "level": 2, "title": "4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4", "slug": "_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4", "children": [{ "level": 3, "title": "4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [] }] }] }, { "level": 1, "title": "5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F", "slug": "_5-\u7ED3\u6784\u578B\u6A21\u5F0F", "children": [{ "level": 2, "title": "5.1 \u4EE3\u7406\u6A21\u5F0F", "slug": "_5-1-\u4EE3\u7406\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.1.1 \u6982\u8FF0", "slug": "_5-1-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.1.2 \u7ED3\u6784", "slug": "_5-1-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.1.3 \u9759\u6001\u4EE3\u7406", "slug": "_5-1-3-\u9759\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.4 JDK \u52A8\u6001\u4EE3\u7406", "slug": "_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406", "slug": "_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4", "slug": "_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4", "children": [] }, { "level": 3, "title": "5.1.7 \u4F18\u7F3A\u70B9", "slug": "_5-1-7-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "5.1.8 \u4F7F\u7528\u573A\u666F", "slug": "_5-1-8-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.2 \u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-\u9002\u914D\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.2.1 \u6982\u8FF0", "slug": "_5-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.2.2 \u7ED3\u6784", "slug": "_5-2-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "5.2.5 \u5E94\u7528\u573A\u666F", "slug": "_5-2-5-\u5E94\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.2.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-2-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "5.3 \u88C5\u9970\u8005\u6A21\u5F0F", "slug": "_5-3-\u88C5\u9970\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.3.1 \u6982\u8FF0", "slug": "_5-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.3.2 \u7ED3\u6784", "slug": "_5-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.3.3 \u6848\u4F8B", "slug": "_5-3-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.3.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-3-4-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.3.5 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-3-5-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }, { "level": 3, "title": "5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B", "slug": "_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B", "children": [] }] }, { "level": 2, "title": "5.4 \u6865\u63A5\u6A21\u5F0F", "slug": "_5-4-\u6865\u63A5\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.4.1 \u6982\u8FF0", "slug": "_5-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.4.2 \u7ED3\u6784", "slug": "_5-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.4.3 \u6848\u4F8B", "slug": "_5-4-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.4.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-4-4-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.5 \u5916\u89C2\u6A21\u5F0F", "slug": "_5-5-\u5916\u89C2\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.5.1 \u6982\u8FF0", "slug": "_5-5-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.5.2 \u7ED3\u6784", "slug": "_5-5-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.5.3 \u6848\u4F8B", "slug": "_5-5-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.5.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-5-4-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.5.5 \u6E90\u7801\u89E3\u6790", "slug": "_5-5-5-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "5.6 \u7EC4\u5408\u6A21\u5F0F", "slug": "_5-6-\u7EC4\u5408\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.6.1 \u6982\u8FF0", "slug": "_5-6-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.6.2 \u7ED3\u6784", "slug": "_5-6-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.6.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_5-6-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B", "slug": "_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B", "children": [] }, { "level": 3, "title": "5.6.5 \u4F18\u70B9", "slug": "_5-6-5-\u4F18\u70B9", "children": [] }, { "level": 3, "title": "5.6.6 \u4F7F\u7528\u573A\u666F", "slug": "_5-6-6-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.7 \u4EAB\u5143\u6A21\u5F0F", "slug": "_5-7-\u4EAB\u5143\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.7.1 \u6982\u8FF0", "slug": "_5-7-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.7.2 \u7ED3\u6784", "slug": "_5-7-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.7.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_5-7-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F", "slug": "_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.7.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-7-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }] }, { "level": 1, "title": "6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F", "slug": "_6-\u884C\u4E3A\u578B\u6A21\u5F0F", "children": [{ "level": 2, "title": "6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F", "slug": "_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.1.1 \u6982\u8FF0", "slug": "_6-1-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.1.2 \u7ED3\u6784", "slug": "_6-1-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.1.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-1-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.1.3 \u4F18\u7F3A\u70B9", "slug": "_6-1-3-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.1.4 \u9002\u7528\u573A\u666F", "slug": "_6-1-4-\u9002\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.1.5 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-1-5-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.2 \u7B56\u7565\u6A21\u5F0F", "slug": "_6-2-\u7B56\u7565\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.2.1 \u6982\u8FF0", "slug": "_6-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.2.2 \u7ED3\u6784", "slug": "_6-2-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.2.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-2-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.2.4 \u4F18\u7F3A\u70B9", "slug": "_6-2-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.2.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-2-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.2.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-2-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.3 \u547D\u4EE4\u6A21\u5F0F", "slug": "_6-3-\u547D\u4EE4\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.3.1 \u6982\u8FF0", "slug": "_6-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.3.2 \u7ED3\u6784", "slug": "_6-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.3.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-3-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.3.4 \u4F18\u7F3A\u70B9", "slug": "_6-3-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.3.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-3-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.3.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-3-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F", "slug": "_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.4.1 \u6982\u8FF0", "slug": "_6-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.4.2 \u7ED3\u6784", "slug": "_6-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.4.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-4-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.4.4 \u4F18\u7F3A\u70B9", "slug": "_6-4-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.4.5 \u6E90\u7801\u89E3\u6790", "slug": "_6-4-5-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.5 \u72B6\u6001\u6A21\u5F0F", "slug": "_6-5-\u72B6\u6001\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.5.1 \u6982\u8FF0", "slug": "_6-5-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.5.2 \u7ED3\u6784", "slug": "_6-5-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.5.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-5-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.5.4 \u4F18\u7F3A\u70B9", "slug": "_6-5-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.5.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-5-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F", "slug": "_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.6.1 \u6982\u8FF0", "slug": "_6-6-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.6.2 \u7ED3\u6784", "slug": "_6-6-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.6.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-6-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.6.4 \u4F18\u7F3A\u70B9", "slug": "_6-6-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.6.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-6-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0", "slug": "_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0", "children": [] }] }, { "level": 2, "title": "6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F", "slug": "_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.7.1 \u6982\u8FF0", "slug": "_6-7-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.7.2 \u7ED3\u6784", "slug": "_6-7-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.7.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-7-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.7.4 \u4F18\u7F3A\u70B9", "slug": "_6-7-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.7.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-7-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F", "slug": "_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.8.1 \u6982\u8FF0", "slug": "_6-8-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.8.2 \u7ED3\u6784", "slug": "_6-8-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.8.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-8-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.8.4 \u4F18\u7F3A\u70B9", "slug": "_6-8-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.8.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-8-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.8.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-8-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F", "slug": "_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.9.1 \u6982\u8FF0", "slug": "_6-9-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.9.2 \u7ED3\u6784", "slug": "_6-9-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.9.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-9-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.9.4 \u4F18\u7F3A\u70B9", "slug": "_6-9-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.9.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-9-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.9.6 \u6269\u5C55", "slug": "_6-9-6-\u6269\u5C55", "children": [] }] }, { "level": 2, "title": "6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.10.1 \u6982\u8FF0", "slug": "_6-10-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.10.2 \u7ED3\u6784", "slug": "_6-10-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.10.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-10-3-\u6848\u4F8B\u5B9E\u73B0", "children": [{ "level": 4, "title": "6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [] }, { "level": 4, "title": "6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [] }] }, { "level": 3, "title": "6.10.4 \u4F18\u7F3A\u70B9", "slug": "_6-10-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.10.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-10-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.11 \u89E3\u91CA\u5668\u6A21\u5F0F", "slug": "_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.11.1 \u6982\u8FF0", "slug": "_6-11-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.11.2 \u7ED3\u6784", "slug": "_6-11-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.11.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-11-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.11.4 \u4F18\u7F3A\u70B9", "slug": "_6-11-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.11.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-11-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }] }, { "level": 1, "title": "7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6", "slug": "_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6", "children": [{ "level": 2, "title": "7.1 spring \u4F7F\u7528\u56DE\u987E", "slug": "_7-1-spring-\u4F7F\u7528\u56DE\u987E", "children": [] }, { "level": 2, "title": "7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784", "slug": "_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784", "children": [{ "level": 3, "title": "7.1.1 bean \u6982\u8FF0", "slug": "_7-1-1-bean-\u6982\u8FF0", "children": [] }] }, { "level": 2, "title": "7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790", "slug": "_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790", "children": [{ "level": 3, "title": "7.3.1 BeanFactory \u89E3\u6790", "slug": "_7-3-1-beanfactory-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.2 BeanDefinition \u89E3\u6790", "slug": "_7-3-2-beandefinition-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.3 BeanDefinitionReader \u89E3\u6790", "slug": "_7-3-3-beandefinitionreader-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.4 BeanDefinitionRegistry \u89E3\u6790", "slug": "_7-3-4-beandefinitionregistry-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.5 \u521B\u5EFA\u5BB9\u5668", "slug": "_7-3-5-\u521B\u5EFA\u5BB9\u5668", "children": [] }] }, { "level": 2, "title": "7.4 \u81EA\u5B9A\u4E49 SpringIOC", "slug": "_7-4-\u81EA\u5B9A\u4E49-springioc", "children": [{ "level": 3, "title": "7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B", "slug": "_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B", "children": [{ "level": 4, "title": "7.4.1.1 PropertyValue \u7C7B", "slug": "_7-4-1-1-propertyvalue-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.1.2 MutablePropertyValues \u7C7B", "slug": "_7-4-1-2-mutablepropertyvalues-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.1.3 BeanDefinition \u7C7B", "slug": "_7-4-1-3-beandefinition-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B", "slug": "_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3", "slug": "_7-4-2-1-beandefinitionregistry-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B", "slug": "_7-4-2-2-simplebeandefinitionregistry-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B", "slug": "_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.3.1 BeanDefinitionReader \u63A5\u53E3", "slug": "_7-4-3-1-beandefinitionreader-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.3.2 XmlBeanDefinitionReader \u7C7B", "slug": "_7-4-3-2-xmlbeandefinitionreader-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B", "slug": "_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.4.1 BeanFactory \u63A5\u53E3", "slug": "_7-4-4-1-beanfactory-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.4.2 ApplicationContext \u63A5\u53E3", "slug": "_7-4-4-2-applicationcontext-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.4.3 AbstractApplicationContext \u7C7B", "slug": "_7-4-4-3-abstractapplicationcontext-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.4.4 ClassPathXmlApplicationContext \u7C7B", "slug": "_7-4-4-4-classpathxmlapplicationcontext-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3", "slug": "_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3", "children": [{ "level": 4, "title": "7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F", "slug": "_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F", "children": [] }, { "level": 4, "title": "7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219", "slug": "_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219", "children": [] }, { "level": 4, "title": "7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165", "slug": "_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165", "children": [] }] }] }] }], "git": { "updatedTime": 166081414e4, "contributors": [{ "name": "anyfork", "email": "874957743@qq.com", "commits": 2 }] }, "filePathRelative": "design-pattern/README.md", "readingTime": { "minutes": 164.61, "words": 49383 } }, "key": "v-d5fe0c96", "path": "/design-pattern/", "title": "\u8BBE\u8BA1\u6A21\u5F0F", "lang": "zh-CN", "frontmatter": { "title": "\u8BBE\u8BA1\u6A21\u5F0F", "description": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F", "sidebar": "auto", "tags": "\u8BBE\u8BA1\u6A21\u5F0F", "categories": "java", "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/blog-docs/design-pattern/" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:title", "content": "\u8BBE\u8BA1\u6A21\u5F0F" }], ["meta", { "property": "og:description", "content": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F" }], ["meta", { "property": "og:type", "content": "article" }], ["meta", { "property": "og:updated_time", "content": "2022-08-18T09:15:40.000Z" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "article:modified_time", "content": "2022-08-18T09:15:40.000Z" }]] }, "excerpt": "<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>\n", "headers": [{ "level": 1, "title": "1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0", "slug": "_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0", "children": [{ "level": 2, "title": "1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F", "slug": "_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F", "children": [] }, { "level": 2, "title": "1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5", "slug": "_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5", "children": [] }, { "level": 2, "title": "1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027", "slug": "_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027", "children": [] }, { "level": 2, "title": "1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B", "slug": "_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B", "children": [] }] }, { "level": 1, "title": "2\uFF0CUML \u56FE", "slug": "_2-uml-\u56FE", "children": [{ "level": 2, "title": "2.1 \u7C7B\u56FE\u6982\u8FF0", "slug": "_2-1-\u7C7B\u56FE\u6982\u8FF0", "children": [] }, { "level": 2, "title": "2.2 \u7C7B\u56FE\u7684\u4F5C\u7528", "slug": "_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528", "children": [] }, { "level": 2, "title": "2.3 \u7C7B\u56FE\u8868\u793A\u6CD5", "slug": "_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5", "children": [{ "level": 3, "title": "2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F", "slug": "_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F", "children": [] }, { "level": 3, "title": "2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F", "slug": "_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F", "children": [{ "level": 4, "title": "2.3.2.1 \u5173\u8054\u5173\u7CFB", "slug": "_2-3-2-1-\u5173\u8054\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.2 \u805A\u5408\u5173\u7CFB", "slug": "_2-3-2-2-\u805A\u5408\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.3 \u7EC4\u5408\u5173\u7CFB", "slug": "_2-3-2-3-\u7EC4\u5408\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.4 \u4F9D\u8D56\u5173\u7CFB", "slug": "_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.5 \u7EE7\u627F\u5173\u7CFB", "slug": "_2-3-2-5-\u7EE7\u627F\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.6 \u5B9E\u73B0\u5173\u7CFB", "slug": "_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB", "children": [] }] }] }] }, { "level": 1, "title": "3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219", "slug": "_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219", "children": [{ "level": 2, "title": "3.1 \u5F00\u95ED\u539F\u5219", "slug": "_3-1-\u5F00\u95ED\u539F\u5219", "children": [] }, { "level": 2, "title": "3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219", "slug": "_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219", "children": [] }, { "level": 2, "title": "3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219", "slug": "_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219", "children": [] }, { "level": 2, "title": "3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219", "slug": "_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219", "children": [] }, { "level": 2, "title": "3.5 \u8FEA\u7C73\u7279\u6CD5\u5219", "slug": "_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219", "children": [] }, { "level": 2, "title": "3.6 \u5408\u6210\u590D\u7528\u539F\u5219", "slug": "_3-6-\u5408\u6210\u590D\u7528\u539F\u5219", "children": [] }] }, { "level": 1, "title": "4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F", "slug": "_4-\u521B\u5EFA\u8005\u6A21\u5F0F", "children": [{ "level": 2, "title": "4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F", "slug": "_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784", "slug": "_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0", "slug": "_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898", "slug": "_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898", "children": [{ "level": 4, "title": "4.1.3.1 \u95EE\u9898\u6F14\u793A", "slug": "_4-1-3-1-\u95EE\u9898\u6F14\u793A", "children": [] }, { "level": 4, "title": "4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3", "slug": "_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3", "children": [] }] }, { "level": 3, "title": "4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B", "slug": "_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B", "children": [] }] }, { "level": 2, "title": "4.2 \u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.2.1 \u6982\u8FF0", "slug": "_4-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.2.1 \u7ED3\u6784", "slug": "_4-2-2-1-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.2.2 \u5B9E\u73B0", "slug": "_4-2-2-2-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.2.4 \u4F18\u7F3A\u70B9", "slug": "_4-2-2-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 4, "title": "4.2.2.3 \u6269\u5C55", "slug": "_4-2-2-3-\u6269\u5C55", "children": [] }] }, { "level": 3, "title": "4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F", "slug": "_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.3.1 \u6982\u5FF5", "slug": "_4-2-3-1-\u6982\u5FF5", "children": [] }, { "level": 4, "title": "4.2.3.2 \u7ED3\u6784", "slug": "_4-2-3-2-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.3.3 \u5B9E\u73B0", "slug": "_4-2-3-3-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.3.4 \u4F18\u7F3A\u70B9", "slug": "_4-2-3-4-\u4F18\u7F3A\u70B9", "children": [] }] }, { "level": 3, "title": "4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.4.1 \u6982\u5FF5", "slug": "_4-2-4-1-\u6982\u5FF5", "children": [] }, { "level": 4, "title": "4.2.4.2 \u7ED3\u6784", "slug": "_4-2-4-2-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.4.2 \u5B9E\u73B0", "slug": "_4-2-4-2-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.4.3 \u4F18\u7F3A\u70B9", "slug": "_4-2-4-3-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 4, "title": "4.2.4.4 \u4F7F\u7528\u573A\u666F", "slug": "_4-2-4-4-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 3, "title": "4.2.5 \u6A21\u5F0F\u6269\u5C55", "slug": "_4-2-5-\u6A21\u5F0F\u6269\u5C55", "children": [] }, { "level": 3, "title": "4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5", "slug": "_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5", "children": [] }] }, { "level": 2, "title": "4.3 \u539F\u578B\u6A21\u5F0F", "slug": "_4-3-\u539F\u578B\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.3.1 \u6982\u8FF0", "slug": "_4-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.3.2 \u7ED3\u6784", "slug": "_4-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.3.3 \u5B9E\u73B0", "slug": "_4-3-3-\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "4.3.4 \u6848\u4F8B", "slug": "_4-3-4-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "4.3.5 \u4F7F\u7528\u573A\u666F", "slug": "_4-3-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09", "slug": "_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686", "children": [] }] }, { "level": 2, "title": "4.5 \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.4.1 \u6982\u8FF0", "slug": "_4-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.4.2 \u7ED3\u6784", "slug": "_4-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.4.3 \u5B9E\u4F8B", "slug": "_4-4-3-\u5B9E\u4F8B", "children": [] }, { "level": 3, "title": "4.4.4 \u4F18\u7F3A\u70B9", "slug": "_4-4-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "4.4.5 \u4F7F\u7528\u573A\u666F", "slug": "_4-4-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "4.4.6 \u6A21\u5F0F\u6269\u5C55", "slug": "_4-4-6-\u6A21\u5F0F\u6269\u5C55", "children": [] }] }, { "level": 2, "title": "4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4", "slug": "_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4", "children": [{ "level": 3, "title": "4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [] }] }] }, { "level": 1, "title": "5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F", "slug": "_5-\u7ED3\u6784\u578B\u6A21\u5F0F", "children": [{ "level": 2, "title": "5.1 \u4EE3\u7406\u6A21\u5F0F", "slug": "_5-1-\u4EE3\u7406\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.1.1 \u6982\u8FF0", "slug": "_5-1-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.1.2 \u7ED3\u6784", "slug": "_5-1-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.1.3 \u9759\u6001\u4EE3\u7406", "slug": "_5-1-3-\u9759\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.4 JDK \u52A8\u6001\u4EE3\u7406", "slug": "_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406", "slug": "_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4", "slug": "_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4", "children": [] }, { "level": 3, "title": "5.1.7 \u4F18\u7F3A\u70B9", "slug": "_5-1-7-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "5.1.8 \u4F7F\u7528\u573A\u666F", "slug": "_5-1-8-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.2 \u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-\u9002\u914D\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.2.1 \u6982\u8FF0", "slug": "_5-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.2.2 \u7ED3\u6784", "slug": "_5-2-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "5.2.5 \u5E94\u7528\u573A\u666F", "slug": "_5-2-5-\u5E94\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.2.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-2-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "5.3 \u88C5\u9970\u8005\u6A21\u5F0F", "slug": "_5-3-\u88C5\u9970\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.3.1 \u6982\u8FF0", "slug": "_5-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.3.2 \u7ED3\u6784", "slug": "_5-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.3.3 \u6848\u4F8B", "slug": "_5-3-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.3.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-3-4-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.3.5 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-3-5-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }, { "level": 3, "title": "5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B", "slug": "_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B", "children": [] }] }, { "level": 2, "title": "5.4 \u6865\u63A5\u6A21\u5F0F", "slug": "_5-4-\u6865\u63A5\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.4.1 \u6982\u8FF0", "slug": "_5-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.4.2 \u7ED3\u6784", "slug": "_5-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.4.3 \u6848\u4F8B", "slug": "_5-4-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.4.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-4-4-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.5 \u5916\u89C2\u6A21\u5F0F", "slug": "_5-5-\u5916\u89C2\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.5.1 \u6982\u8FF0", "slug": "_5-5-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.5.2 \u7ED3\u6784", "slug": "_5-5-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.5.3 \u6848\u4F8B", "slug": "_5-5-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.5.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-5-4-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.5.5 \u6E90\u7801\u89E3\u6790", "slug": "_5-5-5-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "5.6 \u7EC4\u5408\u6A21\u5F0F", "slug": "_5-6-\u7EC4\u5408\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.6.1 \u6982\u8FF0", "slug": "_5-6-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.6.2 \u7ED3\u6784", "slug": "_5-6-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.6.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_5-6-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B", "slug": "_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B", "children": [] }, { "level": 3, "title": "5.6.5 \u4F18\u70B9", "slug": "_5-6-5-\u4F18\u70B9", "children": [] }, { "level": 3, "title": "5.6.6 \u4F7F\u7528\u573A\u666F", "slug": "_5-6-6-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.7 \u4EAB\u5143\u6A21\u5F0F", "slug": "_5-7-\u4EAB\u5143\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.7.1 \u6982\u8FF0", "slug": "_5-7-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.7.2 \u7ED3\u6784", "slug": "_5-7-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.7.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_5-7-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F", "slug": "_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.7.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-7-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }] }, { "level": 1, "title": "6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F", "slug": "_6-\u884C\u4E3A\u578B\u6A21\u5F0F", "children": [{ "level": 2, "title": "6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F", "slug": "_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.1.1 \u6982\u8FF0", "slug": "_6-1-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.1.2 \u7ED3\u6784", "slug": "_6-1-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.1.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-1-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.1.3 \u4F18\u7F3A\u70B9", "slug": "_6-1-3-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.1.4 \u9002\u7528\u573A\u666F", "slug": "_6-1-4-\u9002\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.1.5 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-1-5-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.2 \u7B56\u7565\u6A21\u5F0F", "slug": "_6-2-\u7B56\u7565\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.2.1 \u6982\u8FF0", "slug": "_6-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.2.2 \u7ED3\u6784", "slug": "_6-2-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.2.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-2-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.2.4 \u4F18\u7F3A\u70B9", "slug": "_6-2-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.2.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-2-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.2.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-2-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.3 \u547D\u4EE4\u6A21\u5F0F", "slug": "_6-3-\u547D\u4EE4\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.3.1 \u6982\u8FF0", "slug": "_6-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.3.2 \u7ED3\u6784", "slug": "_6-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.3.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-3-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.3.4 \u4F18\u7F3A\u70B9", "slug": "_6-3-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.3.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-3-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.3.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-3-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F", "slug": "_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.4.1 \u6982\u8FF0", "slug": "_6-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.4.2 \u7ED3\u6784", "slug": "_6-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.4.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-4-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.4.4 \u4F18\u7F3A\u70B9", "slug": "_6-4-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.4.5 \u6E90\u7801\u89E3\u6790", "slug": "_6-4-5-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.5 \u72B6\u6001\u6A21\u5F0F", "slug": "_6-5-\u72B6\u6001\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.5.1 \u6982\u8FF0", "slug": "_6-5-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.5.2 \u7ED3\u6784", "slug": "_6-5-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.5.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-5-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.5.4 \u4F18\u7F3A\u70B9", "slug": "_6-5-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.5.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-5-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F", "slug": "_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.6.1 \u6982\u8FF0", "slug": "_6-6-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.6.2 \u7ED3\u6784", "slug": "_6-6-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.6.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-6-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.6.4 \u4F18\u7F3A\u70B9", "slug": "_6-6-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.6.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-6-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0", "slug": "_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0", "children": [] }] }, { "level": 2, "title": "6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F", "slug": "_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.7.1 \u6982\u8FF0", "slug": "_6-7-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.7.2 \u7ED3\u6784", "slug": "_6-7-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.7.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-7-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.7.4 \u4F18\u7F3A\u70B9", "slug": "_6-7-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.7.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-7-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F", "slug": "_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.8.1 \u6982\u8FF0", "slug": "_6-8-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.8.2 \u7ED3\u6784", "slug": "_6-8-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.8.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-8-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.8.4 \u4F18\u7F3A\u70B9", "slug": "_6-8-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.8.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-8-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.8.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-8-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F", "slug": "_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.9.1 \u6982\u8FF0", "slug": "_6-9-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.9.2 \u7ED3\u6784", "slug": "_6-9-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.9.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-9-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.9.4 \u4F18\u7F3A\u70B9", "slug": "_6-9-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.9.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-9-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.9.6 \u6269\u5C55", "slug": "_6-9-6-\u6269\u5C55", "children": [] }] }, { "level": 2, "title": "6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.10.1 \u6982\u8FF0", "slug": "_6-10-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.10.2 \u7ED3\u6784", "slug": "_6-10-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.10.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-10-3-\u6848\u4F8B\u5B9E\u73B0", "children": [{ "level": 4, "title": "6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [] }, { "level": 4, "title": "6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [] }] }, { "level": 3, "title": "6.10.4 \u4F18\u7F3A\u70B9", "slug": "_6-10-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.10.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-10-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.11 \u89E3\u91CA\u5668\u6A21\u5F0F", "slug": "_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.11.1 \u6982\u8FF0", "slug": "_6-11-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.11.2 \u7ED3\u6784", "slug": "_6-11-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.11.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-11-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.11.4 \u4F18\u7F3A\u70B9", "slug": "_6-11-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.11.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-11-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }] }, { "level": 1, "title": "7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6", "slug": "_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6", "children": [{ "level": 2, "title": "7.1 spring \u4F7F\u7528\u56DE\u987E", "slug": "_7-1-spring-\u4F7F\u7528\u56DE\u987E", "children": [] }, { "level": 2, "title": "7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784", "slug": "_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784", "children": [{ "level": 3, "title": "7.1.1 bean \u6982\u8FF0", "slug": "_7-1-1-bean-\u6982\u8FF0", "children": [] }] }, { "level": 2, "title": "7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790", "slug": "_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790", "children": [{ "level": 3, "title": "7.3.1 BeanFactory \u89E3\u6790", "slug": "_7-3-1-beanfactory-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.2 BeanDefinition \u89E3\u6790", "slug": "_7-3-2-beandefinition-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.3 BeanDefinitionReader \u89E3\u6790", "slug": "_7-3-3-beandefinitionreader-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.4 BeanDefinitionRegistry \u89E3\u6790", "slug": "_7-3-4-beandefinitionregistry-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.5 \u521B\u5EFA\u5BB9\u5668", "slug": "_7-3-5-\u521B\u5EFA\u5BB9\u5668", "children": [] }] }, { "level": 2, "title": "7.4 \u81EA\u5B9A\u4E49 SpringIOC", "slug": "_7-4-\u81EA\u5B9A\u4E49-springioc", "children": [{ "level": 3, "title": "7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B", "slug": "_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B", "children": [{ "level": 4, "title": "7.4.1.1 PropertyValue \u7C7B", "slug": "_7-4-1-1-propertyvalue-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.1.2 MutablePropertyValues \u7C7B", "slug": "_7-4-1-2-mutablepropertyvalues-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.1.3 BeanDefinition \u7C7B", "slug": "_7-4-1-3-beandefinition-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B", "slug": "_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3", "slug": "_7-4-2-1-beandefinitionregistry-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B", "slug": "_7-4-2-2-simplebeandefinitionregistry-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B", "slug": "_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.3.1 BeanDefinitionReader \u63A5\u53E3", "slug": "_7-4-3-1-beandefinitionreader-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.3.2 XmlBeanDefinitionReader \u7C7B", "slug": "_7-4-3-2-xmlbeandefinitionreader-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B", "slug": "_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.4.1 BeanFactory \u63A5\u53E3", "slug": "_7-4-4-1-beanfactory-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.4.2 ApplicationContext \u63A5\u53E3", "slug": "_7-4-4-2-applicationcontext-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.4.3 AbstractApplicationContext \u7C7B", "slug": "_7-4-4-3-abstractapplicationcontext-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.4.4 ClassPathXmlApplicationContext \u7C7B", "slug": "_7-4-4-4-classpathxmlapplicationcontext-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3", "slug": "_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3", "children": [{ "level": 4, "title": "7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F", "slug": "_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F", "children": [] }, { "level": 4, "title": "7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219", "slug": "_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219", "children": [] }, { "level": 4, "title": "7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165", "slug": "_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165", "children": [] }] }] }] }], "content": '---\r\ntitle: "\u8BBE\u8BA1\u6A21\u5F0F"\r\ndescription: "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"\r\nsidebar: \'auto\'\r\ntags: \u8BBE\u8BA1\u6A21\u5F0F\r\ncategories: java\r\n---\r\n\r\n\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002\r\n\r\n<!-- more -->\r\n\r\n# 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0\r\n\r\n## 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F\r\n\r\n"\u8BBE\u8BA1\u6A21\u5F0F"\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002\r\n\r\n1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB`\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09`\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002\r\n\r\n1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002\r\n\r\n## 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5\r\n\r\n\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002\r\n\r\n## 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027\r\n\r\n\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002\r\n\r\n\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002\r\n\r\n- \u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002\r\n- \u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002\r\n- \u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002\r\n\r\n## 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\r\n\r\n- **\u521B\u5EFA\u578B\u6A21\u5F0F**\r\n\r\n  \u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002\r\n\r\n- **\u7ED3\u6784\u578B\u6A21\u5F0F**\r\n\r\n  \u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002\r\n\r\n- **\u884C\u4E3A\u578B\u6A21\u5F0F**\r\n\r\n  \u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002\r\n\r\n# 2\uFF0CUML \u56FE\r\n\r\n\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002\r\n\r\nUML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002\r\n\r\n## 2.1 \u7C7B\u56FE\u6982\u8FF0\r\n\r\n\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002\r\n\r\n## 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528\r\n\r\n- \u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B\r\n- \u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002\r\n\r\n## 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5\r\n\r\n### 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F\r\n\r\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002\r\n\r\n![](\\img\\Employee.jpg)\r\n\r\n\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A\r\n\r\n- +\uFF1A\u8868\u793A public\r\n\r\n- -\uFF1A\u8868\u793A private\r\n\r\n- #\uFF1A\u8868\u793A protected\r\n\r\n\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A **\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]**\r\n\r\n\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A **\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]**\r\n\r\n> \u6CE8\u610F\uFF1A\r\n>\r\n> \u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684\r\n>\r\n> \u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762\r\n\r\n**\u4E3E\u4E2A\u6817\u5B50\uFF1A**\r\n\r\n![](\\img\\demo.png)\r\n\r\n\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A\r\n\r\n- method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002\r\n- method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002\r\n- method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002\r\n\r\n### 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F\r\n\r\n#### 2.3.2.1 \u5173\u8054\u5173\u7CFB\r\n\r\n\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002\r\n\r\n\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002\r\n\r\n**1\uFF0C\u5355\u5411\u5173\u8054**\r\n\r\n![](\\img\\customer_address.png)\r\n\r\n\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002\r\n\r\n**2\uFF0C\u53CC\u5411\u5173\u8054**\r\n\r\n![](\\img\\customer_product.png)\r\n\r\n\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002\r\n\r\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List\\<Product>\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002\r\n\r\n**3\uFF0C\u81EA\u5173\u8054**\r\n\r\n![](\\img\\node.png)\r\n\r\n\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002\r\n\r\n#### 2.3.2.2 \u805A\u5408\u5173\u7CFB\r\n\r\n\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\r\n\r\n\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002\r\n\r\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A\r\n\r\n![](\\img\\image-20191229173422328.png)\r\n\r\n#### 2.3.2.3 \u7EC4\u5408\u5173\u7CFB\r\n\r\n\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002\r\n\r\n\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002\r\n\r\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A\r\n\r\n![](\\img\\image-20191229173455149.png)\r\n\r\n#### 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB\r\n\r\n\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002\r\n\r\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A\r\n\r\n![](\\img\\image-20191229173518926.png)\r\n\r\n#### 2.3.2.5 \u7EE7\u627F\u5173\u7CFB\r\n\r\n\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002\r\n\r\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A\r\n\r\n![](\\img\\image-20191229173539838.png)\r\n\r\n#### 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB\r\n\r\n\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002\r\n\r\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002\r\n\r\n![](\\img\\image-20191229173554296.png)\r\n\r\n# 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219\r\n\r\n\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002\r\n\r\n## 3.1 \u5F00\u95ED\u539F\u5219\r\n\r\n**\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED**\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002\r\n\r\n\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002\r\n\r\n\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002\r\n\r\n\u4E0B\u9762\u4EE5 `\u641C\u72D7\u8F93\u5165\u6CD5` \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002\r\n\r\n\u3010\u4F8B\u3011`\u641C\u72D7\u8F93\u5165\u6CD5` \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002\r\n\r\n\u5206\u6790\uFF1A`\u641C\u72D7\u8F93\u5165\u6CD5` \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002\r\n\r\n![](\\img\\open-close.png)\r\n\r\n## 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219\r\n\r\n\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002\r\n\r\n\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002\r\n\r\n\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002\r\n\r\n\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50\r\n\r\n\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002\r\n\r\n\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002\r\n\r\n![](\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png)\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n**\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A**\r\n\r\n```java\r\npublic class Rectangle {\r\n    private double length;\r\n    private double width;\r\n\r\n    public double getLength() {\r\n        return length;\r\n    }\r\n\r\n    public void setLength(double length) {\r\n        this.length = length;\r\n    }\r\n\r\n    public double getWidth() {\r\n        return width;\r\n    }\r\n\r\n    public void setWidth(double width) {\r\n        this.width = width;\r\n    }\r\n}\r\n```\r\n\r\n**\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A**\r\n\r\n\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002\r\n\r\n```java\r\npublic class Square extends Rectangle {\r\n\r\n    public void setWidth(double width) {\r\n        super.setLength(width);\r\n        super.setWidth(width);\r\n    }\r\n\r\n    public void setLength(double length) {\r\n        super.setLength(length);\r\n        super.setWidth(length);\r\n    }\r\n}\r\n```\r\n\r\n\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002\r\n\r\n```java\r\npublic class RectangleDemo {\r\n\r\n    public static void resize(Rectangle rectangle) {\r\n        while (rectangle.getWidth() <= rectangle.getLength()) {\r\n            rectangle.setWidth(rectangle.getWidth() + 1);\r\n        }\r\n    }\r\n\r\n    //\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD\r\n    public static void printLengthAndWidth(Rectangle rectangle) {\r\n        System.out.println(rectangle.getLength());\r\n        System.out.println(rectangle.getWidth());\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Rectangle rectangle = new Rectangle();\r\n        rectangle.setLength(20);\r\n        rectangle.setWidth(10);\r\n        resize(rectangle);\r\n        printLengthAndWidth(rectangle);\r\n\r\n        System.out.println("============");\r\n\r\n        Rectangle rectangle1 = new Square();\r\n        rectangle1.setLength(10);\r\n        resize(rectangle1);\r\n        printLengthAndWidth(rectangle1);\r\n    }\r\n}\r\n```\r\n\r\n\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002\r\n\u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002\r\n\r\n\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3\r\n\r\n<img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png" style="zoom:80%;" />\r\n\r\n## 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219\r\n\r\n\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002\r\n\r\n\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\r\n\r\n\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111\r\n\r\n\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002\r\n\r\n**\u7C7B\u56FE\u5982\u4E0B\uFF1A**\r\n\r\n<img src="\\img\\\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n**\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:**\r\n\r\n```java\r\npublic class XiJieHardDisk implements HardDisk {\r\n\r\n    public void save(String data) {\r\n        System.out.println("\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E" + data);\r\n    }\r\n\r\n    public String get() {\r\n        System.out.println("\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E");\r\n        return "\u6570\u636E";\r\n    }\r\n}\r\n```\r\n\r\n**Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A**\r\n\r\n```java\r\npublic class IntelCpu implements Cpu {\r\n\r\n    public void run() {\r\n        System.out.println("\u4F7F\u7528Intel\u5904\u7406\u5668");\r\n    }\r\n}\r\n```\r\n\r\n**\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A**\r\n\r\n```java\r\npublic class KingstonMemory implements Memory {\r\n\r\n    public void save() {\r\n        System.out.println("\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761");\r\n    }\r\n}\r\n```\r\n\r\n**\u7535\u8111\uFF08Computer\uFF09\uFF1A**\r\n\r\n```java\r\npublic class Computer {\r\n\r\n    private XiJieHardDisk hardDisk;\r\n    private IntelCpu cpu;\r\n    private KingstonMemory memory;\r\n\r\n    public IntelCpu getCpu() {\r\n        return cpu;\r\n    }\r\n\r\n    public void setCpu(IntelCpu cpu) {\r\n        this.cpu = cpu;\r\n    }\r\n\r\n    public KingstonMemory getMemory() {\r\n        return memory;\r\n    }\r\n\r\n    public void setMemory(KingstonMemory memory) {\r\n        this.memory = memory;\r\n    }\r\n\r\n    public XiJieHardDisk getHardDisk() {\r\n        return hardDisk;\r\n    }\r\n\r\n    public void setHardDisk(XiJieHardDisk hardDisk) {\r\n        this.hardDisk = hardDisk;\r\n    }\r\n\r\n    public void run() {\r\n        System.out.println("\u8BA1\u7B97\u673A\u5DE5\u4F5C");\r\n        cpu.run();\r\n        memory.save();\r\n        String data = hardDisk.get();\r\n        System.out.println("\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A" + data);\r\n    }\r\n}\r\n```\r\n\r\n**\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A**\r\n\r\n\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002\r\n\r\n```java\r\npublic class TestComputer {\r\n    public static void main(String[] args) {\r\n        Computer computer = new Computer();\r\n        computer.setHardDisk(new XiJieHardDisk());\r\n        computer.setCpu(new IntelCpu());\r\n        computer.setMemory(new KingstonMemory());\r\n\r\n        computer.run();\r\n    }\r\n}\r\n```\r\n\r\n\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002\r\n\r\n\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A\r\n\r\n\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002\r\n\r\n**\u7C7B\u56FE\u5982\u4E0B\uFF1A**\r\n\r\n<img src="/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png" alt="image-20191229173554296" style="zoom:70%;" />\r\n\r\n**\u7535\u8111\uFF08Computer\uFF09\uFF1A**\r\n\r\n```java\r\npublic class Computer {\r\n\r\n    private HardDisk hardDisk;\r\n    private Cpu cpu;\r\n    private Memory memory;\r\n\r\n    public HardDisk getHardDisk() {\r\n        return hardDisk;\r\n    }\r\n\r\n    public void setHardDisk(HardDisk hardDisk) {\r\n        this.hardDisk = hardDisk;\r\n    }\r\n\r\n    public Cpu getCpu() {\r\n        return cpu;\r\n    }\r\n\r\n    public void setCpu(Cpu cpu) {\r\n        this.cpu = cpu;\r\n    }\r\n\r\n    public Memory getMemory() {\r\n        return memory;\r\n    }\r\n\r\n    public void setMemory(Memory memory) {\r\n        this.memory = memory;\r\n    }\r\n\r\n    public void run() {\r\n        System.out.println("\u8BA1\u7B97\u673A\u5DE5\u4F5C");\r\n    }\r\n}\r\n```\r\n\r\n\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002\r\n\r\n## 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219\r\n\r\n\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002\r\n\r\n\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219\r\n\r\n\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B\r\n\r\n\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A`\u9ED1\u9A6C`\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n![](\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u5219.png)\r\n\r\n\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A\r\n\r\n![](\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u52191.png)\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n**AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A**\r\n\r\n```java\r\npublic interface AntiTheft {\r\n    void antiTheft();\r\n}\r\n```\r\n\r\n**Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A**\r\n\r\n```java\r\npublic interface Fireproof {\r\n    void fireproof();\r\n}\r\n```\r\n\r\n**Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A**\r\n\r\n```java\r\npublic interface Waterproof {\r\n    void waterproof();\r\n}\r\n```\r\n\r\n**HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A**\r\n\r\n```java\r\npublic class HeiMaSafetyDoor implements AntiTheft,Fireproof,Waterproof {\r\n    public void antiTheft() {\r\n        System.out.println("\u9632\u76D7");\r\n    }\r\n\r\n    public void fireproof() {\r\n        System.out.println("\u9632\u706B");\r\n    }\r\n\r\n\r\n    public void waterproof() {\r\n        System.out.println("\u9632\u6C34");\r\n    }\r\n}\r\n```\r\n\r\n**ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A**\r\n\r\n```java\r\npublic class ItcastSafetyDoor implements AntiTheft,Fireproof {\r\n    public void antiTheft() {\r\n        System.out.println("\u9632\u76D7");\r\n    }\r\n\r\n    public void fireproof() {\r\n        System.out.println("\u9632\u706B");\r\n    }\r\n}\r\n```\r\n\r\n## 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219\r\n\r\n\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002\r\n\r\n\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002\r\n\r\n\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002\r\n\r\n\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002\r\n\r\n\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219\r\n\r\n\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B\r\n\r\n\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n**\u660E\u661F\u7C7B\uFF08Star\uFF09**\r\n\r\n```java\r\npublic class Star {\r\n    private String name;\r\n\r\n    public Star(String name) {\r\n        this.name=name;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\n**\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09**\r\n\r\n```java\r\npublic class Fans {\r\n    private String name;\r\n\r\n    public Fans(String name) {\r\n        this.name=name;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\n**\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09**\r\n\r\n```java\r\npublic class Company {\r\n    private String name;\r\n\r\n    public Company(String name) {\r\n        this.name=name;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\n**\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09**\r\n\r\n```java\r\npublic class Agent {\r\n    private Star star;\r\n    private Fans fans;\r\n    private Company company;\r\n\r\n    public void setStar(Star star) {\r\n        this.star = star;\r\n    }\r\n\r\n    public void setFans(Fans fans) {\r\n        this.fans = fans;\r\n    }\r\n\r\n    public void setCompany(Company company) {\r\n        this.company = company;\r\n    }\r\n\r\n    public void meeting() {\r\n        System.out.println(fans.getName() + "\u4E0E\u660E\u661F" + star.getName() + "\u89C1\u9762\u4E86\u3002");\r\n    }\r\n\r\n    public void business() {\r\n        System.out.println(company.getName() + "\u4E0E\u660E\u661F" + star.getName() + "\u6D3D\u6DE1\u4E1A\u52A1\u3002");\r\n    }\r\n}\r\n```\r\n\r\n## 3.6 \u5408\u6210\u590D\u7528\u539F\u5219\r\n\r\n\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002\r\n\r\n\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002\r\n\r\n\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A\r\n\r\n1. \u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002\r\n2. \u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002\r\n3. \u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002\r\n\r\n\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A\r\n\r\n1. \u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002\r\n2. \u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002\r\n3. \u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002\r\n\r\n\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219\r\n\r\n\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F\r\n\r\n\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u5408\u6210\u590D\u7528\u539F\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />\r\n\r\n\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002\r\n\r\n<img src="/img/\u5408\u6210\u590D\u7528\u539F\u52191.png" alt="image-20191229173554296" style="zoom:80%;" />\r\n\r\n# 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F\r\n\r\n\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002\r\n\r\n\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002\r\n\r\n\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A\r\n\r\n- \u5355\u4F8B\u6A21\u5F0F\r\n- \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\r\n- \u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F\r\n- \u539F\u578B\u6A21\u5F0F\r\n- \u5EFA\u9020\u8005\u6A21\u5F0F\r\n\r\n## 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\r\n\r\n\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002\r\n\r\n\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002\r\n\r\n### 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784\r\n\r\n\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A\r\n\r\n- \u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B\r\n- \u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B\r\n\r\n### 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0\r\n\r\n> \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A\r\n>\r\n> \u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\r\n>\r\n> \u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA\r\n\r\n1. \u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09\r\n\r\n   ```java\r\n   /**\r\n    * \u997F\u6C49\u5F0F\r\n    *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61\r\n    */\r\n   public class Singleton {\r\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n       private Singleton() {}\r\n\r\n       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61\r\n       private static Singleton instance = new Singleton();\r\n\r\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n       public static Singleton getInstance() {\r\n           return instance;\r\n       }\r\n   }\r\n   ```\r\n\r\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\r\n\r\n   \u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002\r\n\r\n2. \u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09\r\n\r\n   ```java\r\n   /**\r\n    * \u6076\u6C49\u5F0F\r\n    *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61\r\n    */\r\n   public class Singleton {\r\n\r\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n       private Singleton() {}\r\n\r\n       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61\r\n       private static Singleton instance;\r\n\r\n       static {\r\n           instance = new Singleton();\r\n       }\r\n\r\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n       public static Singleton getInstance() {\r\n           return instance;\r\n       }\r\n   }\r\n   ```\r\n\r\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\r\n\r\n   \u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002\r\n\r\n3. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09\r\n\r\n   ```java\r\n   /**\r\n    * \u61D2\u6C49\u5F0F\r\n    *  \u7EBF\u7A0B\u4E0D\u5B89\u5168\r\n    */\r\n   public class Singleton {\r\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n       private Singleton() {}\r\n\r\n       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61\r\n       private static Singleton instance;\r\n\r\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n       public static Singleton getInstance() {\r\n\r\n           if(instance == null) {\r\n               instance = new Singleton();\r\n           }\r\n           return instance;\r\n       }\r\n   }\r\n   ```\r\n\r\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\r\n\r\n   \u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\r\n\r\n4. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09\r\n\r\n   ```java\r\n   /**\r\n    * \u61D2\u6C49\u5F0F\r\n    *  \u7EBF\u7A0B\u5B89\u5168\r\n    */\r\n   public class Singleton {\r\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n       private Singleton() {}\r\n\r\n       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61\r\n       private static Singleton instance;\r\n\r\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n       public static synchronized Singleton getInstance() {\r\n\r\n           if(instance == null) {\r\n               instance = new Singleton();\r\n           }\r\n           return instance;\r\n       }\r\n   }\r\n   ```\r\n\r\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\r\n\r\n   \u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002\r\n\r\n5. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09\r\n\r\n   \u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E `getInstance()` \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\r\n\r\n   ```java\r\n   /**\r\n    * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F\r\n    */\r\n   public class Singleton {\r\n\r\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n       private Singleton() {}\r\n\r\n       private static Singleton instance;\r\n\r\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n       public static Singleton getInstance() {\r\n   		//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B\r\n           if(instance == null) {\r\n               synchronized (Singleton.class) {\r\n                   //\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull\r\n                   if(instance == null) {\r\n                       instance = new Singleton();\r\n                   }\r\n               }\r\n           }\r\n           return instance;\r\n       }\r\n   }\r\n   ```\r\n\r\n   \u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002\r\n\r\n   \u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 `volatile` \u5173\u952E\u5B57, `volatile` \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002\r\n\r\n   ```java\r\n   /**\r\n    * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F\r\n    */\r\n   public class Singleton {\r\n\r\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n       private Singleton() {}\r\n\r\n       private static volatile Singleton instance;\r\n\r\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n       public static Singleton getInstance() {\r\n   		//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645\r\n           if(instance == null) {\r\n               synchronized (Singleton.class) {\r\n                   //\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A\r\n                   if(instance == null) {\r\n                       instance = new Singleton();\r\n                   }\r\n               }\r\n           }\r\n           return instance;\r\n       }\r\n   }\r\n   ```\r\n\r\n   <div color="red">\u5C0F\u7ED3\uFF1A</div>\r\n\r\n   \u6DFB\u52A0 `volatile` \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002\r\n\r\n6. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09\r\n\r\n   \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB `static` \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002\r\n\r\n   ```java\r\n   /**\r\n    * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\r\n    */\r\n   public class Singleton {\r\n\r\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n       private Singleton() {}\r\n\r\n       private static class SingletonHolder {\r\n           private static final Singleton INSTANCE = new Singleton();\r\n       }\r\n\r\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n       public static Singleton getInstance() {\r\n           return SingletonHolder.INSTANCE;\r\n       }\r\n   }\r\n   ```\r\n\r\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\r\n\r\n   \u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder\r\n\r\n   \u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002\r\n\r\n   <div color="red">\u5C0F\u7ED3\uFF1A</div>\r\n\r\n   \u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002\r\n\r\n7. \u679A\u4E3E\u65B9\u5F0F\r\n\r\n   \u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002\r\n\r\n   ```java\r\n   /**\r\n    * \u679A\u4E3E\u65B9\u5F0F\r\n    */\r\n   public enum Singleton {\r\n       INSTANCE;\r\n   }\r\n   ```\r\n\r\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\r\n\r\n   \u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002\r\n\r\n### 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898\r\n\r\n#### 4.1.3.1 \u95EE\u9898\u6F14\u793A\r\n\r\n\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002\r\n\r\n- \u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\r\n\r\n  **Singleton \u7C7B\uFF1A**\r\n\r\n  ```java\r\n  public class Singleton implements Serializable {\r\n\r\n      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n      private Singleton() {}\r\n\r\n      private static class SingletonHolder {\r\n          private static final Singleton INSTANCE = new Singleton();\r\n      }\r\n\r\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n      public static Singleton getInstance() {\r\n          return SingletonHolder.INSTANCE;\r\n      }\r\n  }\r\n  ```\r\n\r\n  **Test \u7C7B\uFF1A**\r\n\r\n  ```java\r\n  public class Test {\r\n      public static void main(String[] args) throws Exception {\r\n          //\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61\r\n          //writeObject2File();\r\n          //\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61\r\n          Singleton s1 = readObjectFromFile();\r\n          Singleton s2 = readObjectFromFile();\r\n\r\n          //\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\r\n          System.out.println(s1 == s2);\r\n      }\r\n\r\n      private static Singleton readObjectFromFile() throws Exception {\r\n          //\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61\r\n          ObjectInputStream ois = new ObjectInputStream(new FileInputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"));\r\n          //\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61\r\n          Singleton instance = (Singleton) ois.readObject();\r\n\r\n          return instance;\r\n      }\r\n\r\n      public static void writeObject2File() throws Exception {\r\n          //\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61\r\n          Singleton instance = Singleton.getInstance();\r\n          //\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\r\n          ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"));\r\n          //\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D\r\n          oos.writeObject(instance);\r\n      }\r\n  }\r\n  ```\r\n\r\n  > \u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F`false`\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002\r\n\r\n- \u53CD\u5C04\r\n\r\n  **Singleton \u7C7B\uFF1A**\r\n\r\n  ```java\r\n  public class Singleton {\r\n\r\n      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n      private Singleton() {}\r\n\r\n      private static volatile Singleton instance;\r\n\r\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n      public static Singleton getInstance() {\r\n\r\n          if(instance != null) {\r\n              return instance;\r\n          }\r\n\r\n          synchronized (Singleton.class) {\r\n              if(instance != null) {\r\n                  return instance;\r\n              }\r\n              instance = new Singleton();\r\n              return instance;\r\n          }\r\n      }\r\n  }\r\n  ```\r\n\r\n  **Test \u7C7B\uFF1A**\r\n\r\n  ```java\r\n  public class Test {\r\n      public static void main(String[] args) throws Exception {\r\n          //\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61\r\n          Class clazz = Singleton.class;\r\n          //\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61\r\n          Constructor constructor = clazz.getDeclaredConstructor();\r\n          //\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5\r\n          constructor.setAccessible(true);\r\n\r\n          //\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1\r\n          Singleton s1 = (Singleton) constructor.newInstance();\r\n          //\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2\r\n          Singleton s2 = (Singleton) constructor.newInstance();\r\n\r\n          //\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\r\n          System.out.println(s1 == s2);\r\n      }\r\n  }\r\n  ```\r\n\r\n  > \u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F`false`\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\r\n\r\n> <div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002\r\n\r\n#### 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3\r\n\r\n- \u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5\r\n\r\n  \u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0`readResolve()`\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002\r\n\r\n  **Singleton \u7C7B\uFF1A**\r\n\r\n  ```java\r\n  public class Singleton implements Serializable {\r\n\r\n      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n      private Singleton() {}\r\n\r\n      private static class SingletonHolder {\r\n          private static final Singleton INSTANCE = new Singleton();\r\n      }\r\n\r\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n      public static Singleton getInstance() {\r\n          return SingletonHolder.INSTANCE;\r\n      }\r\n\r\n      /**\r\n       * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\r\n       */\r\n      private Object readResolve() {\r\n          return SingletonHolder.INSTANCE;\r\n      }\r\n  }\r\n  ```\r\n\r\n  **\u6E90\u7801\u89E3\u6790\uFF1A**\r\n\r\n  ObjectInputStream \u7C7B\r\n\r\n  ```java\r\n  public final Object readObject() throws IOException, ClassNotFoundException{\r\n      ...\r\n      // if nested read, passHandle contains handle of enclosing object\r\n      int outerHandle = passHandle;\r\n      try {\r\n          Object obj = readObject0(false);//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5\r\n      .....\r\n  }\r\n\r\n  private Object readObject0(boolean unshared) throws IOException {\r\n  	...\r\n      try {\r\n  		switch (tc) {\r\n  			...\r\n  			case TC_OBJECT:\r\n  				return checkResolve(readOrdinaryObject(unshared));//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5\r\n  			...\r\n          }\r\n      } finally {\r\n          depth--;\r\n          bin.setBlockDataMode(oldMode);\r\n      }\r\n  }\r\n\r\n  private Object readOrdinaryObject(boolean unshared) throws IOException {\r\n  	...\r\n  	//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C\r\n      obj = desc.isInstantiable() ? desc.newInstance() : null;\r\n      ...\r\n      // \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue\r\n      if (obj != null && handles.lookupException(passHandle) == null && desc.hasReadResolveMethod()) {\r\n      	// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF\r\n      	// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002\r\n      	Object rep = desc.invokeReadResolve(obj);\r\n       	...\r\n      }\r\n      return obj;\r\n  }\r\n  ```\r\n\r\n- \u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5\r\n\r\n  ```java\r\n  public class Singleton {\r\n\r\n      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\r\n      private Singleton() {\r\n          /*\r\n             \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801\r\n          */\r\n          if(instance != null) {\r\n              throw new RuntimeException();\r\n          }\r\n      }\r\n\r\n      private static volatile Singleton instance;\r\n\r\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\r\n      public static Singleton getInstance() {\r\n\r\n          if(instance != null) {\r\n              return instance;\r\n          }\r\n\r\n          synchronized (Singleton.class) {\r\n              if(instance != null) {\r\n                  return instance;\r\n              }\r\n              instance = new Singleton();\r\n              return instance;\r\n          }\r\n      }\r\n  }\r\n  ```\r\n\r\n  <div color="red">\u8BF4\u660E:</div>\r\n\r\n  \u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002\r\n\r\n### 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B\r\n\r\nRuntime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002\r\n\r\n1. \u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F\r\n\r\n   ```java\r\n   public class Runtime {\r\n       private static Runtime currentRuntime = new Runtime();\r\n\r\n       /**\r\n        * Returns the runtime object associated with the current Java application.\r\n        * Most of the methods of class <code>Runtime</code> are instance\r\n        * methods and must be invoked with respect to the current runtime object.\r\n        *\r\n        * @return  the <code>Runtime</code> object associated with the current\r\n        *          Java application.\r\n        */\r\n       public static Runtime getRuntime() {\r\n           return currentRuntime;\r\n       }\r\n\r\n       /** Don\'t let anyone else instantiate this class */\r\n       private Runtime() {}\r\n       ...\r\n   }\r\n   ```\r\n\r\n   \u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002\r\n\r\n2. \u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5\r\n\r\n   ```java\r\n   public class RuntimeDemo {\r\n       public static void main(String[] args) throws IOException {\r\n           //\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61\r\n           Runtime runtime = Runtime.getRuntime();\r\n\r\n           //\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002\r\n           System.out.println(runtime.totalMemory());\r\n           //\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002\r\n           System.out.println(runtime.maxMemory());\r\n\r\n           //\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61\r\n           Process process = runtime.exec("ipconfig");\r\n           //\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6\r\n           InputStream inputStream = process.getInputStream();\r\n           byte[] arr = new byte[1024 * 1024* 100];\r\n           int b = inputStream.read(arr);\r\n           System.out.println(new String(arr,0,b,"gbk"));\r\n       }\r\n   }\r\n   ```\r\n\r\n## 4.2 \u5DE5\u5382\u6A21\u5F0F\r\n\r\n### 4.2.1 \u6982\u8FF0\r\n\r\n\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002\r\n\r\n\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002\r\n\r\n\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png" style="zoom:80%;" />\r\n\r\n\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A**\u89E3\u8026**\u3002\r\n\r\n\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528\r\n\r\n- \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09\r\n- \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\r\n- \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\r\n\r\n### 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\r\n\r\n\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002\r\n\r\n#### 4.2.2.1 \u7ED3\u6784\r\n\r\n\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002\r\n- \u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B\r\n- \u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002\r\n\r\n#### 4.2.2.2 \u5B9E\u73B0\r\n\r\n\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:70%;" />\r\n\r\n\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic class SimpleCoffeeFactory {\r\n\r\n    public Coffee createCoffee(String type) {\r\n        Coffee coffee = null;\r\n        if("americano".equals(type)) {\r\n            coffee = new AmericanoCoffee();\r\n        } else if("latte".equals(type)) {\r\n            coffee = new LatteCoffee();\r\n        }\r\n        return coffee;\r\n    }\r\n}\r\n```\r\n\r\n\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\r\n\r\n\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002\r\n\r\n#### 4.2.2.4 \u4F18\u7F3A\u70B9\r\n\r\n**\u4F18\u70B9\uFF1A**\r\n\r\n\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002\r\n\r\n**\u7F3A\u70B9\uFF1A**\r\n\r\n\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002\r\n\r\n#### 4.2.2.3 \u6269\u5C55\r\n\r\n**\u9759\u6001\u5DE5\u5382**\r\n\r\n\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic class SimpleCoffeeFactory {\r\n\r\n    public static Coffee createCoffee(String type) {\r\n        Coffee coffee = null;\r\n        if("americano".equals(type)) {\r\n            coffee = new AmericanoCoffee();\r\n        } else if("latte".equals(type)) {\r\n            coffee = new LatteCoffee();\r\n        }\r\n        return coffe;\r\n    }\r\n}\r\n```\r\n\r\n### 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\r\n\r\n\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002\r\n\r\n#### 4.2.3.1 \u6982\u5FF5\r\n\r\n\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002\r\n\r\n#### 4.2.3.2 \u7ED3\u6784\r\n\r\n\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002\r\n- \u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002\r\n- \u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002\r\n- \u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002\r\n\r\n#### 4.2.3.3 \u5B9E\u73B0\r\n\r\n\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:70%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u62BD\u8C61\u5DE5\u5382\uFF1A\r\n\r\n```java\r\npublic interface CoffeeFactory {\r\n\r\n    Coffee createCoffee();\r\n}\r\n```\r\n\r\n\u5177\u4F53\u5DE5\u5382\uFF1A\r\n\r\n```java\r\npublic class LatteCoffeeFactory implements CoffeeFactory {\r\n\r\n    public Coffee createCoffee() {\r\n        return new LatteCoffee();\r\n    }\r\n}\r\n\r\npublic class AmericanCoffeeFactory implements CoffeeFactory {\r\n\r\n    public Coffee createCoffee() {\r\n        return new AmericanCoffee();\r\n    }\r\n}\r\n```\r\n\r\n\u5496\u5561\u5E97\u7C7B\uFF1A\r\n\r\n```java\r\npublic class CoffeeStore {\r\n\r\n    private CoffeeFactory factory;\r\n\r\n    public CoffeeStore(CoffeeFactory factory) {\r\n        this.factory = factory;\r\n    }\r\n\r\n    public Coffee orderCoffee(String type) {\r\n        Coffee coffee = factory.createCoffee();\r\n        coffee.addMilk();\r\n        coffee.addsugar();\r\n        return coffee;\r\n    }\r\n}\r\n```\r\n\r\n\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002\r\n\r\n\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002\r\n\r\n#### 4.2.3.4 \u4F18\u7F3A\u70B9\r\n\r\n**\u4F18\u70B9\uFF1A**\r\n\r\n- \u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B\r\n- \u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B\r\n\r\n**\u7F3A\u70B9\uFF1A**\r\n\r\n- \u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002\r\n\r\n### 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\r\n\r\n\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002\r\n\r\n\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002\r\n\r\n\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002\r\n\r\n<img src="/img/image-20200401214509176.png" style="zoom:67%;" />\r\n\r\n<img src="/img/image-20200401222951963.png" style="zoom:67%;" />\r\n\r\n#### 4.2.4.1 \u6982\u5FF5\r\n\r\n\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002\r\n\r\n\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002\r\n\r\n#### 4.2.4.2 \u7ED3\u6784\r\n\r\n\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A\r\n\r\n- \u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002\r\n- \u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002\r\n- \u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002\r\n- \u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002\r\n\r\n#### 4.2.4.2 \u5B9E\u73B0\r\n\r\n\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:67%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u62BD\u8C61\u5DE5\u5382\uFF1A\r\n\r\n```java\r\npublic interface DessertFactory {\r\n\r\n    Coffee createCoffee();\r\n\r\n    Dessert createDessert();\r\n}\r\n```\r\n\r\n\u5177\u4F53\u5DE5\u5382\uFF1A\r\n\r\n```java\r\n//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382\r\npublic class AmericanDessertFactory implements DessertFactory {\r\n\r\n    public Coffee createCoffee() {\r\n        return new AmericanCoffee();\r\n    }\r\n\r\n    public Dessert createDessert() {\r\n        return new MatchaMousse();\r\n    }\r\n}\r\n//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382\r\npublic class ItalyDessertFactory implements DessertFactory {\r\n\r\n    public Coffee createCoffee() {\r\n        return new LatteCoffee();\r\n    }\r\n\r\n    public Dessert createDessert() {\r\n        return new Tiramisu();\r\n    }\r\n}\r\n```\r\n\r\n\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002\r\n\r\n#### 4.2.4.3 \u4F18\u7F3A\u70B9\r\n\r\n**\u4F18\u70B9\uFF1A**\r\n\r\n\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002\r\n\r\n**\u7F3A\u70B9\uFF1A**\r\n\r\n\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002\r\n\r\n#### 4.2.4.4 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002\r\n\r\n- \u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002\r\n\r\n- \u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002\r\n\r\n\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002\r\n\r\n### 4.2.5 \u6A21\u5F0F\u6269\u5C55\r\n\r\n**\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408**\r\n\r\n\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002\r\n\r\n\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6\r\n\r\n\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties\r\n\r\n```properties\r\namerican=com.itheima.pattern.factory.config_factory.AmericanCoffee\r\nlatte=com.itheima.pattern.factory.config_factory.LatteCoffee\r\n```\r\n\r\n\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B\r\n\r\n```java\r\npublic class CoffeeFactory {\r\n\r\n    private static Map<String,Coffee> map = new HashMap();\r\n\r\n    static {\r\n        Properties p = new Properties();\r\n        InputStream is = CoffeeFactory.class.getClassLoader().getResourceAsStream("bean.properties");\r\n        try {\r\n            p.load(is);\r\n            //\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61\r\n            Set<Object> keys = p.keySet();\r\n            for (Object key : keys) {\r\n                //\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09\r\n                String className = p.getProperty((String) key);\r\n                //\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61\r\n                Class clazz = Class.forName(className);\r\n                Coffee obj = (Coffee) clazz.newInstance();\r\n                map.put((String)key,obj);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static Coffee createCoffee(String name) {\r\n\r\n        return map.get(name);\r\n    }\r\n}\r\n```\r\n\r\n\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002\r\n\r\n### 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5\r\n\r\n```java\r\npublic class Demo {\r\n    public static void main(String[] args) {\r\n        List<String> list = new ArrayList<>();\r\n        list.add("\u4EE4\u72D0\u51B2");\r\n        list.add("\u98CE\u6E05\u626C");\r\n        list.add("\u4EFB\u6211\u884C");\r\n\r\n        //\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\r\n        Iterator<String> it = list.iterator();\r\n        //\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\r\n        while(it.hasNext()) {\r\n            String ele = it.next();\r\n            System.out.println(ele);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A\r\n\r\n<img src="/img/jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:75%;" />\r\n\r\nCollection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002\r\n\r\n> \u53E6\uFF1A\r\n>\r\n> \u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B\r\n>\r\n> \u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B\r\n\r\n## 4.3 \u539F\u578B\u6A21\u5F0F\r\n\r\n### 4.3.1 \u6982\u8FF0\r\n\r\n\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002\r\n\r\n### 4.3.2 \u7ED3\u6784\r\n\r\n\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002\r\n- \u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002\r\n- \u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002\r\n\r\n\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n![](\\img\\\u539F\u578B\u6A21\u5F0F.png)\r\n\r\n### 4.3.3 \u5B9E\u73B0\r\n\r\n\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002\r\n\r\n> \u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002\r\n>\r\n> \u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002\r\n\r\nJava \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 `clone()` \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n**Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A**\r\n\r\n```java\r\npublic class Realizetype implements Cloneable {\r\n\r\n    public Realizetype() {\r\n        System.out.println("\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01");\r\n    }\r\n\r\n    @Override\r\n    protected Realizetype clone() throws CloneNotSupportedException {\r\n        System.out.println("\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01");\r\n        return (Realizetype) super.clone();\r\n    }\r\n}\r\n```\r\n\r\n**PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A**\r\n\r\n```java\r\npublic class PrototypeTest {\r\n    public static void main(String[] args) throws CloneNotSupportedException {\r\n        Realizetype r1 = new Realizetype();\r\n        Realizetype r2 = r1.clone();\r\n\r\n        System.out.println("\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (r1 == r2));\r\n    }\r\n}\r\n```\r\n\r\n### 4.3.4 \u6848\u4F8B\r\n\r\n**\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6**\r\n\r\n\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="\\img\\\u539F\u578B\u6A21\u5F0F1.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u5956\u72B6\u7C7B\r\npublic class Citation implements Cloneable {\r\n    private String name;\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getName() {\r\n        return (this.name);\r\n    }\r\n\r\n    public void show() {\r\n        System.out.println(name + "\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01");\r\n    }\r\n\r\n    @Override\r\n    public Citation clone() throws CloneNotSupportedException {\r\n        return (Citation) super.clone();\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\r\npublic class CitationTest {\r\n    public static void main(String[] args) throws CloneNotSupportedException {\r\n        Citation c1 = new Citation();\r\n        c1.setName("\u5F20\u4E09");\r\n\r\n        //\u590D\u5236\u5956\u72B6\r\n        Citation c2 = c1.clone();\r\n        //\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB\r\n        c2.setName("\u674E\u56DB");\r\n\r\n        c1.show();\r\n        c2.show();\r\n    }\r\n}\r\n```\r\n\r\n### 4.3.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002\r\n- \u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002\r\n\r\n### 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09\r\n\r\n\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u5956\u72B6\u7C7B\r\npublic class Citation implements Cloneable {\r\n    private Student stu;\r\n\r\n    public Student getStu() {\r\n        return stu;\r\n    }\r\n\r\n    public void setStu(Student stu) {\r\n        this.stu = stu;\r\n    }\r\n\r\n    void show() {\r\n        System.out.println(stu.getName() + "\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01");\r\n    }\r\n\r\n    @Override\r\n    public Citation clone() throws CloneNotSupportedException {\r\n        return (Citation) super.clone();\r\n    }\r\n}\r\n\r\n//\u5B66\u751F\u7C7B\r\npublic class Student {\r\n    private String name;\r\n    private String address;\r\n\r\n    public Student(String name, String address) {\r\n        this.name = name;\r\n        this.address = address;\r\n    }\r\n\r\n    public Student() {\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(String address) {\r\n        this.address = address;\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class CitationTest {\r\n    public static void main(String[] args) throws CloneNotSupportedException {\r\n\r\n        Citation c1 = new Citation();\r\n        Student stu = new Student("\u5F20\u4E09", "\u897F\u5B89");\r\n        c1.setStu(stu);\r\n\r\n        //\u590D\u5236\u5956\u72B6\r\n        Citation c2 = c1.clone();\r\n        //\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61\r\n        Student stu1 = c2.getStu();\r\n        stu1.setName("\u674E\u56DB");\r\n\r\n        //\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\r\n        System.out.println("stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (stu == stu1));\r\n\r\n        c1.show();\r\n        c2.show();\r\n    }\r\n}\r\n```\r\n\r\n\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A\r\n\r\n<img src="\\img\\\u539F\u578B\u6A21\u5F0F2.png" style="zoom:80%;" />\r\n\r\n<div color="red">\u8BF4\u660E\uFF1A</div>\r\n\r\n\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic class CitationTest1 {\r\n    public static void main(String[] args) throws Exception {\r\n        Citation c1 = new Citation();\r\n        Student stu = new Student("\u5F20\u4E09", "\u897F\u5B89");\r\n        c1.setStu(stu);\r\n\r\n        //\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61\r\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"));\r\n        //\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D\r\n        oos.writeObject(c1);\r\n        oos.close();\r\n\r\n        //\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61\r\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"));\r\n        //\u8BFB\u53D6\u5BF9\u8C61\r\n        Citation c2 = (Citation) ois.readObject();\r\n        //\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61\r\n        Student stu1 = c2.getStu();\r\n        stu1.setName("\u674E\u56DB");\r\n\r\n        //\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\r\n        System.out.println("stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (stu == stu1));\r\n\r\n        c1.show();\r\n        c2.show();\r\n    }\r\n}\r\n```\r\n\r\n\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A\r\n\r\n<img src="\\img\\\u539F\u578B\u6A21\u5F0F3.png" style="zoom:80%;" />\r\n\r\n> \u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002\r\n\r\n## 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F\r\n\r\n### 4.4.1 \u6982\u8FF0\r\n\r\n\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002\r\n\r\n<img src="/img/image-20200413225341516.png" style="zoom:60%;" />\r\n\r\n- \u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002\r\n- \u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002\r\n- \u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002\r\n\r\n### 4.4.2 \u7ED3\u6784\r\n\r\n\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002\r\n\r\n- \u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002\r\n\r\n- \u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002\r\n\r\n- \u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n### 4.4.3 \u5B9E\u4F8B\r\n\r\n**\u521B\u5EFA\u5171\u4EAB\u5355\u8F66**\r\n\r\n\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002\r\n\r\n\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png" style="zoom:80%;" />\r\n\r\n\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u81EA\u884C\u8F66\u7C7B\r\npublic class Bike {\r\n    private String frame;\r\n    private String seat;\r\n\r\n    public String getFrame() {\r\n        return frame;\r\n    }\r\n\r\n    public void setFrame(String frame) {\r\n        this.frame = frame;\r\n    }\r\n\r\n    public String getSeat() {\r\n        return seat;\r\n    }\r\n\r\n    public void setSeat(String seat) {\r\n        this.seat = seat;\r\n    }\r\n}\r\n\r\n// \u62BD\u8C61 builder \u7C7B\r\npublic abstract class Builder {\r\n\r\n    protected Bike mBike = new Bike();\r\n\r\n    public abstract void buildFrame();\r\n    public abstract void buildSeat();\r\n    public abstract Bike createBike();\r\n}\r\n\r\n//\u6469\u62DC\u5355\u8F66Builder\u7C7B\r\npublic class MobikeBuilder extends Builder {\r\n\r\n    @Override\r\n    public void buildFrame() {\r\n        mBike.setFrame("\u94DD\u5408\u91D1\u8F66\u67B6");\r\n    }\r\n\r\n    @Override\r\n    public void buildSeat() {\r\n        mBike.setSeat("\u771F\u76AE\u8F66\u5EA7");\r\n    }\r\n\r\n    @Override\r\n    public Bike createBike() {\r\n        return mBike;\r\n    }\r\n}\r\n\r\n//ofo\u5355\u8F66Builder\u7C7B\r\npublic class OfoBuilder extends Builder {\r\n\r\n    @Override\r\n    public void buildFrame() {\r\n        mBike.setFrame("\u78B3\u7EA4\u7EF4\u8F66\u67B6");\r\n    }\r\n\r\n    @Override\r\n    public void buildSeat() {\r\n        mBike.setSeat("\u6A61\u80F6\u8F66\u5EA7");\r\n    }\r\n\r\n    @Override\r\n    public Bike createBike() {\r\n        return mBike;\r\n    }\r\n}\r\n\r\n//\u6307\u6325\u8005\u7C7B\r\npublic class Director {\r\n    private Builder mBuilder;\r\n\r\n    public Director(Builder builder) {\r\n        mBuilder = builder;\r\n    }\r\n\r\n    public Bike construct() {\r\n        mBuilder.buildFrame();\r\n        mBuilder.buildSeat();\r\n        return mBuilder.createBike();\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        showBike(new OfoBuilder());\r\n        showBike(new MobikeBuilder());\r\n    }\r\n    private static void showBike(Builder builder) {\r\n        Director director = new Director(builder);\r\n        Bike bike = director.construct();\r\n        System.out.println(bike.getFrame());\r\n        System.out.println(bike.getSeat());\r\n    }\r\n}\r\n```\r\n\r\n**\u6CE8\u610F\uFF1A**\r\n\r\n\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408\r\n\r\n```java\r\n// \u62BD\u8C61 builder \u7C7B\r\npublic abstract class Builder {\r\n\r\n    protected Bike mBike = new Bike();\r\n\r\n    public abstract void buildFrame();\r\n    public abstract void buildSeat();\r\n    public abstract Bike createBike();\r\n\r\n    public Bike construct() {\r\n        this.buildFrame();\r\n        this.BuildSeat();\r\n        return this.createBike();\r\n    }\r\n}\r\n```\r\n\r\n**\u8BF4\u660E\uFF1A**\r\n\r\n\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002\r\n\r\n### 4.4.4 \u4F18\u7F3A\u70B9\r\n\r\n**\u4F18\u70B9\uFF1A**\r\n\r\n- \u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002\r\n- \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002\r\n- \u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002\r\n- \u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002\r\n\r\n**\u7F3A\u70B9\uFF1A**\r\n\r\n\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002\r\n\r\n### 4.4.5 \u4F7F\u7528\u573A\u666F\r\n\r\n\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002\r\n\r\n- \u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002\r\n- \u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002\r\n\r\n### 4.4.6 \u6A21\u5F0F\u6269\u5C55\r\n\r\n\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002\r\n\r\n\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic class Phone {\r\n    private String cpu;\r\n    private String screen;\r\n    private String memory;\r\n    private String mainboard;\r\n\r\n    public Phone(String cpu, String screen, String memory, String mainboard) {\r\n        this.cpu = cpu;\r\n        this.screen = screen;\r\n        this.memory = memory;\r\n        this.mainboard = mainboard;\r\n    }\r\n\r\n    public String getCpu() {\r\n        return cpu;\r\n    }\r\n\r\n    public void setCpu(String cpu) {\r\n        this.cpu = cpu;\r\n    }\r\n\r\n    public String getScreen() {\r\n        return screen;\r\n    }\r\n\r\n    public void setScreen(String screen) {\r\n        this.screen = screen;\r\n    }\r\n\r\n    public String getMemory() {\r\n        return memory;\r\n    }\r\n\r\n    public void setMemory(String memory) {\r\n        this.memory = memory;\r\n    }\r\n\r\n    public String getMainboard() {\r\n        return mainboard;\r\n    }\r\n\r\n    public void setMainboard(String mainboard) {\r\n        this.mainboard = mainboard;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return "Phone{" +\r\n                "cpu=\'" + cpu + \'\\\'\' +\r\n                ", screen=\'" + screen + \'\\\'\' +\r\n                ", memory=\'" + memory + \'\\\'\' +\r\n                ", mainboard=\'" + mainboard + \'\\\'\' +\r\n                \'}\';\r\n    }\r\n}\r\n\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u6784\u5EFAPhone\u5BF9\u8C61\r\n        Phone phone = new Phone("intel","\u4E09\u661F\u5C4F\u5E55","\u91D1\u58EB\u987F","\u534E\u7855");\r\n        System.out.println(phone);\r\n    }\r\n}\r\n```\r\n\r\n\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002\r\n\r\n\u91CD\u6784\u540E\u4EE3\u7801\uFF1A\r\n\r\n```java\r\npublic class Phone {\r\n\r\n    private String cpu;\r\n    private String screen;\r\n    private String memory;\r\n    private String mainboard;\r\n\r\n    private Phone(Builder builder) {\r\n        cpu = builder.cpu;\r\n        screen = builder.screen;\r\n        memory = builder.memory;\r\n        mainboard = builder.mainboard;\r\n    }\r\n\r\n    public static final class Builder {\r\n        private String cpu;\r\n        private String screen;\r\n        private String memory;\r\n        private String mainboard;\r\n\r\n        public Builder() {}\r\n\r\n        public Builder cpu(String val) {\r\n            cpu = val;\r\n            return this;\r\n        }\r\n        public Builder screen(String val) {\r\n            screen = val;\r\n            return this;\r\n        }\r\n        public Builder memory(String val) {\r\n            memory = val;\r\n            return this;\r\n        }\r\n        public Builder mainboard(String val) {\r\n            mainboard = val;\r\n            return this;\r\n        }\r\n        public Phone build() {\r\n            return new Phone(this);}\r\n    }\r\n    @Override\r\n    public String toString() {\r\n        return "Phone{" +\r\n                "cpu=\'" + cpu + \'\\\'\' +\r\n                ", screen=\'" + screen + \'\\\'\' +\r\n                ", memory=\'" + memory + \'\\\'\' +\r\n                ", mainboard=\'" + mainboard + \'\\\'\' +\r\n                \'}\';\r\n    }\r\n}\r\n\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Phone phone = new Phone.Builder()\r\n                .cpu("intel")\r\n                .mainboard("\u534E\u7855")\r\n                .memory("\u91D1\u58EB\u987F")\r\n                .screen("\u4E09\u661F")\r\n                .build();\r\n        System.out.println(phone);\r\n    }\r\n}\r\n```\r\n\r\n\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002\r\n\r\n## 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4\r\n\r\n### 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F\r\n\r\n\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\r\n\r\n\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002\r\n\r\n### 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F\r\n\r\n\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002\r\n\r\n\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002\r\n\r\n\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002\r\n\r\n# 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F\r\n\r\n\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002\r\n\r\n\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002\r\n\r\n\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A\r\n\r\n- \u4EE3\u7406\u6A21\u5F0F\r\n- \u9002\u914D\u5668\u6A21\u5F0F\r\n- \u88C5\u9970\u8005\u6A21\u5F0F\r\n- \u6865\u63A5\u6A21\u5F0F\r\n- \u5916\u89C2\u6A21\u5F0F\r\n- \u7EC4\u5408\u6A21\u5F0F\r\n- \u4EAB\u5143\u6A21\u5F0F\r\n\r\n## 5.1 \u4EE3\u7406\u6A21\u5F0F\r\n\r\n### 5.1.1 \u6982\u8FF0\r\n\r\n\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002\r\n\r\nJava \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002\r\n\r\n### 5.1.2 \u7ED3\u6784\r\n\r\n\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002\r\n- \u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002\r\n- \u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002\r\n\r\n### 5.1.3 \u9759\u6001\u4EE3\u7406\r\n\r\n\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002\r\n\r\n\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968\r\n\r\n\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="\\img\\\u9759\u6001\u4EE3\u7406.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u5356\u7968\u63A5\u53E3\r\npublic interface SellTickets {\r\n    void sell();\r\n}\r\n\r\n//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3\r\npublic class TrainStation implements SellTickets {\r\n\r\n    public void sell() {\r\n        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");\r\n    }\r\n}\r\n\r\n//\u4EE3\u552E\u70B9\r\npublic class ProxyPoint implements SellTickets {\r\n\r\n    private TrainStation station = new TrainStation();\r\n\r\n    public void sell() {\r\n        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528");\r\n        station.sell();\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        ProxyPoint pp = new ProxyPoint();\r\n        pp.sell();\r\n    }\r\n}\r\n```\r\n\r\n\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002\r\n\r\n### 5.1.4 JDK \u52A8\u6001\u4EE3\u7406\r\n\r\n\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u5356\u7968\u63A5\u53E3\r\npublic interface SellTickets {\r\n    void sell();\r\n}\r\n\r\n//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3\r\npublic class TrainStation implements SellTickets {\r\n\r\n    public void sell() {\r\n        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");\r\n    }\r\n}\r\n\r\n//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\r\npublic class ProxyFactory {\r\n\r\n    private TrainStation station = new TrainStation();\r\n\r\n    public SellTickets getProxyObject() {\r\n        //\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\r\n        /*\r\n            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A\r\n                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF\r\n                Class<?>[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3\r\n                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F\r\n         */\r\n        SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),\r\n                station.getClass().getInterfaces(),\r\n                new InvocationHandler() {\r\n                    /*\r\n                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A\r\n                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61\r\n                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B\r\n                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570\r\n                     */\r\n                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n\r\n                        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");\r\n                        //\u6267\u884C\u771F\u5B9E\u5BF9\u8C61\r\n                        Object result = method.invoke(station, args);\r\n                        return result;\r\n                    }\r\n                });\r\n        return sellTickets;\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\r\n        ProxyFactory factory = new ProxyFactory();\r\n\r\n        SellTickets proxyObject = factory.getProxyObject();\r\n        proxyObject.sell();\r\n    }\r\n}\r\n```\r\n\r\n<div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div>\r\n\r\n- ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F\r\n\r\n  ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A\r\n\r\n  ```java\r\n  package com.sun.proxy;\r\n\r\n  import com.itheima.proxy.dynamic.jdk.SellTickets;\r\n  import java.lang.reflect.InvocationHandler;\r\n  import java.lang.reflect.Method;\r\n  import java.lang.reflect.Proxy;\r\n  import java.lang.reflect.UndeclaredThrowableException;\r\n\r\n  public final class $Proxy0 extends Proxy implements SellTickets {\r\n      private static Method m1;\r\n      private static Method m2;\r\n      private static Method m3;\r\n      private static Method m0;\r\n\r\n      public $Proxy0(InvocationHandler invocationHandler) {\r\n          super(invocationHandler);\r\n      }\r\n\r\n      static {\r\n          try {\r\n              m1 = Class.forName("java.lang.Object").getMethod("equals", Class.forName("java.lang.Object"));\r\n              m2 = Class.forName("java.lang.Object").getMethod("toString", new Class[0]);\r\n              m3 = Class.forName("com.itheima.proxy.dynamic.jdk.SellTickets").getMethod("sell", new Class[0]);\r\n              m0 = Class.forName("java.lang.Object").getMethod("hashCode", new Class[0]);\r\n              return;\r\n          }\r\n          catch (NoSuchMethodException noSuchMethodException) {\r\n              throw new NoSuchMethodError(noSuchMethodException.getMessage());\r\n          }\r\n          catch (ClassNotFoundException classNotFoundException) {\r\n              throw new NoClassDefFoundError(classNotFoundException.getMessage());\r\n          }\r\n      }\r\n\r\n      public final boolean equals(Object object) {\r\n          try {\r\n              return (Boolean)this.h.invoke(this, m1, new Object[]{object});\r\n          }\r\n          catch (Error | RuntimeException throwable) {\r\n              throw throwable;\r\n          }\r\n          catch (Throwable throwable) {\r\n              throw new UndeclaredThrowableException(throwable);\r\n          }\r\n      }\r\n\r\n      public final String toString() {\r\n          try {\r\n              return (String)this.h.invoke(this, m2, null);\r\n          }\r\n          catch (Error | RuntimeException throwable) {\r\n              throw throwable;\r\n          }\r\n          catch (Throwable throwable) {\r\n              throw new UndeclaredThrowableException(throwable);\r\n          }\r\n      }\r\n\r\n      public final int hashCode() {\r\n          try {\r\n              return (Integer)this.h.invoke(this, m0, null);\r\n          }\r\n          catch (Error | RuntimeException throwable) {\r\n              throw throwable;\r\n          }\r\n          catch (Throwable throwable) {\r\n              throw new UndeclaredThrowableException(throwable);\r\n          }\r\n      }\r\n\r\n      public final void sell() {\r\n          try {\r\n              this.h.invoke(this, m3, null);\r\n              return;\r\n          }\r\n          catch (Error | RuntimeException throwable) {\r\n              throw throwable;\r\n          }\r\n          catch (Throwable throwable) {\r\n              throw new UndeclaredThrowableException(throwable);\r\n          }\r\n      }\r\n  }\r\n  ```\r\n\r\n  \u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A\r\n\r\n  - \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002\r\n  - \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002\r\n\r\n- \u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F\r\n\r\n  \u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A\r\n\r\n  ```java\r\n  //\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B\r\n  public final class $Proxy0 extends Proxy implements SellTickets {\r\n      private static Method m3;\r\n\r\n      public $Proxy0(InvocationHandler invocationHandler) {\r\n          super(invocationHandler);\r\n      }\r\n\r\n      static {\r\n          m3 = Class.forName("com.itheima.proxy.dynamic.jdk.SellTickets").getMethod("sell", new Class[0]);\r\n      }\r\n\r\n      public final void sell() {\r\n          this.h.invoke(this, m3, null);\r\n      }\r\n  }\r\n\r\n  //Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B\r\n  public class Proxy implements java.io.Serializable {\r\n  	protected InvocationHandler h;\r\n\r\n  	protected Proxy(InvocationHandler h) {\r\n          this.h = h;\r\n      }\r\n  }\r\n\r\n  //\u4EE3\u7406\u5DE5\u5382\u7C7B\r\n  public class ProxyFactory {\r\n\r\n      private TrainStation station = new TrainStation();\r\n\r\n      public SellTickets getProxyObject() {\r\n          SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),\r\n                  station.getClass().getInterfaces(),\r\n                  new InvocationHandler() {\r\n\r\n                      public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n\r\n                          System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");\r\n                          Object result = method.invoke(station, args);\r\n                          return result;\r\n                      }\r\n                  });\r\n          return sellTickets;\r\n      }\r\n  }\r\n\r\n\r\n  //\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\r\n  public class Client {\r\n      public static void main(String[] args) {\r\n          //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\r\n          ProxyFactory factory = new ProxyFactory();\r\n          SellTickets proxyObject = factory.getProxyObject();\r\n          proxyObject.sell();\r\n      }\r\n  }\r\n  ```\r\n\r\n\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A\r\n\r\n    1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5\r\n    2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\r\n    3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5\r\n    4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5\r\n\r\n### 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406\r\n\r\n\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002\r\n\r\n\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002\r\n\r\nCGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002\r\n\r\nCGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A\r\n\r\n```xml\r\n<dependency>\r\n    <groupId>cglib</groupId>\r\n    <artifactId>cglib</artifactId>\r\n    <version>2.2.2</version>\r\n</dependency>\r\n```\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u706B\u8F66\u7AD9\r\npublic class TrainStation {\r\n\r\n    public void sell() {\r\n        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");\r\n    }\r\n}\r\n\r\n//\u4EE3\u7406\u5DE5\u5382\r\npublic class ProxyFactory implements MethodInterceptor {\r\n\r\n    private TrainStation target = new TrainStation();\r\n\r\n    public TrainStation getProxyObject() {\r\n        //\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570\r\n        Enhancer enhancer =new Enhancer();\r\n        //\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61\r\n        enhancer.setSuperclass(target.getClass());\r\n        //\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570\r\n        enhancer.setCallback(this);\r\n        //\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\r\n        TrainStation obj = (TrainStation) enhancer.create();\r\n        return obj;\r\n    }\r\n\r\n    /*\r\n        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A\r\n            o \uFF1A \u4EE3\u7406\u5BF9\u8C61\r\n            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B\r\n            args \uFF1A \u5B9E\u9645\u53C2\u6570\r\n            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B\r\n     */\r\n    public TrainStation intercept(Object o, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {\r\n        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");\r\n        TrainStation result = (TrainStation) methodProxy.invokeSuper(o, args);\r\n        return result;\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61\r\n        ProxyFactory factory = new ProxyFactory();\r\n        //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\r\n        TrainStation proxyObject = factory.getProxyObject();\r\n\r\n        proxyObject.sell();\r\n    }\r\n}\r\n```\r\n\r\n### 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4\r\n\r\n- jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406\r\n\r\n  \u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002\r\n\r\n  \u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002\r\n\r\n- \u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406\r\n\r\n  \u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002\r\n\r\n  \u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898\r\n\r\n### 5.1.7 \u4F18\u7F3A\u70B9\r\n\r\n**\u4F18\u70B9\uFF1A**\r\n\r\n- \u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B\r\n- \u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B\r\n- \u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B\r\n\r\n**\u7F3A\u70B9\uFF1A**\r\n\r\n- \u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B\r\n\r\n### 5.1.8 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406\r\n\r\n  \u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002\r\n\r\n- \u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406\r\n\r\n  \u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002\r\n\r\n- \u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406\r\n\r\n  \u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002\r\n\r\n## 5.2 \u9002\u914D\u5668\u6A21\u5F0F\r\n\r\n### 5.2.1 \u6982\u8FF0\r\n\r\n\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002\r\n\r\n![](\\img\\\u8F6C\u63A5\u5934.png)\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002\r\n\r\n\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002\r\n\r\n### 5.2.2 \u7ED3\u6784\r\n\r\n\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\r\n\r\n- \u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002\r\n- \u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002\r\n- \u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002\r\n\r\n### 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F\r\n\r\n\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002\r\n\r\n\u3010\u4F8B\u3011\u8BFB\u5361\u5668\r\n\r\n\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//SD\u5361\u7684\u63A5\u53E3\r\npublic interface SDCard {\r\n    //\u8BFB\u53D6SD\u5361\u65B9\u6CD5\r\n    String readSD();\r\n    //\u5199\u5165SD\u5361\u529F\u80FD\r\n    void writeSD(String msg);\r\n}\r\n\r\n//SD\u5361\u5B9E\u73B0\u7C7B\r\npublic class SDCardImpl implements SDCard {\r\n    public String readSD() {\r\n        String msg = "sd card read a msg :hello word SD";\r\n        return msg;\r\n    }\r\n\r\n    public void writeSD(String msg) {\r\n        System.out.println("sd card write msg : " + msg);\r\n    }\r\n}\r\n\r\n//\u7535\u8111\u7C7B\r\npublic class Computer {\r\n\r\n    public String readSD(SDCard sdCard) {\r\n        if(sdCard == null) {\r\n            throw new NullPointerException("sd card null");\r\n        }\r\n        return sdCard.readSD();\r\n    }\r\n}\r\n\r\n//TF\u5361\u63A5\u53E3\r\npublic interface TFCard {\r\n    //\u8BFB\u53D6TF\u5361\u65B9\u6CD5\r\n    String readTF();\r\n    //\u5199\u5165TF\u5361\u529F\u80FD\r\n    void writeTF(String msg);\r\n}\r\n\r\n//TF\u5361\u5B9E\u73B0\u7C7B\r\npublic class TFCardImpl implements TFCard {\r\n\r\n    public String readTF() {\r\n        String msg ="tf card read msg : hello word tf card";\r\n        return msg;\r\n    }\r\n\r\n    public void writeTF(String msg) {\r\n        System.out.println("tf card write a msg : " + msg);\r\n    }\r\n}\r\n\r\n//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09\r\npublic class SDAdapterTF extends TFCardImpl implements SDCard {\r\n\r\n    public String readSD() {\r\n        System.out.println("adapter read tf card ");\r\n        return readTF();\r\n    }\r\n\r\n    public void writeSD(String msg) {\r\n        System.out.println("adapter write tf card");\r\n        writeTF(msg);\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Computer computer = new Computer();\r\n        SDCard sdCard = new SDCardImpl();\r\n        System.out.println(computer.readSD(sdCard));\r\n\r\n        System.out.println("------------");\r\n\r\n        SDAdapterTF adapter = new SDAdapterTF();\r\n        System.out.println(computer.readSD(adapter));\r\n    }\r\n}\r\n```\r\n\r\n\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002\r\n\r\n### 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\r\n\r\n\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002\r\n\r\n\u3010\u4F8B\u3011\u8BFB\u5361\u5668\r\n\r\n\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="\\img\\\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002\r\n\r\n```java\r\n//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09\r\npublic class SDAdapterTF  implements SDCard {\r\n\r\n    private TFCard tfCard;\r\n\r\n    public SDAdapterTF(TFCard tfCard) {\r\n        this.tfCard = tfCard;\r\n    }\r\n\r\n    public String readSD() {\r\n        System.out.println("adapter read tf card ");\r\n        return tfCard.readTF();\r\n    }\r\n\r\n    public void writeSD(String msg) {\r\n        System.out.println("adapter write tf card");\r\n        tfCard.writeTF(msg);\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Computer computer = new Computer();\r\n        SDCard sdCard = new SDCardImpl();\r\n        System.out.println(computer.readSD(sdCard));\r\n\r\n        System.out.println("------------");\r\n\r\n        TFCard tfCard = new TFCardImpl();\r\n        SDAdapterTF adapter = new SDAdapterTF(tfCard);\r\n        System.out.println(computer.readSD(adapter));\r\n    }\r\n}\r\n```\r\n\r\n> \u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002\r\n\r\n### 5.2.5 \u5E94\u7528\u573A\u666F\r\n\r\n- \u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002\r\n- \u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002\r\n\r\n### 5.2.6 JDK \u6E90\u7801\u89E3\u6790\r\n\r\nReader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002\r\n\r\nInputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A\r\n\r\n```java\r\npublic int read() throws IOException {\r\n    return sd.read();\r\n}\r\n\r\npublic int read(char cbuf[], int offset, int length) throws IOException {\r\n    return sd.read(cbuf, offset, length);\r\n}\r\n```\r\n\r\n\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A\r\n\r\n![](\\img\\\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png)\r\n\r\n\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A\r\n\r\n- InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002\r\n- StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002\r\n\r\n<div color="red">\u7ED3\u8BBA\uFF1A</div>\r\n\r\n\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002\r\n\r\n## 5.3 \u88C5\u9970\u8005\u6A21\u5F0F\r\n\r\n### 5.3.1 \u6982\u8FF0\r\n\r\n\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002\r\n\r\n\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002\r\n\r\n<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png" style="zoom:80%;" />\r\n\r\n\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A\r\n\r\n- \u6269\u5C55\u6027\u4E0D\u597D\r\n\r\n  \u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002\r\n\r\n- \u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002\r\n\r\n### 5.3.2 \u7ED3\u6784\r\n\r\n\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002\r\n- \u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002\r\n- \u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002\r\n- \u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002\r\n\r\n### 5.3.3 \u6848\u4F8B\r\n\r\n\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F.png" style="zoom:75%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u5FEB\u9910\u63A5\u53E3\r\npublic abstract class FastFood {\r\n    private float price;\r\n    private String desc;\r\n\r\n    public FastFood() {\r\n    }\r\n\r\n    public FastFood(float price, String desc) {\r\n        this.price = price;\r\n        this.desc = desc;\r\n    }\r\n\r\n    public void setPrice(float price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public float getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public String getDesc() {\r\n        return desc;\r\n    }\r\n\r\n    public void setDesc(String desc) {\r\n        this.desc = desc;\r\n    }\r\n\r\n    public abstract float cost();  //\u83B7\u53D6\u4EF7\u683C\r\n}\r\n\r\n//\u7092\u996D\r\npublic class FriedRice extends FastFood {\r\n\r\n    public FriedRice() {\r\n        super(10, "\u7092\u996D");\r\n    }\r\n\r\n    public float cost() {\r\n        return getPrice();\r\n    }\r\n}\r\n\r\n//\u7092\u9762\r\npublic class FriedNoodles extends FastFood {\r\n\r\n    public FriedNoodles() {\r\n        super(12, "\u7092\u9762");\r\n    }\r\n\r\n    public float cost() {\r\n        return getPrice();\r\n    }\r\n}\r\n\r\n//\u914D\u6599\u7C7B\r\npublic abstract class Garnish extends FastFood {\r\n\r\n    private FastFood fastFood;\r\n\r\n    public FastFood getFastFood() {\r\n        return fastFood;\r\n    }\r\n\r\n    public void setFastFood(FastFood fastFood) {\r\n        this.fastFood = fastFood;\r\n    }\r\n\r\n    public Garnish(FastFood fastFood, float price, String desc) {\r\n        super(price,desc);\r\n        this.fastFood = fastFood;\r\n    }\r\n}\r\n\r\n//\u9E21\u86CB\u914D\u6599\r\npublic class Egg extends Garnish {\r\n\r\n    public Egg(FastFood fastFood) {\r\n        super(fastFood,1,"\u9E21\u86CB");\r\n    }\r\n\r\n    public float cost() {\r\n        return getPrice() + getFastFood().getPrice();\r\n    }\r\n\r\n    @Override\r\n    public String getDesc() {\r\n        return super.getDesc() + getFastFood().getDesc();\r\n    }\r\n}\r\n\r\n//\u57F9\u6839\u914D\u6599\r\npublic class Bacon extends Garnish {\r\n\r\n    public Bacon(FastFood fastFood) {\r\n\r\n        super(fastFood,2,"\u57F9\u6839");\r\n    }\r\n\r\n    @Override\r\n    public float cost() {\r\n        return getPrice() + getFastFood().getPrice();\r\n    }\r\n\r\n    @Override\r\n    public String getDesc() {\r\n        return super.getDesc() + getFastFood().getDesc();\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u70B9\u4E00\u4EFD\u7092\u996D\r\n        FastFood food = new FriedRice();\r\n        //\u82B1\u8D39\u7684\u4EF7\u683C\r\n        System.out.println(food.getDesc() + " " + food.cost() + "\u5143");\r\n\r\n        System.out.println("========");\r\n        //\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D\r\n        FastFood food1 = new FriedRice();\r\n\r\n        food1 = new Egg(food1);\r\n        //\u82B1\u8D39\u7684\u4EF7\u683C\r\n        System.out.println(food1.getDesc() + " " + food1.cost() + "\u5143");\r\n\r\n        System.out.println("========");\r\n        //\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762\r\n        FastFood food2 = new FriedNoodles();\r\n        food2 = new Bacon(food2);\r\n        //\u82B1\u8D39\u7684\u4EF7\u683C\r\n        System.out.println(food2.getDesc() + " " + food2.cost() + "\u5143");\r\n    }\r\n}\r\n```\r\n\r\n**\u597D\u5904\uFF1A**\r\n\r\n- \u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002\r\n\r\n- \u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002\r\n\r\n### 5.3.4 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002\r\n\r\n  \u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A\r\n\r\n  - \u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B\r\n  - \u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09\r\n\r\n- \u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002\r\n\r\n- \u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002\r\n\r\n### 5.3.5 JDK \u6E90\u7801\u89E3\u6790\r\n\r\nIO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002\r\n\r\n\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter\r\n\r\n```java\r\npublic class Demo {\r\n    public static void main(String[] args) throws Exception{\r\n        //\u521B\u5EFABufferedWriter\u5BF9\u8C61\r\n        //\u521B\u5EFAFileWriter\u5BF9\u8C61\r\n        FileWriter fw = new FileWriter("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt");\r\n        BufferedWriter bw = new BufferedWriter(fw);\r\n\r\n        //\u5199\u6570\u636E\r\n        bw.write("hello Buffered");\r\n\r\n        bw.close();\r\n    }\r\n}\r\n```\r\n\r\n\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A\r\n\r\n<img src="\\img\\\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png" style="zoom:80%;" />\r\n\r\n> <div color="red">\u5C0F\u7ED3\uFF1A</div>\r\n>\r\n> \u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002\r\n\r\n### 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B\r\n\r\n\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A\r\n\r\n- \u76F8\u540C\u70B9\uFF1A\r\n  - \u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3\r\n  - \u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61\r\n  - \u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5\r\n- \u4E0D\u540C\u70B9\uFF1A\r\n  - \u76EE\u7684\u4E0D\u540C\r\n    \u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61\r\n    \u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61\r\n  - \u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C\r\n    \u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012\r\n    \u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61\r\n\r\n## 5.4 \u6865\u63A5\u6A21\u5F0F\r\n\r\n### 5.4.1 \u6982\u8FF0\r\n\r\n\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A\r\n\r\n![](\\img\\image-20200207194617620.png)\r\n\r\n\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002\r\n\r\n\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002\r\n\r\n### 5.4.2 \u7ED3\u6784\r\n\r\n\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002\r\n- \u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002\r\n- \u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002\r\n- \u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002\r\n\r\n### 5.4.3 \u6848\u4F8B\r\n\r\n\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668\r\n\r\n\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="\\img\\\u6865\u63A5\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u89C6\u9891\u6587\u4EF6\r\npublic interface VideoFile {\r\n    void decode(String fileName);\r\n}\r\n\r\n//avi\u6587\u4EF6\r\npublic class AVIFile implements VideoFile {\r\n    public void decode(String fileName) {\r\n        System.out.println("avi\u89C6\u9891\u6587\u4EF6\uFF1A"+ fileName);\r\n    }\r\n}\r\n\r\n//rmvb\u6587\u4EF6\r\npublic class REVBBFile implements VideoFile {\r\n\r\n    public void decode(String fileName) {\r\n        System.out.println("rmvb\u6587\u4EF6\uFF1A" + fileName);\r\n    }\r\n}\r\n\r\n//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C\r\npublic abstract class OperatingSystemVersion {\r\n\r\n    protected VideoFile videoFile;\r\n\r\n    public OperatingSystemVersion(VideoFile videoFile) {\r\n        this.videoFile = videoFile;\r\n    }\r\n\r\n    public abstract void play(String fileName);\r\n}\r\n\r\n//Windows\u7248\u672C\r\npublic class Windows extends OperatingSystem {\r\n\r\n    public Windows(VideoFile videoFile) {\r\n        super(videoFile);\r\n    }\r\n\r\n    public void play(String fileName) {\r\n        videoFile.decode(fileName);\r\n    }\r\n}\r\n\r\n//mac\u7248\u672C\r\npublic class Mac extends OperatingSystemVersion {\r\n\r\n    public Mac(VideoFile videoFile) {\r\n        super(videoFile);\r\n    }\r\n\r\n    public void play(String fileName) {\r\n		videoFile.decode(fileName);\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        OperatingSystem os = new Windows(new AVIFile());\r\n        os.play("\u6218\u72FC3");\r\n    }\r\n}\r\n```\r\n\r\n**\u597D\u5904\uFF1A**\r\n\r\n- \u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002\r\n\r\n  \u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002\r\n\r\n- \u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E\r\n\r\n### 5.4.4 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002\r\n- \u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002\r\n- \u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002\r\n\r\n## 5.5 \u5916\u89C2\u6A21\u5F0F\r\n\r\n### 5.5.1 \u6982\u8FF0\r\n\r\n\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002\r\n\r\n\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528\r\n\r\n![](\\img\\\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg)\r\n\r\n### 5.5.2 \u7ED3\u6784\r\n\r\n\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\r\n\r\n- \u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002\r\n- \u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002\r\n\r\n### 5.5.3 \u6848\u4F8B\r\n\r\n\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236\r\n\r\n\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u5916\u89C2\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u706F\u7C7B\r\npublic class Light {\r\n    public void on() {\r\n        System.out.println("\u6253\u5F00\u4E86\u706F....");\r\n    }\r\n\r\n    public void off() {\r\n        System.out.println("\u5173\u95ED\u4E86\u706F....");\r\n    }\r\n}\r\n\r\n//\u7535\u89C6\u7C7B\r\npublic class TV {\r\n    public void on() {\r\n        System.out.println("\u6253\u5F00\u4E86\u7535\u89C6....");\r\n    }\r\n\r\n    public void off() {\r\n        System.out.println("\u5173\u95ED\u4E86\u7535\u89C6....");\r\n    }\r\n}\r\n\r\n//\u63A7\u5236\u7C7B\r\npublic class AirCondition {\r\n    public void on() {\r\n        System.out.println("\u6253\u5F00\u4E86\u7A7A\u8C03....");\r\n    }\r\n\r\n    public void off() {\r\n        System.out.println("\u5173\u95ED\u4E86\u7A7A\u8C03....");\r\n    }\r\n}\r\n\r\n//\u667A\u80FD\u97F3\u7BB1\r\npublic class SmartAppliancesFacade {\r\n\r\n    private Light light;\r\n    private TV tv;\r\n    private AirCondition airCondition;\r\n\r\n    public SmartAppliancesFacade() {\r\n        light = new Light();\r\n        tv = new TV();\r\n        airCondition = new AirCondition();\r\n    }\r\n\r\n    public void say(String message) {\r\n        if(message.contains("\u6253\u5F00")) {\r\n            on();\r\n        } else if(message.contains("\u5173\u95ED")) {\r\n            off();\r\n        } else {\r\n            System.out.println("\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01");\r\n        }\r\n    }\r\n\r\n    //\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668\r\n    private void on() {\r\n        System.out.println("\u8D77\u5E8A\u4E86");\r\n        light.on();\r\n        tv.on();\r\n        airCondition.on();\r\n    }\r\n\r\n    //\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668\r\n    private void off() {\r\n        System.out.println("\u7761\u89C9\u4E86");\r\n        light.off();\r\n        tv.off();\r\n        airCondition.off();\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61\r\n        SmartAppliancesFacade facade = new SmartAppliancesFacade();\r\n        //\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92\r\n        facade.say("\u6253\u5F00\u5BB6\u7535");\r\n        facade.say("\u5173\u95ED\u5BB6\u7535");\r\n    }\r\n}\r\n```\r\n\r\n**\u597D\u5904\uFF1A**\r\n\r\n- \u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002\r\n- \u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002\r\n\r\n**\u7F3A\u70B9\uFF1A**\r\n\r\n- \u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6\r\n\r\n### 5.5.4 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002\r\n- \u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002\r\n- \u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002\r\n\r\n### 5.5.5 \u6E90\u7801\u89E3\u6790\r\n\r\n\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002\r\n\r\n<img src="/img/image-20200207234545691.png" style="zoom:60%;" />\r\n\r\nRequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A\r\n\r\n<img src="/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:70%;" />\r\n\r\n**\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F**\r\n\r\n\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002\r\n\r\n## 5.6 \u7EC4\u5408\u6A21\u5F0F\r\n\r\n### 5.6.1 \u6982\u8FF0\r\n\r\n<img src="/img/image-20200208180417291.png" style="zoom:60%;" />\r\n\r\n\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002\r\n\r\n### 5.6.2 \u7ED3\u6784\r\n\r\n\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002\r\n- \u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002\r\n- \u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002\r\n\r\n### 5.6.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355\r\n\r\n\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002\r\n\r\n<img src="/img/image-20200208182322313.png" style="zoom:80%;" />\r\n\r\n\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A\r\n\r\n<img src="/img/\u7EC4\u5408\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n**\u4EE3\u7801\u5B9E\u73B0\uFF1A**\r\n\r\n\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002\r\n\r\n```java\r\n//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B\r\npublic abstract class MenuComponent {\r\n\r\n    protected String name;\r\n    protected int level;\r\n\r\n    //\u6DFB\u52A0\u83DC\u5355\r\n    public void add(MenuComponent menuComponent){\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n    //\u79FB\u9664\u83DC\u5355\r\n    public void remove(MenuComponent menuComponent){\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n    //\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355\r\n    public MenuComponent getChild(int i){\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n    //\u83B7\u53D6\u83DC\u5355\u540D\u79F0\r\n    public String getName(){\r\n        return name;\r\n    }\r\n\r\n    public void print(){\r\n        throw new UnsupportedOperationException();\r\n    }\r\n}\r\n```\r\n\r\n\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002\r\n\r\n```java\r\npublic class Menu extends MenuComponent {\r\n\r\n    private List<MenuComponent> menuComponentList;\r\n\r\n    public Menu(String name,int level){\r\n        this.level = level;\r\n        this.name = name;\r\n        menuComponentList = new ArrayList<MenuComponent>();\r\n    }\r\n\r\n    @Override\r\n    public void add(MenuComponent menuComponent) {\r\n        menuComponentList.add(menuComponent);\r\n    }\r\n\r\n    @Override\r\n    public void remove(MenuComponent menuComponent) {\r\n        menuComponentList.remove(menuComponent);\r\n    }\r\n\r\n    @Override\r\n    public MenuComponent getChild(int i) {\r\n        return menuComponentList.get(i);\r\n    }\r\n\r\n    @Override\r\n    public void print() {\r\n\r\n        for (int i = 1; i < level; i++) {\r\n            System.out.print("--");\r\n        }\r\n        System.out.println(name);\r\n        for (MenuComponent menuComponent : menuComponentList) {\r\n            menuComponent.print();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nMenu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002\r\n\r\n```java\r\npublic class MenuItem extends MenuComponent {\r\n\r\n    public MenuItem(String name,int level) {\r\n        this.name = name;\r\n        this.level = level;\r\n    }\r\n\r\n    @Override\r\n    public void print() {\r\n        for (int i = 1; i < level; i++) {\r\n            System.out.print("--");\r\n        }\r\n        System.out.println(name);\r\n    }\r\n}\r\n```\r\n\r\nMenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002\r\n\r\n### 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B\r\n\r\n\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002\r\n\r\n- \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\r\n\r\n  \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D `MenuComponent` \u58F0\u660E\u4E86 `add`\u3001`remove` \u3001`getChild` \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002\r\n\r\n  \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09\r\n\r\n- \u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\r\n\r\n  \u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 `Menu` \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002\r\n\r\n  <img src="/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png" style="zoom:80%;" />\r\n\r\n### 5.6.5 \u4F18\u70B9\r\n\r\n- \u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002\r\n- \u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002\r\n- \u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002\r\n- \u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002\r\n\r\n### 5.6.6 \u4F7F\u7528\u573A\u666F\r\n\r\n\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002\r\n\r\n## 5.7 \u4EAB\u5143\u6A21\u5F0F\r\n\r\n### 5.7.1 \u6982\u8FF0\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002\r\n\r\n### 5.7.2 \u7ED3\u6784\r\n\r\n\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A\r\n\r\n1. \u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002\r\n2. \u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002\r\n\r\n\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002\r\n- \u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002\r\n- \u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002\r\n- \u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002\r\n\r\n### 5.7.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757\r\n\r\n\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002\r\n\r\n<img src="/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg" style="zoom:60%;" />\r\n\r\n**\u5148\u6765\u770B\u7C7B\u56FE\uFF1A**\r\n\r\n<img src="/img/\u4EAB\u5143\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n**\u4EE3\u7801\u5982\u4E0B\uFF1A**\r\n\r\n\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002\r\n\r\n```java\r\npublic abstract class AbstractBox {\r\n    public abstract String getShape();\r\n\r\n    public void display(String color) {\r\n        System.out.println("\u65B9\u5757\u5F62\u72B6\uFF1A" + this.getShape() + " \u989C\u8272\uFF1A" + color);\r\n    }\r\n}\r\n```\r\n\r\n\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002\r\n\r\n```java\r\npublic class IBox extends AbstractBox {\r\n\r\n    @Override\r\n    public String getShape() {\r\n        return "I";\r\n    }\r\n}\r\n\r\npublic class LBox extends AbstractBox {\r\n\r\n    @Override\r\n    public String getShape() {\r\n        return "L";\r\n    }\r\n}\r\n\r\npublic class OBox extends AbstractBox {\r\n\r\n    @Override\r\n    public String getShape() {\r\n        return "O";\r\n    }\r\n}\r\n```\r\n\r\n\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002\r\n\r\n```java\r\npublic class BoxFactory {\r\n\r\n    private static HashMap<String, AbstractBox> map;\r\n\r\n    private BoxFactory() {\r\n        map = new HashMap<String, AbstractBox>();\r\n        AbstractBox iBox = new IBox();\r\n        AbstractBox lBox = new LBox();\r\n        AbstractBox oBox = new OBox();\r\n        map.put("I", iBox);\r\n        map.put("L", lBox);\r\n        map.put("O", oBox);\r\n    }\r\n\r\n    public static final BoxFactory getInstance() {\r\n        return SingletonHolder.INSTANCE;\r\n    }\r\n\r\n    private static class SingletonHolder {\r\n        private static final BoxFactory INSTANCE = new BoxFactory();\r\n    }\r\n\r\n    public AbstractBox getBox(String key) {\r\n        return map.get(key);\r\n    }\r\n}\r\n```\r\n\r\n### 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F\r\n\r\n**1\uFF0C\u4F18\u70B9**\r\n\r\n- \u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD\r\n- \u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742\r\n\r\n**3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A**\r\n\r\n- \u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002\r\n- \u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002\r\n- \u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002\r\n\r\n### 5.7.6 JDK \u6E90\u7801\u89E3\u6790\r\n\r\nInteger \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A\r\n\r\n```java\r\npublic class Demo {\r\n    public static void main(String[] args) {\r\n        Integer i1 = 127;\r\n        Integer i2 = 127;\r\n\r\n        System.out.println("i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (i1 == i2));\r\n\r\n        Integer i3 = 128;\r\n        Integer i4 = 128;\r\n\r\n        System.out.println("i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (i3 == i4));\r\n    }\r\n}\r\n```\r\n\r\n\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/image-20200208212930857.png" style="zoom:80%;" />\r\n\r\n\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic class Demo {\r\n    public static void main(String[] args) {\r\n        Integer i1 = Integer.valueOf((int)127);\r\n        Integer i2 Integer.valueOf((int)127);\r\n        System.out.println((String)new StringBuilder().append((String)"i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f").append((boolean)(i1 == i2)).toString());\r\n        Integer i3 = Integer.valueOf((int)128);\r\n        Integer i4 = Integer.valueOf((int)128);\r\n        System.out.println((String)new StringBuilder().append((String)"i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f").append((boolean)(i3 == i4)).toString());\r\n    }\r\n}\r\n```\r\n\r\n\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F `valueOf()` \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF\r\n\r\n```java\r\npublic final class Integer extends Number implements Comparable<Integer> {\r\n\r\n	public static Integer valueOf(int i) {\r\n        if (i >= IntegerCache.low && i <= IntegerCache.high)\r\n            return IntegerCache.cache[i + (-IntegerCache.low)];\r\n        return new Integer(i);\r\n    }\r\n\r\n    private static class IntegerCache {\r\n        static final int low = -128;\r\n        static final int high;\r\n        static final Integer cache[];\r\n\r\n        static {\r\n            int h = 127;\r\n            String integerCacheHighPropValue =\r\n                sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");\r\n            if (integerCacheHighPropValue != null) {\r\n                try {\r\n                    int i = parseInt(integerCacheHighPropValue);\r\n                    i = Math.max(i, 127);\r\n                    // Maximum array size is Integer.MAX_VALUE\r\n                    h = Math.min(i, Integer.MAX_VALUE - (-low) -1);\r\n                } catch( NumberFormatException nfe) {\r\n                }\r\n            }\r\n            high = h;\r\n            cache = new Integer[(high - low) + 1];\r\n            int j = low;\r\n            for(int k = 0; k < cache.length; k++)\r\n                cache[k] = new Integer(j++);\r\n            // range [-128, 127] must be interned (JLS7 5.1.7)\r\n            assert IntegerCache.high >= 127;\r\n        }\r\n\r\n        private IntegerCache() {}\r\n    }\r\n}\r\n```\r\n\r\n\u53EF\u4EE5\u770B\u5230 `Integer` \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 `-128 ~ 127` \u4E4B\u95F4\u6570\u7684 `Integer` \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 `valueOf` \u65F6\u5982\u679C\u53C2\u6570\u5728 `-128 ~ 127` \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 `Integer` \u5BF9\u8C61\u3002\r\n\r\n# 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F\r\n\r\n\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002\r\n\r\n\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002\r\n\r\n\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A\r\n\r\n- \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\r\n- \u7B56\u7565\u6A21\u5F0F\r\n- \u547D\u4EE4\u6A21\u5F0F\r\n- \u804C\u8D23\u94FE\u6A21\u5F0F\r\n- \u72B6\u6001\u6A21\u5F0F\r\n- \u89C2\u5BDF\u8005\u6A21\u5F0F\r\n- \u4E2D\u4ECB\u8005\u6A21\u5F0F\r\n- \u8FED\u4EE3\u5668\u6A21\u5F0F\r\n- \u8BBF\u95EE\u8005\u6A21\u5F0F\r\n- \u5907\u5FD8\u5F55\u6A21\u5F0F\r\n- \u89E3\u91CA\u5668\u6A21\u5F0F\r\n\r\n\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002\r\n\r\n## 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\r\n\r\n### 6.1.1 \u6982\u8FF0\r\n\r\n\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002\r\n\r\n\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002\r\n\r\n### 6.1.2 \u7ED3\u6784\r\n\r\n\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002\r\n\r\n  - \u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002\r\n\r\n  - \u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A\r\n\r\n    - \u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002\r\n\r\n    - \u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002\r\n\r\n    - \u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002\r\n\r\n      \u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002\r\n\r\n- \u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002\r\n\r\n### 6.1.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u7092\u83DC\r\n\r\n\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic abstract class AbstractClass {\r\n\r\n    public final void cookProcess() {\r\n        //\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9\r\n        this.pourOil();\r\n        //\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\r\n        this.heatOil();\r\n        //\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\r\n        this.pourVegetable();\r\n        //\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\r\n        this.pourSauce();\r\n        //\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\r\n        this.fry();\r\n    }\r\n\r\n    public void pourOil() {\r\n        System.out.println("\u5012\u6CB9");\r\n    }\r\n\r\n    //\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0\r\n    public void heatOil() {\r\n        System.out.println("\u70ED\u6CB9");\r\n    }\r\n\r\n    //\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09\r\n    public abstract void pourVegetable();\r\n\r\n    //\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837\r\n    public abstract void pourSauce();\r\n\r\n\r\n    //\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0\r\n    public void fry(){\r\n        System.out.println("\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A");\r\n    }\r\n}\r\n\r\npublic class ConcreteClass_BaoCai extends AbstractClass {\r\n\r\n    @Override\r\n    public void pourVegetable() {\r\n        System.out.println("\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC");\r\n    }\r\n\r\n    @Override\r\n    public void pourSauce() {\r\n        System.out.println("\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912");\r\n    }\r\n}\r\n\r\npublic class ConcreteClass_CaiXin extends AbstractClass {\r\n    @Override\r\n    public void pourVegetable() {\r\n        System.out.println("\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3");\r\n    }\r\n\r\n    @Override\r\n    public void pourSauce() {\r\n        System.out.println("\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9");\r\n    }\r\n}\r\n\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u7092\u624B\u6495\u5305\u83DC\r\n        ConcreteClass_BaoCai baoCai = new ConcreteClass_BaoCai();\r\n        baoCai.cookProcess();\r\n\r\n        //\u7092\u849C\u84C9\u83DC\u5FC3\r\n        ConcreteClass_CaiXin caiXin = new ConcreteClass_CaiXin();\r\n        caiXin.cookProcess();\r\n    }\r\n}\r\n```\r\n\r\n> \u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002\r\n\r\n### 6.1.3 \u4F18\u7F3A\u70B9\r\n\r\n**\u4F18\u70B9\uFF1A**\r\n\r\n- \u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027\r\n\r\n  \u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002\r\n\r\n- \u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236\r\n\r\n  \u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002\r\n\r\n**\u7F3A\u70B9\uFF1A**\r\n\r\n- \u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002\r\n- \u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002\r\n\r\n### 6.1.4 \u9002\u7528\u573A\u666F\r\n\r\n- \u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002\r\n- \u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002\r\n\r\n### 6.1.5 JDK \u6E90\u7801\u89E3\u6790\r\n\r\nInputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A `read()` \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic abstract class InputStream implements Closeable {\r\n    //\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199\r\n    public abstract int read() throws IOException;\r\n\r\n    public int read(byte b[]) throws IOException {\r\n        return read(b, 0, b.length);\r\n    }\r\n\r\n    public int read(byte b[], int off, int len) throws IOException {\r\n        if (b == null) {\r\n            throw new NullPointerException();\r\n        } else if (off < 0 || len < 0 || len > b.length - off) {\r\n            throw new IndexOutOfBoundsException();\r\n        } else if (len == 0) {\r\n            return 0;\r\n        }\r\n\r\n        int c = read(); //\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\r\n        if (c == -1) {\r\n            return -1;\r\n        }\r\n        b[off] = (byte)c;\r\n\r\n        int i = 1;\r\n        try {\r\n            for (; i < len ; i++) {\r\n                c = read();\r\n                if (c == -1) {\r\n                    break;\r\n                }\r\n                b[off + i] = (byte)c;\r\n            }\r\n        } catch (IOException ee) {\r\n        }\r\n        return i;\r\n    }\r\n}\r\n```\r\n\r\n\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 `read()` \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C `read(byte b[])` \u65B9\u6CD5\u8C03\u7528\u4E86 `read(byte b[], int off, int len)` \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002\r\n\r\n\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 `read()` \u65B9\u6CD5\u3002\r\n\r\n\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002\r\n\r\n## 6.2 \u7B56\u7565\u6A21\u5F0F\r\n\r\n### 6.2.1 \u6982\u8FF0\r\n\r\n\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002\r\n\r\n<img src="/img/image-20200210143039168.png" style="zoom:80%;" />\r\n\r\n\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002\r\n\r\n<img src="/img/image-20200210144457478.png" style="zoom:70%;" />\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002\r\n\r\n### 6.2.2 \u7ED3\u6784\r\n\r\n\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A\r\n\r\n- \u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002\r\n- \u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002\r\n- \u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002\r\n\r\n### 6.2.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8\r\n\r\n\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u7B56\u7565\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3\r\n\r\n```java\r\npublic interface Strategy {\r\n    void show();\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8\r\n\r\n```java\r\n//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A\r\npublic class StrategyA implements Strategy {\r\n\r\n    public void show() {\r\n        System.out.println("\u4E70\u4E00\u9001\u4E00");\r\n    }\r\n}\r\n\r\n//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B\r\npublic class StrategyB implements Strategy {\r\n\r\n    public void show() {\r\n        System.out.println("\u6EE1200\u5143\u51CF50\u5143");\r\n    }\r\n}\r\n\r\n//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C\r\npublic class StrategyC implements Strategy {\r\n\r\n    public void show() {\r\n        System.out.println("\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1");\r\n    }\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458\r\n\r\n```java\r\npublic class SalesMan {\r\n    //\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528\r\n    private Strategy strategy;\r\n\r\n    public SalesMan(Strategy strategy) {\r\n        this.strategy = strategy;\r\n    }\r\n\r\n    //\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8\r\n    public void salesManShow(){\r\n        strategy.show();\r\n    }\r\n}\r\n```\r\n\r\n### 6.2.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\r\n\r\n  \u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002\r\n\r\n- \u6613\u4E8E\u6269\u5C55\r\n\r\n  \u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C\r\n\r\n- \u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n- \u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002\r\n- \u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002\r\n\r\n### 6.2.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002\r\n- \u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002\r\n- \u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002\r\n- \u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002\r\n- \u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002\r\n\r\n### 6.2.6 JDK \u6E90\u7801\u89E3\u6790\r\n\r\n`Comparator` \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A `sort()` \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic class Arrays{\r\n    public static <T> void sort(T[] a, Comparator<? super T> c) {\r\n        if (c == null) {\r\n            sort(a);\r\n        } else {\r\n            if (LegacyMergeSort.userRequested)\r\n                legacyMergeSort(a, c);\r\n            else\r\n                TimSort.sort(a, 0, a.length, c, null, 0, 0);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nArrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002\r\n\r\n```java\r\npublic class demo {\r\n    public static void main(String[] args) {\r\n\r\n        Integer[] data = {12, 2, 3, 2, 4, 5, 1};\r\n        // \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F\r\n        Arrays.sort(data, new Comparator<Integer>() {\r\n            public int compare(Integer o1, Integer o2) {\r\n                return o2 - o1;\r\n            }\r\n        });\r\n        System.out.println(Arrays.toString(data)); //[12, 5, 4, 3, 2, 2, 1]\r\n    }\r\n}\r\n```\r\n\r\n\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 `compare()` \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 `sort()` \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\nclass TimSort<T> {\r\n    static <T> void sort(T[] a, int lo, int hi, Comparator<? super T> c,\r\n                         T[] work, int workBase, int workLen) {\r\n        assert c != null && a != null && lo >= 0 && lo <= hi && hi <= a.length;\r\n\r\n        int nRemaining  = hi - lo;\r\n        if (nRemaining < 2)\r\n            return;  // Arrays of size 0 and 1 are always sorted\r\n\r\n        // If array is small, do a "mini-TimSort" with no merges\r\n        if (nRemaining < MIN_MERGE) {\r\n            int initRunLen = countRunAndMakeAscending(a, lo, hi, c);\r\n            binarySort(a, lo, hi, lo + initRunLen, c);\r\n            return;\r\n        }\r\n        ...\r\n    }\r\n\r\n    private static <T> int countRunAndMakeAscending(T[] a, int lo, int hi,Comparator<? super T> c) {\r\n        assert lo < hi;\r\n        int runHi = lo + 1;\r\n        if (runHi == hi)\r\n            return 1;\r\n\r\n        // Find end of run, and reverse range if descending\r\n        if (c.compare(a[runHi++], a[lo]) < 0) { // Descending\r\n            while (runHi < hi && c.compare(a[runHi], a[runHi - 1]) < 0)\r\n                runHi++;\r\n            reverseRange(a, lo, runHi);\r\n        } else {                              // Ascending\r\n            while (runHi < hi && c.compare(a[runHi], a[runHi - 1]) >= 0)\r\n                runHi++;\r\n        }\r\n\r\n        return runHi - lo;\r\n    }\r\n}\r\n```\r\n\r\n\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 `countRunAndMakeAscending()` \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002\r\n\r\n## 6.3 \u547D\u4EE4\u6A21\u5F0F\r\n\r\n### 6.3.1 \u6982\u8FF0\r\n\r\n\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002\r\n\r\n<img src="/img/image-20200211130313251.png" style="zoom:60%;" />\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002\r\n\r\n### 6.3.2 \u7ED3\u6784\r\n\r\n\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002\r\n- \u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002\r\n- \u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002\r\n- \u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002\r\n\r\n### 6.3.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002\r\n\r\n\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002\r\n\r\n\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002\r\n\r\n\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u547D\u4EE4\u6A21\u5F0F.png" style="zoom:75%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic interface Command {\r\n    void execute();//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5\r\n}\r\n\r\npublic class OrderCommand implements Command {\r\n\r\n    //\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61\r\n    private SeniorChef receiver;\r\n    private Order order;\r\n\r\n    public OrderCommand(SeniorChef receiver, Order order){\r\n        this.receiver = receiver;\r\n        this.order = order;\r\n    }\r\n\r\n    public void execute()  {\r\n        System.out.println(order.getDiningTable() + "\u684C\u7684\u8BA2\u5355\uFF1A");\r\n        Set<String> keys = order.getFoodDic().keySet();\r\n        for (String key : keys) {\r\n            receiver.makeFood(order.getFoodDic().get(key),key);\r\n        }\r\n\r\n        try {\r\n            Thread.sleep(100);//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n\r\n        System.out.println(order.getDiningTable() + "\u684C\u7684\u996D\u5F04\u597D\u4E86");\r\n    }\r\n}\r\n\r\npublic class Order {\r\n    // \u9910\u684C\u53F7\u7801\r\n    private int diningTable;\r\n\r\n    // \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570\r\n    private Map<String, Integer> foodDic = new HashMap<String, Integer>();\r\n\r\n    public int getDiningTable() {\r\n        return diningTable;\r\n    }\r\n\r\n    public void setDiningTable(int diningTable) {\r\n        this.diningTable = diningTable;\r\n    }\r\n\r\n    public Map<String, Integer> getFoodDic() {\r\n        return foodDic;\r\n    }\r\n\r\n    public void setFoodDic(String name, int num) {\r\n        foodDic.put(name,num);\r\n    }\r\n}\r\n\r\n// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver\r\npublic class SeniorChef {\r\n\r\n    public void makeFood(int num,String foodName) {\r\n        System.out.println(num + "\u4EFD" + foodName);\r\n    }\r\n}\r\n\r\npublic class Waitor {\r\n\r\n    private ArrayList<Command> commands;//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\r\n\r\n    public Waitor() {\r\n        commands = new ArrayList();\r\n    }\r\n\r\n    public void setCommand(Command cmd){\r\n        commands.add(cmd);\r\n    }\r\n\r\n    // \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C\r\n    public void orderUp() {\r\n        System.out.println("\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86.......");\r\n        for (int i = 0; i < commands.size(); i++) {\r\n            Command cmd = commands.get(i);\r\n            if (cmd != null) {\r\n                cmd.execute();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u521B\u5EFA2\u4E2Aorder\r\n        Order order1 = new Order();\r\n        order1.setDiningTable(1);\r\n        order1.getFoodDic().put("\u897F\u7EA2\u67FF\u9E21\u86CB\u9762",1);\r\n        order1.getFoodDic().put("\u5C0F\u676F\u53EF\u4E50",2);\r\n\r\n        Order order2 = new Order();\r\n        order2.setDiningTable(3);\r\n        order2.getFoodDic().put("\u5C16\u6912\u8089\u4E1D\u76D6\u996D",1);\r\n        order2.getFoodDic().put("\u5C0F\u676F\u96EA\u78A7",1);\r\n\r\n        //\u521B\u5EFA\u63A5\u6536\u8005\r\n        SeniorChef receiver=new SeniorChef();\r\n        //\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61\r\n        OrderCommand cmd1 = new OrderCommand(receiver, order1);\r\n        OrderCommand cmd2 = new OrderCommand(receiver, order2);\r\n        //\u521B\u5EFA\u8C03\u7528\u8005 waitor\r\n        Waitor invoker = new Waitor();\r\n        invoker.setCommand(cmd1);\r\n        invoker.setCommand(cmd2);\r\n\r\n        //\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86\r\n        invoker.orderUp();\r\n    }\r\n}\r\n```\r\n\r\n### 6.3.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002\r\n- \u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002\r\n- \u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002\r\n- \u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n- \u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002\r\n- \u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002\r\n\r\n### 6.3.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002\r\n- \u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002\r\n- \u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002\r\n\r\n### 6.3.6 JDK \u6E90\u7801\u89E3\u6790\r\n\r\nRunable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5\r\n\r\n```java\r\n//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)\r\npublic interface Runnable {\r\n	public abstract void run();\r\n}\r\n\r\n//\u8C03\u7528\u8005\r\npublic class Thread implements Runnable {\r\n    private Runnable target;\r\n\r\n    public synchronized void start() {\r\n        if (threadStatus != 0)\r\n            throw new IllegalThreadStateException();\r\n\r\n        group.add(this);\r\n\r\n        boolean started = false;\r\n        try {\r\n            start0();\r\n            started = true;\r\n        } finally {\r\n            try {\r\n                if (!started) {\r\n                    group.threadStartFailed(this);\r\n                }\r\n            } catch (Throwable ignore) {\r\n            }\r\n        }\r\n    }\r\n\r\n    private native void start0();\r\n}\r\n```\r\n\r\n\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002\r\n\r\n```java\r\n/**\r\n * jdk Runnable \u547D\u4EE4\u6A21\u5F0F\r\n *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53\r\n */\r\npublic class TurnOffThread implements Runnable{\r\n     private Receiver receiver;\r\n\r\n     public TurnOffThread(Receiver receiver) {\r\n     	this.receiver = receiver;\r\n     }\r\n     public void run() {\r\n     	receiver.turnOFF();\r\n     }\r\n}\r\n```\r\n\r\n```java\r\n/**\r\n * \u6D4B\u8BD5\u7C7B\r\n */\r\npublic class Demo {\r\n     public static void main(String[] args) {\r\n         Receiver receiver = new Receiver();\r\n         TurnOffThread turnOffThread = new TurnOffThread(receiver);\r\n         Thread thread = new Thread(turnOffThread);\r\n         thread.start();\r\n     }\r\n}\r\n```\r\n\r\n## 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F\r\n\r\n### 6.4.1 \u6982\u8FF0\r\n\r\n\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002\r\n\r\n### 6.4.2 \u7ED3\u6784\r\n\r\n\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:\r\n\r\n- \u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002\r\n- \u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002\r\n- \u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002\r\n\r\n### 6.4.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u8BF7\u5047\u6761\r\npublic class LeaveRequest {\r\n    private String name;//\u59D3\u540D\r\n    private int num;//\u8BF7\u5047\u5929\u6570\r\n    private String content;//\u8BF7\u5047\u5185\u5BB9\r\n\r\n    public LeaveRequest(String name, int num, String content) {\r\n        this.name = name;\r\n        this.num = num;\r\n        this.content = content;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public int getNum() {\r\n        return num;\r\n    }\r\n\r\n    public String getContent() {\r\n        return content;\r\n    }\r\n}\r\n\r\n//\u5904\u7406\u8005\u62BD\u8C61\u7C7B\r\npublic abstract class Handler {\r\n    protected final static int NUM_ONE = 1;\r\n    protected final static int NUM_THREE = 3;\r\n    protected final static int NUM_SEVEN = 7;\r\n\r\n    //\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4\r\n    private int numStart;\r\n    private int numEnd;\r\n\r\n    //\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC\r\n    private Handler nextHandler;\r\n\r\n    //\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876\r\n    public Handler(int numStart) {\r\n        this.numStart = numStart;\r\n    }\r\n\r\n    //\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4\r\n    public Handler(int numStart, int numEnd) {\r\n        this.numStart = numStart;\r\n        this.numEnd = numEnd;\r\n    }\r\n\r\n    //\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\r\n    public void setNextHandler(Handler nextHandler){\r\n        this.nextHandler = nextHandler;\r\n    }\r\n\r\n    //\u63D0\u4EA4\u8BF7\u5047\u6761\r\n    public final void submit(LeaveRequest leave){\r\n        if(0 == this.numStart){\r\n            return;\r\n        }\r\n\r\n        //\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42\r\n        if(leave.getNum() >= this.numStart){\r\n            this.handleLeave(leave);\r\n\r\n            //\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4\r\n            if(null != this.nextHandler && leave.getNum() > numEnd){\r\n                this.nextHandler.submit(leave);//\u7EE7\u7EED\u63D0\u4EA4\r\n            } else {\r\n                System.out.println("\u6D41\u7A0B\u7ED3\u675F");\r\n            }\r\n        }\r\n    }\r\n\r\n    //\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5\r\n    protected abstract void handleLeave(LeaveRequest leave);\r\n}\r\n\r\n//\u5C0F\u7EC4\u957F\r\npublic class GroupLeader extends Handler {\r\n    public GroupLeader() {\r\n        //\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047\r\n        super(Handler.NUM_ONE, Handler.NUM_THREE);\r\n    }\r\n\r\n    @Override\r\n    protected void handleLeave(LeaveRequest leave) {\r\n        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");\r\n        System.out.println("\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002");\r\n    }\r\n}\r\n\r\n//\u90E8\u95E8\u7ECF\u7406\r\npublic class Manager extends Handler {\r\n    public Manager() {\r\n        //\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047\r\n        super(Handler.NUM_THREE, Handler.NUM_SEVEN);\r\n    }\r\n\r\n    @Override\r\n    protected void handleLeave(LeaveRequest leave) {\r\n        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");\r\n        System.out.println("\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002");\r\n    }\r\n}\r\n\r\n//\u603B\u7ECF\u7406\r\npublic class GeneralManager extends Handler {\r\n    public GeneralManager() {\r\n        //\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047\r\n        super(Handler.NUM_SEVEN);\r\n    }\r\n\r\n    @Override\r\n    protected void handleLeave(LeaveRequest leave) {\r\n        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");\r\n        System.out.println("\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002");\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u8BF7\u5047\u6761\u6765\u4E00\u5F20\r\n        LeaveRequest leave = new LeaveRequest("\u5C0F\u82B1",5,"\u8EAB\u4F53\u4E0D\u9002");\r\n\r\n        //\u5404\u4F4D\u9886\u5BFC\r\n        GroupLeader groupLeader = new GroupLeader();\r\n        Manager manager = new Manager();\r\n        GeneralManager generalManager = new GeneralManager();\r\n\r\n        groupLeader.setNextHandler(manager);//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406\r\n        manager.setNextHandler(generalManager);//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406\r\n        //\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002\r\n\r\n        //\u63D0\u4EA4\u7533\u8BF7\r\n        groupLeader.submit(leave);\r\n    }\r\n}\r\n```\r\n\r\n### 6.4.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\r\n\r\n  \u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002\r\n\r\n- \u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027\r\n\r\n  \u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002\r\n\r\n- \u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027\r\n\r\n  \u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002\r\n\r\n- \u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5\r\n\r\n  \u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002\r\n\r\n- \u8D23\u4EFB\u5206\u62C5\r\n\r\n  \u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n- \u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002\r\n- \u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002\r\n- \u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002\r\n\r\n### 6.4.5 \u6E90\u7801\u89E3\u6790\r\n\r\n\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:\r\n\r\n- \u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response\r\n\r\n  ```java\r\n  public interface Request{\r\n\r\n  }\r\n\r\n  public interface Response{\r\n\r\n  }\r\n  ```\r\n\r\n- \u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter\r\n\r\n  ```java\r\n   public interface Filter {\r\n   	public void doFilter(Request req,Response res,FilterChain c);\r\n   }\r\n  ```\r\n\r\n- \u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668\r\n\r\n  ```java\r\n  public class FirstFilter implements Filter {\r\n      @Override\r\n      public void doFilter(Request request, Response response, FilterChain chain) {\r\n\r\n          System.out.println("\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406");\r\n\r\n          // \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response\r\n          chain.doFilter(request, response);\r\n\r\n          System.out.println("\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406");\r\n      }\r\n  }\r\n\r\n  public class SecondFilter  implements Filter {\r\n      @Override\r\n      public void doFilter(Request request, Response response, FilterChain chain) {\r\n\r\n          System.out.println("\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406");\r\n\r\n          // \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response\r\n          chain.doFilter(request, response);\r\n\r\n          System.out.println("\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406");\r\n      }\r\n  }\r\n  ```\r\n\r\n- \u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain\r\n\r\n  ```java\r\n  public class FilterChain {\r\n\r\n      private List<Filter> filters = new ArrayList<Filter>();\r\n\r\n      private int index = 0;\r\n\r\n      // \u94FE\u5F0F\u8C03\u7528\r\n      public FilterChain addFilter(Filter filter) {\r\n          this.filters.add(filter);\r\n          return this;\r\n      }\r\n\r\n      public void doFilter(Request request, Response response) {\r\n          if (index == filters.size()) {\r\n              return;\r\n          }\r\n          Filter filter = filters.get(index);\r\n          index++;\r\n          filter.doFilter(request, response, this);\r\n      }\r\n  }\r\n  ```\r\n\r\n- \u6D4B\u8BD5\u7C7B\r\n\r\n  ```java\r\n  public class Client {\r\n      public static void main(String[] args) {\r\n          Request  req = null;\r\n          Response res = null ;\r\n\r\n          FilterChain filterChain = new FilterChain();\r\n          filterChain.addFilter(new FirstFilter()).addFilter(new SecondFilter());\r\n          filterChain.doFilter(req,res);\r\n      }\r\n  }\r\n  ```\r\n\r\n## 6.5 \u72B6\u6001\u6A21\u5F0F\r\n\r\n### 6.5.1 \u6982\u8FF0\r\n\r\n\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u72B6\u6001\u6A21\u5F0F\u524D.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\npublic interface ILift {\r\n    //\u7535\u68AF\u76844\u4E2A\u72B6\u6001\r\n    //\u5F00\u95E8\u72B6\u6001\r\n    public final static int OPENING_STATE = 1;\r\n    //\u5173\u95E8\u72B6\u6001\r\n    public final static int CLOSING_STATE = 2;\r\n    //\u8FD0\u884C\u72B6\u6001\r\n    public final static int RUNNING_STATE = 3;\r\n    //\u505C\u6B62\u72B6\u6001\r\n    public final static int STOPPING_STATE = 4;\r\n\r\n    //\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001\r\n    public void setState(int state);\r\n\r\n    //\u7535\u68AF\u7684\u52A8\u4F5C\r\n    public void open();\r\n    public void close();\r\n    public void run();\r\n    public void stop();\r\n}\r\n\r\npublic class Lift implements ILift {\r\n    private int state;\r\n\r\n    @Override\r\n    public void setState(int state) {\r\n        this.state = state;\r\n    }\r\n\r\n    //\u6267\u884C\u5173\u95E8\u52A8\u4F5C\r\n    @Override\r\n    public void close() {\r\n        switch (this.state) {\r\n            case OPENING_STATE:\r\n                System.out.println("\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002");//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B\r\n                this.setState(CLOSING_STATE);//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86\r\n                break;\r\n            case CLOSING_STATE:\r\n                //do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8\r\n                break;\r\n            case RUNNING_STATE:\r\n                //do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8\r\n                break;\r\n            case STOPPING_STATE:\r\n                //do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8\r\n                break;\r\n        }\r\n    }\r\n\r\n    //\u6267\u884C\u5F00\u95E8\u52A8\u4F5C\r\n    @Override\r\n    public void open() {\r\n        switch (this.state) {\r\n            case OPENING_STATE://\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86\r\n                //do nothing\r\n                break;\r\n            case CLOSING_STATE://\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00:\r\n                System.out.println("\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002");\r\n                this.setState(OPENING_STATE);\r\n                break;\r\n            case RUNNING_STATE:\r\n                //do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8\r\n                break;\r\n            case STOPPING_STATE:\r\n                System.out.println("\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002");//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86\r\n                this.setState(OPENING_STATE);\r\n                break;\r\n        }\r\n    }\r\n\r\n    //\u6267\u884C\u8FD0\u884C\u52A8\u4F5C\r\n    @Override\r\n    public void run() {\r\n        switch (this.state) {\r\n            case OPENING_STATE://\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70\r\n                //do nothing\r\n                break;\r\n            case CLOSING_STATE://\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86\r\n                System.out.println("\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002");\r\n                this.setState(RUNNING_STATE);//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001\r\n                break;\r\n            case RUNNING_STATE:\r\n                //do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86\r\n                break;\r\n            case STOPPING_STATE:\r\n                System.out.println("\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002");\r\n                this.setState(RUNNING_STATE);\r\n                break;\r\n        }\r\n    }\r\n\r\n    //\u6267\u884C\u505C\u6B62\u52A8\u4F5C\r\n    @Override\r\n    public void stop() {\r\n        switch (this.state) {\r\n            case OPENING_STATE: //\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)\r\n                //do nothing\r\n                break;\r\n            case CLOSING_STATE://\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62\r\n                System.out.println("\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002");\r\n                this.setState(STOPPING_STATE);\r\n                break;\r\n            case RUNNING_STATE://\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86\r\n                System.out.println("\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002");\r\n                this.setState(STOPPING_STATE);\r\n                break;\r\n            case STOPPING_STATE:\r\n                //do nothing\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Lift lift = new Lift();\r\n        lift.setState(ILift.STOPPING_STATE);//\u7535\u68AF\u662F\u505C\u6B62\u7684\r\n        lift.open();//\u5F00\u95E8\r\n        lift.close();//\u5173\u95E8\r\n        lift.run();//\u8FD0\u884C\r\n        lift.stop();//\u505C\u6B62\r\n    }\r\n}\r\n```\r\n\r\n\u95EE\u9898\u5206\u6790\uFF1A\r\n\r\n- \u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002\r\n- \u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002\r\n\r\n### 6.5.2 \u7ED3\u6784\r\n\r\n\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002\r\n\r\n- \u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002\r\n- \u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002\r\n- \u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002\r\n\r\n### 6.5.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u72B6\u6001\u6A21\u5F0F.png" style="zoom:70%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u62BD\u8C61\u72B6\u6001\u7C7B\r\npublic abstract class LiftState {\r\n    //\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316\r\n    protected Context context;\r\n\r\n    public void setContext(Context context) {\r\n        this.context = context;\r\n    }\r\n\r\n    //\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C\r\n    public abstract void open();\r\n\r\n    //\u7535\u68AF\u5173\u95E8\u52A8\u4F5C\r\n    public abstract void close();\r\n\r\n    //\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C\r\n    public abstract void run();\r\n\r\n    //\u7535\u68AF\u505C\u6B62\u52A8\u4F5C\r\n    public abstract void stop();\r\n}\r\n\r\n//\u5F00\u542F\u72B6\u6001\r\npublic class OpenningState extends LiftState {\r\n\r\n    //\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD\r\n    @Override\r\n    public void open() {\r\n        System.out.println("\u7535\u68AF\u95E8\u5F00\u542F...");\r\n    }\r\n\r\n    @Override\r\n    public void close() {\r\n        //\u72B6\u6001\u4FEE\u6539\r\n        super.context.setLiftState(Context.closeingState);\r\n        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C\r\n        super.context.getLiftState().close();\r\n    }\r\n\r\n    //\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A\r\n    @Override\r\n    public void run() {\r\n        //do nothing\r\n    }\r\n\r\n    //\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86\r\n    @Override\r\n    public void stop() {\r\n        //do nothing\r\n    }\r\n}\r\n\r\n//\u8FD0\u884C\u72B6\u6001\r\npublic class RunningState extends LiftState {\r\n\r\n    //\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684\r\n    @Override\r\n    public void open() {\r\n        //do nothing\r\n    }\r\n\r\n    //\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86\r\n    @Override\r\n    public void close() {//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C\r\n        //do nothing\r\n    }\r\n\r\n    //\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5\r\n    @Override\r\n    public void run() {\r\n        System.out.println("\u7535\u68AF\u6B63\u5728\u8FD0\u884C...");\r\n    }\r\n\r\n    //\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86\r\n    @Override\r\n    public void stop() {\r\n        super.context.setLiftState(Context.stoppingState);\r\n        super.context.stop();\r\n    }\r\n}\r\n\r\n//\u505C\u6B62\u72B6\u6001\r\npublic class StoppingState extends LiftState {\r\n\r\n    //\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01\r\n    @Override\r\n    public void open() {\r\n        //\u72B6\u6001\u4FEE\u6539\r\n        super.context.setLiftState(Context.openningState);\r\n        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C\r\n        super.context.getLiftState().open();\r\n    }\r\n\r\n    @Override\r\n    public void close() {//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C\r\n        //\u72B6\u6001\u4FEE\u6539\r\n        super.context.setLiftState(Context.closeingState);\r\n        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C\r\n        super.context.getLiftState().close();\r\n    }\r\n\r\n    //\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88\r\n    @Override\r\n    public void run() {\r\n        //\u72B6\u6001\u4FEE\u6539\r\n        super.context.setLiftState(Context.runningState);\r\n        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C\r\n        super.context.getLiftState().run();\r\n    }\r\n\r\n    //\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86\r\n    @Override\r\n    public void stop() {\r\n        System.out.println("\u7535\u68AF\u505C\u6B62\u4E86...");\r\n    }\r\n}\r\n\r\n//\u5173\u95ED\u72B6\u6001\r\npublic class ClosingState extends LiftState {\r\n\r\n    @Override\r\n    //\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C\r\n    public void close() {\r\n        System.out.println("\u7535\u68AF\u95E8\u5173\u95ED...");\r\n    }\r\n\r\n    //\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440\r\n    @Override\r\n    public void open() {\r\n        super.context.setLiftState(Context.openningState);\r\n        super.context.open();\r\n    }\r\n\r\n\r\n    //\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86\r\n    @Override\r\n    public void run() {\r\n        super.context.setLiftState(Context.runningState);\r\n        super.context.run();\r\n    }\r\n\r\n    //\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42\r\n    @Override\r\n    public void stop() {\r\n        super.context.setLiftState(Context.stoppingState);\r\n        super.context.stop();\r\n    }\r\n}\r\n\r\n//\u73AF\u5883\u89D2\u8272\r\npublic class Context {\r\n    //\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001\r\n    public final static OpenningState openningState = new OpenningState();//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED\r\n    public final static ClosingState closeingState = new ClosingState();//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8\r\n    public final static RunningState runningState = new RunningState();//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62\r\n    public final static StoppingState stoppingState = new StoppingState();//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C\r\n\r\n\r\n    //\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001\r\n    private LiftState liftState;\r\n\r\n    public LiftState getLiftState() {\r\n        return this.liftState;\r\n    }\r\n\r\n    public void setLiftState(LiftState liftState) {\r\n        //\u5F53\u524D\u73AF\u5883\u6539\u53D8\r\n        this.liftState = liftState;\r\n        //\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D\r\n        this.liftState.setContext(this);\r\n    }\r\n\r\n    public void open() {\r\n        this.liftState.open();\r\n    }\r\n\r\n    public void close() {\r\n        this.liftState.close();\r\n    }\r\n\r\n    public void run() {\r\n        this.liftState.run();\r\n    }\r\n\r\n    public void stop() {\r\n        this.liftState.stop();\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Context context = new Context();\r\n        context.setLiftState(new ClosingState());\r\n\r\n        context.open();\r\n        context.close();\r\n        context.run();\r\n        context.stop();\r\n    }\r\n}\r\n```\r\n\r\n### 6.5.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002\r\n- \u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n- \u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002\r\n- \u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002\r\n- \u72B6\u6001\u6A21\u5F0F\u5BF9"\u5F00\u95ED\u539F\u5219"\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002\r\n\r\n### 6.5.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002\r\n- \u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002\r\n\r\n## 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F\r\n\r\n### 6.6.1 \u6982\u8FF0\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002\r\n\r\n### 6.6.2 \u7ED3\u6784\r\n\r\n\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A\r\n\r\n- Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002\r\n- ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002\r\n- Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002\r\n- ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002\r\n\r\n### 6.6.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7\r\n\r\n\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5\r\n\r\n```java\r\npublic interface Observer {\r\n    void update(String message);\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5\r\n\r\n```java\r\npublic class WeixinUser implements Observer {\r\n    // \u5FAE\u4FE1\u7528\u6237\u540D\r\n    private String name;\r\n\r\n    public WeixinUser(String name) {\r\n        this.name = name;\r\n    }\r\n    @Override\r\n    public void update(String message) {\r\n        System.out.println(name + "-" + message);\r\n    }\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5\r\n\r\n```java\r\npublic interface Subject {\r\n    //\u589E\u52A0\u8BA2\u9605\u8005\r\n    public void attach(Observer observer);\r\n\r\n    //\u5220\u9664\u8BA2\u9605\u8005\r\n    public void detach(Observer observer);\r\n\r\n    //\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F\r\n    public void notify(String message);\r\n}\r\n\r\n```\r\n\r\n\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5\r\n\r\n```java\r\npublic class SubscriptionSubject implements Subject {\r\n    //\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\r\n    private List<Observer> weixinUserlist = new ArrayList<Observer>();\r\n\r\n    @Override\r\n    public void attach(Observer observer) {\r\n        weixinUserlist.add(observer);\r\n    }\r\n\r\n    @Override\r\n    public void detach(Observer observer) {\r\n        weixinUserlist.remove(observer);\r\n    }\r\n\r\n    @Override\r\n    public void notify(String message) {\r\n        for (Observer observer : weixinUserlist) {\r\n            observer.update(message);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\u5BA2\u6237\u7AEF\u7A0B\u5E8F\r\n\r\n```java\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        SubscriptionSubject mSubscriptionSubject=new SubscriptionSubject();\r\n        //\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237\r\n        WeixinUser user1=new WeixinUser("\u5B59\u609F\u7A7A");\r\n        WeixinUser user2=new WeixinUser("\u732A\u609F\u80FD");\r\n        WeixinUser user3=new WeixinUser("\u6C99\u609F\u51C0");\r\n        //\u8BA2\u9605\u516C\u4F17\u53F7\r\n        mSubscriptionSubject.attach(user1);\r\n        mSubscriptionSubject.attach(user2);\r\n        mSubscriptionSubject.attach(user3);\r\n        //\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237\r\n        mSubscriptionSubject.notify("\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86");\r\n    }\r\n}\r\n\r\n```\r\n\r\n### 6.6.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002\r\n- \u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n- \u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6\r\n- \u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83\r\n\r\n### 6.6.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002\r\n- \u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002\r\n\r\n### 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0\r\n\r\n\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002\r\n\r\n**1\uFF0CObservable \u7C7B**\r\n\r\nObservable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002\r\n\r\n- void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002\r\n\r\n- void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002\r\n\r\n- void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002\r\n\r\n**2\uFF0CObserver \u63A5\u53E3**\r\n\r\nObserver \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002\r\n\r\n\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077\r\n\r\n\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B\r\n\r\n```java\r\npublic class Thief extends Observable {\r\n\r\n    private String name;\r\n\r\n    public Thief(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void steal() {\r\n        System.out.println("\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01");\r\n        super.setChanged(); //changed  = true\r\n        super.notifyObservers();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3\r\n\r\n```java\r\npublic class Policemen implements Observer {\r\n\r\n    private String name;\r\n\r\n    public Policemen(String name) {\r\n        this.name = name;\r\n    }\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    @Override\r\n    public void update(Observable o, Object arg) {\r\n        System.out.println("\u8B66\u5BDF\uFF1A" + ((Thief) o).getName() + "\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01");\r\n    }\r\n}\r\n```\r\n\r\n\u5BA2\u6237\u7AEF\u4EE3\u7801\r\n\r\n```java\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61\r\n        Thief t = new Thief("\u9694\u58C1\u8001\u738B");\r\n        //\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61\r\n        Policemen p = new Policemen("\u5C0F\u674E");\r\n        //\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077\r\n        t.addObserver(p);\r\n        //\u5C0F\u5077\u5077\u4E1C\u897F\r\n        t.steal();\r\n    }\r\n}\r\n```\r\n\r\n## 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F\r\n\r\n### 6.7.1 \u6982\u8FF0\r\n\r\n\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002\r\n\r\n\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002\r\n\r\n<img src="/img/image-20200214110924010.png" style="zoom:60%;" />\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002\r\n\r\n### 6.7.2 \u7ED3\u6784\r\n\r\n\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002\r\n\r\n- \u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002\r\n- \u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002\r\n- \u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002\r\n\r\n### 6.7.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u79DF\u623F\r\n\r\n\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png" style="zoom:70%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u62BD\u8C61\u4E2D\u4ECB\u8005\r\npublic abstract class Mediator {\r\n    //\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5\r\n    public abstract void constact(String message,Person person);\r\n}\r\n\r\n//\u62BD\u8C61\u540C\u4E8B\u7C7B\r\npublic abstract class Person {\r\n    protected String name;\r\n    protected Mediator mediator;\r\n\r\n    public Person(String name,Mediator mediator){\r\n        this.name = name;\r\n        this.mediator = mediator;\r\n    }\r\n}\r\n\r\n//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005\r\npublic class HouseOwner extends Person {\r\n\r\n    public HouseOwner(String name, Mediator mediator) {\r\n        super(name, mediator);\r\n    }\r\n\r\n    //\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB\r\n    public void constact(String message){\r\n        mediator.constact(message, this);\r\n    }\r\n\r\n    //\u83B7\u53D6\u4FE1\u606F\r\n    public void getMessage(String message){\r\n        System.out.println("\u623F\u4E3B" + name +"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A" + message);\r\n    }\r\n}\r\n\r\n//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA\r\npublic class Tenant extends Person {\r\n    public Tenant(String name, Mediator mediator) {\r\n        super(name, mediator);\r\n    }\r\n\r\n    //\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB\r\n    public void constact(String message){\r\n        mediator.constact(message, this);\r\n    }\r\n\r\n    //\u83B7\u53D6\u4FE1\u606F\r\n    public void getMessage(String message){\r\n        System.out.println("\u79DF\u623F\u8005" + name +"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A" + message);\r\n    }\r\n}\r\n\r\n//\u4E2D\u4ECB\u673A\u6784\r\npublic class MediatorStructure extends Mediator {\r\n    //\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F\r\n    private HouseOwner houseOwner;\r\n    private Tenant tenant;\r\n\r\n    public HouseOwner getHouseOwner() {\r\n        return houseOwner;\r\n    }\r\n\r\n    public void setHouseOwner(HouseOwner houseOwner) {\r\n        this.houseOwner = houseOwner;\r\n    }\r\n\r\n    public Tenant getTenant() {\r\n        return tenant;\r\n    }\r\n\r\n    public void setTenant(Tenant tenant) {\r\n        this.tenant = tenant;\r\n    }\r\n\r\n    public void constact(String message, Person person) {\r\n        if (person == houseOwner) {          //\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F\r\n            tenant.getMessage(message);\r\n        } else {       //\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F\r\n            houseOwner.getMessage(message);\r\n        }\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        //\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784\r\n        MediatorStructure mediator = new MediatorStructure();\r\n\r\n        //\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF\r\n        HouseOwner houseOwner = new HouseOwner("\u5F20\u4E09", mediator);\r\n        Tenant tenant = new Tenant("\u674E\u56DB", mediator);\r\n\r\n        //\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005\r\n        mediator.setHouseOwner(houseOwner);\r\n        mediator.setTenant(tenant);\r\n\r\n        tenant.constact("\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50");\r\n        houseOwner.constact("\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F");\r\n    }\r\n}\r\n```\r\n\r\n### 6.7.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u677E\u6563\u8026\u5408\r\n\r\n  \u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002\r\n\r\n- \u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92\r\n\r\n  \u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002\r\n\r\n- \u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054\r\n\r\n  \u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002\r\n\r\n### 6.7.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002\r\n- \u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002\r\n\r\n## 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F\r\n\r\n### 6.8.1 \u6982\u8FF0\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002\r\n\r\n### 6.8.2 \u7ED3\u6784\r\n\r\n\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A\r\n\r\n- \u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002\r\n\r\n- \u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002\r\n- \u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002\r\n- \u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002\r\n\r\n### 6.8.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png" style="zoom:90%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5\r\n\r\n```java\r\npublic interface StudentIterator {\r\n    boolean hasNext();\r\n    Student next();\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5\r\n\r\n```java\r\npublic class StudentIteratorImpl implements StudentIterator {\r\n    private List<Student> list;\r\n    private int position = 0;\r\n\r\n    public StudentIteratorImpl(List<Student> list) {\r\n        this.list = list;\r\n    }\r\n\r\n    @Override\r\n    public boolean hasNext() {\r\n        return position < list.size();\r\n    }\r\n\r\n    @Override\r\n    public Student next() {\r\n        Student currentStudent = list.get(position);\r\n        position ++;\r\n        return currentStudent;\r\n    }\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5\r\n\r\n```java\r\npublic interface StudentAggregate {\r\n    void addStudent(Student student);\r\n\r\n    void removeStudent(Student student);\r\n\r\n    StudentIterator getStudentIterator();\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5\r\n\r\n```java\r\npublic class StudentAggregateImpl implements StudentAggregate {\r\n\r\n    private List<Student> list = new ArrayList<Student>();  // \u5B66\u751F\u5217\u8868\r\n\r\n    @Override\r\n    public void addStudent(Student student) {\r\n        this.list.add(student);\r\n    }\r\n\r\n    @Override\r\n    public void removeStudent(Student student) {\r\n        this.list.remove(student);\r\n    }\r\n\r\n    @Override\r\n    public StudentIterator getStudentIterator() {\r\n        return new StudentIteratorImpl(list);\r\n    }\r\n}\r\n```\r\n\r\n### 6.8.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002\r\n- \u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002\r\n- \u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002\r\n\r\n### 6.8.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002\r\n- \u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002\r\n- \u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002\r\n\r\n### 6.8.6 JDK \u6E90\u7801\u89E3\u6790\r\n\r\n\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002\r\n\r\n```java\r\nList<String> list = new ArrayList<>();\r\nIterator<String> iterator = list.iterator(); //list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\r\nwhile (iterator.hasNext()) {\r\n    System.out.println(iterator.next());\r\n}\r\n```\r\n\r\n\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E\r\n\r\n- List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B\r\n- ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B\r\n- Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668\r\n- list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 `Iterator` \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61\r\n\r\n\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0\r\n\r\n```java\r\npublic class ArrayList<E> extends AbstractList<E>\r\n        implements List<E>, RandomAccess, Cloneable, java.io.Serializable {\r\n\r\n    public Iterator<E> iterator() {\r\n        return new Itr();\r\n    }\r\n\r\n    private class Itr implements Iterator<E> {\r\n        int cursor;       // \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15\r\n        int lastRet = -1; // \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15\r\n        int expectedModCount = modCount;\r\n\r\n        Itr() {}\r\n\r\n        //\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20\r\n        public boolean hasNext() {\r\n            return cursor != size;\r\n        }\r\n\r\n        //\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20\r\n        public E next() {\r\n            checkForComodification();\r\n            int i = cursor;\r\n            if (i >= size)\r\n                throw new NoSuchElementException();\r\n            Object[] elementData = ArrayList.this.elementData;\r\n            if (i >= elementData.length)\r\n                throw new ConcurrentModificationException();\r\n            cursor = i + 1;\r\n            return (E) elementData[lastRet = i];\r\n        }\r\n        ...\r\n}\r\n```\r\n\r\n\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 `iterator` \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 `Iterator` \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 `Iterator` \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002\r\n\r\n> \u6CE8\u610F\uFF1A\r\n>\r\n> \u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0`java.util.Iterable`\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A `java.util.Iterator` \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002\r\n\r\n## 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F\r\n\r\n### 6.9.1 \u6982\u8FF0\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002\r\n\r\n### 6.9.2 \u7ED3\u6784\r\n\r\n\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:\r\n\r\n- \u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20`\uFF08Element\uFF09`\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002\r\n- \u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002\r\n- \u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08`accept`\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002\r\n- \u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002\r\n- \u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08`Element`\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002\r\n\r\n### 6.9.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF\r\n\r\n\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002\r\n\r\n- \u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA\r\n- \u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA\r\n- \u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B\r\n- \u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B\r\n- \u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6\r\n\r\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n![](\\img\\\u8BBF\u95EE\u8005\u6A21\u5F0F.png)\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3\r\n\r\n```java\r\npublic interface Person {\r\n    void feed(Cat cat);\r\n\r\n    void feed(Dog dog);\r\n}\r\n```\r\n\r\n\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 `Person`\u63A5\u53E3\r\n\r\n```java\r\npublic class Owner implements Person {\r\n\r\n    @Override\r\n    public void feed(Cat cat) {\r\n        System.out.println("\u4E3B\u4EBA\u5582\u98DF\u732B");\r\n    }\r\n\r\n    @Override\r\n    public void feed(Dog dog) {\r\n        System.out.println("\u4E3B\u4EBA\u5582\u98DF\u72D7");\r\n    }\r\n}\r\n\r\npublic class Someone implements Person {\r\n    @Override\r\n    public void feed(Cat cat) {\r\n        System.out.println("\u5176\u4ED6\u4EBA\u5582\u98DF\u732B");\r\n    }\r\n\r\n    @Override\r\n    public void feed(Dog dog) {\r\n        System.out.println("\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7");\r\n    }\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269\r\n\r\n```java\r\npublic interface Animal {\r\n    void accept(Person person);\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u5B9E\u73B0`Animal`\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09\r\n\r\n```java\r\npublic class Dog implements Animal {\r\n\r\n    @Override\r\n    public void accept(Person person) {\r\n        person.feed(this);\r\n        System.out.println("\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01");\r\n    }\r\n}\r\n\r\npublic class Cat implements Animal {\r\n\r\n    @Override\r\n    public void accept(Person person) {\r\n        person.feed(this);\r\n        System.out.println("\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01");\r\n    }\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6\r\n\r\n```java\r\npublic class Home {\r\n    private List<Animal> nodeList = new ArrayList<Animal>();\r\n\r\n    public void action(Person person) {\r\n        for (Animal node : nodeList) {\r\n            node.accept(person);\r\n        }\r\n    }\r\n\r\n    //\u6DFB\u52A0\u64CD\u4F5C\r\n    public void add(Animal animal) {\r\n        nodeList.add(animal);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\u6D4B\u8BD5\u7C7B\r\n\r\n```java\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Home home = new Home();\r\n        home.add(new Dog());\r\n        home.add(new Cat());\r\n\r\n        Owner owner = new Owner();\r\n        home.action(owner);\r\n\r\n        Someone someone = new Someone();\r\n        home.action(someone);\r\n    }\r\n}\r\n```\r\n\r\n### 6.9.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u6269\u5C55\u6027\u597D\r\n\r\n  \u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002\r\n\r\n- \u590D\u7528\u6027\u597D\r\n\r\n  \u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002\r\n\r\n- \u5206\u79BB\u65E0\u5173\u884C\u4E3A\r\n\r\n  \u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n- \u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE\r\n\r\n  \u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002\r\n\r\n- \u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219\r\n\r\n  \u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002\r\n\r\n### 6.9.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002\r\n\r\n- \u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002\r\n\r\n### 6.9.6 \u6269\u5C55\r\n\r\n\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002\r\n\r\n**1\uFF0C\u5206\u6D3E\uFF1A**\r\n\r\n\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 `Map map = new HashMap()` \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F `Map` \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F `HashMap` \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002\r\n\r\n**\u9759\u6001\u5206\u6D3E(Static Dispatch)** \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002\r\n\r\n**\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)** \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002\r\n\r\n**2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A**\r\n\r\n\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002\r\n\r\n```java\r\npublic class Animal {\r\n    public void execute() {\r\n        System.out.println("Animal");\r\n    }\r\n}\r\n\r\npublic class Dog extends Animal {\r\n    @Override\r\n    public void execute() {\r\n        System.out.println("dog");\r\n    }\r\n}\r\n\r\npublic class Cat extends Animal {\r\n     @Override\r\n    public void execute() {\r\n        System.out.println("cat");\r\n    }\r\n}\r\n\r\npublic class Client {\r\n   	public static void main(String[] args) {\r\n        Animal a = new Dog();\r\n        a.execute();\r\n\r\n        Animal a1 = new Cat();\r\n        a1.execute();\r\n    }\r\n}\r\n```\r\n\r\n\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002\r\n\r\nJava \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002\r\n\r\n**3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A**\r\n\r\n\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002\r\n\r\n```java\r\npublic class Animal {\r\n}\r\n\r\npublic class Dog extends Animal {\r\n}\r\n\r\npublic class Cat extends Animal {\r\n}\r\n\r\npublic class Execute {\r\n    public void execute(Animal a) {\r\n        System.out.println("Animal");\r\n    }\r\n\r\n    public void execute(Dog d) {\r\n        System.out.println("dog");\r\n    }\r\n\r\n    public void execute(Cat c) {\r\n        System.out.println("cat");\r\n    }\r\n}\r\n\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Animal a = new Animal();\r\n        Animal a1 = new Dog();\r\n        Animal a2 = new Cat();\r\n\r\n        Execute exe = new Execute();\r\n        exe.execute(a);\r\n        exe.execute(a1);\r\n        exe.execute(a2);\r\n    }\r\n}\r\n```\r\n\r\n\u8FD0\u884C\u7ED3\u679C\uFF1A\r\n\r\n<img src="/img/image-20200214215446638.png" style="zoom:70%;" />\r\n\r\n\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F\r\n\r\n**\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002**\r\n\r\n**4\uFF0C\u53CC\u5206\u6D3E\uFF1A**\r\n\r\n\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002\r\n\r\n```java\r\npublic class Animal {\r\n    public void accept(Execute exe) {\r\n        exe.execute(this);\r\n    }\r\n}\r\n\r\npublic class Dog extends Animal {\r\n    public void accept(Execute exe) {\r\n        exe.execute(this);\r\n    }\r\n}\r\n\r\npublic class Cat extends Animal {\r\n    public void accept(Execute exe) {\r\n        exe.execute(this);\r\n    }\r\n}\r\n\r\npublic class Execute {\r\n    public void execute(Animal a) {\r\n        System.out.println("animal");\r\n    }\r\n\r\n    public void execute(Dog d) {\r\n        System.out.println("dog");\r\n    }\r\n\r\n    public void execute(Cat c) {\r\n        System.out.println("cat");\r\n    }\r\n}\r\n\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Animal a = new Animal();\r\n        Animal d = new Dog();\r\n        Animal c = new Cat();\r\n\r\n        Execute exe = new Execute();\r\n        a.accept(exe);\r\n        d.accept(exe);\r\n        c.accept(exe);\r\n    }\r\n}\r\n```\r\n\r\n\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F`\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E`\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002\r\n\r\n\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002\r\n\r\n\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/image-20200426233931693.png" style="zoom:67%;" />\r\n\r\n**\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002**\r\n\r\n## 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F\r\n\r\n### 6.10.1 \u6982\u8FF0\r\n\r\n\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002\r\n\r\n### 6.10.2 \u7ED3\u6784\r\n\r\n\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A\r\n\r\n- \u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002\r\n- \u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002\r\n- \u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002\r\n\r\n> \u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A\r\n>\r\n> - **\u7A84\u63A5\u53E3**\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002\r\n> - **\u5BBD\u63A5\u53E3**\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002\r\n\r\n### 6.10.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS\r\n\r\n\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002\r\n\r\n\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A\r\n\r\n- \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F\r\n- \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F\r\n\r\n#### 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F\r\n\r\n\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u6E38\u620F\u89D2\u8272\u7C7B\r\npublic class GameRole {\r\n    private int vit; //\u751F\u547D\u529B\r\n    private int atk; //\u653B\u51FB\u529B\r\n    private int def; //\u9632\u5FA1\u529B\r\n\r\n    //\u521D\u59CB\u5316\u72B6\u6001\r\n    public void initState() {\r\n        this.vit = 100;\r\n        this.atk = 100;\r\n        this.def = 100;\r\n    }\r\n\r\n    //\u6218\u6597\r\n    public void fight() {\r\n        this.vit = 0;\r\n        this.atk = 0;\r\n        this.def = 0;\r\n    }\r\n\r\n    //\u4FDD\u5B58\u89D2\u8272\u72B6\u6001\r\n    public RoleStateMemento saveState() {\r\n        return new RoleStateMemento(vit, atk, def);\r\n    }\r\n\r\n    //\u56DE\u590D\u89D2\u8272\u72B6\u6001\r\n    public void recoverState(RoleStateMemento roleStateMemento) {\r\n        this.vit = roleStateMemento.getVit();\r\n        this.atk = roleStateMemento.getAtk();\r\n        this.def = roleStateMemento.getDef();\r\n    }\r\n\r\n    public void stateDisplay() {\r\n        System.out.println("\u89D2\u8272\u751F\u547D\u529B\uFF1A" + vit);\r\n        System.out.println("\u89D2\u8272\u653B\u51FB\u529B\uFF1A" + atk);\r\n        System.out.println("\u89D2\u8272\u9632\u5FA1\u529B\uFF1A" + def);\r\n    }\r\n\r\n    public int getVit() {\r\n        return vit;\r\n    }\r\n\r\n    public void setVit(int vit) {\r\n        this.vit = vit;\r\n    }\r\n\r\n    public int getAtk() {\r\n        return atk;\r\n    }\r\n\r\n    public void setAtk(int atk) {\r\n        this.atk = atk;\r\n    }\r\n\r\n    public int getDef() {\r\n        return def;\r\n    }\r\n\r\n    public void setDef(int def) {\r\n        this.def = def;\r\n    }\r\n}\r\n\r\n//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)\r\npublic class RoleStateMemento {\r\n    private int vit;\r\n    private int atk;\r\n    private int def;\r\n\r\n    public RoleStateMemento(int vit, int atk, int def) {\r\n        this.vit = vit;\r\n        this.atk = atk;\r\n        this.def = def;\r\n    }\r\n\r\n    public int getVit() {\r\n        return vit;\r\n    }\r\n\r\n    public void setVit(int vit) {\r\n        this.vit = vit;\r\n    }\r\n\r\n    public int getAtk() {\r\n        return atk;\r\n    }\r\n\r\n    public void setAtk(int atk) {\r\n        this.atk = atk;\r\n    }\r\n\r\n    public int getDef() {\r\n        return def;\r\n    }\r\n\r\n    public void setDef(int def) {\r\n        this.def = def;\r\n    }\r\n}\r\n\r\n//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B\r\npublic class RoleStateCaretaker {\r\n    private RoleStateMemento roleStateMemento;\r\n\r\n    public RoleStateMemento getRoleStateMemento() {\r\n        return roleStateMemento;\r\n    }\r\n\r\n    public void setRoleStateMemento(RoleStateMemento roleStateMemento) {\r\n        this.roleStateMemento = roleStateMemento;\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        System.out.println("------------\u5927\u6218Boss\u524D------------");\r\n        //\u5927\u6218Boss\u524D\r\n        GameRole gameRole = new GameRole();\r\n        gameRole.initState();\r\n        gameRole.stateDisplay();\r\n\r\n        //\u4FDD\u5B58\u8FDB\u5EA6\r\n        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();\r\n        roleStateCaretaker.setRoleStateMemento(gameRole.saveState());\r\n\r\n        System.out.println("------------\u5927\u6218Boss\u540E------------");\r\n        //\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD\r\n        gameRole.fight();\r\n        gameRole.stateDisplay();\r\n        System.out.println("------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------");\r\n        //\u6062\u590D\u4E4B\u524D\u72B6\u6001\r\n        gameRole.recoverState(roleStateCaretaker.getRoleStateMemento());\r\n        gameRole.stateDisplay();\r\n\r\n    }\r\n}\r\n```\r\n\r\n> \u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002\r\n\r\n#### 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F\r\n\r\n\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06**\u5907\u5FD8\u5F55\u7C7B**\u8BBE\u8BA1\u6210**\u53D1\u8D77\u4EBA\u7C7B**\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002\r\n\r\n\u5C06 `RoleStateMemento` \u8BBE\u4E3A `GameRole` \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 `RoleStateMemento` \u5BF9\u8C61\u5C01\u88C5\u5728 `GameRole` \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 `Memento` \u7ED9 `RoleStateCaretaker` \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 `GameRole` \u7C7B\u770B\u5230\u7684\u662F `RoleStateMemento` \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C`RoleStateCaretaker` \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 `Memento` \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:70%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n\u7A84\u63A5\u53E3`Memento`\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5\r\n\r\n```java\r\npublic interface Memento {\r\n}\r\n```\r\n\r\n\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B `GameRole`\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B `RoleStateMemento`\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09\r\n\r\n```java\r\n/\u6E38\u620F\u89D2\u8272\u7C7B\r\npublic class GameRole {\r\n    private int vit; //\u751F\u547D\u529B\r\n    private int atk; //\u653B\u51FB\u529B\r\n    private int def; //\u9632\u5FA1\u529B\r\n\r\n    //\u521D\u59CB\u5316\u72B6\u6001\r\n    public void initState() {\r\n        this.vit = 100;\r\n        this.atk = 100;\r\n        this.def = 100;\r\n    }\r\n\r\n    //\u6218\u6597\r\n    public void fight() {\r\n        this.vit = 0;\r\n        this.atk = 0;\r\n        this.def = 0;\r\n    }\r\n\r\n    //\u4FDD\u5B58\u89D2\u8272\u72B6\u6001\r\n    public Memento saveState() {\r\n        return new RoleStateMemento(vit, atk, def);\r\n    }\r\n\r\n    //\u56DE\u590D\u89D2\u8272\u72B6\u6001\r\n    public void recoverState(Memento memento) {\r\n        RoleStateMemento roleStateMemento = (RoleStateMemento) memento;\r\n        this.vit = roleStateMemento.getVit();\r\n        this.atk = roleStateMemento.getAtk();\r\n        this.def = roleStateMemento.getDef();\r\n    }\r\n\r\n    public void stateDisplay() {\r\n        System.out.println("\u89D2\u8272\u751F\u547D\u529B\uFF1A" + vit);\r\n        System.out.println("\u89D2\u8272\u653B\u51FB\u529B\uFF1A" + atk);\r\n        System.out.println("\u89D2\u8272\u9632\u5FA1\u529B\uFF1A" + def);\r\n\r\n    }\r\n\r\n    public int getVit() {\r\n        return vit;\r\n    }\r\n\r\n    public void setVit(int vit) {\r\n        this.vit = vit;\r\n    }\r\n\r\n    public int getAtk() {\r\n        return atk;\r\n    }\r\n\r\n    public void setAtk(int atk) {\r\n        this.atk = atk;\r\n    }\r\n\r\n    public int getDef() {\r\n        return def;\r\n    }\r\n\r\n    public void setDef(int def) {\r\n        this.def = def;\r\n    }\r\n\r\n    private class RoleStateMemento implements Memento {\r\n        private int vit;\r\n        private int atk;\r\n        private int def;\r\n\r\n        public RoleStateMemento(int vit, int atk, int def) {\r\n            this.vit = vit;\r\n            this.atk = atk;\r\n            this.def = def;\r\n        }\r\n\r\n        public int getVit() {\r\n            return vit;\r\n        }\r\n\r\n        public void setVit(int vit) {\r\n            this.vit = vit;\r\n        }\r\n\r\n        public int getAtk() {\r\n            return atk;\r\n        }\r\n\r\n        public void setAtk(int atk) {\r\n            this.atk = atk;\r\n        }\r\n\r\n        public int getDef() {\r\n            return def;\r\n        }\r\n\r\n        public void setDef(int def) {\r\n            this.def = def;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B `RoleStateCaretaker` \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 `Memento` \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9\r\n\r\n```java\r\n//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B\r\npublic class RoleStateCaretaker {\r\n    private Memento memento;\r\n\r\n    public Memento getMemento() {\r\n        return memento;\r\n    }\r\n\r\n    public void setMemento(Memento memento) {\r\n        this.memento = memento;\r\n    }\r\n}\r\n```\r\n\r\n\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B\r\n\r\n```java\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        System.out.println("------------\u5927\u6218Boss\u524D------------");\r\n        //\u5927\u6218Boss\u524D\r\n        GameRole gameRole = new GameRole();\r\n        gameRole.initState();\r\n        gameRole.stateDisplay();\r\n\r\n        //\u4FDD\u5B58\u8FDB\u5EA6\r\n        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();\r\n        roleStateCaretaker.setMemento(gameRole.saveState());\r\n\r\n        System.out.println("------------\u5927\u6218Boss\u540E------------");\r\n        //\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD\r\n        gameRole.fight();\r\n        gameRole.stateDisplay();\r\n        System.out.println("------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------");\r\n        //\u6062\u590D\u4E4B\u524D\u72B6\u6001\r\n        gameRole.recoverState(roleStateCaretaker.getMemento());\r\n        gameRole.stateDisplay();\r\n    }\r\n}\r\n\r\n```\r\n\r\n### 6.10.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002\r\n- \u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002\r\n- \u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n- \u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002\r\n\r\n### 6.10.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002\r\n\r\n- \u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002\r\n\r\n## 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F\r\n\r\n### 6.11.1 \u6982\u8FF0\r\n\r\n<img src="/img/image-20200215220322641.png" style="zoom:60%;" />\r\n\r\n\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002\r\n\r\n```java\r\n//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0\r\npublic static int add(int a,int b){\r\n    return a + b;\r\n}\r\n\r\n//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0\r\npublic static int add(int a,int b,int c){\r\n    return a + b + c;\r\n}\r\n\r\n//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0\r\npublic static int add(Integer ... arr) {\r\n    int sum = 0;\r\n    for (Integer i : arr) {\r\n        sum += i;\r\n    }\r\n    return sum;\r\n}\r\n```\r\n\r\n\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002\r\n\r\n\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002\r\n\r\n**\u5B9A\u4E49\uFF1A**\r\n\r\n> \u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002\r\n\r\n\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002\r\n\r\n\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F\r\n\r\n**\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A**\r\n\r\n\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002\r\n\r\n```\r\nexpression ::= value | plus | minus\r\nplus ::= expression \u2018+\u2019 expression\r\nminus ::= expression \u2018-\u2019 expression\r\nvalue ::= integer\r\n```\r\n\r\n> \u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002\r\n\r\n\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A\r\n\r\n\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002\r\n\r\n**\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A**\r\n\r\n\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002\r\n\r\n\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002\r\n\r\n<img src="/img/image-20200215225227616.png" style="zoom:50%;" />\r\n\r\n### 6.11.2 \u7ED3\u6784\r\n\r\n\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002\r\n\r\n- \u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002\r\n\r\n- \u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002\r\n- \u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002\r\n- \u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002\r\n- \u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002\r\n\r\n### 6.11.3 \u6848\u4F8B\u5B9E\u73B0\r\n\r\n\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6\r\n\r\n<img src="/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png" style="zoom:80%;" />\r\n\r\n\u4EE3\u7801\u5982\u4E0B\uFF1A\r\n\r\n```java\r\n//\u62BD\u8C61\u89D2\u8272AbstractExpression\r\npublic abstract class AbstractExpression {\r\n    public abstract int interpret(Context context);\r\n}\r\n\r\n//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272\r\npublic class Value extends AbstractExpression {\r\n    private int value;\r\n\r\n    public Value(int value) {\r\n        this.value = value;\r\n    }\r\n\r\n    @Override\r\n    public int interpret(Context context) {\r\n        return value;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return new Integer(value).toString();\r\n    }\r\n}\r\n\r\n//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F\r\npublic class Plus extends AbstractExpression {\r\n    private AbstractExpression left;\r\n    private AbstractExpression right;\r\n\r\n    public Plus(AbstractExpression left, AbstractExpression right) {\r\n        this.left = left;\r\n        this.right = right;\r\n    }\r\n\r\n    @Override\r\n    public int interpret(Context context) {\r\n        return left.interpret(context) + right.interpret(context);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return "(" + left.toString() + " + " + right.toString() + ")";\r\n    }\r\n}\r\n\r\n///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F\r\npublic class Minus extends AbstractExpression {\r\n    private AbstractExpression left;\r\n    private AbstractExpression right;\r\n\r\n    public Minus(AbstractExpression left, AbstractExpression right) {\r\n        this.left = left;\r\n        this.right = right;\r\n    }\r\n\r\n    @Override\r\n    public int interpret(Context context) {\r\n        return left.interpret(context) - right.interpret(context);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return "(" + left.toString() + " - " + right.toString() + ")";\r\n    }\r\n}\r\n\r\n//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F\r\npublic class Variable extends AbstractExpression {\r\n    private String name;\r\n\r\n    public Variable(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public int interpret(Context ctx) {\r\n        return ctx.getValue(this);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return name;\r\n    }\r\n}\r\n\r\n//\u73AF\u5883\u7C7B\r\npublic class Context {\r\n    private Map<Variable, Integer> map = new HashMap<Variable, Integer>();\r\n\r\n    public void assign(Variable var, Integer value) {\r\n        map.put(var, value);\r\n    }\r\n\r\n    public int getValue(Variable var) {\r\n        Integer value = map.get(var);\r\n        return value;\r\n    }\r\n}\r\n\r\n//\u6D4B\u8BD5\u7C7B\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        Context context = new Context();\r\n\r\n        Variable a = new Variable("a");\r\n        Variable b = new Variable("b");\r\n        Variable c = new Variable("c");\r\n        Variable d = new Variable("d");\r\n        Variable e = new Variable("e");\r\n        //Value v = new Value(1);\r\n\r\n        context.assign(a, 1);\r\n        context.assign(b, 2);\r\n        context.assign(c, 3);\r\n        context.assign(d, 4);\r\n        context.assign(e, 5);\r\n\r\n        AbstractExpression expression = new Minus(new Plus(new Plus(new Plus(a, b), c), d), e);\r\n\r\n        System.out.println(expression + "= " + expression.interpret(context));\r\n    }\r\n}\r\n```\r\n\r\n### 6.11.4 \u4F18\u7F3A\u70B9\r\n\r\n**1\uFF0C\u4F18\u70B9\uFF1A**\r\n\r\n- \u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002\r\n\r\n  \u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002\r\n\r\n- \u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002\r\n\r\n  \u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002\r\n\r\n- \u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002\r\n\r\n  \u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 "\u5F00\u95ED\u539F\u5219"\u3002\r\n\r\n**2\uFF0C\u7F3A\u70B9\uFF1A**\r\n\r\n- \u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002\r\n\r\n  \u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002\r\n\r\n* \u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002\r\n\r\n  \u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002\r\n\r\n### 6.11.5 \u4F7F\u7528\u573A\u666F\r\n\r\n- \u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002\r\n\r\n- \u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002\r\n\r\n- \u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002\r\n\r\n# 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\r\n\r\n## 7.1 spring \u4F7F\u7528\u56DE\u987E\r\n\r\n\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002\r\n\r\n- \u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B\r\n\r\n  ```java\r\n  public interface UserDao {\r\n      public void add();\r\n  }\r\n\r\n  public class UserDaoImpl implements UserDao {\r\n\r\n      public void add() {\r\n          System.out.println("userDaoImpl ....");\r\n      }\r\n  }\r\n  ```\r\n\r\n- \u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B\r\n\r\n  ```java\r\n  public interface UserService {\r\n      public void add();\r\n  }\r\n\r\n  public class UserServiceImpl implements UserService {\r\n\r\n      private UserDao userDao;\r\n\r\n      public void setUserDao(UserDao userDao) {\r\n          this.userDao = userDao;\r\n      }\r\n\r\n      public void add() {\r\n          System.out.println("userServiceImpl ...");\r\n          userDao.add();\r\n      }\r\n  }\r\n  ```\r\n\r\n- \u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42\r\n\r\n  ```java\r\n  public class UserController {\r\n      public static void main(String[] args) {\r\n          //\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61\r\n          ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");\r\n          //\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61\r\n          UserService userService = applicationContext.getBean("userService", UserService.class);\r\n          //\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5\r\n          userService.add();\r\n      }\r\n  }\r\n  ```\r\n\r\n- \u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6\r\n\r\n  ```java\r\n  <?xml version="1.0" encoding="UTF-8"?>\r\n  <beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\r\n         xmlns="http://www.springframework.org/schema/beans"\r\n         xmlns:context="http://www.springframework.org/schema/context"\r\n         xsi:schemaLocation="http://www.springframework.org/schema/beans\r\n          http://www.springframework.org/schema/beans/spring-beans.xsd\r\n          http://www.springframework.org/schema/context\r\n          http://www.springframework.org/schema/context/spring-context.xsd">\r\n\r\n      <bean id="userService" class="com.itheima.service.impl.UserServiceImpl">\r\n          <property name="userDao" ref="userDao"></property>\r\n      </bean>\r\n\r\n      <bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>\r\n\r\n  </beans>\r\n  ```\r\n\r\n  \u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A\r\n\r\n  <img src="/img/image-20200429165544151.png" style="zoom:60%;" />\r\n\r\n\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A\r\n\r\n- userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002\r\n- \u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002\r\n- UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002\r\n\r\n\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09\r\n\r\n## 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784\r\n\r\nSpring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:\r\n\r\n\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A\r\n\r\n<img src="/img/image-20200429111324770.png" style="zoom:40%;" />\r\n\r\n\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002\r\n\r\n- spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002\r\n- spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002\r\n- spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002\r\n- spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002\r\n- spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002\r\n\r\n### 7.1.1 bean \u6982\u8FF0\r\n\r\nSpring \u5C31\u662F\u9762\u5411 `Bean` \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002\r\n\r\nspring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A\r\n\r\n```xml\r\n<bean id="userService" class="com.itheima.service.impl.UserServiceImpl">\r\n    <property name="userDao" ref="userDao"></property>\r\n</bean>\r\n<bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>\r\n```\r\n\r\n\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F\r\n\r\n- spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002\r\n- bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002\r\n\r\n## 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790\r\n\r\n### 7.3.1 BeanFactory \u89E3\u6790\r\n\r\nSpring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002\r\n\r\n<img src="/img/image-20200429185050396.png" style="zoom:60%;" />\r\n\r\n\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002\r\n\r\n\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F\r\n\r\n\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C\r\n\r\n- ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002\r\n- HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean\r\n- AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002\r\n\r\n\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A\r\n\r\n```java\r\npublic interface BeanFactory {\r\n\r\n	String FACTORY_BEAN_PREFIX = "&";\r\n\r\n	//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\r\n	Object getBean(String name) throws BeansException;\r\n	//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86\r\n	<T> T getBean(String name, Class<T> requiredType) throws BeansException;\r\n	Object getBean(String name, Object... args) throws BeansException;\r\n	<T> T getBean(Class<T> requiredType) throws BeansException;\r\n	<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;\r\n\r\n	<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);\r\n	<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);\r\n\r\n	//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61\r\n	boolean containsBean(String name);\r\n	//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B\r\n	boolean isSingleton(String name) throws NoSuchBeanDefinitionException;\r\n	boolean isPrototype(String name) throws NoSuchBeanDefinitionException;\r\n	boolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;\r\n	boolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;\r\n	@Nullable\r\n	Class<?> getType(String name) throws NoSuchBeanDefinitionException;\r\n	String[] getAliases(String name);\r\n}\r\n```\r\n\r\n\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002\r\n\r\nBeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002\r\n\r\n<img src="/img/image-20200430220155371.png" style="zoom:60%;" />\r\n\r\n\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A\r\n\r\n- ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002\r\n- FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002\r\n- AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002\r\n\r\n### 7.3.2 BeanDefinition \u89E3\u6790\r\n\r\nSpring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6\r\n\r\n```xml\r\n<bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>\r\n\r\nbean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A\r\n	scope\u3001init-method\u3001destory-method\u7B49\u3002\r\n```\r\n\r\n\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002\r\n\r\n<img src="/img/image-20200429204239868.png" style="zoom:60%;" />\r\n\r\n### 7.3.3 BeanDefinitionReader \u89E3\u6790\r\n\r\nBean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002\r\n\r\n<img src="/img/image-20200429204700956.png" style="zoom:60%;" />\r\n\r\n\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A\r\n\r\n```java\r\npublic interface BeanDefinitionReader {\r\n\r\n	//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61\r\n	BeanDefinitionRegistry getRegistry();\r\n\r\n	@Nullable\r\n	ResourceLoader getResourceLoader();\r\n\r\n	@Nullable\r\n	ClassLoader getBeanClassLoader();\r\n\r\n	BeanNameGenerator getBeanNameGenerator();\r\n\r\n	/*\r\n		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D\r\n	*/\r\n	int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException;\r\n	int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException;\r\n	int loadBeanDefinitions(String location) throws BeanDefinitionStoreException;\r\n	int loadBeanDefinitions(String... locations) throws BeanDefinitionStoreException;\r\n}\r\n```\r\n\r\n### 7.3.4 BeanDefinitionRegistry \u89E3\u6790\r\n\r\nBeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002\r\n\r\n```java\r\npublic interface BeanDefinitionRegistry extends AliasRegistry {\r\n\r\n	//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean\r\n	void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\r\n			throws BeanDefinitionStoreException;\r\n\r\n	//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean\r\n	void removeBeanDefinition(String beanName) throws NoSuchBeanDefinitionException;\r\n\r\n	//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean\r\n	BeanDefinition getBeanDefinition(String beanName) throws NoSuchBeanDefinitionException;\r\n\r\n	//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean\r\n	boolean containsBeanDefinition(String beanName);\r\n\r\n	//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0\r\n	String[] getBeanDefinitionNames();\r\n\r\n	int getBeanDefinitionCount();\r\n	boolean isBeanNameInUse(String beanName);\r\n}\r\n```\r\n\r\n\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A\r\n\r\n<img src="/img/image-20200429211132185.png" style="zoom:60%;" />\r\n\r\n\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A\r\n\r\n- DefaultListableBeanFactory\r\n\r\n  \u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean\r\n\r\n  ```java\r\n  private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(256);\r\n  ```\r\n\r\n- SimpleBeanDefinitionRegistry\r\n\r\n  \u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean\r\n\r\n  ```java\r\n  private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(64);\r\n  ```\r\n\r\n### 7.3.5 \u521B\u5EFA\u5BB9\u5668\r\n\r\nClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002\r\n\r\n## 7.4 \u81EA\u5B9A\u4E49 SpringIOC\r\n\r\n\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002\r\n\r\n```xml\r\n<?xml version="1.0" encoding="UTF-8"?>\r\n<beans>\r\n    <bean id="userService" class="com.itheima.service.impl.UserServiceImpl">\r\n        <property name="userDao" ref="userDao"></property>\r\n    </bean>\r\n    <bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>\r\n</beans>\r\n```\r\n\r\n### 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B\r\n\r\n#### 7.4.1.1 PropertyValue \u7C7B\r\n\r\n\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002\r\n\r\n```java\r\npublic class PropertyValue {\r\n\r\n  private String name;\r\n  private String ref;\r\n  private String value;\r\n\r\n  public PropertyValue() {\r\n  }\r\n\r\n  public PropertyValue(String name, String ref,String value) {\r\n    this.name = name;\r\n    this.ref = ref;\r\n    this.value = value;\r\n  }\r\n\r\n  public String getName() {\r\n    return name;\r\n  }\r\n\r\n  public void setName(String name) {\r\n    this.name = name;\r\n  }\r\n\r\n  public String getRef() {\r\n    return ref;\r\n  }\r\n\r\n  public void setRef(String ref) {\r\n    this.ref = ref;\r\n  }\r\n\r\n  public String getValue() {\r\n    return value;\r\n  }\r\n\r\n  public void setValue(String value) {\r\n    this.value = value;\r\n  }\r\n}\r\n```\r\n\r\n#### 7.4.1.2 MutablePropertyValues \u7C7B\r\n\r\n\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002\r\n\r\n```java\r\npublic class MutablePropertyValues implements Iterable<PropertyValue> {\r\n\r\n    private final List<PropertyValue> propertyValueList;\r\n\r\n    public MutablePropertyValues() {\r\n        this.propertyValueList = new ArrayList<PropertyValue>();\r\n    }\r\n\r\n    public MutablePropertyValues(List<PropertyValue> propertyValueList) {\r\n        this.propertyValueList = (propertyValueList != null ? propertyValueList : new ArrayList<PropertyValue>());\r\n    }\r\n\r\n    public PropertyValue[] getPropertyValues() {\r\n        return this.propertyValueList.toArray(new PropertyValue[0]);\r\n    }\r\n\r\n    public PropertyValue getPropertyValue(String propertyName) {\r\n        for (PropertyValue pv : this.propertyValueList) {\r\n            if (pv.getName().equals(propertyName)) {\r\n                return pv;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public Iterator<PropertyValue> iterator() {\r\n        return propertyValueList.iterator();\r\n    }\r\n\r\n    public boolean isEmpty() {\r\n        return this.propertyValueList.isEmpty();\r\n    }\r\n\r\n    public MutablePropertyValues addPropertyValue(PropertyValue pv) {\r\n        for (int i = 0; i < this.propertyValueList.size(); i++) {\r\n            PropertyValue currentPv = this.propertyValueList.get(i);\r\n            if (currentPv.getName().equals(pv.getName())) {\r\n                this.propertyValueList.set(i, new PropertyValue(pv.getName(),pv.getRef(), pv.getValue()));\r\n                return this;\r\n            }\r\n        }\r\n        this.propertyValueList.add(pv);\r\n        return this;\r\n    }\r\n\r\n    public boolean contains(String propertyName) {\r\n        return getPropertyValue(propertyName) != null;\r\n    }\r\n}\r\n```\r\n\r\n#### 7.4.1.3 BeanDefinition \u7C7B\r\n\r\nBeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002\r\n\r\n```java\r\npublic class BeanDefinition {\r\n    private String id;\r\n    private String className;\r\n\r\n    private MutablePropertyValues propertyValues;\r\n\r\n    public BeanDefinition() {\r\n        propertyValues = new MutablePropertyValues();\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getClassName() {\r\n        return className;\r\n    }\r\n\r\n    public void setClassName(String className) {\r\n        this.className = className;\r\n    }\r\n\r\n    public void setPropertyValues(MutablePropertyValues propertyValues) {\r\n        this.propertyValues = propertyValues;\r\n    }\r\n\r\n    public MutablePropertyValues getPropertyValues() {\r\n        return propertyValues;\r\n    }\r\n}\r\n```\r\n\r\n### 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B\r\n\r\n#### 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3\r\n\r\nBeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A\r\n\r\n- \u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D\r\n- \u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61\r\n- \u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61\r\n- \u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61\r\n- \u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570\r\n- \u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0\r\n\r\n```java\r\npublic interface BeanDefinitionRegistry {\r\n\r\n    //\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D\r\n    void registerBeanDefinition(String beanName, BeanDefinition beanDefinition);\r\n\r\n    //\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61\r\n    void removeBeanDefinition(String beanName) throws Exception;\r\n\r\n    //\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61\r\n    BeanDefinition getBeanDefinition(String beanName) throws Exception;\r\n\r\n    boolean containsBeanDefinition(String beanName);\r\n\r\n    int getBeanDefinitionCount();\r\n\r\n    String[] getBeanDefinitionNames();\r\n}\r\n```\r\n\r\n#### 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B\r\n\r\n\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002\r\n\r\n```java\r\npublic class SimpleBeanDefinitionRegistry implements BeanDefinitionRegistry {\r\n\r\n    private Map<String, BeanDefinition> beanDefinitionMap = new HashMap<String, BeanDefinition>();\r\n\r\n    @Override\r\n    public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) {\r\n        beanDefinitionMap.put(beanName,beanDefinition);\r\n    }\r\n\r\n    @Override\r\n    public void removeBeanDefinition(String beanName) throws Exception {\r\n        beanDefinitionMap.remove(beanName);\r\n    }\r\n\r\n    @Override\r\n    public BeanDefinition getBeanDefinition(String beanName) throws Exception {\r\n        return beanDefinitionMap.get(beanName);\r\n    }\r\n\r\n    @Override\r\n    public boolean containsBeanDefinition(String beanName) {\r\n        return beanDefinitionMap.containsKey(beanName);\r\n    }\r\n\r\n    @Override\r\n    public int getBeanDefinitionCount() {\r\n        return beanDefinitionMap.size();\r\n    }\r\n\r\n    @Override\r\n    public String[] getBeanDefinitionNames() {\r\n        return beanDefinitionMap.keySet().toArray(new String[1]);\r\n    }\r\n}\r\n```\r\n\r\n### 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B\r\n\r\n#### 7.4.3.1 BeanDefinitionReader \u63A5\u53E3\r\n\r\nBeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A\r\n\r\n- \u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002\r\n- \u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002\r\n\r\n```java\r\npublic interface BeanDefinitionReader {\r\n\r\n	//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\r\n    BeanDefinitionRegistry getRegistry();\r\n	//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C\r\n    void loadBeanDefinitions(String configLocation) throws Exception;\r\n}\r\n```\r\n\r\n#### 7.4.3.2 XmlBeanDefinitionReader \u7C7B\r\n\r\nXmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002\r\n\r\n```java\r\npublic class XmlBeanDefinitionReader implements BeanDefinitionReader {\r\n\r\n    private BeanDefinitionRegistry registry;\r\n\r\n    public XmlBeanDefinitionReader() {\r\n        this.registry = new SimpleBeanDefinitionRegistry();\r\n    }\r\n\r\n    @Override\r\n    public BeanDefinitionRegistry getRegistry() {\r\n        return registry;\r\n    }\r\n\r\n    @Override\r\n    public void loadBeanDefinitions(String configLocation) throws Exception {\r\n\r\n        InputStream is = this.getClass().getClassLoader().getResourceAsStream(configLocation);\r\n        SAXReader reader = new SAXReader();\r\n        Document document = reader.read(is);\r\n        Element rootElement = document.getRootElement();\r\n        //\u89E3\u6790bean\u6807\u7B7E\r\n        parseBean(rootElement);\r\n    }\r\n\r\n    private void parseBean(Element rootElement) {\r\n\r\n        List<Element> elements = rootElement.elements();\r\n        for (Element element : elements) {\r\n            String id = element.attributeValue("id");\r\n            String className = element.attributeValue("class");\r\n            BeanDefinition beanDefinition = new BeanDefinition();\r\n            beanDefinition.setId(id);\r\n            beanDefinition.setClassName(className);\r\n            List<Element> list = element.elements("property");\r\n            MutablePropertyValues mutablePropertyValues = new MutablePropertyValues();\r\n            for (Element element1 : list) {\r\n                String name = element1.attributeValue("name");\r\n                String ref = element1.attributeValue("ref");\r\n                String value = element1.attributeValue("value");\r\n                PropertyValue propertyValue = new PropertyValue(name,ref,value);\r\n                mutablePropertyValues.addPropertyValue(propertyValue);\r\n            }\r\n            beanDefinition.setPropertyValues(mutablePropertyValues);\r\n\r\n            registry.registerBeanDefinition(id,beanDefinition);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B\r\n\r\n#### 7.4.4.1 BeanFactory \u63A5\u53E3\r\n\r\n\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002\r\n\r\n```java\r\npublic interface BeanFactory {\r\n	//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\r\n    Object getBean(String name) throws Exception;\r\n	//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362\r\n    <T> T getBean(String name, Class<? extends T> clazz) throws Exception;\r\n}\r\n```\r\n\r\n#### 7.4.4.2 ApplicationContext \u63A5\u53E3\r\n\r\n\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 `refresh()` \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A\r\n\r\n- \u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002\r\n- \u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002\r\n\r\n```java\r\npublic interface ApplicationContext extends BeanFactory {\r\n	//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA\r\n    void refresh() throws IllegalStateException, Exception;\r\n}\r\n```\r\n\r\n#### 7.4.4.3 AbstractApplicationContext \u7C7B\r\n\r\n- \u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002\r\n\r\n- \u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002\r\n\r\n  BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\r\n\r\n```java\r\npublic abstract class AbstractApplicationContext implements ApplicationContext {\r\n\r\n    protected BeanDefinitionReader beanDefinitionReader;\r\n    //\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61\r\n    protected Map<String, Object> singletonObjects = new HashMap<String, Object>();\r\n\r\n    //\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84\r\n    protected String configLocation;\r\n\r\n    public void refresh() throws IllegalStateException, Exception {\r\n\r\n        //\u52A0\u8F7DBeanDefinition\r\n        beanDefinitionReader.loadBeanDefinitions(configLocation);\r\n\r\n        //\u521D\u59CB\u5316bean\r\n        finishBeanInitialization();\r\n    }\r\n\r\n    //bean\u7684\u521D\u59CB\u5316\r\n    private void finishBeanInitialization() throws Exception {\r\n        BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();\r\n        String[] beanNames = registry.getBeanDefinitionNames();\r\n\r\n        for (String beanName : beanNames) {\r\n            BeanDefinition beanDefinition = registry.getBeanDefinition(beanName);\r\n            getBean(beanName);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n> \u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\r\n\r\n#### 7.4.4.4 ClassPathXmlApplicationContext \u7C7B\r\n\r\n\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A\r\n\r\n- \u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002\r\n- \u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002\r\n- \u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002\r\n\r\n```java\r\npublic class ClassPathXmlApplicationContext extends AbstractApplicationContext{\r\n\r\n    public ClassPathXmlApplicationContext(String configLocation) {\r\n        this.configLocation = configLocation;\r\n        //\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61\r\n        beanDefinitionReader = new XmlBeanDefinitionReader();\r\n        try {\r\n            this.refresh();\r\n        } catch (Exception e) {\r\n        }\r\n    }\r\n\r\n    //\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61\r\n    @Override\r\n    public Object getBean(String name) throws Exception {\r\n\r\n        //return singletonObjects.get(name);\r\n        Object obj = singletonObjects.get(name);\r\n        if(obj != null) {\r\n            return obj;\r\n        }\r\n\r\n        BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();\r\n        BeanDefinition beanDefinition = registry.getBeanDefinition(name);\r\n        if(beanDefinition == null) {\r\n            return null;\r\n        }\r\n        String className = beanDefinition.getClassName();\r\n        Class<?> clazz = Class.forName(className);\r\n        Object beanObj = clazz.newInstance();\r\n        MutablePropertyValues propertyValues = beanDefinition.getPropertyValues();\r\n        for (PropertyValue propertyValue : propertyValues) {\r\n            String propertyName = propertyValue.getName();\r\n            String value = propertyValue.getValue();\r\n            String ref = propertyValue.getRef();\r\n            if(ref != null && !"".equals(ref)) {\r\n\r\n                Object bean = getBean(ref);\r\n                String methodName = StringUtils.getSetterMethodNameByFieldName(propertyName);\r\n                Method[] methods = clazz.getMethods();\r\n                for (Method method : methods) {\r\n                    if(method.getName().equals(methodName)) {\r\n                        method.invoke(beanObj,bean);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if(value != null && !"".equals(value)) {\r\n                String methodName = StringUtils.getSetterMethodNameByFieldName(propertyName);\r\n                Method method = clazz.getMethod(methodName, String.class);\r\n                method.invoke(beanObj,value);\r\n            }\r\n        }\r\n        singletonObjects.put(name,beanObj);\r\n        return beanObj;\r\n    }\r\n\r\n    @Override\r\n    public <T> T getBean(String name, Class<? extends T> clazz) throws Exception {\r\n\r\n        Object bean = getBean(name);\r\n        if(bean != null) {\r\n            return clazz.cast(bean);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n### 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3\r\n\r\n#### 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F\r\n\r\n- \u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002\r\n- \u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002\r\n- \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002\r\n- \u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002\r\n\r\nspring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002\r\n\r\n#### 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219\r\n\r\n#### 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165\r\n\r\nspring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A\r\n\r\n- \u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002\r\n- \u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002\r\n- \u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002\r\n', "contentRendered": `<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
<!-- more -->
<h1 id="_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" aria-hidden="true">#</a> 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0</h1>
<h2 id="_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" aria-hidden="true">#</a> 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F</h2>
<p>&quot;\u8BBE\u8BA1\u6A21\u5F0F&quot;\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002</p>
<p>1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB<code v-pre>\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09</code>\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002</p>
<p>1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002</p>
<h2 id="_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" aria-hidden="true">#</a> 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5</h2>
<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
<h2 id="_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" tabindex="-1"><a class="header-anchor" href="#_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" aria-hidden="true">#</a> 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027</h2>
<p>\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002</p>
<p>\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002</p>
<ul>
<li>\u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002</li>
<li>\u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002</li>
<li>\u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002</li>
</ul>
<h2 id="_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" aria-hidden="true">#</a> 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B</h2>
<ul>
<li>
<p><strong>\u521B\u5EFA\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002</p>
</li>
<li>
<p><strong>\u7ED3\u6784\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002</p>
</li>
<li>
<p><strong>\u884C\u4E3A\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p>
</li>
</ul>
<h1 id="_2-uml-\u56FE" tabindex="-1"><a class="header-anchor" href="#_2-uml-\u56FE" aria-hidden="true">#</a> 2\uFF0CUML \u56FE</h1>
<p>\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002</p>
<p>UML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002</p>
<h2 id="_2-1-\u7C7B\u56FE\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_2-1-\u7C7B\u56FE\u6982\u8FF0" aria-hidden="true">#</a> 2.1 \u7C7B\u56FE\u6982\u8FF0</h2>
<p>\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002</p>
<h2 id="_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" aria-hidden="true">#</a> 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528</h2>
<ul>
<li>\u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B</li>
<li>\u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002</li>
</ul>
<h2 id="_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" aria-hidden="true">#</a> 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5</h2>
<h3 id="_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F</h3>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002</p>
<p><img src="\\img\\Employee.jpg" alt=""></p>
<p>\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A</p>
<ul>
<li>
<p>+\uFF1A\u8868\u793A public</p>
</li>
<li>
<p>-\uFF1A\u8868\u793A private</p>
</li>
<li>
<p>#\uFF1A\u8868\u793A protected</p>
</li>
</ul>
<p>\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]</strong></p>
<p>\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]</strong></p>
<blockquote>
<p>\u6CE8\u610F\uFF1A</p>
<p>\u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684</p>
<p>\u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762</p>
</blockquote>
<p><strong>\u4E3E\u4E2A\u6817\u5B50\uFF1A</strong></p>
<p><img src="\\img\\demo.png" alt=""></p>
<p>\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A</p>
<ul>
<li>method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002</li>
<li>method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002</li>
<li>method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002</li>
</ul>
<h3 id="_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F</h3>
<h4 id="_2-3-2-1-\u5173\u8054\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-1-\u5173\u8054\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.1 \u5173\u8054\u5173\u7CFB</h4>
<p>\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002</p>
<p>\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002</p>
<p><strong>1\uFF0C\u5355\u5411\u5173\u8054</strong></p>
<p><img src="\\img\\customer_address.png" alt=""></p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002</p>
<p><strong>2\uFF0C\u53CC\u5411\u5173\u8054</strong></p>
<p><img src="\\img\\customer_product.png" alt=""></p>
<p>\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List&lt;Product&gt;\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002</p>
<p><strong>3\uFF0C\u81EA\u5173\u8054</strong></p>
<p><img src="\\img\\node.png" alt=""></p>
<p>\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002</p>
<h4 id="_2-3-2-2-\u805A\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-2-\u805A\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.2 \u805A\u5408\u5173\u7CFB</h4>
<p>\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002</p>
<p>\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A</p>
<p><img src="\\img\\image-20191229173422328.png" alt=""></p>
<h4 id="_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.3 \u7EC4\u5408\u5173\u7CFB</h4>
<p>\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002</p>
<p>\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A</p>
<p><img src="\\img\\image-20191229173455149.png" alt=""></p>
<h4 id="_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB</h4>
<p>\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A</p>
<p><img src="\\img\\image-20191229173518926.png" alt=""></p>
<h4 id="_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.5 \u7EE7\u627F\u5173\u7CFB</h4>
<p>\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p>
<p><img src="\\img\\image-20191229173539838.png" alt=""></p>
<h4 id="_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB</h4>
<p>\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002</p>
<p><img src="\\img\\image-20191229173554296.png" alt=""></p>
<h1 id="_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219</h1>
<p>\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002</p>
<h2 id="_3-1-\u5F00\u95ED\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-1-\u5F00\u95ED\u539F\u5219" aria-hidden="true">#</a> 3.1 \u5F00\u95ED\u539F\u5219</h2>
<p><strong>\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED</strong>\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002</p>
<p>\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002</p>
<p>\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002</p>
<p>\u4E0B\u9762\u4EE5 <code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002</p>
<p>\u3010\u4F8B\u3011<code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002</p>
<p>\u5206\u6790\uFF1A<code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002</p>
<p><img src="\\img\\open-close.png" alt=""></p>
<h2 id="_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" aria-hidden="true">#</a> 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219</h2>
<p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002</p>
<p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002</p>
<p>\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50</p>
<p>\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p>
<p>\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002</p>
<p><img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> length<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> width<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A</strong></p>
<p>\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RectangleDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Rectangle</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"============"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Rectangle</span> rectangle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle1<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002
\u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p>
<p>\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3</p>
<img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png" style="zoom:80%;" />
<h2 id="_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" aria-hidden="true">#</a> 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219</h2>
<p>\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111</p>
<p>\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002</p>
<p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p>
<img src="\\img\\\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XiJieHardDisk</span> <span class="token keyword">implements</span> <span class="token class-name">HardDisk</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E"</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"\u6570\u636E"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IntelCpu</span> <span class="token keyword">implements</span> <span class="token class-name">Cpu</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528Intel\u5904\u7406\u5668"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KingstonMemory</span> <span class="token keyword">implements</span> <span class="token class-name">Memory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">IntelCpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">KingstonMemory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">XiJieHardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8BA1\u7B97\u673A\u5DE5\u4F5C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cpu<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> hardDisk<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A"</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A</strong></p>
<p>\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestComputer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XiJieHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IntelCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KingstonMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        computer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002</p>
<p>\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A</p>
<p>\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002</p>
<p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p>
<img src="/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png" alt="image-20191229173554296" style="zoom:70%;" />
<p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Cpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Memory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">Cpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Memory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">Memory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8BA1\u7B97\u673A\u5DE5\u4F5C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002</p>
<h2 id="_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" aria-hidden="true">#</a> 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219</h2>
<p>\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B</p>
<p>\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A<code v-pre>\u9ED1\u9A6C</code>\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u5219.png" alt=""></p>
<p>\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A</p>
<p><img src="\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u52191.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AntiTheft</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeiMaSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span><span class="token punctuation">,</span><span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u76D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u706B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u6C34"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItcastSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u76D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u706B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" tabindex="-1"><a class="header-anchor" href="#_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" aria-hidden="true">#</a> 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219</h2>
<p>\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002</p>
<p>\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002</p>
<p>\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002</p>
<p>\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219</p>
<p>\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B</p>
<p>\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u660E\u661F\u7C7B\uFF08Star\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fans</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Fans</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Agent</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Star</span> star<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Fans</span> fans<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Company</span> company<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStar</span><span class="token punctuation">(</span><span class="token class-name">Star</span> star<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>star <span class="token operator">=</span> star<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFans</span><span class="token punctuation">(</span><span class="token class-name">Fans</span> fans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fans <span class="token operator">=</span> fans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCompany</span><span class="token punctuation">(</span><span class="token class-name">Company</span> company<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">meeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fans<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u4E0E\u660E\u661F"</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u89C1\u9762\u4E86\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">business</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>company<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u4E0E\u660E\u661F"</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u6D3D\u6DE1\u4E1A\u52A1\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" aria-hidden="true">#</a> 3.6 \u5408\u6210\u590D\u7528\u539F\u5219</h2>
<p>\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002</p>
<p>\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002</p>
<p>\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A</p>
<ol>
<li>\u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002</li>
<li>\u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002</li>
<li>\u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002</li>
</ol>
<p>\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A</p>
<ol>
<li>\u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002</li>
<li>\u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002</li>
<li>\u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002</li>
</ol>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F</p>
<p>\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5408\u6210\u590D\u7528\u539F\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />
<p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002</p>
<img src="/img/\u5408\u6210\u590D\u7528\u539F\u52191.png" alt="image-20191229173554296" style="zoom:80%;" />
<h1 id="_4-\u521B\u5EFA\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-\u521B\u5EFA\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F</h1>
<p>\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002</p>
<p>\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002</p>
<p>\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p>
<ul>
<li>\u5355\u4F8B\u6A21\u5F0F</li>
<li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F</li>
<li>\u539F\u578B\u6A21\u5F0F</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F</li>
</ul>
<h2 id="_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</h2>
<p>\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002</p>
<p>\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<h3 id="_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" aria-hidden="true">#</a> 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784</h3>
<p>\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B</li>
<li>\u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B</li>
</ul>
<h3 id="_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0</h3>
<blockquote>
<p>\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A</p>
<p>\u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA</p>
<p>\u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA</p>
</blockquote>
<ol>
<li>
<p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u997F\u6C49\u5F0F
 *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002</p>
</li>
<li>
<p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6076\u6C49\u5F0F
 *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u4E0D\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09</p>
<p>\u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E <code v-pre>getInstance()</code> \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002</p>
<p>\u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 <code v-pre>volatile</code> \u5173\u952E\u5B57, <code v-pre>volatile</code> \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u6DFB\u52A0 <code v-pre>volatile</code> \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09</p>
<p>\u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB <code v-pre>static</code> \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder</p>
<p>\u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002</p>
<div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002</p>
</li>
<li>
<p>\u679A\u4E3E\u65B9\u5F0F</p>
<p>\u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u679A\u4E3E\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    INSTANCE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002</p>
</li>
</ol>
<h3 id="_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" aria-hidden="true">#</a> 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898</h3>
<h4 id="_4-1-3-1-\u95EE\u9898\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#_4-1-3-1-\u95EE\u9898\u6F14\u793A" aria-hidden="true">#</a> 4.1.3.1 \u95EE\u9898\u6F14\u793A</h4>
<p>\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002</p>
<ul>
<li>
<p>\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61</span>
        <span class="token comment">//writeObject2File();</span>
        <span class="token comment">//\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeObject2File</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code v-pre>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p>
</blockquote>
</li>
<li>
<p>\u53CD\u5C04</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61</span>
        <span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5</span>
        constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code v-pre>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</p>
</blockquote>
</li>
</ul>
<blockquote>
<div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002
</blockquote>
<h4 id="_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" aria-hidden="true">#</a> 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3</h4>
<ul>
<li>
<p>\u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5</p>
<p>\u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0<code v-pre>readResolve()</code>\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6E90\u7801\u89E3\u6790\uFF1A</strong></p>
<p>ObjectInputStream \u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// if nested read, passHandle contains handle of enclosing object</span>
    <span class="token keyword">int</span> outerHandle <span class="token operator">=</span> passHandle<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>tc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
			<span class="token keyword">case</span> TC_OBJECT<span class="token operator">:</span>
				<span class="token keyword">return</span> <span class="token function">checkResolve</span><span class="token punctuation">(</span><span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span>unshared<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        depth<span class="token operator">--</span><span class="token punctuation">;</span>
        bin<span class="token punctuation">.</span><span class="token function">setBlockDataMode</span><span class="token punctuation">(</span>oldMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C</span>
    obj <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">isInstantiable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> desc<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> handles<span class="token punctuation">.</span><span class="token function">lookupException</span><span class="token punctuation">(</span>passHandle<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> desc<span class="token punctuation">.</span><span class="token function">hasReadResolveMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF</span>
    	<span class="token comment">// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002</span>
    	<span class="token class-name">Object</span> rep <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">invokeReadResolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/*
           \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801
        */</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E:</div>
<p>\u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002</p>
</li>
</ul>
<h3 id="_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" aria-hidden="true">#</a> 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B</h3>
<p>Runtime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p>
<ol>
<li>
<p>\u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> currentRuntime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Returns the runtime object associated with the current Java application.
     * Most of the methods of class <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span> are instance
     * methods and must be invoked with respect to the current runtime object.
     *
     * <span class="token keyword">@return</span>  the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span> object associated with the current
     *          Java application.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> <span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> currentRuntime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/** Don't let anyone else instantiate this class */</span>
    <span class="token keyword">private</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002</p>
</li>
<li>
<p>\u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuntimeDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61</span>
        <span class="token class-name">Runtime</span> runtime <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">totalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">maxMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61</span>
        <span class="token class-name">Process</span> process <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">"ipconfig"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ol>
<h2 id="_4-2-\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2 \u5DE5\u5382\u6A21\u5F0F</h2>
<h3 id="_4-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.2.1 \u6982\u8FF0</h3>
<p>\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002</p>
<p>\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002</p>
<p>\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png" style="zoom:80%;" />
<p>\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A<strong>\u89E3\u8026</strong>\u3002</p>
<p>\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528</p>
<ul>
<li>\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09</li>
<li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</li>
</ul>
<h3 id="_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F</h3>
<p>\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002</p>
<h4 id="_4-2-2-1-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-2-1-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.2.1 \u7ED3\u6784</h4>
<p>\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B</li>
<li>\u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002</li>
</ul>
<h4 id="_4-2-2-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-2-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.2.2 \u5B9E\u73B0</h4>
<p>\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"americano"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002</p>
<p>\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002</p>
<h4 id="_4-2-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.2.4 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<p>\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002</p>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
<h4 id="_4-2-2-3-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-2-3-\u6269\u5C55" aria-hidden="true">#</a> 4.2.2.3 \u6269\u5C55</h4>
<p><strong>\u9759\u6001\u5DE5\u5382</strong></p>
<p>\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"americano"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffe<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</h3>
<p>\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002</p>
<h4 id="_4-2-3-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-3-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.3.1 \u6982\u5FF5</h4>
<p>\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002</p>
<h4 id="_4-2-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.3.2 \u7ED3\u6784</h4>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li>
<li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002</li>
</ul>
<h4 id="_4-2-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.3.3 \u5B9E\u73B0</h4>
<p>\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5496\u5561\u5E97\u7C7B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002</p>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002</p>
<h4 id="_4-2-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.3.4 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B</li>
<li>\u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002</li>
</ul>
<h3 id="_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</h3>
<p>\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002</p>
<p>\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002</p>
<p>\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002</p>
<img src="/img/image-20200401214509176.png" style="zoom:67%;" />
<img src="/img/image-20200401222951963.png" style="zoom:67%;" />
<h4 id="_4-2-4-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-4-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.4.1 \u6982\u5FF5</h4>
<p>\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002</p>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</p>
<h4 id="_4-2-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.4.2 \u7ED3\u6784</h4>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li>
<li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002</li>
</ul>
<h4 id="_4-2-4-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.4.2 \u5B9E\u73B0</h4>
<p>\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:67%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MatchaMousse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItalyDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tiramisu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002</p>
<h4 id="_4-2-4-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-4-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.4.3 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<p>\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002</p>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002</p>
<h4 id="_4-2-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.2.4.4 \u4F7F\u7528\u573A\u666F</h4>
<ul>
<li>
<p>\u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002</p>
</li>
<li>
<p>\u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002</p>
</li>
<li>
<p>\u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002</p>
</li>
</ul>
<p>\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002</p>
<h3 id="_4-2-5-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-5-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.2.5 \u6A21\u5F0F\u6269\u5C55</h3>
<p><strong>\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408</strong></p>
<p>\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002</p>
<p>\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6</p>
<p>\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties</p>
<div class="language-properties ext-properties line-numbers-mode"><pre v-pre class="language-properties"><code><span class="token key attr-name">american</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.AmericanCoffee</span>
<span class="token key attr-name">latte</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.LatteCoffee</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Coffee</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">CoffeeFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"bean.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            p<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> keys <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09</span>
                <span class="token class-name">String</span> className <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61</span>
                <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Coffee</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Coffee</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002</p>
<h3 id="_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" aria-hidden="true">#</a> 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5</h3>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u4EE4\u72D0\u51B2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u98CE\u6E05\u626C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u4EFB\u6211\u884C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> ele <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A</p>
<img src="/img/jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:75%;" />
<p>Collection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<blockquote>
<p>\u53E6\uFF1A</p>
<p>\u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p>
<p>\u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p>
</blockquote>
<h2 id="_4-3-\u539F\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-3-\u539F\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 4.3 \u539F\u578B\u6A21\u5F0F</h2>
<h3 id="_4-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.3.1 \u6982\u8FF0</h3>
<p>\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002</p>
<h3 id="_4-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.3.2 \u7ED3\u6784</h3>
<p>\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002</li>
<li>\u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002</li>
<li>\u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002</li>
</ul>
<p>\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u539F\u578B\u6A21\u5F0F.png" alt=""></p>
<h3 id="_4-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.3.3 \u5B9E\u73B0</h3>
<p>\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002</p>
<blockquote>
<p>\u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002</p>
<p>\u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002</p>
</blockquote>
<p>Java \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 <code v-pre>clone()</code> \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Realizetype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Realizetype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Realizetype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypeTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Realizetype</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Realizetype</span> r2 <span class="token operator">=</span> r1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>r1 <span class="token operator">==</span> r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-4-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-3-4-\u6848\u4F8B" aria-hidden="true">#</a> 4.3.4 \u6848\u4F8B</h3>
<p><strong>\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6</strong></p>
<p>\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F1.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB</span>
        c2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.3.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002</li>
<li>\u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</li>
</ul>
<h3 id="_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" tabindex="-1"><a class="header-anchor" href="#_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" aria-hidden="true">#</a> 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09</h3>
<p>\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Student</span> stu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStu</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stu <span class="token operator">=</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B66\u751F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>

        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> <span class="token string">"\u897F\u5B89"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F2.png" style="zoom:80%;" />
<div color="red">\u8BF4\u660E\uFF1A</div>
<p>\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> <span class="token string">"\u897F\u5B89"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F3.png" style="zoom:80%;" />
<blockquote>
<p>\u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002</p>
</blockquote>
<h2 id="_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F</h2>
<h3 id="_4-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.4.1 \u6982\u8FF0</h3>
<p>\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002</p>
<img src="/img/image-20200413225341516.png" style="zoom:60%;" />
<ul>
<li>\u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002</li>
<li>\u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002</li>
</ul>
<h3 id="_4-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.4.2 \u7ED3\u6784</h3>
<p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002</p>
</li>
<li>
<p>\u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002</p>
</li>
<li>
<p>\u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002</p>
</li>
</ul>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png" style="zoom:80%;" />
<h3 id="_4-4-3-\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-4-3-\u5B9E\u4F8B" aria-hidden="true">#</a> 4.4.3 \u5B9E\u4F8B</h3>
<p><strong>\u521B\u5EFA\u5171\u4EAB\u5355\u8F66</strong></p>
<p>\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002</p>
<p>\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png" style="zoom:80%;" />
<p>\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u81EA\u884C\u8F66\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bike</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> frame<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> seat<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token class-name">String</span> frame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frame <span class="token operator">=</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token class-name">String</span> seat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seat <span class="token operator">=</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6469\u62DC\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobikeBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"\u94DD\u5408\u91D1\u8F66\u67B6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"\u771F\u76AE\u8F66\u5EA7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ofo\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OfoBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"\u78B3\u7EA4\u7EF4\u8F66\u67B6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"\u6A61\u80F6\u8F66\u5EA7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6307\u6325\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Builder</span> mBuilder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder <span class="token operator">=</span> builder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mBuilder<span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MobikeBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Director</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bike</span> bike <span class="token operator">=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F\uFF1A</strong></p>
<p>\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>BuildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u8BF4\u660E\uFF1A</strong></p>
<p>\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002</p>
<h3 id="_4-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.4.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002</li>
<li>\u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002</li>
<li>\u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002</p>
<h3 id="_4-4-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-4-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.4.5 \u4F7F\u7528\u573A\u666F</h3>
<p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002</p>
<ul>
<li>\u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002</li>
<li>\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002</li>
</ul>
<h3 id="_4-4-6-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-4-6-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.4.6 \u6A21\u5F0F\u6269\u5C55</h3>
<p>\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002</p>
<p>\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">,</span> <span class="token class-name">String</span> screen<span class="token punctuation">,</span> <span class="token class-name">String</span> memory<span class="token punctuation">,</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setScreen</span><span class="token punctuation">(</span><span class="token class-name">String</span> screen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">String</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMainboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u6784\u5EFAPhone\u5BF9\u8C61</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">"intel"</span><span class="token punctuation">,</span><span class="token string">"\u4E09\u661F\u5C4F\u5E55"</span><span class="token punctuation">,</span><span class="token string">"\u91D1\u58EB\u987F"</span><span class="token punctuation">,</span><span class="token string">"\u534E\u7855"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002</p>
<p>\u91CD\u6784\u540E\u4EE3\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cpu <span class="token operator">=</span> builder<span class="token punctuation">.</span>cpu<span class="token punctuation">;</span>
        screen <span class="token operator">=</span> builder<span class="token punctuation">.</span>screen<span class="token punctuation">;</span>
        memory <span class="token operator">=</span> builder<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
        mainboard <span class="token operator">=</span> builder<span class="token punctuation">.</span>mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cpu <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">screen</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            screen <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">memory</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            memory <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mainboard <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">cpu</span><span class="token punctuation">(</span><span class="token string">"intel"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token string">"\u534E\u7855"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token string">"\u91D1\u58EB\u987F"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">screen</span><span class="token punctuation">(</span><span class="token string">"\u4E09\u661F"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</p>
<h2 id="_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" aria-hidden="true">#</a> 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4</h2>
<h3 id="_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002</p>
<p>\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002</p>
<h3 id="_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002</p>
<p>\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002</p>
<p>\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002</p>
<h1 id="_5-\u7ED3\u6784\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-\u7ED3\u6784\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F</h1>
<p>\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002</p>
<p>\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p>
<p>\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A</p>
<ul>
<li>\u4EE3\u7406\u6A21\u5F0F</li>
<li>\u9002\u914D\u5668\u6A21\u5F0F</li>
<li>\u88C5\u9970\u8005\u6A21\u5F0F</li>
<li>\u6865\u63A5\u6A21\u5F0F</li>
<li>\u5916\u89C2\u6A21\u5F0F</li>
<li>\u7EC4\u5408\u6A21\u5F0F</li>
<li>\u4EAB\u5143\u6A21\u5F0F</li>
</ul>
<h2 id="_5-1-\u4EE3\u7406\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-1-\u4EE3\u7406\u6A21\u5F0F" aria-hidden="true">#</a> 5.1 \u4EE3\u7406\u6A21\u5F0F</h2>
<h3 id="_5-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.1.1 \u6982\u8FF0</h3>
<p>\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002</p>
<p>Java \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002</p>
<h3 id="_5-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.1.2 \u7ED3\u6784</h3>
<p>\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li>
<li>\u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002</li>
<li>\u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002</li>
</ul>
<h3 id="_5-1-3-\u9759\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-3-\u9759\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.3 \u9759\u6001\u4EE3\u7406</h3>
<p>\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002</p>
<p>\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968</p>
<p>\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u9759\u6001\u4EE3\u7406.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u552E\u70B9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyPoint</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        station<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProxyPoint</span> pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pp<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002</p>
<h3 id="_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.4 JDK \u52A8\u6001\u4EE3\u7406</h3>
<p>\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002</p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token comment">/*
            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF
                Class&lt;?>[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3
                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F
         */</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">/*
                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61
                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B
                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570
                     */</span>
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//\u6267\u884C\u771F\u5B9E\u5BF9\u8C61</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div>
<ul>
<li>
<p>ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F</p>
<p>ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>jdk<span class="token punctuation">.</span></span><span class="token class-name">SellTickets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">UndeclaredThrowableException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m1<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m2<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m0<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            m1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"equals"</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"toString"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.proxy.dynamic.jdk.SellTickets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"sell"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m0 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"hashCode"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMethodException</span> noSuchMethodException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchMethodError</span><span class="token punctuation">(</span>noSuchMethodException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> classNotFoundException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoClassDefFoundError</span><span class="token punctuation">(</span>classNotFoundException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m1<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m0<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A</p>
<ul>
<li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002</li>
<li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002</li>
</ul>
</li>
<li>
<p>\u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F</p>
<p>\u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.proxy.dynamic.jdk.SellTickets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"sell"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">;</span>

	<span class="token keyword">protected</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> h<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<p>\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A</p>
<pre><code>1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5
2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5
3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5
4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5
</code></pre>
<h3 id="_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406</h3>
<p>\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002</p>
<p>\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002</p>
<p>CGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002</p>
<p>CGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u706B\u8F66\u7AD9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
            o \uFF1A \u4EE3\u7406\u5BF9\u8C61
            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B
            args \uFF1A \u5B9E\u9645\u53C2\u6570
            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrainStation</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" aria-hidden="true">#</a> 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4</h3>
<ul>
<li>
<p>jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406</p>
<p>\u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002</p>
<p>\u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002</p>
</li>
<li>
<p>\u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406</p>
<p>\u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002</p>
<p>\u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898</p>
</li>
</ul>
<h3 id="_5-1-7-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-1-7-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 5.1.7 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B</li>
<li>\u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B</li>
<li>\u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B</li>
</ul>
<h3 id="_5-1-8-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-1-8-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.1.8 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406</p>
<p>\u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002</p>
</li>
<li>
<p>\u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406</p>
<p>\u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002</p>
</li>
<li>
<p>\u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406</p>
<p>\u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002</p>
</li>
</ul>
<h2 id="_5-2-\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2 \u9002\u914D\u5668\u6A21\u5F0F</h2>
<h3 id="_5-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.2.1 \u6982\u8FF0</h3>
<p>\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p>
<p><img src="\\img\\\u8F6C\u63A5\u5934.png" alt=""></p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002</p>
<p>\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002</p>
<h3 id="_5-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.2.2 \u7ED3\u6784</h3>
<p>\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002</li>
<li>\u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002</li>
<li>\u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002</li>
</ul>
<h3 id="_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F</h3>
<p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002</p>
<p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p>
<p>\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//SD\u5361\u7684\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6SD\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165SD\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//SD\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">"sd card read a msg :hello word SD"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sd card write msg : "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u8111\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token class-name">SDCard</span> sdCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sdCard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">"sd card null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sdCard<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6TF\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165TF\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span><span class="token string">"tf card read msg : hello word tf card"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"tf card write a msg : "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span> <span class="token keyword">extends</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter read tf card "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter write tf card"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002</p>
<h3 id="_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F</h3>
<p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002</p>
<p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p>
<p>\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span>  <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TFCard</span> tfCard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token class-name">TFCard</span> tfCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tfCard <span class="token operator">=</span> tfCard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter read tf card "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tfCard<span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter write tf card"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tfCard<span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TFCard</span> tfCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TFCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span>tfCard<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002</p>
</blockquote>
<h3 id="_5-2-5-\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-2-5-\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> 5.2.5 \u5E94\u7528\u573A\u666F</h3>
<ul>
<li>\u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002</li>
<li>\u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002</li>
</ul>
<h3 id="_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.2.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Reader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002</p>
<p>InputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">char</span> cbuf<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" alt=""></p>
<p>\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A</p>
<ul>
<li>InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002</li>
<li>StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002</li>
</ul>
<div color="red">\u7ED3\u8BBA\uFF1A</div>
<p>\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p>
<h2 id="_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 5.3 \u88C5\u9970\u8005\u6A21\u5F0F</h2>
<h3 id="_5-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.3.1 \u6982\u8FF0</h3>
<p>\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002</p>
<p>\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002</p>
<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png" style="zoom:80%;" />
<p>\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A</p>
<ul>
<li>
<p>\u6269\u5C55\u6027\u4E0D\u597D</p>
<p>\u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002</p>
</li>
<li>
<p>\u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B</p>
</li>
</ul>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002</p>
<h3 id="_5-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.3.2 \u7ED3\u6784</h3>
<p>\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002</li>
<li>\u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002</li>
<li>\u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002</li>
</ul>
<h3 id="_5-3-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-3-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.3.3 \u6848\u4F8B</h3>
<p>\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F.png" style="zoom:75%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5FEB\u9910\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDesc</span><span class="token punctuation">(</span><span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u83B7\u53D6\u4EF7\u683C</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u996D</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedRice</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"\u7092\u996D"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u9762</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedNoodles</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"\u7092\u9762"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u914D\u6599\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Garnish</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">FastFood</span> fastFood<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFastFood</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Garnish</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">,</span> <span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u9E21\u86CB\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Egg</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"\u9E21\u86CB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u57F9\u6839\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bacon</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"\u57F9\u6839"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span>food1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food1<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food1<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762</span>
        <span class="token class-name">FastFood</span> food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span>food2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food2<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food2<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>
<p>\u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002</p>
</li>
<li>
<p>\u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002</p>
</li>
</ul>
<h3 id="_5-3-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-3-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.3.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002</p>
<p>\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A</p>
<ul>
<li>\u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B</li>
<li>\u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09</li>
</ul>
</li>
<li>
<p>\u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002</p>
</li>
<li>
<p>\u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002</p>
</li>
</ul>
<h3 id="_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.3.5 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>IO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002</p>
<p>\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFABufferedWriter\u5BF9\u8C61</span>
        <span class="token comment">//\u521B\u5EFAFileWriter\u5BF9\u8C61</span>
        <span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>fw<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5199\u6570\u636E</span>
        bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"hello Buffered"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A</p>
<img src="\\img\\\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png" style="zoom:80%;" />
<blockquote>
<div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002</p>
</blockquote>
<h3 id="_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" aria-hidden="true">#</a> 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B</h3>
<p>\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A</p>
<ul>
<li>\u76F8\u540C\u70B9\uFF1A
<ul>
<li>\u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3</li>
<li>\u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61</li>
<li>\u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5</li>
</ul>
</li>
<li>\u4E0D\u540C\u70B9\uFF1A
<ul>
<li>\u76EE\u7684\u4E0D\u540C
\u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61
\u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li>
<li>\u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C
\u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012
\u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li>
</ul>
</li>
</ul>
<h2 id="_5-4-\u6865\u63A5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-4-\u6865\u63A5\u6A21\u5F0F" aria-hidden="true">#</a> 5.4 \u6865\u63A5\u6A21\u5F0F</h2>
<h3 id="_5-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.4.1 \u6982\u8FF0</h3>
<p>\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A</p>
<p><img src="\\img\\image-20200207194617620.png" alt=""></p>
<p>\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002</p>
<p>\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002</p>
<h3 id="_5-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.4.2 \u7ED3\u6784</h3>
<p>\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002</li>
<li>\u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li>
<li>\u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002</li>
<li>\u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002</li>
</ul>
<h3 id="_5-4-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-4-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.4.3 \u6848\u4F8B</h3>
<p>\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668</p>
<p>\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u6865\u63A5\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u89C6\u9891\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//avi\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AVIFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"avi\u89C6\u9891\u6587\u4EF6\uFF1A"</span><span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//rmvb\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">REVBBFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"rmvb\u6587\u4EF6\uFF1A"</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OperatingSystemVersion</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoFile <span class="token operator">=</span> videoFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Windows\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Windows</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystem</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//mac\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mac</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Mac</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OperatingSystem</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AVIFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">"\u6218\u72FC3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>
<p>\u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002</p>
<p>\u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E</p>
</li>
</ul>
<h3 id="_5-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.4.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002</li>
<li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002</li>
<li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002</li>
</ul>
<h2 id="_5-5-\u5916\u89C2\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-5-\u5916\u89C2\u6A21\u5F0F" aria-hidden="true">#</a> 5.5 \u5916\u89C2\u6A21\u5F0F</h2>
<h3 id="_5-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.5.1 \u6982\u8FF0</h3>
<p>\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002</p>
<p>\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528</p>
<p><img src="\\img\\\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg" alt=""></p>
<h3 id="_5-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.5.2 \u7ED3\u6784</h3>
<p>\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002</li>
<li>\u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002</li>
</ul>
<h3 id="_5-5-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-5-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.5.3 \u6848\u4F8B</h3>
<p>\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236</p>
<p>\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5916\u89C2\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u706F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Light</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u706F...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u706F...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u89C6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u7535\u89C6...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u7535\u89C6...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u63A7\u5236\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AirCondition</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u7A7A\u8C03...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u7A7A\u8C03...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u667A\u80FD\u97F3\u7BB1</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAppliancesFacade</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Light</span> light<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">TV</span> tv<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AirCondition</span> airCondition<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AirCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8D77\u5E8A\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7761\u89C9\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61</span>
        <span class="token class-name">SmartAppliancesFacade</span> facade <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u5BB6\u7535"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u5BB6\u7535"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002</li>
<li>\u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6</li>
</ul>
<h3 id="_5-5-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-5-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.5.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</li>
<li>\u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002</li>
<li>\u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002</li>
</ul>
<h3 id="_5-5-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-5-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.5.5 \u6E90\u7801\u89E3\u6790</h3>
<p>\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<img src="/img/image-20200207234545691.png" style="zoom:60%;" />
<p>RequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A</p>
<img src="/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:70%;" />
<p><strong>\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F</strong></p>
<p>\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002</p>
<h2 id="_5-6-\u7EC4\u5408\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-6-\u7EC4\u5408\u6A21\u5F0F" aria-hidden="true">#</a> 5.6 \u7EC4\u5408\u6A21\u5F0F</h2>
<h3 id="_5-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.6.1 \u6982\u8FF0</h3>
<img src="/img/image-20200208180417291.png" style="zoom:60%;" />
<p>\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002</p>
<h3 id="_5-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.6.2 \u7ED3\u6784</h3>
<p>\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002</li>
<li>\u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002</li>
<li>\u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002</li>
</ul>
<h3 id="_5-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.6.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355</p>
<p>\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002</p>
<img src="/img/image-20200208182322313.png" style="zoom:80%;" />
<p>\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A</p>
<img src="/img/\u7EC4\u5408\u6A21\u5F0F.png" style="zoom:80%;" />
<p><strong>\u4EE3\u7801\u5B9E\u73B0\uFF1A</strong></p>
<p>\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>

    <span class="token comment">//\u6DFB\u52A0\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u79FB\u9664\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u83DC\u5355\u540D\u79F0</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">></span></span> menuComponentList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        menuComponentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> menuComponentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent <span class="token operator">:</span> menuComponentList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            menuComponent<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Menu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuItem</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002</p>
<h3 id="_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" aria-hidden="true">#</a> 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B</h3>
<p>\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002</p>
<ul>
<li>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F</p>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D <code v-pre>MenuComponent</code> \u58F0\u660E\u4E86 <code v-pre>add</code>\u3001<code v-pre>remove</code> \u3001<code v-pre>getChild</code> \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002</p>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09</p>
</li>
<li>
<p>\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F</p>
<p>\u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 <code v-pre>Menu</code> \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002</p>
<img src="/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png" style="zoom:80%;" />
</li>
</ul>
<h3 id="_5-6-5-\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-6-5-\u4F18\u70B9" aria-hidden="true">#</a> 5.6.5 \u4F18\u70B9</h3>
<ul>
<li>\u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002</li>
<li>\u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002</li>
<li>\u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</li>
<li>\u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002</li>
</ul>
<h3 id="_5-6-6-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-6-6-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.6.6 \u4F7F\u7528\u573A\u666F</h3>
<p>\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002</p>
<h2 id="_5-7-\u4EAB\u5143\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-7-\u4EAB\u5143\u6A21\u5F0F" aria-hidden="true">#</a> 5.7 \u4EAB\u5143\u6A21\u5F0F</h2>
<h3 id="_5-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.7.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002</p>
<h3 id="_5-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.7.2 \u7ED3\u6784</h3>
<p>\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A</p>
<ol>
<li>\u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002</li>
<li>\u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002</li>
</ol>
<p>\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002</li>
<li>\u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li>
<li>\u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002</li>
<li>\u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li>
</ul>
<h3 id="_5-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.7.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757</p>
<p>\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002</p>
<img src="/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg" style="zoom:60%;" />
<p><strong>\u5148\u6765\u770B\u7C7B\u56FE\uFF1A</strong></p>
<img src="/img/\u4EAB\u5143\u6A21\u5F0F.png" style="zoom:80%;" />
<p><strong>\u4EE3\u7801\u5982\u4E0B\uFF1A</strong></p>
<p>\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u65B9\u5757\u5F62\u72B6\uFF1A"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" \u989C\u8272\uFF1A"</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"I"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"L"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"O"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoxFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">></span></span> map<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> iBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> lBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> oBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"I"</span><span class="token punctuation">,</span> iBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"L"</span><span class="token punctuation">,</span> lBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"O"</span><span class="token punctuation">,</span> oBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">AbstractBox</span> <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F</h3>
<p><strong>1\uFF0C\u4F18\u70B9</strong></p>
<ul>
<li>\u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD</li>
<li>\u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742</p>
<p><strong>3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A</strong></p>
<ul>
<li>\u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002</li>
<li>\u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002</li>
<li>\u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002</li>
</ul>
<h3 id="_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.7.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Integer \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200208212930857.png" style="zoom:80%;" />
<p>\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">"i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">"i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F <code v-pre>valueOf()</code> \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Integer</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntegerCache</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> high<span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">static</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> integerCacheHighPropValue <span class="token operator">=</span>
                sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>VM<span class="token punctuation">.</span><span class="token function">getSavedProperty</span><span class="token punctuation">(</span><span class="token string">"java.lang.Integer.IntegerCache.high"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>integerCacheHighPropValue <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>integerCacheHighPropValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    i <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// Maximum array size is Integer.MAX_VALUE</span>
                    h <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">NumberFormatException</span> nfe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            high <span class="token operator">=</span> h<span class="token punctuation">;</span>
            cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> low<span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
                cache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>
            <span class="token keyword">assert</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high <span class="token operator">>=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230 <code v-pre>Integer</code> \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 <code v-pre>-128 ~ 127</code> \u4E4B\u95F4\u6570\u7684 <code v-pre>Integer</code> \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 <code v-pre>valueOf</code> \u65F6\u5982\u679C\u53C2\u6570\u5728 <code v-pre>-128 ~ 127</code> \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 <code v-pre>Integer</code> \u5BF9\u8C61\u3002</p>
<h1 id="_6-\u884C\u4E3A\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-\u884C\u4E3A\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F</h1>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002</p>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p>
<ul>
<li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u7B56\u7565\u6A21\u5F0F</li>
<li>\u547D\u4EE4\u6A21\u5F0F</li>
<li>\u804C\u8D23\u94FE\u6A21\u5F0F</li>
<li>\u72B6\u6001\u6A21\u5F0F</li>
<li>\u89C2\u5BDF\u8005\u6A21\u5F0F</li>
<li>\u4E2D\u4ECB\u8005\u6A21\u5F0F</li>
<li>\u8FED\u4EE3\u5668\u6A21\u5F0F</li>
<li>\u8BBF\u95EE\u8005\u6A21\u5F0F</li>
<li>\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
<li>\u89E3\u91CA\u5668\u6A21\u5F0F</li>
</ul>
<p>\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p>
<h2 id="_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</h2>
<h3 id="_6-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.1.1 \u6982\u8FF0</h3>
<p>\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002</p>
<p>\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002</p>
<h3 id="_6-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.1.2 \u7ED3\u6784</h3>
<p>\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002</p>
<ul>
<li>
<p>\u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002</p>
</li>
<li>
<p>\u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002</p>
<p>\u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>\u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002</p>
</li>
</ul>
<h3 id="_6-1-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.1.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u7092\u83DC</p>
<p>\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5012\u6CB9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u70ED\u6CB9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_BaoCai</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_CaiXin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7092\u624B\u6495\u5305\u83DC</span>
        <span class="token class-name">ConcreteClass_BaoCai</span> baoCai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_BaoCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        baoCai<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u7092\u849C\u84C9\u83DC\u5FC3</span>
        <span class="token class-name">ConcreteClass_CaiXin</span> caiXin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_CaiXin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        caiXin<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002</p>
</blockquote>
<h3 id="_6-1-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.1.3 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027</p>
<p>\u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236</p>
<p>\u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002</li>
<li>\u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002</li>
</ul>
<h3 id="_6-1-4-\u9002\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-1-4-\u9002\u7528\u573A\u666F" aria-hidden="true">#</a> 6.1.4 \u9002\u7528\u573A\u666F</h3>
<ul>
<li>\u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002</li>
<li>\u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002</li>
</ul>
<h3 id="_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.1.5 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>InputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A <code v-pre>read()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>off <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">></span> b<span class="token punctuation">.</span>length <span class="token operator">-</span> off<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        b<span class="token punctuation">[</span>off<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>

        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                b<span class="token punctuation">[</span>off <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 <code v-pre>read()</code> \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C <code v-pre>read(byte b[])</code> \u65B9\u6CD5\u8C03\u7528\u4E86 <code v-pre>read(byte b[], int off, int len)</code> \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002</p>
<p>\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 <code v-pre>read()</code> \u65B9\u6CD5\u3002</p>
<p>\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002</p>
<h2 id="_6-2-\u7B56\u7565\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-2-\u7B56\u7565\u6A21\u5F0F" aria-hidden="true">#</a> 6.2 \u7B56\u7565\u6A21\u5F0F</h2>
<h3 id="_6-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.2.1 \u6982\u8FF0</h3>
<p>\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002</p>
<img src="/img/image-20200210143039168.png" style="zoom:80%;" />
<p>\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002</p>
<img src="/img/image-20200210144457478.png" style="zoom:70%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002</p>
<h3 id="_6-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.2.2 \u7ED3\u6784</h3>
<p>\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002</li>
<li>\u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002</li>
<li>\u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002</li>
</ul>
<h3 id="_6-2-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-2-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.2.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8</p>
<p>\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u7B56\u7565\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyA</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E70\u4E00\u9001\u4E00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyB</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6EE1200\u5143\u51CF50\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyC</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SalesMan</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528</span>
    <span class="token keyword">private</span> <span class="token class-name">Strategy</span> strategy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">salesManShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        strategy<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.2.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362</p>
<p>\u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002</p>
</li>
<li>
<p>\u6613\u4E8E\u6269\u5C55</p>
<p>\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C</p>
</li>
<li>
<p>\u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002</li>
<li>\u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002</li>
</ul>
<h3 id="_6-2-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-2-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.2.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002</li>
<li>\u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002</li>
<li>\u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002</li>
<li>\u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002</li>
<li>\u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002</li>
</ul>
<h3 id="_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.2.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p><code v-pre>Comparator</code> \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A <code v-pre>sort()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">LegacyMergeSort</span><span class="token punctuation">.</span>userRequested<span class="token punctuation">)</span>
                <span class="token function">legacyMergeSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token class-name">TimSort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Arrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> demo <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> o2 <span class="token operator">-</span> o1<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[12, 5, 4, 3, 2, 2, 1]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 <code v-pre>compare()</code> \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 <code v-pre>sort()</code> \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">TimSort</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">,</span>
                         <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> work<span class="token punctuation">,</span> <span class="token keyword">int</span> workBase<span class="token punctuation">,</span> <span class="token keyword">int</span> workLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> c <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">&lt;=</span> hi <span class="token operator">&amp;&amp;</span> hi <span class="token operator">&lt;=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

        <span class="token keyword">int</span> nRemaining  <span class="token operator">=</span> hi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// Arrays of size 0 and 1 are always sorted</span>

        <span class="token comment">// If array is small, do a "mini-TimSort" with no merges</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> MIN_MERGE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> initRunLen <span class="token operator">=</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">binarySort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> lo <span class="token operator">+</span> initRunLen<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">int</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> lo <span class="token operator">&lt;</span> hi<span class="token punctuation">;</span>
        <span class="token keyword">int</span> runHi <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>runHi <span class="token operator">==</span> hi<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token comment">// Find end of run, and reverse range if descending</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Descending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">reverseRange</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> runHi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                              <span class="token comment">// Ascending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> runHi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 <code v-pre>countRunAndMakeAscending()</code> \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002</p>
<h2 id="_6-3-\u547D\u4EE4\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-3-\u547D\u4EE4\u6A21\u5F0F" aria-hidden="true">#</a> 6.3 \u547D\u4EE4\u6A21\u5F0F</h2>
<h3 id="_6-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.3.1 \u6982\u8FF0</h3>
<p>\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002</p>
<img src="/img/image-20200211130313251.png" style="zoom:60%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002</p>
<h3 id="_6-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.3.2 \u7ED3\u6784</h3>
<p>\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002</li>
<li>\u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002</li>
<li>\u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002</li>
<li>\u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002</li>
</ul>
<h3 id="_6-3-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-3-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.3.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002</p>
<p>\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002</p>
<p>\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002</p>
<p>\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u547D\u4EE4\u6A21\u5F0F.png" style="zoom:75%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Order</span> order<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span><span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">,</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u684C\u7684\u8BA2\u5355\uFF1A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> keys <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            receiver<span class="token punctuation">.</span><span class="token function">makeFood</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u684C\u7684\u996D\u5F04\u597D\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u9910\u684C\u53F7\u7801</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> diningTable<span class="token punctuation">;</span>

    <span class="token comment">// \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> foodDic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token keyword">int</span> diningTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>diningTable <span class="token operator">=</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> foodDic<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFoodDic</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        foodDic<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeniorChef</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">makeFood</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token class-name">String</span> foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">"\u4EFD"</span> <span class="token operator">+</span> foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">></span></span> commands<span class="token punctuation">;</span><span class="token comment">//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61</span>

    <span class="token keyword">public</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        commands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86......."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> commands<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Command</span> cmd <span class="token operator">=</span> commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmd<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA2\u4E2Aorder</span>
        <span class="token class-name">Order</span> order1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u897F\u7EA2\u67FF\u9E21\u86CB\u9762"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u676F\u53EF\u4E50"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Order</span> order2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C16\u6912\u8089\u4E1D\u76D6\u996D"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u676F\u96EA\u78A7"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u63A5\u6536\u8005</span>
        <span class="token class-name">SeniorChef</span> receiver<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SeniorChef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61</span>
        <span class="token class-name">OrderCommand</span> cmd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OrderCommand</span> cmd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8C03\u7528\u8005 waitor</span>
        <span class="token class-name">Waitor</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86</span>
        invoker<span class="token punctuation">.</span><span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.3.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002</li>
<li>\u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002</li>
<li>\u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002</li>
<li>\u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002</li>
<li>\u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002</li>
</ul>
<h3 id="_6-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.3.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002</li>
<li>\u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002</li>
<li>\u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002</li>
</ul>
<h3 id="_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.3.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Runable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8C03\u7528\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Runnable</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>threadStatus <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> started <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            started <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>started<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    group<span class="token punctuation">.</span><span class="token function">threadStartFailed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * jdk Runnable \u547D\u4EE4\u6A21\u5F0F
 *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TurnOffThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span>

     <span class="token keyword">public</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	receiver<span class="token punctuation">.</span><span class="token function">turnOFF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5\u7C7B
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">TurnOffThread</span> turnOffThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>turnOffThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" aria-hidden="true">#</a> 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F</h2>
<h3 id="_6-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.4.1 \u6982\u8FF0</h3>
<p>\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002</p>
<h3 id="_6-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.4.2 \u7ED3\u6784</h3>
<p>\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:</p>
<ul>
<li>\u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002</li>
<li>\u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002</li>
<li>\u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002</li>
</ul>
<h3 id="_6-4-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-4-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.4.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u8BF7\u5047\u6761</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeaveRequest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//\u59D3\u540D</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5929\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5185\u5BB9</span>

    <span class="token keyword">public</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5904\u7406\u8005\u62BD\u8C61\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_ONE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_THREE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_SEVEN <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numStart<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">;</span>

    <span class="token comment">//\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC</span>
    <span class="token keyword">private</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">,</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numEnd <span class="token operator">=</span> numEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u63D0\u4EA4\u8BF7\u5047\u6761</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleLeave</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> numEnd<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7EE7\u7EED\u63D0\u4EA4</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6D41\u7A0B\u7ED3\u675F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5C0F\u7EC4\u957F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeader</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_ONE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u90E8\u95E8\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u603B\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u8BF7\u5047\u6761\u6765\u4E00\u5F20</span>
        <span class="token class-name">LeaveRequest</span> leave <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u82B1"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"\u8EAB\u4F53\u4E0D\u9002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5404\u4F4D\u9886\u5BFC</span>
        <span class="token class-name">GroupLeader</span> groupLeader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeneralManager</span> generalManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        groupLeader<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406</span>
        manager<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>generalManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406</span>
        <span class="token comment">//\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002</span>

        <span class="token comment">//\u63D0\u4EA4\u7533\u8BF7</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.4.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6</p>
<p>\u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002</p>
</li>
<li>
<p>\u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027</p>
<p>\u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002</p>
</li>
<li>
<p>\u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027</p>
<p>\u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002</p>
</li>
<li>
<p>\u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5</p>
<p>\u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002</p>
</li>
<li>
<p>\u8D23\u4EFB\u5206\u62C5</p>
<p>\u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002</li>
<li>\u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002</li>
<li>\u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002</li>
</ul>
<h3 id="_6-4-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-4-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.4.5 \u6E90\u7801\u89E3\u6790</h3>
<p>\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:</p>
<ul>
<li>
<p>\u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Request</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Response</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">,</span><span class="token class-name">Response</span> res<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondFilter</span>  <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterChain</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// \u94FE\u5F0F\u8C03\u7528</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterChain</span> <span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token class-name">Filter</span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> filters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Filter</span> filter <span class="token operator">=</span> filters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        index<span class="token operator">++</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Request</span>  req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Response</span> res <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span>

        <span class="token class-name">FilterChain</span> filterChain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FirstFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecondFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h2 id="_6-5-\u72B6\u6001\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-5-\u72B6\u6001\u6A21\u5F0F" aria-hidden="true">#</a> 6.5 \u72B6\u6001\u6A21\u5F0F</h2>
<h3 id="_6-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.5.1 \u6982\u8FF0</h3>
<p>\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u72B6\u6001\u6A21\u5F0F\u524D.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7535\u68AF\u76844\u4E2A\u72B6\u6001</span>
    <span class="token comment">//\u5F00\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> OPENING_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5173\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> CLOSING_STATE <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> RUNNING_STATE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> STOPPING_STATE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lift</span> <span class="token keyword">implements</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> state<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span> <span class="token comment">//\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Lift</span> lift <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lift<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">ILift</span><span class="token punctuation">.</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u662F\u505C\u6B62\u7684</span>
        lift<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C</span>
        lift<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u95EE\u9898\u5206\u6790\uFF1A</p>
<ul>
<li>\u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002</li>
<li>\u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91</li>
</ul>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002</p>
<h3 id="_6-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.5.2 \u7ED3\u6784</h3>
<p>\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p>
<ul>
<li>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002</li>
<li>\u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li>
<li>\u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li>
</ul>
<h3 id="_6-5-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-5-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.5.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u72B6\u6001\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u72B6\u6001\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316</span>
    <span class="token keyword">protected</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5F00\u542F\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5F00\u542F..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u6B63\u5728\u8FD0\u884C..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoppingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5173\u95ED\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClosingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5173\u95ED..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">OpenningState</span> openningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">ClosingState</span> closeingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">RunningState</span> runningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">StoppingState</span> stoppingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C</span>


    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">private</span> <span class="token class-name">LiftState</span> liftState<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LiftState</span> <span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F53\u524D\u73AF\u5883\u6539\u53D8</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState <span class="token operator">=</span> liftState<span class="token punctuation">;</span>
        <span class="token comment">//\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-5-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.5.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002</li>
<li>\u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002</li>
<li>\u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002</li>
<li>\u72B6\u6001\u6A21\u5F0F\u5BF9&quot;\u5F00\u95ED\u539F\u5219&quot;\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002</li>
</ul>
<h3 id="_6-5-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-5-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.5.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002</li>
<li>\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002</li>
</ul>
<h2 id="_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F</h2>
<h3 id="_6-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.6.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002</p>
<h3 id="_6-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.6.2 \u7ED3\u6784</h3>
<p>\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002</li>
<li>ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002</li>
<li>Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002</li>
<li>ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002</li>
</ul>
<h3 id="_6-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7</p>
<p>\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeixinUser</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5FAE\u4FE1\u7528\u6237\u540D</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u589E\u52A0\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5220\u9664\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span> weixinUserlist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer <span class="token operator">:</span> weixinUserlist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u7A0B\u5E8F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SubscriptionSubject</span> mSubscriptionSubject<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237</span>
        <span class="token class-name">WeixinUser</span> user1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u5B59\u609F\u7A7A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u732A\u609F\u80FD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u6C99\u609F\u51C0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA2\u9605\u516C\u4F17\u53F7</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">"\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-6-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.6.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002</li>
<li>\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6</li>
<li>\u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83</li>
</ul>
<h3 id="_6-6-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-6-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.6.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002</li>
<li>\u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002</li>
</ul>
<h3 id="_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0</h3>
<p>\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002</p>
<p><strong>1\uFF0CObservable \u7C7B</strong></p>
<p>Observable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002</p>
<ul>
<li>
<p>void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002</p>
</li>
<li>
<p>void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002</p>
</li>
<li>
<p>void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002</p>
</li>
</ul>
<p><strong>2\uFF0CObserver \u63A5\u53E3</strong></p>
<p>Observer \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002</p>
<p>\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077</p>
<p>\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thief</span> <span class="token keyword">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//changed  = true</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Policemen</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Observable</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8B66\u5BDF\uFF1A"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Thief</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u4EE3\u7801</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61</span>
        <span class="token class-name">Thief</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token string">"\u9694\u58C1\u8001\u738B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61</span>
        <span class="token class-name">Policemen</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u674E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077</span>
        t<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C0F\u5077\u5077\u4E1C\u897F</span>
        t<span class="token punctuation">.</span><span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F</h2>
<h3 id="_6-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.7.1 \u6982\u8FF0</h3>
<p>\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002</p>
<p>\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002</p>
<img src="/img/image-20200214110924010.png" style="zoom:60%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002</p>
<h3 id="_6-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.7.2 \u7ED3\u6784</h3>
<p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002</p>
</li>
<li>
<p>\u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002</p>
</li>
</ul>
<h3 id="_6-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.7.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u79DF\u623F</p>
<p>\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u4E2D\u4ECB\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u62BD\u8C61\u540C\u4E8B\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HouseOwner</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u623F\u4E3B"</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tenant</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u79DF\u623F\u8005"</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E2D\u4ECB\u673A\u6784</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorStructure</span> <span class="token keyword">extends</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F</span>
    <span class="token keyword">private</span> <span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tenant</span> tenant<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span> <span class="token function">getHouseOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHouseOwner</span><span class="token punctuation">(</span><span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>houseOwner <span class="token operator">=</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Tenant</span> <span class="token function">getTenant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTenant</span><span class="token punctuation">(</span><span class="token class-name">Tenant</span> tenant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tenant <span class="token operator">=</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>person <span class="token operator">==</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">//\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F</span>
            tenant<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>       <span class="token comment">//\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F</span>
            houseOwner<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784</span>
        <span class="token class-name">MediatorStructure</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediatorStructure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF</span>
        <span class="token class-name">HouseOwner</span> houseOwner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Tenant</span> tenant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005</span>
        mediator<span class="token punctuation">.</span><span class="token function">setHouseOwner</span><span class="token punctuation">(</span>houseOwner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediator<span class="token punctuation">.</span><span class="token function">setTenant</span><span class="token punctuation">(</span>tenant<span class="token punctuation">)</span><span class="token punctuation">;</span>

        tenant<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">"\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        houseOwner<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">"\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-7-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-7-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.7.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u677E\u6563\u8026\u5408</p>
<p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002</p>
</li>
<li>
<p>\u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92</p>
<p>\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002</p>
</li>
<li>
<p>\u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054</p>
<p>\u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002</p>
<h3 id="_6-7-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-7-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.7.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002</li>
<li>\u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002</li>
</ul>
<h2 id="_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F</h2>
<h3 id="_6-8-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-8-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.8.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002</p>
<h3 id="_6-8-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-8-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.8.2 \u7ED3\u6784</h3>
<p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002</p>
</li>
<li>
<p>\u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002</p>
</li>
</ul>
<h3 id="_6-8-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-8-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.8.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png" style="zoom:90%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentIteratorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> position <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Student</span> currentStudent <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position <span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> currentStudent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAggregateImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u5B66\u751F\u5217\u8868</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-8-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-8-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.8.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002</li>
<li>\u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002</li>
<li>\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002</p>
<h3 id="_6-8-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-8-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.8.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002</li>
<li>\u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002</li>
<li>\u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002</li>
</ul>
<h3 id="_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.8.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E</p>
<ul>
<li>List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B</li>
<li>ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B</li>
<li>Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668</li>
<li>list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 <code v-pre>Iterator</code> \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61</li>
</ul>
<p>\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span>
        <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>       <span class="token comment">// \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>

        <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token comment">//\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> cursor <span class="token operator">!=</span> size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> size<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cursor <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 <code v-pre>iterator</code> \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 <code v-pre>Iterator</code> \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 <code v-pre>Iterator</code> \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p>
<blockquote>
<p>\u6CE8\u610F\uFF1A</p>
<p>\u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0<code v-pre>java.util.Iterable</code>\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A <code v-pre>java.util.Iterator</code> \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002</p>
</blockquote>
<h2 id="_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F</h2>
<h3 id="_6-9-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-9-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.9.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002</p>
<h3 id="_6-9-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-9-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.9.2 \u7ED3\u6784</h3>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:</p>
<ul>
<li>\u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20<code v-pre>\uFF08Element\uFF09</code>\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002</li>
<li>\u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002</li>
<li>\u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08<code v-pre>accept</code>\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li>
<li>\u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002</li>
<li>\u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08<code v-pre>Element</code>\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li>
</ul>
<h3 id="_6-9-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-9-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.9.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF</p>
<p>\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002</p>
<ul>
<li>\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA</li>
<li>\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA</li>
<li>\u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B</li>
<li>\u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B</li>
<li>\u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6</li>
</ul>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u8BBF\u95EE\u8005\u6A21\u5F0F.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 <code v-pre>Person</code>\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Owner</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E3B\u4EBA\u5582\u98DF\u732B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E3B\u4EBA\u5582\u98DF\u72D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Someone</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5176\u4ED6\u4EBA\u5582\u98DF\u732B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5B9E\u73B0<code v-pre>Animal</code>\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">></span></span> nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span> node <span class="token operator">:</span> nodeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6DFB\u52A0\u64CD\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nodeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Home</span> home <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Owner</span> owner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Someone</span> someone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Someone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-9-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-9-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.9.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u6269\u5C55\u6027\u597D</p>
<p>\u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u590D\u7528\u6027\u597D</p>
<p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002</p>
</li>
<li>
<p>\u5206\u79BB\u65E0\u5173\u884C\u4E3A</p>
<p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE</p>
<p>\u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
</li>
<li>
<p>\u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219</p>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002</p>
</li>
</ul>
<h3 id="_6-9-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-9-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.9.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002</p>
</li>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002</p>
</li>
</ul>
<h3 id="_6-9-6-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_6-9-6-\u6269\u5C55" aria-hidden="true">#</a> 6.9.6 \u6269\u5C55</h3>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002</p>
<p><strong>1\uFF0C\u5206\u6D3E\uFF1A</strong></p>
<p>\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 <code v-pre>Map map = new HashMap()</code> \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F <code v-pre>Map</code> \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F <code v-pre>HashMap</code> \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002</p>
<p><strong>\u9759\u6001\u5206\u6D3E(Static Dispatch)</strong> \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002</p>
<p><strong>\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)</strong> \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p>
<p><strong>2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A</strong></p>
<p>\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
   	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002</p>
<p>Java \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002</p>
<p><strong>3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A</strong></p>
<p>\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p>
<img src="/img/image-20200214215446638.png" style="zoom:70%;" />
<p>\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F</p>
<p><strong>\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002</strong></p>
<p><strong>4\uFF0C\u53CC\u5206\u6D3E\uFF1A</strong></p>
<p>\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F<code v-pre>\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E</code>\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002</p>
<p>\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002</p>
<p>\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200426233931693.png" style="zoom:67%;" />
<p><strong>\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002</strong></p>
<h2 id="_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F</h2>
<h3 id="_6-10-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-10-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.10.1 \u6982\u8FF0</h3>
<p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002</p>
<h3 id="_6-10-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-10-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.10.2 \u7ED3\u6784</h3>
<p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002</li>
<li>\u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002</li>
<li>\u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002</li>
</ul>
<blockquote>
<p>\u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A</p>
<ul>
<li><strong>\u7A84\u63A5\u53E3</strong>\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002</li>
<li><strong>\u5BBD\u63A5\u53E3</strong>\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002</li>
</ul>
</blockquote>
<h3 id="_6-10-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-10-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.10.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS</p>
<p>\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002</p>
<p>\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A</p>
<ul>
<li>\u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
<li>\u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
</ul>
<h4 id="_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4>
<p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u6E38\u620F\u89D2\u8272\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u751F\u547D\u529B\uFF1A"</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u653B\u51FB\u529B\uFF1A"</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u9632\u5FA1\u529B\uFF1A"</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u524D------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u540E------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002</p>
</blockquote>
<h4 id="_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4>
<p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06<strong>\u5907\u5FD8\u5F55\u7C7B</strong>\u8BBE\u8BA1\u6210<strong>\u53D1\u8D77\u4EBA\u7C7B</strong>\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002</p>
<p>\u5C06 <code v-pre>RoleStateMemento</code> \u8BBE\u4E3A <code v-pre>GameRole</code> \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 <code v-pre>RoleStateMemento</code> \u5BF9\u8C61\u5C01\u88C5\u5728 <code v-pre>GameRole</code> \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 <code v-pre>Memento</code> \u7ED9 <code v-pre>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 <code v-pre>GameRole</code> \u7C7B\u770B\u5230\u7684\u662F <code v-pre>RoleStateMemento</code> \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C<code v-pre>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 <code v-pre>Memento</code> \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u7A84\u63A5\u53E3<code v-pre>Memento</code>\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B <code v-pre>GameRole</code>\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B <code v-pre>RoleStateMemento</code>\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token operator">/</span>\u6E38\u620F\u89D2\u8272\u7C7B
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RoleStateMemento</span> roleStateMemento <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span><span class="token punctuation">)</span> memento<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u751F\u547D\u529B\uFF1A"</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u653B\u51FB\u529B\uFF1A"</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u9632\u5FA1\u529B\uFF1A"</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token keyword">implements</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B <code v-pre>RoleStateCaretaker</code> \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 <code v-pre>Memento</code> \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u524D------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u540E------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-10-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-10-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.10.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002</li>
<li>\u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002</li>
<li>\u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002</li>
</ul>
<h3 id="_6-10-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-10-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.10.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002</p>
</li>
</ul>
<h2 id="_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F</h2>
<h3 id="_6-11-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-11-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.11.1 \u6982\u8FF0</h3>
<img src="/img/image-20200215220322641.png" style="zoom:60%;" />
<p>\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> i <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002</p>
<p>\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<blockquote>
<p>\u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002</p>
</blockquote>
<p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002</p>
<p>\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F</p>
<p><strong>\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A</strong></p>
<p>\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>expression ::= value | plus | minus
plus ::= expression \u2018+\u2019 expression
minus ::= expression \u2018-\u2019 expression
value ::= integer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002</p>
</blockquote>
<p>\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A</p>
<p>\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002</p>
<p><strong>\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A</strong></p>
<p>\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002</p>
<p>\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002</p>
<img src="/img/image-20200215225227616.png" style="zoom:50%;" />
<h3 id="_6-11-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-11-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.11.2 \u7ED3\u6784</h3>
<p>\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p>
<ul>
<li>
<p>\u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002</p>
</li>
<li>
<p>\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002</p>
</li>
<li>
<p>\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002</p>
</li>
<li>
<p>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002</p>
</li>
<li>
<p>\u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002</p>
</li>
</ul>
<h3 id="_6-11-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-11-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.11.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6</p>
<img src="/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u89D2\u8272AbstractExpression</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"("</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" + "</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Minus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"("</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" - "</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Variable</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> value <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Variable</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Value v = new Value(1);</span>

        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AbstractExpression</span> expression <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>expression <span class="token operator">+</span> <span class="token string">"= "</span> <span class="token operator">+</span> expression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-11-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-11-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.11.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002</p>
<p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002</p>
<p>\u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002</p>
</li>
<li>
<p>\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002</p>
<p>\u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 &quot;\u5F00\u95ED\u539F\u5219&quot;\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002</p>
<p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002</p>
</li>
</ul>
<ul>
<li>
<p>\u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002</p>
<p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002</p>
</li>
</ul>
<h3 id="_6-11-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-11-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.11.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002</p>
</li>
<li>
<p>\u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002</p>
</li>
<li>
<p>\u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002</p>
</li>
</ul>
<h1 id="_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" tabindex="-1"><a class="header-anchor" href="#_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" aria-hidden="true">#</a> 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6</h1>
<h2 id="_7-1-spring-\u4F7F\u7528\u56DE\u987E" tabindex="-1"><a class="header-anchor" href="#_7-1-spring-\u4F7F\u7528\u56DE\u987E" aria-hidden="true">#</a> 7.1 spring \u4F7F\u7528\u56DE\u987E</h2>
<p>\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002</p>
<ul>
<li>
<p>\u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"userDaoImpl ...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"userServiceImpl ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61</span>
        <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">,</span> <span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5</span>
        userService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">></span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd"<span class="token operator">></span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userService"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.itheima.service.impl.UserServiceImpl"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"userDao"</span> ref<span class="token operator">=</span><span class="token string">"userDao"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userDao"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.itheima.dao.impl.UserDaoImpl"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200429165544151.png" style="zoom:60%;" />
</li>
</ul>
<p>\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A</p>
<ul>
<li>userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002</li>
<li>\u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002</li>
<li>UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002</li>
</ul>
<p>\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09</p>
<h2 id="_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" aria-hidden="true">#</a> 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784</h2>
<p>Spring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:</p>
<p>\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A</p>
<img src="/img/image-20200429111324770.png" style="zoom:40%;" />
<p>\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002</p>
<ul>
<li>spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002</li>
<li>spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002</li>
<li>spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002</li>
<li>spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002</li>
<li>spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002</li>
</ul>
<h3 id="_7-1-1-bean-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_7-1-1-bean-\u6982\u8FF0" aria-hidden="true">#</a> 7.1.1 bean \u6982\u8FF0</h3>
<p>Spring \u5C31\u662F\u9762\u5411 <code v-pre>Bean</code> \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</p>
<p>spring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F</p>
<ul>
<li>spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002</li>
<li>bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002</li>
</ul>
<h2 id="_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" aria-hidden="true">#</a> 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790</h2>
<h3 id="_7-3-1-beanfactory-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-1-beanfactory-\u89E3\u6790" aria-hidden="true">#</a> 7.3.1 BeanFactory \u89E3\u6790</h3>
<p>Spring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429185050396.png" style="zoom:60%;" />
<p>\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002</p>
<p>\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F</p>
<p>\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C</p>
<ul>
<li>ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002</li>
<li>HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean</li>
<li>AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002</li>
</ul>
<p>\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>

	<span class="token class-name">String</span> FACTORY_BEAN_PREFIX <span class="token operator">=</span> <span class="token string">"&amp;"</span><span class="token punctuation">;</span>

	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>

	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">ResolvableType</span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B</span>
	<span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isPrototype</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">ResolvableType</span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAliases</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002</p>
<p>BeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002</p>
<img src="/img/image-20200430220155371.png" style="zoom:60%;" />
<p>\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A</p>
<ul>
<li>ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li>
<li>FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li>
<li>AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002</li>
</ul>
<h3 id="_7-3-2-beandefinition-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-2-beandefinition-\u89E3\u6790" aria-hidden="true">#</a> 7.3.2 BeanDefinition \u89E3\u6790</h3>
<p>Spring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>

bean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A
	scope\u3001init-method\u3001destory-method\u7B49\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429204239868.png" style="zoom:60%;" />
<h3 id="_7-3-3-beandefinitionreader-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-3-beandefinitionreader-\u89E3\u6790" aria-hidden="true">#</a> 7.3.3 BeanDefinitionReader \u89E3\u6790</h3>
<p>Bean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429204700956.png" style="zoom:60%;" />
<p>\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61</span>
	<span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ResourceLoader</span> <span class="token function">getResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ClassLoader</span> <span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token class-name">BeanNameGenerator</span> <span class="token function">getBeanNameGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*
		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D
	*/</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span> resource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> resources<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> locations<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-4-beandefinitionregistry-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-4-beandefinitionregistry-\u89E3\u6790" aria-hidden="true">#</a> 7.3.4 BeanDefinitionRegistry \u89E3\u6790</h3>
<p>BeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token keyword">extends</span> <span class="token class-name">AliasRegistry</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean</span>
	<span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200429211132185.png" style="zoom:60%;" />
<p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A</p>
<ul>
<li>
<p>DefaultListableBeanFactory</p>
<p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
<li>
<p>SimpleBeanDefinitionRegistry</p>
<p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
</ul>
<h3 id="_7-3-5-\u521B\u5EFA\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_7-3-5-\u521B\u5EFA\u5BB9\u5668" aria-hidden="true">#</a> 7.3.5 \u521B\u5EFA\u5BB9\u5668</h3>
<p>ClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002</p>
<h2 id="_7-4-\u81EA\u5B9A\u4E49-springioc" tabindex="-1"><a class="header-anchor" href="#_7-4-\u81EA\u5B9A\u4E49-springioc" aria-hidden="true">#</a> 7.4 \u81EA\u5B9A\u4E49 SpringIOC</h2>
<p>\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" aria-hidden="true">#</a> 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B</h3>
<h4 id="_7-4-1-1-propertyvalue-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-1-propertyvalue-\u7C7B" aria-hidden="true">#</a> 7.4.1.1 PropertyValue \u7C7B</h4>
<p>\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertyValue</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> ref<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> ref<span class="token punctuation">,</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRef</span><span class="token punctuation">(</span><span class="token class-name">String</span> ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-2-mutablepropertyvalues-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-2-mutablepropertyvalues-\u7C7B" aria-hidden="true">#</a> 7.4.1.2 MutablePropertyValues \u7C7B</h4>
<p>\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MutablePropertyValues</span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> propertyValueList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token punctuation">(</span>propertyValueList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> propertyValueList <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> pv<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValueList<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">PropertyValue</span> currentPv <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pv<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pv<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-3-beandefinition-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-3-beandefinition-\u7C7B" aria-hidden="true">#</a> 7.4.1.3 BeanDefinition \u7C7B</h4>
<p>BeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDefinition</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> className<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setClassName</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPropertyValues</span><span class="token punctuation">(</span><span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValues <span class="token operator">=</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3</h4>
<p>BeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A</p>
<ul>
<li>\u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</li>
<li>\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li>
<li>\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61</li>
<li>\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570</li>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</span>
    <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61</span>
    <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token comment">//\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-2-2-simplebeandefinitionregistry-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-2-simplebeandefinitionregistry-\u7C7B" aria-hidden="true">#</a> 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B</h4>
<p>\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-3-1-beandefinitionreader-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-3-1-beandefinitionreader-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.3.1 BeanDefinitionReader \u63A5\u53E3</h4>
<p>BeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A</p>
<ul>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002</li>
<li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C</span>
    <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-3-2-xmlbeandefinitionreader-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-2-xmlbeandefinitionreader-\u7C7B" aria-hidden="true">#</a> 7.4.3.2 XmlBeanDefinitionReader \u7C7B</h4>
<p>XmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlBeanDefinitionReader</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SAXReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> document <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Element</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u89E3\u6790bean\u6807\u7B7E</span>
        <span class="token function">parseBean</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">parseBean</span><span class="token punctuation">(</span><span class="token class-name">Element</span> rootElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> elements <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">"property"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MutablePropertyValues</span> mutablePropertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element1 <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> ref <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"ref"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> value <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>ref<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                mutablePropertyValues<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setPropertyValues</span><span class="token punctuation">(</span>mutablePropertyValues<span class="token punctuation">)</span><span class="token punctuation">;</span>

            registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-4-1-beanfactory-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-1-beanfactory-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.1 BeanFactory \u63A5\u53E3</h4>
<p>\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-2-applicationcontext-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-2-applicationcontext-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.2 ApplicationContext \u63A5\u53E3</h4>
<p>\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 <code v-pre>refresh()</code> \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A</p>
<ul>
<li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002</li>
<li>\u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA</span>
    <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-3-abstractapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-3-abstractapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.3 AbstractApplicationContext \u7C7B</h4>
<ul>
<li>
<p>\u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002</p>
</li>
<li>
<p>\u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p>
<p>BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002</p>
</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractApplicationContext</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContext</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">BeanDefinitionReader</span> beanDefinitionReader<span class="token punctuation">;</span>
    <span class="token comment">//\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61</span>
    <span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> singletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> configLocation<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//\u52A0\u8F7DBeanDefinition</span>
        beanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521D\u59CB\u5316bean</span>
        <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//bean\u7684\u521D\u59CB\u5316</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanNames <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002</p>
</blockquote>
<h4 id="_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.4 ClassPathXmlApplicationContext \u7C7B</h4>
<p>\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A</p>
<ul>
<li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002</li>
<li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002</li>
<li>\u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathXmlApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configLocation <span class="token operator">=</span> configLocation<span class="token punctuation">;</span>
        <span class="token comment">//\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61</span>
        beanDefinitionReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//return singletonObjects.get(name);</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> singletonObjects<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>beanDefinition <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> beanObj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MutablePropertyValues</span> propertyValues <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> propertyName <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> ref <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>ref <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        singletonObjects<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>beanObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> beanObj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>bean <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" aria-hidden="true">#</a> 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3</h3>
<h4 id="_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F</h4>
<ul>
<li>\u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002</li>
<li>\u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002</li>
<li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002</li>
<li>\u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002</li>
</ul>
<p>spring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002</p>
<h4 id="_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219</h4>
<h4 id="_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" tabindex="-1"><a class="header-anchor" href="#_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" aria-hidden="true">#</a> 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165</h4>
<p>spring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A</p>
<ul>
<li>\u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002</li>
<li>\u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002</li>
<li>\u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002</li>
</ul>
`, "date": "0000-00-00", "deps": [], "links": [], "pathInferred": "/design-pattern/", "pathLocale": "/", "permalink": null, "routeMeta": { "title": "\u8BBE\u8BA1\u6A21\u5F0F" }, "sfcBlocks": [], "slug": "README", "filePath": "C:/Users/Administrator/Desktop/blog-docs/docs/design-pattern/README.md", "filePathRelative": "design-pattern/README.md", "componentFilePath": "C:/Users/Administrator/Desktop/blog-docs/docs/.vuepress/.temp/pages/design-pattern/index.html.vue", "componentFilePathRelative": "pages/design-pattern/index.html.vue", "componentFileChunkName": "v-d5fe0c96", "dataFilePath": "C:/Users/Administrator/Desktop/blog-docs/docs/.vuepress/.temp/pages/design-pattern/index.html.js", "dataFilePathRelative": "pages/design-pattern/index.html.js", "dataFileChunkName": "v-d5fe0c96", "htmlFilePath": "C:/Users/Administrator/Desktop/blog-docs/dist/design-pattern/index.html", "htmlFilePathRelative": "design-pattern/index.html" }, { "data": { "key": "v-3706649a", "path": "/404.html", "title": "", "lang": "zh-CN", "frontmatter": { "layout": "404", "summary": "", "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/blog-docs/404.html" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:type", "content": "website" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }]] }, "excerpt": "", "headers": [], "git": {}, "filePathRelative": null, "readingTime": { "minutes": 0, "words": 0 } }, "key": "v-3706649a", "path": "/404.html", "title": "", "lang": "zh-CN", "frontmatter": { "layout": "404", "summary": "", "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/blog-docs/404.html" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:type", "content": "website" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }]] }, "excerpt": "", "headers": [], "content": "", "contentRendered": "", "date": "0000-00-00", "deps": [], "links": [], "pathInferred": null, "pathLocale": "/", "permalink": null, "routeMeta": { "title": "" }, "sfcBlocks": [], "slug": "", "filePath": null, "filePathRelative": null, "componentFilePath": "C:/Users/Administrator/Desktop/blog-docs/docs/.vuepress/.temp/pages/404.html.vue", "componentFilePathRelative": "pages/404.html.vue", "componentFileChunkName": "v-3706649a", "dataFilePath": "C:/Users/Administrator/Desktop/blog-docs/docs/.vuepress/.temp/pages/404.html.js", "dataFilePathRelative": "pages/404.html.js", "dataFileChunkName": "v-3706649a", "htmlFilePath": "C:/Users/Administrator/Desktop/blog-docs/dist/404.html", "htmlFilePathRelative": "404.html" }].filter((item) => item.path != "/" && item.path != "/404.html");
  return { posts };
};
const modules = { "../../public/images/index/bg1.jpg": () => Promise.resolve().then(function() {
  return bg1$1;
}), "../../public/images/index/bg2.jpg": () => Promise.resolve().then(function() {
  return bg2$1;
}), "../../public/images/index/bg3.jpg": () => Promise.resolve().then(function() {
  return bg3$1;
}), "../../public/images/index/bg4.jpg": () => Promise.resolve().then(function() {
  return bg4$1;
}), "../../public/images/index/bg5.jpg": () => Promise.resolve().then(function() {
  return bg5$1;
}), "../../public/images/index/bg6.jpg": () => Promise.resolve().then(function() {
  return bg6$1;
}) };
const useBanner = () => {
  const frontmatter = usePageFrontmatter();
  const {
    bgImage,
    bgImageSec = 4e3,
    isBgImagetrigger = true,
    needDefaultImages = true,
    heroText,
    tagline,
    bgImageStyle = { height: "550px", color: "#fff" },
    showArrow = true,
    bubbles = true
  } = frontmatter.value;
  const bannerOptions = {
    bgImageSec,
    isBgImagetrigger,
    showArrow,
    tagline,
    heroText,
    bgImageStyle,
    bubbles
  };
  const getPublicImages = () => {
    const imageArray = [];
    Object.keys(modules).forEach((path) => {
      const fileName = path.replace(/(.*\/)*([\s\S]*?)/gi, "$2");
      const filePath = withBase("/images/index/" + fileName);
      imageArray.push(filePath);
    });
    return imageArray;
  };
  const getRandomImage = () => {
    const imageArray = needDefaultImages ? mixImage(bgImage) : bgImage;
    return isBgImagetrigger ? imageArray : imageArray[Math.floor(Math.random() * imageArray.length)];
  };
  const mixImage = (mixImageArray) => {
    const imageArray = getPublicImages();
    return mixImageArray ? Array.from(new Set(imageArray.concat(mixImageArray))) : imageArray;
  };
  vue.onMounted(() => {
    vue.nextTick(() => {
      new flux.slider("#banner", {
        autoplay: bannerOptions.isBgImagetrigger,
        pagination: false,
        width: "100%",
        height: Number(bgImageStyle.height.slice(0, -2)),
        delay: bannerOptions.bgImageSec
      });
    });
  });
  vue.onUnmounted(() => {
  });
  return { getRandomImage, bannerOptions };
};
function circleMagic(options2) {
  let width;
  let height;
  let canvas;
  let ctx;
  let animateHeader = true;
  const circles = [];
  const settings = options2 || {
    color: "rgba(255,255,255,.5)",
    radius: 10,
    density: 0.3,
    clearOffset: 0.2
  };
  let container = document.getElementById("bubbles");
  if (!container) {
    throw new Error("bubbles dom is not exist !!");
  }
  const initContainer = () => {
    width = container.offsetWidth;
    height = container.offsetHeight - 120;
    initCanvas();
    canvas = document.getElementById("homeTopCanvas");
    canvas.width = width;
    canvas.height = height;
    canvas.style.position = "absolute";
    canvas.style.left = "0";
    canvas.style.bottom = "0";
    ctx = canvas.getContext("2d");
    for (let x2 = 0; x2 < width * settings.density; x2++) {
      const c2 = new Circle();
      circles.push(c2);
    }
    animate();
  };
  initContainer();
  addListeners();
  function initCanvas() {
    const canvasElement = document.createElement("canvas");
    canvasElement.id = "homeTopCanvas";
    canvasElement.style.pointerEvents = "none";
    container.appendChild(canvasElement);
    canvasElement.parentElement.style.overflow = "hidden";
  }
  function addListeners() {
    window.addEventListener("scroll", scrollCheck, false);
    window.addEventListener("resize", resize, false);
  }
  function scrollCheck() {
    if (document.body.scrollTop > height) {
      animateHeader = false;
    } else {
      animateHeader = true;
    }
  }
  function resize() {
    width = container.clientWidth;
    height = container.clientHeight;
    container.height = height + "px";
    canvas.width = width;
    canvas.height = height;
  }
  function animate() {
    if (animateHeader) {
      ctx.clearRect(0, 0, width, height);
      for (const i2 in circles) {
        circles[i2].draw();
      }
    }
    requestAnimationFrame(animate);
  }
  function randomColor() {
    const r2 = Math.floor(Math.random() * 255);
    const g2 = Math.floor(Math.random() * 255);
    const b2 = Math.floor(Math.random() * 255);
    const alpha = Math.random().toPrecision(2);
    return "rgba(" + r2 + ", " + g2 + ", " + b2 + ", " + alpha + ")";
  }
  function Circle() {
    const that = this;
    (function() {
      that.pos = {};
      init();
    })();
    function init() {
      that.pos.x = Math.random() * width;
      that.pos.y = height + Math.random() * 100;
      that.alpha = 0.1 + Math.random() * settings.clearOffset;
      that.scale = 0.1 + Math.random() * 0.2;
      that.speed = Math.random() * 0.6;
      if (settings.color === "random") {
        that.color = randomColor();
      } else {
        that.color = settings.color;
      }
    }
    this.draw = function() {
      if (that.alpha <= 0) {
        init();
      }
      that.pos.y -= that.speed;
      that.alpha -= 5e-4;
      ctx.beginPath();
      ctx.arc(
        that.pos.x,
        that.pos.y,
        that.scale * settings.radius,
        0,
        2 * Math.PI,
        false
      );
      ctx.fillStyle = that.color;
      ctx.fill();
      ctx.closePath();
    };
  }
}
const useCircleMagic = () => {
  vue.onMounted(() => {
    circleMagic({
      radius: 15,
      density: 0.3,
      color: "random",
      clearOffset: 0.2
    });
  });
};
const useTyped = (domRemark) => {
  const frontmatter = usePageFrontmatter();
  const dom = domRemark ? domRemark : ".typed";
  const typedFction = () => {
    new Typed__default["default"](dom, {
      strings: frontmatter.value.heroText,
      typeSpeed: 300,
      startDelay: 300,
      backSpeed: 500,
      loop: true,
      smartBackspace: true
    });
  };
  vue.onMounted(() => {
    if (frontmatter.value.heroText && frontmatter.value.heroText instanceof Array) {
      vue.nextTick(() => {
        setTimeout(() => {
          const el = document.querySelector(dom);
          if (el) {
            typedFction();
          }
        }, 500);
      });
    }
  });
  vue.onUnmounted(() => {
  });
};
const useCategory = () => {
  const category = [];
  const { posts } = usePostData();
  const caclCategory = (data2, item) => {
    const categoryItem = category.find((o2) => o2.name == data2);
    categoryItem ? categoryItem.path.push(item) : category.push({ name: data2, path: [item] });
  };
  posts.forEach((item) => {
    const categories = item.frontmatter.categories;
    if (typeof categories == "string") {
      caclCategory(categories, item);
    }
    if (Array.isArray(categories)) {
      categories.forEach((obj) => caclCategory(obj, item));
    }
  });
  return { category };
};
const useTags = () => {
  const tags = [];
  const { posts } = usePostData();
  const caclTags = (data2, item) => {
    const tagItem = tags.find((o2) => o2.name == data2);
    tagItem ? tagItem.path.push(item) : tags.push({ name: data2, path: [item] });
  };
  posts.forEach((item) => {
    const tags2 = item.frontmatter.tags;
    if (typeof tags2 == "string") {
      caclTags(tags2, item);
    }
    if (Array.isArray(tags2)) {
      tags2.forEach((obj) => caclTags(obj, item));
    }
  });
  return { tags };
};
const useRandomColor = () => {
  const tagColorArr = [
    "#e15b64",
    "#f47e60",
    "#f8b26a",
    "#abbd81",
    "#849b87",
    "#e15b64",
    "#f47e60",
    "#f8b26a",
    "#f26d6d",
    "#67cc86",
    "#fb9b5f",
    "#3498db"
  ];
  const index2 = Math.floor(Math.random() * tagColorArr.length);
  return tagColorArr[index2];
};
const _sfc_main$l = /* @__PURE__ */ vue.defineComponent({
  __name: "Category",
  __ssrInlineRender: true,
  setup(__props) {
    const { category } = useCategory();
    const active = vue.ref(category[0]);
    const pages = vue.reactive({
      pageTotal: active.value.path.length,
      pageNumber: 1,
      pageSize: 10
    });
    const blogData = vue.computed(() => active.value.path.slice((pages.pageNumber - 1) * pages.pageSize, pages.pageNumber * pages.pageSize));
    const getBack = (value) => {
      const { page, pageSize } = value;
      pages.pageNumber = page;
      pages.pageSize = pageSize;
    };
    const changeCategory = (item) => {
      active.value = item;
      pages.pageNumber = 1;
      pages.pageSize = 10;
      pages.pageTotal = item.path.length;
    };
    const styleBg = (item) => active.value.name == item.name ? { "background-color": "#3eaf7c" } : "";
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Icon = vue.resolveComponent("Icon");
      const _component_Item = vue.resolveComponent("Item");
      const _component_Pagination = vue.resolveComponent("Pagination");
      _push(`<!--[-->`);
      _push(serverRenderer.ssrRenderComponent(Navbar, null, null, _parent));
      _push(`<div class="pt-[100px] w-[var(--content-width)] my-0 mx-auto">`);
      _push(serverRenderer.ssrRenderComponent(_component_Icon, {
        icon: "AppstoreTwotone",
        iconSize: 25,
        text: "\u5206\u7C7B\u5217\u8868",
        textSize: 20,
        class: "dark:hover:text-[#fff]"
      }, null, _parent));
      _push(`<div class="w-full flex my-[10px]"><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(category), (item, index2) => {
        _push(serverRenderer.ssrRenderComponent(_component_Item, {
          key: index2,
          categoryItem: item,
          color: vue.unref(useRandomColor)(),
          style: styleBg(item),
          onClick: ($event) => changeCategory(item)
        }, null, _parent));
      });
      _push(`<!--]--></div><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(blogData), (obj, index2) => {
        _push(serverRenderer.ssrRenderComponent(BlogItem, {
          page: obj,
          position: index2 % 2 == 0 ? "left" : "right",
          key: obj
        }, null, _parent));
      });
      _push(`<!--]-->`);
      _push(serverRenderer.ssrRenderComponent(_component_Pagination, {
        pageTotal: pages.pageTotal,
        pageNumber: pages.pageNumber,
        pageSize: pages.pageSize,
        onClick: getBack
      }, null, _parent));
      _push(`</div><!--]-->`);
    };
  }
});
const _sfc_setup$l = _sfc_main$l.setup;
_sfc_main$l.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/layouts/Category.vue");
  return _sfc_setup$l ? _sfc_setup$l(props, ctx) : void 0;
};
var Category = /* @__PURE__ */ _export_sfc(_sfc_main$l, [["__file", "Category.vue"]]);
const _sfc_main$k = /* @__PURE__ */ vue.defineComponent({
  __name: "Tags",
  __ssrInlineRender: true,
  setup(__props) {
    const { tags } = useTags();
    const active = vue.ref(tags[0]);
    const pages = vue.reactive({
      pageTotal: active.value.path.length,
      pageNumber: 1,
      pageSize: 10
    });
    const blogData = vue.computed(() => active.value.path.slice((pages.pageNumber - 1) * pages.pageSize, pages.pageNumber * pages.pageSize));
    const getBack = (value) => {
      const { page, pageSize } = value;
      pages.pageNumber = page;
      pages.pageSize = pageSize;
    };
    const changeTag = (item) => {
      active.value = item;
      pages.pageNumber = 1;
      pages.pageSize = 10;
      pages.pageTotal = item.path.length;
    };
    const styleBg = (item) => active.value.name == item.name ? { "background-color": "#3eaf7c" } : "";
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Icon = vue.resolveComponent("Icon");
      const _component_Item = vue.resolveComponent("Item");
      const _component_Pagination = vue.resolveComponent("Pagination");
      _push(`<!--[-->`);
      _push(serverRenderer.ssrRenderComponent(Navbar, null, null, _parent));
      _push(`<div class="pt-[100px] w-[var(--content-width)] my-0 mx-auto">`);
      _push(serverRenderer.ssrRenderComponent(_component_Icon, {
        icon: "TagsOutlined",
        iconSize: 25,
        text: "\u6807\u7B7E\u5217\u8868",
        class: "dark:hover:text-[#fff]",
        textSize: 20
      }, null, _parent));
      _push(`<div class="w-full flex my-[10px]"><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(tags), (item, index2) => {
        _push(serverRenderer.ssrRenderComponent(_component_Item, {
          key: index2,
          categoryItem: item,
          color: vue.unref(useRandomColor)(),
          style: styleBg(item),
          onClick: ($event) => changeTag(item)
        }, null, _parent));
      });
      _push(`<!--]--></div><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(blogData), (obj, index2) => {
        _push(serverRenderer.ssrRenderComponent(BlogItem, {
          page: obj,
          position: index2 % 2 == 0 ? "left" : "right",
          key: obj
        }, null, _parent));
      });
      _push(`<!--]-->`);
      _push(serverRenderer.ssrRenderComponent(_component_Pagination, {
        pageTotal: pages.pageTotal,
        pageNumber: pages.pageNumber,
        pageSize: pages.pageSize,
        onClick: getBack
      }, null, _parent));
      _push(`</div><!--]-->`);
    };
  }
});
const _sfc_setup$k = _sfc_main$k.setup;
_sfc_main$k.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/layouts/Tags.vue");
  return _sfc_setup$k ? _sfc_setup$k(props, ctx) : void 0;
};
var Tags = /* @__PURE__ */ _export_sfc(_sfc_main$k, [["__file", "Tags.vue"]]);
var clientConfig13 = defineClientConfig({
  enhance({ app, router, siteData: siteData2 }) {
    router.addRoute({ name: "category", path: "/category", component: Category });
    router.addRoute({ name: "tags", path: "/tags", component: Tags });
  },
  setup() {
  },
  rootComponents: []
});
const clientConfigs = [
  clientConfig0,
  clientConfig1,
  clientConfig2,
  clientConfig3,
  clientConfig4,
  clientConfig5,
  clientConfig6,
  clientConfig7,
  clientConfig8,
  clientConfig9,
  clientConfig10,
  clientConfig11,
  i,
  clientConfig13
];
const pagesRoutes = [
  ["v-8daa1a0e", "/", { "title": "" }, ["/index.html", "/README.md"]],
  ["v-d5fe0c96", "/design-pattern/", { "title": "\u8BBE\u8BA1\u6A21\u5F0F" }, ["/design-pattern/index.html", "/design-pattern/README.md"]],
  ["v-3706649a", "/404.html", { "title": "" }, ["/404"]]
];
var createRoutes = () => pagesRoutes.reduce((result, [name, path, meta, redirects]) => {
  result.push({
    name,
    path,
    component: Vuepress,
    meta
  }, ...redirects.map((item) => ({
    path: item,
    redirect: path
  })));
  return result;
}, [
  {
    name: "404",
    path: "/:catchAll(.*)",
    component: Vuepress
  }
]);
var historyCreator = vueRouter.createMemoryHistory;
var createVueRouter = () => {
  const router = vueRouter.createRouter({
    history: historyCreator(shared.removeEndingSlash(siteData.value.base)),
    routes: createRoutes(),
    scrollBehavior: (to2, from, savedPosition) => {
      if (savedPosition)
        return savedPosition;
      if (to2.hash)
        return { el: to2.hash };
      return { top: 0 };
    }
  });
  router.beforeResolve(async (to2, from) => {
    var _a;
    if (to2.path !== from.path || from === vueRouter.START_LOCATION) {
      [pageData.value] = await Promise.all([
        resolvers.resolvePageData(to2.name),
        (_a = pagesComponents[to2.name]) == null ? void 0 : _a.__asyncLoader()
      ]);
    }
  });
  return router;
};
var COMPONENT_STATE_TYPE = "VuePress";
var setupDevtools = (app, globalComputed) => {
  devtoolsApi.setupDevtoolsPlugin({
    app,
    id: "org.vuejs.vuepress",
    label: "VuePress",
    packageName: "@vuepress/client",
    homepage: "https://v2.vuepress.vuejs.org",
    logo: "https://v2.vuepress.vuejs.org/images/hero.png",
    componentStateTypes: [COMPONENT_STATE_TYPE]
  }, (api) => {
    api.on.inspectComponent((payload) => {
      payload.instanceData.state.push(...Object.entries(globalComputed).map(([name, item]) => ({
        type: COMPONENT_STATE_TYPE,
        key: name,
        editable: false,
        value: item.value
      })));
    });
  });
};
var setupGlobalComponents = (app) => {
  app.component("ClientOnly", ClientOnly);
  app.component("Content", Content);
};
var setupGlobalComputed = (app, router) => {
  const routeLocale = vue.computed(() => resolvers.resolveRouteLocale(siteData.value.locales, router.currentRoute.value.path));
  const siteLocaleData = vue.computed(() => resolvers.resolveSiteLocaleData(siteData.value, routeLocale.value));
  const pageFrontmatter = vue.computed(() => resolvers.resolvePageFrontmatter(pageData.value));
  const pageHeadTitle = vue.computed(() => resolvers.resolvePageHeadTitle(pageData.value, siteLocaleData.value));
  const pageHead = vue.computed(() => resolvers.resolvePageHead(pageHeadTitle.value, pageFrontmatter.value, siteLocaleData.value));
  const pageLang = vue.computed(() => resolvers.resolvePageLang(pageData.value));
  app.provide(routeLocaleSymbol, routeLocale);
  app.provide(siteLocaleDataSymbol, siteLocaleData);
  app.provide(pageFrontmatterSymbol, pageFrontmatter);
  app.provide(pageHeadTitleSymbol, pageHeadTitle);
  app.provide(pageHeadSymbol, pageHead);
  app.provide(pageLangSymbol, pageLang);
  Object.defineProperties(app.config.globalProperties, {
    $frontmatter: { get: () => pageFrontmatter.value },
    $head: { get: () => pageHead.value },
    $headTitle: { get: () => pageHeadTitle.value },
    $lang: { get: () => pageLang.value },
    $page: { get: () => pageData.value },
    $routeLocale: { get: () => routeLocale.value },
    $site: { get: () => siteData.value },
    $siteLocale: { get: () => siteLocaleData.value },
    $withBase: { get: () => withBase }
  });
  return {
    pageData,
    pageFrontmatter,
    pageHead,
    pageHeadTitle,
    pageLang,
    routeLocale,
    siteData,
    siteLocaleData
  };
};
var setupUpdateHead = () => {
  vueRouter.useRoute();
  const head = usePageHead();
  const lang = usePageLang();
  {
    const ssrContext = vue.useSSRContext();
    if (ssrContext) {
      ssrContext.head = head.value;
      ssrContext.lang = lang.value;
    }
    return;
  }
};
var appCreator = vue.createSSRApp;
var createVueApp = async () => {
  var _a;
  const app = appCreator({
    name: "VuepressApp",
    setup() {
      var _a2;
      setupUpdateHead();
      for (const clientConfig of clientConfigs) {
        (_a2 = clientConfig.setup) == null ? void 0 : _a2.call(clientConfig);
      }
      return () => [
        vue.h(vueRouter.RouterView),
        ...clientConfigs.flatMap(({ rootComponents = [] }) => rootComponents.map((component) => vue.h(component)))
      ];
    }
  });
  const router = createVueRouter();
  setupGlobalComponents(app);
  const globalComputed = setupGlobalComputed(app, router);
  {
    setupDevtools(app, globalComputed);
  }
  for (const clientConfig of clientConfigs) {
    await ((_a = clientConfig.enhance) == null ? void 0 : _a.call(clientConfig, { app, router, siteData }));
  }
  app.use(router);
  return {
    app,
    router
  };
};
const data$2 = JSON.parse('{"key":"v-8daa1a0e","path":"/","title":"","lang":"zh-CN","frontmatter":{"home":true,"heroText":["\u5B66\u800C\u65F6\u4E60\u4E4B\uFF0C\u4E0D\u4EA6\u8BF4\u4E4E?^1000","\u5B66\u4E60\u8981\u6709\u4E09\u5FC3\uFF0C\u4E00\u4FE1\u5FC3\uFF0C\u4E8C\u51B3\u5FC3\uFF0C\u4E09\u6052\u5FC3"],"tagline":"\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77.","bgImage":["https://pic.netbian.com/uploads/allimg/220304/001005-16463238059274.jpg","https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg","https://pic.netbian.com/uploads/allimg/220507/092102-165188646268bd.jpg"],"bgImageSec":10000,"isBgImagetrigger":true,"needDefaultImages":true,"bgImageStyle":{"height":"550px","color":"#fff"},"showArrow":true,"summary":"","hobby":["\u6E38\u6CF3","\u6ED1\u96EA","\u4E52\u4E53\u7403","\u770B\u5C0F\u8BF4","\u7F16\u7A0B","\u65C5\u6E38","\u770B\u7535\u89C6"],"bubbles":true,"head":[["meta",{"property":"og:url","content":"https://anyfork.github.io/blog-docs/blog-docs/"}],["meta",{"property":"og:site_name","content":"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:updated_time","content":"2022-08-18T04:40:38.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{"property":"article:modified_time","content":"2022-08-18T04:40:38.000Z"}]]},"excerpt":"","headers":[],"git":{"updatedTime":1660797638000,"contributors":[{"name":"AnyFork","email":"zhangtao19910722","commits":8},{"name":"anyfork","email":"874957743@qq.com","commits":2},{"name":"\u5F20\u6D9B","email":"tzhang@yhtech.co","commits":1}]},"filePathRelative":"README.md","readingTime":{"minutes":0.93,"words":279}}');
var index_html$5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  data: data$2
}, Symbol.toStringTag, { value: "Module" }));
const data$1 = JSON.parse('{"key":"v-d5fe0c96","path":"/design-pattern/","title":"\u8BBE\u8BA1\u6A21\u5F0F","lang":"zh-CN","frontmatter":{"title":"\u8BBE\u8BA1\u6A21\u5F0F","description":"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F","sidebar":"auto","tags":"\u8BBE\u8BA1\u6A21\u5F0F","categories":"java","head":[["meta",{"property":"og:url","content":"https://anyfork.github.io/blog-docs/blog-docs/design-pattern/"}],["meta",{"property":"og:site_name","content":"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{"property":"og:title","content":"\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{"property":"og:description","content":"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-08-18T09:15:40.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{"property":"article:modified_time","content":"2022-08-18T09:15:40.000Z"}]]},"excerpt":"<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>\\n","headers":[{"level":1,"title":"1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0","slug":"_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0","children":[{"level":2,"title":"1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F","slug":"_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F","children":[]},{"level":2,"title":"1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5","slug":"_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5","children":[]},{"level":2,"title":"1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027","slug":"_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027","children":[]},{"level":2,"title":"1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B","slug":"_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B","children":[]}]},{"level":1,"title":"2\uFF0CUML \u56FE","slug":"_2-uml-\u56FE","children":[{"level":2,"title":"2.1 \u7C7B\u56FE\u6982\u8FF0","slug":"_2-1-\u7C7B\u56FE\u6982\u8FF0","children":[]},{"level":2,"title":"2.2 \u7C7B\u56FE\u7684\u4F5C\u7528","slug":"_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528","children":[]},{"level":2,"title":"2.3 \u7C7B\u56FE\u8868\u793A\u6CD5","slug":"_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5","children":[{"level":3,"title":"2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F","slug":"_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F","children":[]},{"level":3,"title":"2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F","slug":"_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F","children":[{"level":4,"title":"2.3.2.1 \u5173\u8054\u5173\u7CFB","slug":"_2-3-2-1-\u5173\u8054\u5173\u7CFB","children":[]},{"level":4,"title":"2.3.2.2 \u805A\u5408\u5173\u7CFB","slug":"_2-3-2-2-\u805A\u5408\u5173\u7CFB","children":[]},{"level":4,"title":"2.3.2.3 \u7EC4\u5408\u5173\u7CFB","slug":"_2-3-2-3-\u7EC4\u5408\u5173\u7CFB","children":[]},{"level":4,"title":"2.3.2.4 \u4F9D\u8D56\u5173\u7CFB","slug":"_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB","children":[]},{"level":4,"title":"2.3.2.5 \u7EE7\u627F\u5173\u7CFB","slug":"_2-3-2-5-\u7EE7\u627F\u5173\u7CFB","children":[]},{"level":4,"title":"2.3.2.6 \u5B9E\u73B0\u5173\u7CFB","slug":"_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB","children":[]}]}]}]},{"level":1,"title":"3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219","slug":"_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219","children":[{"level":2,"title":"3.1 \u5F00\u95ED\u539F\u5219","slug":"_3-1-\u5F00\u95ED\u539F\u5219","children":[]},{"level":2,"title":"3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219","slug":"_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219","children":[]},{"level":2,"title":"3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219","slug":"_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219","children":[]},{"level":2,"title":"3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219","slug":"_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219","children":[]},{"level":2,"title":"3.5 \u8FEA\u7C73\u7279\u6CD5\u5219","slug":"_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219","children":[]},{"level":2,"title":"3.6 \u5408\u6210\u590D\u7528\u539F\u5219","slug":"_3-6-\u5408\u6210\u590D\u7528\u539F\u5219","children":[]}]},{"level":1,"title":"4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F","slug":"_4-\u521B\u5EFA\u8005\u6A21\u5F0F","children":[{"level":2,"title":"4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F","slug":"_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F","children":[{"level":3,"title":"4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784","slug":"_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784","children":[]},{"level":3,"title":"4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0","slug":"_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0","children":[]},{"level":3,"title":"4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898","slug":"_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898","children":[{"level":4,"title":"4.1.3.1 \u95EE\u9898\u6F14\u793A","slug":"_4-1-3-1-\u95EE\u9898\u6F14\u793A","children":[]},{"level":4,"title":"4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3","slug":"_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3","children":[]}]},{"level":3,"title":"4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B","slug":"_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B","children":[]}]},{"level":2,"title":"4.2 \u5DE5\u5382\u6A21\u5F0F","slug":"_4-2-\u5DE5\u5382\u6A21\u5F0F","children":[{"level":3,"title":"4.2.1 \u6982\u8FF0","slug":"_4-2-1-\u6982\u8FF0","children":[]},{"level":3,"title":"4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F","slug":"_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F","children":[{"level":4,"title":"4.2.2.1 \u7ED3\u6784","slug":"_4-2-2-1-\u7ED3\u6784","children":[]},{"level":4,"title":"4.2.2.2 \u5B9E\u73B0","slug":"_4-2-2-2-\u5B9E\u73B0","children":[]},{"level":4,"title":"4.2.2.4 \u4F18\u7F3A\u70B9","slug":"_4-2-2-4-\u4F18\u7F3A\u70B9","children":[]},{"level":4,"title":"4.2.2.3 \u6269\u5C55","slug":"_4-2-2-3-\u6269\u5C55","children":[]}]},{"level":3,"title":"4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F","slug":"_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F","children":[{"level":4,"title":"4.2.3.1 \u6982\u5FF5","slug":"_4-2-3-1-\u6982\u5FF5","children":[]},{"level":4,"title":"4.2.3.2 \u7ED3\u6784","slug":"_4-2-3-2-\u7ED3\u6784","children":[]},{"level":4,"title":"4.2.3.3 \u5B9E\u73B0","slug":"_4-2-3-3-\u5B9E\u73B0","children":[]},{"level":4,"title":"4.2.3.4 \u4F18\u7F3A\u70B9","slug":"_4-2-3-4-\u4F18\u7F3A\u70B9","children":[]}]},{"level":3,"title":"4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F","slug":"_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F","children":[{"level":4,"title":"4.2.4.1 \u6982\u5FF5","slug":"_4-2-4-1-\u6982\u5FF5","children":[]},{"level":4,"title":"4.2.4.2 \u7ED3\u6784","slug":"_4-2-4-2-\u7ED3\u6784","children":[]},{"level":4,"title":"4.2.4.2 \u5B9E\u73B0","slug":"_4-2-4-2-\u5B9E\u73B0","children":[]},{"level":4,"title":"4.2.4.3 \u4F18\u7F3A\u70B9","slug":"_4-2-4-3-\u4F18\u7F3A\u70B9","children":[]},{"level":4,"title":"4.2.4.4 \u4F7F\u7528\u573A\u666F","slug":"_4-2-4-4-\u4F7F\u7528\u573A\u666F","children":[]}]},{"level":3,"title":"4.2.5 \u6A21\u5F0F\u6269\u5C55","slug":"_4-2-5-\u6A21\u5F0F\u6269\u5C55","children":[]},{"level":3,"title":"4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5","slug":"_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5","children":[]}]},{"level":2,"title":"4.3 \u539F\u578B\u6A21\u5F0F","slug":"_4-3-\u539F\u578B\u6A21\u5F0F","children":[{"level":3,"title":"4.3.1 \u6982\u8FF0","slug":"_4-3-1-\u6982\u8FF0","children":[]},{"level":3,"title":"4.3.2 \u7ED3\u6784","slug":"_4-3-2-\u7ED3\u6784","children":[]},{"level":3,"title":"4.3.3 \u5B9E\u73B0","slug":"_4-3-3-\u5B9E\u73B0","children":[]},{"level":3,"title":"4.3.4 \u6848\u4F8B","slug":"_4-3-4-\u6848\u4F8B","children":[]},{"level":3,"title":"4.3.5 \u4F7F\u7528\u573A\u666F","slug":"_4-3-5-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09","slug":"_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686","children":[]}]},{"level":2,"title":"4.5 \u5EFA\u9020\u8005\u6A21\u5F0F","slug":"_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F","children":[{"level":3,"title":"4.4.1 \u6982\u8FF0","slug":"_4-4-1-\u6982\u8FF0","children":[]},{"level":3,"title":"4.4.2 \u7ED3\u6784","slug":"_4-4-2-\u7ED3\u6784","children":[]},{"level":3,"title":"4.4.3 \u5B9E\u4F8B","slug":"_4-4-3-\u5B9E\u4F8B","children":[]},{"level":3,"title":"4.4.4 \u4F18\u7F3A\u70B9","slug":"_4-4-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"4.4.5 \u4F7F\u7528\u573A\u666F","slug":"_4-4-5-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"4.4.6 \u6A21\u5F0F\u6269\u5C55","slug":"_4-4-6-\u6A21\u5F0F\u6269\u5C55","children":[]}]},{"level":2,"title":"4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4","slug":"_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4","children":[{"level":3,"title":"4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F","slug":"_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F","children":[]},{"level":3,"title":"4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F","slug":"_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F","children":[]}]}]},{"level":1,"title":"5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F","slug":"_5-\u7ED3\u6784\u578B\u6A21\u5F0F","children":[{"level":2,"title":"5.1 \u4EE3\u7406\u6A21\u5F0F","slug":"_5-1-\u4EE3\u7406\u6A21\u5F0F","children":[{"level":3,"title":"5.1.1 \u6982\u8FF0","slug":"_5-1-1-\u6982\u8FF0","children":[]},{"level":3,"title":"5.1.2 \u7ED3\u6784","slug":"_5-1-2-\u7ED3\u6784","children":[]},{"level":3,"title":"5.1.3 \u9759\u6001\u4EE3\u7406","slug":"_5-1-3-\u9759\u6001\u4EE3\u7406","children":[]},{"level":3,"title":"5.1.4 JDK \u52A8\u6001\u4EE3\u7406","slug":"_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406","children":[]},{"level":3,"title":"5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406","slug":"_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406","children":[]},{"level":3,"title":"5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4","slug":"_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4","children":[]},{"level":3,"title":"5.1.7 \u4F18\u7F3A\u70B9","slug":"_5-1-7-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"5.1.8 \u4F7F\u7528\u573A\u666F","slug":"_5-1-8-\u4F7F\u7528\u573A\u666F","children":[]}]},{"level":2,"title":"5.2 \u9002\u914D\u5668\u6A21\u5F0F","slug":"_5-2-\u9002\u914D\u5668\u6A21\u5F0F","children":[{"level":3,"title":"5.2.1 \u6982\u8FF0","slug":"_5-2-1-\u6982\u8FF0","children":[]},{"level":3,"title":"5.2.2 \u7ED3\u6784","slug":"_5-2-2-\u7ED3\u6784","children":[]},{"level":3,"title":"5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F","slug":"_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F","children":[]},{"level":3,"title":"5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F","slug":"_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F","children":[]},{"level":3,"title":"5.2.5 \u5E94\u7528\u573A\u666F","slug":"_5-2-5-\u5E94\u7528\u573A\u666F","children":[]},{"level":3,"title":"5.2.6 JDK \u6E90\u7801\u89E3\u6790","slug":"_5-2-6-jdk-\u6E90\u7801\u89E3\u6790","children":[]}]},{"level":2,"title":"5.3 \u88C5\u9970\u8005\u6A21\u5F0F","slug":"_5-3-\u88C5\u9970\u8005\u6A21\u5F0F","children":[{"level":3,"title":"5.3.1 \u6982\u8FF0","slug":"_5-3-1-\u6982\u8FF0","children":[]},{"level":3,"title":"5.3.2 \u7ED3\u6784","slug":"_5-3-2-\u7ED3\u6784","children":[]},{"level":3,"title":"5.3.3 \u6848\u4F8B","slug":"_5-3-3-\u6848\u4F8B","children":[]},{"level":3,"title":"5.3.4 \u4F7F\u7528\u573A\u666F","slug":"_5-3-4-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"5.3.5 JDK \u6E90\u7801\u89E3\u6790","slug":"_5-3-5-jdk-\u6E90\u7801\u89E3\u6790","children":[]},{"level":3,"title":"5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B","slug":"_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B","children":[]}]},{"level":2,"title":"5.4 \u6865\u63A5\u6A21\u5F0F","slug":"_5-4-\u6865\u63A5\u6A21\u5F0F","children":[{"level":3,"title":"5.4.1 \u6982\u8FF0","slug":"_5-4-1-\u6982\u8FF0","children":[]},{"level":3,"title":"5.4.2 \u7ED3\u6784","slug":"_5-4-2-\u7ED3\u6784","children":[]},{"level":3,"title":"5.4.3 \u6848\u4F8B","slug":"_5-4-3-\u6848\u4F8B","children":[]},{"level":3,"title":"5.4.4 \u4F7F\u7528\u573A\u666F","slug":"_5-4-4-\u4F7F\u7528\u573A\u666F","children":[]}]},{"level":2,"title":"5.5 \u5916\u89C2\u6A21\u5F0F","slug":"_5-5-\u5916\u89C2\u6A21\u5F0F","children":[{"level":3,"title":"5.5.1 \u6982\u8FF0","slug":"_5-5-1-\u6982\u8FF0","children":[]},{"level":3,"title":"5.5.2 \u7ED3\u6784","slug":"_5-5-2-\u7ED3\u6784","children":[]},{"level":3,"title":"5.5.3 \u6848\u4F8B","slug":"_5-5-3-\u6848\u4F8B","children":[]},{"level":3,"title":"5.5.4 \u4F7F\u7528\u573A\u666F","slug":"_5-5-4-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"5.5.5 \u6E90\u7801\u89E3\u6790","slug":"_5-5-5-\u6E90\u7801\u89E3\u6790","children":[]}]},{"level":2,"title":"5.6 \u7EC4\u5408\u6A21\u5F0F","slug":"_5-6-\u7EC4\u5408\u6A21\u5F0F","children":[{"level":3,"title":"5.6.1 \u6982\u8FF0","slug":"_5-6-1-\u6982\u8FF0","children":[]},{"level":3,"title":"5.6.2 \u7ED3\u6784","slug":"_5-6-2-\u7ED3\u6784","children":[]},{"level":3,"title":"5.6.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_5-6-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B","slug":"_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B","children":[]},{"level":3,"title":"5.6.5 \u4F18\u70B9","slug":"_5-6-5-\u4F18\u70B9","children":[]},{"level":3,"title":"5.6.6 \u4F7F\u7528\u573A\u666F","slug":"_5-6-6-\u4F7F\u7528\u573A\u666F","children":[]}]},{"level":2,"title":"5.7 \u4EAB\u5143\u6A21\u5F0F","slug":"_5-7-\u4EAB\u5143\u6A21\u5F0F","children":[{"level":3,"title":"5.7.1 \u6982\u8FF0","slug":"_5-7-1-\u6982\u8FF0","children":[]},{"level":3,"title":"5.7.2 \u7ED3\u6784","slug":"_5-7-2-\u7ED3\u6784","children":[]},{"level":3,"title":"5.7.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_5-7-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F","slug":"_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"5.7.6 JDK \u6E90\u7801\u89E3\u6790","slug":"_5-7-6-jdk-\u6E90\u7801\u89E3\u6790","children":[]}]}]},{"level":1,"title":"6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F","slug":"_6-\u884C\u4E3A\u578B\u6A21\u5F0F","children":[{"level":2,"title":"6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F","slug":"_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F","children":[{"level":3,"title":"6.1.1 \u6982\u8FF0","slug":"_6-1-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.1.2 \u7ED3\u6784","slug":"_6-1-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.1.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-1-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.1.3 \u4F18\u7F3A\u70B9","slug":"_6-1-3-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.1.4 \u9002\u7528\u573A\u666F","slug":"_6-1-4-\u9002\u7528\u573A\u666F","children":[]},{"level":3,"title":"6.1.5 JDK \u6E90\u7801\u89E3\u6790","slug":"_6-1-5-jdk-\u6E90\u7801\u89E3\u6790","children":[]}]},{"level":2,"title":"6.2 \u7B56\u7565\u6A21\u5F0F","slug":"_6-2-\u7B56\u7565\u6A21\u5F0F","children":[{"level":3,"title":"6.2.1 \u6982\u8FF0","slug":"_6-2-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.2.2 \u7ED3\u6784","slug":"_6-2-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.2.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-2-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.2.4 \u4F18\u7F3A\u70B9","slug":"_6-2-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.2.5 \u4F7F\u7528\u573A\u666F","slug":"_6-2-5-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"6.2.6 JDK \u6E90\u7801\u89E3\u6790","slug":"_6-2-6-jdk-\u6E90\u7801\u89E3\u6790","children":[]}]},{"level":2,"title":"6.3 \u547D\u4EE4\u6A21\u5F0F","slug":"_6-3-\u547D\u4EE4\u6A21\u5F0F","children":[{"level":3,"title":"6.3.1 \u6982\u8FF0","slug":"_6-3-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.3.2 \u7ED3\u6784","slug":"_6-3-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.3.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-3-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.3.4 \u4F18\u7F3A\u70B9","slug":"_6-3-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.3.5 \u4F7F\u7528\u573A\u666F","slug":"_6-3-5-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"6.3.6 JDK \u6E90\u7801\u89E3\u6790","slug":"_6-3-6-jdk-\u6E90\u7801\u89E3\u6790","children":[]}]},{"level":2,"title":"6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F","slug":"_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F","children":[{"level":3,"title":"6.4.1 \u6982\u8FF0","slug":"_6-4-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.4.2 \u7ED3\u6784","slug":"_6-4-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.4.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-4-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.4.4 \u4F18\u7F3A\u70B9","slug":"_6-4-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.4.5 \u6E90\u7801\u89E3\u6790","slug":"_6-4-5-\u6E90\u7801\u89E3\u6790","children":[]}]},{"level":2,"title":"6.5 \u72B6\u6001\u6A21\u5F0F","slug":"_6-5-\u72B6\u6001\u6A21\u5F0F","children":[{"level":3,"title":"6.5.1 \u6982\u8FF0","slug":"_6-5-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.5.2 \u7ED3\u6784","slug":"_6-5-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.5.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-5-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.5.4 \u4F18\u7F3A\u70B9","slug":"_6-5-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.5.5 \u4F7F\u7528\u573A\u666F","slug":"_6-5-5-\u4F7F\u7528\u573A\u666F","children":[]}]},{"level":2,"title":"6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F","slug":"_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F","children":[{"level":3,"title":"6.6.1 \u6982\u8FF0","slug":"_6-6-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.6.2 \u7ED3\u6784","slug":"_6-6-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.6.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-6-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.6.4 \u4F18\u7F3A\u70B9","slug":"_6-6-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.6.5 \u4F7F\u7528\u573A\u666F","slug":"_6-6-5-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0","slug":"_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0","children":[]}]},{"level":2,"title":"6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F","slug":"_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F","children":[{"level":3,"title":"6.7.1 \u6982\u8FF0","slug":"_6-7-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.7.2 \u7ED3\u6784","slug":"_6-7-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.7.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-7-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.7.4 \u4F18\u7F3A\u70B9","slug":"_6-7-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.7.5 \u4F7F\u7528\u573A\u666F","slug":"_6-7-5-\u4F7F\u7528\u573A\u666F","children":[]}]},{"level":2,"title":"6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F","slug":"_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F","children":[{"level":3,"title":"6.8.1 \u6982\u8FF0","slug":"_6-8-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.8.2 \u7ED3\u6784","slug":"_6-8-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.8.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-8-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.8.4 \u4F18\u7F3A\u70B9","slug":"_6-8-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.8.5 \u4F7F\u7528\u573A\u666F","slug":"_6-8-5-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"6.8.6 JDK \u6E90\u7801\u89E3\u6790","slug":"_6-8-6-jdk-\u6E90\u7801\u89E3\u6790","children":[]}]},{"level":2,"title":"6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F","slug":"_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F","children":[{"level":3,"title":"6.9.1 \u6982\u8FF0","slug":"_6-9-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.9.2 \u7ED3\u6784","slug":"_6-9-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.9.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-9-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.9.4 \u4F18\u7F3A\u70B9","slug":"_6-9-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.9.5 \u4F7F\u7528\u573A\u666F","slug":"_6-9-5-\u4F7F\u7528\u573A\u666F","children":[]},{"level":3,"title":"6.9.6 \u6269\u5C55","slug":"_6-9-6-\u6269\u5C55","children":[]}]},{"level":2,"title":"6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F","slug":"_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F","children":[{"level":3,"title":"6.10.1 \u6982\u8FF0","slug":"_6-10-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.10.2 \u7ED3\u6784","slug":"_6-10-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.10.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-10-3-\u6848\u4F8B\u5B9E\u73B0","children":[{"level":4,"title":"6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F","slug":"_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F","children":[]},{"level":4,"title":"6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F","slug":"_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F","children":[]}]},{"level":3,"title":"6.10.4 \u4F18\u7F3A\u70B9","slug":"_6-10-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.10.5 \u4F7F\u7528\u573A\u666F","slug":"_6-10-5-\u4F7F\u7528\u573A\u666F","children":[]}]},{"level":2,"title":"6.11 \u89E3\u91CA\u5668\u6A21\u5F0F","slug":"_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F","children":[{"level":3,"title":"6.11.1 \u6982\u8FF0","slug":"_6-11-1-\u6982\u8FF0","children":[]},{"level":3,"title":"6.11.2 \u7ED3\u6784","slug":"_6-11-2-\u7ED3\u6784","children":[]},{"level":3,"title":"6.11.3 \u6848\u4F8B\u5B9E\u73B0","slug":"_6-11-3-\u6848\u4F8B\u5B9E\u73B0","children":[]},{"level":3,"title":"6.11.4 \u4F18\u7F3A\u70B9","slug":"_6-11-4-\u4F18\u7F3A\u70B9","children":[]},{"level":3,"title":"6.11.5 \u4F7F\u7528\u573A\u666F","slug":"_6-11-5-\u4F7F\u7528\u573A\u666F","children":[]}]}]},{"level":1,"title":"7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6","slug":"_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6","children":[{"level":2,"title":"7.1 spring \u4F7F\u7528\u56DE\u987E","slug":"_7-1-spring-\u4F7F\u7528\u56DE\u987E","children":[]},{"level":2,"title":"7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784","slug":"_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784","children":[{"level":3,"title":"7.1.1 bean \u6982\u8FF0","slug":"_7-1-1-bean-\u6982\u8FF0","children":[]}]},{"level":2,"title":"7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790","slug":"_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790","children":[{"level":3,"title":"7.3.1 BeanFactory \u89E3\u6790","slug":"_7-3-1-beanfactory-\u89E3\u6790","children":[]},{"level":3,"title":"7.3.2 BeanDefinition \u89E3\u6790","slug":"_7-3-2-beandefinition-\u89E3\u6790","children":[]},{"level":3,"title":"7.3.3 BeanDefinitionReader \u89E3\u6790","slug":"_7-3-3-beandefinitionreader-\u89E3\u6790","children":[]},{"level":3,"title":"7.3.4 BeanDefinitionRegistry \u89E3\u6790","slug":"_7-3-4-beandefinitionregistry-\u89E3\u6790","children":[]},{"level":3,"title":"7.3.5 \u521B\u5EFA\u5BB9\u5668","slug":"_7-3-5-\u521B\u5EFA\u5BB9\u5668","children":[]}]},{"level":2,"title":"7.4 \u81EA\u5B9A\u4E49 SpringIOC","slug":"_7-4-\u81EA\u5B9A\u4E49-springioc","children":[{"level":3,"title":"7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B","slug":"_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B","children":[{"level":4,"title":"7.4.1.1 PropertyValue \u7C7B","slug":"_7-4-1-1-propertyvalue-\u7C7B","children":[]},{"level":4,"title":"7.4.1.2 MutablePropertyValues \u7C7B","slug":"_7-4-1-2-mutablepropertyvalues-\u7C7B","children":[]},{"level":4,"title":"7.4.1.3 BeanDefinition \u7C7B","slug":"_7-4-1-3-beandefinition-\u7C7B","children":[]}]},{"level":3,"title":"7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B","slug":"_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B","children":[{"level":4,"title":"7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3","slug":"_7-4-2-1-beandefinitionregistry-\u63A5\u53E3","children":[]},{"level":4,"title":"7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B","slug":"_7-4-2-2-simplebeandefinitionregistry-\u7C7B","children":[]}]},{"level":3,"title":"7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B","slug":"_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B","children":[{"level":4,"title":"7.4.3.1 BeanDefinitionReader \u63A5\u53E3","slug":"_7-4-3-1-beandefinitionreader-\u63A5\u53E3","children":[]},{"level":4,"title":"7.4.3.2 XmlBeanDefinitionReader \u7C7B","slug":"_7-4-3-2-xmlbeandefinitionreader-\u7C7B","children":[]}]},{"level":3,"title":"7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B","slug":"_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B","children":[{"level":4,"title":"7.4.4.1 BeanFactory \u63A5\u53E3","slug":"_7-4-4-1-beanfactory-\u63A5\u53E3","children":[]},{"level":4,"title":"7.4.4.2 ApplicationContext \u63A5\u53E3","slug":"_7-4-4-2-applicationcontext-\u63A5\u53E3","children":[]},{"level":4,"title":"7.4.4.3 AbstractApplicationContext \u7C7B","slug":"_7-4-4-3-abstractapplicationcontext-\u7C7B","children":[]},{"level":4,"title":"7.4.4.4 ClassPathXmlApplicationContext \u7C7B","slug":"_7-4-4-4-classpathxmlapplicationcontext-\u7C7B","children":[]}]},{"level":3,"title":"7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3","slug":"_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3","children":[{"level":4,"title":"7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F","slug":"_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F","children":[]},{"level":4,"title":"7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219","slug":"_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219","children":[]},{"level":4,"title":"7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165","slug":"_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165","children":[]}]}]}]}],"git":{"updatedTime":1660814140000,"contributors":[{"name":"anyfork","email":"874957743@qq.com","commits":2}]},"filePathRelative":"design-pattern/README.md","readingTime":{"minutes":164.61,"words":49383}}');
var index_html$4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  data: data$1
}, Symbol.toStringTag, { value: "Module" }));
const data = JSON.parse('{"key":"v-3706649a","path":"/404.html","title":"","lang":"zh-CN","frontmatter":{"layout":"404","summary":"","head":[["meta",{"property":"og:url","content":"https://anyfork.github.io/blog-docs/blog-docs/404.html"}],["meta",{"property":"og:site_name","content":"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"\u5C0F\u7D2B\u5FF5\u6C81"}]]},"excerpt":"","headers":[],"git":{},"filePathRelative":null,"readingTime":{"minutes":0,"words":0}}');
var _404_html$2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  data
}, Symbol.toStringTag, { value: "Module" }));
const _sfc_main$j = {};
function _sfc_ssrRender$3(_ctx, _push, _parent, _attrs) {
  _push(`<div${serverRenderer.ssrRenderAttrs(_attrs)}></div>`);
}
const _sfc_setup$j = _sfc_main$j.setup;
_sfc_main$j.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../pages/index.html.vue");
  return _sfc_setup$j ? _sfc_setup$j(props, ctx) : void 0;
};
var index_html$2 = /* @__PURE__ */ _export_sfc(_sfc_main$j, [["ssrRender", _sfc_ssrRender$3], ["__file", "index.html.vue"]]);
var index_html$3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": index_html$2
}, Symbol.toStringTag, { value: "Module" }));
var _imports_0 = "/blog-docs/img/Employee.jpg";
var _imports_1 = "/blog-docs/img/demo.png";
var _imports_2 = "/blog-docs/img/customer_address.png";
var _imports_3 = "/blog-docs/img/customer_product.png";
var _imports_4 = "/blog-docs/img/node.png";
var _imports_5 = "/blog-docs/img/image-20191229173422328.png";
var _imports_6 = "/blog-docs/img/image-20191229173455149.png";
var _imports_7 = "/blog-docs/img/image-20191229173518926.png";
var _imports_8 = "/blog-docs/img/image-20191229173539838.png";
var _imports_9 = "/blog-docs/img/image-20191229173554296.png";
var _imports_10 = "/blog-docs/img/open-close.png";
var _imports_11 = "/blog-docs/img/\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png";
var _imports_12 = "/blog-docs/img/\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png";
var _imports_13 = "/blog-docs/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png";
var _imports_14 = "/blog-docs/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png";
var _imports_15 = "/blog-docs/img/\u63A5\u53E3\u9694\u79BB\u539F\u5219.png";
var _imports_16 = "/blog-docs/img/\u63A5\u53E3\u9694\u79BB\u539F\u52191.png";
var _imports_17 = "/blog-docs/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png";
var _imports_18 = "/blog-docs/img/\u5408\u6210\u590D\u7528\u539F\u5219.png";
var _imports_19 = "/blog-docs/img/\u5408\u6210\u590D\u7528\u539F\u52191.png";
var _imports_20 = "/blog-docs/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png";
var _imports_21 = "/blog-docs/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png";
var _imports_22 = "/blog-docs/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png";
var _imports_23 = "/blog-docs/img/image-20200401214509176.png";
var _imports_24 = "/blog-docs/img/image-20200401222951963.png";
var _imports_25 = "/blog-docs/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png";
var _imports_26 = "/blog-docs/img/jdk\u6E90\u7801\u89E3\u6790.png";
var _imports_27 = "/blog-docs/img/\u539F\u578B\u6A21\u5F0F.png";
var _imports_28 = "/blog-docs/img/\u539F\u578B\u6A21\u5F0F1.png";
var _imports_29 = "/blog-docs/img/\u539F\u578B\u6A21\u5F0F2.png";
var _imports_30 = "/blog-docs/img/\u539F\u578B\u6A21\u5F0F3.png";
var _imports_31 = "/blog-docs/img/image-20200413225341516.png";
var _imports_32 = "/blog-docs/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png";
var _imports_33 = "/blog-docs/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png";
var _imports_34 = "/blog-docs/img/\u9759\u6001\u4EE3\u7406.png";
var _imports_35 = "/blog-docs/img/\u8F6C\u63A5\u5934.png";
var _imports_36 = "/blog-docs/img/\u9002\u914D\u5668\u6A21\u5F0F.png";
var _imports_37 = "/blog-docs/img/\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png";
var _imports_38 = "/blog-docs/img/\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png";
var _imports_39 = "/blog-docs/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png";
var _imports_40 = "/blog-docs/img/\u88C5\u9970\u8005\u6A21\u5F0F.png";
var _imports_41 = "/blog-docs/img/\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png";
var _imports_42 = "/blog-docs/img/image-20200207194617620.png";
var _imports_43 = "/blog-docs/img/\u6865\u63A5\u6A21\u5F0F.png";
var _imports_44 = "/blog-docs/img/\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg";
var _imports_45 = "/blog-docs/img/\u5916\u89C2\u6A21\u5F0F.png";
var _imports_46 = "/blog-docs/img/image-20200207234545691.png";
var _imports_47 = "/blog-docs/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png";
var _imports_48 = "/blog-docs/img/image-20200208180417291.png";
var _imports_49 = "/blog-docs/img/image-20200208182322313.png";
var _imports_50 = "/blog-docs/img/\u7EC4\u5408\u6A21\u5F0F.png";
var _imports_51 = "/blog-docs/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png";
var _imports_52 = "/blog-docs/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg";
var _imports_53 = "/blog-docs/img/\u4EAB\u5143\u6A21\u5F0F.png";
var _imports_54 = "/blog-docs/img/image-20200208212930857.png";
var _imports_55 = "/blog-docs/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png";
var _imports_56 = "/blog-docs/img/image-20200210143039168.png";
var _imports_57 = "/blog-docs/img/image-20200210144457478.png";
var _imports_58 = "/blog-docs/img/\u7B56\u7565\u6A21\u5F0F.png";
var _imports_59 = "/blog-docs/img/image-20200211130313251.png";
var _imports_60 = "/blog-docs/img/\u547D\u4EE4\u6A21\u5F0F.png";
var _imports_61 = "/blog-docs/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png";
var _imports_62 = "/blog-docs/img/\u72B6\u6001\u6A21\u5F0F\u524D.png";
var _imports_63 = "/blog-docs/img/\u72B6\u6001\u6A21\u5F0F.png";
var _imports_64 = "/blog-docs/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png";
var _imports_65 = "/blog-docs/img/image-20200214110924010.png";
var _imports_66 = "/blog-docs/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png";
var _imports_67 = "/blog-docs/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png";
var _imports_68 = "/blog-docs/img/\u8BBF\u95EE\u8005\u6A21\u5F0F.png";
var _imports_69 = "/blog-docs/img/image-20200214215446638.png";
var _imports_70 = "/blog-docs/img/image-20200426233931693.png";
var _imports_71 = "/blog-docs/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png";
var _imports_72 = "/blog-docs/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png";
var _imports_73 = "/blog-docs/img/image-20200215220322641.png";
var _imports_74 = "/blog-docs/img/image-20200215225227616.png";
var _imports_75 = "/blog-docs/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png";
var _imports_76 = "/blog-docs/img/image-20200429165544151.png";
var _imports_77 = "/blog-docs/img/image-20200429111324770.png";
var _imports_78 = "/blog-docs/img/image-20200429185050396.png";
var _imports_79 = "/blog-docs/img/image-20200430220155371.png";
var _imports_80 = "/blog-docs/img/image-20200429204239868.png";
var _imports_81 = "/blog-docs/img/image-20200429204700956.png";
var _imports_82 = "/blog-docs/img/image-20200429211132185.png";
const _sfc_main$i = {};
function _sfc_ssrRender$2(_ctx, _push, _parent, _attrs) {
  _push(`<div${serverRenderer.ssrRenderAttrs(_attrs)}><p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p><h1 id="_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" aria-hidden="true">#</a> 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0</h1><h2 id="_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" aria-hidden="true">#</a> 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F</h2><p>&quot;\u8BBE\u8BA1\u6A21\u5F0F&quot;\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002</p><p>1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB<code>\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09</code>\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002</p><p>1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002</p><h2 id="_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" aria-hidden="true">#</a> 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5</h2><p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p><h2 id="_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" tabindex="-1"><a class="header-anchor" href="#_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" aria-hidden="true">#</a> 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027</h2><p>\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002</p><p>\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002</p><ul><li>\u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002</li><li>\u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002</li><li>\u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002</li></ul><h2 id="_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" aria-hidden="true">#</a> 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B</h2><ul><li><p><strong>\u521B\u5EFA\u578B\u6A21\u5F0F</strong></p><p>\u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002</p></li><li><p><strong>\u7ED3\u6784\u578B\u6A21\u5F0F</strong></p><p>\u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002</p></li><li><p><strong>\u884C\u4E3A\u578B\u6A21\u5F0F</strong></p><p>\u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p></li></ul><h1 id="_2-uml-\u56FE" tabindex="-1"><a class="header-anchor" href="#_2-uml-\u56FE" aria-hidden="true">#</a> 2\uFF0CUML \u56FE</h1><p>\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002</p><p>UML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002</p><h2 id="_2-1-\u7C7B\u56FE\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_2-1-\u7C7B\u56FE\u6982\u8FF0" aria-hidden="true">#</a> 2.1 \u7C7B\u56FE\u6982\u8FF0</h2><p>\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002</p><h2 id="_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" aria-hidden="true">#</a> 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528</h2><ul><li>\u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B</li><li>\u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002</li></ul><h2 id="_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" aria-hidden="true">#</a> 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5</h2><h3 id="_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F</h3><p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_0)} alt=""></p><p>\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A</p><ul><li><p>+\uFF1A\u8868\u793A public</p></li><li><p>-\uFF1A\u8868\u793A private</p></li><li><p>#\uFF1A\u8868\u793A protected</p></li></ul><p>\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]</strong></p><p>\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]</strong></p><blockquote><p>\u6CE8\u610F\uFF1A</p><p>\u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684</p><p>\u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762</p></blockquote><p><strong>\u4E3E\u4E2A\u6817\u5B50\uFF1A</strong></p><p><img${serverRenderer.ssrRenderAttr("src", _imports_1)} alt=""></p><p>\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A</p><ul><li>method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002</li><li>method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002</li><li>method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002</li></ul><h3 id="_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F</h3><h4 id="_2-3-2-1-\u5173\u8054\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-1-\u5173\u8054\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.1 \u5173\u8054\u5173\u7CFB</h4><p>\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002</p><p>\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002</p><p><strong>1\uFF0C\u5355\u5411\u5173\u8054</strong></p><p><img${serverRenderer.ssrRenderAttr("src", _imports_2)} alt=""></p><p>\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002</p><p><strong>2\uFF0C\u53CC\u5411\u5173\u8054</strong></p><p><img${serverRenderer.ssrRenderAttr("src", _imports_3)} alt=""></p><p>\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002</p><p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List&lt;Product&gt;\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002</p><p><strong>3\uFF0C\u81EA\u5173\u8054</strong></p><p><img${serverRenderer.ssrRenderAttr("src", _imports_4)} alt=""></p><p>\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002</p><h4 id="_2-3-2-2-\u805A\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-2-\u805A\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.2 \u805A\u5408\u5173\u7CFB</h4><p>\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002</p><p>\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002</p><p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_5)} alt=""></p><h4 id="_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.3 \u7EC4\u5408\u5173\u7CFB</h4><p>\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002</p><p>\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p><p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_6)} alt=""></p><h4 id="_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB</h4><p>\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002</p><p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_7)} alt=""></p><h4 id="_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.5 \u7EE7\u627F\u5173\u7CFB</h4><p>\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002</p><p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_8)} alt=""></p><h4 id="_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB</h4><p>\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002</p><p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_9)} alt=""></p><h1 id="_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219</h1><p>\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002</p><h2 id="_3-1-\u5F00\u95ED\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-1-\u5F00\u95ED\u539F\u5219" aria-hidden="true">#</a> 3.1 \u5F00\u95ED\u539F\u5219</h2><p><strong>\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED</strong>\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002</p><p>\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002</p><p>\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002</p><p>\u4E0B\u9762\u4EE5 <code>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002</p><p>\u3010\u4F8B\u3011<code>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002</p><p>\u5206\u6790\uFF1A<code>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_10)} alt=""></p><h2 id="_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" aria-hidden="true">#</a> 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219</h2><p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002</p><p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002</p><p>\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002</p><p>\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50</p><p>\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p><p>\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_11)} alt=""></p><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p><strong>\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> length<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> width<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A</strong></p><p>\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RectangleDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Rectangle</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;============&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Rectangle</span> rectangle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle1<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002 \u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p><p>\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3</p><img${serverRenderer.ssrRenderAttr("src", _imports_12)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><h2 id="_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" aria-hidden="true">#</a> 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219</h2><p>\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002</p><p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219</p><p>\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111</p><p>\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002</p><p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p><img${serverRenderer.ssrRenderAttr("src", _imports_13)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p><strong>\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XiJieHardDisk</span> <span class="token keyword">implements</span> <span class="token class-name">HardDisk</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u6570\u636E&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IntelCpu</span> <span class="token keyword">implements</span> <span class="token class-name">Cpu</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4F7F\u7528Intel\u5904\u7406\u5668&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KingstonMemory</span> <span class="token keyword">implements</span> <span class="token class-name">Memory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">IntelCpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">KingstonMemory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">XiJieHardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BA1\u7B97\u673A\u5DE5\u4F5C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cpu<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> hardDisk<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A</strong></p><p>\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestComputer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XiJieHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IntelCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KingstonMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        computer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002</p><p>\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A</p><p>\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002</p><p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p><img${serverRenderer.ssrRenderAttr("src", _imports_14)} alt="image-20191229173554296" style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Cpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Memory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">Cpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Memory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">Memory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BA1\u7B97\u673A\u5DE5\u4F5C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002</p><h2 id="_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" aria-hidden="true">#</a> 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219</h2><p>\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002</p><p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219</p><p>\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B</p><p>\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A<code>\u9ED1\u9A6C</code>\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_15)} alt=""></p><p>\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_16)} alt=""></p><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p><strong>AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AntiTheft</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeiMaSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span><span class="token punctuation">,</span><span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u9632\u76D7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u9632\u706B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u9632\u6C34&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItcastSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u9632\u76D7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u9632\u706B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" tabindex="-1"><a class="header-anchor" href="#_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" aria-hidden="true">#</a> 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219</h2><p>\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002</p><p>\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002</p><p>\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002</p><p>\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002</p><p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219</p><p>\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B</p><p>\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_17)} alt="image-20191229173554296" style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p><strong>\u660E\u661F\u7C7B\uFF08Star\uFF09</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fans</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Fans</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Agent</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Star</span> star<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Fans</span> fans<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Company</span> company<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStar</span><span class="token punctuation">(</span><span class="token class-name">Star</span> star<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>star <span class="token operator">=</span> star<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFans</span><span class="token punctuation">(</span><span class="token class-name">Fans</span> fans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fans <span class="token operator">=</span> fans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCompany</span><span class="token punctuation">(</span><span class="token class-name">Company</span> company<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">meeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fans<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u4E0E\u660E\u661F&quot;</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u89C1\u9762\u4E86\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">business</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>company<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u4E0E\u660E\u661F&quot;</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u6D3D\u6DE1\u4E1A\u52A1\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" aria-hidden="true">#</a> 3.6 \u5408\u6210\u590D\u7528\u539F\u5219</h2><p>\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002</p><p>\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002</p><p>\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A</p><ol><li>\u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002</li><li>\u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002</li><li>\u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002</li></ol><p>\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A</p><ol><li>\u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002</li><li>\u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002</li><li>\u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002</li></ol><p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219</p><p>\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F</p><p>\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_18)} alt="image-20191229173554296" style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_19)} alt="image-20191229173554296" style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><h1 id="_4-\u521B\u5EFA\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-\u521B\u5EFA\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F</h1><p>\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002</p><p>\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002</p><p>\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p><ul><li>\u5355\u4F8B\u6A21\u5F0F</li><li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li><li>\u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F</li><li>\u539F\u578B\u6A21\u5F0F</li><li>\u5EFA\u9020\u8005\u6A21\u5F0F</li></ul><h2 id="_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</h2><p>\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002</p><p>\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002</p><h3 id="_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" aria-hidden="true">#</a> 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784</h3><p>\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p><ul><li>\u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B</li><li>\u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B</li></ul><h3 id="_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0</h3><blockquote><p>\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A</p><p>\u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA</p><p>\u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA</p></blockquote><ol><li><p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u997F\u6C49\u5F0F
 *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E\uFF1A</div><p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002</p></li><li><p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6076\u6C49\u5F0F
 *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E\uFF1A</div><p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002</p></li><li><p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u4E0D\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E\uFF1A</div><p>\u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002</p></li><li><p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E\uFF1A</div><p>\u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p></li><li><p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09</p><p>\u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E <code>getInstance()</code> \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002</p><p>\u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 <code>volatile</code> \u5173\u952E\u5B57, <code>volatile</code> \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u5C0F\u7ED3\uFF1A</div><p>\u6DFB\u52A0 <code>volatile</code> \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002</p></li><li><p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09</p><p>\u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB <code>static</code> \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E\uFF1A</div><p>\u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder</p><p>\u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002</p><div color="red">\u5C0F\u7ED3\uFF1A</div><p>\u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002</p></li><li><p>\u679A\u4E3E\u65B9\u5F0F</p><p>\u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u679A\u4E3E\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    INSTANCE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E\uFF1A</div><p>\u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002</p></li></ol><h3 id="_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" aria-hidden="true">#</a> 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898</h3><h4 id="_4-1-3-1-\u95EE\u9898\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#_4-1-3-1-\u95EE\u9898\u6F14\u793A" aria-hidden="true">#</a> 4.1.3.1 \u95EE\u9898\u6F14\u793A</h4><p>\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002</p><ul><li><p>\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316</p><p><strong>Singleton \u7C7B\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61</span>
        <span class="token comment">//writeObject2File();</span>
        <span class="token comment">//\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeObject2File</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p></blockquote></li><li><p>\u53CD\u5C04</p><p><strong>Singleton \u7C7B\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61</span>
        <span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5</span>
        constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</p></blockquote></li></ul><blockquote><div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002 </blockquote><h4 id="_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" aria-hidden="true">#</a> 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3</h4><ul><li><p>\u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5</p><p>\u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0<code>readResolve()</code>\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002</p><p><strong>Singleton \u7C7B\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6E90\u7801\u89E3\u6790\uFF1A</strong></p><p>ObjectInputStream \u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// if nested read, passHandle contains handle of enclosing object</span>
    <span class="token keyword">int</span> outerHandle <span class="token operator">=</span> passHandle<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>tc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
			<span class="token keyword">case</span> TC_OBJECT<span class="token operator">:</span>
				<span class="token keyword">return</span> <span class="token function">checkResolve</span><span class="token punctuation">(</span><span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span>unshared<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        depth<span class="token operator">--</span><span class="token punctuation">;</span>
        bin<span class="token punctuation">.</span><span class="token function">setBlockDataMode</span><span class="token punctuation">(</span>oldMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C</span>
    obj <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">isInstantiable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> desc<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> handles<span class="token punctuation">.</span><span class="token function">lookupException</span><span class="token punctuation">(</span>passHandle<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> desc<span class="token punctuation">.</span><span class="token function">hasReadResolveMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF</span>
    	<span class="token comment">// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002</span>
    	<span class="token class-name">Object</span> rep <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">invokeReadResolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/*
           \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801
        */</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E:</div><p>\u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002</p></li></ul><h3 id="_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" aria-hidden="true">#</a> 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B</h3><p>Runtime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p><ol><li><p>\u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> currentRuntime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Returns the runtime object associated with the current Java application.
     * Most of the methods of class <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span> are instance
     * methods and must be invoked with respect to the current runtime object.
     *
     * <span class="token keyword">@return</span>  the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span> object associated with the current
     *          Java application.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> <span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> currentRuntime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/** Don&#39;t let anyone else instantiate this class */</span>
    <span class="token keyword">private</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002</p></li><li><p>\u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuntimeDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61</span>
        <span class="token class-name">Runtime</span> runtime <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">totalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">maxMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61</span>
        <span class="token class-name">Process</span> process <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;ipconfig&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token string">&quot;gbk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_4-2-\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2 \u5DE5\u5382\u6A21\u5F0F</h2><h3 id="_4-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.2.1 \u6982\u8FF0</h3><p>\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002</p><p>\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002</p><p>\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_20)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A<strong>\u89E3\u8026</strong>\u3002</p><p>\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528</p><ul><li>\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09</li><li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li><li>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</li></ul><h3 id="_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F</h3><p>\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002</p><h4 id="_4-2-2-1-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-2-1-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.2.1 \u7ED3\u6784</h4><p>\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li><li>\u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B</li><li>\u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002</li></ul><h4 id="_4-2-2-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-2-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.2.2 \u5B9E\u73B0</h4><p>\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_21)} style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p>\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;americano&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;latte&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002</p><p>\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002</p><h4 id="_4-2-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.2.4 \u4F18\u7F3A\u70B9</h4><p><strong>\u4F18\u70B9\uFF1A</strong></p><p>\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002</p><p><strong>\u7F3A\u70B9\uFF1A</strong></p><p>\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p><h4 id="_4-2-2-3-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-2-3-\u6269\u5C55" aria-hidden="true">#</a> 4.2.2.3 \u6269\u5C55</h4><p><strong>\u9759\u6001\u5DE5\u5382</strong></p><p>\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;americano&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;latte&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffe<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</h3><p>\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002</p><h4 id="_4-2-3-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-3-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.3.1 \u6982\u5FF5</h4><p>\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002</p><h4 id="_4-2-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.3.2 \u7ED3\u6784</h4><p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002</li><li>\u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li><li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li><li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002</li></ul><h4 id="_4-2-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.3.3 \u5B9E\u73B0</h4><p>\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_22)} style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5496\u5561\u5E97\u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002</p><p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002</p><h4 id="_4-2-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.3.4 \u4F18\u7F3A\u70B9</h4><p><strong>\u4F18\u70B9\uFF1A</strong></p><ul><li>\u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B</li><li>\u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B</li></ul><p><strong>\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002</li></ul><h3 id="_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</h3><p>\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002</p><p>\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002</p><p>\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_23)} style="${serverRenderer.ssrRenderStyle({ "zoom": "67%" })}"><img${serverRenderer.ssrRenderAttr("src", _imports_24)} style="${serverRenderer.ssrRenderStyle({ "zoom": "67%" })}"><h4 id="_4-2-4-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-4-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.4.1 \u6982\u5FF5</h4><p>\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002</p><p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</p><h4 id="_4-2-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.4.2 \u7ED3\u6784</h4><p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p><ul><li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</li><li>\u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li><li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002</li><li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002</li></ul><h4 id="_4-2-4-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.4.2 \u5B9E\u73B0</h4><p>\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_25)} style="${serverRenderer.ssrRenderStyle({ "zoom": "67%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MatchaMousse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItalyDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tiramisu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002</p><h4 id="_4-2-4-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-4-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.4.3 \u4F18\u7F3A\u70B9</h4><p><strong>\u4F18\u70B9\uFF1A</strong></p><p>\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002</p><p><strong>\u7F3A\u70B9\uFF1A</strong></p><p>\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002</p><h4 id="_4-2-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.2.4.4 \u4F7F\u7528\u573A\u666F</h4><ul><li><p>\u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002</p></li><li><p>\u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002</p></li><li><p>\u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002</p></li></ul><p>\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002</p><h3 id="_4-2-5-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-5-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.2.5 \u6A21\u5F0F\u6269\u5C55</h3><p><strong>\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408</strong></p><p>\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002</p><p>\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6</p><p>\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">american</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.AmericanCoffee</span>
<span class="token key attr-name">latte</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.LatteCoffee</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Coffee</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">CoffeeFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;bean.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            p<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09</span>
                <span class="token class-name">String</span> className <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61</span>
                <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Coffee</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Coffee</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002</p><h3 id="_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" aria-hidden="true">#</a> 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EE4\u72D0\u51B2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;\u98CE\u6E05\u626C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u6211\u884C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> ele <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_26)} style="${serverRenderer.ssrRenderStyle({ "zoom": "75%" })}"><p>Collection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002</p><blockquote><p>\u53E6\uFF1A</p><p>\u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p><p>\u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p></blockquote><h2 id="_4-3-\u539F\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-3-\u539F\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 4.3 \u539F\u578B\u6A21\u5F0F</h2><h3 id="_4-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.3.1 \u6982\u8FF0</h3><p>\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002</p><h3 id="_4-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.3.2 \u7ED3\u6784</h3><p>\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002</li><li>\u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002</li><li>\u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002</li></ul><p>\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_27)} alt=""></p><h3 id="_4-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.3.3 \u5B9E\u73B0</h3><p>\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002</p><blockquote><p>\u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002</p><p>\u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002</p></blockquote><p>Java \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 <code>clone()</code> \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p><strong>Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Realizetype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Realizetype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Realizetype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypeTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Realizetype</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Realizetype</span> r2 <span class="token operator">=</span> r1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>r1 <span class="token operator">==</span> r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-4-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-3-4-\u6848\u4F8B" aria-hidden="true">#</a> 4.3.4 \u6848\u4F8B</h3><p><strong>\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6</strong></p><p>\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_28)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB</span>
        c2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u674E\u56DB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.3.5 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002</li><li>\u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</li></ul><h3 id="_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" tabindex="-1"><a class="header-anchor" href="#_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" aria-hidden="true">#</a> 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09</h3><p>\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Student</span> stu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStu</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stu <span class="token operator">=</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B66\u751F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>

        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u897F\u5B89&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u674E\u56DB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_29)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><div color="red">\u8BF4\u660E\uFF1A</div><p>\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u897F\u5B89&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u674E\u56DB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_30)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><blockquote><p>\u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002</p></blockquote><h2 id="_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F</h2><h3 id="_4-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.4.1 \u6982\u8FF0</h3><p>\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_31)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><ul><li>\u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002</li><li>\u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002</li><li>\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002</li></ul><h3 id="_4-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.4.2 \u7ED3\u6784</h3><p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p><ul><li><p>\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002</p></li><li><p>\u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002</p></li><li><p>\u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002</p></li><li><p>\u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002</p></li></ul><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_32)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><h3 id="_4-4-3-\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-4-3-\u5B9E\u4F8B" aria-hidden="true">#</a> 4.4.3 \u5B9E\u4F8B</h3><p><strong>\u521B\u5EFA\u5171\u4EAB\u5355\u8F66</strong></p><p>\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002</p><p>\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_33)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u81EA\u884C\u8F66\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bike</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> frame<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> seat<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token class-name">String</span> frame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frame <span class="token operator">=</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token class-name">String</span> seat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seat <span class="token operator">=</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6469\u62DC\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobikeBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">&quot;\u94DD\u5408\u91D1\u8F66\u67B6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">&quot;\u771F\u76AE\u8F66\u5EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ofo\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OfoBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">&quot;\u78B3\u7EA4\u7EF4\u8F66\u67B6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">&quot;\u6A61\u80F6\u8F66\u5EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6307\u6325\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Builder</span> mBuilder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder <span class="token operator">=</span> builder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mBuilder<span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MobikeBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Director</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bike</span> bike <span class="token operator">=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F\uFF1A</strong></p><p>\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>BuildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u8BF4\u660E\uFF1A</strong></p><p>\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002</p><h3 id="_4-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.4.4 \u4F18\u7F3A\u70B9</h3><p><strong>\u4F18\u70B9\uFF1A</strong></p><ul><li>\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002</li><li>\u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002</li><li>\u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002</li><li>\u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002</li></ul><p><strong>\u7F3A\u70B9\uFF1A</strong></p><p>\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002</p><h3 id="_4-4-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-4-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.4.5 \u4F7F\u7528\u573A\u666F</h3><p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002</p><ul><li>\u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002</li><li>\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002</li></ul><h3 id="_4-4-6-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-4-6-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.4.6 \u6A21\u5F0F\u6269\u5C55</h3><p>\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002</p><p>\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">,</span> <span class="token class-name">String</span> screen<span class="token punctuation">,</span> <span class="token class-name">String</span> memory<span class="token punctuation">,</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setScreen</span><span class="token punctuation">(</span><span class="token class-name">String</span> screen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">String</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMainboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Phone{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;cpu=&#39;&quot;</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, screen=&#39;&quot;</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, memory=&#39;&quot;</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, mainboard=&#39;&quot;</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u6784\u5EFAPhone\u5BF9\u8C61</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">&quot;intel&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u4E09\u661F\u5C4F\u5E55&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u91D1\u58EB\u987F&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u534E\u7855&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002</p><p>\u91CD\u6784\u540E\u4EE3\u7801\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cpu <span class="token operator">=</span> builder<span class="token punctuation">.</span>cpu<span class="token punctuation">;</span>
        screen <span class="token operator">=</span> builder<span class="token punctuation">.</span>screen<span class="token punctuation">;</span>
        memory <span class="token operator">=</span> builder<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
        mainboard <span class="token operator">=</span> builder<span class="token punctuation">.</span>mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cpu <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">screen</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            screen <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">memory</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            memory <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mainboard <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Phone{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;cpu=&#39;&quot;</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, screen=&#39;&quot;</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, memory=&#39;&quot;</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, mainboard=&#39;&quot;</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">cpu</span><span class="token punctuation">(</span><span class="token string">&quot;intel&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token string">&quot;\u534E\u7855&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token string">&quot;\u91D1\u58EB\u987F&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">screen</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E09\u661F&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</p><h2 id="_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" aria-hidden="true">#</a> 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4</h2><h3 id="_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3><p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002</p><p>\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002</p><h3 id="_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3><p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002</p><p>\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002</p><p>\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002</p><h1 id="_5-\u7ED3\u6784\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-\u7ED3\u6784\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F</h1><p>\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002</p><p>\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p><p>\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A</p><ul><li>\u4EE3\u7406\u6A21\u5F0F</li><li>\u9002\u914D\u5668\u6A21\u5F0F</li><li>\u88C5\u9970\u8005\u6A21\u5F0F</li><li>\u6865\u63A5\u6A21\u5F0F</li><li>\u5916\u89C2\u6A21\u5F0F</li><li>\u7EC4\u5408\u6A21\u5F0F</li><li>\u4EAB\u5143\u6A21\u5F0F</li></ul><h2 id="_5-1-\u4EE3\u7406\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-1-\u4EE3\u7406\u6A21\u5F0F" aria-hidden="true">#</a> 5.1 \u4EE3\u7406\u6A21\u5F0F</h2><h3 id="_5-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.1.1 \u6982\u8FF0</h3><p>\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002</p><p>Java \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002</p><h3 id="_5-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.1.2 \u7ED3\u6784</h3><p>\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li><li>\u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002</li><li>\u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002</li></ul><h3 id="_5-1-3-\u9759\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-3-\u9759\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.3 \u9759\u6001\u4EE3\u7406</h3><p>\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002</p><p>\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968</p><p>\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_34)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u706B\u8F66\u7AD9\u5356\u7968&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u552E\u70B9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyPoint</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        station<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProxyPoint</span> pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pp<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002</p><h3 id="_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.4 JDK \u52A8\u6001\u4EE3\u7406</h3><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002</p><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u706B\u8F66\u7AD9\u5356\u7968&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token comment">/*
            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF
                Class&lt;?&gt;[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3
                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F
         */</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">/*
                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61
                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B
                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570
                     */</span>
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//\u6267\u884C\u771F\u5B9E\u5BF9\u8C61</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div><ul><li><p>ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F</p><p>ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>jdk<span class="token punctuation">.</span></span><span class="token class-name">SellTickets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">UndeclaredThrowableException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m1<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m2<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m0<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            m1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;equals&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;toString&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.itheima.proxy.dynamic.jdk.SellTickets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;sell&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m0 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;hashCode&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMethodException</span> noSuchMethodException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchMethodError</span><span class="token punctuation">(</span>noSuchMethodException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> classNotFoundException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoClassDefFoundError</span><span class="token punctuation">(</span>classNotFoundException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m1<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m0<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A</p><ul><li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002</li><li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002</li></ul></li><li><p>\u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F</p><p>\u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.itheima.proxy.dynamic.jdk.SellTickets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;sell&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">;</span>

	<span class="token keyword">protected</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> h<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A</p><pre><code>1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5
2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5
3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5
4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5
</code></pre><h3 id="_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406</h3><p>\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002</p><p>\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002</p><p>CGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002</p><p>CGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u706B\u8F66\u7AD9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u706B\u8F66\u7AD9\u5356\u7968&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
            o \uFF1A \u4EE3\u7406\u5BF9\u8C61
            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B
            args \uFF1A \u5B9E\u9645\u53C2\u6570
            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrainStation</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" aria-hidden="true">#</a> 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4</h3><ul><li><p>jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406</p><p>\u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002</p><p>\u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002</p></li><li><p>\u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406</p><p>\u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002</p><p>\u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898</p></li></ul><h3 id="_5-1-7-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-1-7-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 5.1.7 \u4F18\u7F3A\u70B9</h3><p><strong>\u4F18\u70B9\uFF1A</strong></p><ul><li>\u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B</li><li>\u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B</li><li>\u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B</li></ul><p><strong>\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B</li></ul><h3 id="_5-1-8-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-1-8-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.1.8 \u4F7F\u7528\u573A\u666F</h3><ul><li><p>\u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406</p><p>\u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002</p></li><li><p>\u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406</p><p>\u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002</p></li><li><p>\u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406</p><p>\u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002</p></li></ul><h2 id="_5-2-\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2 \u9002\u914D\u5668\u6A21\u5F0F</h2><h3 id="_5-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.2.1 \u6982\u8FF0</h3><p>\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_35)} alt=""></p><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002</p><p>\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002</p><h3 id="_5-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.2.2 \u7ED3\u6784</h3><p>\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p><ul><li>\u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002</li><li>\u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002</li><li>\u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002</li></ul><h3 id="_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F</h3><p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002</p><p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p><p>\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_36)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//SD\u5361\u7684\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6SD\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165SD\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//SD\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;sd card read a msg :hello word SD&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sd card write msg : &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u8111\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token class-name">SDCard</span> sdCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sdCard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">&quot;sd card null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sdCard<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6TF\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165TF\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span><span class="token string">&quot;tf card read msg : hello word tf card&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;tf card write a msg : &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span> <span class="token keyword">extends</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter read tf card &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter write tf card&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002</p><h3 id="_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F</h3><p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002</p><p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p><p>\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_37)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span>  <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TFCard</span> tfCard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token class-name">TFCard</span> tfCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tfCard <span class="token operator">=</span> tfCard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter read tf card &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tfCard<span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter write tf card&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tfCard<span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TFCard</span> tfCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TFCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span>tfCard<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002</p></blockquote><h3 id="_5-2-5-\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-2-5-\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> 5.2.5 \u5E94\u7528\u573A\u666F</h3><ul><li>\u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002</li><li>\u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002</li></ul><h3 id="_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.2.6 JDK \u6E90\u7801\u89E3\u6790</h3><p>Reader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002</p><p>InputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">char</span> cbuf<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_38)} alt=""></p><p>\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A</p><ul><li>InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002</li><li>StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002</li></ul><div color="red">\u7ED3\u8BBA\uFF1A</div><p>\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p><h2 id="_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 5.3 \u88C5\u9970\u8005\u6A21\u5F0F</h2><h3 id="_5-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.3.1 \u6982\u8FF0</h3><p>\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002</p><p>\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_39)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A</p><ul><li><p>\u6269\u5C55\u6027\u4E0D\u597D</p><p>\u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002</p></li><li><p>\u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B</p></li></ul><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002</p><h3 id="_5-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.3.2 \u7ED3\u6784</h3><p>\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002</li><li>\u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002</li><li>\u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002</li><li>\u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002</li></ul><h3 id="_5-3-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-3-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.3.3 \u6848\u4F8B</h3><p>\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_40)} style="${serverRenderer.ssrRenderStyle({ "zoom": "75%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u5FEB\u9910\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDesc</span><span class="token punctuation">(</span><span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u83B7\u53D6\u4EF7\u683C</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u996D</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedRice</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;\u7092\u996D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u9762</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedNoodles</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">&quot;\u7092\u9762&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u914D\u6599\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Garnish</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">FastFood</span> fastFood<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFastFood</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Garnish</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">,</span> <span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u9E21\u86CB\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Egg</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;\u9E21\u86CB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u57F9\u6839\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bacon</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;\u57F9\u6839&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> food<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u5143&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span>food1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food1<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> food1<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u5143&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762</span>
        <span class="token class-name">FastFood</span> food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span>food2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food2<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> food2<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u5143&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p><ul><li><p>\u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002</p></li><li><p>\u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002</p></li></ul><h3 id="_5-3-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-3-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.3.4 \u4F7F\u7528\u573A\u666F</h3><ul><li><p>\u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002</p><p>\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A</p><ul><li>\u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B</li><li>\u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09</li></ul></li><li><p>\u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002</p></li><li><p>\u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002</p></li></ul><h3 id="_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.3.5 JDK \u6E90\u7801\u89E3\u6790</h3><p>IO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002</p><p>\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFABufferedWriter\u5BF9\u8C61</span>
        <span class="token comment">//\u521B\u5EFAFileWriter\u5BF9\u8C61</span>
        <span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>fw<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5199\u6570\u636E</span>
        bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;hello Buffered&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_41)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><blockquote><div color="red">\u5C0F\u7ED3\uFF1A</div><p>\u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002</p></blockquote><h3 id="_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" aria-hidden="true">#</a> 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B</h3><p>\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A</p><ul><li>\u76F8\u540C\u70B9\uFF1A <ul><li>\u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3</li><li>\u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61</li><li>\u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5</li></ul></li><li>\u4E0D\u540C\u70B9\uFF1A <ul><li>\u76EE\u7684\u4E0D\u540C \u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61 \u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li><li>\u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C \u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012 \u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li></ul></li></ul><h2 id="_5-4-\u6865\u63A5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-4-\u6865\u63A5\u6A21\u5F0F" aria-hidden="true">#</a> 5.4 \u6865\u63A5\u6A21\u5F0F</h2><h3 id="_5-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.4.1 \u6982\u8FF0</h3><p>\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_42)} alt=""></p><p>\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002</p><p>\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002</p><h3 id="_5-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.4.2 \u7ED3\u6784</h3><p>\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002</li><li>\u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li><li>\u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002</li><li>\u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002</li></ul><h3 id="_5-4-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-4-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.4.3 \u6848\u4F8B</h3><p>\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668</p><p>\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_43)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u89C6\u9891\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//avi\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AVIFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;avi\u89C6\u9891\u6587\u4EF6\uFF1A&quot;</span><span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//rmvb\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">REVBBFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;rmvb\u6587\u4EF6\uFF1A&quot;</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OperatingSystemVersion</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoFile <span class="token operator">=</span> videoFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Windows\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Windows</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystem</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//mac\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mac</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Mac</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OperatingSystem</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AVIFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">&quot;\u6218\u72FC3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p><ul><li><p>\u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002</p><p>\u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002</p></li><li><p>\u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E</p></li></ul><h3 id="_5-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.4.4 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002</li><li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002</li><li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002</li></ul><h2 id="_5-5-\u5916\u89C2\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-5-\u5916\u89C2\u6A21\u5F0F" aria-hidden="true">#</a> 5.5 \u5916\u89C2\u6A21\u5F0F</h2><h3 id="_5-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.5.1 \u6982\u8FF0</h3><p>\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002</p><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002</p><p>\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_44)} alt=""></p><h3 id="_5-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.5.2 \u7ED3\u6784</h3><p>\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p><ul><li>\u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002</li><li>\u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002</li></ul><h3 id="_5-5-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-5-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.5.3 \u6848\u4F8B</h3><p>\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236</p><p>\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_45)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u706F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Light</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6253\u5F00\u4E86\u706F....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5173\u95ED\u4E86\u706F....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u89C6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6253\u5F00\u4E86\u7535\u89C6....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5173\u95ED\u4E86\u7535\u89C6....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u63A7\u5236\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AirCondition</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6253\u5F00\u4E86\u7A7A\u8C03....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5173\u95ED\u4E86\u7A7A\u8C03....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u667A\u80FD\u97F3\u7BB1</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAppliancesFacade</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Light</span> light<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">TV</span> tv<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AirCondition</span> airCondition<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AirCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;\u6253\u5F00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;\u5173\u95ED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D77\u5E8A\u4E86&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7761\u89C9\u4E86&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61</span>
        <span class="token class-name">SmartAppliancesFacade</span> facade <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">&quot;\u6253\u5F00\u5BB6\u7535&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">&quot;\u5173\u95ED\u5BB6\u7535&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p><ul><li>\u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002</li><li>\u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002</li></ul><p><strong>\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6</li></ul><h3 id="_5-5-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-5-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.5.4 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</li><li>\u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002</li><li>\u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002</li></ul><h3 id="_5-5-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-5-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.5.5 \u6E90\u7801\u89E3\u6790</h3><p>\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_46)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p>RequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_47)} style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p><strong>\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F</strong></p><p>\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002</p><h2 id="_5-6-\u7EC4\u5408\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-6-\u7EC4\u5408\u6A21\u5F0F" aria-hidden="true">#</a> 5.6 \u7EC4\u5408\u6A21\u5F0F</h2><h3 id="_5-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.6.1 \u6982\u8FF0</h3><img${serverRenderer.ssrRenderAttr("src", _imports_48)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p>\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002</p><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002</p><h3 id="_5-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.6.2 \u7ED3\u6784</h3><p>\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002</li><li>\u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002</li><li>\u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002</li></ul><h3 id="_5-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.6.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355</p><p>\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_49)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_50)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p><strong>\u4EE3\u7801\u5B9E\u73B0\uFF1A</strong></p><p>\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>

    <span class="token comment">//\u6DFB\u52A0\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u79FB\u9664\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u83DC\u5355\u540D\u79F0</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">&gt;</span></span> menuComponentList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        menuComponentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> menuComponentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent <span class="token operator">:</span> menuComponentList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            menuComponent<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Menu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuItem</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002</p><h3 id="_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" aria-hidden="true">#</a> 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B</h3><p>\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002</p><ul><li><p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F</p><p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D <code>MenuComponent</code> \u58F0\u660E\u4E86 <code>add</code>\u3001<code>remove</code> \u3001<code>getChild</code> \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002</p><p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09</p></li><li><p>\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F</p><p>\u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 <code>Menu</code> \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_51)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"></li></ul><h3 id="_5-6-5-\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-6-5-\u4F18\u70B9" aria-hidden="true">#</a> 5.6.5 \u4F18\u70B9</h3><ul><li>\u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002</li><li>\u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002</li><li>\u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</li><li>\u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002</li></ul><h3 id="_5-6-6-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-6-6-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.6.6 \u4F7F\u7528\u573A\u666F</h3><p>\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002</p><h2 id="_5-7-\u4EAB\u5143\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-7-\u4EAB\u5143\u6A21\u5F0F" aria-hidden="true">#</a> 5.7 \u4EAB\u5143\u6A21\u5F0F</h2><h3 id="_5-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.7.1 \u6982\u8FF0</h3><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002</p><h3 id="_5-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.7.2 \u7ED3\u6784</h3><p>\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A</p><ol><li>\u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002</li><li>\u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002</li></ol><p>\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002</li><li>\u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li><li>\u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002</li><li>\u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li></ul><h3 id="_5-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.7.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757</p><p>\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_52)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p><strong>\u5148\u6765\u770B\u7C7B\u56FE\uFF1A</strong></p><img${serverRenderer.ssrRenderAttr("src", _imports_53)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p><strong>\u4EE3\u7801\u5982\u4E0B\uFF1A</strong></p><p>\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u65B9\u5757\u5F62\u72B6\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; \u989C\u8272\uFF1A&quot;</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;I&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;L&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;O&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoxFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> iBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> lBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> oBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;I&quot;</span><span class="token punctuation">,</span> iBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;L&quot;</span><span class="token punctuation">,</span> lBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;O&quot;</span><span class="token punctuation">,</span> oBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">AbstractBox</span> <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F</h3><p><strong>1\uFF0C\u4F18\u70B9</strong></p><ul><li>\u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD</li><li>\u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001</li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><p>\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742</p><p><strong>3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A</strong></p><ul><li>\u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002</li><li>\u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002</li><li>\u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002</li></ul><h3 id="_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.7.6 JDK \u6E90\u7801\u89E3\u6790</h3><p>Integer \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_54)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">&quot;i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">&quot;i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F <code>valueOf()</code> \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Integer</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntegerCache</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> high<span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">static</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> integerCacheHighPropValue <span class="token operator">=</span>
                sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>VM<span class="token punctuation">.</span><span class="token function">getSavedProperty</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.Integer.IntegerCache.high&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>integerCacheHighPropValue <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>integerCacheHighPropValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    i <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// Maximum array size is Integer.MAX_VALUE</span>
                    h <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">NumberFormatException</span> nfe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            high <span class="token operator">=</span> h<span class="token punctuation">;</span>
            cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> low<span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
                cache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>
            <span class="token keyword">assert</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high <span class="token operator">&gt;=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230 <code>Integer</code> \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 <code>-128 ~ 127</code> \u4E4B\u95F4\u6570\u7684 <code>Integer</code> \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 <code>valueOf</code> \u65F6\u5982\u679C\u53C2\u6570\u5728 <code>-128 ~ 127</code> \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 <code>Integer</code> \u5BF9\u8C61\u3002</p><h1 id="_6-\u884C\u4E3A\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-\u884C\u4E3A\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F</h1><p>\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002</p><p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p><p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p><ul><li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</li><li>\u7B56\u7565\u6A21\u5F0F</li><li>\u547D\u4EE4\u6A21\u5F0F</li><li>\u804C\u8D23\u94FE\u6A21\u5F0F</li><li>\u72B6\u6001\u6A21\u5F0F</li><li>\u89C2\u5BDF\u8005\u6A21\u5F0F</li><li>\u4E2D\u4ECB\u8005\u6A21\u5F0F</li><li>\u8FED\u4EE3\u5668\u6A21\u5F0F</li><li>\u8BBF\u95EE\u8005\u6A21\u5F0F</li><li>\u5907\u5FD8\u5F55\u6A21\u5F0F</li><li>\u89E3\u91CA\u5668\u6A21\u5F0F</li></ul><p>\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p><h2 id="_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</h2><h3 id="_6-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.1.1 \u6982\u8FF0</h3><p>\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002</p><p>\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002</p><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002</p><h3 id="_6-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.1.2 \u7ED3\u6784</h3><p>\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p><ul><li><p>\u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002</p><ul><li><p>\u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002</p></li><li><p>\u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A</p><ul><li><p>\u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002</p></li><li><p>\u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002</p></li><li><p>\u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002</p><p>\u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002</p></li></ul></li></ul></li><li><p>\u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002</p></li></ul><h3 id="_6-1-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.1.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u7092\u83DC</p><p>\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_55)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5012\u6CB9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u70ED\u6CB9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_BaoCai</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_CaiXin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7092\u624B\u6495\u5305\u83DC</span>
        <span class="token class-name">ConcreteClass_BaoCai</span> baoCai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_BaoCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        baoCai<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u7092\u849C\u84C9\u83DC\u5FC3</span>
        <span class="token class-name">ConcreteClass_CaiXin</span> caiXin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_CaiXin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        caiXin<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002</p></blockquote><h3 id="_6-1-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.1.3 \u4F18\u7F3A\u70B9</h3><p><strong>\u4F18\u70B9\uFF1A</strong></p><ul><li><p>\u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027</p><p>\u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002</p></li><li><p>\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236</p><p>\u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p></li></ul><p><strong>\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002</li><li>\u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002</li></ul><h3 id="_6-1-4-\u9002\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-1-4-\u9002\u7528\u573A\u666F" aria-hidden="true">#</a> 6.1.4 \u9002\u7528\u573A\u666F</h3><ul><li>\u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002</li><li>\u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002</li></ul><h3 id="_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.1.5 JDK \u6E90\u7801\u89E3\u6790</h3><p>InputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A <code>read()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>off <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>length <span class="token operator">-</span> off<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        b<span class="token punctuation">[</span>off<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>

        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                b<span class="token punctuation">[</span>off <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 <code>read()</code> \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C <code>read(byte b[])</code> \u65B9\u6CD5\u8C03\u7528\u4E86 <code>read(byte b[], int off, int len)</code> \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002</p><p>\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 <code>read()</code> \u65B9\u6CD5\u3002</p><p>\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002</p><h2 id="_6-2-\u7B56\u7565\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-2-\u7B56\u7565\u6A21\u5F0F" aria-hidden="true">#</a> 6.2 \u7B56\u7565\u6A21\u5F0F</h2><h3 id="_6-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.2.1 \u6982\u8FF0</h3><p>\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_56)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_57)} style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002</p><h3 id="_6-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.2.2 \u7ED3\u6784</h3><p>\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p><ul><li>\u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002</li><li>\u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002</li><li>\u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002</li></ul><h3 id="_6-2-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-2-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.2.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8</p><p>\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_58)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyA</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E70\u4E00\u9001\u4E00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyB</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6EE1200\u5143\u51CF50\u5143&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyC</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SalesMan</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528</span>
    <span class="token keyword">private</span> <span class="token class-name">Strategy</span> strategy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">salesManShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        strategy<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.2.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li><p>\u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362</p><p>\u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002</p></li><li><p>\u6613\u4E8E\u6269\u5C55</p><p>\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C</p></li><li><p>\u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002</p></li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002</li><li>\u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002</li></ul><h3 id="_6-2-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-2-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.2.5 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002</li><li>\u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002</li><li>\u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002</li><li>\u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002</li><li>\u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002</li></ul><h3 id="_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.2.6 JDK \u6E90\u7801\u89E3\u6790</h3><p><code>Comparator</code> \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A <code>sort()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">LegacyMergeSort</span><span class="token punctuation">.</span>userRequested<span class="token punctuation">)</span>
                <span class="token function">legacyMergeSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token class-name">TimSort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Arrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> demo <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> o2 <span class="token operator">-</span> o1<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[12, 5, 4, 3, 2, 2, 1]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 <code>compare()</code> \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 <code>sort()</code> \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">TimSort</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">,</span>
                         <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> work<span class="token punctuation">,</span> <span class="token keyword">int</span> workBase<span class="token punctuation">,</span> <span class="token keyword">int</span> workLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> c <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">&lt;=</span> hi <span class="token operator">&amp;&amp;</span> hi <span class="token operator">&lt;=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

        <span class="token keyword">int</span> nRemaining  <span class="token operator">=</span> hi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// Arrays of size 0 and 1 are always sorted</span>

        <span class="token comment">// If array is small, do a &quot;mini-TimSort&quot; with no merges</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> MIN_MERGE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> initRunLen <span class="token operator">=</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">binarySort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> lo <span class="token operator">+</span> initRunLen<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">int</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> lo <span class="token operator">&lt;</span> hi<span class="token punctuation">;</span>
        <span class="token keyword">int</span> runHi <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>runHi <span class="token operator">==</span> hi<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token comment">// Find end of run, and reverse range if descending</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Descending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">reverseRange</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> runHi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                              <span class="token comment">// Ascending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> runHi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 <code>countRunAndMakeAscending()</code> \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002</p><h2 id="_6-3-\u547D\u4EE4\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-3-\u547D\u4EE4\u6A21\u5F0F" aria-hidden="true">#</a> 6.3 \u547D\u4EE4\u6A21\u5F0F</h2><h3 id="_6-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.3.1 \u6982\u8FF0</h3><p>\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_59)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002</p><h3 id="_6-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.3.2 \u7ED3\u6784</h3><p>\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p><ul><li>\u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002</li><li>\u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002</li><li>\u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002</li><li>\u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002</li></ul><h3 id="_6-3-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-3-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.3.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002</p><p>\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002</p><p>\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002</p><p>\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_60)} style="${serverRenderer.ssrRenderStyle({ "zoom": "75%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Order</span> order<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span><span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">,</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u684C\u7684\u8BA2\u5355\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            receiver<span class="token punctuation">.</span><span class="token function">makeFood</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u684C\u7684\u996D\u5F04\u597D\u4E86&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u9910\u684C\u53F7\u7801</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> diningTable<span class="token punctuation">;</span>

    <span class="token comment">// \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> foodDic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token keyword">int</span> diningTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>diningTable <span class="token operator">=</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> foodDic<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFoodDic</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        foodDic<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeniorChef</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">makeFood</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token class-name">String</span> foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">&quot;\u4EFD&quot;</span> <span class="token operator">+</span> foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">&gt;</span></span> commands<span class="token punctuation">;</span><span class="token comment">//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61</span>

    <span class="token keyword">public</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        commands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86.......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> commands<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Command</span> cmd <span class="token operator">=</span> commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmd<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA2\u4E2Aorder</span>
        <span class="token class-name">Order</span> order1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;\u897F\u7EA2\u67FF\u9E21\u86CB\u9762&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C0F\u676F\u53EF\u4E50&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Order</span> order2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C16\u6912\u8089\u4E1D\u76D6\u996D&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C0F\u676F\u96EA\u78A7&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u63A5\u6536\u8005</span>
        <span class="token class-name">SeniorChef</span> receiver<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SeniorChef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61</span>
        <span class="token class-name">OrderCommand</span> cmd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OrderCommand</span> cmd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8C03\u7528\u8005 waitor</span>
        <span class="token class-name">Waitor</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86</span>
        invoker<span class="token punctuation">.</span><span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.3.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li>\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002</li><li>\u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002</li><li>\u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002</li><li>\u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002</li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002</li><li>\u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002</li></ul><h3 id="_6-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.3.5 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002</li><li>\u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002</li><li>\u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002</li></ul><h3 id="_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.3.6 JDK \u6E90\u7801\u89E3\u6790</h3><p>Runable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8C03\u7528\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Runnable</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>threadStatus <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> started <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            started <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>started<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    group<span class="token punctuation">.</span><span class="token function">threadStartFailed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * jdk Runnable \u547D\u4EE4\u6A21\u5F0F
 *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TurnOffThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span>

     <span class="token keyword">public</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	receiver<span class="token punctuation">.</span><span class="token function">turnOFF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5\u7C7B
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">TurnOffThread</span> turnOffThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>turnOffThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" aria-hidden="true">#</a> 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F</h2><h3 id="_6-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.4.1 \u6982\u8FF0</h3><p>\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002</p><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002</p><h3 id="_6-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.4.2 \u7ED3\u6784</h3><p>\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:</p><ul><li>\u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002</li><li>\u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002</li><li>\u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002</li></ul><h3 id="_6-4-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-4-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.4.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_61)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u8BF7\u5047\u6761</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeaveRequest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//\u59D3\u540D</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5929\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5185\u5BB9</span>

    <span class="token keyword">public</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5904\u7406\u8005\u62BD\u8C61\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_ONE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_THREE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_SEVEN <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numStart<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">;</span>

    <span class="token comment">//\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC</span>
    <span class="token keyword">private</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">,</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numEnd <span class="token operator">=</span> numEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u63D0\u4EA4\u8BF7\u5047\u6761</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleLeave</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> numEnd<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7EE7\u7EED\u63D0\u4EA4</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D41\u7A0B\u7ED3\u675F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5C0F\u7EC4\u957F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeader</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_ONE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u8BF7\u5047&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u5929,&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u90E8\u95E8\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u8BF7\u5047&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u5929,&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u603B\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u8BF7\u5047&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u5929,&quot;</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u8BF7\u5047\u6761\u6765\u4E00\u5F20</span>
        <span class="token class-name">LeaveRequest</span> leave <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C0F\u82B1&quot;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;\u8EAB\u4F53\u4E0D\u9002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5404\u4F4D\u9886\u5BFC</span>
        <span class="token class-name">GroupLeader</span> groupLeader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeneralManager</span> generalManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        groupLeader<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406</span>
        manager<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>generalManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406</span>
        <span class="token comment">//\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002</span>

        <span class="token comment">//\u63D0\u4EA4\u7533\u8BF7</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.4.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li><p>\u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6</p><p>\u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002</p></li><li><p>\u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027</p><p>\u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002</p></li><li><p>\u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027</p><p>\u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002</p></li><li><p>\u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5</p><p>\u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002</p></li><li><p>\u8D23\u4EFB\u5206\u62C5</p><p>\u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p></li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002</li><li>\u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002</li><li>\u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002</li></ul><h3 id="_6-4-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-4-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.4.5 \u6E90\u7801\u89E3\u6790</h3><p>\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:</p><ul><li><p>\u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Request</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Response</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">,</span><span class="token class-name">Response</span> res<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondFilter</span>  <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterChain</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">&gt;</span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// \u94FE\u5F0F\u8C03\u7528</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterChain</span> <span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token class-name">Filter</span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> filters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Filter</span> filter <span class="token operator">=</span> filters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        index<span class="token operator">++</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u6D4B\u8BD5\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Request</span>  req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Response</span> res <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span>

        <span class="token class-name">FilterChain</span> filterChain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FirstFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecondFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="_6-5-\u72B6\u6001\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-5-\u72B6\u6001\u6A21\u5F0F" aria-hidden="true">#</a> 6.5 \u72B6\u6001\u6A21\u5F0F</h2><h3 id="_6-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.5.1 \u6982\u8FF0</h3><p>\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_62)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7535\u68AF\u76844\u4E2A\u72B6\u6001</span>
    <span class="token comment">//\u5F00\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> OPENING_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5173\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> CLOSING_STATE <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> RUNNING_STATE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> STOPPING_STATE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lift</span> <span class="token keyword">implements</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> state<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span> <span class="token comment">//\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Lift</span> lift <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lift<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">ILift</span><span class="token punctuation">.</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u662F\u505C\u6B62\u7684</span>
        lift<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C</span>
        lift<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u95EE\u9898\u5206\u6790\uFF1A</p><ul><li>\u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002</li><li>\u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91</li></ul><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002</p><h3 id="_6-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.5.2 \u7ED3\u6784</h3><p>\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p><ul><li>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002</li><li>\u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li><li>\u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li></ul><h3 id="_6-5-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-5-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.5.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_63)} style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u72B6\u6001\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316</span>
    <span class="token keyword">protected</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5F00\u542F\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u95E8\u5F00\u542F...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u6B63\u5728\u8FD0\u884C...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoppingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u505C\u6B62\u4E86...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5173\u95ED\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClosingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7535\u68AF\u95E8\u5173\u95ED...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">OpenningState</span> openningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">ClosingState</span> closeingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">RunningState</span> runningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">StoppingState</span> stoppingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C</span>


    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">private</span> <span class="token class-name">LiftState</span> liftState<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LiftState</span> <span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F53\u524D\u73AF\u5883\u6539\u53D8</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState <span class="token operator">=</span> liftState<span class="token punctuation">;</span>
        <span class="token comment">//\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-5-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.5.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li>\u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002</li><li>\u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002</li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002</li><li>\u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002</li><li>\u72B6\u6001\u6A21\u5F0F\u5BF9&quot;\u5F00\u95ED\u539F\u5219&quot;\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002</li></ul><h3 id="_6-5-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-5-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.5.5 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002</li><li>\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002</li></ul><h2 id="_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F</h2><h3 id="_6-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.6.1 \u6982\u8FF0</h3><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002</p><h3 id="_6-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.6.2 \u7ED3\u6784</h3><p>\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A</p><ul><li>Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002</li><li>ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002</li><li>Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002</li><li>ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002</li></ul><h3 id="_6-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7</p><p>\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_64)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeixinUser</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5FAE\u4FE1\u7528\u6237\u540D</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u589E\u52A0\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5220\u9664\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span> weixinUserlist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer <span class="token operator">:</span> weixinUserlist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u7A0B\u5E8F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SubscriptionSubject</span> mSubscriptionSubject<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237</span>
        <span class="token class-name">WeixinUser</span> user1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B59\u609F\u7A7A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;\u732A\u609F\u80FD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;\u6C99\u609F\u51C0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA2\u9605\u516C\u4F17\u53F7</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">&quot;\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-6-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.6.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li>\u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002</li><li>\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011</li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6</li><li>\u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83</li></ul><h3 id="_6-6-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-6-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.6.5 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002</li><li>\u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002</li></ul><h3 id="_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0</h3><p>\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002</p><p><strong>1\uFF0CObservable \u7C7B</strong></p><p>Observable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002</p><ul><li><p>void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002</p></li><li><p>void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002</p></li><li><p>void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002</p></li></ul><p><strong>2\uFF0CObserver \u63A5\u53E3</strong></p><p>Observer \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002</p><p>\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077</p><p>\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thief</span> <span class="token keyword">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//changed  = true</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Policemen</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Observable</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8B66\u5BDF\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Thief</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u4EE3\u7801</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61</span>
        <span class="token class-name">Thief</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token string">&quot;\u9694\u58C1\u8001\u738B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61</span>
        <span class="token class-name">Policemen</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C0F\u674E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077</span>
        t<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C0F\u5077\u5077\u4E1C\u897F</span>
        t<span class="token punctuation">.</span><span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F</h2><h3 id="_6-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.7.1 \u6982\u8FF0</h3><p>\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002</p><p>\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_65)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002</p><h3 id="_6-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.7.2 \u7ED3\u6784</h3><p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p><ul><li><p>\u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p></li><li><p>\u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002</p></li><li><p>\u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002</p></li><li><p>\u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002</p></li></ul><h3 id="_6-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.7.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u79DF\u623F</p><p>\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002</p><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_66)} style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u4E2D\u4ECB\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u62BD\u8C61\u540C\u4E8B\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HouseOwner</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u623F\u4E3B&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">&quot;\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tenant</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u79DF\u623F\u8005&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">&quot;\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E2D\u4ECB\u673A\u6784</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorStructure</span> <span class="token keyword">extends</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F</span>
    <span class="token keyword">private</span> <span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tenant</span> tenant<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span> <span class="token function">getHouseOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHouseOwner</span><span class="token punctuation">(</span><span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>houseOwner <span class="token operator">=</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Tenant</span> <span class="token function">getTenant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTenant</span><span class="token punctuation">(</span><span class="token class-name">Tenant</span> tenant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tenant <span class="token operator">=</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>person <span class="token operator">==</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">//\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F</span>
            tenant<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>       <span class="token comment">//\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F</span>
            houseOwner<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784</span>
        <span class="token class-name">MediatorStructure</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediatorStructure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF</span>
        <span class="token class-name">HouseOwner</span> houseOwner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Tenant</span> tenant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token string">&quot;\u674E\u56DB&quot;</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005</span>
        mediator<span class="token punctuation">.</span><span class="token function">setHouseOwner</span><span class="token punctuation">(</span>houseOwner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediator<span class="token punctuation">.</span><span class="token function">setTenant</span><span class="token punctuation">(</span>tenant<span class="token punctuation">)</span><span class="token punctuation">;</span>

        tenant<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">&quot;\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        houseOwner<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-7-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-7-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.7.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li><p>\u677E\u6563\u8026\u5408</p><p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002</p></li><li><p>\u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92</p><p>\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002</p></li><li><p>\u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054</p><p>\u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002</p></li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><p>\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002</p><h3 id="_6-7-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-7-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.7.5 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002</li><li>\u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002</li></ul><h2 id="_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F</h2><h3 id="_6-8-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-8-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.8.1 \u6982\u8FF0</h3><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002</p><h3 id="_6-8-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-8-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.8.2 \u7ED3\u6784</h3><p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A</p><ul><li><p>\u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002</p></li><li><p>\u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002</p></li><li><p>\u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002</p></li><li><p>\u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002</p></li></ul><h3 id="_6-8-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-8-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.8.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_67)} style="${serverRenderer.ssrRenderStyle({ "zoom": "90%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentIteratorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> position <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Student</span> currentStudent <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position <span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> currentStudent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAggregateImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u5B66\u751F\u5217\u8868</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-8-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-8-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.8.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li>\u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002</li><li>\u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002</li><li>\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002</li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><p>\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002</p><h3 id="_6-8-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-8-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.8.5 \u4F7F\u7528\u573A\u666F</h3><ul><li>\u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002</li><li>\u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002</li><li>\u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002</li></ul><h3 id="_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.8.6 JDK \u6E90\u7801\u89E3\u6790</h3><p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E</p><ul><li>List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B</li><li>ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B</li><li>Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668</li><li>list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 <code>Iterator</code> \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61</li></ul><p>\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
        <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>       <span class="token comment">// \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>

        <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token comment">//\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> cursor <span class="token operator">!=</span> size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cursor <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 <code>iterator</code> \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 <code>Iterator</code> \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 <code>Iterator</code> \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p><blockquote><p>\u6CE8\u610F\uFF1A</p><p>\u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0<code>java.util.Iterable</code>\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A <code>java.util.Iterator</code> \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002</p></blockquote><h2 id="_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F</h2><h3 id="_6-9-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-9-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.9.1 \u6982\u8FF0</h3><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002</p><h3 id="_6-9-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-9-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.9.2 \u7ED3\u6784</h3><p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:</p><ul><li>\u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20<code>\uFF08Element\uFF09</code>\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002</li><li>\u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002</li><li>\u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08<code>accept</code>\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li><li>\u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002</li><li>\u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08<code>Element</code>\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li></ul><h3 id="_6-9-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-9-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.9.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF</p><p>\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002</p><ul><li>\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA</li><li>\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA</li><li>\u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B</li><li>\u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B</li><li>\u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6</li></ul><p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><p><img${serverRenderer.ssrRenderAttr("src", _imports_68)} alt=""></p><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 <code>Person</code>\u63A5\u53E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Owner</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E3B\u4EBA\u5582\u98DF\u732B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E3B\u4EBA\u5582\u98DF\u72D7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Someone</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5176\u4ED6\u4EBA\u5582\u98DF\u732B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5B9E\u73B0<code>Animal</code>\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span> nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span> node <span class="token operator">:</span> nodeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6DFB\u52A0\u64CD\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nodeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Home</span> home <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Owner</span> owner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Someone</span> someone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Someone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-9-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-9-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.9.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li><p>\u6269\u5C55\u6027\u597D</p><p>\u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002</p></li><li><p>\u590D\u7528\u6027\u597D</p><p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002</p></li><li><p>\u5206\u79BB\u65E0\u5173\u884C\u4E3A</p><p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002</p></li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><ul><li><p>\u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE</p><p>\u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p></li><li><p>\u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219</p><p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002</p></li></ul><h3 id="_6-9-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-9-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.9.5 \u4F7F\u7528\u573A\u666F</h3><ul><li><p>\u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002</p></li><li><p>\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002</p></li></ul><h3 id="_6-9-6-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_6-9-6-\u6269\u5C55" aria-hidden="true">#</a> 6.9.6 \u6269\u5C55</h3><p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002</p><p><strong>1\uFF0C\u5206\u6D3E\uFF1A</strong></p><p>\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 <code>Map map = new HashMap()</code> \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F <code>Map</code> \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F <code>HashMap</code> \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002</p><p><strong>\u9759\u6001\u5206\u6D3E(Static Dispatch)</strong> \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002</p><p><strong>\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)</strong> \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p><p><strong>2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A</strong></p><p>\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
   	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002</p><p>Java \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002</p><p><strong>3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A</strong></p><p>\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_69)} style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p>\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F</p><p><strong>\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002</strong></p><p><strong>4\uFF0C\u53CC\u5206\u6D3E\uFF1A</strong></p><p>\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F<code>\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E</code>\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002</p><p>\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002</p><p>\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_70)} style="${serverRenderer.ssrRenderStyle({ "zoom": "67%" })}"><p><strong>\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002</strong></p><h2 id="_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F</h2><h3 id="_6-10-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-10-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.10.1 \u6982\u8FF0</h3><p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002</p><p><strong>\u5B9A\u4E49\uFF1A</strong></p><p>\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002</p><h3 id="_6-10-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-10-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.10.2 \u7ED3\u6784</h3><p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p><ul><li>\u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002</li><li>\u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002</li><li>\u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002</li></ul><blockquote><p>\u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A</p><ul><li><strong>\u7A84\u63A5\u53E3</strong>\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002</li><li><strong>\u5BBD\u63A5\u53E3</strong>\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002</li></ul></blockquote><h3 id="_6-10-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-10-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.10.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS</p><p>\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002</p><p>\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A</p><ul><li>\u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li><li>\u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li></ul><h4 id="_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4><p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_71)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u6E38\u620F\u89D2\u8272\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u89D2\u8272\u751F\u547D\u529B\uFF1A&quot;</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u89D2\u8272\u653B\u51FB\u529B\uFF1A&quot;</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u89D2\u8272\u9632\u5FA1\u529B\uFF1A&quot;</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------\u5927\u6218Boss\u524D------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------\u5927\u6218Boss\u540E------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002</p></blockquote><h4 id="_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4><p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06<strong>\u5907\u5FD8\u5F55\u7C7B</strong>\u8BBE\u8BA1\u6210<strong>\u53D1\u8D77\u4EBA\u7C7B</strong>\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002</p><p>\u5C06 <code>RoleStateMemento</code> \u8BBE\u4E3A <code>GameRole</code> \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 <code>RoleStateMemento</code> \u5BF9\u8C61\u5C01\u88C5\u5728 <code>GameRole</code> \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 <code>Memento</code> \u7ED9 <code>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 <code>GameRole</code> \u7C7B\u770B\u5230\u7684\u662F <code>RoleStateMemento</code> \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C<code>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 <code>Memento</code> \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_72)} style="${serverRenderer.ssrRenderStyle({ "zoom": "70%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p>\u7A84\u63A5\u53E3<code>Memento</code>\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B <code>GameRole</code>\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B <code>RoleStateMemento</code>\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">/</span>\u6E38\u620F\u89D2\u8272\u7C7B
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RoleStateMemento</span> roleStateMemento <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span><span class="token punctuation">)</span> memento<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u89D2\u8272\u751F\u547D\u529B\uFF1A&quot;</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u89D2\u8272\u653B\u51FB\u529B\uFF1A&quot;</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u89D2\u8272\u9632\u5FA1\u529B\uFF1A&quot;</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token keyword">implements</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B <code>RoleStateCaretaker</code> \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 <code>Memento</code> \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------\u5927\u6218Boss\u524D------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------\u5927\u6218Boss\u540E------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-10-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-10-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.10.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li>\u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002</li><li>\u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002</li><li>\u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002</li></ul><h3 id="_6-10-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-10-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.10.5 \u4F7F\u7528\u573A\u666F</h3><ul><li><p>\u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002</p></li><li><p>\u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002</p></li></ul><h2 id="_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F</h2><h3 id="_6-11-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-11-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.11.1 \u6982\u8FF0</h3><img${serverRenderer.ssrRenderAttr("src", _imports_73)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p>\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> i <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002</p><p>\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002</p><p><strong>\u5B9A\u4E49\uFF1A</strong></p><blockquote><p>\u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002</p></blockquote><p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002</p><p>\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F</p><p><strong>\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A</strong></p><p>\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>expression ::= value | plus | minus
plus ::= expression \u2018+\u2019 expression
minus ::= expression \u2018-\u2019 expression
value ::= integer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002</p></blockquote><p>\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A</p><p>\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002</p><p><strong>\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A</strong></p><p>\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002</p><p>\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_74)} style="${serverRenderer.ssrRenderStyle({ "zoom": "50%" })}"><h3 id="_6-11-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-11-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.11.2 \u7ED3\u6784</h3><p>\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p><ul><li><p>\u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002</p></li><li><p>\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002</p></li><li><p>\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002</p></li><li><p>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002</p></li><li><p>\u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002</p></li></ul><h3 id="_6-11-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-11-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.11.3 \u6848\u4F8B\u5B9E\u73B0</h3><p>\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6</p><img${serverRenderer.ssrRenderAttr("src", _imports_75)} style="${serverRenderer.ssrRenderStyle({ "zoom": "80%" })}"><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u89D2\u8272AbstractExpression</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; + &quot;</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Minus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; - &quot;</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Variable</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> value <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Variable</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Value v = new Value(1);</span>

        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AbstractExpression</span> expression <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>expression <span class="token operator">+</span> <span class="token string">&quot;= &quot;</span> <span class="token operator">+</span> expression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-11-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-11-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.11.4 \u4F18\u7F3A\u70B9</h3><p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p><ul><li><p>\u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002</p><p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002</p></li><li><p>\u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002</p><p>\u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002</p></li><li><p>\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002</p><p>\u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 &quot;\u5F00\u95ED\u539F\u5219&quot;\u3002</p></li></ul><p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p><ul><li><p>\u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002</p><p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002</p></li></ul><ul><li><p>\u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002</p><p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002</p></li></ul><h3 id="_6-11-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-11-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.11.5 \u4F7F\u7528\u573A\u666F</h3><ul><li><p>\u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002</p></li><li><p>\u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002</p></li><li><p>\u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002</p></li></ul><h1 id="_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" tabindex="-1"><a class="header-anchor" href="#_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" aria-hidden="true">#</a> 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6</h1><h2 id="_7-1-spring-\u4F7F\u7528\u56DE\u987E" tabindex="-1"><a class="header-anchor" href="#_7-1-spring-\u4F7F\u7528\u56DE\u987E" aria-hidden="true">#</a> 7.1 spring \u4F7F\u7528\u56DE\u987E</h2><p>\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002</p><ul><li><p>\u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;userDaoImpl ....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;userServiceImpl ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61</span>
        <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5</span>
        userService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
       xmlns<span class="token operator">=</span><span class="token string">&quot;http://www.springframework.org/schema/beans&quot;</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">&quot;http://www.springframework.org/schema/context&quot;</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>&quot;http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd&quot;<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;userService&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;com.itheima.service.impl.UserServiceImpl&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;userDao&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;userDao&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;userDao&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_76)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"></li></ul><p>\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A</p><ul><li>userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002</li><li>\u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002</li><li>UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002</li></ul><p>\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09</p><h2 id="_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" aria-hidden="true">#</a> 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784</h2><p>Spring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:</p><p>\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_77)} style="${serverRenderer.ssrRenderStyle({ "zoom": "40%" })}"><p>\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002</p><ul><li>spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002</li><li>spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002</li><li>spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002</li><li>spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002</li><li>spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002</li></ul><h3 id="_7-1-1-bean-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_7-1-1-bean-\u6982\u8FF0" aria-hidden="true">#</a> 7.1.1 bean \u6982\u8FF0</h3><p>Spring \u5C31\u662F\u9762\u5411 <code>Bean</code> \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</p><p>spring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F</p><ul><li>spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002</li><li>bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002</li></ul><h2 id="_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" aria-hidden="true">#</a> 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790</h2><h3 id="_7-3-1-beanfactory-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-1-beanfactory-\u89E3\u6790" aria-hidden="true">#</a> 7.3.1 BeanFactory \u89E3\u6790</h3><p>Spring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_78)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p>\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002</p><p>\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F</p><p>\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C</p><ul><li>ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002</li><li>HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean</li><li>AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002</li></ul><p>\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>

	<span class="token class-name">String</span> FACTORY_BEAN_PREFIX <span class="token operator">=</span> <span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">;</span>

	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>

	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">ResolvableType</span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B</span>
	<span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isPrototype</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">ResolvableType</span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAliases</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002</p><p>BeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_79)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p>\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A</p><ul><li>ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li><li>FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li><li>AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002</li></ul><h3 id="_7-3-2-beandefinition-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-2-beandefinition-\u89E3\u6790" aria-hidden="true">#</a> 7.3.2 BeanDefinition \u89E3\u6790</h3><p>Spring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

bean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A
	scope\u3001init-method\u3001destory-method\u7B49\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_80)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><h3 id="_7-3-3-beandefinitionreader-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-3-beandefinitionreader-\u89E3\u6790" aria-hidden="true">#</a> 7.3.3 BeanDefinitionReader \u89E3\u6790</h3><p>Bean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002</p><img${serverRenderer.ssrRenderAttr("src", _imports_81)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p>\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61</span>
	<span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ResourceLoader</span> <span class="token function">getResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ClassLoader</span> <span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token class-name">BeanNameGenerator</span> <span class="token function">getBeanNameGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*
		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D
	*/</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span> resource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> resources<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> locations<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-4-beandefinitionregistry-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-4-beandefinitionregistry-\u89E3\u6790" aria-hidden="true">#</a> 7.3.4 BeanDefinitionRegistry \u89E3\u6790</h3><p>BeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token keyword">extends</span> <span class="token class-name">AliasRegistry</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean</span>
	<span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p><img${serverRenderer.ssrRenderAttr("src", _imports_82)} style="${serverRenderer.ssrRenderStyle({ "zoom": "60%" })}"><p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A</p><ul><li><p>DefaultListableBeanFactory</p><p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>SimpleBeanDefinitionRegistry</p><p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h3 id="_7-3-5-\u521B\u5EFA\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_7-3-5-\u521B\u5EFA\u5BB9\u5668" aria-hidden="true">#</a> 7.3.5 \u521B\u5EFA\u5BB9\u5668</h3><p>ClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002</p><h2 id="_7-4-\u81EA\u5B9A\u4E49-springioc" tabindex="-1"><a class="header-anchor" href="#_7-4-\u81EA\u5B9A\u4E49-springioc" aria-hidden="true">#</a> 7.4 \u81EA\u5B9A\u4E49 SpringIOC</h2><p>\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" aria-hidden="true">#</a> 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B</h3><h4 id="_7-4-1-1-propertyvalue-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-1-propertyvalue-\u7C7B" aria-hidden="true">#</a> 7.4.1.1 PropertyValue \u7C7B</h4><p>\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertyValue</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> ref<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> ref<span class="token punctuation">,</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRef</span><span class="token punctuation">(</span><span class="token class-name">String</span> ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-2-mutablepropertyvalues-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-2-mutablepropertyvalues-\u7C7B" aria-hidden="true">#</a> 7.4.1.2 MutablePropertyValues \u7C7B</h4><p>\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MutablePropertyValues</span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span> propertyValueList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span> propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token punctuation">(</span>propertyValueList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> propertyValueList <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> pv<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValueList<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">PropertyValue</span> currentPv <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pv<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pv<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-3-beandefinition-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-3-beandefinition-\u7C7B" aria-hidden="true">#</a> 7.4.1.3 BeanDefinition \u7C7B</h4><p>BeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDefinition</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> className<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setClassName</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPropertyValues</span><span class="token punctuation">(</span><span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValues <span class="token operator">=</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B</h3><h4 id="_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3</h4><p>BeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A</p><ul><li>\u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</li><li>\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li><li>\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61</li><li>\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li><li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570</li><li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</span>
    <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61</span>
    <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token comment">//\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-2-2-simplebeandefinitionregistry-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-2-simplebeandefinitionregistry-\u7C7B" aria-hidden="true">#</a> 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B</h4><p>\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B</h3><h4 id="_7-4-3-1-beandefinitionreader-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-3-1-beandefinitionreader-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.3.1 BeanDefinitionReader \u63A5\u53E3</h4><p>BeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A</p><ul><li>\u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002</li><li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C</span>
    <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-3-2-xmlbeandefinitionreader-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-2-xmlbeandefinitionreader-\u7C7B" aria-hidden="true">#</a> 7.4.3.2 XmlBeanDefinitionReader \u7C7B</h4><p>XmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlBeanDefinitionReader</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SAXReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> document <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Element</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u89E3\u6790bean\u6807\u7B7E</span>
        <span class="token function">parseBean</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">parseBean</span><span class="token punctuation">(</span><span class="token class-name">Element</span> rootElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">&quot;property&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MutablePropertyValues</span> mutablePropertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element1 <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> ref <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;ref&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> value <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>ref<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                mutablePropertyValues<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setPropertyValues</span><span class="token punctuation">(</span>mutablePropertyValues<span class="token punctuation">)</span><span class="token punctuation">;</span>

            registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B</h3><h4 id="_7-4-4-1-beanfactory-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-1-beanfactory-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.1 BeanFactory \u63A5\u53E3</h4><p>\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-2-applicationcontext-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-2-applicationcontext-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.2 ApplicationContext \u63A5\u53E3</h4><p>\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 <code>refresh()</code> \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A</p><ul><li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002</li><li>\u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA</span>
    <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-3-abstractapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-3-abstractapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.3 AbstractApplicationContext \u7C7B</h4><ul><li><p>\u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002</p></li><li><p>\u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p><p>BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002</p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractApplicationContext</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContext</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">BeanDefinitionReader</span> beanDefinitionReader<span class="token punctuation">;</span>
    <span class="token comment">//\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61</span>
    <span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> singletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> configLocation<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//\u52A0\u8F7DBeanDefinition</span>
        beanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521D\u59CB\u5316bean</span>
        <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//bean\u7684\u521D\u59CB\u5316</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanNames <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002</p></blockquote><h4 id="_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.4 ClassPathXmlApplicationContext \u7C7B</h4><p>\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A</p><ul><li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002</li><li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002</li><li>\u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathXmlApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configLocation <span class="token operator">=</span> configLocation<span class="token punctuation">;</span>
        <span class="token comment">//\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61</span>
        beanDefinitionReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//return singletonObjects.get(name);</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> singletonObjects<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>beanDefinition <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> beanObj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MutablePropertyValues</span> propertyValues <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> propertyName <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> ref <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>ref <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        singletonObjects<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>beanObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> beanObj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>bean <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" aria-hidden="true">#</a> 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3</h3><h4 id="_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F</h4><ul><li>\u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002</li><li>\u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002</li><li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002</li><li>\u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002</li></ul><p>spring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002</p><h4 id="_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219</h4><h4 id="_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" tabindex="-1"><a class="header-anchor" href="#_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" aria-hidden="true">#</a> 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165</h4><p>spring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A</p><ul><li>\u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002</li><li>\u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002</li><li>\u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002</li></ul></div>`);
}
const _sfc_setup$i = _sfc_main$i.setup;
_sfc_main$i.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../pages/design-pattern/index.html.vue");
  return _sfc_setup$i ? _sfc_setup$i(props, ctx) : void 0;
};
var index_html = /* @__PURE__ */ _export_sfc(_sfc_main$i, [["ssrRender", _sfc_ssrRender$2], ["__file", "index.html.vue"]]);
var index_html$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": index_html
}, Symbol.toStringTag, { value: "Module" }));
const _sfc_main$h = {};
function _sfc_ssrRender$1(_ctx, _push, _parent, _attrs) {
  _push(`<div${serverRenderer.ssrRenderAttrs(_attrs)}></div>`);
}
const _sfc_setup$h = _sfc_main$h.setup;
_sfc_main$h.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../pages/404.html.vue");
  return _sfc_setup$h ? _sfc_setup$h(props, ctx) : void 0;
};
var _404_html = /* @__PURE__ */ _export_sfc(_sfc_main$h, [["ssrRender", _sfc_ssrRender$1], ["__file", "404.html.vue"]]);
var _404_html$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": _404_html
}, Symbol.toStringTag, { value: "Module" }));
const _sfc_main$g = /* @__PURE__ */ vue.defineComponent({
  __name: "404",
  __ssrInlineRender: true,
  setup(__props) {
    var _a, _b, _c;
    const routeLocale = useRouteLocale();
    const themeLocale = useThemeLocaleData();
    const messages = (_a = themeLocale.value.notFound) != null ? _a : ["Not Found"];
    const getMsg = () => messages[Math.floor(Math.random() * messages.length)];
    const homeLink = (_b = themeLocale.value.home) != null ? _b : routeLocale.value;
    const homeText = (_c = themeLocale.value.backToHome) != null ? _c : "Back to home";
    return (_ctx, _push, _parent, _attrs) => {
      const _component_RouterLink = vue.resolveComponent("RouterLink");
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "theme-container" }, _attrs))}><main class="page"><div class="theme-default-content"><h1>404</h1><blockquote>${serverRenderer.ssrInterpolate(getMsg())}</blockquote>`);
      _push(serverRenderer.ssrRenderComponent(_component_RouterLink, { to: vue.unref(homeLink) }, {
        default: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`${serverRenderer.ssrInterpolate(vue.unref(homeText))}`);
          } else {
            return [
              vue.createTextVNode(vue.toDisplayString(vue.unref(homeText)), 1)
            ];
          }
        }),
        _: 1
      }, _parent));
      _push(`</div></main></div>`);
    };
  }
});
const _sfc_setup$g = _sfc_main$g.setup;
_sfc_main$g.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/layouts/404.vue");
  return _sfc_setup$g ? _sfc_setup$g(props, ctx) : void 0;
};
var _404 = /* @__PURE__ */ _export_sfc(_sfc_main$g, [["__file", "404.vue"]]);
var _404$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": _404
}, Symbol.toStringTag, { value: "Module" }));
const _sfc_main$f = /* @__PURE__ */ vue.defineComponent({
  __name: "BlogSider",
  __ssrInlineRender: true,
  setup(__props) {
    const { posts } = usePostData();
    const { category } = useCategory();
    const { tags } = useTags();
    const themeData2 = useThemeData();
    const frontmatter = usePageFrontmatter();
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Icon = vue.resolveComponent("Icon");
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "w-full pb-[100px] rounded px-[15px] dark:bg-[#181818] bg-[#fff] shadow-box cursor-pointer border-box" }, _attrs))}><div class="w-full flex flex-wrap items-center justify-center">`);
      if (vue.unref(themeData2).authorAvatar) {
        _push(`<img class="rounded-[50%] h-[6rem] w-[6rem] mt-[2rem] mb-[1rem] inline-block"${serverRenderer.ssrRenderAttr("src", vue.unref(withBase)(vue.unref(themeData2).authorAvatar))} alt="author-avatar">`);
      } else {
        _push(`<!---->`);
      }
      if (vue.unref(themeData2).author) {
        _push(`<h3 class="block w-full text-center m-0 font-[500]">${serverRenderer.ssrInterpolate(vue.unref(themeData2).author)}</h3>`);
      } else {
        _push(`<!---->`);
      }
      _push(`</div><div class="w-[80%] flex flex-wrap items-center justify-center my-[20px] mx-auto"><div class="text-center flex-[0_0_33%] border-r-[#333] border-r border-solid border-y-0 border-l-0"><h3 class="m-0">${serverRenderer.ssrInterpolate(vue.unref(posts).length)}</h3><h6 class="m-0 font-normal mt-[10px]">\u6587\u7AE0</h6></div><div class="text-center flex-[0_0_33%] border-r-[#333] border-r border-solid border-y-0 border-l-0"><h3 class="m-0">${serverRenderer.ssrInterpolate(vue.unref(category).length)}</h3><h6 class="m-0 font-normal mt-[10px]">\u5206\u7C7B</h6></div><div class="text-center flex-[0_0_33%]"><h3 class="m-0">${serverRenderer.ssrInterpolate(vue.unref(tags).length)}</h3><h6 class="m-0 font-normal mt-[10px]">\u6807\u7B7E</h6></div></div>`);
      if (vue.unref(frontmatter).summary) {
        _push(`<div class="leading-[30px] border-solid border-l-[10px] border-l-[#67cc86] border-y-0 border-r-0 bg-[#ebe9e9] pl-[10px] my-[10px] dark:text-[#000]">${serverRenderer.ssrInterpolate(vue.unref(frontmatter).summary)}</div>`);
      } else {
        _push(`<!---->`);
      }
      if (vue.unref(frontmatter).hobby) {
        _push(`<div>`);
        _push(serverRenderer.ssrRenderComponent(_component_Icon, {
          icon: "DribbbleOutlined",
          text: "\u5174\u8DA3\u7231\u597D",
          textSize: 15
        }, null, _parent));
        _push(`<div style="${serverRenderer.ssrRenderStyle({ "margin-top": "5px" })}"><!--[-->`);
        serverRenderer.ssrRenderList(vue.unref(frontmatter).hobby, (item, index2) => {
          _push(`<span style="${serverRenderer.ssrRenderStyle({ backgroundColor: vue.unref(useRandomColor)() })}" class="p-[4px_8px] m-[4px_4px_10px] rounded-[0.25rem] inline-block text-[13px] text-[#fff]">${serverRenderer.ssrInterpolate(item)}</span>`);
        });
        _push(`<!--]--></div></div>`);
      } else {
        _push(`<!---->`);
      }
      if (vue.unref(themeData2).socialLinks) {
        _push(`<div style="${serverRenderer.ssrRenderStyle({ "margin-top": "5px" })}">`);
        _push(serverRenderer.ssrRenderComponent(_component_Icon, {
          icon: "FolderOpenOutlined",
          text: "\u535A\u5BA2\u5730\u5740",
          textSize: 15
        }, null, _parent));
        _push(`<div class="pt-2"><!--[-->`);
        serverRenderer.ssrRenderList(vue.unref(themeData2).socialLinks, (item, index2) => {
          _push(serverRenderer.ssrRenderComponent(_component_Icon, {
            key: index2,
            icon: item.icon,
            iconSize: 25,
            iconColor: vue.unref(useRandomColor)(),
            link: item.link,
            target: "_target",
            class: "mx-2 hover:scale-110"
          }, null, _parent));
        });
        _push(`<!--]--></div></div>`);
      } else {
        _push(`<!---->`);
      }
      _push(`<hr><div class="w-full flex my-[10px] flex-wrap"><div class="w-full">`);
      _push(serverRenderer.ssrRenderComponent(_component_Icon, {
        icon: "AppstoreTwotone",
        text: "\u5206\u7C7B\u5217\u8868",
        textSize: 15,
        class: "dark:hover:text-[#fff]"
      }, null, _parent));
      _push(`</div><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(category), (item, index2) => {
        _push(`<span class="shadow-item w-full mt-[10px] bg-[#fff] hover:bg-[#3eaf7c] dark:bg-[#181818] dark:hover:bg-[#3eaf7c] hover:scale-110"><a class="flex items-center justify-between text-[#666] py-[8px] px-[14px] dark:hover:text-[#fff] text-[13px]"><span>${serverRenderer.ssrInterpolate(item.name)}</span><span class="ml-[4px] w-[1.2rem] h-[1.2rem] leading-[1.2rem] text-center text-[.7rem] text-[#fff]" style="${serverRenderer.ssrRenderStyle({ "background-color": vue.unref(useRandomColor)() })}">${serverRenderer.ssrInterpolate(item.path.length)}</span></a></span>`);
      });
      _push(`<!--]--></div><div class="w-full flex my-[10px] flex-wrap"><div class="w-full">`);
      _push(serverRenderer.ssrRenderComponent(_component_Icon, {
        icon: "TagsOutlined",
        text: "\u6807\u7B7E\u5217\u8868",
        textSize: 15,
        class: "dark:hover:text-[#fff]"
      }, null, _parent));
      _push(`</div><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(tags), (item, index2) => {
        _push(`<span class="shadow-item mt-[10px] bg-[#fff] hover:bg-[#3eaf7c] dark:bg-[#181818] dark:hover:bg-[#3eaf7c] hover:scale-110"><a class="flex items-center justify-between text-[#666] py-[8px] px-[14px] dark:hover:text-[#fff] text-[13px]"><span>${serverRenderer.ssrInterpolate(item.name)}</span><span class="ml-[4px] w-[1.2rem] h-[1.2rem] leading-[1.2rem] text-center text-[.7rem] text-[#fff]" style="${serverRenderer.ssrRenderStyle({ "background-color": vue.unref(useRandomColor)() })}">${serverRenderer.ssrInterpolate(item.path.length)}</span></a></span>`);
      });
      _push(`<!--]--></div><div class="w-full flex my-[10px] flex-wrap"><div class="w-full">`);
      _push(serverRenderer.ssrRenderComponent(_component_Icon, {
        icon: "LinkOutlined",
        text: "\u53CB\u60C5\u94FE\u63A5",
        textSize: 15,
        class: "dark:hover:text-[#fff]"
      }, null, _parent));
      _push(`</div><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(themeData2).friendLink, (item, index2) => {
        _push(`<span class="shadow-item mt-[10px] bg-[#fff] dark:bg-[#181818] hover:scale-110"><a${serverRenderer.ssrRenderAttr("href", item.link)} target="_blank" class="flex items-center justify-between text-[#3eaf7c] py-[8px] px-[14px] text-[13px]"><span>${serverRenderer.ssrInterpolate(item.title)}</span></a></span>`);
      });
      _push(`<!--]--></div></div>`);
    };
  }
});
const _sfc_setup$f = _sfc_main$f.setup;
_sfc_main$f.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/Blog/BlogSider.vue");
  return _sfc_setup$f ? _sfc_setup$f(props, ctx) : void 0;
};
var BlogSider = /* @__PURE__ */ _export_sfc(_sfc_main$f, [["__file", "BlogSider.vue"]]);
const _sfc_main$e = /* @__PURE__ */ vue.defineComponent({
  __name: "HomeBlog",
  __ssrInlineRender: true,
  setup(__props) {
    const { posts } = usePostData();
    const pages = vue.reactive({
      pageTotal: posts.length,
      pageNumber: 1,
      pageSize: 10
    });
    const blogData = vue.computed(() => posts.slice((pages.pageNumber - 1) * pages.pageSize, pages.pageNumber * pages.pageSize));
    const getBack = (value) => {
      const { page, pageSize } = value;
      pages.pageNumber = page;
      pages.pageSize = pageSize;
    };
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Pagination = vue.resolveComponent("Pagination");
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "w-[1120px] my-0 mx-auto mt-5 flex" }, _attrs))}><div class="flex-1"><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(blogData), (item, index2) => {
        _push(serverRenderer.ssrRenderComponent(BlogItem, {
          class: ["border", index2 % 3 == 0 ? "draw" : index2 % 3 == 1 ? "draw meet" : "center"],
          key: index2,
          page: item,
          position: index2 % 2 == 0 ? "left" : "right"
        }, null, _parent));
      });
      _push(`<!--]-->`);
      _push(serverRenderer.ssrRenderComponent(_component_Pagination, {
        pageTotal: pages.pageTotal,
        pageNumber: pages.pageNumber,
        pageSize: pages.pageSize,
        onClick: getBack
      }, null, _parent));
      _push(`</div><div class="w-[300px] ml-[15px]">`);
      _push(serverRenderer.ssrRenderComponent(BlogSider, null, null, _parent));
      _push(`</div></div>`);
    };
  }
});
const _sfc_setup$e = _sfc_main$e.setup;
_sfc_main$e.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/HomeBlog.vue");
  return _sfc_setup$e ? _sfc_setup$e(props, ctx) : void 0;
};
var HomeBlog = /* @__PURE__ */ _export_sfc(_sfc_main$e, [["__file", "HomeBlog.vue"]]);
const _sfc_main$d = {};
function _sfc_ssrRender(_ctx, _push, _parent, _attrs) {
  const _component_Icon = vue.resolveComponent("Icon");
  _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "p-[15px] mt-[25px] text-center border-t-[1px] border-t-[color:#eee] border-solid border-x-0 border-b-0" }, _attrs))}>`);
  _push(serverRenderer.ssrRenderComponent(_component_Icon, {
    icon: "SafetyCertificateOutlined",
    text: "\u9655ICP\u590717067667\u53F7-1",
    textSize: 16,
    class: "mr-[10px]"
  }, null, _parent));
  _push(serverRenderer.ssrRenderComponent(_component_Icon, {
    icon: "CopyrightCircleOutlined",
    text: "\u5C0F\u7D2B\u5FF5\u6C81 2022",
    textSize: 16,
    class: "mr-[10px]"
  }, null, _parent));
  _push(`</div>`);
}
const _sfc_setup$d = _sfc_main$d.setup;
_sfc_main$d.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/HomeFooter.vue");
  return _sfc_setup$d ? _sfc_setup$d(props, ctx) : void 0;
};
var HomeFooter = /* @__PURE__ */ _export_sfc(_sfc_main$d, [["ssrRender", _sfc_ssrRender], ["__file", "HomeFooter.vue"]]);
const _sfc_main$c = /* @__PURE__ */ vue.defineComponent({
  __name: "HomeBanner",
  __ssrInlineRender: true,
  setup(__props) {
    const homeBanner = useBanner();
    useTyped();
    useCircleMagic();
    const mixImage = homeBanner.getRandomImage();
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({
        class: "hero w-full relative h-[500px] flex justify-center items-center",
        style: vue.unref(homeBanner).bannerOptions.bgImageStyle
      }, _attrs))}><div id="banner" class="w-full absolute z-0 overflow-hidden"><!--[-->`);
      serverRenderer.ssrRenderList(vue.unref(mixImage), (item) => {
        _push(`<img${serverRenderer.ssrRenderAttr("src", item)}>`);
      });
      _push(`<!--]--></div><div class="index z-10 absolute text-[#fff] text-center"><div>`);
      if (`${vue.unref(homeBanner).bannerOptions.heroText instanceof Array}`) {
        _push(`<h1 class="typed inline-block text-[2.5rem] font-[500]"></h1>`);
      } else {
        _push(`<h1 class="typed inline-block text-[2.5rem] font-[500]"> vuePress-theme-Anyfork </h1>`);
      }
      _push(`</div>`);
      if (vue.unref(homeBanner).bannerOptions.tagline) {
        _push(`<p class="my-5 text-[1.6rem]">${serverRenderer.ssrInterpolate(vue.unref(homeBanner).bannerOptions.tagline || "Welcome to your vuePress-theme-AnyFork site")}</p>`);
      } else {
        _push(`<!---->`);
      }
      if (vue.unref(homeBanner).bannerOptions.showArrow) {
        _push(`<a class="anchor-down"></a>`);
      } else {
        _push(`<!---->`);
      }
      _push(`</div>`);
      if (vue.unref(homeBanner).bannerOptions.bubbles) {
        _push(`<div id="bubbles" class="absolute w-full h-full z-[100]"></div>`);
      } else {
        _push(`<!---->`);
      }
      _push(`</div>`);
    };
  }
});
const _sfc_setup$c = _sfc_main$c.setup;
_sfc_main$c.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/HomeBanner.vue");
  return _sfc_setup$c ? _sfc_setup$c(props, ctx) : void 0;
};
var HomeBanner = /* @__PURE__ */ _export_sfc(_sfc_main$c, [["__file", "HomeBanner.vue"]]);
const _sfc_main$b = /* @__PURE__ */ vue.defineComponent({
  __name: "Home",
  __ssrInlineRender: true,
  setup(__props) {
    usePostData();
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<main${serverRenderer.ssrRenderAttrs(_attrs)}>`);
      _push(serverRenderer.ssrRenderComponent(HomeBanner, null, null, _parent));
      _push(serverRenderer.ssrRenderComponent(HomeBlog, null, null, _parent));
      _push(serverRenderer.ssrRenderComponent(HomeFooter, null, null, _parent));
      _push(`</main>`);
    };
  }
});
const _sfc_setup$b = _sfc_main$b.setup;
_sfc_main$b.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/Home.vue");
  return _sfc_setup$b ? _sfc_setup$b(props, ctx) : void 0;
};
var Home = /* @__PURE__ */ _export_sfc(_sfc_main$b, [["__file", "Home.vue"]]);
const _sfc_main$a = /* @__PURE__ */ vue.defineComponent({
  __name: "PageMeta",
  __ssrInlineRender: true,
  setup(__props) {
    const useEditNavLink = () => {
      const themeLocale2 = useThemeLocaleData();
      const page = usePageData();
      const frontmatter = usePageFrontmatter();
      return vue.computed(() => {
        var _a, _b, _c;
        const showEditLink = (_b = (_a = frontmatter.value.editLink) != null ? _a : themeLocale2.value.editLink) != null ? _b : true;
        if (!showEditLink) {
          return null;
        }
        const {
          repo,
          docsRepo = repo,
          docsBranch = "main",
          docsDir = "",
          editLinkText
        } = themeLocale2.value;
        if (!docsRepo)
          return null;
        const editLink = resolveEditLink({
          docsRepo,
          docsBranch,
          docsDir,
          filePathRelative: page.value.filePathRelative,
          editLinkPattern: (_c = frontmatter.value.editLinkPattern) != null ? _c : themeLocale2.value.editLinkPattern
        });
        if (!editLink)
          return null;
        return {
          text: editLinkText != null ? editLinkText : "Edit this page",
          link: editLink
        };
      });
    };
    const useLastUpdated = () => {
      const themeLocale2 = useThemeLocaleData();
      const page = usePageData();
      const frontmatter = usePageFrontmatter();
      return vue.computed(() => {
        var _a, _b, _c, _d;
        const showLastUpdated = (_b = (_a = frontmatter.value.lastUpdated) != null ? _a : themeLocale2.value.lastUpdated) != null ? _b : true;
        if (!showLastUpdated)
          return null;
        if (!((_c = page.value.git) == null ? void 0 : _c.updatedTime))
          return null;
        const updatedDate = new Date((_d = page.value.git) == null ? void 0 : _d.updatedTime);
        return updatedDate.toLocaleString();
      });
    };
    const useContributors = () => {
      const themeLocale2 = useThemeLocaleData();
      const page = usePageData();
      const frontmatter = usePageFrontmatter();
      return vue.computed(() => {
        var _a, _b, _c, _d;
        const showContributors = (_b = (_a = frontmatter.value.contributors) != null ? _a : themeLocale2.value.contributors) != null ? _b : true;
        if (!showContributors)
          return null;
        return (_d = (_c = page.value.git) == null ? void 0 : _c.contributors) != null ? _d : null;
      });
    };
    const themeLocale = useThemeLocaleData();
    const editNavLink = useEditNavLink();
    const lastUpdated = useLastUpdated();
    const contributors = useContributors();
    return (_ctx, _push, _parent, _attrs) => {
      const _component_ClientOnly = vue.resolveComponent("ClientOnly");
      _push(`<footer${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "page-meta" }, _attrs))}>`);
      if (vue.unref(editNavLink)) {
        _push(`<div class="meta-item edit-link">`);
        _push(serverRenderer.ssrRenderComponent(AutoLink, {
          class: "meta-item-label",
          item: vue.unref(editNavLink)
        }, null, _parent));
        _push(`</div>`);
      } else {
        _push(`<!---->`);
      }
      if (vue.unref(lastUpdated)) {
        _push(`<div class="meta-item last-updated"><span class="meta-item-label">${serverRenderer.ssrInterpolate(vue.unref(themeLocale).lastUpdatedText)}: </span>`);
        _push(serverRenderer.ssrRenderComponent(_component_ClientOnly, null, {
          default: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`<span class="meta-item-info"${_scopeId}>${serverRenderer.ssrInterpolate(vue.unref(lastUpdated))}</span>`);
            } else {
              return [
                vue.createVNode("span", { class: "meta-item-info" }, vue.toDisplayString(vue.unref(lastUpdated)), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(`</div>`);
      } else {
        _push(`<!---->`);
      }
      if (vue.unref(contributors) && vue.unref(contributors).length) {
        _push(`<div class="meta-item contributors"><span class="meta-item-label">${serverRenderer.ssrInterpolate(vue.unref(themeLocale).contributorsText)}: </span><span class="meta-item-info"><!--[-->`);
        serverRenderer.ssrRenderList(vue.unref(contributors), (contributor, index2) => {
          _push(`<!--[--><span class="contributor"${serverRenderer.ssrRenderAttr("title", `email: ${contributor.email}`)}>${serverRenderer.ssrInterpolate(contributor.name)}</span>`);
          if (index2 !== vue.unref(contributors).length - 1) {
            _push(`<!--[-->, <!--]-->`);
          } else {
            _push(`<!---->`);
          }
          _push(`<!--]-->`);
        });
        _push(`<!--]--></span></div>`);
      } else {
        _push(`<!---->`);
      }
      _push(`</footer>`);
    };
  }
});
const _sfc_setup$a = _sfc_main$a.setup;
_sfc_main$a.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/PageMeta.vue");
  return _sfc_setup$a ? _sfc_setup$a(props, ctx) : void 0;
};
var PageMeta = /* @__PURE__ */ _export_sfc(_sfc_main$a, [["__file", "PageMeta.vue"]]);
const _sfc_main$9 = /* @__PURE__ */ vue.defineComponent({
  __name: "PageNav",
  __ssrInlineRender: true,
  setup(__props) {
    const resolveFromFrontmatterConfig = (conf) => {
      if (conf === false) {
        return null;
      }
      if (shared.isString(conf)) {
        return useNavLink(conf);
      }
      if (shared.isPlainObject(conf)) {
        return conf;
      }
      return false;
    };
    const resolveFromSidebarItems = (sidebarItems2, currentPath, offset) => {
      const index2 = sidebarItems2.findIndex((item) => item.link === currentPath);
      if (index2 !== -1) {
        const targetItem = sidebarItems2[index2 + offset];
        if (!(targetItem == null ? void 0 : targetItem.link)) {
          return null;
        }
        return targetItem;
      }
      for (const item of sidebarItems2) {
        if (item.children) {
          const childResult = resolveFromSidebarItems(
            item.children,
            currentPath,
            offset
          );
          if (childResult) {
            return childResult;
          }
        }
      }
      return null;
    };
    const frontmatter = usePageFrontmatter();
    const sidebarItems = useSidebarItems();
    const route = vueRouter.useRoute();
    const prevNavLink = vue.computed(() => {
      const prevConfig = resolveFromFrontmatterConfig(frontmatter.value.prev);
      if (prevConfig !== false) {
        return prevConfig;
      }
      return resolveFromSidebarItems(sidebarItems.value, route.path, -1);
    });
    const nextNavLink = vue.computed(() => {
      const nextConfig = resolveFromFrontmatterConfig(frontmatter.value.next);
      if (nextConfig !== false) {
        return nextConfig;
      }
      return resolveFromSidebarItems(sidebarItems.value, route.path, 1);
    });
    return (_ctx, _push, _parent, _attrs) => {
      if (vue.unref(prevNavLink) || vue.unref(nextNavLink)) {
        _push(`<nav${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "page-nav" }, _attrs))}><p class="inner">`);
        if (vue.unref(prevNavLink)) {
          _push(`<span class="prev">`);
          _push(serverRenderer.ssrRenderComponent(AutoLink, { item: vue.unref(prevNavLink) }, null, _parent));
          _push(`</span>`);
        } else {
          _push(`<!---->`);
        }
        if (vue.unref(nextNavLink)) {
          _push(`<span class="next">`);
          _push(serverRenderer.ssrRenderComponent(AutoLink, { item: vue.unref(nextNavLink) }, null, _parent));
          _push(`</span>`);
        } else {
          _push(`<!---->`);
        }
        _push(`</p></nav>`);
      } else {
        _push(`<!---->`);
      }
    };
  }
});
const _sfc_setup$9 = _sfc_main$9.setup;
_sfc_main$9.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/PageNav.vue");
  return _sfc_setup$9 ? _sfc_setup$9(props, ctx) : void 0;
};
var PageNav = /* @__PURE__ */ _export_sfc(_sfc_main$9, [["__file", "PageNav.vue"]]);
const _sfc_main$8 = /* @__PURE__ */ vue.defineComponent({
  __name: "Page",
  __ssrInlineRender: true,
  setup(__props) {
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Content = vue.resolveComponent("Content");
      _push(`<main${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "page" }, _attrs))}>`);
      serverRenderer.ssrRenderSlot(_ctx.$slots, "top", {}, null, _push, _parent);
      _push(`<div class="theme-default-content">`);
      serverRenderer.ssrRenderSlot(_ctx.$slots, "content-top", {}, null, _push, _parent);
      _push(serverRenderer.ssrRenderComponent(_component_Content, null, null, _parent));
      serverRenderer.ssrRenderSlot(_ctx.$slots, "content-bottom", {}, null, _push, _parent);
      _push(`</div>`);
      _push(serverRenderer.ssrRenderComponent(PageMeta, null, null, _parent));
      _push(serverRenderer.ssrRenderComponent(PageNav, null, null, _parent));
      serverRenderer.ssrRenderSlot(_ctx.$slots, "bottom", {}, null, _push, _parent);
      _push(`</main>`);
    };
  }
});
const _sfc_setup$8 = _sfc_main$8.setup;
_sfc_main$8.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/Page.vue");
  return _sfc_setup$8 ? _sfc_setup$8(props, ctx) : void 0;
};
var Page = /* @__PURE__ */ _export_sfc(_sfc_main$8, [["__file", "Page.vue"]]);
const _sfc_main$7 = /* @__PURE__ */ vue.defineComponent({
  __name: "SidebarItem",
  __ssrInlineRender: true,
  props: {
    item: {
      type: Object,
      required: true
    },
    depth: {
      type: Number,
      required: false,
      default: 0
    }
  },
  setup(__props) {
    const props = __props;
    const { item, depth } = vue.toRefs(props);
    const route = vueRouter.useRoute();
    const router = vueRouter.useRouter();
    const isActive = vue.computed(() => isActiveSidebarItem(item.value, route));
    const itemClass = vue.computed(() => ({
      "sidebar-item": true,
      "sidebar-heading": depth.value === 0,
      "active": isActive.value,
      "collapsible": item.value.collapsible
    }));
    const [isOpen, toggleIsOpen] = core.useToggle(isActive.value);
    const unregisterRouterHook = router.afterEach((to2) => {
      vue.nextTick(() => {
        isOpen.value = item.value.collapsible ? isActive.value : true;
      });
    });
    vue.onBeforeUnmount(() => {
      unregisterRouterHook();
    });
    return (_ctx, _push, _parent, _attrs) => {
      var _a;
      const _component_SidebarItem = vue.resolveComponent("SidebarItem", true);
      _push(`<li${serverRenderer.ssrRenderAttrs(_attrs)}>`);
      if (vue.unref(item).link) {
        _push(serverRenderer.ssrRenderComponent(AutoLink, {
          class: vue.unref(itemClass),
          item: vue.unref(item)
        }, null, _parent));
      } else {
        _push(`<p tabindex="0" class="${serverRenderer.ssrRenderClass(vue.unref(itemClass))}">${serverRenderer.ssrInterpolate(vue.unref(item).text)} `);
        if (vue.unref(item).collapsible) {
          _push(`<span class="${serverRenderer.ssrRenderClass([vue.unref(isOpen) ? "down" : "right", "arrow"])}"></span>`);
        } else {
          _push(`<!---->`);
        }
        _push(`</p>`);
      }
      if ((_a = vue.unref(item).children) == null ? void 0 : _a.length) {
        _push(serverRenderer.ssrRenderComponent(DropdownTransition, null, {
          default: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`<ul style="${serverRenderer.ssrRenderStyle(vue.unref(isOpen) ? null : { display: "none" })}" class="sidebar-item-children"${_scopeId}><!--[-->`);
              serverRenderer.ssrRenderList(vue.unref(item).children, (child) => {
                _push2(serverRenderer.ssrRenderComponent(_component_SidebarItem, {
                  key: `${vue.unref(depth)}${child.text}${child.link}`,
                  item: child,
                  depth: vue.unref(depth) + 1
                }, null, _parent2, _scopeId));
              });
              _push2(`<!--]--></ul>`);
            } else {
              return [
                vue.withDirectives(vue.createVNode("ul", { class: "sidebar-item-children" }, [
                  (vue.openBlock(true), vue.createBlock(vue.Fragment, null, vue.renderList(vue.unref(item).children, (child) => {
                    return vue.openBlock(), vue.createBlock(_component_SidebarItem, {
                      key: `${vue.unref(depth)}${child.text}${child.link}`,
                      item: child,
                      depth: vue.unref(depth) + 1
                    }, null, 8, ["item", "depth"]);
                  }), 128))
                ], 512), [
                  [vue.vShow, vue.unref(isOpen)]
                ])
              ];
            }
          }),
          _: 1
        }, _parent));
      } else {
        _push(`<!---->`);
      }
      _push(`</li>`);
    };
  }
});
const _sfc_setup$7 = _sfc_main$7.setup;
_sfc_main$7.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/SidebarItem.vue");
  return _sfc_setup$7 ? _sfc_setup$7(props, ctx) : void 0;
};
var SidebarItem = /* @__PURE__ */ _export_sfc(_sfc_main$7, [["__file", "SidebarItem.vue"]]);
const _sfc_main$6 = /* @__PURE__ */ vue.defineComponent({
  __name: "SidebarItems",
  __ssrInlineRender: true,
  setup(__props) {
    const route = vueRouter.useRoute();
    const sidebarItems = useSidebarItems();
    vue.onMounted(() => {
      vue.watch(
        () => route.hash,
        (hash) => {
          const sidebar = document.querySelector(".sidebar");
          if (!sidebar)
            return;
          const activeSidebarItem = document.querySelector(
            `.sidebar a.sidebar-item[href="${route.path}${hash}"]`
          );
          if (!activeSidebarItem)
            return;
          const { top: sidebarTop, height: sidebarHeight } = sidebar.getBoundingClientRect();
          const { top: activeSidebarItemTop, height: activeSidebarItemHeight } = activeSidebarItem.getBoundingClientRect();
          if (activeSidebarItemTop < sidebarTop) {
            activeSidebarItem.scrollIntoView(true);
          } else if (activeSidebarItemTop + activeSidebarItemHeight > sidebarTop + sidebarHeight) {
            activeSidebarItem.scrollIntoView(false);
          }
        }
      );
    });
    return (_ctx, _push, _parent, _attrs) => {
      if (vue.unref(sidebarItems).length) {
        _push(`<ul${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "sidebar-items" }, _attrs))}><!--[-->`);
        serverRenderer.ssrRenderList(vue.unref(sidebarItems), (item) => {
          _push(serverRenderer.ssrRenderComponent(SidebarItem, {
            key: `${item.text}${item.link}`,
            item
          }, null, _parent));
        });
        _push(`<!--]--></ul>`);
      } else {
        _push(`<!---->`);
      }
    };
  }
});
const _sfc_setup$6 = _sfc_main$6.setup;
_sfc_main$6.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/SidebarItems.vue");
  return _sfc_setup$6 ? _sfc_setup$6(props, ctx) : void 0;
};
var SidebarItems = /* @__PURE__ */ _export_sfc(_sfc_main$6, [["__file", "SidebarItems.vue"]]);
const _sfc_main$5 = /* @__PURE__ */ vue.defineComponent({
  __name: "Sidebar",
  __ssrInlineRender: true,
  setup(__props) {
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<aside${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "sidebar" }, _attrs))}>`);
      _push(serverRenderer.ssrRenderComponent(NavbarItems, null, null, _parent));
      serverRenderer.ssrRenderSlot(_ctx.$slots, "top", {}, null, _push, _parent);
      _push(serverRenderer.ssrRenderComponent(SidebarItems, null, null, _parent));
      serverRenderer.ssrRenderSlot(_ctx.$slots, "bottom", {}, null, _push, _parent);
      _push(`</aside>`);
    };
  }
});
const _sfc_setup$5 = _sfc_main$5.setup;
_sfc_main$5.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/components/Sidebar.vue");
  return _sfc_setup$5 ? _sfc_setup$5(props, ctx) : void 0;
};
var Sidebar = /* @__PURE__ */ _export_sfc(_sfc_main$5, [["__file", "Sidebar.vue"]]);
const _sfc_main$4 = /* @__PURE__ */ vue.defineComponent({
  __name: "Layout",
  __ssrInlineRender: true,
  setup(__props) {
    const page = usePageData();
    const frontmatter = usePageFrontmatter();
    const themeLocale = useThemeLocaleData();
    const shouldShowNavbar = vue.computed(
      () => frontmatter.value.navbar !== false && themeLocale.value.navbar !== false
    );
    const sidebarItems = useSidebarItems();
    const isSidebarOpen = vue.ref(false);
    const toggleSidebar = (to2) => {
      isSidebarOpen.value = typeof to2 === "boolean" ? to2 : !isSidebarOpen.value;
    };
    const containerClass = vue.computed(() => [
      {
        "no-navbar": !shouldShowNavbar.value,
        "no-sidebar": !sidebarItems.value.length,
        "sidebar-open": isSidebarOpen.value
      },
      frontmatter.value.pageClass
    ]);
    let unregisterRouterHook;
    vue.onMounted(() => {
      const router = vueRouter.useRouter();
      unregisterRouterHook = router.afterEach(() => {
        toggleSidebar(false);
      });
    });
    vue.onUnmounted(() => {
      unregisterRouterHook();
    });
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({
        class: ["theme-container", vue.unref(containerClass)]
      }, _attrs))}>`);
      serverRenderer.ssrRenderSlot(_ctx.$slots, "navbar", {}, () => {
        if (vue.unref(shouldShowNavbar)) {
          _push(serverRenderer.ssrRenderComponent(Navbar, { onToggleSidebar: toggleSidebar }, {
            before: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
              if (_push2) {
                serverRenderer.ssrRenderSlot(_ctx.$slots, "navbar-before", {}, null, _push2, _parent2, _scopeId);
              } else {
                return [
                  vue.renderSlot(_ctx.$slots, "navbar-before")
                ];
              }
            }),
            after: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
              if (_push2) {
                serverRenderer.ssrRenderSlot(_ctx.$slots, "navbar-after", {}, null, _push2, _parent2, _scopeId);
              } else {
                return [
                  vue.renderSlot(_ctx.$slots, "navbar-after")
                ];
              }
            }),
            _: 3
          }, _parent));
        } else {
          _push(`<!---->`);
        }
      }, _push, _parent);
      _push(`<div class="sidebar-mask"></div>`);
      serverRenderer.ssrRenderSlot(_ctx.$slots, "sidebar", {}, () => {
        _push(serverRenderer.ssrRenderComponent(Sidebar, null, {
          top: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
            if (_push2) {
              serverRenderer.ssrRenderSlot(_ctx.$slots, "sidebar-top", {}, null, _push2, _parent2, _scopeId);
            } else {
              return [
                vue.renderSlot(_ctx.$slots, "sidebar-top")
              ];
            }
          }),
          bottom: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
            if (_push2) {
              serverRenderer.ssrRenderSlot(_ctx.$slots, "sidebar-bottom", {}, null, _push2, _parent2, _scopeId);
            } else {
              return [
                vue.renderSlot(_ctx.$slots, "sidebar-bottom")
              ];
            }
          }),
          _: 3
        }, _parent));
      }, _push, _parent);
      serverRenderer.ssrRenderSlot(_ctx.$slots, "page", {}, () => {
        if (vue.unref(frontmatter).home) {
          _push(serverRenderer.ssrRenderComponent(Home, null, null, _parent));
        } else {
          _push(serverRenderer.ssrRenderComponent(Page, {
            key: vue.unref(page).path
          }, {
            top: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
              if (_push2) {
                serverRenderer.ssrRenderSlot(_ctx.$slots, "page-top", {}, null, _push2, _parent2, _scopeId);
              } else {
                return [
                  vue.renderSlot(_ctx.$slots, "page-top")
                ];
              }
            }),
            "content-top": vue.withCtx((_2, _push2, _parent2, _scopeId) => {
              if (_push2) {
                serverRenderer.ssrRenderSlot(_ctx.$slots, "page-content-top", {}, null, _push2, _parent2, _scopeId);
              } else {
                return [
                  vue.renderSlot(_ctx.$slots, "page-content-top")
                ];
              }
            }),
            "content-bottom": vue.withCtx((_2, _push2, _parent2, _scopeId) => {
              if (_push2) {
                serverRenderer.ssrRenderSlot(_ctx.$slots, "page-content-bottom", {}, null, _push2, _parent2, _scopeId);
              } else {
                return [
                  vue.renderSlot(_ctx.$slots, "page-content-bottom")
                ];
              }
            }),
            bottom: vue.withCtx((_2, _push2, _parent2, _scopeId) => {
              if (_push2) {
                serverRenderer.ssrRenderSlot(_ctx.$slots, "page-bottom", {}, null, _push2, _parent2, _scopeId);
              } else {
                return [
                  vue.renderSlot(_ctx.$slots, "page-bottom")
                ];
              }
            }),
            _: 3
          }, _parent));
        }
      }, _push, _parent);
      _push(`</div>`);
    };
  }
});
const _sfc_setup$4 = _sfc_main$4.setup;
_sfc_main$4.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../../../node_modules/@vuepress/theme-default/lib/client/layouts/Layout.vue");
  return _sfc_setup$4 ? _sfc_setup$4(props, ctx) : void 0;
};
var ParentLayout = /* @__PURE__ */ _export_sfc(_sfc_main$4, [["__file", "Layout.vue"]]);
const _sfc_main$3 = /* @__PURE__ */ vue.defineComponent({
  __name: "Layout",
  __ssrInlineRender: true,
  setup(__props) {
    const page = usePageData();
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Icon = vue.resolveComponent("Icon");
      _push(serverRenderer.ssrRenderComponent(ParentLayout, _attrs, {
        "page-top": vue.withCtx((_2, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<div class="title w-[var(--content-width)] my-0 mx-auto"${_scopeId}><div class="flex items-center justify-between"${_scopeId}><h1${_scopeId}>${serverRenderer.ssrInterpolate(vue.unref(page).title)}</h1>`);
            _push2(serverRenderer.ssrRenderComponent(_component_Icon, {
              icon: "RollbackOutlined",
              text: "\u8FD4\u56DE",
              onClick: ($event) => _ctx.$router.go(-1),
              class: "cursor-pointer"
            }, null, _parent2, _scopeId));
            _push2(`</div>`);
            _push2(serverRenderer.ssrRenderComponent(BlogItemInfo, { page: vue.unref(page) }, null, _parent2, _scopeId));
            _push2(`</div>`);
          } else {
            return [
              vue.createVNode("div", { class: "title w-[var(--content-width)] my-0 mx-auto" }, [
                vue.createVNode("div", { class: "flex items-center justify-between" }, [
                  vue.createVNode("h1", null, vue.toDisplayString(vue.unref(page).title), 1),
                  vue.createVNode(_component_Icon, {
                    icon: "RollbackOutlined",
                    text: "\u8FD4\u56DE",
                    onClick: ($event) => _ctx.$router.go(-1),
                    class: "cursor-pointer"
                  }, null, 8, ["onClick"])
                ]),
                vue.createVNode(BlogItemInfo, { page: vue.unref(page) }, null, 8, ["page"])
              ])
            ];
          }
        }),
        _: 1
      }, _parent));
    };
  }
});
const _sfc_setup$3 = _sfc_main$3.setup;
_sfc_main$3.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/layouts/Layout.vue");
  return _sfc_setup$3 ? _sfc_setup$3(props, ctx) : void 0;
};
var Layout = /* @__PURE__ */ _export_sfc(_sfc_main$3, [["__file", "Layout.vue"]]);
var Layout$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": Layout
}, Symbol.toStringTag, { value: "Module" }));
const _sfc_main$2 = /* @__PURE__ */ vue.defineComponent({
  __name: "Icon",
  __ssrInlineRender: true,
  props: {
    icon: null,
    iconSize: { default: 18 },
    iconColor: { default: "inherit" },
    text: { default: "" },
    textColor: { default: "inherit" },
    textSize: { default: 14 },
    link: null,
    target: null
  },
  setup(__props) {
    const props = __props;
    const icons = { ...vicon__namespace };
    const { icon, iconSize, iconColor, textColor, textSize } = vue.toRefs(props);
    const iconStyle = vue.computed(() => {
      return { color: iconColor.value, width: `${iconSize.value}px`, height: `${iconSize.value}px`, fontSize: `${iconSize.value}px` };
    });
    const textStyle = vue.computed(() => {
      return { color: textColor.value, fontSize: `${textSize.value}px` };
    });
    const textRef = vue.computed(() => typeof props.text == "string" ? [props.text] : props.text);
    return (_ctx, _push, _parent, _attrs) => {
      if (__props.text) {
        _push(`<a${serverRenderer.ssrRenderAttrs(vue.mergeProps({
          href: __props.link,
          target: __props.target,
          class: "inline-flex items-center !text-[color:var(--c-text)]"
        }, _attrs))}>`);
        serverRenderer.ssrRenderVNode(_push, vue.createVNode(vue.resolveDynamicComponent(icons[vue.unref(icon)]), {
          key: vue.unref(icon),
          style: vue.unref(iconStyle)
        }, null), _parent);
        if (__props.text && __props.text.length > 0) {
          _push(`<!--[-->`);
          serverRenderer.ssrRenderList(vue.unref(textRef), (item, index2) => {
            _push(`<span class="ml-[5px]" style="${serverRenderer.ssrRenderStyle(vue.unref(textStyle))}">${serverRenderer.ssrInterpolate(item)}</span>`);
          });
          _push(`<!--]-->`);
        } else {
          _push(`<!---->`);
        }
        _push(`</a>`);
      } else {
        serverRenderer.ssrRenderVNode(_push, vue.createVNode(vue.resolveDynamicComponent(icons[vue.unref(icon)]), vue.mergeProps({
          key: vue.unref(icon),
          style: vue.unref(iconStyle)
        }, _attrs), null), _parent);
      }
    };
  }
});
const _sfc_setup$2 = _sfc_main$2.setup;
_sfc_main$2.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/global/Icon.vue");
  return _sfc_setup$2 ? _sfc_setup$2(props, ctx) : void 0;
};
var Icon = /* @__PURE__ */ _export_sfc(_sfc_main$2, [["__file", "Icon.vue"]]);
var Icon$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": Icon
}, Symbol.toStringTag, { value: "Module" }));
var Item_vue_vue_type_style_index_0_scoped_true_lang = "";
const _sfc_main$1 = /* @__PURE__ */ vue.defineComponent({
  __name: "Item",
  __ssrInlineRender: true,
  props: {
    categoryItem: null,
    color: null
  },
  setup(__props) {
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<span${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "shadow-item bg-[#fff] hover:bg-[#3eaf7c] dark:bg-[#181818] dark:hover:bg-[#3eaf7c]" }, _attrs))} data-v-d752c07a><a class="flex items-center text-[#666] py-[8px] px-[14px] dark:hover:text-[#fff]" data-v-d752c07a><span data-v-d752c07a>${serverRenderer.ssrInterpolate(__props.categoryItem.name)}</span><span class="ml-[4px] w-[1.2rem] h-[1.2rem] leading-[1.2rem] text-center text-[.7rem] text-[#fff]" style="${serverRenderer.ssrRenderStyle({ "background-color": __props.color })}" data-v-d752c07a>${serverRenderer.ssrInterpolate(__props.categoryItem.path.length)}</span></a></span>`);
    };
  }
});
const _sfc_setup$1 = _sfc_main$1.setup;
_sfc_main$1.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/global/Item.vue");
  return _sfc_setup$1 ? _sfc_setup$1(props, ctx) : void 0;
};
var Item = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["__scopeId", "data-v-d752c07a"], ["__file", "Item.vue"]]);
var Item$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": Item
}, Symbol.toStringTag, { value: "Module" }));
var Pagination_vue_vue_type_style_index_0_lang = "";
const _sfc_main = /* @__PURE__ */ vue.defineComponent({
  __name: "Pagination",
  __ssrInlineRender: true,
  props: {
    pageTotal: null,
    pageNumber: null,
    pageSize: null
  },
  emits: ["click"],
  setup(__props, { emit }) {
    const props = __props;
    const clickEvent = (pageNumber2, pageSize) => {
      emit("click", { page: pageNumber2, pageSize });
    };
    const pageCount = vue.computed(() => Math.ceil(props.pageTotal / props.pageSize));
    const jumpPageNumber = vue.ref(void 0);
    vue.watch(jumpPageNumber, (newVal) => {
      if (newVal) {
        if (parseInt(newVal) > pageCount.value) {
          alert(`\u8F93\u5165\u7684\u9875\u9762\u4E0D\u80FD\u8D85\u8FC7\uFF1A${pageCount.value}`);
        } else {
          clickEvent(parseInt(newVal), props.pageSize);
        }
      }
    });
    vue.watch(() => props.pageNumber, (newVal) => {
      newVal + "" != jumpPageNumber.value ? jumpPageNumber.value = void 0 : "";
      newVal ? clickEvent(newVal, props.pageSize) : "";
    });
    vue.watch(() => props.pageSize, (newVal) => {
      clickEvent(1, newVal);
    });
    return (_ctx, _push, _parent, _attrs) => {
      if (__props.pageTotal > 10) {
        _push(`<div${serverRenderer.ssrRenderAttrs(vue.mergeProps({ class: "w-full flex items-center justify-center" }, _attrs))}>`);
        _push(serverRenderer.ssrRenderComponent(vue.unref(Paginate__default["default"]), {
          modelValue: __props.pageNumber,
          "onUpdate:modelValue": ($event) => vue.isRef(pageNumber) ? pageNumber.value = $event : null,
          "page-count": vue.unref(pageCount),
          "prev-text": "\u4E0A\u4E00\u9875",
          "next-text": "\u4E0B\u4E00\u9875",
          "container-class": "pagination",
          "page-class": "page-item",
          "page-range": 3,
          "margin-pages": 3,
          "hide-prev-next": true
        }, null, _parent));
        _push(`<div class="my-[20px] flex ml-[50px]"><span>\u8DF3\u81F3: <input type="text"${serverRenderer.ssrRenderAttr("value", jumpPageNumber.value)} class="w-5 h-[20px]"></span><span>\u6BCF\u9875: <select class="h-[25px]"><option${serverRenderer.ssrRenderAttr("value", 10)}>10</option><option${serverRenderer.ssrRenderAttr("value", 15)}>15</option><option${serverRenderer.ssrRenderAttr("value", 20)}>20</option></select> \u6761</span><span>\u5171: ${serverRenderer.ssrInterpolate(props.pageTotal)}\u6761</span></div></div>`);
      } else {
        _push(`<!---->`);
      }
    };
  }
});
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = vue.useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../../theme/components/global/Pagination.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
var Pagination = /* @__PURE__ */ _export_sfc(_sfc_main, [["__file", "Pagination.vue"]]);
var Pagination$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": Pagination
}, Symbol.toStringTag, { value: "Module" }));
var bg1 = "/blog-docs/assets/bg1.fcb7bcd4.jpg";
var bg1$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": bg1
}, Symbol.toStringTag, { value: "Module" }));
var bg2 = "/blog-docs/assets/bg2.58810d83.jpg";
var bg2$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": bg2
}, Symbol.toStringTag, { value: "Module" }));
var bg3 = "/blog-docs/assets/bg3.415b52e9.jpg";
var bg3$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": bg3
}, Symbol.toStringTag, { value: "Module" }));
var bg4 = "/blog-docs/assets/bg4.82ef72dd.jpg";
var bg4$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": bg4
}, Symbol.toStringTag, { value: "Module" }));
var bg5 = "/blog-docs/assets/bg5.bc422601.jpg";
var bg5$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": bg5
}, Symbol.toStringTag, { value: "Module" }));
var bg6 = "/blog-docs/assets/bg6.4223ab9c.jpg";
var bg6$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  "default": bg6
}, Symbol.toStringTag, { value: "Module" }));
exports.createVueApp = createVueApp;
