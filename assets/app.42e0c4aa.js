const import_meta = {};
const scriptRel = "modulepreload";
const seen = {};
const base = "/blog-docs/";
const __vitePreload = function preload(baseModule, deps) {
  if (!deps || deps.length === 0) {
    return baseModule();
  }
  return Promise.all(deps.map((dep) => {
    dep = `${base}${dep}`;
    if (dep in seen)
      return;
    seen[dep] = true;
    const isCss = dep.endsWith(".css");
    const cssSelector = isCss ? '[rel="stylesheet"]' : "";
    if (document.querySelector(`link[href="${dep}"]${cssSelector}`)) {
      return;
    }
    const link = document.createElement("link");
    link.rel = isCss ? "stylesheet" : scriptRel;
    if (!isCss) {
      link.as = "script";
      link.crossOrigin = "";
    }
    link.href = dep;
    document.head.appendChild(link);
    if (isCss) {
      return new Promise((res, rej) => {
        link.addEventListener("load", res);
        link.addEventListener("error", () => rej(new Error(`Unable to preload CSS for ${dep}`)));
      });
    }
  })).then(() => baseModule());
};
const pagesData$1 = {
  "v-8daa1a0e": () => __vitePreload(() => import(
    /* webpackChunkName: "v-8daa1a0e" */
    "./index.html.58b319ab.js"
  ), true ? [] : void 0).then(({ data }) => data),
  "v-d5fe0c96": () => __vitePreload(() => import(
    /* webpackChunkName: "v-d5fe0c96" */
    "./index.html.702e32c6.js"
  ), true ? [] : void 0).then(({ data }) => data),
  "v-3706649a": () => __vitePreload(() => import(
    /* webpackChunkName: "v-3706649a" */
    "./404.html.459faed1.js"
  ), true ? [] : void 0).then(({ data }) => data)
};
function makeMap(str, expectsLowerCase) {
  const map2 = /* @__PURE__ */ Object.create(null);
  const list = str.split(",");
  for (let i2 = 0; i2 < list.length; i2++) {
    map2[list[i2]] = true;
  }
  return expectsLowerCase ? (val) => !!map2[val.toLowerCase()] : (val) => !!map2[val];
}
const specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;
const isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);
function includeBooleanAttr(value) {
  return !!value || value === "";
}
function normalizeStyle(value) {
  if (isArray$1(value)) {
    const res = {};
    for (let i2 = 0; i2 < value.length; i2++) {
      const item = value[i2];
      const normalized = isString$2(item) ? parseStringStyle(item) : normalizeStyle(item);
      if (normalized) {
        for (const key in normalized) {
          res[key] = normalized[key];
        }
      }
    }
    return res;
  } else if (isString$2(value)) {
    return value;
  } else if (isObject(value)) {
    return value;
  }
}
const listDelimiterRE = /;(?![^(]*\))/g;
const propertyDelimiterRE = /:(.+)/;
function parseStringStyle(cssText) {
  const ret = {};
  cssText.split(listDelimiterRE).forEach((item) => {
    if (item) {
      const tmp = item.split(propertyDelimiterRE);
      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());
    }
  });
  return ret;
}
function normalizeClass(value) {
  let res = "";
  if (isString$2(value)) {
    res = value;
  } else if (isArray$1(value)) {
    for (let i2 = 0; i2 < value.length; i2++) {
      const normalized = normalizeClass(value[i2]);
      if (normalized) {
        res += normalized + " ";
      }
    }
  } else if (isObject(value)) {
    for (const name in value) {
      if (value[name]) {
        res += name + " ";
      }
    }
  }
  return res.trim();
}
const HTML_TAGS = "html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot";
const SVG_TAGS = "svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view";
const isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);
const isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);
function looseCompareArrays(a2, b2) {
  if (a2.length !== b2.length)
    return false;
  let equal = true;
  for (let i2 = 0; equal && i2 < a2.length; i2++) {
    equal = looseEqual(a2[i2], b2[i2]);
  }
  return equal;
}
function looseEqual(a2, b2) {
  if (a2 === b2)
    return true;
  let aValidType = isDate(a2);
  let bValidType = isDate(b2);
  if (aValidType || bValidType) {
    return aValidType && bValidType ? a2.getTime() === b2.getTime() : false;
  }
  aValidType = isSymbol(a2);
  bValidType = isSymbol(b2);
  if (aValidType || bValidType) {
    return a2 === b2;
  }
  aValidType = isArray$1(a2);
  bValidType = isArray$1(b2);
  if (aValidType || bValidType) {
    return aValidType && bValidType ? looseCompareArrays(a2, b2) : false;
  }
  aValidType = isObject(a2);
  bValidType = isObject(b2);
  if (aValidType || bValidType) {
    if (!aValidType || !bValidType) {
      return false;
    }
    const aKeysCount = Object.keys(a2).length;
    const bKeysCount = Object.keys(b2).length;
    if (aKeysCount !== bKeysCount) {
      return false;
    }
    for (const key in a2) {
      const aHasKey = a2.hasOwnProperty(key);
      const bHasKey = b2.hasOwnProperty(key);
      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a2[key], b2[key])) {
        return false;
      }
    }
  }
  return String(a2) === String(b2);
}
function looseIndexOf(arr, val) {
  return arr.findIndex((item) => looseEqual(item, val));
}
const toDisplayString = (val) => {
  return isString$2(val) ? val : val == null ? "" : isArray$1(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? JSON.stringify(val, replacer, 2) : String(val);
};
const replacer = (_key, val) => {
  if (val && val.__v_isRef) {
    return replacer(_key, val.value);
  } else if (isMap(val)) {
    return {
      [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val2]) => {
        entries[`${key} =>`] = val2;
        return entries;
      }, {})
    };
  } else if (isSet(val)) {
    return {
      [`Set(${val.size})`]: [...val.values()]
    };
  } else if (isObject(val) && !isArray$1(val) && !isPlainObject$1(val)) {
    return String(val);
  }
  return val;
};
const EMPTY_OBJ = Object.freeze({});
const EMPTY_ARR = Object.freeze([]);
const NOOP = () => {
};
const NO = () => false;
const onRE = /^on[^a-z]/;
const isOn = (key) => onRE.test(key);
const isModelListener = (key) => key.startsWith("onUpdate:");
const extend = Object.assign;
const remove = (arr, el) => {
  const i2 = arr.indexOf(el);
  if (i2 > -1) {
    arr.splice(i2, 1);
  }
};
const hasOwnProperty = Object.prototype.hasOwnProperty;
const hasOwn = (val, key) => hasOwnProperty.call(val, key);
const isArray$1 = Array.isArray;
const isMap = (val) => toTypeString(val) === "[object Map]";
const isSet = (val) => toTypeString(val) === "[object Set]";
const isDate = (val) => toTypeString(val) === "[object Date]";
const isFunction = (val) => typeof val === "function";
const isString$2 = (val) => typeof val === "string";
const isSymbol = (val) => typeof val === "symbol";
const isObject = (val) => val !== null && typeof val === "object";
const isPromise = (val) => {
  return isObject(val) && isFunction(val.then) && isFunction(val.catch);
};
const objectToString = Object.prototype.toString;
const toTypeString = (value) => objectToString.call(value);
const toRawType = (value) => {
  return toTypeString(value).slice(8, -1);
};
const isPlainObject$1 = (val) => toTypeString(val) === "[object Object]";
const isIntegerKey = (key) => isString$2(key) && key !== "NaN" && key[0] !== "-" && "" + parseInt(key, 10) === key;
const isReservedProp = /* @__PURE__ */ makeMap(
  ",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"
);
const isBuiltInDirective = /* @__PURE__ */ makeMap("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo");
const cacheStringFunction = (fn2) => {
  const cache = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache[str];
    return hit || (cache[str] = fn2(str));
  };
};
const camelizeRE = /-(\w)/g;
const camelize = cacheStringFunction((str) => {
  return str.replace(camelizeRE, (_2, c2) => c2 ? c2.toUpperCase() : "");
});
const hyphenateRE = /\B([A-Z])/g;
const hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, "-$1").toLowerCase());
const capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));
const toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);
const hasChanged = (value, oldValue) => !Object.is(value, oldValue);
const invokeArrayFns = (fns, arg) => {
  for (let i2 = 0; i2 < fns.length; i2++) {
    fns[i2](arg);
  }
};
const def = (obj, key, value) => {
  Object.defineProperty(obj, key, {
    configurable: true,
    enumerable: false,
    value
  });
};
const toNumber = (val) => {
  const n2 = parseFloat(val);
  return isNaN(n2) ? val : n2;
};
let _globalThis;
const getGlobalThis = () => {
  return _globalThis || (_globalThis = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
};
function warn$2(msg, ...args) {
  console.warn(`[Vue warn] ${msg}`, ...args);
}
let activeEffectScope;
class EffectScope {
  constructor(detached = false) {
    this.active = true;
    this.effects = [];
    this.cleanups = [];
    if (!detached && activeEffectScope) {
      this.parent = activeEffectScope;
      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this) - 1;
    }
  }
  run(fn2) {
    if (this.active) {
      const currentEffectScope = activeEffectScope;
      try {
        activeEffectScope = this;
        return fn2();
      } finally {
        activeEffectScope = currentEffectScope;
      }
    } else {
      warn$2(`cannot run an inactive effect scope.`);
    }
  }
  on() {
    activeEffectScope = this;
  }
  off() {
    activeEffectScope = this.parent;
  }
  stop(fromParent) {
    if (this.active) {
      let i2, l2;
      for (i2 = 0, l2 = this.effects.length; i2 < l2; i2++) {
        this.effects[i2].stop();
      }
      for (i2 = 0, l2 = this.cleanups.length; i2 < l2; i2++) {
        this.cleanups[i2]();
      }
      if (this.scopes) {
        for (i2 = 0, l2 = this.scopes.length; i2 < l2; i2++) {
          this.scopes[i2].stop(true);
        }
      }
      if (this.parent && !fromParent) {
        const last = this.parent.scopes.pop();
        if (last && last !== this) {
          this.parent.scopes[this.index] = last;
          last.index = this.index;
        }
      }
      this.active = false;
    }
  }
}
function recordEffectScope(effect, scope = activeEffectScope) {
  if (scope && scope.active) {
    scope.effects.push(effect);
  }
}
function getCurrentScope() {
  return activeEffectScope;
}
function onScopeDispose(fn2) {
  if (activeEffectScope) {
    activeEffectScope.cleanups.push(fn2);
  } else {
    warn$2(`onScopeDispose() is called when there is no active effect scope to be associated with.`);
  }
}
const createDep = (effects) => {
  const dep = new Set(effects);
  dep.w = 0;
  dep.n = 0;
  return dep;
};
const wasTracked = (dep) => (dep.w & trackOpBit) > 0;
const newTracked = (dep) => (dep.n & trackOpBit) > 0;
const initDepMarkers = ({ deps }) => {
  if (deps.length) {
    for (let i2 = 0; i2 < deps.length; i2++) {
      deps[i2].w |= trackOpBit;
    }
  }
};
const finalizeDepMarkers = (effect) => {
  const { deps } = effect;
  if (deps.length) {
    let ptr = 0;
    for (let i2 = 0; i2 < deps.length; i2++) {
      const dep = deps[i2];
      if (wasTracked(dep) && !newTracked(dep)) {
        dep.delete(effect);
      } else {
        deps[ptr++] = dep;
      }
      dep.w &= ~trackOpBit;
      dep.n &= ~trackOpBit;
    }
    deps.length = ptr;
  }
};
const targetMap = /* @__PURE__ */ new WeakMap();
let effectTrackDepth = 0;
let trackOpBit = 1;
const maxMarkerBits = 30;
let activeEffect;
const ITERATE_KEY = Symbol("iterate");
const MAP_KEY_ITERATE_KEY = Symbol("Map key iterate");
class ReactiveEffect {
  constructor(fn2, scheduler = null, scope) {
    this.fn = fn2;
    this.scheduler = scheduler;
    this.active = true;
    this.deps = [];
    this.parent = void 0;
    recordEffectScope(this, scope);
  }
  run() {
    if (!this.active) {
      return this.fn();
    }
    let parent = activeEffect;
    let lastShouldTrack = shouldTrack;
    while (parent) {
      if (parent === this) {
        return;
      }
      parent = parent.parent;
    }
    try {
      this.parent = activeEffect;
      activeEffect = this;
      shouldTrack = true;
      trackOpBit = 1 << ++effectTrackDepth;
      if (effectTrackDepth <= maxMarkerBits) {
        initDepMarkers(this);
      } else {
        cleanupEffect(this);
      }
      return this.fn();
    } finally {
      if (effectTrackDepth <= maxMarkerBits) {
        finalizeDepMarkers(this);
      }
      trackOpBit = 1 << --effectTrackDepth;
      activeEffect = this.parent;
      shouldTrack = lastShouldTrack;
      this.parent = void 0;
      if (this.deferStop) {
        this.stop();
      }
    }
  }
  stop() {
    if (activeEffect === this) {
      this.deferStop = true;
    } else if (this.active) {
      cleanupEffect(this);
      if (this.onStop) {
        this.onStop();
      }
      this.active = false;
    }
  }
}
function cleanupEffect(effect) {
  const { deps } = effect;
  if (deps.length) {
    for (let i2 = 0; i2 < deps.length; i2++) {
      deps[i2].delete(effect);
    }
    deps.length = 0;
  }
}
let shouldTrack = true;
const trackStack = [];
function pauseTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = false;
}
function resetTracking() {
  const last = trackStack.pop();
  shouldTrack = last === void 0 ? true : last;
}
function track(target, type, key) {
  if (shouldTrack && activeEffect) {
    let depsMap = targetMap.get(target);
    if (!depsMap) {
      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());
    }
    let dep = depsMap.get(key);
    if (!dep) {
      depsMap.set(key, dep = createDep());
    }
    const eventInfo = { effect: activeEffect, target, type, key };
    trackEffects(dep, eventInfo);
  }
}
function trackEffects(dep, debuggerEventExtraInfo) {
  let shouldTrack2 = false;
  if (effectTrackDepth <= maxMarkerBits) {
    if (!newTracked(dep)) {
      dep.n |= trackOpBit;
      shouldTrack2 = !wasTracked(dep);
    }
  } else {
    shouldTrack2 = !dep.has(activeEffect);
  }
  if (shouldTrack2) {
    dep.add(activeEffect);
    activeEffect.deps.push(dep);
    if (activeEffect.onTrack) {
      activeEffect.onTrack(Object.assign({ effect: activeEffect }, debuggerEventExtraInfo));
    }
  }
}
function trigger(target, type, key, newValue, oldValue, oldTarget) {
  const depsMap = targetMap.get(target);
  if (!depsMap) {
    return;
  }
  let deps = [];
  if (type === "clear") {
    deps = [...depsMap.values()];
  } else if (key === "length" && isArray$1(target)) {
    depsMap.forEach((dep, key2) => {
      if (key2 === "length" || key2 >= newValue) {
        deps.push(dep);
      }
    });
  } else {
    if (key !== void 0) {
      deps.push(depsMap.get(key));
    }
    switch (type) {
      case "add":
        if (!isArray$1(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        } else if (isIntegerKey(key)) {
          deps.push(depsMap.get("length"));
        }
        break;
      case "delete":
        if (!isArray$1(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        }
        break;
      case "set":
        if (isMap(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
        }
        break;
    }
  }
  const eventInfo = { target, type, key, newValue, oldValue, oldTarget };
  if (deps.length === 1) {
    if (deps[0]) {
      {
        triggerEffects(deps[0], eventInfo);
      }
    }
  } else {
    const effects = [];
    for (const dep of deps) {
      if (dep) {
        effects.push(...dep);
      }
    }
    {
      triggerEffects(createDep(effects), eventInfo);
    }
  }
}
function triggerEffects(dep, debuggerEventExtraInfo) {
  const effects = isArray$1(dep) ? dep : [...dep];
  for (const effect of effects) {
    if (effect.computed) {
      triggerEffect(effect, debuggerEventExtraInfo);
    }
  }
  for (const effect of effects) {
    if (!effect.computed) {
      triggerEffect(effect, debuggerEventExtraInfo);
    }
  }
}
function triggerEffect(effect, debuggerEventExtraInfo) {
  if (effect !== activeEffect || effect.allowRecurse) {
    if (effect.onTrigger) {
      effect.onTrigger(extend({ effect }, debuggerEventExtraInfo));
    }
    if (effect.scheduler) {
      effect.scheduler();
    } else {
      effect.run();
    }
  }
}
const isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);
const builtInSymbols = new Set(
  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== "arguments" && key !== "caller").map((key) => Symbol[key]).filter(isSymbol)
);
const get = /* @__PURE__ */ createGetter();
const shallowGet = /* @__PURE__ */ createGetter(false, true);
const readonlyGet = /* @__PURE__ */ createGetter(true);
const shallowReadonlyGet = /* @__PURE__ */ createGetter(true, true);
const arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();
function createArrayInstrumentations() {
  const instrumentations = {};
  ["includes", "indexOf", "lastIndexOf"].forEach((key) => {
    instrumentations[key] = function(...args) {
      const arr = toRaw(this);
      for (let i2 = 0, l2 = this.length; i2 < l2; i2++) {
        track(arr, "get", i2 + "");
      }
      const res = arr[key](...args);
      if (res === -1 || res === false) {
        return arr[key](...args.map(toRaw));
      } else {
        return res;
      }
    };
  });
  ["push", "pop", "shift", "unshift", "splice"].forEach((key) => {
    instrumentations[key] = function(...args) {
      pauseTracking();
      const res = toRaw(this)[key].apply(this, args);
      resetTracking();
      return res;
    };
  });
  return instrumentations;
}
function createGetter(isReadonly2 = false, shallow = false) {
  return function get2(target, key, receiver) {
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_isShallow") {
      return shallow;
    } else if (key === "__v_raw" && receiver === (isReadonly2 ? shallow ? shallowReadonlyMap : readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)) {
      return target;
    }
    const targetIsArray = isArray$1(target);
    if (!isReadonly2 && targetIsArray && hasOwn(arrayInstrumentations, key)) {
      return Reflect.get(arrayInstrumentations, key, receiver);
    }
    const res = Reflect.get(target, key, receiver);
    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
      return res;
    }
    if (!isReadonly2) {
      track(target, "get", key);
    }
    if (shallow) {
      return res;
    }
    if (isRef(res)) {
      return targetIsArray && isIntegerKey(key) ? res : res.value;
    }
    if (isObject(res)) {
      return isReadonly2 ? readonly(res) : reactive(res);
    }
    return res;
  };
}
const set = /* @__PURE__ */ createSetter();
const shallowSet = /* @__PURE__ */ createSetter(true);
function createSetter(shallow = false) {
  return function set2(target, key, value, receiver) {
    let oldValue = target[key];
    if (isReadonly(oldValue) && isRef(oldValue) && !isRef(value)) {
      return false;
    }
    if (!shallow && !isReadonly(value)) {
      if (!isShallow$1(value)) {
        value = toRaw(value);
        oldValue = toRaw(oldValue);
      }
      if (!isArray$1(target) && isRef(oldValue) && !isRef(value)) {
        oldValue.value = value;
        return true;
      }
    }
    const hadKey = isArray$1(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);
    const result = Reflect.set(target, key, value, receiver);
    if (target === toRaw(receiver)) {
      if (!hadKey) {
        trigger(target, "add", key, value);
      } else if (hasChanged(value, oldValue)) {
        trigger(target, "set", key, value, oldValue);
      }
    }
    return result;
  };
}
function deleteProperty(target, key) {
  const hadKey = hasOwn(target, key);
  const oldValue = target[key];
  const result = Reflect.deleteProperty(target, key);
  if (result && hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function has(target, key) {
  const result = Reflect.has(target, key);
  if (!isSymbol(key) || !builtInSymbols.has(key)) {
    track(target, "has", key);
  }
  return result;
}
function ownKeys(target) {
  track(target, "iterate", isArray$1(target) ? "length" : ITERATE_KEY);
  return Reflect.ownKeys(target);
}
const mutableHandlers = {
  get,
  set,
  deleteProperty,
  has,
  ownKeys
};
const readonlyHandlers = {
  get: readonlyGet,
  set(target, key) {
    {
      warn$2(`Set operation on key "${String(key)}" failed: target is readonly.`, target);
    }
    return true;
  },
  deleteProperty(target, key) {
    {
      warn$2(`Delete operation on key "${String(key)}" failed: target is readonly.`, target);
    }
    return true;
  }
};
const shallowReactiveHandlers = /* @__PURE__ */ extend({}, mutableHandlers, {
  get: shallowGet,
  set: shallowSet
});
const shallowReadonlyHandlers = /* @__PURE__ */ extend({}, readonlyHandlers, {
  get: shallowReadonlyGet
});
const toShallow = (value) => value;
const getProto = (v2) => Reflect.getPrototypeOf(v2);
function get$1(target, key, isReadonly2 = false, isShallow2 = false) {
  target = target["__v_raw"];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (!isReadonly2) {
    if (key !== rawKey) {
      track(rawTarget, "get", key);
    }
    track(rawTarget, "get", rawKey);
  }
  const { has: has2 } = getProto(rawTarget);
  const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
  if (has2.call(rawTarget, key)) {
    return wrap(target.get(key));
  } else if (has2.call(rawTarget, rawKey)) {
    return wrap(target.get(rawKey));
  } else if (target !== rawTarget) {
    target.get(key);
  }
}
function has$1(key, isReadonly2 = false) {
  const target = this["__v_raw"];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (!isReadonly2) {
    if (key !== rawKey) {
      track(rawTarget, "has", key);
    }
    track(rawTarget, "has", rawKey);
  }
  return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);
}
function size(target, isReadonly2 = false) {
  target = target["__v_raw"];
  !isReadonly2 && track(toRaw(target), "iterate", ITERATE_KEY);
  return Reflect.get(target, "size", target);
}
function add(value) {
  value = toRaw(value);
  const target = toRaw(this);
  const proto = getProto(target);
  const hadKey = proto.has.call(target, value);
  if (!hadKey) {
    target.add(value);
    trigger(target, "add", value, value);
  }
  return this;
}
function set$1(key, value) {
  value = toRaw(value);
  const target = toRaw(this);
  const { has: has2, get: get2 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get2.call(target, key);
  target.set(key, value);
  if (!hadKey) {
    trigger(target, "add", key, value);
  } else if (hasChanged(value, oldValue)) {
    trigger(target, "set", key, value, oldValue);
  }
  return this;
}
function deleteEntry(key) {
  const target = toRaw(this);
  const { has: has2, get: get2 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  } else {
    checkIdentityKeys(target, has2, key);
  }
  const oldValue = get2 ? get2.call(target, key) : void 0;
  const result = target.delete(key);
  if (hadKey) {
    trigger(target, "delete", key, void 0, oldValue);
  }
  return result;
}
function clear() {
  const target = toRaw(this);
  const hadItems = target.size !== 0;
  const oldTarget = isMap(target) ? new Map(target) : new Set(target);
  const result = target.clear();
  if (hadItems) {
    trigger(target, "clear", void 0, void 0, oldTarget);
  }
  return result;
}
function createForEach(isReadonly2, isShallow2) {
  return function forEach(callback, thisArg) {
    const observed = this;
    const target = observed["__v_raw"];
    const rawTarget = toRaw(target);
    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
    !isReadonly2 && track(rawTarget, "iterate", ITERATE_KEY);
    return target.forEach((value, key) => {
      return callback.call(thisArg, wrap(value), wrap(key), observed);
    });
  };
}
function createIterableMethod(method, isReadonly2, isShallow2) {
  return function(...args) {
    const target = this["__v_raw"];
    const rawTarget = toRaw(target);
    const targetIsMap = isMap(rawTarget);
    const isPair = method === "entries" || method === Symbol.iterator && targetIsMap;
    const isKeyOnly = method === "keys" && targetIsMap;
    const innerIterator = target[method](...args);
    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
    !isReadonly2 && track(rawTarget, "iterate", isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);
    return {
      next() {
        const { value, done } = innerIterator.next();
        return done ? { value, done } : {
          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
          done
        };
      },
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function createReadonlyMethod(type) {
  return function(...args) {
    {
      const key = args[0] ? `on key "${args[0]}" ` : ``;
      console.warn(`${capitalize(type)} operation ${key}failed: target is readonly.`, toRaw(this));
    }
    return type === "delete" ? false : this;
  };
}
function createInstrumentations() {
  const mutableInstrumentations2 = {
    get(key) {
      return get$1(this, key);
    },
    get size() {
      return size(this);
    },
    has: has$1,
    add,
    set: set$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, false)
  };
  const shallowInstrumentations2 = {
    get(key) {
      return get$1(this, key, false, true);
    },
    get size() {
      return size(this);
    },
    has: has$1,
    add,
    set: set$1,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, true)
  };
  const readonlyInstrumentations2 = {
    get(key) {
      return get$1(this, key, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1.call(this, key, true);
    },
    add: createReadonlyMethod("add"),
    set: createReadonlyMethod("set"),
    delete: createReadonlyMethod("delete"),
    clear: createReadonlyMethod("clear"),
    forEach: createForEach(true, false)
  };
  const shallowReadonlyInstrumentations2 = {
    get(key) {
      return get$1(this, key, true, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has$1.call(this, key, true);
    },
    add: createReadonlyMethod("add"),
    set: createReadonlyMethod("set"),
    delete: createReadonlyMethod("delete"),
    clear: createReadonlyMethod("clear"),
    forEach: createForEach(true, true)
  };
  const iteratorMethods = ["keys", "values", "entries", Symbol.iterator];
  iteratorMethods.forEach((method) => {
    mutableInstrumentations2[method] = createIterableMethod(method, false, false);
    readonlyInstrumentations2[method] = createIterableMethod(method, true, false);
    shallowInstrumentations2[method] = createIterableMethod(method, false, true);
    shallowReadonlyInstrumentations2[method] = createIterableMethod(method, true, true);
  });
  return [
    mutableInstrumentations2,
    readonlyInstrumentations2,
    shallowInstrumentations2,
    shallowReadonlyInstrumentations2
  ];
}
const [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* @__PURE__ */ createInstrumentations();
function createInstrumentationGetter(isReadonly2, shallow) {
  const instrumentations = shallow ? isReadonly2 ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly2 ? readonlyInstrumentations : mutableInstrumentations;
  return (target, key, receiver) => {
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_raw") {
      return target;
    }
    return Reflect.get(hasOwn(instrumentations, key) && key in target ? instrumentations : target, key, receiver);
  };
}
const mutableCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, false)
};
const shallowCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, true)
};
const readonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, false)
};
const shallowReadonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, true)
};
function checkIdentityKeys(target, has2, key) {
  const rawKey = toRaw(key);
  if (rawKey !== key && has2.call(target, rawKey)) {
    const type = toRawType(target);
    console.warn(`Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`);
  }
}
const reactiveMap = /* @__PURE__ */ new WeakMap();
const shallowReactiveMap = /* @__PURE__ */ new WeakMap();
const readonlyMap = /* @__PURE__ */ new WeakMap();
const shallowReadonlyMap = /* @__PURE__ */ new WeakMap();
function targetTypeMap(rawType) {
  switch (rawType) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function getTargetType(value) {
  return value["__v_skip"] || !Object.isExtensible(value) ? 0 : targetTypeMap(toRawType(value));
}
function reactive(target) {
  if (isReadonly(target)) {
    return target;
  }
  return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);
}
function shallowReactive(target) {
  return createReactiveObject(target, false, shallowReactiveHandlers, shallowCollectionHandlers, shallowReactiveMap);
}
function readonly(target) {
  return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);
}
function shallowReadonly(target) {
  return createReactiveObject(target, true, shallowReadonlyHandlers, shallowReadonlyCollectionHandlers, shallowReadonlyMap);
}
function createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {
  if (!isObject(target)) {
    {
      console.warn(`value cannot be made reactive: ${String(target)}`);
    }
    return target;
  }
  if (target["__v_raw"] && !(isReadonly2 && target["__v_isReactive"])) {
    return target;
  }
  const existingProxy = proxyMap.get(target);
  if (existingProxy) {
    return existingProxy;
  }
  const targetType = getTargetType(target);
  if (targetType === 0) {
    return target;
  }
  const proxy = new Proxy(target, targetType === 2 ? collectionHandlers : baseHandlers);
  proxyMap.set(target, proxy);
  return proxy;
}
function isReactive(value) {
  if (isReadonly(value)) {
    return isReactive(value["__v_raw"]);
  }
  return !!(value && value["__v_isReactive"]);
}
function isReadonly(value) {
  return !!(value && value["__v_isReadonly"]);
}
function isShallow$1(value) {
  return !!(value && value["__v_isShallow"]);
}
function isProxy(value) {
  return isReactive(value) || isReadonly(value);
}
function toRaw(observed) {
  const raw = observed && observed["__v_raw"];
  return raw ? toRaw(raw) : observed;
}
function markRaw(value) {
  def(value, "__v_skip", true);
  return value;
}
const toReactive = (value) => isObject(value) ? reactive(value) : value;
const toReadonly = (value) => isObject(value) ? readonly(value) : value;
function trackRefValue(ref2) {
  if (shouldTrack && activeEffect) {
    ref2 = toRaw(ref2);
    {
      trackEffects(ref2.dep || (ref2.dep = createDep()), {
        target: ref2,
        type: "get",
        key: "value"
      });
    }
  }
}
function triggerRefValue(ref2, newVal) {
  ref2 = toRaw(ref2);
  if (ref2.dep) {
    {
      triggerEffects(ref2.dep, {
        target: ref2,
        type: "set",
        key: "value",
        newValue: newVal
      });
    }
  }
}
function isRef(r2) {
  return !!(r2 && r2.__v_isRef === true);
}
function ref(value) {
  return createRef(value, false);
}
function shallowRef(value) {
  return createRef(value, true);
}
function createRef(rawValue, shallow) {
  if (isRef(rawValue)) {
    return rawValue;
  }
  return new RefImpl(rawValue, shallow);
}
class RefImpl {
  constructor(value, __v_isShallow) {
    this.__v_isShallow = __v_isShallow;
    this.dep = void 0;
    this.__v_isRef = true;
    this._rawValue = __v_isShallow ? value : toRaw(value);
    this._value = __v_isShallow ? value : toReactive(value);
  }
  get value() {
    trackRefValue(this);
    return this._value;
  }
  set value(newVal) {
    newVal = this.__v_isShallow ? newVal : toRaw(newVal);
    if (hasChanged(newVal, this._rawValue)) {
      this._rawValue = newVal;
      this._value = this.__v_isShallow ? newVal : toReactive(newVal);
      triggerRefValue(this, newVal);
    }
  }
}
function unref(ref2) {
  return isRef(ref2) ? ref2.value : ref2;
}
const shallowUnwrapHandlers = {
  get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),
  set: (target, key, value, receiver) => {
    const oldValue = target[key];
    if (isRef(oldValue) && !isRef(value)) {
      oldValue.value = value;
      return true;
    } else {
      return Reflect.set(target, key, value, receiver);
    }
  }
};
function proxyRefs(objectWithRefs) {
  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);
}
function toRefs(object) {
  if (!isProxy(object)) {
    console.warn(`toRefs() expects a reactive object but received a plain one.`);
  }
  const ret = isArray$1(object) ? new Array(object.length) : {};
  for (const key in object) {
    ret[key] = toRef(object, key);
  }
  return ret;
}
class ObjectRefImpl {
  constructor(_object, _key, _defaultValue) {
    this._object = _object;
    this._key = _key;
    this._defaultValue = _defaultValue;
    this.__v_isRef = true;
  }
  get value() {
    const val = this._object[this._key];
    return val === void 0 ? this._defaultValue : val;
  }
  set value(newVal) {
    this._object[this._key] = newVal;
  }
}
function toRef(object, key, defaultValue) {
  const val = object[key];
  return isRef(val) ? val : new ObjectRefImpl(object, key, defaultValue);
}
class ComputedRefImpl {
  constructor(getter, _setter, isReadonly2, isSSR) {
    this._setter = _setter;
    this.dep = void 0;
    this.__v_isRef = true;
    this._dirty = true;
    this.effect = new ReactiveEffect(getter, () => {
      if (!this._dirty) {
        this._dirty = true;
        triggerRefValue(this);
      }
    });
    this.effect.computed = this;
    this.effect.active = this._cacheable = !isSSR;
    this["__v_isReadonly"] = isReadonly2;
  }
  get value() {
    const self2 = toRaw(this);
    trackRefValue(self2);
    if (self2._dirty || !self2._cacheable) {
      self2._dirty = false;
      self2._value = self2.effect.run();
    }
    return self2._value;
  }
  set value(newValue) {
    this._setter(newValue);
  }
}
function computed$1(getterOrOptions, debugOptions, isSSR = false) {
  let getter;
  let setter;
  const onlyGetter = isFunction(getterOrOptions);
  if (onlyGetter) {
    getter = getterOrOptions;
    setter = () => {
      console.warn("Write operation failed: computed value is readonly");
    };
  } else {
    getter = getterOrOptions.get;
    setter = getterOrOptions.set;
  }
  const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);
  if (debugOptions && !isSSR) {
    cRef.effect.onTrack = debugOptions.onTrack;
    cRef.effect.onTrigger = debugOptions.onTrigger;
  }
  return cRef;
}
const stack = [];
function pushWarningContext(vnode) {
  stack.push(vnode);
}
function popWarningContext() {
  stack.pop();
}
function warn$1(msg, ...args) {
  pauseTracking();
  const instance = stack.length ? stack[stack.length - 1].component : null;
  const appWarnHandler = instance && instance.appContext.config.warnHandler;
  const trace = getComponentTrace();
  if (appWarnHandler) {
    callWithErrorHandling(appWarnHandler, instance, 11, [
      msg + args.join(""),
      instance && instance.proxy,
      trace.map(({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`).join("\n"),
      trace
    ]);
  } else {
    const warnArgs = [`[Vue warn]: ${msg}`, ...args];
    if (trace.length && true) {
      warnArgs.push(`
`, ...formatTrace(trace));
    }
    console.warn(...warnArgs);
  }
  resetTracking();
}
function getComponentTrace() {
  let currentVNode = stack[stack.length - 1];
  if (!currentVNode) {
    return [];
  }
  const normalizedStack = [];
  while (currentVNode) {
    const last = normalizedStack[0];
    if (last && last.vnode === currentVNode) {
      last.recurseCount++;
    } else {
      normalizedStack.push({
        vnode: currentVNode,
        recurseCount: 0
      });
    }
    const parentInstance = currentVNode.component && currentVNode.component.parent;
    currentVNode = parentInstance && parentInstance.vnode;
  }
  return normalizedStack;
}
function formatTrace(trace) {
  const logs = [];
  trace.forEach((entry, i2) => {
    logs.push(...i2 === 0 ? [] : [`
`], ...formatTraceEntry(entry));
  });
  return logs;
}
function formatTraceEntry({ vnode, recurseCount }) {
  const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;
  const isRoot = vnode.component ? vnode.component.parent == null : false;
  const open = ` at <${formatComponentName(vnode.component, vnode.type, isRoot)}`;
  const close = `>` + postfix;
  return vnode.props ? [open, ...formatProps(vnode.props), close] : [open + close];
}
function formatProps(props) {
  const res = [];
  const keys = Object.keys(props);
  keys.slice(0, 3).forEach((key) => {
    res.push(...formatProp(key, props[key]));
  });
  if (keys.length > 3) {
    res.push(` ...`);
  }
  return res;
}
function formatProp(key, value, raw) {
  if (isString$2(value)) {
    value = JSON.stringify(value);
    return raw ? value : [`${key}=${value}`];
  } else if (typeof value === "number" || typeof value === "boolean" || value == null) {
    return raw ? value : [`${key}=${value}`];
  } else if (isRef(value)) {
    value = formatProp(key, toRaw(value.value), true);
    return raw ? value : [`${key}=Ref<`, value, `>`];
  } else if (isFunction(value)) {
    return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];
  } else {
    value = toRaw(value);
    return raw ? value : [`${key}=`, value];
  }
}
const ErrorTypeStrings = {
  ["sp"]: "serverPrefetch hook",
  ["bc"]: "beforeCreate hook",
  ["c"]: "created hook",
  ["bm"]: "beforeMount hook",
  ["m"]: "mounted hook",
  ["bu"]: "beforeUpdate hook",
  ["u"]: "updated",
  ["bum"]: "beforeUnmount hook",
  ["um"]: "unmounted hook",
  ["a"]: "activated hook",
  ["da"]: "deactivated hook",
  ["ec"]: "errorCaptured hook",
  ["rtc"]: "renderTracked hook",
  ["rtg"]: "renderTriggered hook",
  [0]: "setup function",
  [1]: "render function",
  [2]: "watcher getter",
  [3]: "watcher callback",
  [4]: "watcher cleanup function",
  [5]: "native event handler",
  [6]: "component event handler",
  [7]: "vnode hook",
  [8]: "directive hook",
  [9]: "transition hook",
  [10]: "app errorHandler",
  [11]: "app warnHandler",
  [12]: "ref function",
  [13]: "async component loader",
  [14]: "scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"
};
function callWithErrorHandling(fn2, instance, type, args) {
  let res;
  try {
    res = args ? fn2(...args) : fn2();
  } catch (err) {
    handleError(err, instance, type);
  }
  return res;
}
function callWithAsyncErrorHandling(fn2, instance, type, args) {
  if (isFunction(fn2)) {
    const res = callWithErrorHandling(fn2, instance, type, args);
    if (res && isPromise(res)) {
      res.catch((err) => {
        handleError(err, instance, type);
      });
    }
    return res;
  }
  const values = [];
  for (let i2 = 0; i2 < fn2.length; i2++) {
    values.push(callWithAsyncErrorHandling(fn2[i2], instance, type, args));
  }
  return values;
}
function handleError(err, instance, type, throwInDev = true) {
  const contextVNode = instance ? instance.vnode : null;
  if (instance) {
    let cur = instance.parent;
    const exposedInstance = instance.proxy;
    const errorInfo = ErrorTypeStrings[type];
    while (cur) {
      const errorCapturedHooks = cur.ec;
      if (errorCapturedHooks) {
        for (let i2 = 0; i2 < errorCapturedHooks.length; i2++) {
          if (errorCapturedHooks[i2](err, exposedInstance, errorInfo) === false) {
            return;
          }
        }
      }
      cur = cur.parent;
    }
    const appErrorHandler = instance.appContext.config.errorHandler;
    if (appErrorHandler) {
      callWithErrorHandling(appErrorHandler, null, 10, [err, exposedInstance, errorInfo]);
      return;
    }
  }
  logError(err, type, contextVNode, throwInDev);
}
function logError(err, type, contextVNode, throwInDev = true) {
  {
    const info = ErrorTypeStrings[type];
    if (contextVNode) {
      pushWarningContext(contextVNode);
    }
    warn$1(`Unhandled error${info ? ` during execution of ${info}` : ``}`);
    if (contextVNode) {
      popWarningContext();
    }
    if (throwInDev) {
      throw err;
    } else {
      console.error(err);
    }
  }
}
let isFlushing = false;
let isFlushPending = false;
const queue$1 = [];
let flushIndex = 0;
const pendingPreFlushCbs = [];
let activePreFlushCbs = null;
let preFlushIndex = 0;
const pendingPostFlushCbs = [];
let activePostFlushCbs = null;
let postFlushIndex = 0;
const resolvedPromise = /* @__PURE__ */ Promise.resolve();
let currentFlushPromise = null;
let currentPreFlushParentJob = null;
const RECURSION_LIMIT = 100;
function nextTick(fn2) {
  const p2 = currentFlushPromise || resolvedPromise;
  return fn2 ? p2.then(this ? fn2.bind(this) : fn2) : p2;
}
function findInsertionIndex(id) {
  let start = flushIndex + 1;
  let end = queue$1.length;
  while (start < end) {
    const middle = start + end >>> 1;
    const middleJobId = getId(queue$1[middle]);
    middleJobId < id ? start = middle + 1 : end = middle;
  }
  return start;
}
function queueJob(job) {
  if ((!queue$1.length || !queue$1.includes(job, isFlushing && job.allowRecurse ? flushIndex + 1 : flushIndex)) && job !== currentPreFlushParentJob) {
    if (job.id == null) {
      queue$1.push(job);
    } else {
      queue$1.splice(findInsertionIndex(job.id), 0, job);
    }
    queueFlush();
  }
}
function queueFlush() {
  if (!isFlushing && !isFlushPending) {
    isFlushPending = true;
    currentFlushPromise = resolvedPromise.then(flushJobs);
  }
}
function invalidateJob(job) {
  const i2 = queue$1.indexOf(job);
  if (i2 > flushIndex) {
    queue$1.splice(i2, 1);
  }
}
function queueCb(cb, activeQueue, pendingQueue, index2) {
  if (!isArray$1(cb)) {
    if (!activeQueue || !activeQueue.includes(cb, cb.allowRecurse ? index2 + 1 : index2)) {
      pendingQueue.push(cb);
    }
  } else {
    pendingQueue.push(...cb);
  }
  queueFlush();
}
function queuePreFlushCb(cb) {
  queueCb(cb, activePreFlushCbs, pendingPreFlushCbs, preFlushIndex);
}
function queuePostFlushCb(cb) {
  queueCb(cb, activePostFlushCbs, pendingPostFlushCbs, postFlushIndex);
}
function flushPreFlushCbs(seen2, parentJob = null) {
  if (pendingPreFlushCbs.length) {
    currentPreFlushParentJob = parentJob;
    activePreFlushCbs = [...new Set(pendingPreFlushCbs)];
    pendingPreFlushCbs.length = 0;
    {
      seen2 = seen2 || /* @__PURE__ */ new Map();
    }
    for (preFlushIndex = 0; preFlushIndex < activePreFlushCbs.length; preFlushIndex++) {
      if (checkRecursiveUpdates(seen2, activePreFlushCbs[preFlushIndex])) {
        continue;
      }
      activePreFlushCbs[preFlushIndex]();
    }
    activePreFlushCbs = null;
    preFlushIndex = 0;
    currentPreFlushParentJob = null;
    flushPreFlushCbs(seen2, parentJob);
  }
}
function flushPostFlushCbs(seen2) {
  flushPreFlushCbs();
  if (pendingPostFlushCbs.length) {
    const deduped = [...new Set(pendingPostFlushCbs)];
    pendingPostFlushCbs.length = 0;
    if (activePostFlushCbs) {
      activePostFlushCbs.push(...deduped);
      return;
    }
    activePostFlushCbs = deduped;
    {
      seen2 = seen2 || /* @__PURE__ */ new Map();
    }
    activePostFlushCbs.sort((a2, b2) => getId(a2) - getId(b2));
    for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {
      if (checkRecursiveUpdates(seen2, activePostFlushCbs[postFlushIndex])) {
        continue;
      }
      activePostFlushCbs[postFlushIndex]();
    }
    activePostFlushCbs = null;
    postFlushIndex = 0;
  }
}
const getId = (job) => job.id == null ? Infinity : job.id;
function flushJobs(seen2) {
  isFlushPending = false;
  isFlushing = true;
  {
    seen2 = seen2 || /* @__PURE__ */ new Map();
  }
  flushPreFlushCbs(seen2);
  queue$1.sort((a2, b2) => getId(a2) - getId(b2));
  const check = (job) => checkRecursiveUpdates(seen2, job);
  try {
    for (flushIndex = 0; flushIndex < queue$1.length; flushIndex++) {
      const job = queue$1[flushIndex];
      if (job && job.active !== false) {
        if (check(job)) {
          continue;
        }
        callWithErrorHandling(job, null, 14);
      }
    }
  } finally {
    flushIndex = 0;
    queue$1.length = 0;
    flushPostFlushCbs(seen2);
    isFlushing = false;
    currentFlushPromise = null;
    if (queue$1.length || pendingPreFlushCbs.length || pendingPostFlushCbs.length) {
      flushJobs(seen2);
    }
  }
}
function checkRecursiveUpdates(seen2, fn2) {
  if (!seen2.has(fn2)) {
    seen2.set(fn2, 1);
  } else {
    const count = seen2.get(fn2);
    if (count > RECURSION_LIMIT) {
      const instance = fn2.ownerInstance;
      const componentName = instance && getComponentName(instance.type);
      warn$1(`Maximum recursive updates exceeded${componentName ? ` in component <${componentName}>` : ``}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`);
      return true;
    } else {
      seen2.set(fn2, count + 1);
    }
  }
}
let isHmrUpdating = false;
const hmrDirtyComponents = /* @__PURE__ */ new Set();
{
  getGlobalThis().__VUE_HMR_RUNTIME__ = {
    createRecord: tryWrap(createRecord),
    rerender: tryWrap(rerender),
    reload: tryWrap(reload)
  };
}
const map = /* @__PURE__ */ new Map();
function registerHMR(instance) {
  const id = instance.type.__hmrId;
  let record = map.get(id);
  if (!record) {
    createRecord(id, instance.type);
    record = map.get(id);
  }
  record.instances.add(instance);
}
function unregisterHMR(instance) {
  map.get(instance.type.__hmrId).instances.delete(instance);
}
function createRecord(id, initialDef) {
  if (map.has(id)) {
    return false;
  }
  map.set(id, {
    initialDef: normalizeClassComponent(initialDef),
    instances: /* @__PURE__ */ new Set()
  });
  return true;
}
function normalizeClassComponent(component) {
  return isClassComponent(component) ? component.__vccOpts : component;
}
function rerender(id, newRender) {
  const record = map.get(id);
  if (!record) {
    return;
  }
  record.initialDef.render = newRender;
  [...record.instances].forEach((instance) => {
    if (newRender) {
      instance.render = newRender;
      normalizeClassComponent(instance.type).render = newRender;
    }
    instance.renderCache = [];
    isHmrUpdating = true;
    instance.update();
    isHmrUpdating = false;
  });
}
function reload(id, newComp) {
  const record = map.get(id);
  if (!record)
    return;
  newComp = normalizeClassComponent(newComp);
  updateComponentDef(record.initialDef, newComp);
  const instances = [...record.instances];
  for (const instance of instances) {
    const oldComp = normalizeClassComponent(instance.type);
    if (!hmrDirtyComponents.has(oldComp)) {
      if (oldComp !== record.initialDef) {
        updateComponentDef(oldComp, newComp);
      }
      hmrDirtyComponents.add(oldComp);
    }
    instance.appContext.optionsCache.delete(instance.type);
    if (instance.ceReload) {
      hmrDirtyComponents.add(oldComp);
      instance.ceReload(newComp.styles);
      hmrDirtyComponents.delete(oldComp);
    } else if (instance.parent) {
      queueJob(instance.parent.update);
      if (instance.parent.type.__asyncLoader && instance.parent.ceReload) {
        instance.parent.ceReload(newComp.styles);
      }
    } else if (instance.appContext.reload) {
      instance.appContext.reload();
    } else if (typeof window !== "undefined") {
      window.location.reload();
    } else {
      console.warn("[HMR] Root or manually mounted instance modified. Full reload required.");
    }
  }
  queuePostFlushCb(() => {
    for (const instance of instances) {
      hmrDirtyComponents.delete(normalizeClassComponent(instance.type));
    }
  });
}
function updateComponentDef(oldComp, newComp) {
  extend(oldComp, newComp);
  for (const key in oldComp) {
    if (key !== "__file" && !(key in newComp)) {
      delete oldComp[key];
    }
  }
}
function tryWrap(fn2) {
  return (id, arg) => {
    try {
      return fn2(id, arg);
    } catch (e2) {
      console.error(e2);
      console.warn(`[HMR] Something went wrong during Vue component hot-reload. Full reload required.`);
    }
  };
}
let devtools;
let buffer = [];
let devtoolsNotInstalled = false;
function emit(event, ...args) {
  if (devtools) {
    devtools.emit(event, ...args);
  } else if (!devtoolsNotInstalled) {
    buffer.push({ event, args });
  }
}
function setDevtoolsHook(hook, target) {
  var _a2, _b;
  devtools = hook;
  if (devtools) {
    devtools.enabled = true;
    buffer.forEach(({ event, args }) => devtools.emit(event, ...args));
    buffer = [];
  } else if (typeof window !== "undefined" && window.HTMLElement && !((_b = (_a2 = window.navigator) === null || _a2 === void 0 ? void 0 : _a2.userAgent) === null || _b === void 0 ? void 0 : _b.includes("jsdom"))) {
    const replay = target.__VUE_DEVTOOLS_HOOK_REPLAY__ = target.__VUE_DEVTOOLS_HOOK_REPLAY__ || [];
    replay.push((newHook) => {
      setDevtoolsHook(newHook, target);
    });
    setTimeout(() => {
      if (!devtools) {
        target.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;
        devtoolsNotInstalled = true;
        buffer = [];
      }
    }, 3e3);
  } else {
    devtoolsNotInstalled = true;
    buffer = [];
  }
}
function devtoolsInitApp(app, version2) {
  emit("app:init", app, version2, {
    Fragment,
    Text,
    Comment,
    Static
  });
}
function devtoolsUnmountApp(app) {
  emit("app:unmount", app);
}
const devtoolsComponentAdded = /* @__PURE__ */ createDevtoolsComponentHook("component:added");
const devtoolsComponentUpdated = /* @__PURE__ */ createDevtoolsComponentHook("component:updated");
const devtoolsComponentRemoved = /* @__PURE__ */ createDevtoolsComponentHook("component:removed");
function createDevtoolsComponentHook(hook) {
  return (component) => {
    emit(hook, component.appContext.app, component.uid, component.parent ? component.parent.uid : void 0, component);
  };
}
const devtoolsPerfStart = /* @__PURE__ */ createDevtoolsPerformanceHook("perf:start");
const devtoolsPerfEnd = /* @__PURE__ */ createDevtoolsPerformanceHook("perf:end");
function createDevtoolsPerformanceHook(hook) {
  return (component, type, time) => {
    emit(hook, component.appContext.app, component.uid, component, type, time);
  };
}
function devtoolsComponentEmit(component, event, params) {
  emit("component:emit", component.appContext.app, component, event, params);
}
function emit$1(instance, event, ...rawArgs) {
  if (instance.isUnmounted)
    return;
  const props = instance.vnode.props || EMPTY_OBJ;
  {
    const { emitsOptions, propsOptions: [propsOptions] } = instance;
    if (emitsOptions) {
      if (!(event in emitsOptions) && true) {
        if (!propsOptions || !(toHandlerKey(event) in propsOptions)) {
          warn$1(`Component emitted event "${event}" but it is neither declared in the emits option nor as an "${toHandlerKey(event)}" prop.`);
        }
      } else {
        const validator = emitsOptions[event];
        if (isFunction(validator)) {
          const isValid = validator(...rawArgs);
          if (!isValid) {
            warn$1(`Invalid event arguments: event validation failed for event "${event}".`);
          }
        }
      }
    }
  }
  let args = rawArgs;
  const isModelListener2 = event.startsWith("update:");
  const modelArg = isModelListener2 && event.slice(7);
  if (modelArg && modelArg in props) {
    const modifiersKey = `${modelArg === "modelValue" ? "model" : modelArg}Modifiers`;
    const { number, trim } = props[modifiersKey] || EMPTY_OBJ;
    if (trim) {
      args = rawArgs.map((a2) => a2.trim());
    }
    if (number) {
      args = rawArgs.map(toNumber);
    }
  }
  {
    devtoolsComponentEmit(instance, event, args);
  }
  {
    const lowerCaseEvent = event.toLowerCase();
    if (lowerCaseEvent !== event && props[toHandlerKey(lowerCaseEvent)]) {
      warn$1(`Event "${lowerCaseEvent}" is emitted in component ${formatComponentName(instance, instance.type)} but the handler is registered for "${event}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${hyphenate(event)}" instead of "${event}".`);
    }
  }
  let handlerName;
  let handler = props[handlerName = toHandlerKey(event)] || props[handlerName = toHandlerKey(camelize(event))];
  if (!handler && isModelListener2) {
    handler = props[handlerName = toHandlerKey(hyphenate(event))];
  }
  if (handler) {
    callWithAsyncErrorHandling(handler, instance, 6, args);
  }
  const onceHandler = props[handlerName + `Once`];
  if (onceHandler) {
    if (!instance.emitted) {
      instance.emitted = {};
    } else if (instance.emitted[handlerName]) {
      return;
    }
    instance.emitted[handlerName] = true;
    callWithAsyncErrorHandling(onceHandler, instance, 6, args);
  }
}
function normalizeEmitsOptions(comp, appContext, asMixin = false) {
  const cache = appContext.emitsCache;
  const cached = cache.get(comp);
  if (cached !== void 0) {
    return cached;
  }
  const raw = comp.emits;
  let normalized = {};
  let hasExtends = false;
  if (!isFunction(comp)) {
    const extendEmits = (raw2) => {
      const normalizedFromExtend = normalizeEmitsOptions(raw2, appContext, true);
      if (normalizedFromExtend) {
        hasExtends = true;
        extend(normalized, normalizedFromExtend);
      }
    };
    if (!asMixin && appContext.mixins.length) {
      appContext.mixins.forEach(extendEmits);
    }
    if (comp.extends) {
      extendEmits(comp.extends);
    }
    if (comp.mixins) {
      comp.mixins.forEach(extendEmits);
    }
  }
  if (!raw && !hasExtends) {
    cache.set(comp, null);
    return null;
  }
  if (isArray$1(raw)) {
    raw.forEach((key) => normalized[key] = null);
  } else {
    extend(normalized, raw);
  }
  cache.set(comp, normalized);
  return normalized;
}
function isEmitListener(options2, key) {
  if (!options2 || !isOn(key)) {
    return false;
  }
  key = key.slice(2).replace(/Once$/, "");
  return hasOwn(options2, key[0].toLowerCase() + key.slice(1)) || hasOwn(options2, hyphenate(key)) || hasOwn(options2, key);
}
let currentRenderingInstance = null;
let currentScopeId = null;
function setCurrentRenderingInstance(instance) {
  const prev = currentRenderingInstance;
  currentRenderingInstance = instance;
  currentScopeId = instance && instance.type.__scopeId || null;
  return prev;
}
function pushScopeId(id) {
  currentScopeId = id;
}
function popScopeId() {
  currentScopeId = null;
}
function withCtx(fn2, ctx = currentRenderingInstance, isNonScopedSlot) {
  if (!ctx)
    return fn2;
  if (fn2._n) {
    return fn2;
  }
  const renderFnWithContext = (...args) => {
    if (renderFnWithContext._d) {
      setBlockTracking(-1);
    }
    const prevInstance = setCurrentRenderingInstance(ctx);
    const res = fn2(...args);
    setCurrentRenderingInstance(prevInstance);
    if (renderFnWithContext._d) {
      setBlockTracking(1);
    }
    {
      devtoolsComponentUpdated(ctx);
    }
    return res;
  };
  renderFnWithContext._n = true;
  renderFnWithContext._c = true;
  renderFnWithContext._d = true;
  return renderFnWithContext;
}
let accessedAttrs = false;
function markAttrsAccessed() {
  accessedAttrs = true;
}
function renderComponentRoot(instance) {
  const { type: Component, vnode, proxy, withProxy, props, propsOptions: [propsOptions], slots, attrs, emit: emit2, render, renderCache, data, setupState, ctx, inheritAttrs } = instance;
  let result;
  let fallthroughAttrs;
  const prev = setCurrentRenderingInstance(instance);
  {
    accessedAttrs = false;
  }
  try {
    if (vnode.shapeFlag & 4) {
      const proxyToUse = withProxy || proxy;
      result = normalizeVNode(render.call(proxyToUse, proxyToUse, renderCache, props, setupState, data, ctx));
      fallthroughAttrs = attrs;
    } else {
      const render2 = Component;
      if (attrs === props) {
        markAttrsAccessed();
      }
      result = normalizeVNode(render2.length > 1 ? render2(props, true ? {
        get attrs() {
          markAttrsAccessed();
          return attrs;
        },
        slots,
        emit: emit2
      } : { attrs, slots, emit: emit2 }) : render2(props, null));
      fallthroughAttrs = Component.props ? attrs : getFunctionalFallthrough(attrs);
    }
  } catch (err) {
    blockStack.length = 0;
    handleError(err, instance, 1);
    result = createVNode(Comment);
  }
  let root = result;
  let setRoot = void 0;
  if (result.patchFlag > 0 && result.patchFlag & 2048) {
    [root, setRoot] = getChildRoot(result);
  }
  if (fallthroughAttrs && inheritAttrs !== false) {
    const keys = Object.keys(fallthroughAttrs);
    const { shapeFlag } = root;
    if (keys.length) {
      if (shapeFlag & (1 | 6)) {
        if (propsOptions && keys.some(isModelListener)) {
          fallthroughAttrs = filterModelListeners(fallthroughAttrs, propsOptions);
        }
        root = cloneVNode(root, fallthroughAttrs);
      } else if (!accessedAttrs && root.type !== Comment) {
        const allAttrs = Object.keys(attrs);
        const eventAttrs = [];
        const extraAttrs = [];
        for (let i2 = 0, l2 = allAttrs.length; i2 < l2; i2++) {
          const key = allAttrs[i2];
          if (isOn(key)) {
            if (!isModelListener(key)) {
              eventAttrs.push(key[2].toLowerCase() + key.slice(3));
            }
          } else {
            extraAttrs.push(key);
          }
        }
        if (extraAttrs.length) {
          warn$1(`Extraneous non-props attributes (${extraAttrs.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`);
        }
        if (eventAttrs.length) {
          warn$1(`Extraneous non-emits event listeners (${eventAttrs.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`);
        }
      }
    }
  }
  if (vnode.dirs) {
    if (!isElementRoot(root)) {
      warn$1(`Runtime directive used on component with non-element root node. The directives will not function as intended.`);
    }
    root = cloneVNode(root);
    root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;
  }
  if (vnode.transition) {
    if (!isElementRoot(root)) {
      warn$1(`Component inside <Transition> renders non-element root node that cannot be animated.`);
    }
    root.transition = vnode.transition;
  }
  if (setRoot) {
    setRoot(root);
  } else {
    result = root;
  }
  setCurrentRenderingInstance(prev);
  return result;
}
const getChildRoot = (vnode) => {
  const rawChildren = vnode.children;
  const dynamicChildren = vnode.dynamicChildren;
  const childRoot = filterSingleRoot(rawChildren);
  if (!childRoot) {
    return [vnode, void 0];
  }
  const index2 = rawChildren.indexOf(childRoot);
  const dynamicIndex = dynamicChildren ? dynamicChildren.indexOf(childRoot) : -1;
  const setRoot = (updatedRoot) => {
    rawChildren[index2] = updatedRoot;
    if (dynamicChildren) {
      if (dynamicIndex > -1) {
        dynamicChildren[dynamicIndex] = updatedRoot;
      } else if (updatedRoot.patchFlag > 0) {
        vnode.dynamicChildren = [...dynamicChildren, updatedRoot];
      }
    }
  };
  return [normalizeVNode(childRoot), setRoot];
};
function filterSingleRoot(children) {
  let singleRoot;
  for (let i2 = 0; i2 < children.length; i2++) {
    const child = children[i2];
    if (isVNode(child)) {
      if (child.type !== Comment || child.children === "v-if") {
        if (singleRoot) {
          return;
        } else {
          singleRoot = child;
        }
      }
    } else {
      return;
    }
  }
  return singleRoot;
}
const getFunctionalFallthrough = (attrs) => {
  let res;
  for (const key in attrs) {
    if (key === "class" || key === "style" || isOn(key)) {
      (res || (res = {}))[key] = attrs[key];
    }
  }
  return res;
};
const filterModelListeners = (attrs, props) => {
  const res = {};
  for (const key in attrs) {
    if (!isModelListener(key) || !(key.slice(9) in props)) {
      res[key] = attrs[key];
    }
  }
  return res;
};
const isElementRoot = (vnode) => {
  return vnode.shapeFlag & (6 | 1) || vnode.type === Comment;
};
function shouldUpdateComponent(prevVNode, nextVNode, optimized) {
  const { props: prevProps, children: prevChildren, component } = prevVNode;
  const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;
  const emits = component.emitsOptions;
  if ((prevChildren || nextChildren) && isHmrUpdating) {
    return true;
  }
  if (nextVNode.dirs || nextVNode.transition) {
    return true;
  }
  if (optimized && patchFlag >= 0) {
    if (patchFlag & 1024) {
      return true;
    }
    if (patchFlag & 16) {
      if (!prevProps) {
        return !!nextProps;
      }
      return hasPropsChanged(prevProps, nextProps, emits);
    } else if (patchFlag & 8) {
      const dynamicProps = nextVNode.dynamicProps;
      for (let i2 = 0; i2 < dynamicProps.length; i2++) {
        const key = dynamicProps[i2];
        if (nextProps[key] !== prevProps[key] && !isEmitListener(emits, key)) {
          return true;
        }
      }
    }
  } else {
    if (prevChildren || nextChildren) {
      if (!nextChildren || !nextChildren.$stable) {
        return true;
      }
    }
    if (prevProps === nextProps) {
      return false;
    }
    if (!prevProps) {
      return !!nextProps;
    }
    if (!nextProps) {
      return true;
    }
    return hasPropsChanged(prevProps, nextProps, emits);
  }
  return false;
}
function hasPropsChanged(prevProps, nextProps, emitsOptions) {
  const nextKeys = Object.keys(nextProps);
  if (nextKeys.length !== Object.keys(prevProps).length) {
    return true;
  }
  for (let i2 = 0; i2 < nextKeys.length; i2++) {
    const key = nextKeys[i2];
    if (nextProps[key] !== prevProps[key] && !isEmitListener(emitsOptions, key)) {
      return true;
    }
  }
  return false;
}
function updateHOCHostEl({ vnode, parent }, el) {
  while (parent && parent.subTree === vnode) {
    (vnode = parent.vnode).el = el;
    parent = parent.parent;
  }
}
const isSuspense = (type) => type.__isSuspense;
function queueEffectWithSuspense(fn2, suspense) {
  if (suspense && suspense.pendingBranch) {
    if (isArray$1(fn2)) {
      suspense.effects.push(...fn2);
    } else {
      suspense.effects.push(fn2);
    }
  } else {
    queuePostFlushCb(fn2);
  }
}
function provide(key, value) {
  if (!currentInstance) {
    {
      warn$1(`provide() can only be used inside setup().`);
    }
  } else {
    let provides = currentInstance.provides;
    const parentProvides = currentInstance.parent && currentInstance.parent.provides;
    if (parentProvides === provides) {
      provides = currentInstance.provides = Object.create(parentProvides);
    }
    provides[key] = value;
  }
}
function inject(key, defaultValue, treatDefaultAsFactory = false) {
  const instance = currentInstance || currentRenderingInstance;
  if (instance) {
    const provides = instance.parent == null ? instance.vnode.appContext && instance.vnode.appContext.provides : instance.parent.provides;
    if (provides && key in provides) {
      return provides[key];
    } else if (arguments.length > 1) {
      return treatDefaultAsFactory && isFunction(defaultValue) ? defaultValue.call(instance.proxy) : defaultValue;
    } else {
      warn$1(`injection "${String(key)}" not found.`);
    }
  } else {
    warn$1(`inject() can only be used inside setup() or functional components.`);
  }
}
function watchEffect(effect, options2) {
  return doWatch(effect, null, options2);
}
function watchPostEffect(effect, options2) {
  return doWatch(effect, null, Object.assign(Object.assign({}, options2), { flush: "post" }));
}
const INITIAL_WATCHER_VALUE = {};
function watch(source, cb, options2) {
  if (!isFunction(cb)) {
    warn$1(`\`watch(fn, options?)\` signature has been moved to a separate API. Use \`watchEffect(fn, options?)\` instead. \`watch\` now only supports \`watch(source, cb, options?) signature.`);
  }
  return doWatch(source, cb, options2);
}
function doWatch(source, cb, { immediate, deep, flush, onTrack, onTrigger } = EMPTY_OBJ) {
  if (!cb) {
    if (immediate !== void 0) {
      warn$1(`watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.`);
    }
    if (deep !== void 0) {
      warn$1(`watch() "deep" option is only respected when using the watch(source, callback, options?) signature.`);
    }
  }
  const warnInvalidSource = (s2) => {
    warn$1(`Invalid watch source: `, s2, `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`);
  };
  const instance = currentInstance;
  let getter;
  let forceTrigger = false;
  let isMultiSource = false;
  if (isRef(source)) {
    getter = () => source.value;
    forceTrigger = isShallow$1(source);
  } else if (isReactive(source)) {
    getter = () => source;
    deep = true;
  } else if (isArray$1(source)) {
    isMultiSource = true;
    forceTrigger = source.some((s2) => isReactive(s2) || isShallow$1(s2));
    getter = () => source.map((s2) => {
      if (isRef(s2)) {
        return s2.value;
      } else if (isReactive(s2)) {
        return traverse(s2);
      } else if (isFunction(s2)) {
        return callWithErrorHandling(s2, instance, 2);
      } else {
        warnInvalidSource(s2);
      }
    });
  } else if (isFunction(source)) {
    if (cb) {
      getter = () => callWithErrorHandling(source, instance, 2);
    } else {
      getter = () => {
        if (instance && instance.isUnmounted) {
          return;
        }
        if (cleanup) {
          cleanup();
        }
        return callWithAsyncErrorHandling(source, instance, 3, [onCleanup]);
      };
    }
  } else {
    getter = NOOP;
    warnInvalidSource(source);
  }
  if (cb && deep) {
    const baseGetter = getter;
    getter = () => traverse(baseGetter());
  }
  let cleanup;
  let onCleanup = (fn2) => {
    cleanup = effect.onStop = () => {
      callWithErrorHandling(fn2, instance, 4);
    };
  };
  if (isInSSRComponentSetup) {
    onCleanup = NOOP;
    if (!cb) {
      getter();
    } else if (immediate) {
      callWithAsyncErrorHandling(cb, instance, 3, [
        getter(),
        isMultiSource ? [] : void 0,
        onCleanup
      ]);
    }
    return NOOP;
  }
  let oldValue = isMultiSource ? [] : INITIAL_WATCHER_VALUE;
  const job = () => {
    if (!effect.active) {
      return;
    }
    if (cb) {
      const newValue = effect.run();
      if (deep || forceTrigger || (isMultiSource ? newValue.some((v2, i2) => hasChanged(v2, oldValue[i2])) : hasChanged(newValue, oldValue)) || false) {
        if (cleanup) {
          cleanup();
        }
        callWithAsyncErrorHandling(cb, instance, 3, [
          newValue,
          oldValue === INITIAL_WATCHER_VALUE ? void 0 : oldValue,
          onCleanup
        ]);
        oldValue = newValue;
      }
    } else {
      effect.run();
    }
  };
  job.allowRecurse = !!cb;
  let scheduler;
  if (flush === "sync") {
    scheduler = job;
  } else if (flush === "post") {
    scheduler = () => queuePostRenderEffect(job, instance && instance.suspense);
  } else {
    scheduler = () => queuePreFlushCb(job);
  }
  const effect = new ReactiveEffect(getter, scheduler);
  {
    effect.onTrack = onTrack;
    effect.onTrigger = onTrigger;
  }
  if (cb) {
    if (immediate) {
      job();
    } else {
      oldValue = effect.run();
    }
  } else if (flush === "post") {
    queuePostRenderEffect(effect.run.bind(effect), instance && instance.suspense);
  } else {
    effect.run();
  }
  return () => {
    effect.stop();
    if (instance && instance.scope) {
      remove(instance.scope.effects, effect);
    }
  };
}
function instanceWatch(source, value, options2) {
  const publicThis = this.proxy;
  const getter = isString$2(source) ? source.includes(".") ? createPathGetter(publicThis, source) : () => publicThis[source] : source.bind(publicThis, publicThis);
  let cb;
  if (isFunction(value)) {
    cb = value;
  } else {
    cb = value.handler;
    options2 = value;
  }
  const cur = currentInstance;
  setCurrentInstance(this);
  const res = doWatch(getter, cb.bind(publicThis), options2);
  if (cur) {
    setCurrentInstance(cur);
  } else {
    unsetCurrentInstance();
  }
  return res;
}
function createPathGetter(ctx, path) {
  const segments = path.split(".");
  return () => {
    let cur = ctx;
    for (let i2 = 0; i2 < segments.length && cur; i2++) {
      cur = cur[segments[i2]];
    }
    return cur;
  };
}
function traverse(value, seen2) {
  if (!isObject(value) || value["__v_skip"]) {
    return value;
  }
  seen2 = seen2 || /* @__PURE__ */ new Set();
  if (seen2.has(value)) {
    return value;
  }
  seen2.add(value);
  if (isRef(value)) {
    traverse(value.value, seen2);
  } else if (isArray$1(value)) {
    for (let i2 = 0; i2 < value.length; i2++) {
      traverse(value[i2], seen2);
    }
  } else if (isSet(value) || isMap(value)) {
    value.forEach((v2) => {
      traverse(v2, seen2);
    });
  } else if (isPlainObject$1(value)) {
    for (const key in value) {
      traverse(value[key], seen2);
    }
  }
  return value;
}
function useTransitionState() {
  const state = {
    isMounted: false,
    isLeaving: false,
    isUnmounting: false,
    leavingVNodes: /* @__PURE__ */ new Map()
  };
  onMounted(() => {
    state.isMounted = true;
  });
  onBeforeUnmount(() => {
    state.isUnmounting = true;
  });
  return state;
}
const TransitionHookValidator = [Function, Array];
const BaseTransitionImpl = {
  name: `BaseTransition`,
  props: {
    mode: String,
    appear: Boolean,
    persisted: Boolean,
    onBeforeEnter: TransitionHookValidator,
    onEnter: TransitionHookValidator,
    onAfterEnter: TransitionHookValidator,
    onEnterCancelled: TransitionHookValidator,
    onBeforeLeave: TransitionHookValidator,
    onLeave: TransitionHookValidator,
    onAfterLeave: TransitionHookValidator,
    onLeaveCancelled: TransitionHookValidator,
    onBeforeAppear: TransitionHookValidator,
    onAppear: TransitionHookValidator,
    onAfterAppear: TransitionHookValidator,
    onAppearCancelled: TransitionHookValidator
  },
  setup(props, { slots }) {
    const instance = getCurrentInstance();
    const state = useTransitionState();
    let prevTransitionKey;
    return () => {
      const children = slots.default && getTransitionRawChildren(slots.default(), true);
      if (!children || !children.length) {
        return;
      }
      let child = children[0];
      if (children.length > 1) {
        let hasFound = false;
        for (const c2 of children) {
          if (c2.type !== Comment) {
            if (hasFound) {
              warn$1("<transition> can only be used on a single element or component. Use <transition-group> for lists.");
              break;
            }
            child = c2;
            hasFound = true;
          }
        }
      }
      const rawProps = toRaw(props);
      const { mode } = rawProps;
      if (mode && mode !== "in-out" && mode !== "out-in" && mode !== "default") {
        warn$1(`invalid <transition> mode: ${mode}`);
      }
      if (state.isLeaving) {
        return emptyPlaceholder(child);
      }
      const innerChild = getKeepAliveChild(child);
      if (!innerChild) {
        return emptyPlaceholder(child);
      }
      const enterHooks = resolveTransitionHooks(innerChild, rawProps, state, instance);
      setTransitionHooks(innerChild, enterHooks);
      const oldChild = instance.subTree;
      const oldInnerChild = oldChild && getKeepAliveChild(oldChild);
      let transitionKeyChanged = false;
      const { getTransitionKey } = innerChild.type;
      if (getTransitionKey) {
        const key = getTransitionKey();
        if (prevTransitionKey === void 0) {
          prevTransitionKey = key;
        } else if (key !== prevTransitionKey) {
          prevTransitionKey = key;
          transitionKeyChanged = true;
        }
      }
      if (oldInnerChild && oldInnerChild.type !== Comment && (!isSameVNodeType(innerChild, oldInnerChild) || transitionKeyChanged)) {
        const leavingHooks = resolveTransitionHooks(oldInnerChild, rawProps, state, instance);
        setTransitionHooks(oldInnerChild, leavingHooks);
        if (mode === "out-in") {
          state.isLeaving = true;
          leavingHooks.afterLeave = () => {
            state.isLeaving = false;
            instance.update();
          };
          return emptyPlaceholder(child);
        } else if (mode === "in-out" && innerChild.type !== Comment) {
          leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {
            const leavingVNodesCache = getLeavingNodesForType(state, oldInnerChild);
            leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;
            el._leaveCb = () => {
              earlyRemove();
              el._leaveCb = void 0;
              delete enterHooks.delayedLeave;
            };
            enterHooks.delayedLeave = delayedLeave;
          };
        }
      }
      return child;
    };
  }
};
const BaseTransition = BaseTransitionImpl;
function getLeavingNodesForType(state, vnode) {
  const { leavingVNodes } = state;
  let leavingVNodesCache = leavingVNodes.get(vnode.type);
  if (!leavingVNodesCache) {
    leavingVNodesCache = /* @__PURE__ */ Object.create(null);
    leavingVNodes.set(vnode.type, leavingVNodesCache);
  }
  return leavingVNodesCache;
}
function resolveTransitionHooks(vnode, props, state, instance) {
  const { appear, mode, persisted = false, onBeforeEnter, onEnter, onAfterEnter, onEnterCancelled, onBeforeLeave, onLeave, onAfterLeave, onLeaveCancelled, onBeforeAppear, onAppear, onAfterAppear, onAppearCancelled } = props;
  const key = String(vnode.key);
  const leavingVNodesCache = getLeavingNodesForType(state, vnode);
  const callHook2 = (hook, args) => {
    hook && callWithAsyncErrorHandling(hook, instance, 9, args);
  };
  const callAsyncHook = (hook, args) => {
    const done = args[1];
    callHook2(hook, args);
    if (isArray$1(hook)) {
      if (hook.every((hook2) => hook2.length <= 1))
        done();
    } else if (hook.length <= 1) {
      done();
    }
  };
  const hooks = {
    mode,
    persisted,
    beforeEnter(el) {
      let hook = onBeforeEnter;
      if (!state.isMounted) {
        if (appear) {
          hook = onBeforeAppear || onBeforeEnter;
        } else {
          return;
        }
      }
      if (el._leaveCb) {
        el._leaveCb(true);
      }
      const leavingVNode = leavingVNodesCache[key];
      if (leavingVNode && isSameVNodeType(vnode, leavingVNode) && leavingVNode.el._leaveCb) {
        leavingVNode.el._leaveCb();
      }
      callHook2(hook, [el]);
    },
    enter(el) {
      let hook = onEnter;
      let afterHook = onAfterEnter;
      let cancelHook = onEnterCancelled;
      if (!state.isMounted) {
        if (appear) {
          hook = onAppear || onEnter;
          afterHook = onAfterAppear || onAfterEnter;
          cancelHook = onAppearCancelled || onEnterCancelled;
        } else {
          return;
        }
      }
      let called = false;
      const done = el._enterCb = (cancelled) => {
        if (called)
          return;
        called = true;
        if (cancelled) {
          callHook2(cancelHook, [el]);
        } else {
          callHook2(afterHook, [el]);
        }
        if (hooks.delayedLeave) {
          hooks.delayedLeave();
        }
        el._enterCb = void 0;
      };
      if (hook) {
        callAsyncHook(hook, [el, done]);
      } else {
        done();
      }
    },
    leave(el, remove2) {
      const key2 = String(vnode.key);
      if (el._enterCb) {
        el._enterCb(true);
      }
      if (state.isUnmounting) {
        return remove2();
      }
      callHook2(onBeforeLeave, [el]);
      let called = false;
      const done = el._leaveCb = (cancelled) => {
        if (called)
          return;
        called = true;
        remove2();
        if (cancelled) {
          callHook2(onLeaveCancelled, [el]);
        } else {
          callHook2(onAfterLeave, [el]);
        }
        el._leaveCb = void 0;
        if (leavingVNodesCache[key2] === vnode) {
          delete leavingVNodesCache[key2];
        }
      };
      leavingVNodesCache[key2] = vnode;
      if (onLeave) {
        callAsyncHook(onLeave, [el, done]);
      } else {
        done();
      }
    },
    clone(vnode2) {
      return resolveTransitionHooks(vnode2, props, state, instance);
    }
  };
  return hooks;
}
function emptyPlaceholder(vnode) {
  if (isKeepAlive(vnode)) {
    vnode = cloneVNode(vnode);
    vnode.children = null;
    return vnode;
  }
}
function getKeepAliveChild(vnode) {
  return isKeepAlive(vnode) ? vnode.children ? vnode.children[0] : void 0 : vnode;
}
function setTransitionHooks(vnode, hooks) {
  if (vnode.shapeFlag & 6 && vnode.component) {
    setTransitionHooks(vnode.component.subTree, hooks);
  } else if (vnode.shapeFlag & 128) {
    vnode.ssContent.transition = hooks.clone(vnode.ssContent);
    vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);
  } else {
    vnode.transition = hooks;
  }
}
function getTransitionRawChildren(children, keepComment = false, parentKey) {
  let ret = [];
  let keyedFragmentCount = 0;
  for (let i2 = 0; i2 < children.length; i2++) {
    let child = children[i2];
    const key = parentKey == null ? child.key : String(parentKey) + String(child.key != null ? child.key : i2);
    if (child.type === Fragment) {
      if (child.patchFlag & 128)
        keyedFragmentCount++;
      ret = ret.concat(getTransitionRawChildren(child.children, keepComment, key));
    } else if (keepComment || child.type !== Comment) {
      ret.push(key != null ? cloneVNode(child, { key }) : child);
    }
  }
  if (keyedFragmentCount > 1) {
    for (let i2 = 0; i2 < ret.length; i2++) {
      ret[i2].patchFlag = -2;
    }
  }
  return ret;
}
function defineComponent(options2) {
  return isFunction(options2) ? { setup: options2, name: options2.name } : options2;
}
const isAsyncWrapper = (i2) => !!i2.type.__asyncLoader;
function defineAsyncComponent(source) {
  if (isFunction(source)) {
    source = { loader: source };
  }
  const {
    loader,
    loadingComponent,
    errorComponent,
    delay: delay2 = 200,
    timeout,
    suspensible = true,
    onError: userOnError
  } = source;
  let pendingRequest = null;
  let resolvedComp;
  let retries = 0;
  const retry = () => {
    retries++;
    pendingRequest = null;
    return load();
  };
  const load = () => {
    let thisRequest;
    return pendingRequest || (thisRequest = pendingRequest = loader().catch((err) => {
      err = err instanceof Error ? err : new Error(String(err));
      if (userOnError) {
        return new Promise((resolve2, reject) => {
          const userRetry = () => resolve2(retry());
          const userFail = () => reject(err);
          userOnError(err, userRetry, userFail, retries + 1);
        });
      } else {
        throw err;
      }
    }).then((comp) => {
      if (thisRequest !== pendingRequest && pendingRequest) {
        return pendingRequest;
      }
      if (!comp) {
        warn$1(`Async component loader resolved to undefined. If you are using retry(), make sure to return its return value.`);
      }
      if (comp && (comp.__esModule || comp[Symbol.toStringTag] === "Module")) {
        comp = comp.default;
      }
      if (comp && !isObject(comp) && !isFunction(comp)) {
        throw new Error(`Invalid async component load result: ${comp}`);
      }
      resolvedComp = comp;
      return comp;
    }));
  };
  return defineComponent({
    name: "AsyncComponentWrapper",
    __asyncLoader: load,
    get __asyncResolved() {
      return resolvedComp;
    },
    setup() {
      const instance = currentInstance;
      if (resolvedComp) {
        return () => createInnerComp(resolvedComp, instance);
      }
      const onError = (err) => {
        pendingRequest = null;
        handleError(err, instance, 13, !errorComponent);
      };
      if (suspensible && instance.suspense || isInSSRComponentSetup) {
        return load().then((comp) => {
          return () => createInnerComp(comp, instance);
        }).catch((err) => {
          onError(err);
          return () => errorComponent ? createVNode(errorComponent, {
            error: err
          }) : null;
        });
      }
      const loaded = ref(false);
      const error = ref();
      const delayed = ref(!!delay2);
      if (delay2) {
        setTimeout(() => {
          delayed.value = false;
        }, delay2);
      }
      if (timeout != null) {
        setTimeout(() => {
          if (!loaded.value && !error.value) {
            const err = new Error(`Async component timed out after ${timeout}ms.`);
            onError(err);
            error.value = err;
          }
        }, timeout);
      }
      load().then(() => {
        loaded.value = true;
        if (instance.parent && isKeepAlive(instance.parent.vnode)) {
          queueJob(instance.parent.update);
        }
      }).catch((err) => {
        onError(err);
        error.value = err;
      });
      return () => {
        if (loaded.value && resolvedComp) {
          return createInnerComp(resolvedComp, instance);
        } else if (error.value && errorComponent) {
          return createVNode(errorComponent, {
            error: error.value
          });
        } else if (loadingComponent && !delayed.value) {
          return createVNode(loadingComponent);
        }
      };
    }
  });
}
function createInnerComp(comp, { vnode: { ref: ref2, props, children, shapeFlag }, parent }) {
  const vnode = createVNode(comp, props, children);
  vnode.ref = ref2;
  return vnode;
}
const isKeepAlive = (vnode) => vnode.type.__isKeepAlive;
function onActivated(hook, target) {
  registerKeepAliveHook(hook, "a", target);
}
function onDeactivated(hook, target) {
  registerKeepAliveHook(hook, "da", target);
}
function registerKeepAliveHook(hook, type, target = currentInstance) {
  const wrappedHook = hook.__wdc || (hook.__wdc = () => {
    let current = target;
    while (current) {
      if (current.isDeactivated) {
        return;
      }
      current = current.parent;
    }
    return hook();
  });
  injectHook(type, wrappedHook, target);
  if (target) {
    let current = target.parent;
    while (current && current.parent) {
      if (isKeepAlive(current.parent.vnode)) {
        injectToKeepAliveRoot(wrappedHook, type, target, current);
      }
      current = current.parent;
    }
  }
}
function injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {
  const injected = injectHook(type, hook, keepAliveRoot, true);
  onUnmounted(() => {
    remove(keepAliveRoot[type], injected);
  }, target);
}
function injectHook(type, hook, target = currentInstance, prepend = false) {
  if (target) {
    const hooks = target[type] || (target[type] = []);
    const wrappedHook = hook.__weh || (hook.__weh = (...args) => {
      if (target.isUnmounted) {
        return;
      }
      pauseTracking();
      setCurrentInstance(target);
      const res = callWithAsyncErrorHandling(hook, target, type, args);
      unsetCurrentInstance();
      resetTracking();
      return res;
    });
    if (prepend) {
      hooks.unshift(wrappedHook);
    } else {
      hooks.push(wrappedHook);
    }
    return wrappedHook;
  } else {
    const apiName = toHandlerKey(ErrorTypeStrings[type].replace(/ hook$/, ""));
    warn$1(`${apiName} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`);
  }
}
const createHook = (lifecycle) => (hook, target = currentInstance) => (!isInSSRComponentSetup || lifecycle === "sp") && injectHook(lifecycle, hook, target);
const onBeforeMount = createHook("bm");
const onMounted = createHook("m");
const onBeforeUpdate = createHook("bu");
const onUpdated = createHook("u");
const onBeforeUnmount = createHook("bum");
const onUnmounted = createHook("um");
const onServerPrefetch = createHook("sp");
const onRenderTriggered = createHook("rtg");
const onRenderTracked = createHook("rtc");
function onErrorCaptured(hook, target = currentInstance) {
  injectHook("ec", hook, target);
}
function validateDirectiveName(name) {
  if (isBuiltInDirective(name)) {
    warn$1("Do not use built-in directive ids as custom directive id: " + name);
  }
}
function withDirectives(vnode, directives) {
  const internalInstance = currentRenderingInstance;
  if (internalInstance === null) {
    warn$1(`withDirectives can only be used inside render functions.`);
    return vnode;
  }
  const instance = getExposeProxy(internalInstance) || internalInstance.proxy;
  const bindings = vnode.dirs || (vnode.dirs = []);
  for (let i2 = 0; i2 < directives.length; i2++) {
    let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i2];
    if (isFunction(dir)) {
      dir = {
        mounted: dir,
        updated: dir
      };
    }
    if (dir.deep) {
      traverse(value);
    }
    bindings.push({
      dir,
      instance,
      value,
      oldValue: void 0,
      arg,
      modifiers
    });
  }
  return vnode;
}
function invokeDirectiveHook(vnode, prevVNode, instance, name) {
  const bindings = vnode.dirs;
  const oldBindings = prevVNode && prevVNode.dirs;
  for (let i2 = 0; i2 < bindings.length; i2++) {
    const binding = bindings[i2];
    if (oldBindings) {
      binding.oldValue = oldBindings[i2].value;
    }
    let hook = binding.dir[name];
    if (hook) {
      pauseTracking();
      callWithAsyncErrorHandling(hook, instance, 8, [
        vnode.el,
        binding,
        vnode,
        prevVNode
      ]);
      resetTracking();
    }
  }
}
const COMPONENTS = "components";
function resolveComponent(name, maybeSelfReference) {
  return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;
}
const NULL_DYNAMIC_COMPONENT = Symbol();
function resolveDynamicComponent(component) {
  if (isString$2(component)) {
    return resolveAsset(COMPONENTS, component, false) || component;
  } else {
    return component || NULL_DYNAMIC_COMPONENT;
  }
}
function resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {
  const instance = currentRenderingInstance || currentInstance;
  if (instance) {
    const Component = instance.type;
    if (type === COMPONENTS) {
      const selfName = getComponentName(Component, false);
      if (selfName && (selfName === name || selfName === camelize(name) || selfName === capitalize(camelize(name)))) {
        return Component;
      }
    }
    const res = resolve(instance[type] || Component[type], name) || resolve(instance.appContext[type], name);
    if (!res && maybeSelfReference) {
      return Component;
    }
    if (warnMissing && !res) {
      const extra = type === COMPONENTS ? `
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.` : ``;
      warn$1(`Failed to resolve ${type.slice(0, -1)}: ${name}${extra}`);
    }
    return res;
  } else {
    warn$1(`resolve${capitalize(type.slice(0, -1))} can only be used in render() or setup().`);
  }
}
function resolve(registry, name) {
  return registry && (registry[name] || registry[camelize(name)] || registry[capitalize(camelize(name))]);
}
function renderList(source, renderItem, cache, index2) {
  let ret;
  const cached = cache && cache[index2];
  if (isArray$1(source) || isString$2(source)) {
    ret = new Array(source.length);
    for (let i2 = 0, l2 = source.length; i2 < l2; i2++) {
      ret[i2] = renderItem(source[i2], i2, void 0, cached && cached[i2]);
    }
  } else if (typeof source === "number") {
    if (!Number.isInteger(source)) {
      warn$1(`The v-for range expect an integer value but got ${source}.`);
    }
    ret = new Array(source);
    for (let i2 = 0; i2 < source; i2++) {
      ret[i2] = renderItem(i2 + 1, i2, void 0, cached && cached[i2]);
    }
  } else if (isObject(source)) {
    if (source[Symbol.iterator]) {
      ret = Array.from(source, (item, i2) => renderItem(item, i2, void 0, cached && cached[i2]));
    } else {
      const keys = Object.keys(source);
      ret = new Array(keys.length);
      for (let i2 = 0, l2 = keys.length; i2 < l2; i2++) {
        const key = keys[i2];
        ret[i2] = renderItem(source[key], key, i2, cached && cached[i2]);
      }
    }
  } else {
    ret = [];
  }
  if (cache) {
    cache[index2] = ret;
  }
  return ret;
}
function renderSlot(slots, name, props = {}, fallback, noSlotted) {
  if (currentRenderingInstance.isCE || currentRenderingInstance.parent && isAsyncWrapper(currentRenderingInstance.parent) && currentRenderingInstance.parent.isCE) {
    return createVNode("slot", name === "default" ? null : { name }, fallback && fallback());
  }
  let slot = slots[name];
  if (slot && slot.length > 1) {
    warn$1(`SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template.`);
    slot = () => [];
  }
  if (slot && slot._c) {
    slot._d = false;
  }
  openBlock();
  const validSlotContent = slot && ensureValidVNode(slot(props));
  const rendered = createBlock(Fragment, { key: props.key || `_${name}` }, validSlotContent || (fallback ? fallback() : []), validSlotContent && slots._ === 1 ? 64 : -2);
  if (!noSlotted && rendered.scopeId) {
    rendered.slotScopeIds = [rendered.scopeId + "-s"];
  }
  if (slot && slot._c) {
    slot._d = true;
  }
  return rendered;
}
function ensureValidVNode(vnodes) {
  return vnodes.some((child) => {
    if (!isVNode(child))
      return true;
    if (child.type === Comment)
      return false;
    if (child.type === Fragment && !ensureValidVNode(child.children))
      return false;
    return true;
  }) ? vnodes : null;
}
const getPublicInstance = (i2) => {
  if (!i2)
    return null;
  if (isStatefulComponent(i2))
    return getExposeProxy(i2) || i2.proxy;
  return getPublicInstance(i2.parent);
};
const publicPropertiesMap = /* @__PURE__ */ extend(/* @__PURE__ */ Object.create(null), {
  $: (i2) => i2,
  $el: (i2) => i2.vnode.el,
  $data: (i2) => i2.data,
  $props: (i2) => shallowReadonly(i2.props),
  $attrs: (i2) => shallowReadonly(i2.attrs),
  $slots: (i2) => shallowReadonly(i2.slots),
  $refs: (i2) => shallowReadonly(i2.refs),
  $parent: (i2) => getPublicInstance(i2.parent),
  $root: (i2) => getPublicInstance(i2.root),
  $emit: (i2) => i2.emit,
  $options: (i2) => resolveMergedOptions(i2),
  $forceUpdate: (i2) => i2.f || (i2.f = () => queueJob(i2.update)),
  $nextTick: (i2) => i2.n || (i2.n = nextTick.bind(i2.proxy)),
  $watch: (i2) => instanceWatch.bind(i2)
});
const isReservedPrefix = (key) => key === "_" || key === "$";
const PublicInstanceProxyHandlers = {
  get({ _: instance }, key) {
    const { ctx, setupState, data, props, accessCache, type, appContext } = instance;
    if (key === "__isVue") {
      return true;
    }
    if (setupState !== EMPTY_OBJ && setupState.__isScriptSetup && hasOwn(setupState, key)) {
      return setupState[key];
    }
    let normalizedProps;
    if (key[0] !== "$") {
      const n2 = accessCache[key];
      if (n2 !== void 0) {
        switch (n2) {
          case 1:
            return setupState[key];
          case 2:
            return data[key];
          case 4:
            return ctx[key];
          case 3:
            return props[key];
        }
      } else if (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) {
        accessCache[key] = 1;
        return setupState[key];
      } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {
        accessCache[key] = 2;
        return data[key];
      } else if ((normalizedProps = instance.propsOptions[0]) && hasOwn(normalizedProps, key)) {
        accessCache[key] = 3;
        return props[key];
      } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {
        accessCache[key] = 4;
        return ctx[key];
      } else if (shouldCacheAccess) {
        accessCache[key] = 0;
      }
    }
    const publicGetter = publicPropertiesMap[key];
    let cssModule, globalProperties;
    if (publicGetter) {
      if (key === "$attrs") {
        track(instance, "get", key);
        markAttrsAccessed();
      }
      return publicGetter(instance);
    } else if ((cssModule = type.__cssModules) && (cssModule = cssModule[key])) {
      return cssModule;
    } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {
      accessCache[key] = 4;
      return ctx[key];
    } else if (globalProperties = appContext.config.globalProperties, hasOwn(globalProperties, key)) {
      {
        return globalProperties[key];
      }
    } else if (currentRenderingInstance && (!isString$2(key) || key.indexOf("__v") !== 0)) {
      if (data !== EMPTY_OBJ && isReservedPrefix(key[0]) && hasOwn(data, key)) {
        warn$1(`Property ${JSON.stringify(key)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`);
      } else if (instance === currentRenderingInstance) {
        warn$1(`Property ${JSON.stringify(key)} was accessed during render but is not defined on instance.`);
      }
    }
  },
  set({ _: instance }, key, value) {
    const { data, setupState, ctx } = instance;
    if (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) {
      setupState[key] = value;
      return true;
    } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {
      data[key] = value;
      return true;
    } else if (hasOwn(instance.props, key)) {
      warn$1(`Attempting to mutate prop "${key}". Props are readonly.`, instance);
      return false;
    }
    if (key[0] === "$" && key.slice(1) in instance) {
      warn$1(`Attempting to mutate public property "${key}". Properties starting with $ are reserved and readonly.`, instance);
      return false;
    } else {
      if (key in instance.appContext.config.globalProperties) {
        Object.defineProperty(ctx, key, {
          enumerable: true,
          configurable: true,
          value
        });
      } else {
        ctx[key] = value;
      }
    }
    return true;
  },
  has({ _: { data, setupState, accessCache, ctx, appContext, propsOptions } }, key) {
    let normalizedProps;
    return !!accessCache[key] || data !== EMPTY_OBJ && hasOwn(data, key) || setupState !== EMPTY_OBJ && hasOwn(setupState, key) || (normalizedProps = propsOptions[0]) && hasOwn(normalizedProps, key) || hasOwn(ctx, key) || hasOwn(publicPropertiesMap, key) || hasOwn(appContext.config.globalProperties, key);
  },
  defineProperty(target, key, descriptor) {
    if (descriptor.get != null) {
      target._.accessCache[key] = 0;
    } else if (hasOwn(descriptor, "value")) {
      this.set(target, key, descriptor.value, null);
    }
    return Reflect.defineProperty(target, key, descriptor);
  }
};
{
  PublicInstanceProxyHandlers.ownKeys = (target) => {
    warn$1(`Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead.`);
    return Reflect.ownKeys(target);
  };
}
function createDevRenderContext(instance) {
  const target = {};
  Object.defineProperty(target, `_`, {
    configurable: true,
    enumerable: false,
    get: () => instance
  });
  Object.keys(publicPropertiesMap).forEach((key) => {
    Object.defineProperty(target, key, {
      configurable: true,
      enumerable: false,
      get: () => publicPropertiesMap[key](instance),
      set: NOOP
    });
  });
  return target;
}
function exposePropsOnRenderContext(instance) {
  const { ctx, propsOptions: [propsOptions] } = instance;
  if (propsOptions) {
    Object.keys(propsOptions).forEach((key) => {
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => instance.props[key],
        set: NOOP
      });
    });
  }
}
function exposeSetupStateOnRenderContext(instance) {
  const { ctx, setupState } = instance;
  Object.keys(toRaw(setupState)).forEach((key) => {
    if (!setupState.__isScriptSetup) {
      if (isReservedPrefix(key[0])) {
        warn$1(`setup() return property ${JSON.stringify(key)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);
        return;
      }
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => setupState[key],
        set: NOOP
      });
    }
  });
}
function createDuplicateChecker() {
  const cache = /* @__PURE__ */ Object.create(null);
  return (type, key) => {
    if (cache[key]) {
      warn$1(`${type} property "${key}" is already defined in ${cache[key]}.`);
    } else {
      cache[key] = type;
    }
  };
}
let shouldCacheAccess = true;
function applyOptions(instance) {
  const options2 = resolveMergedOptions(instance);
  const publicThis = instance.proxy;
  const ctx = instance.ctx;
  shouldCacheAccess = false;
  if (options2.beforeCreate) {
    callHook$1(options2.beforeCreate, instance, "bc");
  }
  const {
    data: dataOptions,
    computed: computedOptions,
    methods,
    watch: watchOptions,
    provide: provideOptions,
    inject: injectOptions,
    created,
    beforeMount,
    mounted,
    beforeUpdate,
    updated,
    activated,
    deactivated,
    beforeDestroy,
    beforeUnmount,
    destroyed,
    unmounted,
    render,
    renderTracked,
    renderTriggered,
    errorCaptured,
    serverPrefetch,
    expose,
    inheritAttrs,
    components,
    directives,
    filters
  } = options2;
  const checkDuplicateProperties = createDuplicateChecker();
  {
    const [propsOptions] = instance.propsOptions;
    if (propsOptions) {
      for (const key in propsOptions) {
        checkDuplicateProperties("Props", key);
      }
    }
  }
  if (injectOptions) {
    resolveInjections(injectOptions, ctx, checkDuplicateProperties, instance.appContext.config.unwrapInjectedRef);
  }
  if (methods) {
    for (const key in methods) {
      const methodHandler = methods[key];
      if (isFunction(methodHandler)) {
        {
          Object.defineProperty(ctx, key, {
            value: methodHandler.bind(publicThis),
            configurable: true,
            enumerable: true,
            writable: true
          });
        }
        {
          checkDuplicateProperties("Methods", key);
        }
      } else {
        warn$1(`Method "${key}" has type "${typeof methodHandler}" in the component definition. Did you reference the function correctly?`);
      }
    }
  }
  if (dataOptions) {
    if (!isFunction(dataOptions)) {
      warn$1(`The data option must be a function. Plain object usage is no longer supported.`);
    }
    const data = dataOptions.call(publicThis, publicThis);
    if (isPromise(data)) {
      warn$1(`data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>.`);
    }
    if (!isObject(data)) {
      warn$1(`data() should return an object.`);
    } else {
      instance.data = reactive(data);
      {
        for (const key in data) {
          checkDuplicateProperties("Data", key);
          if (!isReservedPrefix(key[0])) {
            Object.defineProperty(ctx, key, {
              configurable: true,
              enumerable: true,
              get: () => data[key],
              set: NOOP
            });
          }
        }
      }
    }
  }
  shouldCacheAccess = true;
  if (computedOptions) {
    for (const key in computedOptions) {
      const opt = computedOptions[key];
      const get2 = isFunction(opt) ? opt.bind(publicThis, publicThis) : isFunction(opt.get) ? opt.get.bind(publicThis, publicThis) : NOOP;
      if (get2 === NOOP) {
        warn$1(`Computed property "${key}" has no getter.`);
      }
      const set2 = !isFunction(opt) && isFunction(opt.set) ? opt.set.bind(publicThis) : () => {
        warn$1(`Write operation failed: computed property "${key}" is readonly.`);
      };
      const c2 = computed({
        get: get2,
        set: set2
      });
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => c2.value,
        set: (v2) => c2.value = v2
      });
      {
        checkDuplicateProperties("Computed", key);
      }
    }
  }
  if (watchOptions) {
    for (const key in watchOptions) {
      createWatcher(watchOptions[key], ctx, publicThis, key);
    }
  }
  if (provideOptions) {
    const provides = isFunction(provideOptions) ? provideOptions.call(publicThis) : provideOptions;
    Reflect.ownKeys(provides).forEach((key) => {
      provide(key, provides[key]);
    });
  }
  if (created) {
    callHook$1(created, instance, "c");
  }
  function registerLifecycleHook(register, hook) {
    if (isArray$1(hook)) {
      hook.forEach((_hook) => register(_hook.bind(publicThis)));
    } else if (hook) {
      register(hook.bind(publicThis));
    }
  }
  registerLifecycleHook(onBeforeMount, beforeMount);
  registerLifecycleHook(onMounted, mounted);
  registerLifecycleHook(onBeforeUpdate, beforeUpdate);
  registerLifecycleHook(onUpdated, updated);
  registerLifecycleHook(onActivated, activated);
  registerLifecycleHook(onDeactivated, deactivated);
  registerLifecycleHook(onErrorCaptured, errorCaptured);
  registerLifecycleHook(onRenderTracked, renderTracked);
  registerLifecycleHook(onRenderTriggered, renderTriggered);
  registerLifecycleHook(onBeforeUnmount, beforeUnmount);
  registerLifecycleHook(onUnmounted, unmounted);
  registerLifecycleHook(onServerPrefetch, serverPrefetch);
  if (isArray$1(expose)) {
    if (expose.length) {
      const exposed = instance.exposed || (instance.exposed = {});
      expose.forEach((key) => {
        Object.defineProperty(exposed, key, {
          get: () => publicThis[key],
          set: (val) => publicThis[key] = val
        });
      });
    } else if (!instance.exposed) {
      instance.exposed = {};
    }
  }
  if (render && instance.render === NOOP) {
    instance.render = render;
  }
  if (inheritAttrs != null) {
    instance.inheritAttrs = inheritAttrs;
  }
  if (components)
    instance.components = components;
  if (directives)
    instance.directives = directives;
}
function resolveInjections(injectOptions, ctx, checkDuplicateProperties = NOOP, unwrapRef = false) {
  if (isArray$1(injectOptions)) {
    injectOptions = normalizeInject(injectOptions);
  }
  for (const key in injectOptions) {
    const opt = injectOptions[key];
    let injected;
    if (isObject(opt)) {
      if ("default" in opt) {
        injected = inject(opt.from || key, opt.default, true);
      } else {
        injected = inject(opt.from || key);
      }
    } else {
      injected = inject(opt);
    }
    if (isRef(injected)) {
      if (unwrapRef) {
        Object.defineProperty(ctx, key, {
          enumerable: true,
          configurable: true,
          get: () => injected.value,
          set: (v2) => injected.value = v2
        });
      } else {
        {
          warn$1(`injected property "${key}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`);
        }
        ctx[key] = injected;
      }
    } else {
      ctx[key] = injected;
    }
    {
      checkDuplicateProperties("Inject", key);
    }
  }
}
function callHook$1(hook, instance, type) {
  callWithAsyncErrorHandling(isArray$1(hook) ? hook.map((h2) => h2.bind(instance.proxy)) : hook.bind(instance.proxy), instance, type);
}
function createWatcher(raw, ctx, publicThis, key) {
  const getter = key.includes(".") ? createPathGetter(publicThis, key) : () => publicThis[key];
  if (isString$2(raw)) {
    const handler = ctx[raw];
    if (isFunction(handler)) {
      watch(getter, handler);
    } else {
      warn$1(`Invalid watch handler specified by key "${raw}"`, handler);
    }
  } else if (isFunction(raw)) {
    watch(getter, raw.bind(publicThis));
  } else if (isObject(raw)) {
    if (isArray$1(raw)) {
      raw.forEach((r2) => createWatcher(r2, ctx, publicThis, key));
    } else {
      const handler = isFunction(raw.handler) ? raw.handler.bind(publicThis) : ctx[raw.handler];
      if (isFunction(handler)) {
        watch(getter, handler, raw);
      } else {
        warn$1(`Invalid watch handler specified by key "${raw.handler}"`, handler);
      }
    }
  } else {
    warn$1(`Invalid watch option: "${key}"`, raw);
  }
}
function resolveMergedOptions(instance) {
  const base2 = instance.type;
  const { mixins, extends: extendsOptions } = base2;
  const { mixins: globalMixins, optionsCache: cache, config: { optionMergeStrategies } } = instance.appContext;
  const cached = cache.get(base2);
  let resolved;
  if (cached) {
    resolved = cached;
  } else if (!globalMixins.length && !mixins && !extendsOptions) {
    {
      resolved = base2;
    }
  } else {
    resolved = {};
    if (globalMixins.length) {
      globalMixins.forEach((m2) => mergeOptions$1(resolved, m2, optionMergeStrategies, true));
    }
    mergeOptions$1(resolved, base2, optionMergeStrategies);
  }
  cache.set(base2, resolved);
  return resolved;
}
function mergeOptions$1(to2, from, strats, asMixin = false) {
  const { mixins, extends: extendsOptions } = from;
  if (extendsOptions) {
    mergeOptions$1(to2, extendsOptions, strats, true);
  }
  if (mixins) {
    mixins.forEach((m2) => mergeOptions$1(to2, m2, strats, true));
  }
  for (const key in from) {
    if (asMixin && key === "expose") {
      warn$1(`"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.`);
    } else {
      const strat = internalOptionMergeStrats[key] || strats && strats[key];
      to2[key] = strat ? strat(to2[key], from[key]) : from[key];
    }
  }
  return to2;
}
const internalOptionMergeStrats = {
  data: mergeDataFn,
  props: mergeObjectOptions,
  emits: mergeObjectOptions,
  methods: mergeObjectOptions,
  computed: mergeObjectOptions,
  beforeCreate: mergeAsArray,
  created: mergeAsArray,
  beforeMount: mergeAsArray,
  mounted: mergeAsArray,
  beforeUpdate: mergeAsArray,
  updated: mergeAsArray,
  beforeDestroy: mergeAsArray,
  beforeUnmount: mergeAsArray,
  destroyed: mergeAsArray,
  unmounted: mergeAsArray,
  activated: mergeAsArray,
  deactivated: mergeAsArray,
  errorCaptured: mergeAsArray,
  serverPrefetch: mergeAsArray,
  components: mergeObjectOptions,
  directives: mergeObjectOptions,
  watch: mergeWatchOptions,
  provide: mergeDataFn,
  inject: mergeInject
};
function mergeDataFn(to2, from) {
  if (!from) {
    return to2;
  }
  if (!to2) {
    return from;
  }
  return function mergedDataFn() {
    return extend(isFunction(to2) ? to2.call(this, this) : to2, isFunction(from) ? from.call(this, this) : from);
  };
}
function mergeInject(to2, from) {
  return mergeObjectOptions(normalizeInject(to2), normalizeInject(from));
}
function normalizeInject(raw) {
  if (isArray$1(raw)) {
    const res = {};
    for (let i2 = 0; i2 < raw.length; i2++) {
      res[raw[i2]] = raw[i2];
    }
    return res;
  }
  return raw;
}
function mergeAsArray(to2, from) {
  return to2 ? [...new Set([].concat(to2, from))] : from;
}
function mergeObjectOptions(to2, from) {
  return to2 ? extend(extend(/* @__PURE__ */ Object.create(null), to2), from) : from;
}
function mergeWatchOptions(to2, from) {
  if (!to2)
    return from;
  if (!from)
    return to2;
  const merged = extend(/* @__PURE__ */ Object.create(null), to2);
  for (const key in from) {
    merged[key] = mergeAsArray(to2[key], from[key]);
  }
  return merged;
}
function initProps(instance, rawProps, isStateful, isSSR = false) {
  const props = {};
  const attrs = {};
  def(attrs, InternalObjectKey, 1);
  instance.propsDefaults = /* @__PURE__ */ Object.create(null);
  setFullProps(instance, rawProps, props, attrs);
  for (const key in instance.propsOptions[0]) {
    if (!(key in props)) {
      props[key] = void 0;
    }
  }
  {
    validateProps(rawProps || {}, props, instance);
  }
  if (isStateful) {
    instance.props = isSSR ? props : shallowReactive(props);
  } else {
    if (!instance.type.props) {
      instance.props = attrs;
    } else {
      instance.props = props;
    }
  }
  instance.attrs = attrs;
}
function updateProps(instance, rawProps, rawPrevProps, optimized) {
  const { props, attrs, vnode: { patchFlag } } = instance;
  const rawCurrentProps = toRaw(props);
  const [options2] = instance.propsOptions;
  let hasAttrsChanged = false;
  if (!(instance.type.__hmrId || instance.parent && instance.parent.type.__hmrId) && (optimized || patchFlag > 0) && !(patchFlag & 16)) {
    if (patchFlag & 8) {
      const propsToUpdate = instance.vnode.dynamicProps;
      for (let i2 = 0; i2 < propsToUpdate.length; i2++) {
        let key = propsToUpdate[i2];
        if (isEmitListener(instance.emitsOptions, key)) {
          continue;
        }
        const value = rawProps[key];
        if (options2) {
          if (hasOwn(attrs, key)) {
            if (value !== attrs[key]) {
              attrs[key] = value;
              hasAttrsChanged = true;
            }
          } else {
            const camelizedKey = camelize(key);
            props[camelizedKey] = resolvePropValue(options2, rawCurrentProps, camelizedKey, value, instance, false);
          }
        } else {
          if (value !== attrs[key]) {
            attrs[key] = value;
            hasAttrsChanged = true;
          }
        }
      }
    }
  } else {
    if (setFullProps(instance, rawProps, props, attrs)) {
      hasAttrsChanged = true;
    }
    let kebabKey;
    for (const key in rawCurrentProps) {
      if (!rawProps || !hasOwn(rawProps, key) && ((kebabKey = hyphenate(key)) === key || !hasOwn(rawProps, kebabKey))) {
        if (options2) {
          if (rawPrevProps && (rawPrevProps[key] !== void 0 || rawPrevProps[kebabKey] !== void 0)) {
            props[key] = resolvePropValue(options2, rawCurrentProps, key, void 0, instance, true);
          }
        } else {
          delete props[key];
        }
      }
    }
    if (attrs !== rawCurrentProps) {
      for (const key in attrs) {
        if (!rawProps || !hasOwn(rawProps, key) && true) {
          delete attrs[key];
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (hasAttrsChanged) {
    trigger(instance, "set", "$attrs");
  }
  {
    validateProps(rawProps || {}, props, instance);
  }
}
function setFullProps(instance, rawProps, props, attrs) {
  const [options2, needCastKeys] = instance.propsOptions;
  let hasAttrsChanged = false;
  let rawCastValues;
  if (rawProps) {
    for (let key in rawProps) {
      if (isReservedProp(key)) {
        continue;
      }
      const value = rawProps[key];
      let camelKey;
      if (options2 && hasOwn(options2, camelKey = camelize(key))) {
        if (!needCastKeys || !needCastKeys.includes(camelKey)) {
          props[camelKey] = value;
        } else {
          (rawCastValues || (rawCastValues = {}))[camelKey] = value;
        }
      } else if (!isEmitListener(instance.emitsOptions, key)) {
        if (!(key in attrs) || value !== attrs[key]) {
          attrs[key] = value;
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (needCastKeys) {
    const rawCurrentProps = toRaw(props);
    const castValues = rawCastValues || EMPTY_OBJ;
    for (let i2 = 0; i2 < needCastKeys.length; i2++) {
      const key = needCastKeys[i2];
      props[key] = resolvePropValue(options2, rawCurrentProps, key, castValues[key], instance, !hasOwn(castValues, key));
    }
  }
  return hasAttrsChanged;
}
function resolvePropValue(options2, props, key, value, instance, isAbsent) {
  const opt = options2[key];
  if (opt != null) {
    const hasDefault = hasOwn(opt, "default");
    if (hasDefault && value === void 0) {
      const defaultValue = opt.default;
      if (opt.type !== Function && isFunction(defaultValue)) {
        const { propsDefaults } = instance;
        if (key in propsDefaults) {
          value = propsDefaults[key];
        } else {
          setCurrentInstance(instance);
          value = propsDefaults[key] = defaultValue.call(null, props);
          unsetCurrentInstance();
        }
      } else {
        value = defaultValue;
      }
    }
    if (opt[0]) {
      if (isAbsent && !hasDefault) {
        value = false;
      } else if (opt[1] && (value === "" || value === hyphenate(key))) {
        value = true;
      }
    }
  }
  return value;
}
function normalizePropsOptions(comp, appContext, asMixin = false) {
  const cache = appContext.propsCache;
  const cached = cache.get(comp);
  if (cached) {
    return cached;
  }
  const raw = comp.props;
  const normalized = {};
  const needCastKeys = [];
  let hasExtends = false;
  if (!isFunction(comp)) {
    const extendProps = (raw2) => {
      hasExtends = true;
      const [props, keys] = normalizePropsOptions(raw2, appContext, true);
      extend(normalized, props);
      if (keys)
        needCastKeys.push(...keys);
    };
    if (!asMixin && appContext.mixins.length) {
      appContext.mixins.forEach(extendProps);
    }
    if (comp.extends) {
      extendProps(comp.extends);
    }
    if (comp.mixins) {
      comp.mixins.forEach(extendProps);
    }
  }
  if (!raw && !hasExtends) {
    cache.set(comp, EMPTY_ARR);
    return EMPTY_ARR;
  }
  if (isArray$1(raw)) {
    for (let i2 = 0; i2 < raw.length; i2++) {
      if (!isString$2(raw[i2])) {
        warn$1(`props must be strings when using array syntax.`, raw[i2]);
      }
      const normalizedKey = camelize(raw[i2]);
      if (validatePropName(normalizedKey)) {
        normalized[normalizedKey] = EMPTY_OBJ;
      }
    }
  } else if (raw) {
    if (!isObject(raw)) {
      warn$1(`invalid props options`, raw);
    }
    for (const key in raw) {
      const normalizedKey = camelize(key);
      if (validatePropName(normalizedKey)) {
        const opt = raw[key];
        const prop = normalized[normalizedKey] = isArray$1(opt) || isFunction(opt) ? { type: opt } : opt;
        if (prop) {
          const booleanIndex = getTypeIndex(Boolean, prop.type);
          const stringIndex = getTypeIndex(String, prop.type);
          prop[0] = booleanIndex > -1;
          prop[1] = stringIndex < 0 || booleanIndex < stringIndex;
          if (booleanIndex > -1 || hasOwn(prop, "default")) {
            needCastKeys.push(normalizedKey);
          }
        }
      }
    }
  }
  const res = [normalized, needCastKeys];
  cache.set(comp, res);
  return res;
}
function validatePropName(key) {
  if (key[0] !== "$") {
    return true;
  } else {
    warn$1(`Invalid prop name: "${key}" is a reserved property.`);
  }
  return false;
}
function getType(ctor) {
  const match = ctor && ctor.toString().match(/^\s*function (\w+)/);
  return match ? match[1] : ctor === null ? "null" : "";
}
function isSameType(a2, b2) {
  return getType(a2) === getType(b2);
}
function getTypeIndex(type, expectedTypes) {
  if (isArray$1(expectedTypes)) {
    return expectedTypes.findIndex((t2) => isSameType(t2, type));
  } else if (isFunction(expectedTypes)) {
    return isSameType(expectedTypes, type) ? 0 : -1;
  }
  return -1;
}
function validateProps(rawProps, props, instance) {
  const resolvedValues = toRaw(props);
  const options2 = instance.propsOptions[0];
  for (const key in options2) {
    let opt = options2[key];
    if (opt == null)
      continue;
    validateProp(key, resolvedValues[key], opt, !hasOwn(rawProps, key) && !hasOwn(rawProps, hyphenate(key)));
  }
}
function validateProp(name, value, prop, isAbsent) {
  const { type, required, validator } = prop;
  if (required && isAbsent) {
    warn$1('Missing required prop: "' + name + '"');
    return;
  }
  if (value == null && !prop.required) {
    return;
  }
  if (type != null && type !== true) {
    let isValid = false;
    const types = isArray$1(type) ? type : [type];
    const expectedTypes = [];
    for (let i2 = 0; i2 < types.length && !isValid; i2++) {
      const { valid, expectedType } = assertType(value, types[i2]);
      expectedTypes.push(expectedType || "");
      isValid = valid;
    }
    if (!isValid) {
      warn$1(getInvalidTypeMessage(name, value, expectedTypes));
      return;
    }
  }
  if (validator && !validator(value)) {
    warn$1('Invalid prop: custom validator check failed for prop "' + name + '".');
  }
}
const isSimpleType = /* @__PURE__ */ makeMap("String,Number,Boolean,Function,Symbol,BigInt");
function assertType(value, type) {
  let valid;
  const expectedType = getType(type);
  if (isSimpleType(expectedType)) {
    const t2 = typeof value;
    valid = t2 === expectedType.toLowerCase();
    if (!valid && t2 === "object") {
      valid = value instanceof type;
    }
  } else if (expectedType === "Object") {
    valid = isObject(value);
  } else if (expectedType === "Array") {
    valid = isArray$1(value);
  } else if (expectedType === "null") {
    valid = value === null;
  } else {
    valid = value instanceof type;
  }
  return {
    valid,
    expectedType
  };
}
function getInvalidTypeMessage(name, value, expectedTypes) {
  let message2 = `Invalid prop: type check failed for prop "${name}". Expected ${expectedTypes.map(capitalize).join(" | ")}`;
  const expectedType = expectedTypes[0];
  const receivedType = toRawType(value);
  const expectedValue = styleValue(value, expectedType);
  const receivedValue = styleValue(value, receivedType);
  if (expectedTypes.length === 1 && isExplicable(expectedType) && !isBoolean(expectedType, receivedType)) {
    message2 += ` with value ${expectedValue}`;
  }
  message2 += `, got ${receivedType} `;
  if (isExplicable(receivedType)) {
    message2 += `with value ${receivedValue}.`;
  }
  return message2;
}
function styleValue(value, type) {
  if (type === "String") {
    return `"${value}"`;
  } else if (type === "Number") {
    return `${Number(value)}`;
  } else {
    return `${value}`;
  }
}
function isExplicable(type) {
  const explicitTypes = ["string", "number", "boolean"];
  return explicitTypes.some((elem) => type.toLowerCase() === elem);
}
function isBoolean(...args) {
  return args.some((elem) => elem.toLowerCase() === "boolean");
}
const isInternalKey = (key) => key[0] === "_" || key === "$stable";
const normalizeSlotValue = (value) => isArray$1(value) ? value.map(normalizeVNode) : [normalizeVNode(value)];
const normalizeSlot$1 = (key, rawSlot, ctx) => {
  if (rawSlot._n) {
    return rawSlot;
  }
  const normalized = withCtx((...args) => {
    if (currentInstance) {
      warn$1(`Slot "${key}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`);
    }
    return normalizeSlotValue(rawSlot(...args));
  }, ctx);
  normalized._c = false;
  return normalized;
};
const normalizeObjectSlots = (rawSlots, slots, instance) => {
  const ctx = rawSlots._ctx;
  for (const key in rawSlots) {
    if (isInternalKey(key))
      continue;
    const value = rawSlots[key];
    if (isFunction(value)) {
      slots[key] = normalizeSlot$1(key, value, ctx);
    } else if (value != null) {
      {
        warn$1(`Non-function value encountered for slot "${key}". Prefer function slots for better performance.`);
      }
      const normalized = normalizeSlotValue(value);
      slots[key] = () => normalized;
    }
  }
};
const normalizeVNodeSlots = (instance, children) => {
  if (!isKeepAlive(instance.vnode) && true) {
    warn$1(`Non-function value encountered for default slot. Prefer function slots for better performance.`);
  }
  const normalized = normalizeSlotValue(children);
  instance.slots.default = () => normalized;
};
const initSlots = (instance, children) => {
  if (instance.vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      instance.slots = toRaw(children);
      def(children, "_", type);
    } else {
      normalizeObjectSlots(children, instance.slots = {});
    }
  } else {
    instance.slots = {};
    if (children) {
      normalizeVNodeSlots(instance, children);
    }
  }
  def(instance.slots, InternalObjectKey, 1);
};
const updateSlots = (instance, children, optimized) => {
  const { vnode, slots } = instance;
  let needDeletionCheck = true;
  let deletionComparisonTarget = EMPTY_OBJ;
  if (vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      if (isHmrUpdating) {
        extend(slots, children);
      } else if (optimized && type === 1) {
        needDeletionCheck = false;
      } else {
        extend(slots, children);
        if (!optimized && type === 1) {
          delete slots._;
        }
      }
    } else {
      needDeletionCheck = !children.$stable;
      normalizeObjectSlots(children, slots);
    }
    deletionComparisonTarget = children;
  } else if (children) {
    normalizeVNodeSlots(instance, children);
    deletionComparisonTarget = { default: 1 };
  }
  if (needDeletionCheck) {
    for (const key in slots) {
      if (!isInternalKey(key) && !(key in deletionComparisonTarget)) {
        delete slots[key];
      }
    }
  }
};
function createAppContext() {
  return {
    app: null,
    config: {
      isNativeTag: NO,
      performance: false,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: /* @__PURE__ */ Object.create(null),
    optionsCache: /* @__PURE__ */ new WeakMap(),
    propsCache: /* @__PURE__ */ new WeakMap(),
    emitsCache: /* @__PURE__ */ new WeakMap()
  };
}
let uid = 0;
function createAppAPI(render, hydrate) {
  return function createApp(rootComponent, rootProps = null) {
    if (!isFunction(rootComponent)) {
      rootComponent = Object.assign({}, rootComponent);
    }
    if (rootProps != null && !isObject(rootProps)) {
      warn$1(`root props passed to app.mount() must be an object.`);
      rootProps = null;
    }
    const context = createAppContext();
    const installedPlugins = /* @__PURE__ */ new Set();
    let isMounted = false;
    const app = context.app = {
      _uid: uid++,
      _component: rootComponent,
      _props: rootProps,
      _container: null,
      _context: context,
      _instance: null,
      version,
      get config() {
        return context.config;
      },
      set config(v2) {
        {
          warn$1(`app.config cannot be replaced. Modify individual options instead.`);
        }
      },
      use(plugin, ...options2) {
        if (installedPlugins.has(plugin)) {
          warn$1(`Plugin has already been applied to target app.`);
        } else if (plugin && isFunction(plugin.install)) {
          installedPlugins.add(plugin);
          plugin.install(app, ...options2);
        } else if (isFunction(plugin)) {
          installedPlugins.add(plugin);
          plugin(app, ...options2);
        } else {
          warn$1(`A plugin must either be a function or an object with an "install" function.`);
        }
        return app;
      },
      mixin(mixin) {
        {
          if (!context.mixins.includes(mixin)) {
            context.mixins.push(mixin);
          } else {
            warn$1("Mixin has already been applied to target app" + (mixin.name ? `: ${mixin.name}` : ""));
          }
        }
        return app;
      },
      component(name, component) {
        {
          validateComponentName(name, context.config);
        }
        if (!component) {
          return context.components[name];
        }
        if (context.components[name]) {
          warn$1(`Component "${name}" has already been registered in target app.`);
        }
        context.components[name] = component;
        return app;
      },
      directive(name, directive) {
        {
          validateDirectiveName(name);
        }
        if (!directive) {
          return context.directives[name];
        }
        if (context.directives[name]) {
          warn$1(`Directive "${name}" has already been registered in target app.`);
        }
        context.directives[name] = directive;
        return app;
      },
      mount(rootContainer, isHydrate, isSVG) {
        if (!isMounted) {
          if (rootContainer.__vue_app__) {
            warn$1(`There is already an app instance mounted on the host container.
 If you want to mount another app on the same host container, you need to unmount the previous app by calling \`app.unmount()\` first.`);
          }
          const vnode = createVNode(rootComponent, rootProps);
          vnode.appContext = context;
          {
            context.reload = () => {
              render(cloneVNode(vnode), rootContainer, isSVG);
            };
          }
          if (isHydrate && hydrate) {
            hydrate(vnode, rootContainer);
          } else {
            render(vnode, rootContainer, isSVG);
          }
          isMounted = true;
          app._container = rootContainer;
          rootContainer.__vue_app__ = app;
          {
            app._instance = vnode.component;
            devtoolsInitApp(app, version);
          }
          return getExposeProxy(vnode.component) || vnode.component.proxy;
        } else {
          warn$1(`App has already been mounted.
If you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. \`const createMyApp = () => createApp(App)\``);
        }
      },
      unmount() {
        if (isMounted) {
          render(null, app._container);
          {
            app._instance = null;
            devtoolsUnmountApp(app);
          }
          delete app._container.__vue_app__;
        } else {
          warn$1(`Cannot unmount an app that is not mounted.`);
        }
      },
      provide(key, value) {
        if (key in context.provides) {
          warn$1(`App already provides property with key "${String(key)}". It will be overwritten with the new value.`);
        }
        context.provides[key] = value;
        return app;
      }
    };
    return app;
  };
}
function setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {
  if (isArray$1(rawRef)) {
    rawRef.forEach((r2, i2) => setRef(r2, oldRawRef && (isArray$1(oldRawRef) ? oldRawRef[i2] : oldRawRef), parentSuspense, vnode, isUnmount));
    return;
  }
  if (isAsyncWrapper(vnode) && !isUnmount) {
    return;
  }
  const refValue = vnode.shapeFlag & 4 ? getExposeProxy(vnode.component) || vnode.component.proxy : vnode.el;
  const value = isUnmount ? null : refValue;
  const { i: owner, r: ref2 } = rawRef;
  if (!owner) {
    warn$1(`Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.`);
    return;
  }
  const oldRef = oldRawRef && oldRawRef.r;
  const refs = owner.refs === EMPTY_OBJ ? owner.refs = {} : owner.refs;
  const setupState = owner.setupState;
  if (oldRef != null && oldRef !== ref2) {
    if (isString$2(oldRef)) {
      refs[oldRef] = null;
      if (hasOwn(setupState, oldRef)) {
        setupState[oldRef] = null;
      }
    } else if (isRef(oldRef)) {
      oldRef.value = null;
    }
  }
  if (isFunction(ref2)) {
    callWithErrorHandling(ref2, owner, 12, [value, refs]);
  } else {
    const _isString = isString$2(ref2);
    const _isRef = isRef(ref2);
    if (_isString || _isRef) {
      const doSet = () => {
        if (rawRef.f) {
          const existing = _isString ? refs[ref2] : ref2.value;
          if (isUnmount) {
            isArray$1(existing) && remove(existing, refValue);
          } else {
            if (!isArray$1(existing)) {
              if (_isString) {
                refs[ref2] = [refValue];
                if (hasOwn(setupState, ref2)) {
                  setupState[ref2] = refs[ref2];
                }
              } else {
                ref2.value = [refValue];
                if (rawRef.k)
                  refs[rawRef.k] = ref2.value;
              }
            } else if (!existing.includes(refValue)) {
              existing.push(refValue);
            }
          }
        } else if (_isString) {
          refs[ref2] = value;
          if (hasOwn(setupState, ref2)) {
            setupState[ref2] = value;
          }
        } else if (_isRef) {
          ref2.value = value;
          if (rawRef.k)
            refs[rawRef.k] = value;
        } else {
          warn$1("Invalid template ref type:", ref2, `(${typeof ref2})`);
        }
      };
      if (value) {
        doSet.id = -1;
        queuePostRenderEffect(doSet, parentSuspense);
      } else {
        doSet();
      }
    } else {
      warn$1("Invalid template ref type:", ref2, `(${typeof ref2})`);
    }
  }
}
let hasMismatch = false;
const isSVGContainer = (container) => /svg/.test(container.namespaceURI) && container.tagName !== "foreignObject";
const isComment = (node) => node.nodeType === 8;
function createHydrationFunctions(rendererInternals) {
  const { mt: mountComponent, p: patch, o: { patchProp: patchProp2, createText, nextSibling, parentNode, remove: remove2, insert, createComment } } = rendererInternals;
  const hydrate = (vnode, container) => {
    if (!container.hasChildNodes()) {
      warn$1(`Attempting to hydrate existing markup but container is empty. Performing full mount instead.`);
      patch(null, vnode, container);
      flushPostFlushCbs();
      container._vnode = vnode;
      return;
    }
    hasMismatch = false;
    hydrateNode(container.firstChild, vnode, null, null, null);
    flushPostFlushCbs();
    container._vnode = vnode;
    if (hasMismatch && true) {
      console.error(`Hydration completed but contains mismatches.`);
    }
  };
  const hydrateNode = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized = false) => {
    const isFragmentStart = isComment(node) && node.data === "[";
    const onMismatch = () => handleMismatch(node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragmentStart);
    const { type, ref: ref2, shapeFlag, patchFlag } = vnode;
    const domType = node.nodeType;
    vnode.el = node;
    if (patchFlag === -2) {
      optimized = false;
      vnode.dynamicChildren = null;
    }
    let nextNode = null;
    switch (type) {
      case Text:
        if (domType !== 3) {
          if (vnode.children === "") {
            insert(vnode.el = createText(""), parentNode(node), node);
            nextNode = node;
          } else {
            nextNode = onMismatch();
          }
        } else {
          if (node.data !== vnode.children) {
            hasMismatch = true;
            warn$1(`Hydration text mismatch:
- Client: ${JSON.stringify(node.data)}
- Server: ${JSON.stringify(vnode.children)}`);
            node.data = vnode.children;
          }
          nextNode = nextSibling(node);
        }
        break;
      case Comment:
        if (domType !== 8 || isFragmentStart) {
          nextNode = onMismatch();
        } else {
          nextNode = nextSibling(node);
        }
        break;
      case Static:
        if (domType !== 1 && domType !== 3) {
          nextNode = onMismatch();
        } else {
          nextNode = node;
          const needToAdoptContent = !vnode.children.length;
          for (let i2 = 0; i2 < vnode.staticCount; i2++) {
            if (needToAdoptContent)
              vnode.children += nextNode.nodeType === 1 ? nextNode.outerHTML : nextNode.data;
            if (i2 === vnode.staticCount - 1) {
              vnode.anchor = nextNode;
            }
            nextNode = nextSibling(nextNode);
          }
          return nextNode;
        }
        break;
      case Fragment:
        if (!isFragmentStart) {
          nextNode = onMismatch();
        } else {
          nextNode = hydrateFragment(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);
        }
        break;
      default:
        if (shapeFlag & 1) {
          if (domType !== 1 || vnode.type.toLowerCase() !== node.tagName.toLowerCase()) {
            nextNode = onMismatch();
          } else {
            nextNode = hydrateElement(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);
          }
        } else if (shapeFlag & 6) {
          vnode.slotScopeIds = slotScopeIds;
          const container = parentNode(node);
          mountComponent(vnode, container, null, parentComponent, parentSuspense, isSVGContainer(container), optimized);
          nextNode = isFragmentStart ? locateClosingAsyncAnchor(node) : nextSibling(node);
          if (nextNode && isComment(nextNode) && nextNode.data === "teleport end") {
            nextNode = nextSibling(nextNode);
          }
          if (isAsyncWrapper(vnode)) {
            let subTree;
            if (isFragmentStart) {
              subTree = createVNode(Fragment);
              subTree.anchor = nextNode ? nextNode.previousSibling : container.lastChild;
            } else {
              subTree = node.nodeType === 3 ? createTextVNode("") : createVNode("div");
            }
            subTree.el = node;
            vnode.component.subTree = subTree;
          }
        } else if (shapeFlag & 64) {
          if (domType !== 8) {
            nextNode = onMismatch();
          } else {
            nextNode = vnode.type.hydrate(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, rendererInternals, hydrateChildren);
          }
        } else if (shapeFlag & 128) {
          nextNode = vnode.type.hydrate(node, vnode, parentComponent, parentSuspense, isSVGContainer(parentNode(node)), slotScopeIds, optimized, rendererInternals, hydrateNode);
        } else {
          warn$1("Invalid HostVNode type:", type, `(${typeof type})`);
        }
    }
    if (ref2 != null) {
      setRef(ref2, null, parentSuspense, vnode);
    }
    return nextNode;
  };
  const hydrateElement = (el, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    optimized = optimized || !!vnode.dynamicChildren;
    const { type, props, patchFlag, shapeFlag, dirs } = vnode;
    const forcePatchValue = type === "input" && dirs || type === "option";
    {
      if (dirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "created");
      }
      if (props) {
        if (forcePatchValue || !optimized || patchFlag & (16 | 32)) {
          for (const key in props) {
            if (forcePatchValue && key.endsWith("value") || isOn(key) && !isReservedProp(key)) {
              patchProp2(el, key, null, props[key], false, void 0, parentComponent);
            }
          }
        } else if (props.onClick) {
          patchProp2(el, "onClick", null, props.onClick, false, void 0, parentComponent);
        }
      }
      let vnodeHooks;
      if (vnodeHooks = props && props.onVnodeBeforeMount) {
        invokeVNodeHook(vnodeHooks, parentComponent, vnode);
      }
      if (dirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "beforeMount");
      }
      if ((vnodeHooks = props && props.onVnodeMounted) || dirs) {
        queueEffectWithSuspense(() => {
          vnodeHooks && invokeVNodeHook(vnodeHooks, parentComponent, vnode);
          dirs && invokeDirectiveHook(vnode, null, parentComponent, "mounted");
        }, parentSuspense);
      }
      if (shapeFlag & 16 && !(props && (props.innerHTML || props.textContent))) {
        let next = hydrateChildren(el.firstChild, vnode, el, parentComponent, parentSuspense, slotScopeIds, optimized);
        let hasWarned = false;
        while (next) {
          hasMismatch = true;
          if (!hasWarned) {
            warn$1(`Hydration children mismatch in <${vnode.type}>: server rendered element contains more child nodes than client vdom.`);
            hasWarned = true;
          }
          const cur = next;
          next = next.nextSibling;
          remove2(cur);
        }
      } else if (shapeFlag & 8) {
        if (el.textContent !== vnode.children) {
          hasMismatch = true;
          warn$1(`Hydration text content mismatch in <${vnode.type}>:
- Client: ${el.textContent}
- Server: ${vnode.children}`);
          el.textContent = vnode.children;
        }
      }
    }
    return el.nextSibling;
  };
  const hydrateChildren = (node, parentVNode, container, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    optimized = optimized || !!parentVNode.dynamicChildren;
    const children = parentVNode.children;
    const l2 = children.length;
    let hasWarned = false;
    for (let i2 = 0; i2 < l2; i2++) {
      const vnode = optimized ? children[i2] : children[i2] = normalizeVNode(children[i2]);
      if (node) {
        node = hydrateNode(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);
      } else if (vnode.type === Text && !vnode.children) {
        continue;
      } else {
        hasMismatch = true;
        if (!hasWarned) {
          warn$1(`Hydration children mismatch in <${container.tagName.toLowerCase()}>: server rendered element contains fewer child nodes than client vdom.`);
          hasWarned = true;
        }
        patch(null, vnode, container, null, parentComponent, parentSuspense, isSVGContainer(container), slotScopeIds);
      }
    }
    return node;
  };
  const hydrateFragment = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    const { slotScopeIds: fragmentSlotScopeIds } = vnode;
    if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;
    }
    const container = parentNode(node);
    const next = hydrateChildren(nextSibling(node), vnode, container, parentComponent, parentSuspense, slotScopeIds, optimized);
    if (next && isComment(next) && next.data === "]") {
      return nextSibling(vnode.anchor = next);
    } else {
      hasMismatch = true;
      insert(vnode.anchor = createComment(`]`), container, next);
      return next;
    }
  };
  const handleMismatch = (node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragment) => {
    hasMismatch = true;
    warn$1(`Hydration node mismatch:
- Client vnode:`, vnode.type, `
- Server rendered DOM:`, node, node.nodeType === 3 ? `(text)` : isComment(node) && node.data === "[" ? `(start of fragment)` : ``);
    vnode.el = null;
    if (isFragment) {
      const end = locateClosingAsyncAnchor(node);
      while (true) {
        const next2 = nextSibling(node);
        if (next2 && next2 !== end) {
          remove2(next2);
        } else {
          break;
        }
      }
    }
    const next = nextSibling(node);
    const container = parentNode(node);
    remove2(node);
    patch(null, vnode, container, next, parentComponent, parentSuspense, isSVGContainer(container), slotScopeIds);
    return next;
  };
  const locateClosingAsyncAnchor = (node) => {
    let match = 0;
    while (node) {
      node = nextSibling(node);
      if (node && isComment(node)) {
        if (node.data === "[")
          match++;
        if (node.data === "]") {
          if (match === 0) {
            return nextSibling(node);
          } else {
            match--;
          }
        }
      }
    }
    return node;
  };
  return [hydrate, hydrateNode];
}
let supported$1;
let perf$1;
function startMeasure(instance, type) {
  if (instance.appContext.config.performance && isSupported$1()) {
    perf$1.mark(`vue-${type}-${instance.uid}`);
  }
  {
    devtoolsPerfStart(instance, type, isSupported$1() ? perf$1.now() : Date.now());
  }
}
function endMeasure(instance, type) {
  if (instance.appContext.config.performance && isSupported$1()) {
    const startTag = `vue-${type}-${instance.uid}`;
    const endTag = startTag + `:end`;
    perf$1.mark(endTag);
    perf$1.measure(`<${formatComponentName(instance, instance.type)}> ${type}`, startTag, endTag);
    perf$1.clearMarks(startTag);
    perf$1.clearMarks(endTag);
  }
  {
    devtoolsPerfEnd(instance, type, isSupported$1() ? perf$1.now() : Date.now());
  }
}
function isSupported$1() {
  if (supported$1 !== void 0) {
    return supported$1;
  }
  if (typeof window !== "undefined" && window.performance) {
    supported$1 = true;
    perf$1 = window.performance;
  } else {
    supported$1 = false;
  }
  return supported$1;
}
function initFeatureFlags() {
  const needWarn = [];
  if (needWarn.length) {
    const multi = needWarn.length > 1;
    console.warn(`Feature flag${multi ? `s` : ``} ${needWarn.join(", ")} ${multi ? `are` : `is`} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`);
  }
}
const queuePostRenderEffect = queueEffectWithSuspense;
function createHydrationRenderer(options2) {
  return baseCreateRenderer(options2, createHydrationFunctions);
}
function baseCreateRenderer(options2, createHydrationFns) {
  {
    initFeatureFlags();
  }
  const target = getGlobalThis();
  target.__VUE__ = true;
  {
    setDevtoolsHook(target.__VUE_DEVTOOLS_GLOBAL_HOOK__, target);
  }
  const { insert: hostInsert, remove: hostRemove, patchProp: hostPatchProp, createElement: hostCreateElement, createText: hostCreateText, createComment: hostCreateComment, setText: hostSetText, setElementText: hostSetElementText, parentNode: hostParentNode, nextSibling: hostNextSibling, setScopeId: hostSetScopeId = NOOP, cloneNode: hostCloneNode, insertStaticContent: hostInsertStaticContent } = options2;
  const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, isSVG = false, slotScopeIds = null, optimized = isHmrUpdating ? false : !!n2.dynamicChildren) => {
    if (n1 === n2) {
      return;
    }
    if (n1 && !isSameVNodeType(n1, n2)) {
      anchor = getNextHostNode(n1);
      unmount(n1, parentComponent, parentSuspense, true);
      n1 = null;
    }
    if (n2.patchFlag === -2) {
      optimized = false;
      n2.dynamicChildren = null;
    }
    const { type, ref: ref2, shapeFlag } = n2;
    switch (type) {
      case Text:
        processText(n1, n2, container, anchor);
        break;
      case Comment:
        processCommentNode(n1, n2, container, anchor);
        break;
      case Static:
        if (n1 == null) {
          mountStaticNode(n2, container, anchor, isSVG);
        } else {
          patchStaticNode(n1, n2, container, isSVG);
        }
        break;
      case Fragment:
        processFragment(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        break;
      default:
        if (shapeFlag & 1) {
          processElement(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (shapeFlag & 6) {
          processComponent(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (shapeFlag & 64) {
          type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);
        } else if (shapeFlag & 128) {
          type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);
        } else {
          warn$1("Invalid VNode type:", type, `(${typeof type})`);
        }
    }
    if (ref2 != null && parentComponent) {
      setRef(ref2, n1 && n1.ref, parentSuspense, n2 || n1, !n2);
    }
  };
  const processText = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(n2.el = hostCreateText(n2.children), container, anchor);
    } else {
      const el = n2.el = n1.el;
      if (n2.children !== n1.children) {
        hostSetText(el, n2.children);
      }
    }
  };
  const processCommentNode = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(n2.el = hostCreateComment(n2.children || ""), container, anchor);
    } else {
      n2.el = n1.el;
    }
  };
  const mountStaticNode = (n2, container, anchor, isSVG) => {
    [n2.el, n2.anchor] = hostInsertStaticContent(n2.children, container, anchor, isSVG, n2.el, n2.anchor);
  };
  const patchStaticNode = (n1, n2, container, isSVG) => {
    if (n2.children !== n1.children) {
      const anchor = hostNextSibling(n1.anchor);
      removeStaticNode(n1);
      [n2.el, n2.anchor] = hostInsertStaticContent(n2.children, container, anchor, isSVG);
    } else {
      n2.el = n1.el;
      n2.anchor = n1.anchor;
    }
  };
  const moveStaticNode = ({ el, anchor }, container, nextSibling) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostInsert(el, container, nextSibling);
      el = next;
    }
    hostInsert(anchor, container, nextSibling);
  };
  const removeStaticNode = ({ el, anchor }) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostRemove(el);
      el = next;
    }
    hostRemove(anchor);
  };
  const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    isSVG = isSVG || n2.type === "svg";
    if (n1 == null) {
      mountElement(n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    } else {
      patchElement(n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
  };
  const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    let el;
    let vnodeHook;
    const { type, props, shapeFlag, transition, patchFlag, dirs } = vnode;
    {
      el = vnode.el = hostCreateElement(vnode.type, isSVG, props && props.is, props);
      if (shapeFlag & 8) {
        hostSetElementText(el, vnode.children);
      } else if (shapeFlag & 16) {
        mountChildren(vnode.children, el, null, parentComponent, parentSuspense, isSVG && type !== "foreignObject", slotScopeIds, optimized);
      }
      if (dirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "created");
      }
      if (props) {
        for (const key in props) {
          if (key !== "value" && !isReservedProp(key)) {
            hostPatchProp(el, key, null, props[key], isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
          }
        }
        if ("value" in props) {
          hostPatchProp(el, "value", null, props.value);
        }
        if (vnodeHook = props.onVnodeBeforeMount) {
          invokeVNodeHook(vnodeHook, parentComponent, vnode);
        }
      }
      setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);
    }
    {
      Object.defineProperty(el, "__vnode", {
        value: vnode,
        enumerable: false
      });
      Object.defineProperty(el, "__vueParentComponent", {
        value: parentComponent,
        enumerable: false
      });
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "beforeMount");
    }
    const needCallTransitionHooks = (!parentSuspense || parentSuspense && !parentSuspense.pendingBranch) && transition && !transition.persisted;
    if (needCallTransitionHooks) {
      transition.beforeEnter(el);
    }
    hostInsert(el, container, anchor);
    if ((vnodeHook = props && props.onVnodeMounted) || needCallTransitionHooks || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        needCallTransitionHooks && transition.enter(el);
        dirs && invokeDirectiveHook(vnode, null, parentComponent, "mounted");
      }, parentSuspense);
    }
  };
  const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {
    if (scopeId) {
      hostSetScopeId(el, scopeId);
    }
    if (slotScopeIds) {
      for (let i2 = 0; i2 < slotScopeIds.length; i2++) {
        hostSetScopeId(el, slotScopeIds[i2]);
      }
    }
    if (parentComponent) {
      let subTree = parentComponent.subTree;
      if (subTree.patchFlag > 0 && subTree.patchFlag & 2048) {
        subTree = filterSingleRoot(subTree.children) || subTree;
      }
      if (vnode === subTree) {
        const parentVNode = parentComponent.vnode;
        setScopeId(el, parentVNode, parentVNode.scopeId, parentVNode.slotScopeIds, parentComponent.parent);
      }
    }
  };
  const mountChildren = (children, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, start = 0) => {
    for (let i2 = start; i2 < children.length; i2++) {
      const child = children[i2] = optimized ? cloneIfMounted(children[i2]) : normalizeVNode(children[i2]);
      patch(null, child, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
  };
  const patchElement = (n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    const el = n2.el = n1.el;
    let { patchFlag, dynamicChildren, dirs } = n2;
    patchFlag |= n1.patchFlag & 16;
    const oldProps = n1.props || EMPTY_OBJ;
    const newProps = n2.props || EMPTY_OBJ;
    let vnodeHook;
    parentComponent && toggleRecurse(parentComponent, false);
    if (vnodeHook = newProps.onVnodeBeforeUpdate) {
      invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
    }
    if (dirs) {
      invokeDirectiveHook(n2, n1, parentComponent, "beforeUpdate");
    }
    parentComponent && toggleRecurse(parentComponent, true);
    if (isHmrUpdating) {
      patchFlag = 0;
      optimized = false;
      dynamicChildren = null;
    }
    const areChildrenSVG = isSVG && n2.type !== "foreignObject";
    if (dynamicChildren) {
      patchBlockChildren(n1.dynamicChildren, dynamicChildren, el, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds);
      if (parentComponent && parentComponent.type.__hmrId) {
        traverseStaticChildren(n1, n2);
      }
    } else if (!optimized) {
      patchChildren(n1, n2, el, null, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds, false);
    }
    if (patchFlag > 0) {
      if (patchFlag & 16) {
        patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);
      } else {
        if (patchFlag & 2) {
          if (oldProps.class !== newProps.class) {
            hostPatchProp(el, "class", null, newProps.class, isSVG);
          }
        }
        if (patchFlag & 4) {
          hostPatchProp(el, "style", oldProps.style, newProps.style, isSVG);
        }
        if (patchFlag & 8) {
          const propsToUpdate = n2.dynamicProps;
          for (let i2 = 0; i2 < propsToUpdate.length; i2++) {
            const key = propsToUpdate[i2];
            const prev = oldProps[key];
            const next = newProps[key];
            if (next !== prev || key === "value") {
              hostPatchProp(el, key, prev, next, isSVG, n1.children, parentComponent, parentSuspense, unmountChildren);
            }
          }
        }
      }
      if (patchFlag & 1) {
        if (n1.children !== n2.children) {
          hostSetElementText(el, n2.children);
        }
      }
    } else if (!optimized && dynamicChildren == null) {
      patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);
    }
    if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
        dirs && invokeDirectiveHook(n2, n1, parentComponent, "updated");
      }, parentSuspense);
    }
  };
  const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, isSVG, slotScopeIds) => {
    for (let i2 = 0; i2 < newChildren.length; i2++) {
      const oldVNode = oldChildren[i2];
      const newVNode = newChildren[i2];
      const container = oldVNode.el && (oldVNode.type === Fragment || !isSameVNodeType(oldVNode, newVNode) || oldVNode.shapeFlag & (6 | 64)) ? hostParentNode(oldVNode.el) : fallbackContainer;
      patch(oldVNode, newVNode, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, true);
    }
  };
  const patchProps = (el, vnode, oldProps, newProps, parentComponent, parentSuspense, isSVG) => {
    if (oldProps !== newProps) {
      for (const key in newProps) {
        if (isReservedProp(key))
          continue;
        const next = newProps[key];
        const prev = oldProps[key];
        if (next !== prev && key !== "value") {
          hostPatchProp(el, key, prev, next, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
        }
      }
      if (oldProps !== EMPTY_OBJ) {
        for (const key in oldProps) {
          if (!isReservedProp(key) && !(key in newProps)) {
            hostPatchProp(el, key, oldProps[key], null, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
          }
        }
      }
      if ("value" in newProps) {
        hostPatchProp(el, "value", oldProps.value, newProps.value);
      }
    }
  };
  const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    const fragmentStartAnchor = n2.el = n1 ? n1.el : hostCreateText("");
    const fragmentEndAnchor = n2.anchor = n1 ? n1.anchor : hostCreateText("");
    let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;
    if (isHmrUpdating || patchFlag & 2048) {
      patchFlag = 0;
      optimized = false;
      dynamicChildren = null;
    }
    if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;
    }
    if (n1 == null) {
      hostInsert(fragmentStartAnchor, container, anchor);
      hostInsert(fragmentEndAnchor, container, anchor);
      mountChildren(n2.children, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    } else {
      if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && n1.dynamicChildren) {
        patchBlockChildren(n1.dynamicChildren, dynamicChildren, container, parentComponent, parentSuspense, isSVG, slotScopeIds);
        if (parentComponent && parentComponent.type.__hmrId) {
          traverseStaticChildren(n1, n2);
        } else if (n2.key != null || parentComponent && n2 === parentComponent.subTree) {
          traverseStaticChildren(n1, n2, true);
        }
      } else {
        patchChildren(n1, n2, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      }
    }
  };
  const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    n2.slotScopeIds = slotScopeIds;
    if (n1 == null) {
      if (n2.shapeFlag & 512) {
        parentComponent.ctx.activate(n2, container, anchor, isSVG, optimized);
      } else {
        mountComponent(n2, container, anchor, parentComponent, parentSuspense, isSVG, optimized);
      }
    } else {
      updateComponent(n1, n2, optimized);
    }
  };
  const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, isSVG, optimized) => {
    const instance = initialVNode.component = createComponentInstance(initialVNode, parentComponent, parentSuspense);
    if (instance.type.__hmrId) {
      registerHMR(instance);
    }
    {
      pushWarningContext(initialVNode);
      startMeasure(instance, `mount`);
    }
    if (isKeepAlive(initialVNode)) {
      instance.ctx.renderer = internals;
    }
    {
      {
        startMeasure(instance, `init`);
      }
      setupComponent(instance);
      {
        endMeasure(instance, `init`);
      }
    }
    if (instance.asyncDep) {
      parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect);
      if (!initialVNode.el) {
        const placeholder = instance.subTree = createVNode(Comment);
        processCommentNode(null, placeholder, container, anchor);
      }
      return;
    }
    setupRenderEffect(instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized);
    {
      popWarningContext();
      endMeasure(instance, `mount`);
    }
  };
  const updateComponent = (n1, n2, optimized) => {
    const instance = n2.component = n1.component;
    if (shouldUpdateComponent(n1, n2, optimized)) {
      if (instance.asyncDep && !instance.asyncResolved) {
        {
          pushWarningContext(n2);
        }
        updateComponentPreRender(instance, n2, optimized);
        {
          popWarningContext();
        }
        return;
      } else {
        instance.next = n2;
        invalidateJob(instance.update);
        instance.update();
      }
    } else {
      n2.el = n1.el;
      instance.vnode = n2;
    }
  };
  const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized) => {
    const componentUpdateFn = () => {
      if (!instance.isMounted) {
        let vnodeHook;
        const { el, props } = initialVNode;
        const { bm, m: m2, parent } = instance;
        const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);
        toggleRecurse(instance, false);
        if (bm) {
          invokeArrayFns(bm);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeBeforeMount)) {
          invokeVNodeHook(vnodeHook, parent, initialVNode);
        }
        toggleRecurse(instance, true);
        if (el && hydrateNode) {
          const hydrateSubTree = () => {
            {
              startMeasure(instance, `render`);
            }
            instance.subTree = renderComponentRoot(instance);
            {
              endMeasure(instance, `render`);
            }
            {
              startMeasure(instance, `hydrate`);
            }
            hydrateNode(el, instance.subTree, instance, parentSuspense, null);
            {
              endMeasure(instance, `hydrate`);
            }
          };
          if (isAsyncWrapperVNode) {
            initialVNode.type.__asyncLoader().then(
              () => !instance.isUnmounted && hydrateSubTree()
            );
          } else {
            hydrateSubTree();
          }
        } else {
          {
            startMeasure(instance, `render`);
          }
          const subTree = instance.subTree = renderComponentRoot(instance);
          {
            endMeasure(instance, `render`);
          }
          {
            startMeasure(instance, `patch`);
          }
          patch(null, subTree, container, anchor, instance, parentSuspense, isSVG);
          {
            endMeasure(instance, `patch`);
          }
          initialVNode.el = subTree.el;
        }
        if (m2) {
          queuePostRenderEffect(m2, parentSuspense);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeMounted)) {
          const scopedInitialVNode = initialVNode;
          queuePostRenderEffect(() => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode), parentSuspense);
        }
        if (initialVNode.shapeFlag & 256 || parent && isAsyncWrapper(parent.vnode) && parent.vnode.shapeFlag & 256) {
          instance.a && queuePostRenderEffect(instance.a, parentSuspense);
        }
        instance.isMounted = true;
        {
          devtoolsComponentAdded(instance);
        }
        initialVNode = container = anchor = null;
      } else {
        let { next, bu, u: u2, parent, vnode } = instance;
        let originNext = next;
        let vnodeHook;
        {
          pushWarningContext(next || instance.vnode);
        }
        toggleRecurse(instance, false);
        if (next) {
          next.el = vnode.el;
          updateComponentPreRender(instance, next, optimized);
        } else {
          next = vnode;
        }
        if (bu) {
          invokeArrayFns(bu);
        }
        if (vnodeHook = next.props && next.props.onVnodeBeforeUpdate) {
          invokeVNodeHook(vnodeHook, parent, next, vnode);
        }
        toggleRecurse(instance, true);
        {
          startMeasure(instance, `render`);
        }
        const nextTree = renderComponentRoot(instance);
        {
          endMeasure(instance, `render`);
        }
        const prevTree = instance.subTree;
        instance.subTree = nextTree;
        {
          startMeasure(instance, `patch`);
        }
        patch(
          prevTree,
          nextTree,
          hostParentNode(prevTree.el),
          getNextHostNode(prevTree),
          instance,
          parentSuspense,
          isSVG
        );
        {
          endMeasure(instance, `patch`);
        }
        next.el = nextTree.el;
        if (originNext === null) {
          updateHOCHostEl(instance, nextTree.el);
        }
        if (u2) {
          queuePostRenderEffect(u2, parentSuspense);
        }
        if (vnodeHook = next.props && next.props.onVnodeUpdated) {
          queuePostRenderEffect(() => invokeVNodeHook(vnodeHook, parent, next, vnode), parentSuspense);
        }
        {
          devtoolsComponentUpdated(instance);
        }
        {
          popWarningContext();
        }
      }
    };
    const effect = instance.effect = new ReactiveEffect(
      componentUpdateFn,
      () => queueJob(update),
      instance.scope
    );
    const update = instance.update = () => effect.run();
    update.id = instance.uid;
    toggleRecurse(instance, true);
    {
      effect.onTrack = instance.rtc ? (e2) => invokeArrayFns(instance.rtc, e2) : void 0;
      effect.onTrigger = instance.rtg ? (e2) => invokeArrayFns(instance.rtg, e2) : void 0;
      update.ownerInstance = instance;
    }
    update();
  };
  const updateComponentPreRender = (instance, nextVNode, optimized) => {
    nextVNode.component = instance;
    const prevProps = instance.vnode.props;
    instance.vnode = nextVNode;
    instance.next = null;
    updateProps(instance, nextVNode.props, prevProps, optimized);
    updateSlots(instance, nextVNode.children, optimized);
    pauseTracking();
    flushPreFlushCbs(void 0, instance.update);
    resetTracking();
  };
  const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized = false) => {
    const c1 = n1 && n1.children;
    const prevShapeFlag = n1 ? n1.shapeFlag : 0;
    const c2 = n2.children;
    const { patchFlag, shapeFlag } = n2;
    if (patchFlag > 0) {
      if (patchFlag & 128) {
        patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        return;
      } else if (patchFlag & 256) {
        patchUnkeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        return;
      }
    }
    if (shapeFlag & 8) {
      if (prevShapeFlag & 16) {
        unmountChildren(c1, parentComponent, parentSuspense);
      }
      if (c2 !== c1) {
        hostSetElementText(container, c2);
      }
    } else {
      if (prevShapeFlag & 16) {
        if (shapeFlag & 16) {
          patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else {
          unmountChildren(c1, parentComponent, parentSuspense, true);
        }
      } else {
        if (prevShapeFlag & 8) {
          hostSetElementText(container, "");
        }
        if (shapeFlag & 16) {
          mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        }
      }
    }
  };
  const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    c1 = c1 || EMPTY_ARR;
    c2 = c2 || EMPTY_ARR;
    const oldLength = c1.length;
    const newLength = c2.length;
    const commonLength = Math.min(oldLength, newLength);
    let i2;
    for (i2 = 0; i2 < commonLength; i2++) {
      const nextChild = c2[i2] = optimized ? cloneIfMounted(c2[i2]) : normalizeVNode(c2[i2]);
      patch(c1[i2], nextChild, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
    if (oldLength > newLength) {
      unmountChildren(c1, parentComponent, parentSuspense, true, false, commonLength);
    } else {
      mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, commonLength);
    }
  };
  const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    let i2 = 0;
    const l2 = c2.length;
    let e1 = c1.length - 1;
    let e2 = l2 - 1;
    while (i2 <= e1 && i2 <= e2) {
      const n1 = c1[i2];
      const n2 = c2[i2] = optimized ? cloneIfMounted(c2[i2]) : normalizeVNode(c2[i2]);
      if (isSameVNodeType(n1, n2)) {
        patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      } else {
        break;
      }
      i2++;
    }
    while (i2 <= e1 && i2 <= e2) {
      const n1 = c1[e1];
      const n2 = c2[e2] = optimized ? cloneIfMounted(c2[e2]) : normalizeVNode(c2[e2]);
      if (isSameVNodeType(n1, n2)) {
        patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      } else {
        break;
      }
      e1--;
      e2--;
    }
    if (i2 > e1) {
      if (i2 <= e2) {
        const nextPos = e2 + 1;
        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;
        while (i2 <= e2) {
          patch(null, c2[i2] = optimized ? cloneIfMounted(c2[i2]) : normalizeVNode(c2[i2]), container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
          i2++;
        }
      }
    } else if (i2 > e2) {
      while (i2 <= e1) {
        unmount(c1[i2], parentComponent, parentSuspense, true);
        i2++;
      }
    } else {
      const s1 = i2;
      const s2 = i2;
      const keyToNewIndexMap = /* @__PURE__ */ new Map();
      for (i2 = s2; i2 <= e2; i2++) {
        const nextChild = c2[i2] = optimized ? cloneIfMounted(c2[i2]) : normalizeVNode(c2[i2]);
        if (nextChild.key != null) {
          if (keyToNewIndexMap.has(nextChild.key)) {
            warn$1(`Duplicate keys found during update:`, JSON.stringify(nextChild.key), `Make sure keys are unique.`);
          }
          keyToNewIndexMap.set(nextChild.key, i2);
        }
      }
      let j2;
      let patched = 0;
      const toBePatched = e2 - s2 + 1;
      let moved = false;
      let maxNewIndexSoFar = 0;
      const newIndexToOldIndexMap = new Array(toBePatched);
      for (i2 = 0; i2 < toBePatched; i2++)
        newIndexToOldIndexMap[i2] = 0;
      for (i2 = s1; i2 <= e1; i2++) {
        const prevChild = c1[i2];
        if (patched >= toBePatched) {
          unmount(prevChild, parentComponent, parentSuspense, true);
          continue;
        }
        let newIndex;
        if (prevChild.key != null) {
          newIndex = keyToNewIndexMap.get(prevChild.key);
        } else {
          for (j2 = s2; j2 <= e2; j2++) {
            if (newIndexToOldIndexMap[j2 - s2] === 0 && isSameVNodeType(prevChild, c2[j2])) {
              newIndex = j2;
              break;
            }
          }
        }
        if (newIndex === void 0) {
          unmount(prevChild, parentComponent, parentSuspense, true);
        } else {
          newIndexToOldIndexMap[newIndex - s2] = i2 + 1;
          if (newIndex >= maxNewIndexSoFar) {
            maxNewIndexSoFar = newIndex;
          } else {
            moved = true;
          }
          patch(prevChild, c2[newIndex], container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
          patched++;
        }
      }
      const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : EMPTY_ARR;
      j2 = increasingNewIndexSequence.length - 1;
      for (i2 = toBePatched - 1; i2 >= 0; i2--) {
        const nextIndex = s2 + i2;
        const nextChild = c2[nextIndex];
        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;
        if (newIndexToOldIndexMap[i2] === 0) {
          patch(null, nextChild, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (moved) {
          if (j2 < 0 || i2 !== increasingNewIndexSequence[j2]) {
            move(nextChild, container, anchor, 2);
          } else {
            j2--;
          }
        }
      }
    }
  };
  const move = (vnode, container, anchor, moveType, parentSuspense = null) => {
    const { el, type, transition, children, shapeFlag } = vnode;
    if (shapeFlag & 6) {
      move(vnode.component.subTree, container, anchor, moveType);
      return;
    }
    if (shapeFlag & 128) {
      vnode.suspense.move(container, anchor, moveType);
      return;
    }
    if (shapeFlag & 64) {
      type.move(vnode, container, anchor, internals);
      return;
    }
    if (type === Fragment) {
      hostInsert(el, container, anchor);
      for (let i2 = 0; i2 < children.length; i2++) {
        move(children[i2], container, anchor, moveType);
      }
      hostInsert(vnode.anchor, container, anchor);
      return;
    }
    if (type === Static) {
      moveStaticNode(vnode, container, anchor);
      return;
    }
    const needTransition = moveType !== 2 && shapeFlag & 1 && transition;
    if (needTransition) {
      if (moveType === 0) {
        transition.beforeEnter(el);
        hostInsert(el, container, anchor);
        queuePostRenderEffect(() => transition.enter(el), parentSuspense);
      } else {
        const { leave, delayLeave, afterLeave } = transition;
        const remove3 = () => hostInsert(el, container, anchor);
        const performLeave = () => {
          leave(el, () => {
            remove3();
            afterLeave && afterLeave();
          });
        };
        if (delayLeave) {
          delayLeave(el, remove3, performLeave);
        } else {
          performLeave();
        }
      }
    } else {
      hostInsert(el, container, anchor);
    }
  };
  const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {
    const { type, props, ref: ref2, children, dynamicChildren, shapeFlag, patchFlag, dirs } = vnode;
    if (ref2 != null) {
      setRef(ref2, null, parentSuspense, vnode, true);
    }
    if (shapeFlag & 256) {
      parentComponent.ctx.deactivate(vnode);
      return;
    }
    const shouldInvokeDirs = shapeFlag & 1 && dirs;
    const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);
    let vnodeHook;
    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeBeforeUnmount)) {
      invokeVNodeHook(vnodeHook, parentComponent, vnode);
    }
    if (shapeFlag & 6) {
      unmountComponent(vnode.component, parentSuspense, doRemove);
    } else {
      if (shapeFlag & 128) {
        vnode.suspense.unmount(parentSuspense, doRemove);
        return;
      }
      if (shouldInvokeDirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "beforeUnmount");
      }
      if (shapeFlag & 64) {
        vnode.type.remove(vnode, parentComponent, parentSuspense, optimized, internals, doRemove);
      } else if (dynamicChildren && (type !== Fragment || patchFlag > 0 && patchFlag & 64)) {
        unmountChildren(dynamicChildren, parentComponent, parentSuspense, false, true);
      } else if (type === Fragment && patchFlag & (128 | 256) || !optimized && shapeFlag & 16) {
        unmountChildren(children, parentComponent, parentSuspense);
      }
      if (doRemove) {
        remove2(vnode);
      }
    }
    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeUnmounted) || shouldInvokeDirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        shouldInvokeDirs && invokeDirectiveHook(vnode, null, parentComponent, "unmounted");
      }, parentSuspense);
    }
  };
  const remove2 = (vnode) => {
    const { type, el, anchor, transition } = vnode;
    if (type === Fragment) {
      if (vnode.patchFlag > 0 && vnode.patchFlag & 2048 && transition && !transition.persisted) {
        vnode.children.forEach((child) => {
          if (child.type === Comment) {
            hostRemove(child.el);
          } else {
            remove2(child);
          }
        });
      } else {
        removeFragment(el, anchor);
      }
      return;
    }
    if (type === Static) {
      removeStaticNode(vnode);
      return;
    }
    const performRemove = () => {
      hostRemove(el);
      if (transition && !transition.persisted && transition.afterLeave) {
        transition.afterLeave();
      }
    };
    if (vnode.shapeFlag & 1 && transition && !transition.persisted) {
      const { leave, delayLeave } = transition;
      const performLeave = () => leave(el, performRemove);
      if (delayLeave) {
        delayLeave(vnode.el, performRemove, performLeave);
      } else {
        performLeave();
      }
    } else {
      performRemove();
    }
  };
  const removeFragment = (cur, end) => {
    let next;
    while (cur !== end) {
      next = hostNextSibling(cur);
      hostRemove(cur);
      cur = next;
    }
    hostRemove(end);
  };
  const unmountComponent = (instance, parentSuspense, doRemove) => {
    if (instance.type.__hmrId) {
      unregisterHMR(instance);
    }
    const { bum, scope, update, subTree, um } = instance;
    if (bum) {
      invokeArrayFns(bum);
    }
    scope.stop();
    if (update) {
      update.active = false;
      unmount(subTree, instance, parentSuspense, doRemove);
    }
    if (um) {
      queuePostRenderEffect(um, parentSuspense);
    }
    queuePostRenderEffect(() => {
      instance.isUnmounted = true;
    }, parentSuspense);
    if (parentSuspense && parentSuspense.pendingBranch && !parentSuspense.isUnmounted && instance.asyncDep && !instance.asyncResolved && instance.suspenseId === parentSuspense.pendingId) {
      parentSuspense.deps--;
      if (parentSuspense.deps === 0) {
        parentSuspense.resolve();
      }
    }
    {
      devtoolsComponentRemoved(instance);
    }
  };
  const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start = 0) => {
    for (let i2 = start; i2 < children.length; i2++) {
      unmount(children[i2], parentComponent, parentSuspense, doRemove, optimized);
    }
  };
  const getNextHostNode = (vnode) => {
    if (vnode.shapeFlag & 6) {
      return getNextHostNode(vnode.component.subTree);
    }
    if (vnode.shapeFlag & 128) {
      return vnode.suspense.next();
    }
    return hostNextSibling(vnode.anchor || vnode.el);
  };
  const render = (vnode, container, isSVG) => {
    if (vnode == null) {
      if (container._vnode) {
        unmount(container._vnode, null, null, true);
      }
    } else {
      patch(container._vnode || null, vnode, container, null, null, null, isSVG);
    }
    flushPostFlushCbs();
    container._vnode = vnode;
  };
  const internals = {
    p: patch,
    um: unmount,
    m: move,
    r: remove2,
    mt: mountComponent,
    mc: mountChildren,
    pc: patchChildren,
    pbc: patchBlockChildren,
    n: getNextHostNode,
    o: options2
  };
  let hydrate;
  let hydrateNode;
  if (createHydrationFns) {
    [hydrate, hydrateNode] = createHydrationFns(internals);
  }
  return {
    render,
    hydrate,
    createApp: createAppAPI(render, hydrate)
  };
}
function toggleRecurse({ effect, update }, allowed) {
  effect.allowRecurse = update.allowRecurse = allowed;
}
function traverseStaticChildren(n1, n2, shallow = false) {
  const ch1 = n1.children;
  const ch2 = n2.children;
  if (isArray$1(ch1) && isArray$1(ch2)) {
    for (let i2 = 0; i2 < ch1.length; i2++) {
      const c1 = ch1[i2];
      let c2 = ch2[i2];
      if (c2.shapeFlag & 1 && !c2.dynamicChildren) {
        if (c2.patchFlag <= 0 || c2.patchFlag === 32) {
          c2 = ch2[i2] = cloneIfMounted(ch2[i2]);
          c2.el = c1.el;
        }
        if (!shallow)
          traverseStaticChildren(c1, c2);
      }
      if (c2.type === Comment && !c2.el) {
        c2.el = c1.el;
      }
    }
  }
}
function getSequence(arr) {
  const p2 = arr.slice();
  const result = [0];
  let i2, j2, u2, v2, c2;
  const len = arr.length;
  for (i2 = 0; i2 < len; i2++) {
    const arrI = arr[i2];
    if (arrI !== 0) {
      j2 = result[result.length - 1];
      if (arr[j2] < arrI) {
        p2[i2] = j2;
        result.push(i2);
        continue;
      }
      u2 = 0;
      v2 = result.length - 1;
      while (u2 < v2) {
        c2 = u2 + v2 >> 1;
        if (arr[result[c2]] < arrI) {
          u2 = c2 + 1;
        } else {
          v2 = c2;
        }
      }
      if (arrI < arr[result[u2]]) {
        if (u2 > 0) {
          p2[i2] = result[u2 - 1];
        }
        result[u2] = i2;
      }
    }
  }
  u2 = result.length;
  v2 = result[u2 - 1];
  while (u2-- > 0) {
    result[u2] = v2;
    v2 = p2[v2];
  }
  return result;
}
const isTeleport = (type) => type.__isTeleport;
const Fragment = Symbol("Fragment");
const Text = Symbol("Text");
const Comment = Symbol("Comment");
const Static = Symbol("Static");
const blockStack = [];
let currentBlock = null;
function openBlock(disableTracking = false) {
  blockStack.push(currentBlock = disableTracking ? null : []);
}
function closeBlock() {
  blockStack.pop();
  currentBlock = blockStack[blockStack.length - 1] || null;
}
let isBlockTreeEnabled = 1;
function setBlockTracking(value) {
  isBlockTreeEnabled += value;
}
function setupBlock(vnode) {
  vnode.dynamicChildren = isBlockTreeEnabled > 0 ? currentBlock || EMPTY_ARR : null;
  closeBlock();
  if (isBlockTreeEnabled > 0 && currentBlock) {
    currentBlock.push(vnode);
  }
  return vnode;
}
function createElementBlock(type, props, children, patchFlag, dynamicProps, shapeFlag) {
  return setupBlock(createBaseVNode(type, props, children, patchFlag, dynamicProps, shapeFlag, true));
}
function createBlock(type, props, children, patchFlag, dynamicProps) {
  return setupBlock(createVNode(type, props, children, patchFlag, dynamicProps, true));
}
function isVNode(value) {
  return value ? value.__v_isVNode === true : false;
}
function isSameVNodeType(n1, n2) {
  if (n2.shapeFlag & 6 && hmrDirtyComponents.has(n2.type)) {
    return false;
  }
  return n1.type === n2.type && n1.key === n2.key;
}
const createVNodeWithArgsTransform = (...args) => {
  return _createVNode(...args);
};
const InternalObjectKey = `__vInternal`;
const normalizeKey = ({ key }) => key != null ? key : null;
const normalizeRef = ({ ref: ref2, ref_key, ref_for }) => {
  return ref2 != null ? isString$2(ref2) || isRef(ref2) || isFunction(ref2) ? { i: currentRenderingInstance, r: ref2, k: ref_key, f: !!ref_for } : ref2 : null;
};
function createBaseVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1, isBlockNode = false, needFullChildrenNormalization = false) {
  const vnode = {
    __v_isVNode: true,
    __v_skip: true,
    type,
    props,
    key: props && normalizeKey(props),
    ref: props && normalizeRef(props),
    scopeId: currentScopeId,
    slotScopeIds: null,
    children,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag,
    patchFlag,
    dynamicProps,
    dynamicChildren: null,
    appContext: null
  };
  if (needFullChildrenNormalization) {
    normalizeChildren(vnode, children);
    if (shapeFlag & 128) {
      type.normalize(vnode);
    }
  } else if (children) {
    vnode.shapeFlag |= isString$2(children) ? 8 : 16;
  }
  if (vnode.key !== vnode.key) {
    warn$1(`VNode created with invalid key (NaN). VNode type:`, vnode.type);
  }
  if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock && (vnode.patchFlag > 0 || shapeFlag & 6) && vnode.patchFlag !== 32) {
    currentBlock.push(vnode);
  }
  return vnode;
}
const createVNode = createVNodeWithArgsTransform;
function _createVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {
  if (!type || type === NULL_DYNAMIC_COMPONENT) {
    if (!type) {
      warn$1(`Invalid vnode type when creating vnode: ${type}.`);
    }
    type = Comment;
  }
  if (isVNode(type)) {
    const cloned = cloneVNode(type, props, true);
    if (children) {
      normalizeChildren(cloned, children);
    }
    if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {
      if (cloned.shapeFlag & 6) {
        currentBlock[currentBlock.indexOf(type)] = cloned;
      } else {
        currentBlock.push(cloned);
      }
    }
    cloned.patchFlag |= -2;
    return cloned;
  }
  if (isClassComponent(type)) {
    type = type.__vccOpts;
  }
  if (props) {
    props = guardReactiveProps(props);
    let { class: klass, style: style2 } = props;
    if (klass && !isString$2(klass)) {
      props.class = normalizeClass(klass);
    }
    if (isObject(style2)) {
      if (isProxy(style2) && !isArray$1(style2)) {
        style2 = extend({}, style2);
      }
      props.style = normalizeStyle(style2);
    }
  }
  const shapeFlag = isString$2(type) ? 1 : isSuspense(type) ? 128 : isTeleport(type) ? 64 : isObject(type) ? 4 : isFunction(type) ? 2 : 0;
  if (shapeFlag & 4 && isProxy(type)) {
    type = toRaw(type);
    warn$1(`Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with \`markRaw\` or using \`shallowRef\` instead of \`ref\`.`, `
Component that was made reactive: `, type);
  }
  return createBaseVNode(type, props, children, patchFlag, dynamicProps, shapeFlag, isBlockNode, true);
}
function guardReactiveProps(props) {
  if (!props)
    return null;
  return isProxy(props) || InternalObjectKey in props ? extend({}, props) : props;
}
function cloneVNode(vnode, extraProps, mergeRef = false) {
  const { props, ref: ref2, patchFlag, children } = vnode;
  const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props;
  const cloned = {
    __v_isVNode: true,
    __v_skip: true,
    type: vnode.type,
    props: mergedProps,
    key: mergedProps && normalizeKey(mergedProps),
    ref: extraProps && extraProps.ref ? mergeRef && ref2 ? isArray$1(ref2) ? ref2.concat(normalizeRef(extraProps)) : [ref2, normalizeRef(extraProps)] : normalizeRef(extraProps) : ref2,
    scopeId: vnode.scopeId,
    slotScopeIds: vnode.slotScopeIds,
    children: patchFlag === -1 && isArray$1(children) ? children.map(deepCloneVNode) : children,
    target: vnode.target,
    targetAnchor: vnode.targetAnchor,
    staticCount: vnode.staticCount,
    shapeFlag: vnode.shapeFlag,
    patchFlag: extraProps && vnode.type !== Fragment ? patchFlag === -1 ? 16 : patchFlag | 16 : patchFlag,
    dynamicProps: vnode.dynamicProps,
    dynamicChildren: vnode.dynamicChildren,
    appContext: vnode.appContext,
    dirs: vnode.dirs,
    transition: vnode.transition,
    component: vnode.component,
    suspense: vnode.suspense,
    ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),
    ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),
    el: vnode.el,
    anchor: vnode.anchor
  };
  return cloned;
}
function deepCloneVNode(vnode) {
  const cloned = cloneVNode(vnode);
  if (isArray$1(vnode.children)) {
    cloned.children = vnode.children.map(deepCloneVNode);
  }
  return cloned;
}
function createTextVNode(text = " ", flag = 0) {
  return createVNode(Text, null, text, flag);
}
function createStaticVNode(content, numberOfNodes) {
  const vnode = createVNode(Static, null, content);
  vnode.staticCount = numberOfNodes;
  return vnode;
}
function createCommentVNode(text = "", asBlock = false) {
  return asBlock ? (openBlock(), createBlock(Comment, null, text)) : createVNode(Comment, null, text);
}
function normalizeVNode(child) {
  if (child == null || typeof child === "boolean") {
    return createVNode(Comment);
  } else if (isArray$1(child)) {
    return createVNode(
      Fragment,
      null,
      child.slice()
    );
  } else if (typeof child === "object") {
    return cloneIfMounted(child);
  } else {
    return createVNode(Text, null, String(child));
  }
}
function cloneIfMounted(child) {
  return child.el === null || child.memo ? child : cloneVNode(child);
}
function normalizeChildren(vnode, children) {
  let type = 0;
  const { shapeFlag } = vnode;
  if (children == null) {
    children = null;
  } else if (isArray$1(children)) {
    type = 16;
  } else if (typeof children === "object") {
    if (shapeFlag & (1 | 64)) {
      const slot = children.default;
      if (slot) {
        slot._c && (slot._d = false);
        normalizeChildren(vnode, slot());
        slot._c && (slot._d = true);
      }
      return;
    } else {
      type = 32;
      const slotFlag = children._;
      if (!slotFlag && !(InternalObjectKey in children)) {
        children._ctx = currentRenderingInstance;
      } else if (slotFlag === 3 && currentRenderingInstance) {
        if (currentRenderingInstance.slots._ === 1) {
          children._ = 1;
        } else {
          children._ = 2;
          vnode.patchFlag |= 1024;
        }
      }
    }
  } else if (isFunction(children)) {
    children = { default: children, _ctx: currentRenderingInstance };
    type = 32;
  } else {
    children = String(children);
    if (shapeFlag & 64) {
      type = 16;
      children = [createTextVNode(children)];
    } else {
      type = 8;
    }
  }
  vnode.children = children;
  vnode.shapeFlag |= type;
}
function mergeProps(...args) {
  const ret = {};
  for (let i2 = 0; i2 < args.length; i2++) {
    const toMerge = args[i2];
    for (const key in toMerge) {
      if (key === "class") {
        if (ret.class !== toMerge.class) {
          ret.class = normalizeClass([ret.class, toMerge.class]);
        }
      } else if (key === "style") {
        ret.style = normalizeStyle([ret.style, toMerge.style]);
      } else if (isOn(key)) {
        const existing = ret[key];
        const incoming = toMerge[key];
        if (incoming && existing !== incoming && !(isArray$1(existing) && existing.includes(incoming))) {
          ret[key] = existing ? [].concat(existing, incoming) : incoming;
        }
      } else if (key !== "") {
        ret[key] = toMerge[key];
      }
    }
  }
  return ret;
}
function invokeVNodeHook(hook, instance, vnode, prevVNode = null) {
  callWithAsyncErrorHandling(hook, instance, 7, [
    vnode,
    prevVNode
  ]);
}
const emptyAppContext = createAppContext();
let uid$1 = 0;
function createComponentInstance(vnode, parent, suspense) {
  const type = vnode.type;
  const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;
  const instance = {
    uid: uid$1++,
    vnode,
    type,
    parent,
    appContext,
    root: null,
    next: null,
    subTree: null,
    effect: null,
    update: null,
    scope: new EffectScope(true),
    render: null,
    proxy: null,
    exposed: null,
    exposeProxy: null,
    withProxy: null,
    provides: parent ? parent.provides : Object.create(appContext.provides),
    accessCache: null,
    renderCache: [],
    components: null,
    directives: null,
    propsOptions: normalizePropsOptions(type, appContext),
    emitsOptions: normalizeEmitsOptions(type, appContext),
    emit: null,
    emitted: null,
    propsDefaults: EMPTY_OBJ,
    inheritAttrs: type.inheritAttrs,
    ctx: EMPTY_OBJ,
    data: EMPTY_OBJ,
    props: EMPTY_OBJ,
    attrs: EMPTY_OBJ,
    slots: EMPTY_OBJ,
    refs: EMPTY_OBJ,
    setupState: EMPTY_OBJ,
    setupContext: null,
    suspense,
    suspenseId: suspense ? suspense.pendingId : 0,
    asyncDep: null,
    asyncResolved: false,
    isMounted: false,
    isUnmounted: false,
    isDeactivated: false,
    bc: null,
    c: null,
    bm: null,
    m: null,
    bu: null,
    u: null,
    um: null,
    bum: null,
    da: null,
    a: null,
    rtg: null,
    rtc: null,
    ec: null,
    sp: null
  };
  {
    instance.ctx = createDevRenderContext(instance);
  }
  instance.root = parent ? parent.root : instance;
  instance.emit = emit$1.bind(null, instance);
  if (vnode.ce) {
    vnode.ce(instance);
  }
  return instance;
}
let currentInstance = null;
const getCurrentInstance = () => currentInstance || currentRenderingInstance;
const setCurrentInstance = (instance) => {
  currentInstance = instance;
  instance.scope.on();
};
const unsetCurrentInstance = () => {
  currentInstance && currentInstance.scope.off();
  currentInstance = null;
};
const isBuiltInTag = /* @__PURE__ */ makeMap("slot,component");
function validateComponentName(name, config) {
  const appIsNativeTag = config.isNativeTag || NO;
  if (isBuiltInTag(name) || appIsNativeTag(name)) {
    warn$1("Do not use built-in or reserved HTML elements as component id: " + name);
  }
}
function isStatefulComponent(instance) {
  return instance.vnode.shapeFlag & 4;
}
let isInSSRComponentSetup = false;
function setupComponent(instance, isSSR = false) {
  isInSSRComponentSetup = isSSR;
  const { props, children } = instance.vnode;
  const isStateful = isStatefulComponent(instance);
  initProps(instance, props, isStateful, isSSR);
  initSlots(instance, children);
  const setupResult = isStateful ? setupStatefulComponent(instance, isSSR) : void 0;
  isInSSRComponentSetup = false;
  return setupResult;
}
function setupStatefulComponent(instance, isSSR) {
  var _a2;
  const Component = instance.type;
  {
    if (Component.name) {
      validateComponentName(Component.name, instance.appContext.config);
    }
    if (Component.components) {
      const names = Object.keys(Component.components);
      for (let i2 = 0; i2 < names.length; i2++) {
        validateComponentName(names[i2], instance.appContext.config);
      }
    }
    if (Component.directives) {
      const names = Object.keys(Component.directives);
      for (let i2 = 0; i2 < names.length; i2++) {
        validateDirectiveName(names[i2]);
      }
    }
    if (Component.compilerOptions && isRuntimeOnly()) {
      warn$1(`"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.`);
    }
  }
  instance.accessCache = /* @__PURE__ */ Object.create(null);
  instance.proxy = markRaw(new Proxy(instance.ctx, PublicInstanceProxyHandlers));
  {
    exposePropsOnRenderContext(instance);
  }
  const { setup } = Component;
  if (setup) {
    const setupContext = instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null;
    setCurrentInstance(instance);
    pauseTracking();
    const setupResult = callWithErrorHandling(setup, instance, 0, [shallowReadonly(instance.props), setupContext]);
    resetTracking();
    unsetCurrentInstance();
    if (isPromise(setupResult)) {
      setupResult.then(unsetCurrentInstance, unsetCurrentInstance);
      if (isSSR) {
        return setupResult.then((resolvedResult) => {
          handleSetupResult(instance, resolvedResult, isSSR);
        }).catch((e2) => {
          handleError(e2, instance, 0);
        });
      } else {
        instance.asyncDep = setupResult;
        if (!instance.suspense) {
          const name = (_a2 = Component.name) !== null && _a2 !== void 0 ? _a2 : "Anonymous";
          warn$1(`Component <${name}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`);
        }
      }
    } else {
      handleSetupResult(instance, setupResult, isSSR);
    }
  } else {
    finishComponentSetup(instance, isSSR);
  }
}
function handleSetupResult(instance, setupResult, isSSR) {
  if (isFunction(setupResult)) {
    if (instance.type.__ssrInlineRender) {
      instance.ssrRender = setupResult;
    } else {
      instance.render = setupResult;
    }
  } else if (isObject(setupResult)) {
    if (isVNode(setupResult)) {
      warn$1(`setup() should not return VNodes directly - return a render function instead.`);
    }
    {
      instance.devtoolsRawSetupState = setupResult;
    }
    instance.setupState = proxyRefs(setupResult);
    {
      exposeSetupStateOnRenderContext(instance);
    }
  } else if (setupResult !== void 0) {
    warn$1(`setup() should return an object. Received: ${setupResult === null ? "null" : typeof setupResult}`);
  }
  finishComponentSetup(instance, isSSR);
}
let compile;
const isRuntimeOnly = () => !compile;
function finishComponentSetup(instance, isSSR, skipOptions) {
  const Component = instance.type;
  if (!instance.render) {
    if (!isSSR && compile && !Component.render) {
      const template = Component.template;
      if (template) {
        {
          startMeasure(instance, `compile`);
        }
        const { isCustomElement, compilerOptions } = instance.appContext.config;
        const { delimiters, compilerOptions: componentCompilerOptions } = Component;
        const finalCompilerOptions = extend(extend({
          isCustomElement,
          delimiters
        }, compilerOptions), componentCompilerOptions);
        Component.render = compile(template, finalCompilerOptions);
        {
          endMeasure(instance, `compile`);
        }
      }
    }
    instance.render = Component.render || NOOP;
  }
  {
    setCurrentInstance(instance);
    pauseTracking();
    applyOptions(instance);
    resetTracking();
    unsetCurrentInstance();
  }
  if (!Component.render && instance.render === NOOP && !isSSR) {
    if (Component.template) {
      warn$1(`Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".`);
    } else {
      warn$1(`Component is missing template or render function.`);
    }
  }
}
function createAttrsProxy(instance) {
  return new Proxy(
    instance.attrs,
    {
      get(target, key) {
        markAttrsAccessed();
        track(instance, "get", "$attrs");
        return target[key];
      },
      set() {
        warn$1(`setupContext.attrs is readonly.`);
        return false;
      },
      deleteProperty() {
        warn$1(`setupContext.attrs is readonly.`);
        return false;
      }
    }
  );
}
function createSetupContext(instance) {
  const expose = (exposed) => {
    if (instance.exposed) {
      warn$1(`expose() should be called only once per setup().`);
    }
    instance.exposed = exposed || {};
  };
  let attrs;
  {
    return Object.freeze({
      get attrs() {
        return attrs || (attrs = createAttrsProxy(instance));
      },
      get slots() {
        return shallowReadonly(instance.slots);
      },
      get emit() {
        return (event, ...args) => instance.emit(event, ...args);
      },
      expose
    });
  }
}
function getExposeProxy(instance) {
  if (instance.exposed) {
    return instance.exposeProxy || (instance.exposeProxy = new Proxy(proxyRefs(markRaw(instance.exposed)), {
      get(target, key) {
        if (key in target) {
          return target[key];
        } else if (key in publicPropertiesMap) {
          return publicPropertiesMap[key](instance);
        }
      }
    }));
  }
}
const classifyRE = /(?:^|[-_])(\w)/g;
const classify = (str) => str.replace(classifyRE, (c2) => c2.toUpperCase()).replace(/[-_]/g, "");
function getComponentName(Component, includeInferred = true) {
  return isFunction(Component) ? Component.displayName || Component.name : Component.name || includeInferred && Component.__name;
}
function formatComponentName(instance, Component, isRoot = false) {
  let name = getComponentName(Component);
  if (!name && Component.__file) {
    const match = Component.__file.match(/([^/\\]+)\.\w+$/);
    if (match) {
      name = match[1];
    }
  }
  if (!name && instance && instance.parent) {
    const inferFromRegistry = (registry) => {
      for (const key in registry) {
        if (registry[key] === Component) {
          return key;
        }
      }
    };
    name = inferFromRegistry(instance.components || instance.parent.type.components) || inferFromRegistry(instance.appContext.components);
  }
  return name ? classify(name) : isRoot ? `App` : `Anonymous`;
}
function isClassComponent(value) {
  return isFunction(value) && "__vccOpts" in value;
}
const computed = (getterOrOptions, debugOptions) => {
  return computed$1(getterOrOptions, debugOptions, isInSSRComponentSetup);
};
function h$1(type, propsOrChildren, children) {
  const l2 = arguments.length;
  if (l2 === 2) {
    if (isObject(propsOrChildren) && !isArray$1(propsOrChildren)) {
      if (isVNode(propsOrChildren)) {
        return createVNode(type, null, [propsOrChildren]);
      }
      return createVNode(type, propsOrChildren);
    } else {
      return createVNode(type, null, propsOrChildren);
    }
  } else {
    if (l2 > 3) {
      children = Array.prototype.slice.call(arguments, 2);
    } else if (l2 === 3 && isVNode(children)) {
      children = [children];
    }
    return createVNode(type, propsOrChildren, children);
  }
}
function isShallow(value) {
  return !!(value && value["__v_isShallow"]);
}
function initCustomFormatter() {
  if (typeof window === "undefined") {
    return;
  }
  const vueStyle = { style: "color:#3ba776" };
  const numberStyle = { style: "color:#0b1bc9" };
  const stringStyle = { style: "color:#b62e24" };
  const keywordStyle = { style: "color:#9d288c" };
  const formatter = {
    header(obj) {
      if (!isObject(obj)) {
        return null;
      }
      if (obj.__isVue) {
        return ["div", vueStyle, `VueInstance`];
      } else if (isRef(obj)) {
        return [
          "div",
          {},
          ["span", vueStyle, genRefFlag(obj)],
          "<",
          formatValue(obj.value),
          `>`
        ];
      } else if (isReactive(obj)) {
        return [
          "div",
          {},
          ["span", vueStyle, isShallow(obj) ? "ShallowReactive" : "Reactive"],
          "<",
          formatValue(obj),
          `>${isReadonly(obj) ? ` (readonly)` : ``}`
        ];
      } else if (isReadonly(obj)) {
        return [
          "div",
          {},
          ["span", vueStyle, isShallow(obj) ? "ShallowReadonly" : "Readonly"],
          "<",
          formatValue(obj),
          ">"
        ];
      }
      return null;
    },
    hasBody(obj) {
      return obj && obj.__isVue;
    },
    body(obj) {
      if (obj && obj.__isVue) {
        return [
          "div",
          {},
          ...formatInstance(obj.$)
        ];
      }
    }
  };
  function formatInstance(instance) {
    const blocks = [];
    if (instance.type.props && instance.props) {
      blocks.push(createInstanceBlock("props", toRaw(instance.props)));
    }
    if (instance.setupState !== EMPTY_OBJ) {
      blocks.push(createInstanceBlock("setup", instance.setupState));
    }
    if (instance.data !== EMPTY_OBJ) {
      blocks.push(createInstanceBlock("data", toRaw(instance.data)));
    }
    const computed2 = extractKeys(instance, "computed");
    if (computed2) {
      blocks.push(createInstanceBlock("computed", computed2));
    }
    const injected = extractKeys(instance, "inject");
    if (injected) {
      blocks.push(createInstanceBlock("injected", injected));
    }
    blocks.push([
      "div",
      {},
      [
        "span",
        {
          style: keywordStyle.style + ";opacity:0.66"
        },
        "$ (internal): "
      ],
      ["object", { object: instance }]
    ]);
    return blocks;
  }
  function createInstanceBlock(type, target) {
    target = extend({}, target);
    if (!Object.keys(target).length) {
      return ["span", {}];
    }
    return [
      "div",
      { style: "line-height:1.25em;margin-bottom:0.6em" },
      [
        "div",
        {
          style: "color:#476582"
        },
        type
      ],
      [
        "div",
        {
          style: "padding-left:1.25em"
        },
        ...Object.keys(target).map((key) => {
          return [
            "div",
            {},
            ["span", keywordStyle, key + ": "],
            formatValue(target[key], false)
          ];
        })
      ]
    ];
  }
  function formatValue(v2, asRaw = true) {
    if (typeof v2 === "number") {
      return ["span", numberStyle, v2];
    } else if (typeof v2 === "string") {
      return ["span", stringStyle, JSON.stringify(v2)];
    } else if (typeof v2 === "boolean") {
      return ["span", keywordStyle, v2];
    } else if (isObject(v2)) {
      return ["object", { object: asRaw ? toRaw(v2) : v2 }];
    } else {
      return ["span", stringStyle, String(v2)];
    }
  }
  function extractKeys(instance, type) {
    const Comp = instance.type;
    if (isFunction(Comp)) {
      return;
    }
    const extracted = {};
    for (const key in instance.ctx) {
      if (isKeyOfType(Comp, key, type)) {
        extracted[key] = instance.ctx[key];
      }
    }
    return extracted;
  }
  function isKeyOfType(Comp, key, type) {
    const opts = Comp[type];
    if (isArray$1(opts) && opts.includes(key) || isObject(opts) && key in opts) {
      return true;
    }
    if (Comp.extends && isKeyOfType(Comp.extends, key, type)) {
      return true;
    }
    if (Comp.mixins && Comp.mixins.some((m2) => isKeyOfType(m2, key, type))) {
      return true;
    }
  }
  function genRefFlag(v2) {
    if (isShallow(v2)) {
      return `ShallowRef`;
    }
    if (v2.effect) {
      return `ComputedRef`;
    }
    return `Ref`;
  }
  if (window.devtoolsFormatters) {
    window.devtoolsFormatters.push(formatter);
  } else {
    window.devtoolsFormatters = [formatter];
  }
}
const version = "3.2.37";
const svgNS = "http://www.w3.org/2000/svg";
const doc = typeof document !== "undefined" ? document : null;
const templateContainer = doc && /* @__PURE__ */ doc.createElement("template");
const nodeOps = {
  insert: (child, parent, anchor) => {
    parent.insertBefore(child, anchor || null);
  },
  remove: (child) => {
    const parent = child.parentNode;
    if (parent) {
      parent.removeChild(child);
    }
  },
  createElement: (tag, isSVG, is, props) => {
    const el = isSVG ? doc.createElementNS(svgNS, tag) : doc.createElement(tag, is ? { is } : void 0);
    if (tag === "select" && props && props.multiple != null) {
      el.setAttribute("multiple", props.multiple);
    }
    return el;
  },
  createText: (text) => doc.createTextNode(text),
  createComment: (text) => doc.createComment(text),
  setText: (node, text) => {
    node.nodeValue = text;
  },
  setElementText: (el, text) => {
    el.textContent = text;
  },
  parentNode: (node) => node.parentNode,
  nextSibling: (node) => node.nextSibling,
  querySelector: (selector2) => doc.querySelector(selector2),
  setScopeId(el, id) {
    el.setAttribute(id, "");
  },
  cloneNode(el) {
    const cloned = el.cloneNode(true);
    if (`_value` in el) {
      cloned._value = el._value;
    }
    return cloned;
  },
  insertStaticContent(content, parent, anchor, isSVG, start, end) {
    const before = anchor ? anchor.previousSibling : parent.lastChild;
    if (start && (start === end || start.nextSibling)) {
      while (true) {
        parent.insertBefore(start.cloneNode(true), anchor);
        if (start === end || !(start = start.nextSibling))
          break;
      }
    } else {
      templateContainer.innerHTML = isSVG ? `<svg>${content}</svg>` : content;
      const template = templateContainer.content;
      if (isSVG) {
        const wrapper = template.firstChild;
        while (wrapper.firstChild) {
          template.appendChild(wrapper.firstChild);
        }
        template.removeChild(wrapper);
      }
      parent.insertBefore(template, anchor);
    }
    return [
      before ? before.nextSibling : parent.firstChild,
      anchor ? anchor.previousSibling : parent.lastChild
    ];
  }
};
function patchClass(el, value, isSVG) {
  const transitionClasses = el._vtc;
  if (transitionClasses) {
    value = (value ? [value, ...transitionClasses] : [...transitionClasses]).join(" ");
  }
  if (value == null) {
    el.removeAttribute("class");
  } else if (isSVG) {
    el.setAttribute("class", value);
  } else {
    el.className = value;
  }
}
function patchStyle(el, prev, next) {
  const style2 = el.style;
  const isCssString = isString$2(next);
  if (next && !isCssString) {
    for (const key in next) {
      setStyle(style2, key, next[key]);
    }
    if (prev && !isString$2(prev)) {
      for (const key in prev) {
        if (next[key] == null) {
          setStyle(style2, key, "");
        }
      }
    }
  } else {
    const currentDisplay = style2.display;
    if (isCssString) {
      if (prev !== next) {
        style2.cssText = next;
      }
    } else if (prev) {
      el.removeAttribute("style");
    }
    if ("_vod" in el) {
      style2.display = currentDisplay;
    }
  }
}
const importantRE = /\s*!important$/;
function setStyle(style2, name, val) {
  if (isArray$1(val)) {
    val.forEach((v2) => setStyle(style2, name, v2));
  } else {
    if (val == null)
      val = "";
    if (name.startsWith("--")) {
      style2.setProperty(name, val);
    } else {
      const prefixed = autoPrefix(style2, name);
      if (importantRE.test(val)) {
        style2.setProperty(hyphenate(prefixed), val.replace(importantRE, ""), "important");
      } else {
        style2[prefixed] = val;
      }
    }
  }
}
const prefixes = ["Webkit", "Moz", "ms"];
const prefixCache = {};
function autoPrefix(style2, rawName) {
  const cached = prefixCache[rawName];
  if (cached) {
    return cached;
  }
  let name = camelize(rawName);
  if (name !== "filter" && name in style2) {
    return prefixCache[rawName] = name;
  }
  name = capitalize(name);
  for (let i2 = 0; i2 < prefixes.length; i2++) {
    const prefixed = prefixes[i2] + name;
    if (prefixed in style2) {
      return prefixCache[rawName] = prefixed;
    }
  }
  return rawName;
}
const xlinkNS = "http://www.w3.org/1999/xlink";
function patchAttr(el, key, value, isSVG, instance) {
  if (isSVG && key.startsWith("xlink:")) {
    if (value == null) {
      el.removeAttributeNS(xlinkNS, key.slice(6, key.length));
    } else {
      el.setAttributeNS(xlinkNS, key, value);
    }
  } else {
    const isBoolean2 = isSpecialBooleanAttr(key);
    if (value == null || isBoolean2 && !includeBooleanAttr(value)) {
      el.removeAttribute(key);
    } else {
      el.setAttribute(key, isBoolean2 ? "" : value);
    }
  }
}
function patchDOMProp(el, key, value, prevChildren, parentComponent, parentSuspense, unmountChildren) {
  if (key === "innerHTML" || key === "textContent") {
    if (prevChildren) {
      unmountChildren(prevChildren, parentComponent, parentSuspense);
    }
    el[key] = value == null ? "" : value;
    return;
  }
  if (key === "value" && el.tagName !== "PROGRESS" && !el.tagName.includes("-")) {
    el._value = value;
    const newValue = value == null ? "" : value;
    if (el.value !== newValue || el.tagName === "OPTION") {
      el.value = newValue;
    }
    if (value == null) {
      el.removeAttribute(key);
    }
    return;
  }
  let needRemove = false;
  if (value === "" || value == null) {
    const type = typeof el[key];
    if (type === "boolean") {
      value = includeBooleanAttr(value);
    } else if (value == null && type === "string") {
      value = "";
      needRemove = true;
    } else if (type === "number") {
      value = 0;
      needRemove = true;
    }
  }
  try {
    el[key] = value;
  } catch (e2) {
    {
      warn$1(`Failed setting prop "${key}" on <${el.tagName.toLowerCase()}>: value ${value} is invalid.`, e2);
    }
  }
  needRemove && el.removeAttribute(key);
}
const [_getNow, skipTimestampCheck] = /* @__PURE__ */ (() => {
  let _getNow2 = Date.now;
  let skipTimestampCheck2 = false;
  if (typeof window !== "undefined") {
    if (Date.now() > document.createEvent("Event").timeStamp) {
      _getNow2 = performance.now.bind(performance);
    }
    const ffMatch = navigator.userAgent.match(/firefox\/(\d+)/i);
    skipTimestampCheck2 = !!(ffMatch && Number(ffMatch[1]) <= 53);
  }
  return [_getNow2, skipTimestampCheck2];
})();
let cachedNow = 0;
const p$1 = /* @__PURE__ */ Promise.resolve();
const reset = () => {
  cachedNow = 0;
};
const getNow = () => cachedNow || (p$1.then(reset), cachedNow = _getNow());
function addEventListener(el, event, handler, options2) {
  el.addEventListener(event, handler, options2);
}
function removeEventListener(el, event, handler, options2) {
  el.removeEventListener(event, handler, options2);
}
function patchEvent(el, rawName, prevValue, nextValue, instance = null) {
  const invokers = el._vei || (el._vei = {});
  const existingInvoker = invokers[rawName];
  if (nextValue && existingInvoker) {
    existingInvoker.value = nextValue;
  } else {
    const [name, options2] = parseName(rawName);
    if (nextValue) {
      const invoker = invokers[rawName] = createInvoker(nextValue, instance);
      addEventListener(el, name, invoker, options2);
    } else if (existingInvoker) {
      removeEventListener(el, name, existingInvoker, options2);
      invokers[rawName] = void 0;
    }
  }
}
const optionsModifierRE = /(?:Once|Passive|Capture)$/;
function parseName(name) {
  let options2;
  if (optionsModifierRE.test(name)) {
    options2 = {};
    let m2;
    while (m2 = name.match(optionsModifierRE)) {
      name = name.slice(0, name.length - m2[0].length);
      options2[m2[0].toLowerCase()] = true;
    }
  }
  return [hyphenate(name.slice(2)), options2];
}
function createInvoker(initialValue, instance) {
  const invoker = (e2) => {
    const timeStamp = e2.timeStamp || _getNow();
    if (skipTimestampCheck || timeStamp >= invoker.attached - 1) {
      callWithAsyncErrorHandling(patchStopImmediatePropagation(e2, invoker.value), instance, 5, [e2]);
    }
  };
  invoker.value = initialValue;
  invoker.attached = getNow();
  return invoker;
}
function patchStopImmediatePropagation(e2, value) {
  if (isArray$1(value)) {
    const originalStop = e2.stopImmediatePropagation;
    e2.stopImmediatePropagation = () => {
      originalStop.call(e2);
      e2._stopped = true;
    };
    return value.map((fn2) => (e3) => !e3._stopped && fn2 && fn2(e3));
  } else {
    return value;
  }
}
const nativeOnRE = /^on[a-z]/;
const patchProp = (el, key, prevValue, nextValue, isSVG = false, prevChildren, parentComponent, parentSuspense, unmountChildren) => {
  if (key === "class") {
    patchClass(el, nextValue, isSVG);
  } else if (key === "style") {
    patchStyle(el, prevValue, nextValue);
  } else if (isOn(key)) {
    if (!isModelListener(key)) {
      patchEvent(el, key, prevValue, nextValue, parentComponent);
    }
  } else if (key[0] === "." ? (key = key.slice(1), true) : key[0] === "^" ? (key = key.slice(1), false) : shouldSetAsProp(el, key, nextValue, isSVG)) {
    patchDOMProp(el, key, nextValue, prevChildren, parentComponent, parentSuspense, unmountChildren);
  } else {
    if (key === "true-value") {
      el._trueValue = nextValue;
    } else if (key === "false-value") {
      el._falseValue = nextValue;
    }
    patchAttr(el, key, nextValue, isSVG);
  }
};
function shouldSetAsProp(el, key, value, isSVG) {
  if (isSVG) {
    if (key === "innerHTML" || key === "textContent") {
      return true;
    }
    if (key in el && nativeOnRE.test(key) && isFunction(value)) {
      return true;
    }
    return false;
  }
  if (key === "spellcheck" || key === "draggable" || key === "translate") {
    return false;
  }
  if (key === "form") {
    return false;
  }
  if (key === "list" && el.tagName === "INPUT") {
    return false;
  }
  if (key === "type" && el.tagName === "TEXTAREA") {
    return false;
  }
  if (nativeOnRE.test(key) && isString$2(value)) {
    return false;
  }
  return key in el;
}
function useCssVars(getter) {
  const instance = getCurrentInstance();
  if (!instance) {
    warn$1(`useCssVars is called without current active component instance.`);
    return;
  }
  const setVars = () => setVarsOnVNode(instance.subTree, getter(instance.proxy));
  watchPostEffect(setVars);
  onMounted(() => {
    const ob = new MutationObserver(setVars);
    ob.observe(instance.subTree.el.parentNode, { childList: true });
    onUnmounted(() => ob.disconnect());
  });
}
function setVarsOnVNode(vnode, vars2) {
  if (vnode.shapeFlag & 128) {
    const suspense = vnode.suspense;
    vnode = suspense.activeBranch;
    if (suspense.pendingBranch && !suspense.isHydrating) {
      suspense.effects.push(() => {
        setVarsOnVNode(suspense.activeBranch, vars2);
      });
    }
  }
  while (vnode.component) {
    vnode = vnode.component.subTree;
  }
  if (vnode.shapeFlag & 1 && vnode.el) {
    setVarsOnNode(vnode.el, vars2);
  } else if (vnode.type === Fragment) {
    vnode.children.forEach((c2) => setVarsOnVNode(c2, vars2));
  } else if (vnode.type === Static) {
    let { el, anchor } = vnode;
    while (el) {
      setVarsOnNode(el, vars2);
      if (el === anchor)
        break;
      el = el.nextSibling;
    }
  }
}
function setVarsOnNode(el, vars2) {
  if (el.nodeType === 1) {
    const style2 = el.style;
    for (const key in vars2) {
      style2.setProperty(`--${key}`, vars2[key]);
    }
  }
}
const TRANSITION = "transition";
const ANIMATION = "animation";
const Transition = (props, { slots }) => h$1(BaseTransition, resolveTransitionProps(props), slots);
Transition.displayName = "Transition";
const DOMTransitionPropsValidators = {
  name: String,
  type: String,
  css: {
    type: Boolean,
    default: true
  },
  duration: [String, Number, Object],
  enterFromClass: String,
  enterActiveClass: String,
  enterToClass: String,
  appearFromClass: String,
  appearActiveClass: String,
  appearToClass: String,
  leaveFromClass: String,
  leaveActiveClass: String,
  leaveToClass: String
};
Transition.props = /* @__PURE__ */ extend({}, BaseTransition.props, DOMTransitionPropsValidators);
const callHook = (hook, args = []) => {
  if (isArray$1(hook)) {
    hook.forEach((h2) => h2(...args));
  } else if (hook) {
    hook(...args);
  }
};
const hasExplicitCallback = (hook) => {
  return hook ? isArray$1(hook) ? hook.some((h2) => h2.length > 1) : hook.length > 1 : false;
};
function resolveTransitionProps(rawProps) {
  const baseProps = {};
  for (const key in rawProps) {
    if (!(key in DOMTransitionPropsValidators)) {
      baseProps[key] = rawProps[key];
    }
  }
  if (rawProps.css === false) {
    return baseProps;
  }
  const { name = "v", type, duration, enterFromClass = `${name}-enter-from`, enterActiveClass = `${name}-enter-active`, enterToClass = `${name}-enter-to`, appearFromClass = enterFromClass, appearActiveClass = enterActiveClass, appearToClass = enterToClass, leaveFromClass = `${name}-leave-from`, leaveActiveClass = `${name}-leave-active`, leaveToClass = `${name}-leave-to` } = rawProps;
  const durations = normalizeDuration(duration);
  const enterDuration = durations && durations[0];
  const leaveDuration = durations && durations[1];
  const { onBeforeEnter, onEnter, onEnterCancelled, onLeave, onLeaveCancelled, onBeforeAppear = onBeforeEnter, onAppear = onEnter, onAppearCancelled = onEnterCancelled } = baseProps;
  const finishEnter = (el, isAppear, done) => {
    removeTransitionClass(el, isAppear ? appearToClass : enterToClass);
    removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);
    done && done();
  };
  const finishLeave = (el, done) => {
    el._isLeaving = false;
    removeTransitionClass(el, leaveFromClass);
    removeTransitionClass(el, leaveToClass);
    removeTransitionClass(el, leaveActiveClass);
    done && done();
  };
  const makeEnterHook = (isAppear) => {
    return (el, done) => {
      const hook = isAppear ? onAppear : onEnter;
      const resolve2 = () => finishEnter(el, isAppear, done);
      callHook(hook, [el, resolve2]);
      nextFrame(() => {
        removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);
        addTransitionClass(el, isAppear ? appearToClass : enterToClass);
        if (!hasExplicitCallback(hook)) {
          whenTransitionEnds(el, type, enterDuration, resolve2);
        }
      });
    };
  };
  return extend(baseProps, {
    onBeforeEnter(el) {
      callHook(onBeforeEnter, [el]);
      addTransitionClass(el, enterFromClass);
      addTransitionClass(el, enterActiveClass);
    },
    onBeforeAppear(el) {
      callHook(onBeforeAppear, [el]);
      addTransitionClass(el, appearFromClass);
      addTransitionClass(el, appearActiveClass);
    },
    onEnter: makeEnterHook(false),
    onAppear: makeEnterHook(true),
    onLeave(el, done) {
      el._isLeaving = true;
      const resolve2 = () => finishLeave(el, done);
      addTransitionClass(el, leaveFromClass);
      forceReflow();
      addTransitionClass(el, leaveActiveClass);
      nextFrame(() => {
        if (!el._isLeaving) {
          return;
        }
        removeTransitionClass(el, leaveFromClass);
        addTransitionClass(el, leaveToClass);
        if (!hasExplicitCallback(onLeave)) {
          whenTransitionEnds(el, type, leaveDuration, resolve2);
        }
      });
      callHook(onLeave, [el, resolve2]);
    },
    onEnterCancelled(el) {
      finishEnter(el, false);
      callHook(onEnterCancelled, [el]);
    },
    onAppearCancelled(el) {
      finishEnter(el, true);
      callHook(onAppearCancelled, [el]);
    },
    onLeaveCancelled(el) {
      finishLeave(el);
      callHook(onLeaveCancelled, [el]);
    }
  });
}
function normalizeDuration(duration) {
  if (duration == null) {
    return null;
  } else if (isObject(duration)) {
    return [NumberOf(duration.enter), NumberOf(duration.leave)];
  } else {
    const n2 = NumberOf(duration);
    return [n2, n2];
  }
}
function NumberOf(val) {
  const res = toNumber(val);
  validateDuration(res);
  return res;
}
function validateDuration(val) {
  if (typeof val !== "number") {
    warn$1(`<transition> explicit duration is not a valid number - got ${JSON.stringify(val)}.`);
  } else if (isNaN(val)) {
    warn$1(`<transition> explicit duration is NaN - the duration expression might be incorrect.`);
  }
}
function addTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c2) => c2 && el.classList.add(c2));
  (el._vtc || (el._vtc = /* @__PURE__ */ new Set())).add(cls);
}
function removeTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c2) => c2 && el.classList.remove(c2));
  const { _vtc } = el;
  if (_vtc) {
    _vtc.delete(cls);
    if (!_vtc.size) {
      el._vtc = void 0;
    }
  }
}
function nextFrame(cb) {
  requestAnimationFrame(() => {
    requestAnimationFrame(cb);
  });
}
let endId = 0;
function whenTransitionEnds(el, expectedType, explicitTimeout, resolve2) {
  const id = el._endId = ++endId;
  const resolveIfNotStale = () => {
    if (id === el._endId) {
      resolve2();
    }
  };
  if (explicitTimeout) {
    return setTimeout(resolveIfNotStale, explicitTimeout);
  }
  const { type, timeout, propCount } = getTransitionInfo(el, expectedType);
  if (!type) {
    return resolve2();
  }
  const endEvent = type + "end";
  let ended = 0;
  const end = () => {
    el.removeEventListener(endEvent, onEnd);
    resolveIfNotStale();
  };
  const onEnd = (e2) => {
    if (e2.target === el && ++ended >= propCount) {
      end();
    }
  };
  setTimeout(() => {
    if (ended < propCount) {
      end();
    }
  }, timeout + 1);
  el.addEventListener(endEvent, onEnd);
}
function getTransitionInfo(el, expectedType) {
  const styles = window.getComputedStyle(el);
  const getStyleProperties = (key) => (styles[key] || "").split(", ");
  const transitionDelays = getStyleProperties(TRANSITION + "Delay");
  const transitionDurations = getStyleProperties(TRANSITION + "Duration");
  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);
  const animationDelays = getStyleProperties(ANIMATION + "Delay");
  const animationDurations = getStyleProperties(ANIMATION + "Duration");
  const animationTimeout = getTimeout(animationDelays, animationDurations);
  let type = null;
  let timeout = 0;
  let propCount = 0;
  if (expectedType === TRANSITION) {
    if (transitionTimeout > 0) {
      type = TRANSITION;
      timeout = transitionTimeout;
      propCount = transitionDurations.length;
    }
  } else if (expectedType === ANIMATION) {
    if (animationTimeout > 0) {
      type = ANIMATION;
      timeout = animationTimeout;
      propCount = animationDurations.length;
    }
  } else {
    timeout = Math.max(transitionTimeout, animationTimeout);
    type = timeout > 0 ? transitionTimeout > animationTimeout ? TRANSITION : ANIMATION : null;
    propCount = type ? type === TRANSITION ? transitionDurations.length : animationDurations.length : 0;
  }
  const hasTransform = type === TRANSITION && /\b(transform|all)(,|$)/.test(styles[TRANSITION + "Property"]);
  return {
    type,
    timeout,
    propCount,
    hasTransform
  };
}
function getTimeout(delays, durations) {
  while (delays.length < durations.length) {
    delays = delays.concat(delays);
  }
  return Math.max(...durations.map((d2, i2) => toMs(d2) + toMs(delays[i2])));
}
function toMs(s2) {
  return Number(s2.slice(0, -1).replace(",", ".")) * 1e3;
}
function forceReflow() {
  return document.body.offsetHeight;
}
const getModelAssigner = (vnode) => {
  const fn2 = vnode.props["onUpdate:modelValue"] || false;
  return isArray$1(fn2) ? (value) => invokeArrayFns(fn2, value) : fn2;
};
function onCompositionStart(e2) {
  e2.target.composing = true;
}
function onCompositionEnd(e2) {
  const target = e2.target;
  if (target.composing) {
    target.composing = false;
    target.dispatchEvent(new Event("input"));
  }
}
const vModelText = {
  created(el, { modifiers: { lazy, trim, number } }, vnode) {
    el._assign = getModelAssigner(vnode);
    const castToNumber = number || vnode.props && vnode.props.type === "number";
    addEventListener(el, lazy ? "change" : "input", (e2) => {
      if (e2.target.composing)
        return;
      let domValue = el.value;
      if (trim) {
        domValue = domValue.trim();
      }
      if (castToNumber) {
        domValue = toNumber(domValue);
      }
      el._assign(domValue);
    });
    if (trim) {
      addEventListener(el, "change", () => {
        el.value = el.value.trim();
      });
    }
    if (!lazy) {
      addEventListener(el, "compositionstart", onCompositionStart);
      addEventListener(el, "compositionend", onCompositionEnd);
      addEventListener(el, "change", onCompositionEnd);
    }
  },
  mounted(el, { value }) {
    el.value = value == null ? "" : value;
  },
  beforeUpdate(el, { value, modifiers: { lazy, trim, number } }, vnode) {
    el._assign = getModelAssigner(vnode);
    if (el.composing)
      return;
    if (document.activeElement === el && el.type !== "range") {
      if (lazy) {
        return;
      }
      if (trim && el.value.trim() === value) {
        return;
      }
      if ((number || el.type === "number") && toNumber(el.value) === value) {
        return;
      }
    }
    const newValue = value == null ? "" : value;
    if (el.value !== newValue) {
      el.value = newValue;
    }
  }
};
const vModelSelect = {
  deep: true,
  created(el, { value, modifiers: { number } }, vnode) {
    const isSetModel = isSet(value);
    addEventListener(el, "change", () => {
      const selectedVal = Array.prototype.filter.call(el.options, (o2) => o2.selected).map((o2) => number ? toNumber(getValue(o2)) : getValue(o2));
      el._assign(el.multiple ? isSetModel ? new Set(selectedVal) : selectedVal : selectedVal[0]);
    });
    el._assign = getModelAssigner(vnode);
  },
  mounted(el, { value }) {
    setSelected(el, value);
  },
  beforeUpdate(el, _binding, vnode) {
    el._assign = getModelAssigner(vnode);
  },
  updated(el, { value }) {
    setSelected(el, value);
  }
};
function setSelected(el, value) {
  const isMultiple = el.multiple;
  if (isMultiple && !isArray$1(value) && !isSet(value)) {
    warn$1(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(value).slice(8, -1)}.`);
    return;
  }
  for (let i2 = 0, l2 = el.options.length; i2 < l2; i2++) {
    const option = el.options[i2];
    const optionValue = getValue(option);
    if (isMultiple) {
      if (isArray$1(value)) {
        option.selected = looseIndexOf(value, optionValue) > -1;
      } else {
        option.selected = value.has(optionValue);
      }
    } else {
      if (looseEqual(getValue(option), value)) {
        if (el.selectedIndex !== i2)
          el.selectedIndex = i2;
        return;
      }
    }
  }
  if (!isMultiple && el.selectedIndex !== -1) {
    el.selectedIndex = -1;
  }
}
function getValue(el) {
  return "_value" in el ? el._value : el.value;
}
const systemModifiers = ["ctrl", "shift", "alt", "meta"];
const modifierGuards = {
  stop: (e2) => e2.stopPropagation(),
  prevent: (e2) => e2.preventDefault(),
  self: (e2) => e2.target !== e2.currentTarget,
  ctrl: (e2) => !e2.ctrlKey,
  shift: (e2) => !e2.shiftKey,
  alt: (e2) => !e2.altKey,
  meta: (e2) => !e2.metaKey,
  left: (e2) => "button" in e2 && e2.button !== 0,
  middle: (e2) => "button" in e2 && e2.button !== 1,
  right: (e2) => "button" in e2 && e2.button !== 2,
  exact: (e2, modifiers) => systemModifiers.some((m2) => e2[`${m2}Key`] && !modifiers.includes(m2))
};
const withModifiers = (fn2, modifiers) => {
  return (event, ...args) => {
    for (let i2 = 0; i2 < modifiers.length; i2++) {
      const guard = modifierGuards[modifiers[i2]];
      if (guard && guard(event, modifiers))
        return;
    }
    return fn2(event, ...args);
  };
};
const keyNames = {
  esc: "escape",
  space: " ",
  up: "arrow-up",
  left: "arrow-left",
  right: "arrow-right",
  down: "arrow-down",
  delete: "backspace"
};
const withKeys = (fn2, modifiers) => {
  return (event) => {
    if (!("key" in event)) {
      return;
    }
    const eventKey = hyphenate(event.key);
    if (modifiers.some((k2) => k2 === eventKey || keyNames[k2] === eventKey)) {
      return fn2(event);
    }
  };
};
const vShow = {
  beforeMount(el, { value }, { transition }) {
    el._vod = el.style.display === "none" ? "" : el.style.display;
    if (transition && value) {
      transition.beforeEnter(el);
    } else {
      setDisplay(el, value);
    }
  },
  mounted(el, { value }, { transition }) {
    if (transition && value) {
      transition.enter(el);
    }
  },
  updated(el, { value, oldValue }, { transition }) {
    if (!value === !oldValue)
      return;
    if (transition) {
      if (value) {
        transition.beforeEnter(el);
        setDisplay(el, true);
        transition.enter(el);
      } else {
        transition.leave(el, () => {
          setDisplay(el, false);
        });
      }
    } else {
      setDisplay(el, value);
    }
  },
  beforeUnmount(el, { value }) {
    setDisplay(el, value);
  }
};
function setDisplay(el, value) {
  el.style.display = value ? el._vod : "none";
}
const rendererOptions = /* @__PURE__ */ extend({ patchProp }, nodeOps);
let renderer;
let enabledHydration = false;
function ensureHydrationRenderer() {
  renderer = enabledHydration ? renderer : createHydrationRenderer(rendererOptions);
  enabledHydration = true;
  return renderer;
}
const createSSRApp = (...args) => {
  const app = ensureHydrationRenderer().createApp(...args);
  {
    injectNativeTagCheck(app);
    injectCompilerOptionsCheck(app);
  }
  const { mount } = app;
  app.mount = (containerOrSelector) => {
    const container = normalizeContainer(containerOrSelector);
    if (container) {
      return mount(container, true, container instanceof SVGElement);
    }
  };
  return app;
};
function injectNativeTagCheck(app) {
  Object.defineProperty(app.config, "isNativeTag", {
    value: (tag) => isHTMLTag(tag) || isSVGTag(tag),
    writable: false
  });
}
function injectCompilerOptionsCheck(app) {
  {
    const isCustomElement = app.config.isCustomElement;
    Object.defineProperty(app.config, "isCustomElement", {
      get() {
        return isCustomElement;
      },
      set() {
        warn$1(`The \`isCustomElement\` config option is deprecated. Use \`compilerOptions.isCustomElement\` instead.`);
      }
    });
    const compilerOptions = app.config.compilerOptions;
    const msg = `The \`compilerOptions\` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, \`compilerOptions\` must be passed to \`@vue/compiler-dom\` in the build setup instead.
- For vue-loader: pass it via vue-loader's \`compilerOptions\` loader option.
- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader
- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom`;
    Object.defineProperty(app.config, "compilerOptions", {
      get() {
        warn$1(msg);
        return compilerOptions;
      },
      set() {
        warn$1(msg);
      }
    });
  }
}
function normalizeContainer(container) {
  if (isString$2(container)) {
    const res = document.querySelector(container);
    if (!res) {
      warn$1(`Failed to mount app: mount target selector "${container}" returned null.`);
    }
    return res;
  }
  if (window.ShadowRoot && container instanceof window.ShadowRoot && container.mode === "closed") {
    warn$1(`mounting on a ShadowRoot with \`{mode: "closed"}\` may lead to unpredictable bugs`);
  }
  return container;
}
function initDev() {
  {
    initCustomFormatter();
  }
}
{
  initDev();
}
const siteData$1 = JSON.parse('{"base":"/blog-docs/","lang":"zh-CN","title":"\u5C0F\u7D2B\u5FF5\u6C81","description":"\u8D44\u6599\u6587\u6863\u6C47\u96C6\u7F51\u7AD9","head":[["link",{"rel":"shortcut icon","type":"image/x-icon","href":"/blog-docs/favicon.ico"}],["meta",{"name":"viewport","content":"width=device-width,initial-scale=1,user-scalable=no"}],["meta",{"name":"referrer","content":"never"}],["link",{"rel":"manifest","href":"/blog-docs/manifest.json"}],["meta",{"name":"theme-color","content":"#3eaf7c"}],["script",{"language":"javascript","type":"text/javascript","src":"/blog-docs/js/jquery.min.js"}],["script",{"language":"javascript","type":"text/javascript","src":"/blog-docs/js/flux.min.js"}]],"locales":{}}');
var resolveHeadIdentifier = ([
  tag,
  attrs,
  content
]) => {
  if (tag === "meta" && attrs.name) {
    return `${tag}.${attrs.name}`;
  }
  if (["title", "base"].includes(tag)) {
    return tag;
  }
  if (tag === "template" && attrs.id) {
    return `${tag}.${attrs.id}`;
  }
  return JSON.stringify([tag, attrs, content]);
};
var dedupeHead = (head) => {
  const identifierSet = /* @__PURE__ */ new Set();
  const result = [];
  head.forEach((item) => {
    const identifier = resolveHeadIdentifier(item);
    if (!identifierSet.has(identifier)) {
      identifierSet.add(identifier);
      result.push(item);
    }
  });
  return result;
};
var isLinkHttp = (link) => /^(https?:)?\/\//.test(link);
var isLinkMailto = (link) => /^mailto:/.test(link);
var isLinkTel = (link) => /^tel:/.test(link);
var isPlainObject = (val) => Object.prototype.toString.call(val) === "[object Object]";
var removeEndingSlash = (str) => str.replace(/\/$/, "");
var removeLeadingSlash = (str) => str.replace(/^\//, "");
var resolveLocalePath = (locales2, routePath) => {
  const localePaths = Object.keys(locales2).sort((a2, b2) => {
    const levelDelta = b2.split("/").length - a2.split("/").length;
    if (levelDelta !== 0) {
      return levelDelta;
    }
    return b2.length - a2.length;
  });
  for (const localePath of localePaths) {
    if (routePath.startsWith(localePath)) {
      return localePath;
    }
  }
  return "/";
};
var resolveRoutePathFromUrl = (url, base2 = "/") => url.replace(/^(https?:)?\/\/[^/]*/, "").replace(new RegExp(`^${base2}`), "/");
const pagesComponents = {
  "v-8daa1a0e": defineAsyncComponent(() => __vitePreload(() => import(
    /* webpackChunkName: "v-8daa1a0e" */
    "./index.html.0e27d862.js"
  ), true ? [] : void 0)),
  "v-d5fe0c96": defineAsyncComponent(() => __vitePreload(() => import(
    /* webpackChunkName: "v-d5fe0c96" */
    "./index.html.4323efe0.js"
  ), true ? [] : void 0)),
  "v-3706649a": defineAsyncComponent(() => __vitePreload(() => import(
    /* webpackChunkName: "v-3706649a" */
    "./404.html.39a5229a.js"
  ), true ? [] : void 0))
};
const layoutComponents = {
  "404": defineAsyncComponent(() => __vitePreload(() => import(
    /* webpackChunkName: "layout-404" */
    "./404.0baa42ca.js"
  ), true ? [] : void 0)),
  "Layout": defineAsyncComponent(() => __vitePreload(() => import(
    /* webpackChunkName: "layout-Layout" */
    "./Layout.cf5904c8.js"
  ), true ? [] : void 0))
};
var pagesData = ref(pagesData$1);
var pageDataEmpty = readonly({
  key: "",
  path: "",
  title: "",
  lang: "",
  frontmatter: {},
  excerpt: "",
  headers: []
});
var pageData = ref(pageDataEmpty);
var usePageData = () => pageData;
if (import_meta.webpackHot || false) {
  __VUE_HMR_RUNTIME__.updatePageData = (data) => {
    pagesData.value[data.key] = () => Promise.resolve(data);
    if (data.key === pageData.value.key) {
      pageData.value = data;
    }
  };
}
var pageFrontmatterSymbol = Symbol("");
var usePageFrontmatter = () => {
  const pageFrontmatter = inject(pageFrontmatterSymbol);
  if (!pageFrontmatter) {
    throw new Error("usePageFrontmatter() is called without provider.");
  }
  return pageFrontmatter;
};
var pageHeadSymbol = Symbol("");
var usePageHead = () => {
  const pageHead = inject(pageHeadSymbol);
  if (!pageHead) {
    throw new Error("usePageHead() is called without provider.");
  }
  return pageHead;
};
var pageHeadTitleSymbol = Symbol("");
var pageLangSymbol = Symbol("");
var usePageLang = () => {
  const pageLang = inject(pageLangSymbol);
  if (!pageLang) {
    throw new Error("usePageLang() is called without provider.");
  }
  return pageLang;
};
var routeLocaleSymbol = Symbol("");
var useRouteLocale = () => {
  const routeLocale = inject(routeLocaleSymbol);
  if (!routeLocale) {
    throw new Error("useRouteLocale() is called without provider.");
  }
  return routeLocale;
};
var siteData = ref(siteData$1);
var useSiteData = () => siteData;
if (import_meta.webpackHot || false) {
  __VUE_HMR_RUNTIME__.updateSiteData = (data) => {
    siteData.value = data;
  };
}
var siteLocaleDataSymbol = Symbol("");
var useSiteLocaleData = () => {
  const siteLocaleData = inject(siteLocaleDataSymbol);
  if (!siteLocaleData) {
    throw new Error("useSiteLocaleData() is called without provider.");
  }
  return siteLocaleData;
};
var updateHeadSymbol = Symbol("");
var resolvers = reactive({
  resolvePageData: async (pageKey) => {
    const pageDataResolver = pagesData.value[pageKey];
    const pageData2 = await (pageDataResolver == null ? void 0 : pageDataResolver());
    return pageData2 != null ? pageData2 : pageDataEmpty;
  },
  resolvePageFrontmatter: (pageData2) => pageData2.frontmatter,
  resolvePageHead: (headTitle, frontmatter, siteLocale) => {
    const description = isString$2(frontmatter.description) ? frontmatter.description : siteLocale.description;
    const head = [
      ...isArray$1(frontmatter.head) ? frontmatter.head : [],
      ...siteLocale.head,
      ["title", {}, headTitle],
      ["meta", { name: "description", content: description }]
    ];
    return dedupeHead(head);
  },
  resolvePageHeadTitle: (page, siteLocale) => `${page.title ? `${page.title} | ` : ``}${siteLocale.title}`,
  resolvePageLang: (pageData2) => pageData2.lang || "en",
  resolveRouteLocale: (locales2, routePath) => resolveLocalePath(locales2, routePath),
  resolveSiteLocaleData: (site, routeLocale) => ({
    ...site,
    ...site.locales[routeLocale]
  })
});
var ClientOnly = defineComponent({
  name: "ClientOnly",
  setup(_2, ctx) {
    const isMounted = ref(false);
    onMounted(() => {
      isMounted.value = true;
    });
    return () => {
      var _a2, _b;
      return isMounted.value ? (_b = (_a2 = ctx.slots).default) == null ? void 0 : _b.call(_a2) : null;
    };
  }
});
var Content = defineComponent({
  name: "Content",
  props: {
    pageKey: {
      type: String,
      required: false,
      default: ""
    }
  },
  setup(props) {
    const page = usePageData();
    const pageComponent = computed(() => pagesComponents[props.pageKey || page.value.key]);
    return () => pageComponent.value ? h$1(pageComponent.value) : h$1("div", "404 Not Found");
  }
});
var Vuepress = defineComponent({
  name: "Vuepress",
  setup() {
    const page = usePageData();
    const layoutComponent = computed(() => {
      let layoutName;
      if (page.value.path) {
        const frontmatterLayout = page.value.frontmatter.layout;
        if (isString$2(frontmatterLayout)) {
          layoutName = frontmatterLayout;
        } else {
          layoutName = "Layout";
        }
      } else {
        layoutName = "404";
      }
      return layoutComponents[layoutName] || resolveComponent(layoutName, false);
    });
    return () => h$1(layoutComponent.value);
  }
});
var withBase = (url) => {
  if (isLinkHttp(url))
    return url;
  const base2 = useSiteData().value.base;
  return `${base2}${removeLeadingSlash(url)}`;
};
var defineClientConfig = (clientConfig) => clientConfig;
function r$2(r2, e2, n2) {
  var i2, t2, o2;
  void 0 === e2 && (e2 = 50), void 0 === n2 && (n2 = {});
  var a2 = null != (i2 = n2.isImmediate) && i2, u2 = null != (t2 = n2.callback) && t2, c2 = n2.maxWait, v2 = Date.now(), l2 = [];
  function f2() {
    if (void 0 !== c2) {
      var r3 = Date.now() - v2;
      if (r3 + e2 >= c2)
        return c2 - r3;
    }
    return e2;
  }
  var d2 = function() {
    var e3 = [].slice.call(arguments), n3 = this;
    return new Promise(function(i3, t3) {
      var c3 = a2 && void 0 === o2;
      if (void 0 !== o2 && clearTimeout(o2), o2 = setTimeout(function() {
        if (o2 = void 0, v2 = Date.now(), !a2) {
          var i4 = r2.apply(n3, e3);
          u2 && u2(i4), l2.forEach(function(r3) {
            return (0, r3.resolve)(i4);
          }), l2 = [];
        }
      }, f2()), c3) {
        var d3 = r2.apply(n3, e3);
        return u2 && u2(d3), i3(d3);
      }
      l2.push({ resolve: i3, reject: t3 });
    });
  };
  return d2.cancel = function(r3) {
    void 0 !== o2 && clearTimeout(o2), l2.forEach(function(e3) {
      return (0, e3.reject)(r3);
    }), l2 = [];
  }, d2;
}
function getDevtoolsGlobalHook() {
  return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;
}
function getTarget() {
  return typeof navigator !== "undefined" && typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {};
}
const isProxyAvailable = typeof Proxy === "function";
const HOOK_SETUP = "devtools-plugin:setup";
const HOOK_PLUGIN_SETTINGS_SET = "plugin:settings:set";
let supported;
let perf;
function isPerformanceSupported() {
  var _a2;
  if (supported !== void 0) {
    return supported;
  }
  if (typeof window !== "undefined" && window.performance) {
    supported = true;
    perf = window.performance;
  } else if (typeof global !== "undefined" && ((_a2 = global.perf_hooks) === null || _a2 === void 0 ? void 0 : _a2.performance)) {
    supported = true;
    perf = global.perf_hooks.performance;
  } else {
    supported = false;
  }
  return supported;
}
function now() {
  return isPerformanceSupported() ? perf.now() : Date.now();
}
class ApiProxy {
  constructor(plugin, hook) {
    this.target = null;
    this.targetQueue = [];
    this.onQueue = [];
    this.plugin = plugin;
    this.hook = hook;
    const defaultSettings = {};
    if (plugin.settings) {
      for (const id in plugin.settings) {
        const item = plugin.settings[id];
        defaultSettings[id] = item.defaultValue;
      }
    }
    const localSettingsSaveId = `__vue-devtools-plugin-settings__${plugin.id}`;
    let currentSettings = Object.assign({}, defaultSettings);
    try {
      const raw = localStorage.getItem(localSettingsSaveId);
      const data = JSON.parse(raw);
      Object.assign(currentSettings, data);
    } catch (e2) {
    }
    this.fallbacks = {
      getSettings() {
        return currentSettings;
      },
      setSettings(value) {
        try {
          localStorage.setItem(localSettingsSaveId, JSON.stringify(value));
        } catch (e2) {
        }
        currentSettings = value;
      },
      now() {
        return now();
      }
    };
    if (hook) {
      hook.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) => {
        if (pluginId === this.plugin.id) {
          this.fallbacks.setSettings(value);
        }
      });
    }
    this.proxiedOn = new Proxy({}, {
      get: (_target, prop) => {
        if (this.target) {
          return this.target.on[prop];
        } else {
          return (...args) => {
            this.onQueue.push({
              method: prop,
              args
            });
          };
        }
      }
    });
    this.proxiedTarget = new Proxy({}, {
      get: (_target, prop) => {
        if (this.target) {
          return this.target[prop];
        } else if (prop === "on") {
          return this.proxiedOn;
        } else if (Object.keys(this.fallbacks).includes(prop)) {
          return (...args) => {
            this.targetQueue.push({
              method: prop,
              args,
              resolve: () => {
              }
            });
            return this.fallbacks[prop](...args);
          };
        } else {
          return (...args) => {
            return new Promise((resolve2) => {
              this.targetQueue.push({
                method: prop,
                args,
                resolve: resolve2
              });
            });
          };
        }
      }
    });
  }
  async setRealTarget(target) {
    this.target = target;
    for (const item of this.onQueue) {
      this.target.on[item.method](...item.args);
    }
    for (const item of this.targetQueue) {
      item.resolve(await this.target[item.method](...item.args));
    }
  }
}
function setupDevtoolsPlugin(pluginDescriptor, setupFn) {
  const descriptor = pluginDescriptor;
  const target = getTarget();
  const hook = getDevtoolsGlobalHook();
  const enableProxy = isProxyAvailable && descriptor.enableEarlyProxy;
  if (hook && (target.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {
    hook.emit(HOOK_SETUP, pluginDescriptor, setupFn);
  } else {
    const proxy = enableProxy ? new ApiProxy(descriptor, hook) : null;
    const list = target.__VUE_DEVTOOLS_PLUGINS__ = target.__VUE_DEVTOOLS_PLUGINS__ || [];
    list.push({
      pluginDescriptor: descriptor,
      setupFn,
      proxy
    });
    if (proxy)
      setupFn(proxy.proxiedTarget);
  }
}
/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const isBrowser = typeof window !== "undefined";
function isESModule(obj) {
  return obj.__esModule || obj[Symbol.toStringTag] === "Module";
}
const assign = Object.assign;
function applyToParams(fn2, params) {
  const newParams = {};
  for (const key in params) {
    const value = params[key];
    newParams[key] = isArray(value) ? value.map(fn2) : fn2(value);
  }
  return newParams;
}
const noop$2 = () => {
};
const isArray = Array.isArray;
function warn(msg) {
  const args = Array.from(arguments).slice(1);
  console.warn.apply(console, ["[Vue Router warn]: " + msg].concat(args));
}
const TRAILING_SLASH_RE = /\/$/;
const removeTrailingSlash = (path) => path.replace(TRAILING_SLASH_RE, "");
function parseURL(parseQuery2, location2, currentLocation = "/") {
  let path, query = {}, searchString = "", hash = "";
  const hashPos = location2.indexOf("#");
  let searchPos = location2.indexOf("?");
  if (hashPos < searchPos && hashPos >= 0) {
    searchPos = -1;
  }
  if (searchPos > -1) {
    path = location2.slice(0, searchPos);
    searchString = location2.slice(searchPos + 1, hashPos > -1 ? hashPos : location2.length);
    query = parseQuery2(searchString);
  }
  if (hashPos > -1) {
    path = path || location2.slice(0, hashPos);
    hash = location2.slice(hashPos, location2.length);
  }
  path = resolveRelativePath(path != null ? path : location2, currentLocation);
  return {
    fullPath: path + (searchString && "?") + searchString + hash,
    path,
    query,
    hash
  };
}
function stringifyURL(stringifyQuery2, location2) {
  const query = location2.query ? stringifyQuery2(location2.query) : "";
  return location2.path + (query && "?") + query + (location2.hash || "");
}
function stripBase(pathname, base2) {
  if (!base2 || !pathname.toLowerCase().startsWith(base2.toLowerCase()))
    return pathname;
  return pathname.slice(base2.length) || "/";
}
function isSameRouteLocation(stringifyQuery2, a2, b2) {
  const aLastIndex = a2.matched.length - 1;
  const bLastIndex = b2.matched.length - 1;
  return aLastIndex > -1 && aLastIndex === bLastIndex && isSameRouteRecord(a2.matched[aLastIndex], b2.matched[bLastIndex]) && isSameRouteLocationParams(a2.params, b2.params) && stringifyQuery2(a2.query) === stringifyQuery2(b2.query) && a2.hash === b2.hash;
}
function isSameRouteRecord(a2, b2) {
  return (a2.aliasOf || a2) === (b2.aliasOf || b2);
}
function isSameRouteLocationParams(a2, b2) {
  if (Object.keys(a2).length !== Object.keys(b2).length)
    return false;
  for (const key in a2) {
    if (!isSameRouteLocationParamsValue(a2[key], b2[key]))
      return false;
  }
  return true;
}
function isSameRouteLocationParamsValue(a2, b2) {
  return isArray(a2) ? isEquivalentArray(a2, b2) : isArray(b2) ? isEquivalentArray(b2, a2) : a2 === b2;
}
function isEquivalentArray(a2, b2) {
  return isArray(b2) ? a2.length === b2.length && a2.every((value, i2) => value === b2[i2]) : a2.length === 1 && a2[0] === b2;
}
function resolveRelativePath(to2, from) {
  if (to2.startsWith("/"))
    return to2;
  if (!from.startsWith("/")) {
    warn(`Cannot resolve a relative location without an absolute path. Trying to resolve "${to2}" from "${from}". It should look like "/${from}".`);
    return to2;
  }
  if (!to2)
    return from;
  const fromSegments = from.split("/");
  const toSegments = to2.split("/");
  let position = fromSegments.length - 1;
  let toPosition;
  let segment;
  for (toPosition = 0; toPosition < toSegments.length; toPosition++) {
    segment = toSegments[toPosition];
    if (segment === ".")
      continue;
    if (segment === "..") {
      if (position > 1)
        position--;
    } else
      break;
  }
  return fromSegments.slice(0, position).join("/") + "/" + toSegments.slice(toPosition - (toPosition === toSegments.length ? 1 : 0)).join("/");
}
var NavigationType;
(function(NavigationType2) {
  NavigationType2["pop"] = "pop";
  NavigationType2["push"] = "push";
})(NavigationType || (NavigationType = {}));
var NavigationDirection;
(function(NavigationDirection2) {
  NavigationDirection2["back"] = "back";
  NavigationDirection2["forward"] = "forward";
  NavigationDirection2["unknown"] = "";
})(NavigationDirection || (NavigationDirection = {}));
function normalizeBase(base2) {
  if (!base2) {
    if (isBrowser) {
      const baseEl = document.querySelector("base");
      base2 = baseEl && baseEl.getAttribute("href") || "/";
      base2 = base2.replace(/^\w+:\/\/[^\/]+/, "");
    } else {
      base2 = "/";
    }
  }
  if (base2[0] !== "/" && base2[0] !== "#")
    base2 = "/" + base2;
  return removeTrailingSlash(base2);
}
const BEFORE_HASH_RE = /^[^#]+#/;
function createHref(base2, location2) {
  return base2.replace(BEFORE_HASH_RE, "#") + location2;
}
function getElementPosition(el, offset2) {
  const docRect = document.documentElement.getBoundingClientRect();
  const elRect = el.getBoundingClientRect();
  return {
    behavior: offset2.behavior,
    left: elRect.left - docRect.left - (offset2.left || 0),
    top: elRect.top - docRect.top - (offset2.top || 0)
  };
}
const computeScrollPosition = () => ({
  left: window.pageXOffset,
  top: window.pageYOffset
});
function scrollToPosition(position) {
  let scrollToOptions;
  if ("el" in position) {
    const positionEl = position.el;
    const isIdSelector = typeof positionEl === "string" && positionEl.startsWith("#");
    if (typeof position.el === "string") {
      if (!isIdSelector || !document.getElementById(position.el.slice(1))) {
        try {
          const foundEl = document.querySelector(position.el);
          if (isIdSelector && foundEl) {
            warn(`The selector "${position.el}" should be passed as "el: document.querySelector('${position.el}')" because it starts with "#".`);
            return;
          }
        } catch (err) {
          warn(`The selector "${position.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);
          return;
        }
      }
    }
    const el = typeof positionEl === "string" ? isIdSelector ? document.getElementById(positionEl.slice(1)) : document.querySelector(positionEl) : positionEl;
    if (!el) {
      warn(`Couldn't find element using selector "${position.el}" returned by scrollBehavior.`);
      return;
    }
    scrollToOptions = getElementPosition(el, position);
  } else {
    scrollToOptions = position;
  }
  if ("scrollBehavior" in document.documentElement.style)
    window.scrollTo(scrollToOptions);
  else {
    window.scrollTo(scrollToOptions.left != null ? scrollToOptions.left : window.pageXOffset, scrollToOptions.top != null ? scrollToOptions.top : window.pageYOffset);
  }
}
function getScrollKey(path, delta) {
  const position = history.state ? history.state.position - delta : -1;
  return position + path;
}
const scrollPositions = /* @__PURE__ */ new Map();
function saveScrollPosition(key, scrollPosition) {
  scrollPositions.set(key, scrollPosition);
}
function getSavedScrollPosition(key) {
  const scroll = scrollPositions.get(key);
  scrollPositions.delete(key);
  return scroll;
}
let createBaseLocation = () => location.protocol + "//" + location.host;
function createCurrentLocation(base2, location2) {
  const { pathname, search, hash } = location2;
  const hashPos = base2.indexOf("#");
  if (hashPos > -1) {
    let slicePos = hash.includes(base2.slice(hashPos)) ? base2.slice(hashPos).length : 1;
    let pathFromHash = hash.slice(slicePos);
    if (pathFromHash[0] !== "/")
      pathFromHash = "/" + pathFromHash;
    return stripBase(pathFromHash, "");
  }
  const path = stripBase(pathname, base2);
  return path + search + hash;
}
function useHistoryListeners(base2, historyState, currentLocation, replace) {
  let listeners = [];
  let teardowns = [];
  let pauseState = null;
  const popStateHandler = ({ state }) => {
    const to2 = createCurrentLocation(base2, location);
    const from = currentLocation.value;
    const fromState = historyState.value;
    let delta = 0;
    if (state) {
      currentLocation.value = to2;
      historyState.value = state;
      if (pauseState && pauseState === from) {
        pauseState = null;
        return;
      }
      delta = fromState ? state.position - fromState.position : 0;
    } else {
      replace(to2);
    }
    listeners.forEach((listener) => {
      listener(currentLocation.value, from, {
        delta,
        type: NavigationType.pop,
        direction: delta ? delta > 0 ? NavigationDirection.forward : NavigationDirection.back : NavigationDirection.unknown
      });
    });
  };
  function pauseListeners() {
    pauseState = currentLocation.value;
  }
  function listen(callback) {
    listeners.push(callback);
    const teardown = () => {
      const index2 = listeners.indexOf(callback);
      if (index2 > -1)
        listeners.splice(index2, 1);
    };
    teardowns.push(teardown);
    return teardown;
  }
  function beforeUnloadListener() {
    const { history: history2 } = window;
    if (!history2.state)
      return;
    history2.replaceState(assign({}, history2.state, { scroll: computeScrollPosition() }), "");
  }
  function destroy() {
    for (const teardown of teardowns)
      teardown();
    teardowns = [];
    window.removeEventListener("popstate", popStateHandler);
    window.removeEventListener("beforeunload", beforeUnloadListener);
  }
  window.addEventListener("popstate", popStateHandler);
  window.addEventListener("beforeunload", beforeUnloadListener);
  return {
    pauseListeners,
    listen,
    destroy
  };
}
function buildState(back, current, forward, replaced = false, computeScroll = false) {
  return {
    back,
    current,
    forward,
    replaced,
    position: window.history.length,
    scroll: computeScroll ? computeScrollPosition() : null
  };
}
function useHistoryStateNavigation(base2) {
  const { history: history2, location: location2 } = window;
  const currentLocation = {
    value: createCurrentLocation(base2, location2)
  };
  const historyState = { value: history2.state };
  if (!historyState.value) {
    changeLocation(currentLocation.value, {
      back: null,
      current: currentLocation.value,
      forward: null,
      position: history2.length - 1,
      replaced: true,
      scroll: null
    }, true);
  }
  function changeLocation(to2, state, replace2) {
    const hashIndex = base2.indexOf("#");
    const url = hashIndex > -1 ? (location2.host && document.querySelector("base") ? base2 : base2.slice(hashIndex)) + to2 : createBaseLocation() + base2 + to2;
    try {
      history2[replace2 ? "replaceState" : "pushState"](state, "", url);
      historyState.value = state;
    } catch (err) {
      {
        warn("Error with push/replace State", err);
      }
      location2[replace2 ? "replace" : "assign"](url);
    }
  }
  function replace(to2, data) {
    const state = assign({}, history2.state, buildState(
      historyState.value.back,
      to2,
      historyState.value.forward,
      true
    ), data, { position: historyState.value.position });
    changeLocation(to2, state, true);
    currentLocation.value = to2;
  }
  function push(to2, data) {
    const currentState = assign(
      {},
      historyState.value,
      history2.state,
      {
        forward: to2,
        scroll: computeScrollPosition()
      }
    );
    if (!history2.state) {
      warn(`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:

history.replaceState(history.state, '', url)

You can find more information at https://next.router.vuejs.org/guide/migration/#usage-of-history-state.`);
    }
    changeLocation(currentState.current, currentState, true);
    const state = assign({}, buildState(currentLocation.value, to2, null), { position: currentState.position + 1 }, data);
    changeLocation(to2, state, false);
    currentLocation.value = to2;
  }
  return {
    location: currentLocation,
    state: historyState,
    push,
    replace
  };
}
function createWebHistory(base2) {
  base2 = normalizeBase(base2);
  const historyNavigation = useHistoryStateNavigation(base2);
  const historyListeners = useHistoryListeners(base2, historyNavigation.state, historyNavigation.location, historyNavigation.replace);
  function go2(delta, triggerListeners = true) {
    if (!triggerListeners)
      historyListeners.pauseListeners();
    history.go(delta);
  }
  const routerHistory = assign({
    location: "",
    base: base2,
    go: go2,
    createHref: createHref.bind(null, base2)
  }, historyNavigation, historyListeners);
  Object.defineProperty(routerHistory, "location", {
    enumerable: true,
    get: () => historyNavigation.location.value
  });
  Object.defineProperty(routerHistory, "state", {
    enumerable: true,
    get: () => historyNavigation.state.value
  });
  return routerHistory;
}
function isRouteLocation(route) {
  return typeof route === "string" || route && typeof route === "object";
}
function isRouteName(name) {
  return typeof name === "string" || typeof name === "symbol";
}
const START_LOCATION_NORMALIZED = {
  path: "/",
  name: void 0,
  params: {},
  query: {},
  hash: "",
  fullPath: "/",
  matched: [],
  meta: {},
  redirectedFrom: void 0
};
const NavigationFailureSymbol = Symbol("navigation failure");
var NavigationFailureType;
(function(NavigationFailureType2) {
  NavigationFailureType2[NavigationFailureType2["aborted"] = 4] = "aborted";
  NavigationFailureType2[NavigationFailureType2["cancelled"] = 8] = "cancelled";
  NavigationFailureType2[NavigationFailureType2["duplicated"] = 16] = "duplicated";
})(NavigationFailureType || (NavigationFailureType = {}));
const ErrorTypeMessages = {
  [1]({ location: location2, currentLocation }) {
    return `No match for
 ${JSON.stringify(location2)}${currentLocation ? "\nwhile being at\n" + JSON.stringify(currentLocation) : ""}`;
  },
  [2]({ from, to: to2 }) {
    return `Redirected from "${from.fullPath}" to "${stringifyRoute(to2)}" via a navigation guard.`;
  },
  [4]({ from, to: to2 }) {
    return `Navigation aborted from "${from.fullPath}" to "${to2.fullPath}" via a navigation guard.`;
  },
  [8]({ from, to: to2 }) {
    return `Navigation cancelled from "${from.fullPath}" to "${to2.fullPath}" with a new navigation.`;
  },
  [16]({ from, to: to2 }) {
    return `Avoided redundant navigation to current location: "${from.fullPath}".`;
  }
};
function createRouterError(type, params) {
  {
    return assign(new Error(ErrorTypeMessages[type](params)), {
      type,
      [NavigationFailureSymbol]: true
    }, params);
  }
}
function isNavigationFailure(error, type) {
  return error instanceof Error && NavigationFailureSymbol in error && (type == null || !!(error.type & type));
}
const propertiesToLog = ["params", "query", "hash"];
function stringifyRoute(to2) {
  if (typeof to2 === "string")
    return to2;
  if ("path" in to2)
    return to2.path;
  const location2 = {};
  for (const key of propertiesToLog) {
    if (key in to2)
      location2[key] = to2[key];
  }
  return JSON.stringify(location2, null, 2);
}
const BASE_PARAM_PATTERN = "[^/]+?";
const BASE_PATH_PARSER_OPTIONS = {
  sensitive: false,
  strict: false,
  start: true,
  end: true
};
const REGEX_CHARS_RE = /[.+*?^${}()[\]/\\]/g;
function tokensToParser(segments, extraOptions) {
  const options2 = assign({}, BASE_PATH_PARSER_OPTIONS, extraOptions);
  const score = [];
  let pattern = options2.start ? "^" : "";
  const keys = [];
  for (const segment of segments) {
    const segmentScores = segment.length ? [] : [90];
    if (options2.strict && !segment.length)
      pattern += "/";
    for (let tokenIndex = 0; tokenIndex < segment.length; tokenIndex++) {
      const token = segment[tokenIndex];
      let subSegmentScore = 40 + (options2.sensitive ? 0.25 : 0);
      if (token.type === 0) {
        if (!tokenIndex)
          pattern += "/";
        pattern += token.value.replace(REGEX_CHARS_RE, "\\$&");
        subSegmentScore += 40;
      } else if (token.type === 1) {
        const { value, repeatable, optional, regexp } = token;
        keys.push({
          name: value,
          repeatable,
          optional
        });
        const re3 = regexp ? regexp : BASE_PARAM_PATTERN;
        if (re3 !== BASE_PARAM_PATTERN) {
          subSegmentScore += 10;
          try {
            new RegExp(`(${re3})`);
          } catch (err) {
            throw new Error(`Invalid custom RegExp for param "${value}" (${re3}): ` + err.message);
          }
        }
        let subPattern = repeatable ? `((?:${re3})(?:/(?:${re3}))*)` : `(${re3})`;
        if (!tokenIndex)
          subPattern = optional && segment.length < 2 ? `(?:/${subPattern})` : "/" + subPattern;
        if (optional)
          subPattern += "?";
        pattern += subPattern;
        subSegmentScore += 20;
        if (optional)
          subSegmentScore += -8;
        if (repeatable)
          subSegmentScore += -20;
        if (re3 === ".*")
          subSegmentScore += -50;
      }
      segmentScores.push(subSegmentScore);
    }
    score.push(segmentScores);
  }
  if (options2.strict && options2.end) {
    const i2 = score.length - 1;
    score[i2][score[i2].length - 1] += 0.7000000000000001;
  }
  if (!options2.strict)
    pattern += "/?";
  if (options2.end)
    pattern += "$";
  else if (options2.strict)
    pattern += "(?:/|$)";
  const re2 = new RegExp(pattern, options2.sensitive ? "" : "i");
  function parse(path) {
    const match = path.match(re2);
    const params = {};
    if (!match)
      return null;
    for (let i2 = 1; i2 < match.length; i2++) {
      const value = match[i2] || "";
      const key = keys[i2 - 1];
      params[key.name] = value && key.repeatable ? value.split("/") : value;
    }
    return params;
  }
  function stringify(params) {
    let path = "";
    let avoidDuplicatedSlash = false;
    for (const segment of segments) {
      if (!avoidDuplicatedSlash || !path.endsWith("/"))
        path += "/";
      avoidDuplicatedSlash = false;
      for (const token of segment) {
        if (token.type === 0) {
          path += token.value;
        } else if (token.type === 1) {
          const { value, repeatable, optional } = token;
          const param = value in params ? params[value] : "";
          if (isArray(param) && !repeatable) {
            throw new Error(`Provided param "${value}" is an array but it is not repeatable (* or + modifiers)`);
          }
          const text = isArray(param) ? param.join("/") : param;
          if (!text) {
            if (optional) {
              if (segment.length < 2) {
                if (path.endsWith("/"))
                  path = path.slice(0, -1);
                else
                  avoidDuplicatedSlash = true;
              }
            } else
              throw new Error(`Missing required param "${value}"`);
          }
          path += text;
        }
      }
    }
    return path || "/";
  }
  return {
    re: re2,
    score,
    keys,
    parse,
    stringify
  };
}
function compareScoreArray(a2, b2) {
  let i2 = 0;
  while (i2 < a2.length && i2 < b2.length) {
    const diff = b2[i2] - a2[i2];
    if (diff)
      return diff;
    i2++;
  }
  if (a2.length < b2.length) {
    return a2.length === 1 && a2[0] === 40 + 40 ? -1 : 1;
  } else if (a2.length > b2.length) {
    return b2.length === 1 && b2[0] === 40 + 40 ? 1 : -1;
  }
  return 0;
}
function comparePathParserScore(a2, b2) {
  let i2 = 0;
  const aScore = a2.score;
  const bScore = b2.score;
  while (i2 < aScore.length && i2 < bScore.length) {
    const comp = compareScoreArray(aScore[i2], bScore[i2]);
    if (comp)
      return comp;
    i2++;
  }
  if (Math.abs(bScore.length - aScore.length) === 1) {
    if (isLastScoreNegative(aScore))
      return 1;
    if (isLastScoreNegative(bScore))
      return -1;
  }
  return bScore.length - aScore.length;
}
function isLastScoreNegative(score) {
  const last = score[score.length - 1];
  return score.length > 0 && last[last.length - 1] < 0;
}
const ROOT_TOKEN = {
  type: 0,
  value: ""
};
const VALID_PARAM_RE = /[a-zA-Z0-9_]/;
function tokenizePath(path) {
  if (!path)
    return [[]];
  if (path === "/")
    return [[ROOT_TOKEN]];
  if (!path.startsWith("/")) {
    throw new Error(
      `Route paths should start with a "/": "${path}" should be "/${path}".`
    );
  }
  function crash(message2) {
    throw new Error(`ERR (${state})/"${buffer2}": ${message2}`);
  }
  let state = 0;
  let previousState = state;
  const tokens = [];
  let segment;
  function finalizeSegment() {
    if (segment)
      tokens.push(segment);
    segment = [];
  }
  let i2 = 0;
  let char;
  let buffer2 = "";
  let customRe = "";
  function consumeBuffer() {
    if (!buffer2)
      return;
    if (state === 0) {
      segment.push({
        type: 0,
        value: buffer2
      });
    } else if (state === 1 || state === 2 || state === 3) {
      if (segment.length > 1 && (char === "*" || char === "+"))
        crash(`A repeatable param (${buffer2}) must be alone in its segment. eg: '/:ids+.`);
      segment.push({
        type: 1,
        value: buffer2,
        regexp: customRe,
        repeatable: char === "*" || char === "+",
        optional: char === "*" || char === "?"
      });
    } else {
      crash("Invalid state to consume buffer");
    }
    buffer2 = "";
  }
  function addCharToBuffer() {
    buffer2 += char;
  }
  while (i2 < path.length) {
    char = path[i2++];
    if (char === "\\" && state !== 2) {
      previousState = state;
      state = 4;
      continue;
    }
    switch (state) {
      case 0:
        if (char === "/") {
          if (buffer2) {
            consumeBuffer();
          }
          finalizeSegment();
        } else if (char === ":") {
          consumeBuffer();
          state = 1;
        } else {
          addCharToBuffer();
        }
        break;
      case 4:
        addCharToBuffer();
        state = previousState;
        break;
      case 1:
        if (char === "(") {
          state = 2;
        } else if (VALID_PARAM_RE.test(char)) {
          addCharToBuffer();
        } else {
          consumeBuffer();
          state = 0;
          if (char !== "*" && char !== "?" && char !== "+")
            i2--;
        }
        break;
      case 2:
        if (char === ")") {
          if (customRe[customRe.length - 1] == "\\")
            customRe = customRe.slice(0, -1) + char;
          else
            state = 3;
        } else {
          customRe += char;
        }
        break;
      case 3:
        consumeBuffer();
        state = 0;
        if (char !== "*" && char !== "?" && char !== "+")
          i2--;
        customRe = "";
        break;
      default:
        crash("Unknown state");
        break;
    }
  }
  if (state === 2)
    crash(`Unfinished custom RegExp for param "${buffer2}"`);
  consumeBuffer();
  finalizeSegment();
  return tokens;
}
function createRouteRecordMatcher(record, parent, options2) {
  const parser = tokensToParser(tokenizePath(record.path), options2);
  {
    const existingKeys = /* @__PURE__ */ new Set();
    for (const key of parser.keys) {
      if (existingKeys.has(key.name))
        warn(`Found duplicated params with name "${key.name}" for path "${record.path}". Only the last one will be available on "$route.params".`);
      existingKeys.add(key.name);
    }
  }
  const matcher = assign(parser, {
    record,
    parent,
    children: [],
    alias: []
  });
  if (parent) {
    if (!matcher.record.aliasOf === !parent.record.aliasOf)
      parent.children.push(matcher);
  }
  return matcher;
}
function createRouterMatcher(routes, globalOptions) {
  const matchers = [];
  const matcherMap = /* @__PURE__ */ new Map();
  globalOptions = mergeOptions({ strict: false, end: true, sensitive: false }, globalOptions);
  function getRecordMatcher(name) {
    return matcherMap.get(name);
  }
  function addRoute(record, parent, originalRecord) {
    const isRootAdd = !originalRecord;
    const mainNormalizedRecord = normalizeRouteRecord(record);
    {
      checkChildMissingNameWithEmptyPath(mainNormalizedRecord, parent);
    }
    mainNormalizedRecord.aliasOf = originalRecord && originalRecord.record;
    const options2 = mergeOptions(globalOptions, record);
    const normalizedRecords = [
      mainNormalizedRecord
    ];
    if ("alias" in record) {
      const aliases = typeof record.alias === "string" ? [record.alias] : record.alias;
      for (const alias of aliases) {
        normalizedRecords.push(assign({}, mainNormalizedRecord, {
          components: originalRecord ? originalRecord.record.components : mainNormalizedRecord.components,
          path: alias,
          aliasOf: originalRecord ? originalRecord.record : mainNormalizedRecord
        }));
      }
    }
    let matcher;
    let originalMatcher;
    for (const normalizedRecord of normalizedRecords) {
      const { path } = normalizedRecord;
      if (parent && path[0] !== "/") {
        const parentPath = parent.record.path;
        const connectingSlash = parentPath[parentPath.length - 1] === "/" ? "" : "/";
        normalizedRecord.path = parent.record.path + (path && connectingSlash + path);
      }
      if (normalizedRecord.path === "*") {
        throw new Error('Catch all routes ("*") must now be defined using a param with a custom regexp.\nSee more at https://next.router.vuejs.org/guide/migration/#removed-star-or-catch-all-routes.');
      }
      matcher = createRouteRecordMatcher(normalizedRecord, parent, options2);
      if (parent && path[0] === "/")
        checkMissingParamsInAbsolutePath(matcher, parent);
      if (originalRecord) {
        originalRecord.alias.push(matcher);
        {
          checkSameParams(originalRecord, matcher);
        }
      } else {
        originalMatcher = originalMatcher || matcher;
        if (originalMatcher !== matcher)
          originalMatcher.alias.push(matcher);
        if (isRootAdd && record.name && !isAliasRecord(matcher))
          removeRoute(record.name);
      }
      if (mainNormalizedRecord.children) {
        const children = mainNormalizedRecord.children;
        for (let i2 = 0; i2 < children.length; i2++) {
          addRoute(children[i2], matcher, originalRecord && originalRecord.children[i2]);
        }
      }
      originalRecord = originalRecord || matcher;
      insertMatcher(matcher);
    }
    return originalMatcher ? () => {
      removeRoute(originalMatcher);
    } : noop$2;
  }
  function removeRoute(matcherRef) {
    if (isRouteName(matcherRef)) {
      const matcher = matcherMap.get(matcherRef);
      if (matcher) {
        matcherMap.delete(matcherRef);
        matchers.splice(matchers.indexOf(matcher), 1);
        matcher.children.forEach(removeRoute);
        matcher.alias.forEach(removeRoute);
      }
    } else {
      const index2 = matchers.indexOf(matcherRef);
      if (index2 > -1) {
        matchers.splice(index2, 1);
        if (matcherRef.record.name)
          matcherMap.delete(matcherRef.record.name);
        matcherRef.children.forEach(removeRoute);
        matcherRef.alias.forEach(removeRoute);
      }
    }
  }
  function getRoutes() {
    return matchers;
  }
  function insertMatcher(matcher) {
    let i2 = 0;
    while (i2 < matchers.length && comparePathParserScore(matcher, matchers[i2]) >= 0 && (matcher.record.path !== matchers[i2].record.path || !isRecordChildOf(matcher, matchers[i2])))
      i2++;
    matchers.splice(i2, 0, matcher);
    if (matcher.record.name && !isAliasRecord(matcher))
      matcherMap.set(matcher.record.name, matcher);
  }
  function resolve2(location2, currentLocation) {
    let matcher;
    let params = {};
    let path;
    let name;
    if ("name" in location2 && location2.name) {
      matcher = matcherMap.get(location2.name);
      if (!matcher)
        throw createRouterError(1, {
          location: location2
        });
      name = matcher.record.name;
      params = assign(
        paramsFromLocation(
          currentLocation.params,
          matcher.keys.filter((k2) => !k2.optional).map((k2) => k2.name)
        ),
        location2.params
      );
      path = matcher.stringify(params);
    } else if ("path" in location2) {
      path = location2.path;
      if (!path.startsWith("/")) {
        warn(`The Matcher cannot resolve relative paths but received "${path}". Unless you directly called \`matcher.resolve("${path}")\`, this is probably a bug in vue-router. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/router.`);
      }
      matcher = matchers.find((m2) => m2.re.test(path));
      if (matcher) {
        params = matcher.parse(path);
        name = matcher.record.name;
      }
    } else {
      matcher = currentLocation.name ? matcherMap.get(currentLocation.name) : matchers.find((m2) => m2.re.test(currentLocation.path));
      if (!matcher)
        throw createRouterError(1, {
          location: location2,
          currentLocation
        });
      name = matcher.record.name;
      params = assign({}, currentLocation.params, location2.params);
      path = matcher.stringify(params);
    }
    const matched = [];
    let parentMatcher = matcher;
    while (parentMatcher) {
      matched.unshift(parentMatcher.record);
      parentMatcher = parentMatcher.parent;
    }
    return {
      name,
      path,
      params,
      matched,
      meta: mergeMetaFields(matched)
    };
  }
  routes.forEach((route) => addRoute(route));
  return { addRoute, resolve: resolve2, removeRoute, getRoutes, getRecordMatcher };
}
function paramsFromLocation(params, keys) {
  const newParams = {};
  for (const key of keys) {
    if (key in params)
      newParams[key] = params[key];
  }
  return newParams;
}
function normalizeRouteRecord(record) {
  return {
    path: record.path,
    redirect: record.redirect,
    name: record.name,
    meta: record.meta || {},
    aliasOf: void 0,
    beforeEnter: record.beforeEnter,
    props: normalizeRecordProps(record),
    children: record.children || [],
    instances: {},
    leaveGuards: /* @__PURE__ */ new Set(),
    updateGuards: /* @__PURE__ */ new Set(),
    enterCallbacks: {},
    components: "components" in record ? record.components || null : record.component && { default: record.component }
  };
}
function normalizeRecordProps(record) {
  const propsObject = {};
  const props = record.props || false;
  if ("component" in record) {
    propsObject.default = props;
  } else {
    for (const name in record.components)
      propsObject[name] = typeof props === "boolean" ? props : props[name];
  }
  return propsObject;
}
function isAliasRecord(record) {
  while (record) {
    if (record.record.aliasOf)
      return true;
    record = record.parent;
  }
  return false;
}
function mergeMetaFields(matched) {
  return matched.reduce((meta, record) => assign(meta, record.meta), {});
}
function mergeOptions(defaults, partialOptions) {
  const options2 = {};
  for (const key in defaults) {
    options2[key] = key in partialOptions ? partialOptions[key] : defaults[key];
  }
  return options2;
}
function isSameParam(a2, b2) {
  return a2.name === b2.name && a2.optional === b2.optional && a2.repeatable === b2.repeatable;
}
function checkSameParams(a2, b2) {
  for (const key of a2.keys) {
    if (!key.optional && !b2.keys.find(isSameParam.bind(null, key)))
      return warn(`Alias "${b2.record.path}" and the original record: "${a2.record.path}" should have the exact same param named "${key.name}"`);
  }
  for (const key of b2.keys) {
    if (!key.optional && !a2.keys.find(isSameParam.bind(null, key)))
      return warn(`Alias "${b2.record.path}" and the original record: "${a2.record.path}" should have the exact same param named "${key.name}"`);
  }
}
function checkChildMissingNameWithEmptyPath(mainNormalizedRecord, parent) {
  if (parent && parent.record.name && !mainNormalizedRecord.name && !mainNormalizedRecord.path) {
    warn(`The route named "${String(parent.record.name)}" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`);
  }
}
function checkMissingParamsInAbsolutePath(record, parent) {
  for (const key of parent.keys) {
    if (!record.keys.find(isSameParam.bind(null, key)))
      return warn(`Absolute path "${record.record.path}" should have the exact same param named "${key.name}" as its parent "${parent.record.path}".`);
  }
}
function isRecordChildOf(record, parent) {
  return parent.children.some((child) => child === record || isRecordChildOf(record, child));
}
const HASH_RE = /#/g;
const AMPERSAND_RE = /&/g;
const SLASH_RE = /\//g;
const EQUAL_RE = /=/g;
const IM_RE = /\?/g;
const PLUS_RE = /\+/g;
const ENC_BRACKET_OPEN_RE = /%5B/g;
const ENC_BRACKET_CLOSE_RE = /%5D/g;
const ENC_CARET_RE = /%5E/g;
const ENC_BACKTICK_RE = /%60/g;
const ENC_CURLY_OPEN_RE = /%7B/g;
const ENC_PIPE_RE = /%7C/g;
const ENC_CURLY_CLOSE_RE = /%7D/g;
const ENC_SPACE_RE = /%20/g;
function commonEncode(text) {
  return encodeURI("" + text).replace(ENC_PIPE_RE, "|").replace(ENC_BRACKET_OPEN_RE, "[").replace(ENC_BRACKET_CLOSE_RE, "]");
}
function encodeHash(text) {
  return commonEncode(text).replace(ENC_CURLY_OPEN_RE, "{").replace(ENC_CURLY_CLOSE_RE, "}").replace(ENC_CARET_RE, "^");
}
function encodeQueryValue(text) {
  return commonEncode(text).replace(PLUS_RE, "%2B").replace(ENC_SPACE_RE, "+").replace(HASH_RE, "%23").replace(AMPERSAND_RE, "%26").replace(ENC_BACKTICK_RE, "`").replace(ENC_CURLY_OPEN_RE, "{").replace(ENC_CURLY_CLOSE_RE, "}").replace(ENC_CARET_RE, "^");
}
function encodeQueryKey(text) {
  return encodeQueryValue(text).replace(EQUAL_RE, "%3D");
}
function encodePath(text) {
  return commonEncode(text).replace(HASH_RE, "%23").replace(IM_RE, "%3F");
}
function encodeParam(text) {
  return text == null ? "" : encodePath(text).replace(SLASH_RE, "%2F");
}
function decode(text) {
  try {
    return decodeURIComponent("" + text);
  } catch (err) {
    warn(`Error decoding "${text}". Using original value`);
  }
  return "" + text;
}
function parseQuery(search) {
  const query = {};
  if (search === "" || search === "?")
    return query;
  const hasLeadingIM = search[0] === "?";
  const searchParams = (hasLeadingIM ? search.slice(1) : search).split("&");
  for (let i2 = 0; i2 < searchParams.length; ++i2) {
    const searchParam = searchParams[i2].replace(PLUS_RE, " ");
    const eqPos = searchParam.indexOf("=");
    const key = decode(eqPos < 0 ? searchParam : searchParam.slice(0, eqPos));
    const value = eqPos < 0 ? null : decode(searchParam.slice(eqPos + 1));
    if (key in query) {
      let currentValue = query[key];
      if (!isArray(currentValue)) {
        currentValue = query[key] = [currentValue];
      }
      currentValue.push(value);
    } else {
      query[key] = value;
    }
  }
  return query;
}
function stringifyQuery(query) {
  let search = "";
  for (let key in query) {
    const value = query[key];
    key = encodeQueryKey(key);
    if (value == null) {
      if (value !== void 0) {
        search += (search.length ? "&" : "") + key;
      }
      continue;
    }
    const values = isArray(value) ? value.map((v2) => v2 && encodeQueryValue(v2)) : [value && encodeQueryValue(value)];
    values.forEach((value2) => {
      if (value2 !== void 0) {
        search += (search.length ? "&" : "") + key;
        if (value2 != null)
          search += "=" + value2;
      }
    });
  }
  return search;
}
function normalizeQuery(query) {
  const normalizedQuery = {};
  for (const key in query) {
    const value = query[key];
    if (value !== void 0) {
      normalizedQuery[key] = isArray(value) ? value.map((v2) => v2 == null ? null : "" + v2) : value == null ? value : "" + value;
    }
  }
  return normalizedQuery;
}
const matchedRouteKey = Symbol("router view location matched");
const viewDepthKey = Symbol("router view depth");
const routerKey = Symbol("router");
const routeLocationKey = Symbol("route location");
const routerViewLocationKey = Symbol("router view location");
function useCallbacks() {
  let handlers2 = [];
  function add2(handler) {
    handlers2.push(handler);
    return () => {
      const i2 = handlers2.indexOf(handler);
      if (i2 > -1)
        handlers2.splice(i2, 1);
    };
  }
  function reset2() {
    handlers2 = [];
  }
  return {
    add: add2,
    list: () => handlers2,
    reset: reset2
  };
}
function guardToPromiseFn(guard, to2, from, record, name) {
  const enterCallbackArray = record && (record.enterCallbacks[name] = record.enterCallbacks[name] || []);
  return () => new Promise((resolve2, reject) => {
    const next = (valid) => {
      if (valid === false) {
        reject(createRouterError(4, {
          from,
          to: to2
        }));
      } else if (valid instanceof Error) {
        reject(valid);
      } else if (isRouteLocation(valid)) {
        reject(createRouterError(2, {
          from: to2,
          to: valid
        }));
      } else {
        if (enterCallbackArray && record.enterCallbacks[name] === enterCallbackArray && typeof valid === "function") {
          enterCallbackArray.push(valid);
        }
        resolve2();
      }
    };
    const guardReturn = guard.call(record && record.instances[name], to2, from, canOnlyBeCalledOnce(next, to2, from));
    let guardCall = Promise.resolve(guardReturn);
    if (guard.length < 3)
      guardCall = guardCall.then(next);
    if (guard.length > 2) {
      const message2 = `The "next" callback was never called inside of ${guard.name ? '"' + guard.name + '"' : ""}:
${guard.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;
      if (typeof guardReturn === "object" && "then" in guardReturn) {
        guardCall = guardCall.then((resolvedValue) => {
          if (!next._called) {
            warn(message2);
            return Promise.reject(new Error("Invalid navigation guard"));
          }
          return resolvedValue;
        });
      } else if (guardReturn !== void 0) {
        if (!next._called) {
          warn(message2);
          reject(new Error("Invalid navigation guard"));
          return;
        }
      }
    }
    guardCall.catch((err) => reject(err));
  });
}
function canOnlyBeCalledOnce(next, to2, from) {
  let called = 0;
  return function() {
    if (called++ === 1)
      warn(`The "next" callback was called more than once in one navigation guard when going from "${from.fullPath}" to "${to2.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`);
    next._called = true;
    if (called === 1)
      next.apply(null, arguments);
  };
}
function extractComponentsGuards(matched, guardType, to2, from) {
  const guards = [];
  for (const record of matched) {
    if (!record.components && !record.children.length) {
      warn(`Record with path "${record.path}" is either missing a "component(s)" or "children" property.`);
    }
    for (const name in record.components) {
      let rawComponent = record.components[name];
      {
        if (!rawComponent || typeof rawComponent !== "object" && typeof rawComponent !== "function") {
          warn(`Component "${name}" in record with path "${record.path}" is not a valid component. Received "${String(rawComponent)}".`);
          throw new Error("Invalid route component");
        } else if ("then" in rawComponent) {
          warn(`Component "${name}" in record with path "${record.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);
          const promise2 = rawComponent;
          rawComponent = () => promise2;
        } else if (rawComponent.__asyncLoader && !rawComponent.__warnedDefineAsync) {
          rawComponent.__warnedDefineAsync = true;
          warn(`Component "${name}" in record with path "${record.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`);
        }
      }
      if (guardType !== "beforeRouteEnter" && !record.instances[name])
        continue;
      if (isRouteComponent(rawComponent)) {
        const options2 = rawComponent.__vccOpts || rawComponent;
        const guard = options2[guardType];
        guard && guards.push(guardToPromiseFn(guard, to2, from, record, name));
      } else {
        let componentPromise = rawComponent();
        if (!("catch" in componentPromise)) {
          warn(`Component "${name}" in record with path "${record.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`);
          componentPromise = Promise.resolve(componentPromise);
        }
        guards.push(() => componentPromise.then((resolved) => {
          if (!resolved)
            return Promise.reject(new Error(`Couldn't resolve component "${name}" at "${record.path}"`));
          const resolvedComponent = isESModule(resolved) ? resolved.default : resolved;
          record.components[name] = resolvedComponent;
          const options2 = resolvedComponent.__vccOpts || resolvedComponent;
          const guard = options2[guardType];
          return guard && guardToPromiseFn(guard, to2, from, record, name)();
        }));
      }
    }
  }
  return guards;
}
function isRouteComponent(component) {
  return typeof component === "object" || "displayName" in component || "props" in component || "__vccOpts" in component;
}
function useLink(props) {
  const router = inject(routerKey);
  const currentRoute = inject(routeLocationKey);
  const route = computed(() => router.resolve(unref(props.to)));
  const activeRecordIndex = computed(() => {
    const { matched } = route.value;
    const { length } = matched;
    const routeMatched = matched[length - 1];
    const currentMatched = currentRoute.matched;
    if (!routeMatched || !currentMatched.length)
      return -1;
    const index2 = currentMatched.findIndex(isSameRouteRecord.bind(null, routeMatched));
    if (index2 > -1)
      return index2;
    const parentRecordPath = getOriginalPath(matched[length - 2]);
    return length > 1 && getOriginalPath(routeMatched) === parentRecordPath && currentMatched[currentMatched.length - 1].path !== parentRecordPath ? currentMatched.findIndex(isSameRouteRecord.bind(null, matched[length - 2])) : index2;
  });
  const isActive = computed(() => activeRecordIndex.value > -1 && includesParams(currentRoute.params, route.value.params));
  const isExactActive = computed(() => activeRecordIndex.value > -1 && activeRecordIndex.value === currentRoute.matched.length - 1 && isSameRouteLocationParams(currentRoute.params, route.value.params));
  function navigate(e2 = {}) {
    if (guardEvent(e2)) {
      return router[unref(props.replace) ? "replace" : "push"](
        unref(props.to)
      ).catch(noop$2);
    }
    return Promise.resolve();
  }
  if (isBrowser) {
    const instance = getCurrentInstance();
    if (instance) {
      const linkContextDevtools = {
        route: route.value,
        isActive: isActive.value,
        isExactActive: isExactActive.value
      };
      instance.__vrl_devtools = instance.__vrl_devtools || [];
      instance.__vrl_devtools.push(linkContextDevtools);
      watchEffect(() => {
        linkContextDevtools.route = route.value;
        linkContextDevtools.isActive = isActive.value;
        linkContextDevtools.isExactActive = isExactActive.value;
      }, { flush: "post" });
    }
  }
  return {
    route,
    href: computed(() => route.value.href),
    isActive,
    isExactActive,
    navigate
  };
}
const RouterLinkImpl = /* @__PURE__ */ defineComponent({
  name: "RouterLink",
  compatConfig: { MODE: 3 },
  props: {
    to: {
      type: [String, Object],
      required: true
    },
    replace: Boolean,
    activeClass: String,
    exactActiveClass: String,
    custom: Boolean,
    ariaCurrentValue: {
      type: String,
      default: "page"
    }
  },
  useLink,
  setup(props, { slots }) {
    const link = reactive(useLink(props));
    const { options: options2 } = inject(routerKey);
    const elClass = computed(() => ({
      [getLinkClass(props.activeClass, options2.linkActiveClass, "router-link-active")]: link.isActive,
      [getLinkClass(props.exactActiveClass, options2.linkExactActiveClass, "router-link-exact-active")]: link.isExactActive
    }));
    return () => {
      const children = slots.default && slots.default(link);
      return props.custom ? children : h$1("a", {
        "aria-current": link.isExactActive ? props.ariaCurrentValue : null,
        href: link.href,
        onClick: link.navigate,
        class: elClass.value
      }, children);
    };
  }
});
const RouterLink = RouterLinkImpl;
function guardEvent(e2) {
  if (e2.metaKey || e2.altKey || e2.ctrlKey || e2.shiftKey)
    return;
  if (e2.defaultPrevented)
    return;
  if (e2.button !== void 0 && e2.button !== 0)
    return;
  if (e2.currentTarget && e2.currentTarget.getAttribute) {
    const target = e2.currentTarget.getAttribute("target");
    if (/\b_blank\b/i.test(target))
      return;
  }
  if (e2.preventDefault)
    e2.preventDefault();
  return true;
}
function includesParams(outer, inner) {
  for (const key in inner) {
    const innerValue = inner[key];
    const outerValue = outer[key];
    if (typeof innerValue === "string") {
      if (innerValue !== outerValue)
        return false;
    } else {
      if (!isArray(outerValue) || outerValue.length !== innerValue.length || innerValue.some((value, i2) => value !== outerValue[i2]))
        return false;
    }
  }
  return true;
}
function getOriginalPath(record) {
  return record ? record.aliasOf ? record.aliasOf.path : record.path : "";
}
const getLinkClass = (propClass, globalClass, defaultClass) => propClass != null ? propClass : globalClass != null ? globalClass : defaultClass;
const RouterViewImpl = /* @__PURE__ */ defineComponent({
  name: "RouterView",
  inheritAttrs: false,
  props: {
    name: {
      type: String,
      default: "default"
    },
    route: Object
  },
  compatConfig: { MODE: 3 },
  setup(props, { attrs, slots }) {
    warnDeprecatedUsage();
    const injectedRoute = inject(routerViewLocationKey);
    const routeToDisplay = computed(() => props.route || injectedRoute.value);
    const injectedDepth = inject(viewDepthKey, 0);
    const depth = computed(() => {
      let initialDepth = unref(injectedDepth);
      const { matched } = routeToDisplay.value;
      let matchedRoute;
      while ((matchedRoute = matched[initialDepth]) && !matchedRoute.components) {
        initialDepth++;
      }
      return initialDepth;
    });
    const matchedRouteRef = computed(() => routeToDisplay.value.matched[depth.value]);
    provide(viewDepthKey, computed(() => depth.value + 1));
    provide(matchedRouteKey, matchedRouteRef);
    provide(routerViewLocationKey, routeToDisplay);
    const viewRef = ref();
    watch(() => [viewRef.value, matchedRouteRef.value, props.name], ([instance, to2, name], [oldInstance, from, oldName]) => {
      if (to2) {
        to2.instances[name] = instance;
        if (from && from !== to2 && instance && instance === oldInstance) {
          if (!to2.leaveGuards.size) {
            to2.leaveGuards = from.leaveGuards;
          }
          if (!to2.updateGuards.size) {
            to2.updateGuards = from.updateGuards;
          }
        }
      }
      if (instance && to2 && (!from || !isSameRouteRecord(to2, from) || !oldInstance)) {
        (to2.enterCallbacks[name] || []).forEach((callback) => callback(instance));
      }
    }, { flush: "post" });
    return () => {
      const route = routeToDisplay.value;
      const currentName = props.name;
      const matchedRoute = matchedRouteRef.value;
      const ViewComponent = matchedRoute && matchedRoute.components[currentName];
      if (!ViewComponent) {
        return normalizeSlot(slots.default, { Component: ViewComponent, route });
      }
      const routePropsOption = matchedRoute.props[currentName];
      const routeProps = routePropsOption ? routePropsOption === true ? route.params : typeof routePropsOption === "function" ? routePropsOption(route) : routePropsOption : null;
      const onVnodeUnmounted = (vnode) => {
        if (vnode.component.isUnmounted) {
          matchedRoute.instances[currentName] = null;
        }
      };
      const component = h$1(ViewComponent, assign({}, routeProps, attrs, {
        onVnodeUnmounted,
        ref: viewRef
      }));
      if (isBrowser && component.ref) {
        const info = {
          depth: depth.value,
          name: matchedRoute.name,
          path: matchedRoute.path,
          meta: matchedRoute.meta
        };
        const internalInstances = isArray(component.ref) ? component.ref.map((r2) => r2.i) : [component.ref.i];
        internalInstances.forEach((instance) => {
          instance.__vrv_devtools = info;
        });
      }
      return normalizeSlot(slots.default, { Component: component, route }) || component;
    };
  }
});
function normalizeSlot(slot, data) {
  if (!slot)
    return null;
  const slotContent = slot(data);
  return slotContent.length === 1 ? slotContent[0] : slotContent;
}
const RouterView = RouterViewImpl;
function warnDeprecatedUsage() {
  const instance = getCurrentInstance();
  const parentName = instance.parent && instance.parent.type.name;
  if (parentName && (parentName === "KeepAlive" || parentName.includes("Transition"))) {
    const comp = parentName === "KeepAlive" ? "keep-alive" : "transition";
    warn(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${comp}>
    <component :is="Component" />
  </${comp}>
</router-view>`);
  }
}
function formatRouteLocation(routeLocation, tooltip) {
  const copy = assign({}, routeLocation, {
    matched: routeLocation.matched.map((matched) => omit(matched, ["instances", "children", "aliasOf"]))
  });
  return {
    _custom: {
      type: null,
      readOnly: true,
      display: routeLocation.fullPath,
      tooltip,
      value: copy
    }
  };
}
function formatDisplay(display) {
  return {
    _custom: {
      display
    }
  };
}
let routerId = 0;
function addDevtools(app, router, matcher) {
  if (router.__hasDevtools)
    return;
  router.__hasDevtools = true;
  const id = routerId++;
  setupDevtoolsPlugin({
    id: "org.vuejs.router" + (id ? "." + id : ""),
    label: "Vue Router",
    packageName: "vue-router",
    homepage: "https://router.vuejs.org",
    logo: "https://router.vuejs.org/logo.png",
    componentStateTypes: ["Routing"],
    app
  }, (api) => {
    if (typeof api.now !== "function") {
      console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.");
    }
    api.on.inspectComponent((payload, ctx) => {
      if (payload.instanceData) {
        payload.instanceData.state.push({
          type: "Routing",
          key: "$route",
          editable: false,
          value: formatRouteLocation(router.currentRoute.value, "Current Route")
        });
      }
    });
    api.on.visitComponentTree(({ treeNode: node, componentInstance }) => {
      if (componentInstance.__vrv_devtools) {
        const info = componentInstance.__vrv_devtools;
        node.tags.push({
          label: (info.name ? `${info.name.toString()}: ` : "") + info.path,
          textColor: 0,
          tooltip: "This component is rendered by &lt;router-view&gt;",
          backgroundColor: PINK_500
        });
      }
      if (isArray(componentInstance.__vrl_devtools)) {
        componentInstance.__devtoolsApi = api;
        componentInstance.__vrl_devtools.forEach((devtoolsData) => {
          let backgroundColor = ORANGE_400;
          let tooltip = "";
          if (devtoolsData.isExactActive) {
            backgroundColor = LIME_500;
            tooltip = "This is exactly active";
          } else if (devtoolsData.isActive) {
            backgroundColor = BLUE_600;
            tooltip = "This link is active";
          }
          node.tags.push({
            label: devtoolsData.route.path,
            textColor: 0,
            tooltip,
            backgroundColor
          });
        });
      }
    });
    watch(router.currentRoute, () => {
      refreshRoutesView();
      api.notifyComponentUpdate();
      api.sendInspectorTree(routerInspectorId);
      api.sendInspectorState(routerInspectorId);
    });
    const navigationsLayerId = "router:navigations:" + id;
    api.addTimelineLayer({
      id: navigationsLayerId,
      label: `Router${id ? " " + id : ""} Navigations`,
      color: 4237508
    });
    router.onError((error, to2) => {
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          title: "Error during Navigation",
          subtitle: to2.fullPath,
          logType: "error",
          time: api.now(),
          data: { error },
          groupId: to2.meta.__navigationId
        }
      });
    });
    let navigationId = 0;
    router.beforeEach((to2, from) => {
      const data = {
        guard: formatDisplay("beforeEach"),
        from: formatRouteLocation(from, "Current Location during this navigation"),
        to: formatRouteLocation(to2, "Target location")
      };
      Object.defineProperty(to2.meta, "__navigationId", {
        value: navigationId++
      });
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          time: api.now(),
          title: "Start of navigation",
          subtitle: to2.fullPath,
          data,
          groupId: to2.meta.__navigationId
        }
      });
    });
    router.afterEach((to2, from, failure) => {
      const data = {
        guard: formatDisplay("afterEach")
      };
      if (failure) {
        data.failure = {
          _custom: {
            type: Error,
            readOnly: true,
            display: failure ? failure.message : "",
            tooltip: "Navigation Failure",
            value: failure
          }
        };
        data.status = formatDisplay("\u274C");
      } else {
        data.status = formatDisplay("\u2705");
      }
      data.from = formatRouteLocation(from, "Current Location during this navigation");
      data.to = formatRouteLocation(to2, "Target location");
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          title: "End of navigation",
          subtitle: to2.fullPath,
          time: api.now(),
          data,
          logType: failure ? "warning" : "default",
          groupId: to2.meta.__navigationId
        }
      });
    });
    const routerInspectorId = "router-inspector:" + id;
    api.addInspector({
      id: routerInspectorId,
      label: "Routes" + (id ? " " + id : ""),
      icon: "book",
      treeFilterPlaceholder: "Search routes"
    });
    function refreshRoutesView() {
      if (!activeRoutesPayload)
        return;
      const payload = activeRoutesPayload;
      let routes = matcher.getRoutes().filter((route) => !route.parent);
      routes.forEach(resetMatchStateOnRouteRecord);
      if (payload.filter) {
        routes = routes.filter((route) => isRouteMatching(route, payload.filter.toLowerCase()));
      }
      routes.forEach((route) => markRouteRecordActive(route, router.currentRoute.value));
      payload.rootNodes = routes.map(formatRouteRecordForInspector);
    }
    let activeRoutesPayload;
    api.on.getInspectorTree((payload) => {
      activeRoutesPayload = payload;
      if (payload.app === app && payload.inspectorId === routerInspectorId) {
        refreshRoutesView();
      }
    });
    api.on.getInspectorState((payload) => {
      if (payload.app === app && payload.inspectorId === routerInspectorId) {
        const routes = matcher.getRoutes();
        const route = routes.find((route2) => route2.record.__vd_id === payload.nodeId);
        if (route) {
          payload.state = {
            options: formatRouteRecordMatcherForStateInspector(route)
          };
        }
      }
    });
    api.sendInspectorTree(routerInspectorId);
    api.sendInspectorState(routerInspectorId);
  });
}
function modifierForKey(key) {
  if (key.optional) {
    return key.repeatable ? "*" : "?";
  } else {
    return key.repeatable ? "+" : "";
  }
}
function formatRouteRecordMatcherForStateInspector(route) {
  const { record } = route;
  const fields = [
    { editable: false, key: "path", value: record.path }
  ];
  if (record.name != null) {
    fields.push({
      editable: false,
      key: "name",
      value: record.name
    });
  }
  fields.push({ editable: false, key: "regexp", value: route.re });
  if (route.keys.length) {
    fields.push({
      editable: false,
      key: "keys",
      value: {
        _custom: {
          type: null,
          readOnly: true,
          display: route.keys.map((key) => `${key.name}${modifierForKey(key)}`).join(" "),
          tooltip: "Param keys",
          value: route.keys
        }
      }
    });
  }
  if (record.redirect != null) {
    fields.push({
      editable: false,
      key: "redirect",
      value: record.redirect
    });
  }
  if (route.alias.length) {
    fields.push({
      editable: false,
      key: "aliases",
      value: route.alias.map((alias) => alias.record.path)
    });
  }
  if (Object.keys(route.record.meta).length) {
    fields.push({
      editable: false,
      key: "meta",
      value: route.record.meta
    });
  }
  fields.push({
    key: "score",
    editable: false,
    value: {
      _custom: {
        type: null,
        readOnly: true,
        display: route.score.map((score) => score.join(", ")).join(" | "),
        tooltip: "Score used to sort routes",
        value: route.score
      }
    }
  });
  return fields;
}
const PINK_500 = 15485081;
const BLUE_600 = 2450411;
const LIME_500 = 8702998;
const CYAN_400 = 2282478;
const ORANGE_400 = 16486972;
const DARK = 6710886;
function formatRouteRecordForInspector(route) {
  const tags = [];
  const { record } = route;
  if (record.name != null) {
    tags.push({
      label: String(record.name),
      textColor: 0,
      backgroundColor: CYAN_400
    });
  }
  if (record.aliasOf) {
    tags.push({
      label: "alias",
      textColor: 0,
      backgroundColor: ORANGE_400
    });
  }
  if (route.__vd_match) {
    tags.push({
      label: "matches",
      textColor: 0,
      backgroundColor: PINK_500
    });
  }
  if (route.__vd_exactActive) {
    tags.push({
      label: "exact",
      textColor: 0,
      backgroundColor: LIME_500
    });
  }
  if (route.__vd_active) {
    tags.push({
      label: "active",
      textColor: 0,
      backgroundColor: BLUE_600
    });
  }
  if (record.redirect) {
    tags.push({
      label: typeof record.redirect === "string" ? `redirect: ${record.redirect}` : "redirects",
      textColor: 16777215,
      backgroundColor: DARK
    });
  }
  let id = record.__vd_id;
  if (id == null) {
    id = String(routeRecordId++);
    record.__vd_id = id;
  }
  return {
    id,
    label: record.path,
    tags,
    children: route.children.map(formatRouteRecordForInspector)
  };
}
let routeRecordId = 0;
const EXTRACT_REGEXP_RE = /^\/(.*)\/([a-z]*)$/;
function markRouteRecordActive(route, currentRoute) {
  const isExactActive = currentRoute.matched.length && isSameRouteRecord(currentRoute.matched[currentRoute.matched.length - 1], route.record);
  route.__vd_exactActive = route.__vd_active = isExactActive;
  if (!isExactActive) {
    route.__vd_active = currentRoute.matched.some((match) => isSameRouteRecord(match, route.record));
  }
  route.children.forEach((childRoute) => markRouteRecordActive(childRoute, currentRoute));
}
function resetMatchStateOnRouteRecord(route) {
  route.__vd_match = false;
  route.children.forEach(resetMatchStateOnRouteRecord);
}
function isRouteMatching(route, filter) {
  const found = String(route.re).match(EXTRACT_REGEXP_RE);
  route.__vd_match = false;
  if (!found || found.length < 3) {
    return false;
  }
  const nonEndingRE = new RegExp(found[1].replace(/\$$/, ""), found[2]);
  if (nonEndingRE.test(filter)) {
    route.children.forEach((child) => isRouteMatching(child, filter));
    if (route.record.path !== "/" || filter === "/") {
      route.__vd_match = route.re.test(filter);
      return true;
    }
    return false;
  }
  const path = route.record.path.toLowerCase();
  const decodedPath = decode(path);
  if (!filter.startsWith("/") && (decodedPath.includes(filter) || path.includes(filter)))
    return true;
  if (decodedPath.startsWith(filter) || path.startsWith(filter))
    return true;
  if (route.record.name && String(route.record.name).includes(filter))
    return true;
  return route.children.some((child) => isRouteMatching(child, filter));
}
function omit(obj, keys) {
  const ret = {};
  for (const key in obj) {
    if (!keys.includes(key)) {
      ret[key] = obj[key];
    }
  }
  return ret;
}
function createRouter(options2) {
  const matcher = createRouterMatcher(options2.routes, options2);
  const parseQuery$1 = options2.parseQuery || parseQuery;
  const stringifyQuery$1 = options2.stringifyQuery || stringifyQuery;
  const routerHistory = options2.history;
  if (!routerHistory)
    throw new Error('Provide the "history" option when calling "createRouter()": https://next.router.vuejs.org/api/#history.');
  const beforeGuards = useCallbacks();
  const beforeResolveGuards = useCallbacks();
  const afterGuards = useCallbacks();
  const currentRoute = shallowRef(START_LOCATION_NORMALIZED);
  let pendingLocation = START_LOCATION_NORMALIZED;
  if (isBrowser && options2.scrollBehavior && "scrollRestoration" in history) {
    history.scrollRestoration = "manual";
  }
  const normalizeParams = applyToParams.bind(null, (paramValue) => "" + paramValue);
  const encodeParams = applyToParams.bind(null, encodeParam);
  const decodeParams = applyToParams.bind(null, decode);
  function addRoute(parentOrRoute, route) {
    let parent;
    let record;
    if (isRouteName(parentOrRoute)) {
      parent = matcher.getRecordMatcher(parentOrRoute);
      record = route;
    } else {
      record = parentOrRoute;
    }
    return matcher.addRoute(record, parent);
  }
  function removeRoute(name) {
    const recordMatcher = matcher.getRecordMatcher(name);
    if (recordMatcher) {
      matcher.removeRoute(recordMatcher);
    } else {
      warn(`Cannot remove non-existent route "${String(name)}"`);
    }
  }
  function getRoutes() {
    return matcher.getRoutes().map((routeMatcher) => routeMatcher.record);
  }
  function hasRoute(name) {
    return !!matcher.getRecordMatcher(name);
  }
  function resolve2(rawLocation, currentLocation) {
    currentLocation = assign({}, currentLocation || currentRoute.value);
    if (typeof rawLocation === "string") {
      const locationNormalized = parseURL(parseQuery$1, rawLocation, currentLocation.path);
      const matchedRoute2 = matcher.resolve({ path: locationNormalized.path }, currentLocation);
      const href2 = routerHistory.createHref(locationNormalized.fullPath);
      {
        if (href2.startsWith("//"))
          warn(`Location "${rawLocation}" resolved to "${href2}". A resolved location cannot start with multiple slashes.`);
        else if (!matchedRoute2.matched.length) {
          warn(`No match found for location with path "${rawLocation}"`);
        }
      }
      return assign(locationNormalized, matchedRoute2, {
        params: decodeParams(matchedRoute2.params),
        hash: decode(locationNormalized.hash),
        redirectedFrom: void 0,
        href: href2
      });
    }
    let matcherLocation;
    if ("path" in rawLocation) {
      if ("params" in rawLocation && !("name" in rawLocation) && Object.keys(rawLocation.params).length) {
        warn(`Path "${rawLocation.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`);
      }
      matcherLocation = assign({}, rawLocation, {
        path: parseURL(parseQuery$1, rawLocation.path, currentLocation.path).path
      });
    } else {
      const targetParams = assign({}, rawLocation.params);
      for (const key in targetParams) {
        if (targetParams[key] == null) {
          delete targetParams[key];
        }
      }
      matcherLocation = assign({}, rawLocation, {
        params: encodeParams(rawLocation.params)
      });
      currentLocation.params = encodeParams(currentLocation.params);
    }
    const matchedRoute = matcher.resolve(matcherLocation, currentLocation);
    const hash = rawLocation.hash || "";
    if (hash && !hash.startsWith("#")) {
      warn(`A \`hash\` should always start with the character "#". Replace "${hash}" with "#${hash}".`);
    }
    matchedRoute.params = normalizeParams(decodeParams(matchedRoute.params));
    const fullPath = stringifyURL(stringifyQuery$1, assign({}, rawLocation, {
      hash: encodeHash(hash),
      path: matchedRoute.path
    }));
    const href = routerHistory.createHref(fullPath);
    {
      if (href.startsWith("//")) {
        warn(`Location "${rawLocation}" resolved to "${href}". A resolved location cannot start with multiple slashes.`);
      } else if (!matchedRoute.matched.length) {
        warn(`No match found for location with path "${"path" in rawLocation ? rawLocation.path : rawLocation}"`);
      }
    }
    return assign({
      fullPath,
      hash,
      query: stringifyQuery$1 === stringifyQuery ? normalizeQuery(rawLocation.query) : rawLocation.query || {}
    }, matchedRoute, {
      redirectedFrom: void 0,
      href
    });
  }
  function locationAsObject(to2) {
    return typeof to2 === "string" ? parseURL(parseQuery$1, to2, currentRoute.value.path) : assign({}, to2);
  }
  function checkCanceledNavigation(to2, from) {
    if (pendingLocation !== to2) {
      return createRouterError(8, {
        from,
        to: to2
      });
    }
  }
  function push(to2) {
    return pushWithRedirect(to2);
  }
  function replace(to2) {
    return push(assign(locationAsObject(to2), { replace: true }));
  }
  function handleRedirectRecord(to2) {
    const lastMatched = to2.matched[to2.matched.length - 1];
    if (lastMatched && lastMatched.redirect) {
      const { redirect } = lastMatched;
      let newTargetLocation = typeof redirect === "function" ? redirect(to2) : redirect;
      if (typeof newTargetLocation === "string") {
        newTargetLocation = newTargetLocation.includes("?") || newTargetLocation.includes("#") ? newTargetLocation = locationAsObject(newTargetLocation) : { path: newTargetLocation };
        newTargetLocation.params = {};
      }
      if (!("path" in newTargetLocation) && !("name" in newTargetLocation)) {
        warn(`Invalid redirect found:
${JSON.stringify(newTargetLocation, null, 2)}
 when navigating to "${to2.fullPath}". A redirect must contain a name or path. This will break in production.`);
        throw new Error("Invalid redirect");
      }
      return assign({
        query: to2.query,
        hash: to2.hash,
        params: "path" in newTargetLocation ? {} : to2.params
      }, newTargetLocation);
    }
  }
  function pushWithRedirect(to2, redirectedFrom) {
    const targetLocation = pendingLocation = resolve2(to2);
    const from = currentRoute.value;
    const data = to2.state;
    const force = to2.force;
    const replace2 = to2.replace === true;
    const shouldRedirect = handleRedirectRecord(targetLocation);
    if (shouldRedirect)
      return pushWithRedirect(
        assign(locationAsObject(shouldRedirect), {
          state: data,
          force,
          replace: replace2
        }),
        redirectedFrom || targetLocation
      );
    const toLocation = targetLocation;
    toLocation.redirectedFrom = redirectedFrom;
    let failure;
    if (!force && isSameRouteLocation(stringifyQuery$1, from, targetLocation)) {
      failure = createRouterError(16, { to: toLocation, from });
      handleScroll(
        from,
        from,
        true,
        false
      );
    }
    return (failure ? Promise.resolve(failure) : navigate(toLocation, from)).catch((error) => isNavigationFailure(error) ? isNavigationFailure(error, 2) ? error : markAsReady(error) : triggerError(error, toLocation, from)).then((failure2) => {
      if (failure2) {
        if (isNavigationFailure(failure2, 2)) {
          if (isSameRouteLocation(stringifyQuery$1, resolve2(failure2.to), toLocation) && redirectedFrom && (redirectedFrom._count = redirectedFrom._count ? redirectedFrom._count + 1 : 1) > 10) {
            warn(`Detected an infinite redirection in a navigation guard when going from "${from.fullPath}" to "${toLocation.fullPath}". Aborting to avoid a Stack Overflow. This will break in production if not fixed.`);
            return Promise.reject(new Error("Infinite redirect in navigation guard"));
          }
          return pushWithRedirect(
            assign({
              replace: replace2
            }, locationAsObject(failure2.to), {
              state: data,
              force
            }),
            redirectedFrom || toLocation
          );
        }
      } else {
        failure2 = finalizeNavigation(toLocation, from, true, replace2, data);
      }
      triggerAfterEach(toLocation, from, failure2);
      return failure2;
    });
  }
  function checkCanceledNavigationAndReject(to2, from) {
    const error = checkCanceledNavigation(to2, from);
    return error ? Promise.reject(error) : Promise.resolve();
  }
  function navigate(to2, from) {
    let guards;
    const [leavingRecords, updatingRecords, enteringRecords] = extractChangingRecords(to2, from);
    guards = extractComponentsGuards(leavingRecords.reverse(), "beforeRouteLeave", to2, from);
    for (const record of leavingRecords) {
      record.leaveGuards.forEach((guard) => {
        guards.push(guardToPromiseFn(guard, to2, from));
      });
    }
    const canceledNavigationCheck = checkCanceledNavigationAndReject.bind(null, to2, from);
    guards.push(canceledNavigationCheck);
    return runGuardQueue(guards).then(() => {
      guards = [];
      for (const guard of beforeGuards.list()) {
        guards.push(guardToPromiseFn(guard, to2, from));
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = extractComponentsGuards(updatingRecords, "beforeRouteUpdate", to2, from);
      for (const record of updatingRecords) {
        record.updateGuards.forEach((guard) => {
          guards.push(guardToPromiseFn(guard, to2, from));
        });
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = [];
      for (const record of to2.matched) {
        if (record.beforeEnter && !from.matched.includes(record)) {
          if (isArray(record.beforeEnter)) {
            for (const beforeEnter of record.beforeEnter)
              guards.push(guardToPromiseFn(beforeEnter, to2, from));
          } else {
            guards.push(guardToPromiseFn(record.beforeEnter, to2, from));
          }
        }
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      to2.matched.forEach((record) => record.enterCallbacks = {});
      guards = extractComponentsGuards(enteringRecords, "beforeRouteEnter", to2, from);
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = [];
      for (const guard of beforeResolveGuards.list()) {
        guards.push(guardToPromiseFn(guard, to2, from));
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).catch((err) => isNavigationFailure(err, 8) ? err : Promise.reject(err));
  }
  function triggerAfterEach(to2, from, failure) {
    for (const guard of afterGuards.list())
      guard(to2, from, failure);
  }
  function finalizeNavigation(toLocation, from, isPush, replace2, data) {
    const error = checkCanceledNavigation(toLocation, from);
    if (error)
      return error;
    const isFirstNavigation = from === START_LOCATION_NORMALIZED;
    const state = !isBrowser ? {} : history.state;
    if (isPush) {
      if (replace2 || isFirstNavigation)
        routerHistory.replace(toLocation.fullPath, assign({
          scroll: isFirstNavigation && state && state.scroll
        }, data));
      else
        routerHistory.push(toLocation.fullPath, data);
    }
    currentRoute.value = toLocation;
    handleScroll(toLocation, from, isPush, isFirstNavigation);
    markAsReady();
  }
  let removeHistoryListener;
  function setupListeners() {
    if (removeHistoryListener)
      return;
    removeHistoryListener = routerHistory.listen((to2, _from, info) => {
      if (!router.listening)
        return;
      const toLocation = resolve2(to2);
      const shouldRedirect = handleRedirectRecord(toLocation);
      if (shouldRedirect) {
        pushWithRedirect(assign(shouldRedirect, { replace: true }), toLocation).catch(noop$2);
        return;
      }
      pendingLocation = toLocation;
      const from = currentRoute.value;
      if (isBrowser) {
        saveScrollPosition(getScrollKey(from.fullPath, info.delta), computeScrollPosition());
      }
      navigate(toLocation, from).catch((error) => {
        if (isNavigationFailure(error, 4 | 8)) {
          return error;
        }
        if (isNavigationFailure(error, 2)) {
          pushWithRedirect(
            error.to,
            toLocation
          ).then((failure) => {
            if (isNavigationFailure(failure, 4 | 16) && !info.delta && info.type === NavigationType.pop) {
              routerHistory.go(-1, false);
            }
          }).catch(noop$2);
          return Promise.reject();
        }
        if (info.delta) {
          routerHistory.go(-info.delta, false);
        }
        return triggerError(error, toLocation, from);
      }).then((failure) => {
        failure = failure || finalizeNavigation(
          toLocation,
          from,
          false
        );
        if (failure) {
          if (info.delta && !isNavigationFailure(failure, 8)) {
            routerHistory.go(-info.delta, false);
          } else if (info.type === NavigationType.pop && isNavigationFailure(failure, 4 | 16)) {
            routerHistory.go(-1, false);
          }
        }
        triggerAfterEach(toLocation, from, failure);
      }).catch(noop$2);
    });
  }
  let readyHandlers = useCallbacks();
  let errorHandlers = useCallbacks();
  let ready;
  function triggerError(error, to2, from) {
    markAsReady(error);
    const list = errorHandlers.list();
    if (list.length) {
      list.forEach((handler) => handler(error, to2, from));
    } else {
      {
        warn("uncaught error during route navigation:");
      }
      console.error(error);
    }
    return Promise.reject(error);
  }
  function isReady() {
    if (ready && currentRoute.value !== START_LOCATION_NORMALIZED)
      return Promise.resolve();
    return new Promise((resolve3, reject) => {
      readyHandlers.add([resolve3, reject]);
    });
  }
  function markAsReady(err) {
    if (!ready) {
      ready = !err;
      setupListeners();
      readyHandlers.list().forEach(([resolve3, reject]) => err ? reject(err) : resolve3());
      readyHandlers.reset();
    }
    return err;
  }
  function handleScroll(to2, from, isPush, isFirstNavigation) {
    const { scrollBehavior } = options2;
    if (!isBrowser || !scrollBehavior)
      return Promise.resolve();
    const scrollPosition = !isPush && getSavedScrollPosition(getScrollKey(to2.fullPath, 0)) || (isFirstNavigation || !isPush) && history.state && history.state.scroll || null;
    return nextTick().then(() => scrollBehavior(to2, from, scrollPosition)).then((position) => position && scrollToPosition(position)).catch((err) => triggerError(err, to2, from));
  }
  const go2 = (delta) => routerHistory.go(delta);
  let started;
  const installedApps = /* @__PURE__ */ new Set();
  const router = {
    currentRoute,
    listening: true,
    addRoute,
    removeRoute,
    hasRoute,
    getRoutes,
    resolve: resolve2,
    options: options2,
    push,
    replace,
    go: go2,
    back: () => go2(-1),
    forward: () => go2(1),
    beforeEach: beforeGuards.add,
    beforeResolve: beforeResolveGuards.add,
    afterEach: afterGuards.add,
    onError: errorHandlers.add,
    isReady,
    install(app) {
      const router2 = this;
      app.component("RouterLink", RouterLink);
      app.component("RouterView", RouterView);
      app.config.globalProperties.$router = router2;
      Object.defineProperty(app.config.globalProperties, "$route", {
        enumerable: true,
        get: () => unref(currentRoute)
      });
      if (isBrowser && !started && currentRoute.value === START_LOCATION_NORMALIZED) {
        started = true;
        push(routerHistory.location).catch((err) => {
          warn("Unexpected error when starting the router:", err);
        });
      }
      const reactiveRoute = {};
      for (const key in START_LOCATION_NORMALIZED) {
        reactiveRoute[key] = computed(() => currentRoute.value[key]);
      }
      app.provide(routerKey, router2);
      app.provide(routeLocationKey, reactive(reactiveRoute));
      app.provide(routerViewLocationKey, currentRoute);
      const unmountApp = app.unmount;
      installedApps.add(app);
      app.unmount = function() {
        installedApps.delete(app);
        if (installedApps.size < 1) {
          pendingLocation = START_LOCATION_NORMALIZED;
          removeHistoryListener && removeHistoryListener();
          removeHistoryListener = null;
          currentRoute.value = START_LOCATION_NORMALIZED;
          started = false;
          ready = false;
        }
        unmountApp();
      };
      if (isBrowser) {
        addDevtools(app, router2, matcher);
      }
    }
  };
  return router;
}
function runGuardQueue(guards) {
  return guards.reduce((promise2, guard) => promise2.then(() => guard()), Promise.resolve());
}
function extractChangingRecords(to2, from) {
  const leavingRecords = [];
  const updatingRecords = [];
  const enteringRecords = [];
  const len = Math.max(from.matched.length, to2.matched.length);
  for (let i2 = 0; i2 < len; i2++) {
    const recordFrom = from.matched[i2];
    if (recordFrom) {
      if (to2.matched.find((record) => isSameRouteRecord(record, recordFrom)))
        updatingRecords.push(recordFrom);
      else
        leavingRecords.push(recordFrom);
    }
    const recordTo = to2.matched[i2];
    if (recordTo) {
      if (!from.matched.find((record) => isSameRouteRecord(record, recordTo))) {
        enteringRecords.push(recordTo);
      }
    }
  }
  return [leavingRecords, updatingRecords, enteringRecords];
}
function useRouter() {
  return inject(routerKey);
}
function useRoute() {
  return inject(routeLocationKey);
}
const useActiveHeaderLinks = ({ headerLinkSelector: headerLinkSelector2, headerAnchorSelector: headerAnchorSelector2, delay: delay2, offset: offset2 = 5 }) => {
  const router = useRouter();
  const page = usePageData();
  const setActiveRouteHash = () => {
    var _a2, _b, _c, _d;
    const scrollTop = Math.max(window.scrollY, document.documentElement.scrollTop, document.body.scrollTop);
    const isAtPageTop = Math.abs(scrollTop - 0) < offset2;
    if (isAtPageTop) {
      replaceWithoutScrollBehavior(router, {
        hash: "",
        force: true
      });
      return;
    }
    const scrollBottom = window.innerHeight + scrollTop;
    const scrollHeight = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);
    const isAtPageBottom = Math.abs(scrollHeight - scrollBottom) < offset2;
    const headerLinks = Array.from(document.querySelectorAll(headerLinkSelector2));
    const headerAnchors = Array.from(document.querySelectorAll(headerAnchorSelector2));
    const existedHeaderAnchors = headerAnchors.filter((anchor) => headerLinks.some((link) => link.hash === anchor.hash));
    for (let i2 = 0; i2 < existedHeaderAnchors.length; i2++) {
      const anchor = existedHeaderAnchors[i2];
      const nextAnchor = existedHeaderAnchors[i2 + 1];
      const hasPassedCurrentAnchor = scrollTop >= ((_b = (_a2 = anchor.parentElement) == null ? void 0 : _a2.offsetTop) != null ? _b : 0) - offset2;
      const hasNotPassedNextAnchor = !nextAnchor || scrollTop < ((_d = (_c = nextAnchor.parentElement) == null ? void 0 : _c.offsetTop) != null ? _d : 0) - offset2;
      const isActive = hasPassedCurrentAnchor && hasNotPassedNextAnchor;
      if (!isActive)
        continue;
      const routeHash = decodeURIComponent(router.currentRoute.value.hash);
      const anchorHash = decodeURIComponent(anchor.hash);
      if (routeHash === anchorHash)
        return;
      if (isAtPageBottom) {
        for (let j2 = i2 + 1; j2 < existedHeaderAnchors.length; j2++) {
          if (routeHash === decodeURIComponent(existedHeaderAnchors[j2].hash)) {
            return;
          }
        }
      }
      replaceWithoutScrollBehavior(router, {
        hash: anchorHash,
        force: true
      });
      return;
    }
  };
  const onScroll = r$2(setActiveRouteHash, delay2);
  onMounted(() => {
    onScroll();
    window.addEventListener("scroll", onScroll);
  });
  onBeforeUnmount(() => {
    window.removeEventListener("scroll", onScroll);
  });
  watch(() => page.value.path, onScroll);
};
const replaceWithoutScrollBehavior = async (router, ...args) => {
  const { scrollBehavior } = router.options;
  router.options.scrollBehavior = void 0;
  await router.replace(...args).finally(() => router.options.scrollBehavior = scrollBehavior);
};
const headerLinkSelector = "a.sidebar-item";
const headerAnchorSelector = ".header-anchor";
const delay$1 = 300;
const offset = 5;
var clientConfig0 = defineClientConfig({
  setup() {
    useActiveHeaderLinks({
      headerLinkSelector,
      headerAnchorSelector,
      delay: delay$1,
      offset
    });
  }
});
const getScrollTop = () => window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
const scrollToTop = () => window.scrollTo({ top: 0, behavior: "smooth" });
var vars$4 = "";
var backToTop = "";
const BackToTop = defineComponent({
  name: "BackToTop",
  setup() {
    const scrollTop = ref(0);
    const show = computed(() => scrollTop.value > 300);
    const onScroll = r$2(() => {
      scrollTop.value = getScrollTop();
    }, 100);
    onMounted(() => {
      scrollTop.value = getScrollTop();
      window.addEventListener("scroll", () => onScroll());
    });
    const backToTopEl = h$1("div", { class: "back-to-top", onClick: scrollToTop });
    return () => h$1(Transition, {
      name: "back-to-top"
    }, () => show.value ? backToTopEl : null);
  }
});
var clientConfig1 = defineClientConfig({
  rootComponents: [BackToTop]
});
var vars$3 = "";
var externalLinkIcon = "";
const svg = h$1("svg", {
  "class": "external-link-icon",
  "xmlns": "http://www.w3.org/2000/svg",
  "aria-hidden": "true",
  "focusable": "false",
  "x": "0px",
  "y": "0px",
  "viewBox": "0 0 100 100",
  "width": "15",
  "height": "15"
}, [
  h$1("path", {
    fill: "currentColor",
    d: "M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"
  }),
  h$1("polygon", {
    fill: "currentColor",
    points: "45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"
  })
]);
const ExternalLinkIcon = defineComponent({
  name: "ExternalLinkIcon",
  props: {
    locales: {
      type: Object,
      required: false,
      default: () => ({})
    }
  },
  setup(props) {
    const routeLocale = useRouteLocale();
    const locale = computed(() => {
      var _a2;
      return (_a2 = props.locales[routeLocale.value]) != null ? _a2 : {
        openInNewWindow: "open in new window"
      };
    });
    return () => h$1("span", [
      svg,
      h$1("span", {
        class: "external-link-icon-sr-only"
      }, locale.value.openInNewWindow)
    ]);
  }
});
const locales$1 = { "/": { "openInNewWindow": "open in new window" } };
var clientConfig2 = defineClientConfig({
  enhance({ app }) {
    app.component("ExternalLinkIcon", h$1(ExternalLinkIcon, { locales: locales$1 }));
  }
});
/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */
var _extends = Object.assign || function(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2];
    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }
  return target;
};
var isSupported = function isSupported2(node) {
  return node.tagName === "IMG";
};
var isNodeList = function isNodeList2(selector2) {
  return NodeList.prototype.isPrototypeOf(selector2);
};
var isNode = function isNode2(selector2) {
  return selector2 && selector2.nodeType === 1;
};
var isSvg = function isSvg2(image) {
  var source = image.currentSrc || image.src;
  return source.substr(-4).toLowerCase() === ".svg";
};
var getImagesFromSelector = function getImagesFromSelector2(selector2) {
  try {
    if (Array.isArray(selector2)) {
      return selector2.filter(isSupported);
    }
    if (isNodeList(selector2)) {
      return [].slice.call(selector2).filter(isSupported);
    }
    if (isNode(selector2)) {
      return [selector2].filter(isSupported);
    }
    if (typeof selector2 === "string") {
      return [].slice.call(document.querySelectorAll(selector2)).filter(isSupported);
    }
    return [];
  } catch (err) {
    throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom");
  }
};
var createOverlay = function createOverlay2(background) {
  var overlay = document.createElement("div");
  overlay.classList.add("medium-zoom-overlay");
  overlay.style.background = background;
  return overlay;
};
var cloneTarget = function cloneTarget2(template) {
  var _template$getBounding = template.getBoundingClientRect(), top = _template$getBounding.top, left = _template$getBounding.left, width = _template$getBounding.width, height = _template$getBounding.height;
  var clone = template.cloneNode();
  var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
  var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;
  clone.removeAttribute("id");
  clone.style.position = "absolute";
  clone.style.top = top + scrollTop + "px";
  clone.style.left = left + scrollLeft + "px";
  clone.style.width = width + "px";
  clone.style.height = height + "px";
  clone.style.transform = "";
  return clone;
};
var createCustomEvent = function createCustomEvent2(type, params) {
  var eventParams = _extends({
    bubbles: false,
    cancelable: false,
    detail: void 0
  }, params);
  if (typeof window.CustomEvent === "function") {
    return new CustomEvent(type, eventParams);
  }
  var customEvent = document.createEvent("CustomEvent");
  customEvent.initCustomEvent(type, eventParams.bubbles, eventParams.cancelable, eventParams.detail);
  return customEvent;
};
var mediumZoom$1 = function mediumZoom(selector2) {
  var options2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var Promise2 = window.Promise || function Promise3(fn2) {
    function noop2() {
    }
    fn2(noop2, noop2);
  };
  var _handleClick = function _handleClick2(event) {
    var target = event.target;
    if (target === overlay) {
      close();
      return;
    }
    if (images.indexOf(target) === -1) {
      return;
    }
    toggle({ target });
  };
  var _handleScroll = function _handleScroll2() {
    if (isAnimating || !active.original) {
      return;
    }
    var currentScroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
    if (Math.abs(scrollTop - currentScroll) > zoomOptions2.scrollOffset) {
      setTimeout(close, 150);
    }
  };
  var _handleKeyUp = function _handleKeyUp2(event) {
    var key = event.key || event.keyCode;
    if (key === "Escape" || key === "Esc" || key === 27) {
      close();
    }
  };
  var update = function update2() {
    var options3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    var newOptions = options3;
    if (options3.background) {
      overlay.style.background = options3.background;
    }
    if (options3.container && options3.container instanceof Object) {
      newOptions.container = _extends({}, zoomOptions2.container, options3.container);
    }
    if (options3.template) {
      var template = isNode(options3.template) ? options3.template : document.querySelector(options3.template);
      newOptions.template = template;
    }
    zoomOptions2 = _extends({}, zoomOptions2, newOptions);
    images.forEach(function(image) {
      image.dispatchEvent(createCustomEvent("medium-zoom:update", {
        detail: { zoom }
      }));
    });
    return zoom;
  };
  var clone = function clone2() {
    var options3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    return mediumZoom(_extends({}, zoomOptions2, options3));
  };
  var attach = function attach2() {
    for (var _len = arguments.length, selectors = Array(_len), _key = 0; _key < _len; _key++) {
      selectors[_key] = arguments[_key];
    }
    var newImages = selectors.reduce(function(imagesAccumulator, currentSelector) {
      return [].concat(imagesAccumulator, getImagesFromSelector(currentSelector));
    }, []);
    newImages.filter(function(newImage) {
      return images.indexOf(newImage) === -1;
    }).forEach(function(newImage) {
      images.push(newImage);
      newImage.classList.add("medium-zoom-image");
    });
    eventListeners.forEach(function(_ref) {
      var type = _ref.type, listener = _ref.listener, options3 = _ref.options;
      newImages.forEach(function(image) {
        image.addEventListener(type, listener, options3);
      });
    });
    return zoom;
  };
  var detach = function detach2() {
    for (var _len2 = arguments.length, selectors = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      selectors[_key2] = arguments[_key2];
    }
    if (active.zoomed) {
      close();
    }
    var imagesToDetach = selectors.length > 0 ? selectors.reduce(function(imagesAccumulator, currentSelector) {
      return [].concat(imagesAccumulator, getImagesFromSelector(currentSelector));
    }, []) : images;
    imagesToDetach.forEach(function(image) {
      image.classList.remove("medium-zoom-image");
      image.dispatchEvent(createCustomEvent("medium-zoom:detach", {
        detail: { zoom }
      }));
    });
    images = images.filter(function(image) {
      return imagesToDetach.indexOf(image) === -1;
    });
    return zoom;
  };
  var on2 = function on3(type, listener) {
    var options3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    images.forEach(function(image) {
      image.addEventListener("medium-zoom:" + type, listener, options3);
    });
    eventListeners.push({ type: "medium-zoom:" + type, listener, options: options3 });
    return zoom;
  };
  var off = function off2(type, listener) {
    var options3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    images.forEach(function(image) {
      image.removeEventListener("medium-zoom:" + type, listener, options3);
    });
    eventListeners = eventListeners.filter(function(eventListener) {
      return !(eventListener.type === "medium-zoom:" + type && eventListener.listener.toString() === listener.toString());
    });
    return zoom;
  };
  var open = function open2() {
    var _ref2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, target = _ref2.target;
    var _animate = function _animate2() {
      var container = {
        width: document.documentElement.clientWidth,
        height: document.documentElement.clientHeight,
        left: 0,
        top: 0,
        right: 0,
        bottom: 0
      };
      var viewportWidth = void 0;
      var viewportHeight = void 0;
      if (zoomOptions2.container) {
        if (zoomOptions2.container instanceof Object) {
          container = _extends({}, container, zoomOptions2.container);
          viewportWidth = container.width - container.left - container.right - zoomOptions2.margin * 2;
          viewportHeight = container.height - container.top - container.bottom - zoomOptions2.margin * 2;
        } else {
          var zoomContainer = isNode(zoomOptions2.container) ? zoomOptions2.container : document.querySelector(zoomOptions2.container);
          var _zoomContainer$getBou = zoomContainer.getBoundingClientRect(), _width = _zoomContainer$getBou.width, _height = _zoomContainer$getBou.height, _left = _zoomContainer$getBou.left, _top = _zoomContainer$getBou.top;
          container = _extends({}, container, {
            width: _width,
            height: _height,
            left: _left,
            top: _top
          });
        }
      }
      viewportWidth = viewportWidth || container.width - zoomOptions2.margin * 2;
      viewportHeight = viewportHeight || container.height - zoomOptions2.margin * 2;
      var zoomTarget = active.zoomedHd || active.original;
      var naturalWidth = isSvg(zoomTarget) ? viewportWidth : zoomTarget.naturalWidth || viewportWidth;
      var naturalHeight = isSvg(zoomTarget) ? viewportHeight : zoomTarget.naturalHeight || viewportHeight;
      var _zoomTarget$getBoundi = zoomTarget.getBoundingClientRect(), top = _zoomTarget$getBoundi.top, left = _zoomTarget$getBoundi.left, width = _zoomTarget$getBoundi.width, height = _zoomTarget$getBoundi.height;
      var scaleX = Math.min(naturalWidth, viewportWidth) / width;
      var scaleY = Math.min(naturalHeight, viewportHeight) / height;
      var scale = Math.min(scaleX, scaleY);
      var translateX = (-left + (viewportWidth - width) / 2 + zoomOptions2.margin + container.left) / scale;
      var translateY = (-top + (viewportHeight - height) / 2 + zoomOptions2.margin + container.top) / scale;
      var transform = "scale(" + scale + ") translate3d(" + translateX + "px, " + translateY + "px, 0)";
      active.zoomed.style.transform = transform;
      if (active.zoomedHd) {
        active.zoomedHd.style.transform = transform;
      }
    };
    return new Promise2(function(resolve2) {
      if (target && images.indexOf(target) === -1) {
        resolve2(zoom);
        return;
      }
      var _handleOpenEnd = function _handleOpenEnd2() {
        isAnimating = false;
        active.zoomed.removeEventListener("transitionend", _handleOpenEnd2);
        active.original.dispatchEvent(createCustomEvent("medium-zoom:opened", {
          detail: { zoom }
        }));
        resolve2(zoom);
      };
      if (active.zoomed) {
        resolve2(zoom);
        return;
      }
      if (target) {
        active.original = target;
      } else if (images.length > 0) {
        var _images = images;
        active.original = _images[0];
      } else {
        resolve2(zoom);
        return;
      }
      active.original.dispatchEvent(createCustomEvent("medium-zoom:open", {
        detail: { zoom }
      }));
      scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
      isAnimating = true;
      active.zoomed = cloneTarget(active.original);
      document.body.appendChild(overlay);
      if (zoomOptions2.template) {
        var template = isNode(zoomOptions2.template) ? zoomOptions2.template : document.querySelector(zoomOptions2.template);
        active.template = document.createElement("div");
        active.template.appendChild(template.content.cloneNode(true));
        document.body.appendChild(active.template);
      }
      document.body.appendChild(active.zoomed);
      window.requestAnimationFrame(function() {
        document.body.classList.add("medium-zoom--opened");
      });
      active.original.classList.add("medium-zoom-image--hidden");
      active.zoomed.classList.add("medium-zoom-image--opened");
      active.zoomed.addEventListener("click", close);
      active.zoomed.addEventListener("transitionend", _handleOpenEnd);
      if (active.original.getAttribute("data-zoom-src")) {
        active.zoomedHd = active.zoomed.cloneNode();
        active.zoomedHd.removeAttribute("srcset");
        active.zoomedHd.removeAttribute("sizes");
        active.zoomedHd.src = active.zoomed.getAttribute("data-zoom-src");
        active.zoomedHd.onerror = function() {
          clearInterval(getZoomTargetSize);
          console.warn("Unable to reach the zoom image target " + active.zoomedHd.src);
          active.zoomedHd = null;
          _animate();
        };
        var getZoomTargetSize = setInterval(function() {
          if (active.zoomedHd.complete) {
            clearInterval(getZoomTargetSize);
            active.zoomedHd.classList.add("medium-zoom-image--opened");
            active.zoomedHd.addEventListener("click", close);
            document.body.appendChild(active.zoomedHd);
            _animate();
          }
        }, 10);
      } else if (active.original.hasAttribute("srcset")) {
        active.zoomedHd = active.zoomed.cloneNode();
        active.zoomedHd.removeAttribute("sizes");
        active.zoomedHd.removeAttribute("loading");
        var loadEventListener = active.zoomedHd.addEventListener("load", function() {
          active.zoomedHd.removeEventListener("load", loadEventListener);
          active.zoomedHd.classList.add("medium-zoom-image--opened");
          active.zoomedHd.addEventListener("click", close);
          document.body.appendChild(active.zoomedHd);
          _animate();
        });
      } else {
        _animate();
      }
    });
  };
  var close = function close2() {
    return new Promise2(function(resolve2) {
      if (isAnimating || !active.original) {
        resolve2(zoom);
        return;
      }
      var _handleCloseEnd = function _handleCloseEnd2() {
        active.original.classList.remove("medium-zoom-image--hidden");
        document.body.removeChild(active.zoomed);
        if (active.zoomedHd) {
          document.body.removeChild(active.zoomedHd);
        }
        document.body.removeChild(overlay);
        active.zoomed.classList.remove("medium-zoom-image--opened");
        if (active.template) {
          document.body.removeChild(active.template);
        }
        isAnimating = false;
        active.zoomed.removeEventListener("transitionend", _handleCloseEnd2);
        active.original.dispatchEvent(createCustomEvent("medium-zoom:closed", {
          detail: { zoom }
        }));
        active.original = null;
        active.zoomed = null;
        active.zoomedHd = null;
        active.template = null;
        resolve2(zoom);
      };
      isAnimating = true;
      document.body.classList.remove("medium-zoom--opened");
      active.zoomed.style.transform = "";
      if (active.zoomedHd) {
        active.zoomedHd.style.transform = "";
      }
      if (active.template) {
        active.template.style.transition = "opacity 150ms";
        active.template.style.opacity = 0;
      }
      active.original.dispatchEvent(createCustomEvent("medium-zoom:close", {
        detail: { zoom }
      }));
      active.zoomed.addEventListener("transitionend", _handleCloseEnd);
    });
  };
  var toggle = function toggle2() {
    var _ref3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, target = _ref3.target;
    if (active.original) {
      return close();
    }
    return open({ target });
  };
  var getOptions = function getOptions2() {
    return zoomOptions2;
  };
  var getImages = function getImages2() {
    return images;
  };
  var getZoomedImage = function getZoomedImage2() {
    return active.original;
  };
  var images = [];
  var eventListeners = [];
  var isAnimating = false;
  var scrollTop = 0;
  var zoomOptions2 = options2;
  var active = {
    original: null,
    zoomed: null,
    zoomedHd: null,
    template: null
  };
  if (Object.prototype.toString.call(selector2) === "[object Object]") {
    zoomOptions2 = selector2;
  } else if (selector2 || typeof selector2 === "string") {
    attach(selector2);
  }
  zoomOptions2 = _extends({
    margin: 0,
    background: "#fff",
    scrollOffset: 40,
    container: null,
    template: null
  }, zoomOptions2);
  var overlay = createOverlay(zoomOptions2.background);
  document.addEventListener("click", _handleClick);
  document.addEventListener("keyup", _handleKeyUp);
  document.addEventListener("scroll", _handleScroll);
  window.addEventListener("resize", close);
  var zoom = {
    open,
    close,
    toggle,
    update,
    clone,
    attach,
    detach,
    on: on2,
    off,
    getOptions,
    getImages,
    getZoomedImage
  };
  return zoom;
};
function styleInject(css2, ref2) {
  if (ref2 === void 0)
    ref2 = {};
  var insertAt = ref2.insertAt;
  if (!css2 || typeof document === "undefined") {
    return;
  }
  var head = document.head || document.getElementsByTagName("head")[0];
  var style2 = document.createElement("style");
  style2.type = "text/css";
  if (insertAt === "top") {
    if (head.firstChild) {
      head.insertBefore(style2, head.firstChild);
    } else {
      head.appendChild(style2);
    }
  } else {
    head.appendChild(style2);
  }
  if (style2.styleSheet) {
    style2.styleSheet.cssText = css2;
  } else {
    style2.appendChild(document.createTextNode(css2));
  }
}
var css$1 = ".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";
styleInject(css$1);
var mediumZoom$2 = mediumZoom$1;
const mediumZoomSymbol = Symbol("mediumZoom");
var vars$2 = "";
var mediumZoom2 = "";
const selector = ".theme-default-content > img, .theme-default-content :not(a) > img";
const zoomOptions = {};
const delay = 300;
var clientConfig3 = defineClientConfig({
  enhance({ app, router }) {
    const zoom = mediumZoom$2(zoomOptions);
    zoom.refresh = (sel = selector) => {
      zoom.detach();
      zoom.attach(sel);
    };
    app.provide(mediumZoomSymbol, zoom);
    router.afterEach(() => {
      setTimeout(() => zoom.refresh(), delay);
    });
  }
});
/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */
const nprogress$1 = {
  settings: {
    minimum: 0.08,
    easing: "ease",
    speed: 200,
    trickle: true,
    trickleRate: 0.02,
    trickleSpeed: 800,
    barSelector: '[role="bar"]',
    parent: "body",
    template: '<div class="bar" role="bar"></div>'
  },
  status: null,
  set: (n2) => {
    const started = nprogress$1.isStarted();
    n2 = clamp(n2, nprogress$1.settings.minimum, 1);
    nprogress$1.status = n2 === 1 ? null : n2;
    const progress = nprogress$1.render(!started);
    const bar = progress.querySelector(nprogress$1.settings.barSelector);
    const speed = nprogress$1.settings.speed;
    const ease = nprogress$1.settings.easing;
    progress.offsetWidth;
    queue((next) => {
      css(bar, {
        transform: "translate3d(" + toBarPerc(n2) + "%,0,0)",
        transition: "all " + speed + "ms " + ease
      });
      if (n2 === 1) {
        css(progress, {
          transition: "none",
          opacity: "1"
        });
        progress.offsetWidth;
        setTimeout(function() {
          css(progress, {
            transition: "all " + speed + "ms linear",
            opacity: "0"
          });
          setTimeout(function() {
            nprogress$1.remove();
            next();
          }, speed);
        }, speed);
      } else {
        setTimeout(() => next(), speed);
      }
    });
    return nprogress$1;
  },
  isStarted: () => typeof nprogress$1.status === "number",
  start: () => {
    if (!nprogress$1.status)
      nprogress$1.set(0);
    const work = () => {
      setTimeout(() => {
        if (!nprogress$1.status)
          return;
        nprogress$1.trickle();
        work();
      }, nprogress$1.settings.trickleSpeed);
    };
    if (nprogress$1.settings.trickle)
      work();
    return nprogress$1;
  },
  done: (force) => {
    if (!force && !nprogress$1.status)
      return nprogress$1;
    return nprogress$1.inc(0.3 + 0.5 * Math.random()).set(1);
  },
  inc: (amount) => {
    let n2 = nprogress$1.status;
    if (!n2) {
      return nprogress$1.start();
    }
    if (typeof amount !== "number") {
      amount = (1 - n2) * clamp(Math.random() * n2, 0.1, 0.95);
    }
    n2 = clamp(n2 + amount, 0, 0.994);
    return nprogress$1.set(n2);
  },
  trickle: () => nprogress$1.inc(Math.random() * nprogress$1.settings.trickleRate),
  render: (fromStart) => {
    if (nprogress$1.isRendered()) {
      return document.getElementById("nprogress");
    }
    addClass(document.documentElement, "nprogress-busy");
    const progress = document.createElement("div");
    progress.id = "nprogress";
    progress.innerHTML = nprogress$1.settings.template;
    const bar = progress.querySelector(nprogress$1.settings.barSelector);
    const perc = fromStart ? "-100" : toBarPerc(nprogress$1.status || 0);
    const parent = document.querySelector(nprogress$1.settings.parent);
    css(bar, {
      transition: "all 0 linear",
      transform: "translate3d(" + perc + "%,0,0)"
    });
    if (parent !== document.body) {
      addClass(parent, "nprogress-custom-parent");
    }
    parent == null ? void 0 : parent.appendChild(progress);
    return progress;
  },
  remove: () => {
    removeClass(document.documentElement, "nprogress-busy");
    removeClass(document.querySelector(nprogress$1.settings.parent), "nprogress-custom-parent");
    const progress = document.getElementById("nprogress");
    progress && removeElement(progress);
  },
  isRendered: () => !!document.getElementById("nprogress")
};
const clamp = (n2, min, max) => {
  if (n2 < min)
    return min;
  if (n2 > max)
    return max;
  return n2;
};
const toBarPerc = (n2) => (-1 + n2) * 100;
const queue = function() {
  const pending = [];
  function next() {
    const fn2 = pending.shift();
    if (fn2) {
      fn2(next);
    }
  }
  return function(fn2) {
    pending.push(fn2);
    if (pending.length === 1)
      next();
  };
}();
const css = function() {
  const cssPrefixes = ["Webkit", "O", "Moz", "ms"];
  const cssProps = {};
  function camelCase(string) {
    return string.replace(/^-ms-/, "ms-").replace(/-([\da-z])/gi, function(match, letter) {
      return letter.toUpperCase();
    });
  }
  function getVendorProp(name) {
    const style2 = document.body.style;
    if (name in style2)
      return name;
    let i2 = cssPrefixes.length;
    const capName = name.charAt(0).toUpperCase() + name.slice(1);
    let vendorName;
    while (i2--) {
      vendorName = cssPrefixes[i2] + capName;
      if (vendorName in style2)
        return vendorName;
    }
    return name;
  }
  function getStyleProp(name) {
    name = camelCase(name);
    return cssProps[name] || (cssProps[name] = getVendorProp(name));
  }
  function applyCss(element, prop, value) {
    prop = getStyleProp(prop);
    element.style[prop] = value;
  }
  return function(element, properties) {
    for (const prop in properties) {
      const value = properties[prop];
      if (value !== void 0 && Object.prototype.hasOwnProperty.call(properties, prop))
        applyCss(element, prop, value);
    }
  };
}();
const hasClass = (element, name) => {
  const list = typeof element === "string" ? element : classList(element);
  return list.indexOf(" " + name + " ") >= 0;
};
const addClass = (element, name) => {
  const oldList = classList(element);
  const newList = oldList + name;
  if (hasClass(oldList, name))
    return;
  element.className = newList.substring(1);
};
const removeClass = (element, name) => {
  const oldList = classList(element);
  if (!hasClass(element, name))
    return;
  const newList = oldList.replace(" " + name + " ", " ");
  element.className = newList.substring(1, newList.length - 1);
};
const classList = (element) => {
  return (" " + (element.className || "") + " ").replace(/\s+/gi, " ");
};
const removeElement = (element) => {
  element && element.parentNode && element.parentNode.removeChild(element);
};
var vars$1 = "";
var nprogress = "";
const useNprogress = () => {
  onMounted(() => {
    const router = useRouter();
    const loadedPages = /* @__PURE__ */ new Set();
    loadedPages.add(router.currentRoute.value.path);
    router.beforeEach((to2) => {
      if (!loadedPages.has(to2.path)) {
        nprogress$1.start();
      }
    });
    router.afterEach((to2) => {
      loadedPages.add(to2.path);
      nprogress$1.done();
    });
  });
};
var clientConfig4 = defineClientConfig({
  setup() {
    useNprogress();
  }
});
const themeData$1 = JSON.parse(`{"logo":"/images/logo.png","author":"\u5C0F\u7D2B\u5FF5\u6C81","authorAvatar":"/images/logo.png","repo":"https://github.com/AnyFork/blog-docs","docsDir":"docs","editLinks":true,"editLinkText":"\u5728 GitHub \u4E0A\u7F16\u8F91\u6B64\u9875\uFF01","docsBranch":"main","lastUpdated":true,"lastUpdatedText":"\u4E0A\u6B21\u66F4\u65B0","contributors":true,"contributorsText":"\u5C0F\u7D2B\u5FF5\u6C81","socialLinks":[{"icon":"GithubOutlined","link":"https://anyFork.github.io/blog-docs/"},{"icon":"GoogleCircleFilled","link":"https://anyFork.gitee.io/blog-docs/"}],"friendLink":[{"title":"vuepress 2.X","link":"https://v2.vuepress.vuejs.org/zh/"},{"title":"vuepress-theme-reco 2.x","link":"http://v2.vuepress-reco.recoluan.com/"},{"title":"TypeScript\u4E2D\u6587\u6587\u6863","link":"https://ts.yayujs.com/"}],"colorMode":"auto","sidebarDepth":3,"navbar":[{"text":"\u9996\u9875","link":"/","icon":"HomeOutlined"},{"text":"\u5206\u7C7B","link":"/category","icon":"AppstoreOutlined"},{"text":"\u6807\u7B7E","link":"/tags","icon":"TagsOutlined"},{"text":"Java\u6587\u6863","children":[{"text":"Java\u8BBE\u8BA1\u6A21\u5F0F","link":"/design-pattern/","activeMatch":"/design-pattern/"}]}],"sidebar":{},"locales":{"/":{"selectLanguageName":"English"}},"colorModeSwitch":true,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","editLink":true,"notFound":["There's nothing here.","How did we get here?","That's a Four-Oh-Four.","Looks like we've got some broken links."],"backToHome":"Take me home","openInNewWindow":"open in new window","toggleColorMode":"toggle color mode","toggleSidebar":"toggle sidebar"}`);
const themeData = ref(themeData$1);
const useThemeData = () => themeData;
if (import_meta.webpackHot || false) {
  __VUE_HMR_RUNTIME__.updateThemeData = (data) => {
    themeData.value = data;
  };
}
const themeLocaleDataSymbol = Symbol("");
const useThemeLocaleData$1 = () => {
  const themeLocaleData = inject(themeLocaleDataSymbol);
  if (!themeLocaleData) {
    throw new Error("useThemeLocaleData() is called without provider.");
  }
  return themeLocaleData;
};
const resolveThemeLocaleData = (theme, routeLocale) => {
  var _a2;
  return {
    ...theme,
    ...(_a2 = theme.locales) == null ? void 0 : _a2[routeLocale]
  };
};
var clientConfig5 = defineClientConfig({
  enhance({ app }) {
    const themeData2 = useThemeData();
    const routeLocale = app._context.provides[routeLocaleSymbol];
    const themeLocaleData = computed(() => resolveThemeLocaleData(themeData2.value, routeLocale.value));
    app.provide(themeLocaleDataSymbol, themeLocaleData);
    Object.defineProperties(app.config.globalProperties, {
      $theme: {
        get() {
          return themeData2.value;
        }
      },
      $themeLocale: {
        get() {
          return themeLocaleData.value;
        }
      }
    });
    {
      setupDevtoolsPlugin({
        app,
        id: "org.vuejs.vuepress.plugin-theme-data",
        label: "VuePress Theme Data Plugin",
        packageName: "@vuepress/plugin-theme-data",
        homepage: "https://v2.vuepress.vuejs.org",
        logo: "https://v2.vuepress.vuejs.org/images/hero.png",
        componentStateTypes: ["VuePress"]
      }, (api) => {
        api.on.inspectComponent((payload) => {
          payload.instanceData.state.push({
            type: "VuePress",
            key: "themeData",
            editable: false,
            value: themeData2.value
          }, {
            type: "VuePress",
            key: "themeLocaleData",
            editable: false,
            value: themeLocaleData.value
          });
        });
      });
    }
  }
});
var _export_sfc = (sfc, props) => {
  const target = sfc.__vccOpts || sfc;
  for (const [key, val] of props) {
    target[key] = val;
  }
  return target;
};
const _sfc_main$l = /* @__PURE__ */ defineComponent({
  __name: "Badge",
  props: {
    type: {
      type: String,
      required: false,
      default: "tip"
    },
    text: {
      type: String,
      required: false,
      default: ""
    },
    vertical: {
      type: String,
      required: false,
      default: void 0
    }
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("span", {
        class: normalizeClass(["badge", __props.type]),
        style: normalizeStyle({
          verticalAlign: __props.vertical
        })
      }, [
        renderSlot(_ctx.$slots, "default", {}, () => [
          createTextVNode(toDisplayString(__props.text), 1)
        ])
      ], 6);
    };
  }
});
var Badge = /* @__PURE__ */ _export_sfc(_sfc_main$l, [["__file", "Badge.vue"]]);
const CodeGroup = defineComponent({
  name: "CodeGroup",
  setup(_2, { slots }) {
    const activeIndex = ref(-1);
    const tabRefs = ref([]);
    const activateNext = (i2 = activeIndex.value) => {
      if (i2 < tabRefs.value.length - 1) {
        activeIndex.value = i2 + 1;
      } else {
        activeIndex.value = 0;
      }
      tabRefs.value[activeIndex.value].focus();
    };
    const activatePrev = (i2 = activeIndex.value) => {
      if (i2 > 0) {
        activeIndex.value = i2 - 1;
      } else {
        activeIndex.value = tabRefs.value.length - 1;
      }
      tabRefs.value[activeIndex.value].focus();
    };
    const keyboardHandler = (event, i2) => {
      if (event.key === " " || event.key === "Enter") {
        event.preventDefault();
        activeIndex.value = i2;
      } else if (event.key === "ArrowRight") {
        event.preventDefault();
        activateNext(i2);
      } else if (event.key === "ArrowLeft") {
        event.preventDefault();
        activatePrev(i2);
      }
    };
    return () => {
      var _a2;
      const items = (((_a2 = slots.default) == null ? void 0 : _a2.call(slots)) || []).filter((vnode) => vnode.type.name === "CodeGroupItem").map((vnode) => {
        if (vnode.props === null) {
          vnode.props = {};
        }
        return vnode;
      });
      if (items.length === 0) {
        return null;
      }
      if (activeIndex.value < 0 || activeIndex.value > items.length - 1) {
        activeIndex.value = items.findIndex((vnode) => vnode.props.active === "" || vnode.props.active === true);
        if (activeIndex.value === -1) {
          activeIndex.value = 0;
        }
      } else {
        items.forEach((vnode, i2) => {
          vnode.props.active = i2 === activeIndex.value;
        });
      }
      return h$1("div", { class: "code-group" }, [
        h$1("div", { class: "code-group__nav" }, h$1("ul", { class: "code-group__ul" }, items.map((vnode, i2) => {
          const isActive = i2 === activeIndex.value;
          return h$1("li", { class: "code-group__li" }, h$1("button", {
            ref: (element) => {
              if (element) {
                tabRefs.value[i2] = element;
              }
            },
            class: {
              "code-group__nav-tab": true,
              "code-group__nav-tab-active": isActive
            },
            ariaPressed: isActive,
            ariaExpanded: isActive,
            onClick: () => activeIndex.value = i2,
            onKeydown: (e2) => keyboardHandler(e2, i2)
          }, vnode.props.title));
        }))),
        items
      ]);
    };
  }
});
const _hoisted_1$f = ["aria-selected"];
const __default__$1 = defineComponent({
  name: "CodeGroupItem"
});
const _sfc_main$k = /* @__PURE__ */ defineComponent({
  ...__default__$1,
  props: {
    title: {
      type: String,
      required: true
    },
    active: {
      type: Boolean,
      required: false,
      default: false
    }
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(["code-group-item", { "code-group-item__active": __props.active }]),
        "aria-selected": __props.active
      }, [
        renderSlot(_ctx.$slots, "default")
      ], 10, _hoisted_1$f);
    };
  }
});
var CodeGroupItem = /* @__PURE__ */ _export_sfc(_sfc_main$k, [["__file", "CodeGroupItem.vue"]]);
var _a$1;
const isClient$1 = typeof window !== "undefined";
const isString$1 = (val) => typeof val === "string";
const noop$1 = () => {
};
isClient$1 && ((_a$1 = window == null ? void 0 : window.navigator) == null ? void 0 : _a$1.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);
function createFilterWrapper(filter, fn2) {
  function wrapper(...args) {
    filter(() => fn2.apply(this, args), { fn: fn2, thisArg: this, args });
  }
  return wrapper;
}
const bypassFilter = (invoke) => {
  return invoke();
};
function pausableFilter(extendFilter = bypassFilter) {
  const isActive = ref(true);
  function pause() {
    isActive.value = false;
  }
  function resume() {
    isActive.value = true;
  }
  const eventFilter = (...args) => {
    if (isActive.value)
      extendFilter(...args);
  };
  return { isActive, pause, resume, eventFilter };
}
function tryOnScopeDispose$1(fn2) {
  if (getCurrentScope()) {
    onScopeDispose(fn2);
    return true;
  }
  return false;
}
function tryOnBeforeMount(fn2, sync = true) {
  if (getCurrentInstance())
    onBeforeMount(fn2);
  else if (sync)
    fn2();
  else
    nextTick(fn2);
}
function useToggle(initialValue = false, options2 = {}) {
  const {
    truthyValue = true,
    falsyValue = false
  } = options2;
  const valueIsRef = isRef(initialValue);
  const innerValue = ref(initialValue);
  function toggle(value) {
    if (arguments.length) {
      innerValue.value = value;
      return innerValue.value;
    } else {
      innerValue.value = innerValue.value === unref(truthyValue) ? unref(falsyValue) : unref(truthyValue);
      return innerValue.value;
    }
  }
  if (valueIsRef)
    return toggle;
  else
    return [innerValue, toggle];
}
var __getOwnPropSymbols$6 = Object.getOwnPropertySymbols;
var __hasOwnProp$6 = Object.prototype.hasOwnProperty;
var __propIsEnum$6 = Object.prototype.propertyIsEnumerable;
var __objRest$5 = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp$6.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols$6)
    for (var prop of __getOwnPropSymbols$6(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum$6.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
function watchWithFilter(source, cb, options2 = {}) {
  const _a2 = options2, {
    eventFilter = bypassFilter
  } = _a2, watchOptions = __objRest$5(_a2, [
    "eventFilter"
  ]);
  return watch(source, createFilterWrapper(eventFilter, cb), watchOptions);
}
var __defProp$2 = Object.defineProperty;
var __defProps$2 = Object.defineProperties;
var __getOwnPropDescs$2 = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols$2 = Object.getOwnPropertySymbols;
var __hasOwnProp$2 = Object.prototype.hasOwnProperty;
var __propIsEnum$2 = Object.prototype.propertyIsEnumerable;
var __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues$2 = (a2, b2) => {
  for (var prop in b2 || (b2 = {}))
    if (__hasOwnProp$2.call(b2, prop))
      __defNormalProp$2(a2, prop, b2[prop]);
  if (__getOwnPropSymbols$2)
    for (var prop of __getOwnPropSymbols$2(b2)) {
      if (__propIsEnum$2.call(b2, prop))
        __defNormalProp$2(a2, prop, b2[prop]);
    }
  return a2;
};
var __spreadProps$2 = (a2, b2) => __defProps$2(a2, __getOwnPropDescs$2(b2));
var __objRest$1 = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp$2.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols$2)
    for (var prop of __getOwnPropSymbols$2(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum$2.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
function watchPausable(source, cb, options2 = {}) {
  const _a2 = options2, {
    eventFilter: filter
  } = _a2, watchOptions = __objRest$1(_a2, [
    "eventFilter"
  ]);
  const { eventFilter, pause, resume, isActive } = pausableFilter(filter);
  const stop = watchWithFilter(source, cb, __spreadProps$2(__spreadValues$2({}, watchOptions), {
    eventFilter
  }));
  return { stop, pause, resume, isActive };
}
function unrefElement$1(elRef) {
  var _a2;
  const plain = unref(elRef);
  return (_a2 = plain == null ? void 0 : plain.$el) != null ? _a2 : plain;
}
const defaultWindow$1 = isClient$1 ? window : void 0;
isClient$1 ? window.document : void 0;
isClient$1 ? window.navigator : void 0;
isClient$1 ? window.location : void 0;
function useEventListener$1(...args) {
  let target;
  let event;
  let listener;
  let options2;
  if (isString$1(args[0])) {
    [event, listener, options2] = args;
    target = defaultWindow$1;
  } else {
    [target, event, listener, options2] = args;
  }
  if (!target)
    return noop$1;
  let cleanup = noop$1;
  const stopWatch = watch(() => unrefElement$1(target), (el) => {
    cleanup();
    if (!el)
      return;
    el.addEventListener(event, listener, options2);
    cleanup = () => {
      el.removeEventListener(event, listener, options2);
      cleanup = noop$1;
    };
  }, { immediate: true, flush: "post" });
  const stop = () => {
    stopWatch();
    cleanup();
  };
  tryOnScopeDispose$1(stop);
  return stop;
}
function useMediaQuery(query, options2 = {}) {
  const { window: window2 = defaultWindow$1 } = options2;
  const isSupported3 = Boolean(window2 && "matchMedia" in window2 && typeof window2.matchMedia === "function");
  let mediaQuery;
  const matches = ref(false);
  const update = () => {
    if (!isSupported3)
      return;
    if (!mediaQuery)
      mediaQuery = window2.matchMedia(query);
    matches.value = mediaQuery.matches;
  };
  tryOnBeforeMount(() => {
    update();
    if (!mediaQuery)
      return;
    if ("addEventListener" in mediaQuery)
      mediaQuery.addEventListener("change", update);
    else
      mediaQuery.addListener(update);
    tryOnScopeDispose$1(() => {
      if ("removeEventListener" in mediaQuery)
        mediaQuery.removeEventListener("change", update);
      else
        mediaQuery.removeListener(update);
    });
  });
  return matches;
}
const _global$1 = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
const globalKey$1 = "__vueuse_ssr_handlers__";
_global$1[globalKey$1] = _global$1[globalKey$1] || {};
const handlers = _global$1[globalKey$1];
function getSSRHandler(key, fallback) {
  return handlers[key] || fallback;
}
function guessSerializerType(rawInit) {
  return rawInit == null ? "any" : rawInit instanceof Set ? "set" : rawInit instanceof Map ? "map" : rawInit instanceof Date ? "date" : typeof rawInit === "boolean" ? "boolean" : typeof rawInit === "string" ? "string" : typeof rawInit === "object" ? "object" : Array.isArray(rawInit) ? "object" : !Number.isNaN(rawInit) ? "number" : "any";
}
const StorageSerializers = {
  boolean: {
    read: (v2) => v2 === "true",
    write: (v2) => String(v2)
  },
  object: {
    read: (v2) => JSON.parse(v2),
    write: (v2) => JSON.stringify(v2)
  },
  number: {
    read: (v2) => Number.parseFloat(v2),
    write: (v2) => String(v2)
  },
  any: {
    read: (v2) => v2,
    write: (v2) => String(v2)
  },
  string: {
    read: (v2) => v2,
    write: (v2) => String(v2)
  },
  map: {
    read: (v2) => new Map(JSON.parse(v2)),
    write: (v2) => JSON.stringify(Array.from(v2.entries()))
  },
  set: {
    read: (v2) => new Set(JSON.parse(v2)),
    write: (v2) => JSON.stringify(Array.from(v2))
  },
  date: {
    read: (v2) => new Date(v2),
    write: (v2) => v2.toISOString()
  }
};
function useStorage(key, initialValue, storage, options2 = {}) {
  var _a2;
  const {
    flush = "pre",
    deep = true,
    listenToStorageChanges = true,
    writeDefaults = true,
    shallow,
    window: window2 = defaultWindow$1,
    eventFilter,
    onError = (e2) => {
      console.error(e2);
    }
  } = options2;
  const data = (shallow ? shallowRef : ref)(initialValue);
  if (!storage) {
    try {
      storage = getSSRHandler("getDefaultStorage", () => {
        var _a22;
        return (_a22 = defaultWindow$1) == null ? void 0 : _a22.localStorage;
      })();
    } catch (e2) {
      onError(e2);
    }
  }
  if (!storage)
    return data;
  const rawInit = unref(initialValue);
  const type = guessSerializerType(rawInit);
  const serializer = (_a2 = options2.serializer) != null ? _a2 : StorageSerializers[type];
  const { pause: pauseWatch, resume: resumeWatch } = watchPausable(data, () => write(data.value), { flush, deep, eventFilter });
  if (window2 && listenToStorageChanges)
    useEventListener$1(window2, "storage", update);
  update();
  return data;
  function write(v2) {
    try {
      if (v2 == null)
        storage.removeItem(key);
      else
        storage.setItem(key, serializer.write(v2));
    } catch (e2) {
      onError(e2);
    }
  }
  function read(event) {
    if (event && event.key !== key)
      return;
    pauseWatch();
    try {
      const rawValue = event ? event.newValue : storage.getItem(key);
      if (rawValue == null) {
        if (writeDefaults && rawInit !== null)
          storage.setItem(key, serializer.write(rawInit));
        return rawInit;
      } else if (typeof rawValue !== "string") {
        return rawValue;
      } else {
        return serializer.read(rawValue);
      }
    } catch (e2) {
      onError(e2);
    } finally {
      resumeWatch();
    }
  }
  function update(event) {
    if (event && event.key !== key)
      return;
    data.value = read(event);
  }
}
function usePreferredDark(options2) {
  return useMediaQuery("(prefers-color-scheme: dark)", options2);
}
var SwipeDirection$1;
(function(SwipeDirection2) {
  SwipeDirection2["UP"] = "UP";
  SwipeDirection2["RIGHT"] = "RIGHT";
  SwipeDirection2["DOWN"] = "DOWN";
  SwipeDirection2["LEFT"] = "LEFT";
  SwipeDirection2["NONE"] = "NONE";
})(SwipeDirection$1 || (SwipeDirection$1 = {}));
const darkModeSymbol = Symbol("");
const useDarkMode = () => {
  const isDarkMode = inject(darkModeSymbol);
  if (!isDarkMode) {
    throw new Error("useDarkMode() is called without provider.");
  }
  return isDarkMode;
};
const setupDarkMode = () => {
  const themeLocale = useThemeLocaleData();
  const isDarkPreferred = usePreferredDark();
  const darkStorage = useStorage("vuepress-color-scheme", themeLocale.value.colorMode);
  const isDarkMode = computed({
    get() {
      if (!themeLocale.value.colorModeSwitch) {
        return themeLocale.value.colorMode === "dark";
      }
      if (darkStorage.value === "auto") {
        return isDarkPreferred.value;
      }
      return darkStorage.value === "dark";
    },
    set(val) {
      if (val === isDarkPreferred.value) {
        darkStorage.value = "auto";
      } else {
        darkStorage.value = val ? "dark" : "light";
      }
    }
  });
  provide(darkModeSymbol, isDarkMode);
  updateHtmlDarkClass(isDarkMode);
};
const updateHtmlDarkClass = (isDarkMode) => {
  const update = (value = isDarkMode.value) => {
    const htmlEl = window == null ? void 0 : window.document.querySelector("html");
    htmlEl == null ? void 0 : htmlEl.classList.toggle("dark", value);
  };
  onMounted(() => {
    watch(isDarkMode, update, { immediate: true });
  });
  onUnmounted(() => update());
};
const useResolveRouteWithRedirect = (...args) => {
  const router = useRouter();
  const route = router.resolve(...args);
  const lastMatched = route.matched[route.matched.length - 1];
  if (!(lastMatched == null ? void 0 : lastMatched.redirect)) {
    return route;
  }
  const { redirect } = lastMatched;
  const resolvedRedirect = isFunction(redirect) ? redirect(route) : redirect;
  const resolvedRedirectObj = isString$2(resolvedRedirect) ? { path: resolvedRedirect } : resolvedRedirect;
  return useResolveRouteWithRedirect({
    hash: route.hash,
    query: route.query,
    params: route.params,
    ...resolvedRedirectObj
  });
};
const useNavLink = (item) => {
  const resolved = useResolveRouteWithRedirect(encodeURI(item));
  return {
    text: resolved.meta.title || item,
    link: resolved.name === "404" ? item : resolved.fullPath
  };
};
let promise = null;
let promiseResolve = null;
const scrollPromise = {
  wait: () => promise,
  pending: () => {
    promise = new Promise((resolve2) => promiseResolve = resolve2);
  },
  resolve: () => {
    promiseResolve == null ? void 0 : promiseResolve();
    promise = null;
    promiseResolve = null;
  }
};
const useScrollPromise = () => scrollPromise;
const sidebarItemsSymbol = Symbol("sidebarItems");
const useSidebarItems = () => {
  const sidebarItems = inject(sidebarItemsSymbol);
  if (!sidebarItems) {
    throw new Error("useSidebarItems() is called without provider.");
  }
  return sidebarItems;
};
const setupSidebarItems = () => {
  const themeLocale = useThemeLocaleData();
  const frontmatter = usePageFrontmatter();
  const sidebarItems = computed(() => resolveSidebarItems(frontmatter.value, themeLocale.value));
  provide(sidebarItemsSymbol, sidebarItems);
};
const resolveSidebarItems = (frontmatter, themeLocale) => {
  var _a2, _b, _c, _d;
  const sidebarConfig = (_b = (_a2 = frontmatter.sidebar) != null ? _a2 : themeLocale.sidebar) != null ? _b : "auto";
  const sidebarDepth = (_d = (_c = frontmatter.sidebarDepth) != null ? _c : themeLocale.sidebarDepth) != null ? _d : 2;
  if (frontmatter.home || sidebarConfig === false) {
    return [];
  }
  if (sidebarConfig === "auto") {
    return resolveAutoSidebarItems(sidebarDepth);
  }
  if (isArray$1(sidebarConfig)) {
    return resolveArraySidebarItems(sidebarConfig, sidebarDepth);
  }
  if (isPlainObject(sidebarConfig)) {
    return resolveMultiSidebarItems(sidebarConfig, sidebarDepth);
  }
  return [];
};
const headerToSidebarItem = (header, sidebarDepth) => ({
  text: header.title,
  link: `#${header.slug}`,
  children: headersToSidebarItemChildren(header.children, sidebarDepth)
});
const headersToSidebarItemChildren = (headers, sidebarDepth) => sidebarDepth > 0 ? headers.map((header) => headerToSidebarItem(header, sidebarDepth - 1)) : [];
const resolveAutoSidebarItems = (sidebarDepth) => {
  const page = usePageData();
  return [
    {
      text: page.value.title,
      children: headersToSidebarItemChildren(page.value.headers, sidebarDepth)
    }
  ];
};
const resolveArraySidebarItems = (sidebarConfig, sidebarDepth) => {
  const route = useRoute();
  const page = usePageData();
  const handleChildItem = (item) => {
    var _a2;
    let childItem;
    if (isString$2(item)) {
      childItem = useNavLink(item);
    } else {
      childItem = item;
    }
    if (childItem.children) {
      return {
        ...childItem,
        children: childItem.children.map((item2) => handleChildItem(item2))
      };
    }
    if (childItem.link === route.path) {
      const headers = ((_a2 = page.value.headers[0]) == null ? void 0 : _a2.level) === 1 ? page.value.headers[0].children : page.value.headers;
      return {
        ...childItem,
        children: headersToSidebarItemChildren(headers, sidebarDepth)
      };
    }
    return childItem;
  };
  return sidebarConfig.map((item) => handleChildItem(item));
};
const resolveMultiSidebarItems = (sidebarConfig, sidebarDepth) => {
  var _a2;
  const route = useRoute();
  const sidebarPath = resolveLocalePath(sidebarConfig, route.path);
  const matchedSidebarConfig = (_a2 = sidebarConfig[sidebarPath]) != null ? _a2 : [];
  return resolveArraySidebarItems(matchedSidebarConfig, sidebarDepth);
};
const useThemeLocaleData = () => useThemeLocaleData$1();
var index = "";
var clientConfig6 = defineClientConfig({
  enhance({ app, router }) {
    app.component("Badge", Badge);
    app.component("CodeGroup", CodeGroup);
    app.component("CodeGroupItem", CodeGroupItem);
    app.component("AutoLinkExternalIcon", () => {
      const ExternalLinkIcon2 = app.component("ExternalLinkIcon");
      if (ExternalLinkIcon2) {
        return h$1(ExternalLinkIcon2);
      }
      return null;
    });
    app.component("NavbarSearch", () => {
      const SearchComponent = app.component("Docsearch") || app.component("SearchBox");
      if (SearchComponent) {
        return h$1(SearchComponent);
      }
      return null;
    });
    const scrollBehavior = router.options.scrollBehavior;
    router.options.scrollBehavior = async (...args) => {
      await useScrollPromise().wait();
      return scrollBehavior(...args);
    };
  },
  setup() {
    setupDarkMode();
    setupSidebarItems();
  }
});
var clientConfig7 = {
  enhance: ({ app }) => {
    app.component("Icon", defineAsyncComponent(() => __vitePreload(() => import("./Icon.adebb0fc.js"), true ? [] : void 0))), app.component("Item", defineAsyncComponent(() => __vitePreload(() => import("./Item.f9d6afb9.js"), true ? [] : void 0))), app.component("Pagination", defineAsyncComponent(() => __vitePreload(() => import("./Pagination.7a615f8f.js"), true ? [] : void 0)));
  }
};
/*! @docsearch/js 3.2.1 | MIT License |  Algolia, Inc. and contributors | https://docsearch.algolia.com */
function e(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function t(t2) {
  for (var n2 = 1; n2 < arguments.length; n2++) {
    var o2 = null != arguments[n2] ? arguments[n2] : {};
    n2 % 2 ? e(Object(o2), true).forEach(function(e2) {
      r$1(t2, e2, o2[e2]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t2, Object.getOwnPropertyDescriptors(o2)) : e(Object(o2)).forEach(function(e2) {
      Object.defineProperty(t2, e2, Object.getOwnPropertyDescriptor(o2, e2));
    });
  }
  return t2;
}
function n$1(e2) {
  return n$1 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
    return typeof e3;
  } : function(e3) {
    return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
  }, n$1(e2);
}
function r$1(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function o() {
  return o = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, o.apply(this, arguments);
}
function c(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function i$1(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || u(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function a$1(e2) {
  return function(e3) {
    if (Array.isArray(e3))
      return l$1(e3);
  }(e2) || function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }(e2) || u(e2) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function u(e2, t2) {
  if (e2) {
    if ("string" == typeof e2)
      return l$1(e2, t2);
    var n2 = Object.prototype.toString.call(e2).slice(8, -1);
    return "Object" === n2 && e2.constructor && (n2 = e2.constructor.name), "Map" === n2 || "Set" === n2 ? Array.from(e2) : "Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? l$1(e2, t2) : void 0;
  }
}
function l$1(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
var s, f$1, p, m, d, h = {}, v = [], y = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;
function _(e2, t2) {
  for (var n2 in t2)
    e2[n2] = t2[n2];
  return e2;
}
function b$1(e2) {
  var t2 = e2.parentNode;
  t2 && t2.removeChild(e2);
}
function g(e2, t2, n2) {
  var r2, o2, c2, i2 = arguments, a2 = {};
  for (c2 in t2)
    "key" == c2 ? r2 = t2[c2] : "ref" == c2 ? o2 = t2[c2] : a2[c2] = t2[c2];
  if (arguments.length > 3)
    for (n2 = [n2], c2 = 3; c2 < arguments.length; c2++)
      n2.push(i2[c2]);
  if (null != n2 && (a2.children = n2), "function" == typeof e2 && null != e2.defaultProps)
    for (c2 in e2.defaultProps)
      void 0 === a2[c2] && (a2[c2] = e2.defaultProps[c2]);
  return O(e2, a2, r2, o2, null);
}
function O(e2, t2, n2, r2, o2) {
  var c2 = { type: e2, props: t2, key: n2, ref: r2, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, __h: null, constructor: void 0, __v: null == o2 ? ++s.__v : o2 };
  return null != s.vnode && s.vnode(c2), c2;
}
function S(e2) {
  return e2.children;
}
function E(e2, t2) {
  this.props = e2, this.context = t2;
}
function w(e2, t2) {
  if (null == t2)
    return e2.__ ? w(e2.__, e2.__.__k.indexOf(e2) + 1) : null;
  for (var n2; t2 < e2.__k.length; t2++)
    if (null != (n2 = e2.__k[t2]) && null != n2.__e)
      return n2.__e;
  return "function" == typeof e2.type ? w(e2) : null;
}
function j(e2) {
  var t2, n2;
  if (null != (e2 = e2.__) && null != e2.__c) {
    for (e2.__e = e2.__c.base = null, t2 = 0; t2 < e2.__k.length; t2++)
      if (null != (n2 = e2.__k[t2]) && null != n2.__e) {
        e2.__e = e2.__c.base = n2.__e;
        break;
      }
    return j(e2);
  }
}
function P(e2) {
  (!e2.__d && (e2.__d = true) && f$1.push(e2) && !I$1.__r++ || m !== s.debounceRendering) && ((m = s.debounceRendering) || p)(I$1);
}
function I$1() {
  for (var e2; I$1.__r = f$1.length; )
    e2 = f$1.sort(function(e3, t2) {
      return e3.__v.__b - t2.__v.__b;
    }), f$1 = [], e2.some(function(e3) {
      var t2, n2, r2, o2, c2, i2;
      e3.__d && (c2 = (o2 = (t2 = e3).__v).__e, (i2 = t2.__P) && (n2 = [], (r2 = _({}, o2)).__v = o2.__v + 1, L$1(i2, o2, r2, t2.__n, void 0 !== i2.ownerSVGElement, null != o2.__h ? [c2] : null, n2, null == c2 ? w(o2) : c2, o2.__h), q(n2, o2), o2.__e != c2 && j(o2)));
    });
}
function k$1(e2, t2, n2, r2, o2, c2, i2, a2, u2, l2) {
  var s2, f2, p2, m2, d2, y2, _2, b2 = r2 && r2.__k || v, g2 = b2.length;
  for (n2.__k = [], s2 = 0; s2 < t2.length; s2++)
    if (null != (m2 = n2.__k[s2] = null == (m2 = t2[s2]) || "boolean" == typeof m2 ? null : "string" == typeof m2 || "number" == typeof m2 ? O(null, m2, null, null, m2) : Array.isArray(m2) ? O(S, { children: m2 }, null, null, null) : m2.__b > 0 ? O(m2.type, m2.props, m2.key, null, m2.__v) : m2)) {
      if (m2.__ = n2, m2.__b = n2.__b + 1, null === (p2 = b2[s2]) || p2 && m2.key == p2.key && m2.type === p2.type)
        b2[s2] = void 0;
      else
        for (f2 = 0; f2 < g2; f2++) {
          if ((p2 = b2[f2]) && m2.key == p2.key && m2.type === p2.type) {
            b2[f2] = void 0;
            break;
          }
          p2 = null;
        }
      L$1(e2, m2, p2 = p2 || h, o2, c2, i2, a2, u2, l2), d2 = m2.__e, (f2 = m2.ref) && p2.ref != f2 && (_2 || (_2 = []), p2.ref && _2.push(p2.ref, null, m2), _2.push(f2, m2.__c || d2, m2)), null != d2 ? (null == y2 && (y2 = d2), "function" == typeof m2.type && null != m2.__k && m2.__k === p2.__k ? m2.__d = u2 = D(m2, u2, e2) : u2 = A(e2, m2, p2, b2, d2, u2), l2 || "option" !== n2.type ? "function" == typeof n2.type && (n2.__d = u2) : e2.value = "") : u2 && p2.__e == u2 && u2.parentNode != e2 && (u2 = w(p2));
    }
  for (n2.__e = y2, s2 = g2; s2--; )
    null != b2[s2] && ("function" == typeof n2.type && null != b2[s2].__e && b2[s2].__e == n2.__d && (n2.__d = w(r2, s2 + 1)), U(b2[s2], b2[s2]));
  if (_2)
    for (s2 = 0; s2 < _2.length; s2++)
      H$1(_2[s2], _2[++s2], _2[++s2]);
}
function D(e2, t2, n2) {
  var r2, o2;
  for (r2 = 0; r2 < e2.__k.length; r2++)
    (o2 = e2.__k[r2]) && (o2.__ = e2, t2 = "function" == typeof o2.type ? D(o2, t2, n2) : A(n2, o2, o2, e2.__k, o2.__e, t2));
  return t2;
}
function C(e2, t2) {
  return t2 = t2 || [], null == e2 || "boolean" == typeof e2 || (Array.isArray(e2) ? e2.some(function(e3) {
    C(e3, t2);
  }) : t2.push(e2)), t2;
}
function A(e2, t2, n2, r2, o2, c2) {
  var i2, a2, u2;
  if (void 0 !== t2.__d)
    i2 = t2.__d, t2.__d = void 0;
  else if (null == n2 || o2 != c2 || null == o2.parentNode)
    e:
      if (null == c2 || c2.parentNode !== e2)
        e2.appendChild(o2), i2 = null;
      else {
        for (a2 = c2, u2 = 0; (a2 = a2.nextSibling) && u2 < r2.length; u2 += 2)
          if (a2 == o2)
            break e;
        e2.insertBefore(o2, c2), i2 = c2;
      }
  return void 0 !== i2 ? i2 : o2.nextSibling;
}
function x(e2, t2, n2) {
  "-" === t2[0] ? e2.setProperty(t2, n2) : e2[t2] = null == n2 ? "" : "number" != typeof n2 || y.test(t2) ? n2 : n2 + "px";
}
function N$1(e2, t2, n2, r2, o2) {
  var c2;
  e:
    if ("style" === t2)
      if ("string" == typeof n2)
        e2.style.cssText = n2;
      else {
        if ("string" == typeof r2 && (e2.style.cssText = r2 = ""), r2)
          for (t2 in r2)
            n2 && t2 in n2 || x(e2.style, t2, "");
        if (n2)
          for (t2 in n2)
            r2 && n2[t2] === r2[t2] || x(e2.style, t2, n2[t2]);
      }
    else if ("o" === t2[0] && "n" === t2[1])
      c2 = t2 !== (t2 = t2.replace(/Capture$/, "")), t2 = t2.toLowerCase() in e2 ? t2.toLowerCase().slice(2) : t2.slice(2), e2.l || (e2.l = {}), e2.l[t2 + c2] = n2, n2 ? r2 || e2.addEventListener(t2, c2 ? R : T, c2) : e2.removeEventListener(t2, c2 ? R : T, c2);
    else if ("dangerouslySetInnerHTML" !== t2) {
      if (o2)
        t2 = t2.replace(/xlink[H:h]/, "h").replace(/sName$/, "s");
      else if ("href" !== t2 && "list" !== t2 && "form" !== t2 && "download" !== t2 && t2 in e2)
        try {
          e2[t2] = null == n2 ? "" : n2;
          break e;
        } catch (e3) {
        }
      "function" == typeof n2 || (null != n2 && (false !== n2 || "a" === t2[0] && "r" === t2[1]) ? e2.setAttribute(t2, n2) : e2.removeAttribute(t2));
    }
}
function T(e2) {
  this.l[e2.type + false](s.event ? s.event(e2) : e2);
}
function R(e2) {
  this.l[e2.type + true](s.event ? s.event(e2) : e2);
}
function L$1(e2, t2, n2, r2, o2, c2, i2, a2, u2) {
  var l2, f2, p2, m2, d2, h2, v2, y2, b2, g2, O2, w2 = t2.type;
  if (void 0 !== t2.constructor)
    return null;
  null != n2.__h && (u2 = n2.__h, a2 = t2.__e = n2.__e, t2.__h = null, c2 = [a2]), (l2 = s.__b) && l2(t2);
  try {
    e:
      if ("function" == typeof w2) {
        if (y2 = t2.props, b2 = (l2 = w2.contextType) && r2[l2.__c], g2 = l2 ? b2 ? b2.props.value : l2.__ : r2, n2.__c ? v2 = (f2 = t2.__c = n2.__c).__ = f2.__E : ("prototype" in w2 && w2.prototype.render ? t2.__c = f2 = new w2(y2, g2) : (t2.__c = f2 = new E(y2, g2), f2.constructor = w2, f2.render = F), b2 && b2.sub(f2), f2.props = y2, f2.state || (f2.state = {}), f2.context = g2, f2.__n = r2, p2 = f2.__d = true, f2.__h = []), null == f2.__s && (f2.__s = f2.state), null != w2.getDerivedStateFromProps && (f2.__s == f2.state && (f2.__s = _({}, f2.__s)), _(f2.__s, w2.getDerivedStateFromProps(y2, f2.__s))), m2 = f2.props, d2 = f2.state, p2)
          null == w2.getDerivedStateFromProps && null != f2.componentWillMount && f2.componentWillMount(), null != f2.componentDidMount && f2.__h.push(f2.componentDidMount);
        else {
          if (null == w2.getDerivedStateFromProps && y2 !== m2 && null != f2.componentWillReceiveProps && f2.componentWillReceiveProps(y2, g2), !f2.__e && null != f2.shouldComponentUpdate && false === f2.shouldComponentUpdate(y2, f2.__s, g2) || t2.__v === n2.__v) {
            f2.props = y2, f2.state = f2.__s, t2.__v !== n2.__v && (f2.__d = false), f2.__v = t2, t2.__e = n2.__e, t2.__k = n2.__k, f2.__h.length && i2.push(f2);
            break e;
          }
          null != f2.componentWillUpdate && f2.componentWillUpdate(y2, f2.__s, g2), null != f2.componentDidUpdate && f2.__h.push(function() {
            f2.componentDidUpdate(m2, d2, h2);
          });
        }
        f2.context = g2, f2.props = y2, f2.state = f2.__s, (l2 = s.__r) && l2(t2), f2.__d = false, f2.__v = t2, f2.__P = e2, l2 = f2.render(f2.props, f2.state, f2.context), f2.state = f2.__s, null != f2.getChildContext && (r2 = _(_({}, r2), f2.getChildContext())), p2 || null == f2.getSnapshotBeforeUpdate || (h2 = f2.getSnapshotBeforeUpdate(m2, d2)), O2 = null != l2 && l2.type === S && null == l2.key ? l2.props.children : l2, k$1(e2, Array.isArray(O2) ? O2 : [O2], t2, n2, r2, o2, c2, i2, a2, u2), f2.base = t2.__e, t2.__h = null, f2.__h.length && i2.push(f2), v2 && (f2.__E = f2.__ = null), f2.__e = false;
      } else
        null == c2 && t2.__v === n2.__v ? (t2.__k = n2.__k, t2.__e = n2.__e) : t2.__e = M(n2.__e, t2, n2, r2, o2, c2, i2, u2);
    (l2 = s.diffed) && l2(t2);
  } catch (e3) {
    t2.__v = null, (u2 || null != c2) && (t2.__e = a2, t2.__h = !!u2, c2[c2.indexOf(a2)] = null), s.__e(e3, t2, n2);
  }
}
function q(e2, t2) {
  s.__c && s.__c(t2, e2), e2.some(function(t3) {
    try {
      e2 = t3.__h, t3.__h = [], e2.some(function(e3) {
        e3.call(t3);
      });
    } catch (e3) {
      s.__e(e3, t3.__v);
    }
  });
}
function M(e2, t2, n2, r2, o2, c2, i2, a2) {
  var u2, l2, s2, f2, p2 = n2.props, m2 = t2.props, d2 = t2.type, y2 = 0;
  if ("svg" === d2 && (o2 = true), null != c2) {
    for (; y2 < c2.length; y2++)
      if ((u2 = c2[y2]) && (u2 === e2 || (d2 ? u2.localName == d2 : 3 == u2.nodeType))) {
        e2 = u2, c2[y2] = null;
        break;
      }
  }
  if (null == e2) {
    if (null === d2)
      return document.createTextNode(m2);
    e2 = o2 ? document.createElementNS("http://www.w3.org/2000/svg", d2) : document.createElement(d2, m2.is && m2), c2 = null, a2 = false;
  }
  if (null === d2)
    p2 === m2 || a2 && e2.data === m2 || (e2.data = m2);
  else {
    if (c2 = c2 && v.slice.call(e2.childNodes), l2 = (p2 = n2.props || h).dangerouslySetInnerHTML, s2 = m2.dangerouslySetInnerHTML, !a2) {
      if (null != c2)
        for (p2 = {}, f2 = 0; f2 < e2.attributes.length; f2++)
          p2[e2.attributes[f2].name] = e2.attributes[f2].value;
      (s2 || l2) && (s2 && (l2 && s2.__html == l2.__html || s2.__html === e2.innerHTML) || (e2.innerHTML = s2 && s2.__html || ""));
    }
    if (function(e3, t3, n3, r3, o3) {
      var c3;
      for (c3 in n3)
        "children" === c3 || "key" === c3 || c3 in t3 || N$1(e3, c3, null, n3[c3], r3);
      for (c3 in t3)
        o3 && "function" != typeof t3[c3] || "children" === c3 || "key" === c3 || "value" === c3 || "checked" === c3 || n3[c3] === t3[c3] || N$1(e3, c3, t3[c3], n3[c3], r3);
    }(e2, m2, p2, o2, a2), s2)
      t2.__k = [];
    else if (y2 = t2.props.children, k$1(e2, Array.isArray(y2) ? y2 : [y2], t2, n2, r2, o2 && "foreignObject" !== d2, c2, i2, e2.firstChild, a2), null != c2)
      for (y2 = c2.length; y2--; )
        null != c2[y2] && b$1(c2[y2]);
    a2 || ("value" in m2 && void 0 !== (y2 = m2.value) && (y2 !== e2.value || "progress" === d2 && !y2) && N$1(e2, "value", y2, p2.value, false), "checked" in m2 && void 0 !== (y2 = m2.checked) && y2 !== e2.checked && N$1(e2, "checked", y2, p2.checked, false));
  }
  return e2;
}
function H$1(e2, t2, n2) {
  try {
    "function" == typeof e2 ? e2(t2) : e2.current = t2;
  } catch (e3) {
    s.__e(e3, n2);
  }
}
function U(e2, t2, n2) {
  var r2, o2, c2;
  if (s.unmount && s.unmount(e2), (r2 = e2.ref) && (r2.current && r2.current !== e2.__e || H$1(r2, null, t2)), n2 || "function" == typeof e2.type || (n2 = null != (o2 = e2.__e)), e2.__e = e2.__d = void 0, null != (r2 = e2.__c)) {
    if (r2.componentWillUnmount)
      try {
        r2.componentWillUnmount();
      } catch (e3) {
        s.__e(e3, t2);
      }
    r2.base = r2.__P = null;
  }
  if (r2 = e2.__k)
    for (c2 = 0; c2 < r2.length; c2++)
      r2[c2] && U(r2[c2], t2, n2);
  null != o2 && b$1(o2);
}
function F(e2, t2, n2) {
  return this.constructor(e2, n2);
}
function B(e2, t2, n2) {
  var r2, o2, c2;
  s.__ && s.__(e2, t2), o2 = (r2 = "function" == typeof n2) ? null : n2 && n2.__k || t2.__k, c2 = [], L$1(t2, e2 = (!r2 && n2 || t2).__k = g(S, null, [e2]), o2 || h, h, void 0 !== t2.ownerSVGElement, !r2 && n2 ? [n2] : o2 ? null : t2.firstChild ? v.slice.call(t2.childNodes) : null, c2, !r2 && n2 ? n2 : o2 ? o2.__e : t2.firstChild, r2), q(c2, e2);
}
function V(e2, t2) {
  B(e2, t2, V);
}
function z$1(e2, t2, n2) {
  var r2, o2, c2, i2 = arguments, a2 = _({}, e2.props);
  for (c2 in t2)
    "key" == c2 ? r2 = t2[c2] : "ref" == c2 ? o2 = t2[c2] : a2[c2] = t2[c2];
  if (arguments.length > 3)
    for (n2 = [n2], c2 = 3; c2 < arguments.length; c2++)
      n2.push(i2[c2]);
  return null != n2 && (a2.children = n2), O(e2.type, a2, r2 || e2.key, o2 || e2.ref, null);
}
s = { __e: function(e2, t2) {
  for (var n2, r2, o2; t2 = t2.__; )
    if ((n2 = t2.__c) && !n2.__)
      try {
        if ((r2 = n2.constructor) && null != r2.getDerivedStateFromError && (n2.setState(r2.getDerivedStateFromError(e2)), o2 = n2.__d), null != n2.componentDidCatch && (n2.componentDidCatch(e2), o2 = n2.__d), o2)
          return n2.__E = n2;
      } catch (t3) {
        e2 = t3;
      }
  throw e2;
}, __v: 0 }, E.prototype.setState = function(e2, t2) {
  var n2;
  n2 = null != this.__s && this.__s !== this.state ? this.__s : this.__s = _({}, this.state), "function" == typeof e2 && (e2 = e2(_({}, n2), this.props)), e2 && _(n2, e2), null != e2 && this.__v && (t2 && this.__h.push(t2), P(this));
}, E.prototype.forceUpdate = function(e2) {
  this.__v && (this.__e = true, e2 && this.__h.push(e2), P(this));
}, E.prototype.render = S, f$1 = [], p = "function" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, I$1.__r = 0, d = 0;
var W$1, K, J, $ = 0, Q = [], Y = s.__b, G = s.__r, Z$1 = s.diffed, X = s.__c, ee = s.unmount;
function te(e2, t2) {
  s.__h && s.__h(K, e2, $ || t2), $ = 0;
  var n2 = K.__H || (K.__H = { __: [], __h: [] });
  return e2 >= n2.__.length && n2.__.push({}), n2.__[e2];
}
function ne(e2) {
  return $ = 1, re(pe, e2);
}
function re(e2, t2, n2) {
  var r2 = te(W$1++, 2);
  return r2.t = e2, r2.__c || (r2.__ = [n2 ? n2(t2) : pe(void 0, t2), function(e3) {
    var t3 = r2.t(r2.__[0], e3);
    r2.__[0] !== t3 && (r2.__ = [t3, r2.__[1]], r2.__c.setState({}));
  }], r2.__c = K), r2.__;
}
function oe(e2, t2) {
  var n2 = te(W$1++, 3);
  !s.__s && fe(n2.__H, t2) && (n2.__ = e2, n2.__H = t2, K.__H.__h.push(n2));
}
function ce(e2, t2) {
  var n2 = te(W$1++, 4);
  !s.__s && fe(n2.__H, t2) && (n2.__ = e2, n2.__H = t2, K.__h.push(n2));
}
function ie(e2, t2) {
  var n2 = te(W$1++, 7);
  return fe(n2.__H, t2) && (n2.__ = e2(), n2.__H = t2, n2.__h = e2), n2.__;
}
function ae() {
  Q.forEach(function(e2) {
    if (e2.__P)
      try {
        e2.__H.__h.forEach(le), e2.__H.__h.forEach(se), e2.__H.__h = [];
      } catch (t2) {
        e2.__H.__h = [], s.__e(t2, e2.__v);
      }
  }), Q = [];
}
s.__b = function(e2) {
  K = null, Y && Y(e2);
}, s.__r = function(e2) {
  G && G(e2), W$1 = 0;
  var t2 = (K = e2.__c).__H;
  t2 && (t2.__h.forEach(le), t2.__h.forEach(se), t2.__h = []);
}, s.diffed = function(e2) {
  Z$1 && Z$1(e2);
  var t2 = e2.__c;
  t2 && t2.__H && t2.__H.__h.length && (1 !== Q.push(t2) && J === s.requestAnimationFrame || ((J = s.requestAnimationFrame) || function(e3) {
    var t3, n2 = function() {
      clearTimeout(r2), ue && cancelAnimationFrame(t3), setTimeout(e3);
    }, r2 = setTimeout(n2, 100);
    ue && (t3 = requestAnimationFrame(n2));
  })(ae)), K = void 0;
}, s.__c = function(e2, t2) {
  t2.some(function(e3) {
    try {
      e3.__h.forEach(le), e3.__h = e3.__h.filter(function(e4) {
        return !e4.__ || se(e4);
      });
    } catch (n2) {
      t2.some(function(e4) {
        e4.__h && (e4.__h = []);
      }), t2 = [], s.__e(n2, e3.__v);
    }
  }), X && X(e2, t2);
}, s.unmount = function(e2) {
  ee && ee(e2);
  var t2 = e2.__c;
  if (t2 && t2.__H)
    try {
      t2.__H.__.forEach(le);
    } catch (e3) {
      s.__e(e3, t2.__v);
    }
};
var ue = "function" == typeof requestAnimationFrame;
function le(e2) {
  var t2 = K;
  "function" == typeof e2.__c && e2.__c(), K = t2;
}
function se(e2) {
  var t2 = K;
  e2.__c = e2.__(), K = t2;
}
function fe(e2, t2) {
  return !e2 || e2.length !== t2.length || t2.some(function(t3, n2) {
    return t3 !== e2[n2];
  });
}
function pe(e2, t2) {
  return "function" == typeof t2 ? t2(e2) : t2;
}
function me(e2, t2) {
  for (var n2 in t2)
    e2[n2] = t2[n2];
  return e2;
}
function de(e2, t2) {
  for (var n2 in e2)
    if ("__source" !== n2 && !(n2 in t2))
      return true;
  for (var r2 in t2)
    if ("__source" !== r2 && e2[r2] !== t2[r2])
      return true;
  return false;
}
function he(e2) {
  this.props = e2;
}
(he.prototype = new E()).isPureReactComponent = true, he.prototype.shouldComponentUpdate = function(e2, t2) {
  return de(this.props, e2) || de(this.state, t2);
};
var ve = s.__b;
s.__b = function(e2) {
  e2.type && e2.type.__f && e2.ref && (e2.props.ref = e2.ref, e2.ref = null), ve && ve(e2);
};
var ye = "undefined" != typeof Symbol && Symbol.for && Symbol.for("react.forward_ref") || 3911;
var _e = function(e2, t2) {
  return null == e2 ? null : C(C(e2).map(t2));
}, be = { map: _e, forEach: _e, count: function(e2) {
  return e2 ? C(e2).length : 0;
}, only: function(e2) {
  var t2 = C(e2);
  if (1 !== t2.length)
    throw "Children.only";
  return t2[0];
}, toArray: C }, ge = s.__e;
function Oe() {
  this.__u = 0, this.t = null, this.__b = null;
}
function Se(e2) {
  var t2 = e2.__.__c;
  return t2 && t2.__e && t2.__e(e2);
}
function Ee() {
  this.u = null, this.o = null;
}
s.__e = function(e2, t2, n2) {
  if (e2.then) {
    for (var r2, o2 = t2; o2 = o2.__; )
      if ((r2 = o2.__c) && r2.__c)
        return null == t2.__e && (t2.__e = n2.__e, t2.__k = n2.__k), r2.__c(e2, t2);
  }
  ge(e2, t2, n2);
}, (Oe.prototype = new E()).__c = function(e2, t2) {
  var n2 = t2.__c, r2 = this;
  null == r2.t && (r2.t = []), r2.t.push(n2);
  var o2 = Se(r2.__v), c2 = false, i2 = function() {
    c2 || (c2 = true, n2.componentWillUnmount = n2.__c, o2 ? o2(a2) : a2());
  };
  n2.__c = n2.componentWillUnmount, n2.componentWillUnmount = function() {
    i2(), n2.__c && n2.__c();
  };
  var a2 = function() {
    if (!--r2.__u) {
      if (r2.state.__e) {
        var e3 = r2.state.__e;
        r2.__v.__k[0] = function e4(t4, n3, r3) {
          return t4 && (t4.__v = null, t4.__k = t4.__k && t4.__k.map(function(t5) {
            return e4(t5, n3, r3);
          }), t4.__c && t4.__c.__P === n3 && (t4.__e && r3.insertBefore(t4.__e, t4.__d), t4.__c.__e = true, t4.__c.__P = r3)), t4;
        }(e3, e3.__c.__P, e3.__c.__O);
      }
      var t3;
      for (r2.setState({ __e: r2.__b = null }); t3 = r2.t.pop(); )
        t3.forceUpdate();
    }
  }, u2 = true === t2.__h;
  r2.__u++ || u2 || r2.setState({ __e: r2.__b = r2.__v.__k[0] }), e2.then(i2, i2);
}, Oe.prototype.componentWillUnmount = function() {
  this.t = [];
}, Oe.prototype.render = function(e2, t2) {
  if (this.__b) {
    if (this.__v.__k) {
      var n2 = document.createElement("div"), r2 = this.__v.__k[0].__c;
      this.__v.__k[0] = function e3(t3, n3, r3) {
        return t3 && (t3.__c && t3.__c.__H && (t3.__c.__H.__.forEach(function(e4) {
          "function" == typeof e4.__c && e4.__c();
        }), t3.__c.__H = null), null != (t3 = me({}, t3)).__c && (t3.__c.__P === r3 && (t3.__c.__P = n3), t3.__c = null), t3.__k = t3.__k && t3.__k.map(function(t4) {
          return e3(t4, n3, r3);
        })), t3;
      }(this.__b, n2, r2.__O = r2.__P);
    }
    this.__b = null;
  }
  var o2 = t2.__e && g(S, null, e2.fallback);
  return o2 && (o2.__h = null), [g(S, null, t2.__e ? null : e2.children), o2];
};
var we = function(e2, t2, n2) {
  if (++n2[1] === n2[0] && e2.o.delete(t2), e2.props.revealOrder && ("t" !== e2.props.revealOrder[0] || !e2.o.size))
    for (n2 = e2.u; n2; ) {
      for (; n2.length > 3; )
        n2.pop()();
      if (n2[1] < n2[0])
        break;
      e2.u = n2 = n2[2];
    }
};
function je(e2) {
  return this.getChildContext = function() {
    return e2.context;
  }, e2.children;
}
function Pe(e2) {
  var t2 = this, n2 = e2.i;
  t2.componentWillUnmount = function() {
    B(null, t2.l), t2.l = null, t2.i = null;
  }, t2.i && t2.i !== n2 && t2.componentWillUnmount(), e2.__v ? (t2.l || (t2.i = n2, t2.l = { nodeType: 1, parentNode: n2, childNodes: [], appendChild: function(e3) {
    this.childNodes.push(e3), t2.i.appendChild(e3);
  }, insertBefore: function(e3, n3) {
    this.childNodes.push(e3), t2.i.appendChild(e3);
  }, removeChild: function(e3) {
    this.childNodes.splice(this.childNodes.indexOf(e3) >>> 1, 1), t2.i.removeChild(e3);
  } }), B(g(je, { context: t2.context }, e2.__v), t2.l)) : t2.l && t2.componentWillUnmount();
}
function Ie(e2, t2) {
  return g(Pe, { __v: e2, i: t2 });
}
(Ee.prototype = new E()).__e = function(e2) {
  var t2 = this, n2 = Se(t2.__v), r2 = t2.o.get(e2);
  return r2[0]++, function(o2) {
    var c2 = function() {
      t2.props.revealOrder ? (r2.push(o2), we(t2, e2, r2)) : o2();
    };
    n2 ? n2(c2) : c2();
  };
}, Ee.prototype.render = function(e2) {
  this.u = null, this.o = /* @__PURE__ */ new Map();
  var t2 = C(e2.children);
  e2.revealOrder && "b" === e2.revealOrder[0] && t2.reverse();
  for (var n2 = t2.length; n2--; )
    this.o.set(t2[n2], this.u = [1, 0, this.u]);
  return e2.children;
}, Ee.prototype.componentDidUpdate = Ee.prototype.componentDidMount = function() {
  var e2 = this;
  this.o.forEach(function(t2, n2) {
    we(e2, n2, t2);
  });
};
var ke = "undefined" != typeof Symbol && Symbol.for && Symbol.for("react.element") || 60103, De = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/, Ce = function(e2) {
  return ("undefined" != typeof Symbol && "symbol" == n$1(Symbol()) ? /fil|che|rad/i : /fil|che|ra/i).test(e2);
};
function Ae(e2, t2, n2) {
  return null == t2.__k && (t2.textContent = ""), B(e2, t2), "function" == typeof n2 && n2(), e2 ? e2.__c : null;
}
E.prototype.isReactComponent = {}, ["componentWillMount", "componentWillReceiveProps", "componentWillUpdate"].forEach(function(e2) {
  Object.defineProperty(E.prototype, e2, { configurable: true, get: function() {
    return this["UNSAFE_" + e2];
  }, set: function(t2) {
    Object.defineProperty(this, e2, { configurable: true, writable: true, value: t2 });
  } });
});
var xe = s.event;
function Ne() {
}
function Te() {
  return this.cancelBubble;
}
function Re() {
  return this.defaultPrevented;
}
s.event = function(e2) {
  return xe && (e2 = xe(e2)), e2.persist = Ne, e2.isPropagationStopped = Te, e2.isDefaultPrevented = Re, e2.nativeEvent = e2;
};
var Le, qe = { configurable: true, get: function() {
  return this.class;
} }, Me = s.vnode;
s.vnode = function(e2) {
  var t2 = e2.type, n2 = e2.props, r2 = n2;
  if ("string" == typeof t2) {
    for (var o2 in r2 = {}, n2) {
      var c2 = n2[o2];
      "value" === o2 && "defaultValue" in n2 && null == c2 || ("defaultValue" === o2 && "value" in n2 && null == n2.value ? o2 = "value" : "download" === o2 && true === c2 ? c2 = "" : /ondoubleclick/i.test(o2) ? o2 = "ondblclick" : /^onchange(textarea|input)/i.test(o2 + t2) && !Ce(n2.type) ? o2 = "oninput" : /^on(Ani|Tra|Tou|BeforeInp)/.test(o2) ? o2 = o2.toLowerCase() : De.test(o2) ? o2 = o2.replace(/[A-Z0-9]/, "-$&").toLowerCase() : null === c2 && (c2 = void 0), r2[o2] = c2);
    }
    "select" == t2 && r2.multiple && Array.isArray(r2.value) && (r2.value = C(n2.children).forEach(function(e3) {
      e3.props.selected = -1 != r2.value.indexOf(e3.props.value);
    })), "select" == t2 && null != r2.defaultValue && (r2.value = C(n2.children).forEach(function(e3) {
      e3.props.selected = r2.multiple ? -1 != r2.defaultValue.indexOf(e3.props.value) : r2.defaultValue == e3.props.value;
    })), e2.props = r2;
  }
  t2 && n2.class != n2.className && (qe.enumerable = "className" in n2, null != n2.className && (r2.class = n2.className), Object.defineProperty(r2, "className", qe)), e2.$$typeof = ke, Me && Me(e2);
};
var He = s.__r;
s.__r = function(e2) {
  He && He(e2), Le = e2.__c;
};
var Ue = { ReactCurrentDispatcher: { current: { readContext: function(e2) {
  return Le.__n[e2.__c].props.value;
} } } };
"object" == ("undefined" == typeof performance ? "undefined" : n$1(performance)) && "function" == typeof performance.now && performance.now.bind(performance);
function Fe(e2) {
  return !!e2 && e2.$$typeof === ke;
}
var Be = { useState: ne, useReducer: re, useEffect: oe, useLayoutEffect: ce, useRef: function(e2) {
  return $ = 5, ie(function() {
    return { current: e2 };
  }, []);
}, useImperativeHandle: function(e2, t2, n2) {
  $ = 6, ce(function() {
    "function" == typeof e2 ? e2(t2()) : e2 && (e2.current = t2());
  }, null == n2 ? n2 : n2.concat(e2));
}, useMemo: ie, useCallback: function(e2, t2) {
  return $ = 8, ie(function() {
    return e2;
  }, t2);
}, useContext: function(e2) {
  var t2 = K.context[e2.__c], n2 = te(W$1++, 9);
  return n2.__c = e2, t2 ? (null == n2.__ && (n2.__ = true, t2.sub(K)), t2.props.value) : e2.__;
}, useDebugValue: function(e2, t2) {
  s.useDebugValue && s.useDebugValue(t2 ? t2(e2) : e2);
}, version: "16.8.0", Children: be, render: Ae, hydrate: function(e2, t2, n2) {
  return V(e2, t2), "function" == typeof n2 && n2(), e2 ? e2.__c : null;
}, unmountComponentAtNode: function(e2) {
  return !!e2.__k && (B(null, e2), true);
}, createPortal: Ie, createElement: g, createContext: function(e2, t2) {
  var n2 = { __c: t2 = "__cC" + d++, __: e2, Consumer: function(e3, t3) {
    return e3.children(t3);
  }, Provider: function(e3) {
    var n3, r2;
    return this.getChildContext || (n3 = [], (r2 = {})[t2] = this, this.getChildContext = function() {
      return r2;
    }, this.shouldComponentUpdate = function(e4) {
      this.props.value !== e4.value && n3.some(P);
    }, this.sub = function(e4) {
      n3.push(e4);
      var t3 = e4.componentWillUnmount;
      e4.componentWillUnmount = function() {
        n3.splice(n3.indexOf(e4), 1), t3 && t3.call(e4);
      };
    }), e3.children;
  } };
  return n2.Provider.__ = n2.Consumer.contextType = n2;
}, createFactory: function(e2) {
  return g.bind(null, e2);
}, cloneElement: function(e2) {
  return Fe(e2) ? z$1.apply(null, arguments) : e2;
}, createRef: function() {
  return { current: null };
}, Fragment: S, isValidElement: Fe, findDOMNode: function(e2) {
  return e2 && (e2.base || 1 === e2.nodeType && e2) || null;
}, Component: E, PureComponent: he, memo: function(e2, t2) {
  function n2(e3) {
    var n3 = this.props.ref, r3 = n3 == e3.ref;
    return !r3 && n3 && (n3.call ? n3(null) : n3.current = null), t2 ? !t2(this.props, e3) || !r3 : de(this.props, e3);
  }
  function r2(t3) {
    return this.shouldComponentUpdate = n2, g(e2, t3);
  }
  return r2.displayName = "Memo(" + (e2.displayName || e2.name) + ")", r2.prototype.isReactComponent = true, r2.__f = true, r2;
}, forwardRef: function(e2) {
  function t2(t3, r2) {
    var o2 = me({}, t3);
    return delete o2.ref, e2(o2, (r2 = t3.ref || r2) && ("object" != n$1(r2) || "current" in r2) ? r2 : null);
  }
  return t2.$$typeof = ye, t2.render = t2, t2.prototype.isReactComponent = t2.__f = true, t2.displayName = "ForwardRef(" + (e2.displayName || e2.name) + ")", t2;
}, unstable_batchedUpdates: function(e2, t2) {
  return e2(t2);
}, StrictMode: S, Suspense: Oe, SuspenseList: Ee, lazy: function(e2) {
  var t2, n2, r2;
  function o2(o3) {
    if (t2 || (t2 = e2()).then(function(e3) {
      n2 = e3.default || e3;
    }, function(e3) {
      r2 = e3;
    }), r2)
      throw r2;
    if (!n2)
      throw t2;
    return g(n2, o3);
  }
  return o2.displayName = "Lazy", o2.__f = true, o2;
}, __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: Ue };
function Ve() {
  return Be.createElement("svg", { width: "15", height: "15", className: "DocSearch-Control-Key-Icon" }, Be.createElement("path", { d: "M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953", strokeWidth: "1.2", stroke: "currentColor", fill: "none", strokeLinecap: "square" }));
}
function ze() {
  return Be.createElement("svg", { width: "20", height: "20", className: "DocSearch-Search-Icon", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }));
}
var We = ["translations"];
function Ke() {
  return Ke = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, Ke.apply(this, arguments);
}
function Je(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return $e(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return $e(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function $e(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Qe(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
var Ye = Be.forwardRef(function(e2, t2) {
  var n2 = e2.translations, r2 = void 0 === n2 ? {} : n2, o2 = Qe(e2, We), c2 = r2.buttonText, i2 = void 0 === c2 ? "Search" : c2, a2 = r2.buttonAriaLabel, u2 = void 0 === a2 ? "Search" : a2, l2 = Je(ne(null), 2), s2 = l2[0], f2 = l2[1];
  return oe(function() {
    "undefined" != typeof navigator && (/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) ? f2("\u2318") : f2("Ctrl"));
  }, []), Be.createElement("button", Ke({ type: "button", className: "DocSearch DocSearch-Button", "aria-label": u2 }, o2, { ref: t2 }), Be.createElement("span", { className: "DocSearch-Button-Container" }, Be.createElement(ze, null), Be.createElement("span", { className: "DocSearch-Button-Placeholder" }, i2)), Be.createElement("span", { className: "DocSearch-Button-Keys" }, null !== s2 && Be.createElement(Be.Fragment, null, Be.createElement("kbd", { className: "DocSearch-Button-Key" }, "Ctrl" === s2 ? Be.createElement(Ve, null) : s2), Be.createElement("kbd", { className: "DocSearch-Button-Key" }, "K"))));
});
function Ge(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Ze(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Ze(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Ze(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Xe(e2) {
  return Xe = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
    return typeof e3;
  } : function(e3) {
    return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
  }, Xe(e2);
}
function et(e2) {
  var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : /* @__PURE__ */ new Set();
  if (!e2 || "object" !== Xe(e2))
    return e2;
  if (t2.has(e2))
    return "[Circular]";
  var n2 = t2.add(e2);
  return Array.isArray(e2) ? e2.map(function(e3) {
    return et(e3, n2);
  }) : Object.fromEntries(Object.entries(e2).map(function(e3) {
    var t3 = Ge(e3, 2);
    return [t3[0], et(t3[1], n2)];
  }));
}
function tt(e2) {
  return e2.reduce(function(e3, t2) {
    return e3.concat(t2);
  }, []);
}
var nt = 0;
function rt(e2) {
  return 0 === e2.collections.length ? 0 : e2.collections.reduce(function(e3, t2) {
    return e3 + t2.items.length;
  }, 0);
}
function ot(e2, t2) {
  if (!e2)
    throw new Error("[Autocomplete] ".concat("function" == typeof t2 ? t2() : t2));
}
var ct = function() {
}, it = [{ segment: "autocomplete-core", version: "1.7.1" }], at = { current: {} };
function ut(e2) {
  (function(e3, t2) {
    if (!e3) {
      var n2 = t2.trim();
      at.current[n2] || (at.current[n2] = true, console.warn("[Autocomplete] ".concat(n2)));
    }
  })(!e2.debug, "The `debug` option is meant for development debugging and should not be used in production.");
}
function lt(e2, t2) {
  var n2 = t2;
  return { then: function(t3, r2) {
    return lt(e2.then(ft(t3, n2, e2), ft(r2, n2, e2)), n2);
  }, catch: function(t3) {
    return lt(e2.catch(ft(t3, n2, e2)), n2);
  }, finally: function(t3) {
    return t3 && n2.onCancelList.push(t3), lt(e2.finally(ft(t3 && function() {
      return n2.onCancelList = [], t3();
    }, n2, e2)), n2);
  }, cancel: function() {
    n2.isCanceled = true;
    var e3 = n2.onCancelList;
    n2.onCancelList = [], e3.forEach(function(e4) {
      e4();
    });
  }, isCanceled: function() {
    return true === n2.isCanceled;
  } };
}
function st(e2) {
  return lt(e2, { isCanceled: false, onCancelList: [] });
}
function ft(e2, t2, n2) {
  return e2 ? function(n3) {
    return t2.isCanceled ? n3 : e2(n3);
  } : n2;
}
function pt(e2, t2, n2, r2) {
  if (!n2)
    return null;
  if (e2 < 0 && (null === t2 || null !== r2 && 0 === t2))
    return n2 + e2;
  var o2 = (null === t2 ? -1 : t2) + e2;
  return o2 <= -1 || o2 >= n2 ? null === r2 ? null : 0 : o2;
}
function mt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function dt(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function ht(e2) {
  return ht = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
    return typeof e3;
  } : function(e3) {
    return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
  }, ht(e2);
}
function vt(e2, t2) {
  var n2 = [];
  return Promise.resolve(e2(t2)).then(function(e3) {
    return ot(Array.isArray(e3), function() {
      return "The `getSources` function must return an array of sources but returned type ".concat(JSON.stringify(ht(e3)), ":\n\n").concat(JSON.stringify(et(e3), null, 2));
    }), Promise.all(e3.filter(function(e4) {
      return Boolean(e4);
    }).map(function(e4) {
      if (ot("string" == typeof e4.sourceId, "A source must provide a `sourceId` string."), n2.includes(e4.sourceId))
        throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(e4.sourceId), " is not unique."));
      n2.push(e4.sourceId);
      var t3 = function(e5) {
        for (var t4 = 1; t4 < arguments.length; t4++) {
          var n3 = null != arguments[t4] ? arguments[t4] : {};
          t4 % 2 ? mt(Object(n3), true).forEach(function(t5) {
            dt(e5, t5, n3[t5]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e5, Object.getOwnPropertyDescriptors(n3)) : mt(Object(n3)).forEach(function(t5) {
            Object.defineProperty(e5, t5, Object.getOwnPropertyDescriptor(n3, t5));
          });
        }
        return e5;
      }({ getItemInputValue: function(e5) {
        return e5.state.query;
      }, getItemUrl: function() {
      }, onSelect: function(e5) {
        (0, e5.setIsOpen)(false);
      }, onActive: ct }, e4);
      return Promise.resolve(t3);
    }));
  });
}
function yt(e2) {
  var t2 = function(e3) {
    var t3 = e3.collections.map(function(e4) {
      return e4.items.length;
    }).reduce(function(e4, t4, n3) {
      var r3 = (e4[n3 - 1] || 0) + t4;
      return e4.push(r3), e4;
    }, []).reduce(function(t4, n3) {
      return n3 <= e3.activeItemId ? t4 + 1 : t4;
    }, 0);
    return e3.collections[t3];
  }(e2);
  if (!t2)
    return null;
  var n2 = t2.items[function(e3) {
    for (var t3 = e3.state, n3 = e3.collection, r3 = false, o2 = 0, c2 = 0; false === r3; ) {
      var i2 = t3.collections[o2];
      if (i2 === n3) {
        r3 = true;
        break;
      }
      c2 += i2.items.length, o2++;
    }
    return t3.activeItemId - c2;
  }({ state: e2, collection: t2 })], r2 = t2.source;
  return { item: n2, itemInputValue: r2.getItemInputValue({ item: n2, state: e2 }), itemUrl: r2.getItemUrl({ item: n2, state: e2 }), source: r2 };
}
var _t = /((gt|sm)-|galaxy nexus)|samsung[- ]/i;
function bt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function gt(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? bt(Object(n2), true).forEach(function(t3) {
      Ot(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : bt(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Ot(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function St(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Et(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function wt(e2, t2, n2) {
  var r2, o2 = t2.initialState;
  return { getState: function() {
    return o2;
  }, dispatch: function(r3, c2) {
    var i2 = function(e3) {
      for (var t3 = 1; t3 < arguments.length; t3++) {
        var n3 = null != arguments[t3] ? arguments[t3] : {};
        t3 % 2 ? St(Object(n3), true).forEach(function(t4) {
          Et(e3, t4, n3[t4]);
        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e3, Object.getOwnPropertyDescriptors(n3)) : St(Object(n3)).forEach(function(t4) {
          Object.defineProperty(e3, t4, Object.getOwnPropertyDescriptor(n3, t4));
        });
      }
      return e3;
    }({}, o2);
    o2 = e2(o2, { type: r3, props: t2, payload: c2 }), n2({ state: o2, prevState: i2 });
  }, pendingRequests: (r2 = [], { add: function(e3) {
    return r2.push(e3), e3.finally(function() {
      r2 = r2.filter(function(t3) {
        return t3 !== e3;
      });
    });
  }, cancelAll: function() {
    r2.forEach(function(e3) {
      return e3.cancel();
    });
  }, isEmpty: function() {
    return 0 === r2.length;
  } }) };
}
function jt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Pt(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? jt(Object(n2), true).forEach(function(t3) {
      It(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : jt(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function It(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function kt(e2) {
  return function(e3) {
    if (Array.isArray(e3))
      return Dt(e3);
  }(e2) || function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }(e2) || function(e3, t2) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Dt(e3, t2);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Dt(e3, t2);
  }(e2) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Dt(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Ct(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function At(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? Ct(Object(n2), true).forEach(function(t3) {
      xt(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : Ct(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function xt(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Nt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Tt(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? Nt(Object(n2), true).forEach(function(t3) {
      Rt(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : Nt(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Rt(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Lt(e2) {
  return Lt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
    return typeof e3;
  } : function(e3) {
    return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
  }, Lt(e2);
}
function qt(e2) {
  return function(e3) {
    if (Array.isArray(e3))
      return Mt(e3);
  }(e2) || function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }(e2) || function(e3, t2) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Mt(e3, t2);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Mt(e3, t2);
  }(e2) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Mt(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Ht(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Ut(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? Ht(Object(n2), true).forEach(function(t3) {
      Ft(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : Ht(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Ft(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Bt(e2) {
  return Boolean(e2.execute);
}
function Vt(e2, t2) {
  return n2 = e2, Boolean(null == n2 ? void 0 : n2.execute) ? Ut(Ut({}, e2), {}, { requests: e2.queries.map(function(n3) {
    return { query: n3, sourceId: t2, transformResponse: e2.transformResponse };
  }) }) : { items: e2, sourceId: t2 };
  var n2;
}
function zt(e2) {
  var t2 = e2.reduce(function(e3, t3) {
    if (!Bt(t3))
      return e3.push(t3), e3;
    var n2 = t3.searchClient, r2 = t3.execute, o2 = t3.requesterId, c2 = t3.requests, i2 = e3.find(function(e4) {
      return Bt(t3) && Bt(e4) && e4.searchClient === n2 && Boolean(o2) && e4.requesterId === o2;
    });
    if (i2) {
      var a2;
      (a2 = i2.items).push.apply(a2, qt(c2));
    } else {
      var u2 = { execute: r2, requesterId: o2, items: c2, searchClient: n2 };
      e3.push(u2);
    }
    return e3;
  }, []).map(function(e3) {
    if (!Bt(e3))
      return Promise.resolve(e3);
    var t3 = e3, n2 = t3.execute, r2 = t3.items;
    return n2({ searchClient: t3.searchClient, requests: r2 });
  });
  return Promise.all(t2).then(function(e3) {
    return tt(e3);
  });
}
function Wt(e2, t2) {
  return t2.map(function(t3) {
    var n2 = e2.filter(function(e3) {
      return e3.sourceId === t3.sourceId;
    }), r2 = n2.map(function(e3) {
      return e3.items;
    }), o2 = n2[0].transformResponse, c2 = o2 ? o2(function(e3) {
      var t4 = e3.map(function(e4) {
        var t5;
        return gt(gt({}, e4), {}, { hits: null === (t5 = e4.hits) || void 0 === t5 ? void 0 : t5.map(function(t6) {
          return gt(gt({}, t6), {}, { __autocomplete_indexName: e4.index, __autocomplete_queryID: e4.queryID });
        }) });
      });
      return { results: t4, hits: t4.map(function(e4) {
        return e4.hits;
      }).filter(Boolean), facetHits: t4.map(function(e4) {
        var t5;
        return null === (t5 = e4.facetHits) || void 0 === t5 ? void 0 : t5.map(function(e5) {
          return { label: e5.value, count: e5.count, _highlightResult: { label: { value: e5.highlighted } } };
        });
      }).filter(Boolean) };
    }(r2)) : r2;
    return ot(Array.isArray(c2), function() {
      return 'The `getItems` function from source "'.concat(t3.sourceId, '" must return an array of items but returned type ').concat(JSON.stringify(Lt(c2)), ":\n\n").concat(JSON.stringify(et(c2), null, 2), ".\n\nSee: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems");
    }), ot(c2.every(Boolean), 'The `getItems` function from source "'.concat(t3.sourceId, '" must return an array of items but returned ').concat(JSON.stringify(void 0), ".\n\nDid you forget to return items?\n\nSee: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems")), { source: t3, items: c2 };
  });
}
var Kt = ["event", "nextState", "props", "query", "refresh", "store"];
function Jt(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function $t(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? Jt(Object(n2), true).forEach(function(t3) {
      Qt(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : Jt(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Qt(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Yt(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
var Gt, Zt, Xt, en = null, tn = (Gt = -1, Zt = -1, Xt = void 0, function(e2) {
  var t2 = ++Gt;
  return Promise.resolve(e2).then(function(e3) {
    return Xt && t2 < Zt ? Xt : (Zt = t2, Xt = e3, e3);
  });
});
function nn(e2) {
  var t2 = e2.event, n2 = e2.nextState, r2 = void 0 === n2 ? {} : n2, o2 = e2.props, c2 = e2.query, i2 = e2.refresh, a2 = e2.store, u2 = Yt(e2, Kt);
  en && o2.environment.clearTimeout(en);
  var l2 = u2.setCollections, s2 = u2.setIsOpen, f2 = u2.setQuery, p2 = u2.setActiveItemId, m2 = u2.setStatus;
  if (f2(c2), p2(o2.defaultActiveItemId), !c2 && false === o2.openOnFocus) {
    var d2, h2 = a2.getState().collections.map(function(e3) {
      return $t($t({}, e3), {}, { items: [] });
    });
    m2("idle"), l2(h2), s2(null !== (d2 = r2.isOpen) && void 0 !== d2 ? d2 : o2.shouldPanelOpen({ state: a2.getState() }));
    var v2 = st(tn(h2).then(function() {
      return Promise.resolve();
    }));
    return a2.pendingRequests.add(v2);
  }
  m2("loading"), en = o2.environment.setTimeout(function() {
    m2("stalled");
  }, o2.stallThreshold);
  var y2 = st(tn(o2.getSources($t({ query: c2, refresh: i2, state: a2.getState() }, u2)).then(function(e3) {
    return Promise.all(e3.map(function(e4) {
      return Promise.resolve(e4.getItems($t({ query: c2, refresh: i2, state: a2.getState() }, u2))).then(function(t3) {
        return Vt(t3, e4.sourceId);
      });
    })).then(zt).then(function(t3) {
      return Wt(t3, e3);
    }).then(function(e4) {
      return function(e5) {
        var t3 = e5.collections, n3 = e5.props, r3 = e5.state, o3 = t3.reduce(function(e6, t4) {
          return Tt(Tt({}, e6), {}, Rt({}, t4.source.sourceId, Tt(Tt({}, t4.source), {}, { getItems: function() {
            return tt(t4.items);
          } })));
        }, {});
        return tt(n3.reshape({ sources: Object.values(o3), sourcesBySourceId: o3, state: r3 })).filter(Boolean).map(function(e6) {
          return { source: e6, items: e6.getItems() };
        });
      }({ collections: e4, props: o2, state: a2.getState() });
    });
  }))).then(function(e3) {
    var n3;
    m2("idle"), l2(e3);
    var f3 = o2.shouldPanelOpen({ state: a2.getState() });
    s2(null !== (n3 = r2.isOpen) && void 0 !== n3 ? n3 : o2.openOnFocus && !c2 && f3 || f3);
    var p3 = yt(a2.getState());
    if (null !== a2.getState().activeItemId && p3) {
      var d3 = p3.item, h3 = p3.itemInputValue, v3 = p3.itemUrl, y3 = p3.source;
      y3.onActive($t({ event: t2, item: d3, itemInputValue: h3, itemUrl: v3, refresh: i2, source: y3, state: a2.getState() }, u2));
    }
  }).finally(function() {
    m2("idle"), en && o2.environment.clearTimeout(en);
  });
  return a2.pendingRequests.add(y2);
}
var rn = ["event", "props", "refresh", "store"];
function on(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function cn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? on(Object(n2), true).forEach(function(t3) {
      an(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : on(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function an(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function un(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
var ln = ["props", "refresh", "store"], sn = ["inputElement", "formElement", "panelElement"], fn = ["inputElement"], pn = ["inputElement", "maxLength"], mn = ["item", "source"];
function dn(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function hn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? dn(Object(n2), true).forEach(function(t3) {
      vn(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : dn(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function vn(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function yn(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function _n(e2) {
  var t2 = e2.props, n2 = e2.refresh, r2 = e2.store, o2 = yn(e2, ln);
  return { getEnvironmentProps: function(e3) {
    var n3 = e3.inputElement, o3 = e3.formElement, c2 = e3.panelElement;
    function i2(e4) {
      !r2.getState().isOpen && r2.pendingRequests.isEmpty() || e4.target === n3 || false === [o3, c2].some(function(t3) {
        return n4 = t3, r3 = e4.target, n4 === r3 || n4.contains(r3);
        var n4, r3;
      }) && (r2.dispatch("blur", null), t2.debug || r2.pendingRequests.cancelAll());
    }
    return hn({ onTouchStart: i2, onMouseDown: i2, onTouchMove: function(e4) {
      false !== r2.getState().isOpen && n3 === t2.environment.document.activeElement && e4.target !== n3 && n3.blur();
    } }, yn(e3, sn));
  }, getRootProps: function(e3) {
    return hn({ role: "combobox", "aria-expanded": r2.getState().isOpen, "aria-haspopup": "listbox", "aria-owns": r2.getState().isOpen ? "".concat(t2.id, "-list") : void 0, "aria-labelledby": "".concat(t2.id, "-label") }, e3);
  }, getFormProps: function(e3) {
    e3.inputElement;
    return hn({ action: "", noValidate: true, role: "search", onSubmit: function(c2) {
      var i2;
      c2.preventDefault(), t2.onSubmit(hn({ event: c2, refresh: n2, state: r2.getState() }, o2)), r2.dispatch("submit", null), null === (i2 = e3.inputElement) || void 0 === i2 || i2.blur();
    }, onReset: function(c2) {
      var i2;
      c2.preventDefault(), t2.onReset(hn({ event: c2, refresh: n2, state: r2.getState() }, o2)), r2.dispatch("reset", null), null === (i2 = e3.inputElement) || void 0 === i2 || i2.focus();
    } }, yn(e3, fn));
  }, getLabelProps: function(e3) {
    return hn({ htmlFor: "".concat(t2.id, "-input"), id: "".concat(t2.id, "-label") }, e3);
  }, getInputProps: function(e3) {
    var c2;
    function i2(e4) {
      (t2.openOnFocus || Boolean(r2.getState().query)) && nn(hn({ event: e4, props: t2, query: r2.getState().completion || r2.getState().query, refresh: n2, store: r2 }, o2)), r2.dispatch("focus", null);
    }
    var a2 = e3 || {}, u2 = (a2.inputElement, a2.maxLength), l2 = void 0 === u2 ? 512 : u2, s2 = yn(a2, pn), f2 = yt(r2.getState()), p2 = function(e4) {
      return Boolean(e4 && e4.match(_t));
    }((null === (c2 = t2.environment.navigator) || void 0 === c2 ? void 0 : c2.userAgent) || ""), m2 = null != f2 && f2.itemUrl && !p2 ? "go" : "search";
    return hn({ "aria-autocomplete": "both", "aria-activedescendant": r2.getState().isOpen && null !== r2.getState().activeItemId ? "".concat(t2.id, "-item-").concat(r2.getState().activeItemId) : void 0, "aria-controls": r2.getState().isOpen ? "".concat(t2.id, "-list") : void 0, "aria-labelledby": "".concat(t2.id, "-label"), value: r2.getState().completion || r2.getState().query, id: "".concat(t2.id, "-input"), autoComplete: "off", autoCorrect: "off", autoCapitalize: "off", enterKeyHint: m2, spellCheck: "false", autoFocus: t2.autoFocus, placeholder: t2.placeholder, maxLength: l2, type: "search", onChange: function(e4) {
      nn(hn({ event: e4, props: t2, query: e4.currentTarget.value.slice(0, l2), refresh: n2, store: r2 }, o2));
    }, onKeyDown: function(e4) {
      !function(e5) {
        var t3 = e5.event, n3 = e5.props, r3 = e5.refresh, o3 = e5.store, c3 = un(e5, rn);
        if ("ArrowUp" === t3.key || "ArrowDown" === t3.key) {
          var i3 = function() {
            var e6 = n3.environment.document.getElementById("".concat(n3.id, "-item-").concat(o3.getState().activeItemId));
            e6 && (e6.scrollIntoViewIfNeeded ? e6.scrollIntoViewIfNeeded(false) : e6.scrollIntoView(false));
          }, a3 = function() {
            var e6 = yt(o3.getState());
            if (null !== o3.getState().activeItemId && e6) {
              var n4 = e6.item, i4 = e6.itemInputValue, a4 = e6.itemUrl, u4 = e6.source;
              u4.onActive(cn({ event: t3, item: n4, itemInputValue: i4, itemUrl: a4, refresh: r3, source: u4, state: o3.getState() }, c3));
            }
          };
          t3.preventDefault(), false === o3.getState().isOpen && (n3.openOnFocus || Boolean(o3.getState().query)) ? nn(cn({ event: t3, props: n3, query: o3.getState().query, refresh: r3, store: o3 }, c3)).then(function() {
            o3.dispatch(t3.key, { nextActiveItemId: n3.defaultActiveItemId }), a3(), setTimeout(i3, 0);
          }) : (o3.dispatch(t3.key, {}), a3(), i3());
        } else if ("Escape" === t3.key)
          t3.preventDefault(), o3.dispatch(t3.key, null), o3.pendingRequests.cancelAll();
        else if ("Tab" === t3.key)
          o3.dispatch("blur", null), o3.pendingRequests.cancelAll();
        else if ("Enter" === t3.key) {
          if (null === o3.getState().activeItemId || o3.getState().collections.every(function(e6) {
            return 0 === e6.items.length;
          }))
            return void (n3.debug || o3.pendingRequests.cancelAll());
          t3.preventDefault();
          var u3 = yt(o3.getState()), l3 = u3.item, s3 = u3.itemInputValue, f3 = u3.itemUrl, p3 = u3.source;
          if (t3.metaKey || t3.ctrlKey)
            void 0 !== f3 && (p3.onSelect(cn({ event: t3, item: l3, itemInputValue: s3, itemUrl: f3, refresh: r3, source: p3, state: o3.getState() }, c3)), n3.navigator.navigateNewTab({ itemUrl: f3, item: l3, state: o3.getState() }));
          else if (t3.shiftKey)
            void 0 !== f3 && (p3.onSelect(cn({ event: t3, item: l3, itemInputValue: s3, itemUrl: f3, refresh: r3, source: p3, state: o3.getState() }, c3)), n3.navigator.navigateNewWindow({ itemUrl: f3, item: l3, state: o3.getState() }));
          else if (t3.altKey)
            ;
          else {
            if (void 0 !== f3)
              return p3.onSelect(cn({ event: t3, item: l3, itemInputValue: s3, itemUrl: f3, refresh: r3, source: p3, state: o3.getState() }, c3)), void n3.navigator.navigate({ itemUrl: f3, item: l3, state: o3.getState() });
            nn(cn({ event: t3, nextState: { isOpen: false }, props: n3, query: s3, refresh: r3, store: o3 }, c3)).then(function() {
              p3.onSelect(cn({ event: t3, item: l3, itemInputValue: s3, itemUrl: f3, refresh: r3, source: p3, state: o3.getState() }, c3));
            });
          }
        }
      }(hn({ event: e4, props: t2, refresh: n2, store: r2 }, o2));
    }, onFocus: i2, onBlur: ct, onClick: function(n3) {
      e3.inputElement !== t2.environment.document.activeElement || r2.getState().isOpen || i2(n3);
    } }, s2);
  }, getPanelProps: function(e3) {
    return hn({ onMouseDown: function(e4) {
      e4.preventDefault();
    }, onMouseLeave: function() {
      r2.dispatch("mouseleave", null);
    } }, e3);
  }, getListProps: function(e3) {
    return hn({ role: "listbox", "aria-labelledby": "".concat(t2.id, "-label"), id: "".concat(t2.id, "-list") }, e3);
  }, getItemProps: function(e3) {
    var c2 = e3.item, i2 = e3.source, a2 = yn(e3, mn);
    return hn({ id: "".concat(t2.id, "-item-").concat(c2.__autocomplete_id), role: "option", "aria-selected": r2.getState().activeItemId === c2.__autocomplete_id, onMouseMove: function(e4) {
      if (c2.__autocomplete_id !== r2.getState().activeItemId) {
        r2.dispatch("mousemove", c2.__autocomplete_id);
        var t3 = yt(r2.getState());
        if (null !== r2.getState().activeItemId && t3) {
          var i3 = t3.item, a3 = t3.itemInputValue, u2 = t3.itemUrl, l2 = t3.source;
          l2.onActive(hn({ event: e4, item: i3, itemInputValue: a3, itemUrl: u2, refresh: n2, source: l2, state: r2.getState() }, o2));
        }
      }
    }, onMouseDown: function(e4) {
      e4.preventDefault();
    }, onClick: function(e4) {
      var a3 = i2.getItemInputValue({ item: c2, state: r2.getState() }), u2 = i2.getItemUrl({ item: c2, state: r2.getState() });
      (u2 ? Promise.resolve() : nn(hn({ event: e4, nextState: { isOpen: false }, props: t2, query: a3, refresh: n2, store: r2 }, o2))).then(function() {
        i2.onSelect(hn({ event: e4, item: c2, itemInputValue: a3, itemUrl: u2, refresh: n2, source: i2, state: r2.getState() }, o2));
      });
    } }, a2);
  } };
}
function bn(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function gn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? bn(Object(n2), true).forEach(function(t3) {
      On(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : bn(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function On(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function Sn(e2) {
  var t2, n2, r2, o2, c2 = e2.plugins, i2 = e2.options, a2 = null === (t2 = ((null === (n2 = i2.__autocomplete_metadata) || void 0 === n2 ? void 0 : n2.userAgents) || [])[0]) || void 0 === t2 ? void 0 : t2.segment, u2 = a2 ? On({}, a2, Object.keys((null === (r2 = i2.__autocomplete_metadata) || void 0 === r2 ? void 0 : r2.options) || {})) : {};
  return { plugins: c2.map(function(e3) {
    return { name: e3.name, options: Object.keys(e3.__autocomplete_pluginOptions || []) };
  }), options: gn({ "autocomplete-core": Object.keys(i2) }, u2), ua: it.concat((null === (o2 = i2.__autocomplete_metadata) || void 0 === o2 ? void 0 : o2.userAgents) || []) };
}
function En(e2) {
  var t2, n2 = e2.state;
  return false === n2.isOpen || null === n2.activeItemId ? null : (null === (t2 = yt(n2)) || void 0 === t2 ? void 0 : t2.itemInputValue) || null;
}
function wn(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function jn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? wn(Object(n2), true).forEach(function(t3) {
      Pn(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : wn(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Pn(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
var In = function(e2, t2) {
  switch (t2.type) {
    case "setActiveItemId":
    case "mousemove":
      return jn(jn({}, e2), {}, { activeItemId: t2.payload });
    case "setQuery":
      return jn(jn({}, e2), {}, { query: t2.payload, completion: null });
    case "setCollections":
      return jn(jn({}, e2), {}, { collections: t2.payload });
    case "setIsOpen":
      return jn(jn({}, e2), {}, { isOpen: t2.payload });
    case "setStatus":
      return jn(jn({}, e2), {}, { status: t2.payload });
    case "setContext":
      return jn(jn({}, e2), {}, { context: jn(jn({}, e2.context), t2.payload) });
    case "ArrowDown":
      var n2 = jn(jn({}, e2), {}, { activeItemId: t2.payload.hasOwnProperty("nextActiveItemId") ? t2.payload.nextActiveItemId : pt(1, e2.activeItemId, rt(e2), t2.props.defaultActiveItemId) });
      return jn(jn({}, n2), {}, { completion: En({ state: n2 }) });
    case "ArrowUp":
      var r2 = jn(jn({}, e2), {}, { activeItemId: pt(-1, e2.activeItemId, rt(e2), t2.props.defaultActiveItemId) });
      return jn(jn({}, r2), {}, { completion: En({ state: r2 }) });
    case "Escape":
      return e2.isOpen ? jn(jn({}, e2), {}, { activeItemId: null, isOpen: false, completion: null }) : jn(jn({}, e2), {}, { activeItemId: null, query: "", status: "idle", collections: [] });
    case "submit":
      return jn(jn({}, e2), {}, { activeItemId: null, isOpen: false, status: "idle" });
    case "reset":
      return jn(jn({}, e2), {}, { activeItemId: true === t2.props.openOnFocus ? t2.props.defaultActiveItemId : null, status: "idle", query: "" });
    case "focus":
      return jn(jn({}, e2), {}, { activeItemId: t2.props.defaultActiveItemId, isOpen: (t2.props.openOnFocus || Boolean(e2.query)) && t2.props.shouldPanelOpen({ state: e2 }) });
    case "blur":
      return t2.props.debug ? e2 : jn(jn({}, e2), {}, { isOpen: false, activeItemId: null });
    case "mouseleave":
      return jn(jn({}, e2), {}, { activeItemId: t2.props.defaultActiveItemId });
    default:
      return ot(false, "The reducer action ".concat(JSON.stringify(t2.type), " is not supported.")), e2;
  }
};
function kn(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function Dn(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? kn(Object(n2), true).forEach(function(t3) {
      Cn(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : kn(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Cn(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function An(e2) {
  ut(e2);
  var t2 = [], n2 = function(e3, t3) {
    var n3, r3 = "undefined" != typeof window ? window : {}, o3 = e3.plugins || [];
    return At(At({ debug: false, openOnFocus: false, placeholder: "", autoFocus: false, defaultActiveItemId: null, stallThreshold: 300, environment: r3, shouldPanelOpen: function(e4) {
      return rt(e4.state) > 0;
    }, reshape: function(e4) {
      return e4.sources;
    } }, e3), {}, { id: null !== (n3 = e3.id) && void 0 !== n3 ? n3 : "autocomplete-".concat(nt++), plugins: o3, initialState: At({ activeItemId: null, query: "", completion: null, collections: [], isOpen: false, status: "idle", context: {} }, e3.initialState), onStateChange: function(t4) {
      var n4;
      null === (n4 = e3.onStateChange) || void 0 === n4 || n4.call(e3, t4), o3.forEach(function(e4) {
        var n5;
        return null === (n5 = e4.onStateChange) || void 0 === n5 ? void 0 : n5.call(e4, t4);
      });
    }, onSubmit: function(t4) {
      var n4;
      null === (n4 = e3.onSubmit) || void 0 === n4 || n4.call(e3, t4), o3.forEach(function(e4) {
        var n5;
        return null === (n5 = e4.onSubmit) || void 0 === n5 ? void 0 : n5.call(e4, t4);
      });
    }, onReset: function(t4) {
      var n4;
      null === (n4 = e3.onReset) || void 0 === n4 || n4.call(e3, t4), o3.forEach(function(e4) {
        var n5;
        return null === (n5 = e4.onReset) || void 0 === n5 ? void 0 : n5.call(e4, t4);
      });
    }, getSources: function(n4) {
      return Promise.all([].concat(kt(o3.map(function(e4) {
        return e4.getSources;
      })), [e3.getSources]).filter(Boolean).map(function(e4) {
        return vt(e4, n4);
      })).then(function(e4) {
        return tt(e4);
      }).then(function(e4) {
        return e4.map(function(e5) {
          return At(At({}, e5), {}, { onSelect: function(n5) {
            e5.onSelect(n5), t3.forEach(function(e6) {
              var t4;
              return null === (t4 = e6.onSelect) || void 0 === t4 ? void 0 : t4.call(e6, n5);
            });
          }, onActive: function(n5) {
            e5.onActive(n5), t3.forEach(function(e6) {
              var t4;
              return null === (t4 = e6.onActive) || void 0 === t4 ? void 0 : t4.call(e6, n5);
            });
          } });
        });
      });
    }, navigator: At({ navigate: function(e4) {
      var t4 = e4.itemUrl;
      r3.location.assign(t4);
    }, navigateNewTab: function(e4) {
      var t4 = e4.itemUrl, n4 = r3.open(t4, "_blank", "noopener");
      null == n4 || n4.focus();
    }, navigateNewWindow: function(e4) {
      var t4 = e4.itemUrl;
      r3.open(t4, "_blank", "noopener");
    } }, e3.navigator) });
  }(e2, t2), r2 = wt(In, n2, function(e3) {
    var t3 = e3.prevState, r3 = e3.state;
    n2.onStateChange(Dn({ prevState: t3, state: r3, refresh: i2 }, o2));
  }), o2 = function(e3) {
    var t3 = e3.store;
    return { setActiveItemId: function(e4) {
      t3.dispatch("setActiveItemId", e4);
    }, setQuery: function(e4) {
      t3.dispatch("setQuery", e4);
    }, setCollections: function(e4) {
      var n3 = 0, r3 = e4.map(function(e5) {
        return Pt(Pt({}, e5), {}, { items: tt(e5.items).map(function(e6) {
          return Pt(Pt({}, e6), {}, { __autocomplete_id: n3++ });
        }) });
      });
      t3.dispatch("setCollections", r3);
    }, setIsOpen: function(e4) {
      t3.dispatch("setIsOpen", e4);
    }, setStatus: function(e4) {
      t3.dispatch("setStatus", e4);
    }, setContext: function(e4) {
      t3.dispatch("setContext", e4);
    } };
  }({ store: r2 }), c2 = _n(Dn({ props: n2, refresh: i2, store: r2 }, o2));
  function i2() {
    return nn(Dn({ event: new Event("input"), nextState: { isOpen: r2.getState().isOpen }, props: n2, query: r2.getState().query, refresh: i2, store: r2 }, o2));
  }
  return n2.plugins.forEach(function(e3) {
    var n3;
    return null === (n3 = e3.subscribe) || void 0 === n3 ? void 0 : n3.call(e3, Dn(Dn({}, o2), {}, { refresh: i2, onSelect: function(e4) {
      t2.push({ onSelect: e4 });
    }, onActive: function(e4) {
      t2.push({ onActive: e4 });
    } }));
  }), function(e3) {
    var t3, n3, r3 = e3.metadata, o3 = e3.environment;
    if (null === (t3 = o3.navigator) || void 0 === t3 || null === (n3 = t3.userAgent) || void 0 === n3 ? void 0 : n3.includes("Algolia Crawler")) {
      var c3 = o3.document.createElement("meta"), i3 = o3.document.querySelector("head");
      c3.name = "algolia:metadata", setTimeout(function() {
        c3.content = JSON.stringify(r3), i3.appendChild(c3);
      }, 0);
    }
  }({ metadata: Sn({ plugins: n2.plugins, options: e2 }), environment: n2.environment }), Dn(Dn({ refresh: i2 }, c2), o2);
}
function xn(e2) {
  var t2 = e2.translations, n2 = (void 0 === t2 ? {} : t2).searchByText, r2 = void 0 === n2 ? "Search by" : n2;
  return Be.createElement("a", { href: "https://www.algolia.com/ref/docsearch/?utm_source=".concat(window.location.hostname, "&utm_medium=referral&utm_content=powered_by&utm_campaign=docsearch"), target: "_blank", rel: "noopener noreferrer" }, Be.createElement("span", { className: "DocSearch-Label" }, r2), Be.createElement("svg", { width: "77", height: "19", "aria-label": "Algolia", role: "img" }, Be.createElement("path", { d: "M2.5067 0h14.0245c1.384.001 2.5058 1.1205 2.5068 2.5017V16.5c-.0014 1.3808-1.1232 2.4995-2.5068 2.5H2.5067C1.1232 18.9995.0014 17.8808 0 16.5V2.4958A2.495 2.495 0 01.735.7294 2.505 2.505 0 012.5068 0zM37.95 15.0695c-3.7068.0168-3.7068-2.986-3.7068-3.4634L34.2372.3576 36.498 0v11.1794c0 .2715 0 1.9889 1.452 1.994v1.8961zm-9.1666-1.8388c.694 0 1.2086-.0397 1.5678-.1088v-2.2934a5.3639 5.3639 0 00-1.3303-.1679 4.8283 4.8283 0 00-.758.0582 2.2845 2.2845 0 00-.688.2024c-.2029.0979-.371.2362-.4919.4142-.1268.1788-.185.2826-.185.5533 0 .5297.185.8359.5205 1.0375.3355.2016.7928.3053 1.365.3053v-.0008zm-.1969-8.1817c.7463 0 1.3768.092 1.8856.2767.5088.1838.9195.4428 1.2204.7717.3068.334.5147.7777.6423 1.251.1327.4723.196.991.196 1.5603v5.798c-.5235.1036-1.05.192-1.5787.2649-.7048.1037-1.4976.156-2.3774.156-.5832 0-1.1215-.0582-1.6016-.167a3.385 3.385 0 01-1.2432-.5364 2.6034 2.6034 0 01-.8037-.9565c-.191-.3922-.29-.9447-.29-1.5208 0-.5533.11-.905.3246-1.2863a2.7351 2.7351 0 01.8849-.9329c.376-.242.8029-.415 1.2948-.5187a7.4517 7.4517 0 011.5381-.156 7.1162 7.1162 0 011.6667.2024V8.886c0-.259-.0296-.5061-.093-.7372a1.5847 1.5847 0 00-.3245-.6158 1.5079 1.5079 0 00-.6119-.4158 2.6788 2.6788 0 00-.966-.173c-.5206 0-.9948.0634-1.4283.1384a6.5481 6.5481 0 00-1.065.259l-.2712-1.849c.2831-.0986.7048-.1964 1.2491-.2943a9.2979 9.2979 0 011.752-.1501v.0008zm44.6597 8.1193c.6947 0 1.2086-.0405 1.567-.1097v-2.2942a5.3743 5.3743 0 00-1.3303-.1679c-.2485 0-.503.0177-.7573.0582a2.2853 2.2853 0 00-.688.2024 1.2333 1.2333 0 00-.4918.4142c-.1268.1788-.1843.2826-.1843.5533 0 .5297.1843.8359.5198 1.0375.3414.2066.7927.3053 1.365.3053v.0009zm-.191-8.1767c.7463 0 1.3768.0912 1.8856.2759.5087.1847.9195.4436 1.2204.7717.3.329.5147.7786.6414 1.251a5.7248 5.7248 0 01.197 1.562v5.7972c-.3466.0742-.874.1602-1.5788.2648-.7049.1038-1.4976.1552-2.3774.1552-.5832 0-1.1215-.0573-1.6016-.167a3.385 3.385 0 01-1.2432-.5356 2.6034 2.6034 0 01-.8038-.9565c-.191-.3922-.2898-.9447-.2898-1.5216 0-.5533.1098-.905.3245-1.2854a2.7373 2.7373 0 01.8849-.9338c.376-.2412.8029-.4141 1.2947-.5178a7.4545 7.4545 0 012.325-.1097c.2781.0287.5672.081.879.156v-.3686a2.7781 2.7781 0 00-.092-.738 1.5788 1.5788 0 00-.3246-.6166 1.5079 1.5079 0 00-.612-.415 2.6797 2.6797 0 00-.966-.1729c-.5205 0-.9947.0633-1.4282.1384a6.5608 6.5608 0 00-1.065.259l-.2712-1.8498c.283-.0979.7048-.1957 1.2491-.2935a9.8597 9.8597 0 011.752-.1494zm-6.79-1.072c-.7576.001-1.373-.6103-1.3759-1.3664 0-.755.6128-1.3664 1.376-1.3664.764 0 1.3775.6115 1.3775 1.3664s-.6195 1.3664-1.3776 1.3664zm1.1393 11.1507h-2.2726V5.3409l2.2734-.3568v10.0845l-.0008.0017zm-3.984 0c-3.707.0168-3.707-2.986-3.707-3.4642L59.7069.3576 61.9685 0v11.1794c0 .2715 0 1.9889 1.452 1.994V15.0703zm-7.3512-4.979c0-.975-.2138-1.7873-.6305-2.3516-.4167-.571-.9998-.852-1.747-.852-.7454 0-1.3302.281-1.7452.852-.4166.5702-.6195 1.3765-.6195 2.3516 0 .9851.208 1.6473.6254 2.2183.4158.576.9998.8587 1.7461.8587.7454 0 1.3303-.2885 1.747-.8595.4158-.5761.6237-1.2315.6237-2.2184v.0009zm2.3132-.006c0 .7609-.1099 1.3361-.3356 1.9654a4.654 4.654 0 01-.9533 1.6076A4.214 4.214 0 0155.613 14.69c-.579.2412-1.4697.3795-1.9143.3795-.4462-.005-1.3303-.1324-1.9033-.3795a4.307 4.307 0 01-1.474-1.0316c-.4115-.4445-.7293-.9801-.9609-1.6076a5.3423 5.3423 0 01-.3465-1.9653c0-.7608.104-1.493.3356-2.1155a4.683 4.683 0 01.9719-1.5958 4.3383 4.3383 0 011.479-1.0257c.5739-.242 1.2043-.3567 1.8864-.3567.6829 0 1.3125.1197 1.8906.3567a4.1245 4.1245 0 011.4816 1.0257 4.7587 4.7587 0 01.9592 1.5958c.2426.6225.3643 1.3547.3643 2.1155zm-17.0198 0c0 .9448.208 1.9932.6238 2.431.4166.4386.955.6579 1.6142.6579.3584 0 .6998-.0523 1.0176-.1502.3186-.0978.5721-.2134.775-.3517V7.0784a8.8706 8.8706 0 00-1.4926-.1906c-.8206-.0236-1.4452.312-1.8847.8468-.4335.5365-.6533 1.476-.6533 2.3516v-.0008zm6.2863 4.4485c0 1.5385-.3938 2.662-1.1866 3.3773-.791.7136-2.0005 1.0712-3.6308 1.0712-.5958 0-1.834-.1156-2.8228-.334l.3643-1.7865c.8282.173 1.9202.2193 2.4932.2193.9077 0 1.555-.1847 1.943-.5533.388-.3686.578-.916.578-1.643v-.3687a6.8289 6.8289 0 01-.8848.3349c-.3634.1096-.786.167-1.261.167-.6246 0-1.1917-.0979-1.7055-.2944a3.5554 3.5554 0 01-1.3244-.8645c-.3642-.3796-.6541-.8579-.8561-1.4289-.2028-.571-.3068-1.59-.3068-2.339 0-.7034.1099-1.5856.3245-2.1735.2198-.5871.5316-1.0949.9542-1.515.4167-.42.9255-.743 1.5213-.98a5.5923 5.5923 0 012.052-.3855c.7353 0 1.4114.092 2.0707.2024.6592.1088 1.2204.2236 1.6776.35v8.945-.0008zM11.5026 4.2418v-.6511c-.0005-.4553-.3704-.8241-.8266-.8241H8.749c-.4561 0-.826.3688-.8265.824v.669c0 .0742.0693.1264.1445.1096a6.0346 6.0346 0 011.6768-.2362 6.125 6.125 0 011.6202.2185.1116.1116 0 00.1386-.1097zm-5.2806.852l-.3296-.3282a.8266.8266 0 00-1.168 0l-.393.3922a.8199.8199 0 000 1.164l.3237.323c.0524.0515.1268.0397.1733-.0117.191-.259.3989-.507.6305-.7372.2374-.2362.48-.4437.7462-.6335.0575-.0354.0634-.1155.017-.1687zm3.5159 2.069v2.818c0 .081.0879.1392.1622.0987l2.5102-1.2964c.0574-.0287.0752-.0987.0464-.1552a3.1237 3.1237 0 00-2.603-1.574c-.0575 0-.115.0456-.115.1097l-.0008-.0009zm.0008 6.789c-2.0933.0005-3.7915-1.6912-3.7947-3.7804C5.9468 8.0821 7.6452 6.39 9.7387 6.391c2.0932-.0005 3.7911 1.6914 3.794 3.7804a3.7783 3.7783 0 01-1.1124 2.675 3.7936 3.7936 0 01-2.6824 1.1054h.0008zM9.738 4.8002c-1.9218 0-3.6975 1.0232-4.6584 2.6841a5.359 5.359 0 000 5.3683c.9609 1.661 2.7366 2.6841 4.6584 2.6841a5.3891 5.3891 0 003.8073-1.5725 5.3675 5.3675 0 001.578-3.7987 5.3574 5.3574 0 00-1.5771-3.797A5.379 5.379 0 009.7387 4.801l-.0008-.0008z", fill: "currentColor", fillRule: "evenodd" })));
}
function Nn(e2) {
  return Be.createElement("svg", { width: "15", height: "15", "aria-label": e2.ariaLabel, role: "img" }, Be.createElement("g", { fill: "none", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "1.2" }, e2.children));
}
function Tn(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = n2.selectText, o2 = void 0 === r2 ? "to select" : r2, c2 = n2.selectKeyAriaLabel, i2 = void 0 === c2 ? "Enter key" : c2, a2 = n2.navigateText, u2 = void 0 === a2 ? "to navigate" : a2, l2 = n2.navigateUpKeyAriaLabel, s2 = void 0 === l2 ? "Arrow up" : l2, f2 = n2.navigateDownKeyAriaLabel, p2 = void 0 === f2 ? "Arrow down" : f2, m2 = n2.closeText, d2 = void 0 === m2 ? "to close" : m2, h2 = n2.closeKeyAriaLabel, v2 = void 0 === h2 ? "Escape key" : h2, y2 = n2.searchByText, _2 = void 0 === y2 ? "Search by" : y2;
  return Be.createElement(Be.Fragment, null, Be.createElement("div", { className: "DocSearch-Logo" }, Be.createElement(xn, { translations: { searchByText: _2 } })), Be.createElement("ul", { className: "DocSearch-Commands" }, Be.createElement("li", null, Be.createElement("kbd", { className: "DocSearch-Commands-Key" }, Be.createElement(Nn, { ariaLabel: i2 }, Be.createElement("path", { d: "M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3" }))), Be.createElement("span", { className: "DocSearch-Label" }, o2)), Be.createElement("li", null, Be.createElement("kbd", { className: "DocSearch-Commands-Key" }, Be.createElement(Nn, { ariaLabel: p2 }, Be.createElement("path", { d: "M7.5 3.5v8M10.5 8.5l-3 3-3-3" }))), Be.createElement("kbd", { className: "DocSearch-Commands-Key" }, Be.createElement(Nn, { ariaLabel: s2 }, Be.createElement("path", { d: "M7.5 11.5v-8M10.5 6.5l-3-3-3 3" }))), Be.createElement("span", { className: "DocSearch-Label" }, u2)), Be.createElement("li", null, Be.createElement("kbd", { className: "DocSearch-Commands-Key" }, Be.createElement(Nn, { ariaLabel: v2 }, Be.createElement("path", { d: "M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956" }))), Be.createElement("span", { className: "DocSearch-Label" }, d2))));
}
function Rn(e2) {
  var t2 = e2.hit, n2 = e2.children;
  return Be.createElement("a", { href: t2.url }, n2);
}
function Ln() {
  return Be.createElement("svg", { viewBox: "0 0 38 38", stroke: "currentColor", strokeOpacity: ".5" }, Be.createElement("g", { fill: "none", fillRule: "evenodd" }, Be.createElement("g", { transform: "translate(1 1)", strokeWidth: "2" }, Be.createElement("circle", { strokeOpacity: ".3", cx: "18", cy: "18", r: "18" }), Be.createElement("path", { d: "M36 18c0-9.94-8.06-18-18-18" }, Be.createElement("animateTransform", { attributeName: "transform", type: "rotate", from: "0 18 18", to: "360 18 18", dur: "1s", repeatCount: "indefinite" })))));
}
function qn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("g", { stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }, Be.createElement("path", { d: "M3.18 6.6a8.23 8.23 0 1112.93 9.94h0a8.23 8.23 0 01-11.63 0" }), Be.createElement("path", { d: "M6.44 7.25H2.55V3.36M10.45 6v5.6M10.45 11.6L13 13" })));
}
function Mn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }));
}
function Hn() {
  return Be.createElement("svg", { className: "DocSearch-Hit-Select-Icon", width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("g", { stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }, Be.createElement("path", { d: "M18 3v4c0 2-2 4-4 4H2" }), Be.createElement("path", { d: "M8 17l-6-6 6-6" })));
}
var Un = function() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M17 6v12c0 .52-.2 1-1 1H4c-.7 0-1-.33-1-1V2c0-.55.42-1 1-1h8l5 5zM14 8h-3.13c-.51 0-.87-.34-.87-.87V4", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinejoin: "round" }));
};
function Fn(e2) {
  switch (e2.type) {
    case "lvl1":
      return Be.createElement(Un, null);
    case "content":
      return Be.createElement(Vn, null);
    default:
      return Be.createElement(Bn, null);
  }
}
function Bn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M13 13h4-4V8H7v5h6v4-4H7V8H3h4V3v5h6V3v5h4-4v5zm-6 0v4-4H3h4z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }));
}
function Vn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M17 5H3h14zm0 5H3h14zm0 5H3h14z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinejoin: "round" }));
}
function zn() {
  return Be.createElement("svg", { width: "20", height: "20", viewBox: "0 0 20 20" }, Be.createElement("path", { d: "M10 14.2L5 17l1-5.6-4-4 5.5-.7 2.5-5 2.5 5 5.6.8-4 4 .9 5.5z", stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinejoin: "round" }));
}
function Wn() {
  return Be.createElement("svg", { width: "40", height: "40", viewBox: "0 0 20 20", fill: "none", fillRule: "evenodd", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round" }, Be.createElement("path", { d: "M19 4.8a16 16 0 00-2-1.2m-3.3-1.2A16 16 0 001.1 4.7M16.7 8a12 12 0 00-2.8-1.4M10 6a12 12 0 00-6.7 2M12.3 14.7a4 4 0 00-4.5 0M14.5 11.4A8 8 0 0010 10M3 16L18 2M10 18h0" }));
}
function Kn() {
  return Be.createElement("svg", { width: "40", height: "40", viewBox: "0 0 20 20", fill: "none", fillRule: "evenodd", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round" }, Be.createElement("path", { d: "M15.5 4.8c2 3 1.7 7-1 9.7h0l4.3 4.3-4.3-4.3a7.8 7.8 0 01-9.8 1m-2.2-2.2A7.8 7.8 0 0113.2 2.4M2 18L18 2" }));
}
function Jn(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = n2.titleText, o2 = void 0 === r2 ? "Unable to fetch results" : r2, c2 = n2.helpText, i2 = void 0 === c2 ? "You might want to check your network connection." : c2;
  return Be.createElement("div", { className: "DocSearch-ErrorScreen" }, Be.createElement("div", { className: "DocSearch-Screen-Icon" }, Be.createElement(Wn, null)), Be.createElement("p", { className: "DocSearch-Title" }, o2), Be.createElement("p", { className: "DocSearch-Help" }, i2));
}
var $n = ["translations"];
function Qn(e2) {
  return function(e3) {
    if (Array.isArray(e3))
      return Yn(e3);
  }(e2) || function(e3) {
    if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
      return Array.from(e3);
  }(e2) || function(e3, t2) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Yn(e3, t2);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Yn(e3, t2);
  }(e2) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Yn(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Gn(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function Zn(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = Gn(e2, $n), o2 = n2.noResultsText, c2 = void 0 === o2 ? "No results for" : o2, i2 = n2.suggestedQueryText, a2 = void 0 === i2 ? "Try searching for" : i2, u2 = n2.reportMissingResultsText, l2 = void 0 === u2 ? "Believe this query should return results?" : u2, s2 = n2.reportMissingResultsLinkText, f2 = void 0 === s2 ? "Let us know." : s2, p2 = r2.state.context.searchSuggestions;
  return Be.createElement("div", { className: "DocSearch-NoResults" }, Be.createElement("div", { className: "DocSearch-Screen-Icon" }, Be.createElement(Kn, null)), Be.createElement("p", { className: "DocSearch-Title" }, c2, ' "', Be.createElement("strong", null, r2.state.query), '"'), p2 && p2.length > 0 && Be.createElement("div", { className: "DocSearch-NoResults-Prefill-List" }, Be.createElement("p", { className: "DocSearch-Help" }, a2, ":"), Be.createElement("ul", null, p2.slice(0, 3).reduce(function(e3, t3) {
    return [].concat(Qn(e3), [Be.createElement("li", { key: t3 }, Be.createElement("button", { className: "DocSearch-Prefill", key: t3, type: "button", onClick: function() {
      r2.setQuery(t3.toLowerCase() + " "), r2.refresh(), r2.inputRef.current.focus();
    } }, t3))]);
  }, []))), r2.getMissingResultsUrl && Be.createElement("p", { className: "DocSearch-Help" }, "".concat(l2, " "), Be.createElement("a", { href: r2.getMissingResultsUrl({ query: r2.state.query }), target: "_blank", rel: "noopener noreferrer" }, f2)));
}
var Xn = ["hit", "attribute", "tagName"];
function er(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function tr(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? er(Object(n2), true).forEach(function(t3) {
      nr(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : er(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function nr(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function rr(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function or(e2, t2) {
  return t2.split(".").reduce(function(e3, t3) {
    return null != e3 && e3[t3] ? e3[t3] : null;
  }, e2);
}
function cr(e2) {
  var t2 = e2.hit, n2 = e2.attribute, r2 = e2.tagName;
  return g(void 0 === r2 ? "span" : r2, tr(tr({}, rr(e2, Xn)), {}, { dangerouslySetInnerHTML: { __html: or(t2, "_snippetResult.".concat(n2, ".value")) || or(t2, n2) } }));
}
function ir(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return ar(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return ar(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function ar(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function ur() {
  return ur = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, ur.apply(this, arguments);
}
function lr(e2) {
  return e2.collection && 0 !== e2.collection.items.length ? Be.createElement("section", { className: "DocSearch-Hits" }, Be.createElement("div", { className: "DocSearch-Hit-source" }, e2.title), Be.createElement("ul", e2.getListProps(), e2.collection.items.map(function(t2, n2) {
    return Be.createElement(sr, ur({ key: [e2.title, t2.objectID].join(":"), item: t2, index: n2 }, e2));
  }))) : null;
}
function sr(e2) {
  var t2 = e2.item, n2 = e2.index, r2 = e2.renderIcon, o2 = e2.renderAction, c2 = e2.getItemProps, i2 = e2.onItemClick, a2 = e2.collection, u2 = e2.hitComponent, l2 = ir(Be.useState(false), 2), s2 = l2[0], f2 = l2[1], p2 = ir(Be.useState(false), 2), m2 = p2[0], d2 = p2[1], h2 = Be.useRef(null), v2 = u2;
  return Be.createElement("li", ur({ className: ["DocSearch-Hit", t2.__docsearch_parent && "DocSearch-Hit--Child", s2 && "DocSearch-Hit--deleting", m2 && "DocSearch-Hit--favoriting"].filter(Boolean).join(" "), onTransitionEnd: function() {
    h2.current && h2.current();
  } }, c2({ item: t2, source: a2.source, onClick: function() {
    i2(t2);
  } })), Be.createElement(v2, { hit: t2 }, Be.createElement("div", { className: "DocSearch-Hit-Container" }, r2({ item: t2, index: n2 }), t2.hierarchy[t2.type] && "lvl1" === t2.type && Be.createElement("div", { className: "DocSearch-Hit-content-wrapper" }, Be.createElement(cr, { className: "DocSearch-Hit-title", hit: t2, attribute: "hierarchy.lvl1" }), t2.content && Be.createElement(cr, { className: "DocSearch-Hit-path", hit: t2, attribute: "content" })), t2.hierarchy[t2.type] && ("lvl2" === t2.type || "lvl3" === t2.type || "lvl4" === t2.type || "lvl5" === t2.type || "lvl6" === t2.type) && Be.createElement("div", { className: "DocSearch-Hit-content-wrapper" }, Be.createElement(cr, { className: "DocSearch-Hit-title", hit: t2, attribute: "hierarchy.".concat(t2.type) }), Be.createElement(cr, { className: "DocSearch-Hit-path", hit: t2, attribute: "hierarchy.lvl1" })), "content" === t2.type && Be.createElement("div", { className: "DocSearch-Hit-content-wrapper" }, Be.createElement(cr, { className: "DocSearch-Hit-title", hit: t2, attribute: "content" }), Be.createElement(cr, { className: "DocSearch-Hit-path", hit: t2, attribute: "hierarchy.lvl1" })), o2({ item: t2, runDeleteTransition: function(e3) {
    f2(true), h2.current = e3;
  }, runFavoriteTransition: function(e3) {
    d2(true), h2.current = e3;
  } }))));
}
function fr(e2, t2) {
  return e2.reduce(function(e3, n2) {
    var r2 = t2(n2);
    return e3.hasOwnProperty(r2) || (e3[r2] = []), e3[r2].length < 5 && e3[r2].push(n2), e3;
  }, {});
}
function pr(e2) {
  return e2;
}
function mr() {
}
var dr = /(<mark>|<\/mark>)/g, hr = RegExp(dr.source);
function vr(e2) {
  var t2, n2, r2, o2, c2, i2 = e2;
  if (!i2.__docsearch_parent && !e2._highlightResult)
    return e2.hierarchy.lvl0;
  var a2 = ((i2.__docsearch_parent ? null === (t2 = i2.__docsearch_parent) || void 0 === t2 || null === (n2 = t2._highlightResult) || void 0 === n2 || null === (r2 = n2.hierarchy) || void 0 === r2 ? void 0 : r2.lvl0 : null === (o2 = e2._highlightResult) || void 0 === o2 || null === (c2 = o2.hierarchy) || void 0 === c2 ? void 0 : c2.lvl0) || {}).value;
  return a2 && hr.test(a2) ? a2.replace(dr, "") : a2;
}
function yr() {
  return yr = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, yr.apply(this, arguments);
}
function _r(e2) {
  return Be.createElement("div", { className: "DocSearch-Dropdown-Container" }, e2.state.collections.map(function(t2) {
    if (0 === t2.items.length)
      return null;
    var n2 = vr(t2.items[0]);
    return Be.createElement(lr, yr({}, e2, { key: t2.source.sourceId, title: n2, collection: t2, renderIcon: function(e3) {
      var n3, r2 = e3.item, o2 = e3.index;
      return Be.createElement(Be.Fragment, null, r2.__docsearch_parent && Be.createElement("svg", { className: "DocSearch-Hit-Tree", viewBox: "0 0 24 54" }, Be.createElement("g", { stroke: "currentColor", fill: "none", fillRule: "evenodd", strokeLinecap: "round", strokeLinejoin: "round" }, r2.__docsearch_parent !== (null === (n3 = t2.items[o2 + 1]) || void 0 === n3 ? void 0 : n3.__docsearch_parent) ? Be.createElement("path", { d: "M8 6v21M20 27H8.3" }) : Be.createElement("path", { d: "M8 6v42M20 27H8.3" }))), Be.createElement("div", { className: "DocSearch-Hit-icon" }, Be.createElement(Fn, { type: r2.type })));
    }, renderAction: function() {
      return Be.createElement("div", { className: "DocSearch-Hit-action" }, Be.createElement(Hn, null));
    } }));
  }), e2.resultsFooterComponent && Be.createElement("section", { className: "DocSearch-HitsFooter" }, Be.createElement(e2.resultsFooterComponent, { state: e2.state })));
}
var br = ["translations"];
function gr() {
  return gr = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, gr.apply(this, arguments);
}
function Or(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function Sr(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = Or(e2, br), o2 = n2.recentSearchesTitle, c2 = void 0 === o2 ? "Recent" : o2, i2 = n2.noRecentSearchesText, a2 = void 0 === i2 ? "No recent searches" : i2, u2 = n2.saveRecentSearchButtonTitle, l2 = void 0 === u2 ? "Save this search" : u2, s2 = n2.removeRecentSearchButtonTitle, f2 = void 0 === s2 ? "Remove this search from history" : s2, p2 = n2.favoriteSearchesTitle, m2 = void 0 === p2 ? "Favorite" : p2, d2 = n2.removeFavoriteSearchButtonTitle, h2 = void 0 === d2 ? "Remove this search from favorites" : d2;
  return "idle" === r2.state.status && false === r2.hasCollections ? r2.disableUserPersonalization ? null : Be.createElement("div", { className: "DocSearch-StartScreen" }, Be.createElement("p", { className: "DocSearch-Help" }, a2)) : false === r2.hasCollections ? null : Be.createElement("div", { className: "DocSearch-Dropdown-Container" }, Be.createElement(lr, gr({}, r2, { title: c2, collection: r2.state.collections[0], renderIcon: function() {
    return Be.createElement("div", { className: "DocSearch-Hit-icon" }, Be.createElement(qn, null));
  }, renderAction: function(e3) {
    var t3 = e3.item, n3 = e3.runFavoriteTransition, o3 = e3.runDeleteTransition;
    return Be.createElement(Be.Fragment, null, Be.createElement("div", { className: "DocSearch-Hit-action" }, Be.createElement("button", { className: "DocSearch-Hit-action-button", title: l2, type: "submit", onClick: function(e4) {
      e4.preventDefault(), e4.stopPropagation(), n3(function() {
        r2.favoriteSearches.add(t3), r2.recentSearches.remove(t3), r2.refresh();
      });
    } }, Be.createElement(zn, null))), Be.createElement("div", { className: "DocSearch-Hit-action" }, Be.createElement("button", { className: "DocSearch-Hit-action-button", title: f2, type: "submit", onClick: function(e4) {
      e4.preventDefault(), e4.stopPropagation(), o3(function() {
        r2.recentSearches.remove(t3), r2.refresh();
      });
    } }, Be.createElement(Mn, null))));
  } })), Be.createElement(lr, gr({}, r2, { title: m2, collection: r2.state.collections[1], renderIcon: function() {
    return Be.createElement("div", { className: "DocSearch-Hit-icon" }, Be.createElement(zn, null));
  }, renderAction: function(e3) {
    var t3 = e3.item, n3 = e3.runDeleteTransition;
    return Be.createElement("div", { className: "DocSearch-Hit-action" }, Be.createElement("button", { className: "DocSearch-Hit-action-button", title: h2, type: "submit", onClick: function(e4) {
      e4.preventDefault(), e4.stopPropagation(), n3(function() {
        r2.favoriteSearches.remove(t3), r2.refresh();
      });
    } }, Be.createElement(Mn, null)));
  } })));
}
var Er = ["translations"];
function wr() {
  return wr = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, wr.apply(this, arguments);
}
function jr(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
var Pr = Be.memo(function(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = jr(e2, Er);
  if ("error" === r2.state.status)
    return Be.createElement(Jn, { translations: null == n2 ? void 0 : n2.errorScreen });
  var o2 = r2.state.collections.some(function(e3) {
    return e3.items.length > 0;
  });
  return r2.state.query ? false === o2 ? Be.createElement(Zn, wr({}, r2, { translations: null == n2 ? void 0 : n2.noResultsScreen })) : Be.createElement(_r, r2) : Be.createElement(Sr, wr({}, r2, { hasCollections: o2, translations: null == n2 ? void 0 : n2.startScreen }));
}, function(e2, t2) {
  return "loading" === t2.state.status || "stalled" === t2.state.status;
}), Ir = ["translations"];
function kr() {
  return kr = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, kr.apply(this, arguments);
}
function Dr(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function Cr(e2) {
  var t2 = e2.translations, n2 = void 0 === t2 ? {} : t2, r2 = Dr(e2, Ir), o2 = n2.resetButtonTitle, c2 = void 0 === o2 ? "Clear the query" : o2, i2 = n2.resetButtonAriaLabel, a2 = void 0 === i2 ? "Clear the query" : i2, u2 = n2.cancelButtonText, l2 = void 0 === u2 ? "Cancel" : u2, s2 = n2.cancelButtonAriaLabel, f2 = void 0 === s2 ? "Cancel" : s2, p2 = r2.getFormProps({ inputElement: r2.inputRef.current }).onReset;
  return Be.useEffect(function() {
    r2.autoFocus && r2.inputRef.current && r2.inputRef.current.focus();
  }, [r2.autoFocus, r2.inputRef]), Be.useEffect(function() {
    r2.isFromSelection && r2.inputRef.current && r2.inputRef.current.select();
  }, [r2.isFromSelection, r2.inputRef]), Be.createElement(Be.Fragment, null, Be.createElement("form", { className: "DocSearch-Form", onSubmit: function(e3) {
    e3.preventDefault();
  }, onReset: p2 }, Be.createElement("label", kr({ className: "DocSearch-MagnifierLabel" }, r2.getLabelProps()), Be.createElement(ze, null)), Be.createElement("div", { className: "DocSearch-LoadingIndicator" }, Be.createElement(Ln, null)), Be.createElement("input", kr({ className: "DocSearch-Input", ref: r2.inputRef }, r2.getInputProps({ inputElement: r2.inputRef.current, autoFocus: r2.autoFocus, maxLength: 64 }))), Be.createElement("button", { type: "reset", title: c2, className: "DocSearch-Reset", "aria-label": a2, hidden: !r2.state.query }, Be.createElement(Mn, null))), Be.createElement("button", { className: "DocSearch-Cancel", type: "reset", "aria-label": f2, onClick: r2.onClose }, l2));
}
var Ar = ["_highlightResult", "_snippetResult"];
function xr(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function Nr(e2) {
  return false === function() {
    var e3 = "__TEST_KEY__";
    try {
      return localStorage.setItem(e3, ""), localStorage.removeItem(e3), true;
    } catch (e4) {
      return false;
    }
  }() ? { setItem: function() {
  }, getItem: function() {
    return [];
  } } : { setItem: function(t2) {
    return window.localStorage.setItem(e2, JSON.stringify(t2));
  }, getItem: function() {
    var t2 = window.localStorage.getItem(e2);
    return t2 ? JSON.parse(t2) : [];
  } };
}
function Tr(e2) {
  var t2 = e2.key, n2 = e2.limit, r2 = void 0 === n2 ? 5 : n2, o2 = Nr(t2), c2 = o2.getItem().slice(0, r2);
  return { add: function(e3) {
    var t3 = e3, n3 = (t3._highlightResult, t3._snippetResult, xr(t3, Ar)), i2 = c2.findIndex(function(e4) {
      return e4.objectID === n3.objectID;
    });
    i2 > -1 && c2.splice(i2, 1), c2.unshift(n3), c2 = c2.slice(0, r2), o2.setItem(c2);
  }, remove: function(e3) {
    c2 = c2.filter(function(t3) {
      return t3.objectID !== e3.objectID;
    }), o2.setItem(c2);
  }, getAll: function() {
    return c2;
  } };
}
var Rr = ["facetName", "facetQuery"];
function Lr(e2) {
  var t2, n2 = "algoliasearch-client-js-".concat(e2.key), r2 = function() {
    return void 0 === t2 && (t2 = e2.localStorage || window.localStorage), t2;
  }, o2 = function() {
    return JSON.parse(r2().getItem(n2) || "{}");
  };
  return { get: function(e3, t3) {
    var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { miss: function() {
      return Promise.resolve();
    } };
    return Promise.resolve().then(function() {
      var n4 = JSON.stringify(e3), r3 = o2()[n4];
      return Promise.all([r3 || t3(), void 0 !== r3]);
    }).then(function(e4) {
      var t4 = i$1(e4, 2), r3 = t4[0], o3 = t4[1];
      return Promise.all([r3, o3 || n3.miss(r3)]);
    }).then(function(e4) {
      return i$1(e4, 1)[0];
    });
  }, set: function(e3, t3) {
    return Promise.resolve().then(function() {
      var c2 = o2();
      return c2[JSON.stringify(e3)] = t3, r2().setItem(n2, JSON.stringify(c2)), t3;
    });
  }, delete: function(e3) {
    return Promise.resolve().then(function() {
      var t3 = o2();
      delete t3[JSON.stringify(e3)], r2().setItem(n2, JSON.stringify(t3));
    });
  }, clear: function() {
    return Promise.resolve().then(function() {
      r2().removeItem(n2);
    });
  } };
}
function qr(e2) {
  var t2 = a$1(e2.caches), n2 = t2.shift();
  return void 0 === n2 ? { get: function(e3, t3) {
    var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { miss: function() {
      return Promise.resolve();
    } };
    return t3().then(function(e4) {
      return Promise.all([e4, n3.miss(e4)]);
    }).then(function(e4) {
      return i$1(e4, 1)[0];
    });
  }, set: function(e3, t3) {
    return Promise.resolve(t3);
  }, delete: function(e3) {
    return Promise.resolve();
  }, clear: function() {
    return Promise.resolve();
  } } : { get: function(e3, r2) {
    var o2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { miss: function() {
      return Promise.resolve();
    } };
    return n2.get(e3, r2, o2).catch(function() {
      return qr({ caches: t2 }).get(e3, r2, o2);
    });
  }, set: function(e3, r2) {
    return n2.set(e3, r2).catch(function() {
      return qr({ caches: t2 }).set(e3, r2);
    });
  }, delete: function(e3) {
    return n2.delete(e3).catch(function() {
      return qr({ caches: t2 }).delete(e3);
    });
  }, clear: function() {
    return n2.clear().catch(function() {
      return qr({ caches: t2 }).clear();
    });
  } };
}
function Mr() {
  var e2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { serializable: true }, t2 = {};
  return { get: function(n2, r2) {
    var o2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : { miss: function() {
      return Promise.resolve();
    } }, c2 = JSON.stringify(n2);
    if (c2 in t2)
      return Promise.resolve(e2.serializable ? JSON.parse(t2[c2]) : t2[c2]);
    var i2 = r2(), a2 = o2 && o2.miss || function() {
      return Promise.resolve();
    };
    return i2.then(function(e3) {
      return a2(e3);
    }).then(function() {
      return i2;
    });
  }, set: function(n2, r2) {
    return t2[JSON.stringify(n2)] = e2.serializable ? JSON.stringify(r2) : r2, Promise.resolve(r2);
  }, delete: function(e3) {
    return delete t2[JSON.stringify(e3)], Promise.resolve();
  }, clear: function() {
    return t2 = {}, Promise.resolve();
  } };
}
function Hr(e2) {
  for (var t2 = e2.length - 1; t2 > 0; t2--) {
    var n2 = Math.floor(Math.random() * (t2 + 1)), r2 = e2[t2];
    e2[t2] = e2[n2], e2[n2] = r2;
  }
  return e2;
}
function Ur(e2, t2) {
  return t2 ? (Object.keys(t2).forEach(function(n2) {
    e2[n2] = t2[n2](e2);
  }), e2) : e2;
}
function Fr(e2) {
  for (var t2 = arguments.length, n2 = new Array(t2 > 1 ? t2 - 1 : 0), r2 = 1; r2 < t2; r2++)
    n2[r2 - 1] = arguments[r2];
  var o2 = 0;
  return e2.replace(/%s/g, function() {
    return encodeURIComponent(n2[o2++]);
  });
}
var Br = { WithinQueryParameters: 0, WithinHeaders: 1 };
function Vr(e2, t2) {
  var n2 = e2 || {}, r2 = n2.data || {};
  return Object.keys(n2).forEach(function(e3) {
    -1 === ["timeout", "headers", "queryParameters", "data", "cacheable"].indexOf(e3) && (r2[e3] = n2[e3]);
  }), { data: Object.entries(r2).length > 0 ? r2 : void 0, timeout: n2.timeout || t2, headers: n2.headers || {}, queryParameters: n2.queryParameters || {}, cacheable: n2.cacheable };
}
var zr = { Read: 1, Write: 2, Any: 3 }, Wr = 1, Kr = 2, Jr = 3;
function $r(e2) {
  var n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Wr;
  return t(t({}, e2), {}, { status: n2, lastUpdate: Date.now() });
}
function Qr(e2) {
  return "string" == typeof e2 ? { protocol: "https", url: e2, accept: zr.Any } : { protocol: e2.protocol || "https", url: e2.url, accept: e2.accept || zr.Any };
}
var Yr = "GET", Gr = "POST";
function Zr(e2, t2) {
  return Promise.all(t2.map(function(t3) {
    return e2.get(t3, function() {
      return Promise.resolve($r(t3));
    });
  })).then(function(e3) {
    var n2 = e3.filter(function(e4) {
      return function(e5) {
        return e5.status === Wr || Date.now() - e5.lastUpdate > 12e4;
      }(e4);
    }), r2 = e3.filter(function(e4) {
      return function(e5) {
        return e5.status === Jr && Date.now() - e5.lastUpdate <= 12e4;
      }(e4);
    }), o2 = [].concat(a$1(n2), a$1(r2));
    return { getTimeout: function(e4, t3) {
      return (0 === r2.length && 0 === e4 ? 1 : r2.length + 3 + e4) * t3;
    }, statelessHosts: o2.length > 0 ? o2.map(function(e4) {
      return Qr(e4);
    }) : t2 };
  });
}
function Xr(e2, n2, r2, o2) {
  var c2 = [], i2 = function(e3, n3) {
    if (e3.method === Yr || void 0 === e3.data && void 0 === n3.data)
      return;
    var r3 = Array.isArray(e3.data) ? e3.data : t(t({}, e3.data), n3.data);
    return JSON.stringify(r3);
  }(r2, o2), u2 = function(e3, n3) {
    var r3 = t(t({}, e3.headers), n3.headers), o3 = {};
    return Object.keys(r3).forEach(function(e4) {
      var t2 = r3[e4];
      o3[e4.toLowerCase()] = t2;
    }), o3;
  }(e2, o2), l2 = r2.method, s2 = r2.method !== Yr ? {} : t(t({}, r2.data), o2.data), f2 = t(t(t({ "x-algolia-agent": e2.userAgent.value }, e2.queryParameters), s2), o2.queryParameters), p2 = 0, m2 = function t2(n3, a2) {
    var s3 = n3.pop();
    if (void 0 === s3)
      throw { name: "RetryError", message: "Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.", transporterStackTrace: ro(c2) };
    var m3 = { data: i2, headers: u2, method: l2, url: to(s3, r2.path, f2), connectTimeout: a2(p2, e2.timeouts.connect), responseTimeout: a2(p2, o2.timeout) }, d2 = function(e3) {
      var t3 = { request: m3, response: e3, host: s3, triesLeft: n3.length };
      return c2.push(t3), t3;
    }, h2 = { onSucess: function(e3) {
      return function(e4) {
        try {
          return JSON.parse(e4.content);
        } catch (t3) {
          throw function(e5, t4) {
            return { name: "DeserializationError", message: e5, response: t4 };
          }(t3.message, e4);
        }
      }(e3);
    }, onRetry: function(r3) {
      var o3 = d2(r3);
      return r3.isTimedOut && p2++, Promise.all([e2.logger.info("Retryable failure", oo(o3)), e2.hostsCache.set(s3, $r(s3, r3.isTimedOut ? Jr : Kr))]).then(function() {
        return t2(n3, a2);
      });
    }, onFail: function(e3) {
      throw d2(e3), function(e4, t3) {
        var n4 = e4.content, r3 = e4.status, o3 = n4;
        try {
          o3 = JSON.parse(n4).message;
        } catch (e5) {
        }
        return function(e5, t4, n5) {
          return { name: "ApiError", message: e5, status: t4, transporterStackTrace: n5 };
        }(o3, r3, t3);
      }(e3, ro(c2));
    } };
    return e2.requester.send(m3).then(function(e3) {
      return function(e4, t3) {
        return function(e5) {
          var t4 = e5.status;
          return e5.isTimedOut || function(e6) {
            var t5 = e6.isTimedOut, n4 = e6.status;
            return !t5 && 0 == ~~n4;
          }(e5) || 2 != ~~(t4 / 100) && 4 != ~~(t4 / 100);
        }(e4) ? t3.onRetry(e4) : 2 == ~~(e4.status / 100) ? t3.onSucess(e4) : t3.onFail(e4);
      }(e3, h2);
    });
  };
  return Zr(e2.hostsCache, n2).then(function(e3) {
    return m2(a$1(e3.statelessHosts).reverse(), e3.getTimeout);
  });
}
function eo(e2) {
  var t2 = { value: "Algolia for JavaScript (".concat(e2, ")"), add: function(e3) {
    var n2 = "; ".concat(e3.segment).concat(void 0 !== e3.version ? " (".concat(e3.version, ")") : "");
    return -1 === t2.value.indexOf(n2) && (t2.value = "".concat(t2.value).concat(n2)), t2;
  } };
  return t2;
}
function to(e2, t2, n2) {
  var r2 = no(n2), o2 = "".concat(e2.protocol, "://").concat(e2.url, "/").concat("/" === t2.charAt(0) ? t2.substr(1) : t2);
  return r2.length && (o2 += "?".concat(r2)), o2;
}
function no(e2) {
  return Object.keys(e2).map(function(t2) {
    return Fr("%s=%s", t2, (n2 = e2[t2], "[object Object]" === Object.prototype.toString.call(n2) || "[object Array]" === Object.prototype.toString.call(n2) ? JSON.stringify(e2[t2]) : e2[t2]));
    var n2;
  }).join("&");
}
function ro(e2) {
  return e2.map(function(e3) {
    return oo(e3);
  });
}
function oo(e2) {
  var n2 = e2.request.headers["x-algolia-api-key"] ? { "x-algolia-api-key": "*****" } : {};
  return t(t({}, e2), {}, { request: t(t({}, e2.request), {}, { headers: t(t({}, e2.request.headers), n2) }) });
}
var co = function(e2) {
  var n2 = e2.appId, r2 = function(e3, t2, n3) {
    var r3 = { "x-algolia-api-key": n3, "x-algolia-application-id": t2 };
    return { headers: function() {
      return e3 === Br.WithinHeaders ? r3 : {};
    }, queryParameters: function() {
      return e3 === Br.WithinQueryParameters ? r3 : {};
    } };
  }(void 0 !== e2.authMode ? e2.authMode : Br.WithinHeaders, n2, e2.apiKey), o2 = function(e3) {
    var t2 = e3.hostsCache, n3 = e3.logger, r3 = e3.requester, o3 = e3.requestsCache, c3 = e3.responsesCache, a2 = e3.timeouts, u2 = e3.userAgent, l2 = e3.hosts, s2 = e3.queryParameters, f2 = { hostsCache: t2, logger: n3, requester: r3, requestsCache: o3, responsesCache: c3, timeouts: a2, userAgent: u2, headers: e3.headers, queryParameters: s2, hosts: l2.map(function(e4) {
      return Qr(e4);
    }), read: function(e4, t3) {
      var n4 = Vr(t3, f2.timeouts.read), r4 = function() {
        return Xr(f2, f2.hosts.filter(function(e5) {
          return 0 != (e5.accept & zr.Read);
        }), e4, n4);
      };
      if (true !== (void 0 !== n4.cacheable ? n4.cacheable : e4.cacheable))
        return r4();
      var o4 = { request: e4, mappedRequestOptions: n4, transporter: { queryParameters: f2.queryParameters, headers: f2.headers } };
      return f2.responsesCache.get(o4, function() {
        return f2.requestsCache.get(o4, function() {
          return f2.requestsCache.set(o4, r4()).then(function(e5) {
            return Promise.all([f2.requestsCache.delete(o4), e5]);
          }, function(e5) {
            return Promise.all([f2.requestsCache.delete(o4), Promise.reject(e5)]);
          }).then(function(e5) {
            var t4 = i$1(e5, 2);
            return t4[0], t4[1];
          });
        });
      }, { miss: function(e5) {
        return f2.responsesCache.set(o4, e5);
      } });
    }, write: function(e4, t3) {
      return Xr(f2, f2.hosts.filter(function(e5) {
        return 0 != (e5.accept & zr.Write);
      }), e4, Vr(t3, f2.timeouts.write));
    } };
    return f2;
  }(t(t({ hosts: [{ url: "".concat(n2, "-dsn.algolia.net"), accept: zr.Read }, { url: "".concat(n2, ".algolia.net"), accept: zr.Write }].concat(Hr([{ url: "".concat(n2, "-1.algolianet.com") }, { url: "".concat(n2, "-2.algolianet.com") }, { url: "".concat(n2, "-3.algolianet.com") }])) }, e2), {}, { headers: t(t(t({}, r2.headers()), { "content-type": "application/x-www-form-urlencoded" }), e2.headers), queryParameters: t(t({}, r2.queryParameters()), e2.queryParameters) })), c2 = { transporter: o2, appId: n2, addAlgoliaAgent: function(e3, t2) {
    o2.userAgent.add({ segment: e3, version: t2 });
  }, clearCache: function() {
    return Promise.all([o2.requestsCache.clear(), o2.responsesCache.clear()]).then(function() {
    });
  } };
  return Ur(c2, e2.methods);
}, io = function(e2) {
  return function(t2) {
    var n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r2 = { transporter: e2.transporter, appId: e2.appId, indexName: t2 };
    return Ur(r2, n2.methods);
  };
}, ao = function(e2) {
  return function(n2, r2) {
    var o2 = n2.map(function(e3) {
      return t(t({}, e3), {}, { params: no(e3.params || {}) });
    });
    return e2.transporter.read({ method: Gr, path: "1/indexes/*/queries", data: { requests: o2 }, cacheable: true }, r2);
  };
}, uo = function(e2) {
  return function(n2, r2) {
    return Promise.all(n2.map(function(n3) {
      var o2 = n3.params, i2 = o2.facetName, a2 = o2.facetQuery, u2 = c(o2, Rr);
      return io(e2)(n3.indexName, { methods: { searchForFacetValues: fo } }).searchForFacetValues(i2, a2, t(t({}, r2), u2));
    }));
  };
}, lo = function(e2) {
  return function(t2, n2, r2) {
    return e2.transporter.read({ method: Gr, path: Fr("1/answers/%s/prediction", e2.indexName), data: { query: t2, queryLanguages: n2 }, cacheable: true }, r2);
  };
}, so = function(e2) {
  return function(t2, n2) {
    return e2.transporter.read({ method: Gr, path: Fr("1/indexes/%s/query", e2.indexName), data: { query: t2 }, cacheable: true }, n2);
  };
}, fo = function(e2) {
  return function(t2, n2, r2) {
    return e2.transporter.read({ method: Gr, path: Fr("1/indexes/%s/facets/%s/query", e2.indexName, t2), data: { facetQuery: n2 }, cacheable: true }, r2);
  };
}, po = 1, mo = 2, ho = 3;
function vo(e2, n2, r2) {
  var o2, c2 = { appId: e2, apiKey: n2, timeouts: { connect: 1, read: 2, write: 30 }, requester: { send: function(e3) {
    return new Promise(function(t2) {
      var n3 = new XMLHttpRequest();
      n3.open(e3.method, e3.url, true), Object.keys(e3.headers).forEach(function(t3) {
        return n3.setRequestHeader(t3, e3.headers[t3]);
      });
      var r3, o3 = function(e4, r4) {
        return setTimeout(function() {
          n3.abort(), t2({ status: 0, content: r4, isTimedOut: true });
        }, 1e3 * e4);
      }, c3 = o3(e3.connectTimeout, "Connection timeout");
      n3.onreadystatechange = function() {
        n3.readyState > n3.OPENED && void 0 === r3 && (clearTimeout(c3), r3 = o3(e3.responseTimeout, "Socket timeout"));
      }, n3.onerror = function() {
        0 === n3.status && (clearTimeout(c3), clearTimeout(r3), t2({ content: n3.responseText || "Network request failed", status: n3.status, isTimedOut: false }));
      }, n3.onload = function() {
        clearTimeout(c3), clearTimeout(r3), t2({ content: n3.responseText, status: n3.status, isTimedOut: false });
      }, n3.send(e3.data);
    });
  } }, logger: (o2 = ho, { debug: function(e3, t2) {
    return po >= o2 && console.debug(e3, t2), Promise.resolve();
  }, info: function(e3, t2) {
    return mo >= o2 && console.info(e3, t2), Promise.resolve();
  }, error: function(e3, t2) {
    return console.error(e3, t2), Promise.resolve();
  } }), responsesCache: Mr(), requestsCache: Mr({ serializable: false }), hostsCache: qr({ caches: [Lr({ key: "".concat("4.8.5", "-").concat(e2) }), Mr()] }), userAgent: eo("4.8.5").add({ segment: "Browser", version: "lite" }), authMode: Br.WithinQueryParameters };
  return co(t(t(t({}, c2), r2), {}, { methods: { search: ao, searchForFacetValues: uo, multipleQueries: ao, multipleSearchForFacetValues: uo, initIndex: function(e3) {
    return function(t2) {
      return io(e3)(t2, { methods: { search: so, searchForFacetValues: fo, findAnswers: lo } });
    };
  } } }));
}
vo.version = "4.8.5";
var yo = ["footer", "searchBox"];
function _o() {
  return _o = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, _o.apply(this, arguments);
}
function bo(e2, t2) {
  var n2 = Object.keys(e2);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e2);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function go(e2) {
  for (var t2 = 1; t2 < arguments.length; t2++) {
    var n2 = null != arguments[t2] ? arguments[t2] : {};
    t2 % 2 ? bo(Object(n2), true).forEach(function(t3) {
      Oo(e2, t3, n2[t3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : bo(Object(n2)).forEach(function(t3) {
      Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(n2, t3));
    });
  }
  return e2;
}
function Oo(e2, t2, n2) {
  return t2 in e2 ? Object.defineProperty(e2, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e2[t2] = n2, e2;
}
function So(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return Eo(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return Eo(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function Eo(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function wo(e2, t2) {
  if (null == e2)
    return {};
  var n2, r2, o2 = function(e3, t3) {
    if (null == e3)
      return {};
    var n3, r3, o3 = {}, c3 = Object.keys(e3);
    for (r3 = 0; r3 < c3.length; r3++)
      n3 = c3[r3], t3.indexOf(n3) >= 0 || (o3[n3] = e3[n3]);
    return o3;
  }(e2, t2);
  if (Object.getOwnPropertySymbols) {
    var c2 = Object.getOwnPropertySymbols(e2);
    for (r2 = 0; r2 < c2.length; r2++)
      n2 = c2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e2, n2) && (o2[n2] = e2[n2]);
  }
  return o2;
}
function jo(e2) {
  var t2 = e2.appId, n2 = e2.apiKey, r2 = e2.indexName, o2 = e2.placeholder, c2 = void 0 === o2 ? "Search docs" : o2, i2 = e2.searchParameters, a2 = e2.onClose, u2 = void 0 === a2 ? mr : a2, l2 = e2.transformItems, s2 = void 0 === l2 ? pr : l2, f2 = e2.hitComponent, p2 = void 0 === f2 ? Rn : f2, m2 = e2.resultsFooterComponent, d2 = void 0 === m2 ? function() {
    return null;
  } : m2, h2 = e2.navigator, v2 = e2.initialScrollY, y2 = void 0 === v2 ? 0 : v2, _2 = e2.transformSearchClient, b2 = void 0 === _2 ? pr : _2, g2 = e2.disableUserPersonalization, O2 = void 0 !== g2 && g2, S2 = e2.initialQuery, E2 = void 0 === S2 ? "" : S2, w2 = e2.translations, j2 = void 0 === w2 ? {} : w2, P2 = e2.getMissingResultsUrl, I2 = j2.footer, k2 = j2.searchBox, D2 = wo(j2, yo), C2 = So(Be.useState({ query: "", collections: [], completion: null, context: {}, isOpen: false, activeItemId: null, status: "idle" }), 2), A2 = C2[0], x2 = C2[1], N2 = Be.useRef(null), T2 = Be.useRef(null), R2 = Be.useRef(null), L2 = Be.useRef(null), q2 = Be.useRef(null), M2 = Be.useRef(10), H2 = Be.useRef("undefined" != typeof window ? window.getSelection().toString().slice(0, 64) : "").current, U2 = Be.useRef(E2 || H2).current, F2 = function(e3, t3, n3) {
    return Be.useMemo(function() {
      var r3 = vo(e3, t3);
      return r3.addAlgoliaAgent("docsearch", "3.2.1"), false === /docsearch.js \(.*\)/.test(r3.transporter.userAgent.value) && r3.addAlgoliaAgent("docsearch-react", "3.2.1"), n3(r3);
    }, [e3, t3, n3]);
  }(t2, n2, b2), B2 = Be.useRef(Tr({ key: "__DOCSEARCH_FAVORITE_SEARCHES__".concat(r2), limit: 10 })).current, V2 = Be.useRef(Tr({ key: "__DOCSEARCH_RECENT_SEARCHES__".concat(r2), limit: 0 === B2.getAll().length ? 7 : 4 })).current, z2 = Be.useCallback(function(e3) {
    if (!O2) {
      var t3 = "content" === e3.type ? e3.__docsearch_parent : e3;
      t3 && -1 === B2.getAll().findIndex(function(e4) {
        return e4.objectID === t3.objectID;
      }) && V2.add(t3);
    }
  }, [B2, V2, O2]), W2 = Be.useMemo(function() {
    return An({ id: "docsearch", defaultActiveItemId: 0, placeholder: c2, openOnFocus: true, initialState: { query: U2, context: { searchSuggestions: [] } }, navigator: h2, onStateChange: function(e3) {
      x2(e3.state);
    }, getSources: function(e3) {
      var t3 = e3.query, n3 = e3.state, o3 = e3.setContext, c3 = e3.setStatus;
      return t3 ? F2.search([{ query: t3, indexName: r2, params: go({ attributesToRetrieve: ["hierarchy.lvl0", "hierarchy.lvl1", "hierarchy.lvl2", "hierarchy.lvl3", "hierarchy.lvl4", "hierarchy.lvl5", "hierarchy.lvl6", "content", "type", "url"], attributesToSnippet: ["hierarchy.lvl1:".concat(M2.current), "hierarchy.lvl2:".concat(M2.current), "hierarchy.lvl3:".concat(M2.current), "hierarchy.lvl4:".concat(M2.current), "hierarchy.lvl5:".concat(M2.current), "hierarchy.lvl6:".concat(M2.current), "content:".concat(M2.current)], snippetEllipsisText: "\u2026", highlightPreTag: "<mark>", highlightPostTag: "</mark>", hitsPerPage: 20 }, i2) }]).catch(function(e4) {
        throw "RetryError" === e4.name && c3("error"), e4;
      }).then(function(e4) {
        var t4 = e4.results[0], r3 = t4.hits, c4 = t4.nbHits, i3 = fr(r3, function(e5) {
          return vr(e5);
        });
        return n3.context.searchSuggestions.length < Object.keys(i3).length && o3({ searchSuggestions: Object.keys(i3) }), o3({ nbHits: c4 }), Object.values(i3).map(function(e5, t5) {
          return { sourceId: "hits".concat(t5), onSelect: function(e6) {
            var t6 = e6.item, n4 = e6.event;
            z2(t6), n4.shiftKey || n4.ctrlKey || n4.metaKey || u2();
          }, getItemUrl: function(e6) {
            return e6.item.url;
          }, getItems: function() {
            return Object.values(fr(e5, function(e6) {
              return e6.hierarchy.lvl1;
            })).map(s2).map(function(e6) {
              return e6.map(function(t6) {
                return go(go({}, t6), {}, { __docsearch_parent: "lvl1" !== t6.type && e6.find(function(e7) {
                  return "lvl1" === e7.type && e7.hierarchy.lvl1 === t6.hierarchy.lvl1;
                }) });
              });
            }).flat();
          } };
        });
      }) : O2 ? [] : [{ sourceId: "recentSearches", onSelect: function(e4) {
        var t4 = e4.item, n4 = e4.event;
        z2(t4), n4.shiftKey || n4.ctrlKey || n4.metaKey || u2();
      }, getItemUrl: function(e4) {
        return e4.item.url;
      }, getItems: function() {
        return V2.getAll();
      } }, { sourceId: "favoriteSearches", onSelect: function(e4) {
        var t4 = e4.item, n4 = e4.event;
        z2(t4), n4.shiftKey || n4.ctrlKey || n4.metaKey || u2();
      }, getItemUrl: function(e4) {
        return e4.item.url;
      }, getItems: function() {
        return B2.getAll();
      } }];
    } });
  }, [r2, i2, F2, u2, V2, B2, z2, U2, c2, h2, s2, O2]), K2 = W2.getEnvironmentProps, J2 = W2.getRootProps, $2 = W2.refresh;
  return function(e3) {
    var t3 = e3.getEnvironmentProps, n3 = e3.panelElement, r3 = e3.formElement, o3 = e3.inputElement;
    Be.useEffect(function() {
      if (n3 && r3 && o3) {
        var e4 = t3({ panelElement: n3, formElement: r3, inputElement: o3 }), c3 = e4.onTouchStart, i3 = e4.onTouchMove;
        return window.addEventListener("touchstart", c3), window.addEventListener("touchmove", i3), function() {
          window.removeEventListener("touchstart", c3), window.removeEventListener("touchmove", i3);
        };
      }
    }, [t3, n3, r3, o3]);
  }({ getEnvironmentProps: K2, panelElement: L2.current, formElement: R2.current, inputElement: q2.current }), function(e3) {
    var t3 = e3.container;
    Be.useEffect(function() {
      if (t3) {
        var e4 = t3.querySelectorAll("a[href]:not([disabled]), button:not([disabled]), input:not([disabled])"), n3 = e4[0], r3 = e4[e4.length - 1];
        return t3.addEventListener("keydown", o3), function() {
          t3.removeEventListener("keydown", o3);
        };
      }
      function o3(e5) {
        "Tab" === e5.key && (e5.shiftKey ? document.activeElement === n3 && (e5.preventDefault(), r3.focus()) : document.activeElement === r3 && (e5.preventDefault(), n3.focus()));
      }
    }, [t3]);
  }({ container: N2.current }), Be.useEffect(function() {
    return document.body.classList.add("DocSearch--active"), function() {
      var e3, t3;
      document.body.classList.remove("DocSearch--active"), null === (e3 = (t3 = window).scrollTo) || void 0 === e3 || e3.call(t3, 0, y2);
    };
  }, []), Be.useEffect(function() {
    window.matchMedia("(max-width: 768px)").matches && (M2.current = 5);
  }, []), Be.useEffect(function() {
    L2.current && (L2.current.scrollTop = 0);
  }, [A2.query]), Be.useEffect(function() {
    U2.length > 0 && ($2(), q2.current && q2.current.focus());
  }, [U2, $2]), Be.useEffect(function() {
    function e3() {
      if (T2.current) {
        var e4 = 0.01 * window.innerHeight;
        T2.current.style.setProperty("--docsearch-vh", "".concat(e4, "px"));
      }
    }
    return e3(), window.addEventListener("resize", e3), function() {
      window.removeEventListener("resize", e3);
    };
  }, []), Be.createElement("div", _o({ ref: N2 }, J2({ "aria-expanded": true }), { className: ["DocSearch", "DocSearch-Container", "stalled" === A2.status && "DocSearch-Container--Stalled", "error" === A2.status && "DocSearch-Container--Errored"].filter(Boolean).join(" "), role: "button", tabIndex: 0, onMouseDown: function(e3) {
    e3.target === e3.currentTarget && u2();
  } }), Be.createElement("div", { className: "DocSearch-Modal", ref: T2 }, Be.createElement("header", { className: "DocSearch-SearchBar", ref: R2 }, Be.createElement(Cr, _o({}, W2, { state: A2, autoFocus: 0 === U2.length, inputRef: q2, isFromSelection: Boolean(U2) && U2 === H2, translations: k2, onClose: u2 }))), Be.createElement("div", { className: "DocSearch-Dropdown", ref: L2 }, Be.createElement(Pr, _o({}, W2, { indexName: r2, state: A2, hitComponent: p2, resultsFooterComponent: d2, disableUserPersonalization: O2, recentSearches: V2, favoriteSearches: B2, inputRef: q2, translations: D2, getMissingResultsUrl: P2, onItemClick: function(e3) {
    z2(e3), u2();
  } }))), Be.createElement("footer", { className: "DocSearch-Footer" }, Be.createElement(Tn, { translations: I2 }))));
}
function Po() {
  return Po = Object.assign || function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var r2 in n2)
        Object.prototype.hasOwnProperty.call(n2, r2) && (e2[r2] = n2[r2]);
    }
    return e2;
  }, Po.apply(this, arguments);
}
function Io(e2, t2) {
  return function(e3) {
    if (Array.isArray(e3))
      return e3;
  }(e2) || function(e3, t3) {
    var n2 = null == e3 ? null : "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
    if (null == n2)
      return;
    var r2, o2, c2 = [], i2 = true, a2 = false;
    try {
      for (n2 = n2.call(e3); !(i2 = (r2 = n2.next()).done) && (c2.push(r2.value), !t3 || c2.length !== t3); i2 = true)
        ;
    } catch (e4) {
      a2 = true, o2 = e4;
    } finally {
      try {
        i2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw o2;
      }
    }
    return c2;
  }(e2, t2) || function(e3, t3) {
    if (!e3)
      return;
    if ("string" == typeof e3)
      return ko(e3, t3);
    var n2 = Object.prototype.toString.call(e3).slice(8, -1);
    "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
    if ("Map" === n2 || "Set" === n2)
      return Array.from(e3);
    if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return ko(e3, t3);
  }(e2, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function ko(e2, t2) {
  (null == t2 || t2 > e2.length) && (t2 = e2.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e2[n2];
  return r2;
}
function Do(e2) {
  var t2, n2, r2 = Be.useRef(null), o2 = Io(Be.useState(false), 2), c2 = o2[0], i2 = o2[1], a2 = Io(Be.useState((null == e2 ? void 0 : e2.initialQuery) || void 0), 2), u2 = a2[0], l2 = a2[1], s2 = Be.useCallback(function() {
    i2(true);
  }, [i2]), f2 = Be.useCallback(function() {
    i2(false);
  }, [i2]);
  return function(e3) {
    var t3 = e3.isOpen, n3 = e3.onOpen, r3 = e3.onClose, o3 = e3.onInput, c3 = e3.searchButtonRef;
    Be.useEffect(function() {
      function e4(e5) {
        (27 === e5.keyCode && t3 || "k" === e5.key && (e5.metaKey || e5.ctrlKey) || !function(e6) {
          var t4 = e6.target, n4 = t4.tagName;
          return t4.isContentEditable || "INPUT" === n4 || "SELECT" === n4 || "TEXTAREA" === n4;
        }(e5) && "/" === e5.key && !t3) && (e5.preventDefault(), t3 ? r3() : document.body.classList.contains("DocSearch--active") || document.body.classList.contains("DocSearch--active") || n3()), c3 && c3.current === document.activeElement && o3 && /[a-zA-Z0-9]/.test(String.fromCharCode(e5.keyCode)) && o3(e5);
      }
      return window.addEventListener("keydown", e4), function() {
        window.removeEventListener("keydown", e4);
      };
    }, [t3, n3, r3, o3, c3]);
  }({ isOpen: c2, onOpen: s2, onClose: f2, onInput: Be.useCallback(function(e3) {
    i2(true), l2(e3.key);
  }, [i2, l2]), searchButtonRef: r2 }), Be.createElement(Be.Fragment, null, Be.createElement(Ye, { ref: r2, translations: null == e2 || null === (t2 = e2.translations) || void 0 === t2 ? void 0 : t2.button, onClick: s2 }), c2 && Ie(Be.createElement(jo, Po({}, e2, { initialScrollY: window.scrollY, initialQuery: u2, translations: null == e2 || null === (n2 = e2.translations) || void 0 === n2 ? void 0 : n2.modal, onClose: f2 })), document.body));
}
function Co(e2) {
  Ae(Be.createElement(Do, o({}, e2, { transformSearchClient: function(t2) {
    return t2.addAlgoliaAgent("docsearch.js", "3.2.1"), e2.transformSearchClient ? e2.transformSearchClient(t2) : t2;
  } })), function(e3) {
    var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : window;
    return "string" == typeof e3 ? t2.document.querySelector(e3) : e3;
  }(e2.container, e2.environment));
}
const isSpecialClick = (event) => event.button === 1 || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;
const useDocsearchShim = () => {
  const router = useRouter();
  const site = useSiteData();
  return {
    hitComponent: ({ hit, children }) => {
      const routePath = resolveRoutePathFromUrl(hit.url, site.value.base);
      return {
        type: "a",
        ref: void 0,
        constructor: void 0,
        key: void 0,
        props: {
          href: hit.url,
          onClick: (event) => {
            if (isSpecialClick(event)) {
              return;
            }
            event.preventDefault();
            router.push(routePath);
          },
          children
        },
        __v: null
      };
    },
    navigator: {
      navigate: ({ itemUrl }) => {
        router.push(itemUrl);
      }
    },
    transformSearchClient: (searchClient) => {
      const searchWithDebounce = r$2(searchClient.search, 500);
      return {
        ...searchClient,
        search: async (...args) => searchWithDebounce(...args)
      };
    }
  };
};
var style = "";
var docsearch = "";
const Docsearch = defineComponent({
  name: "Docsearch",
  props: {
    containerId: {
      type: String,
      required: false,
      default: "docsearch-container"
    },
    options: {
      type: Object,
      required: true
    }
  },
  setup(props) {
    const routeLocale = useRouteLocale();
    const lang = usePageLang();
    const docsearchShim = useDocsearchShim();
    const propsLocale = computed(() => {
      var _a2;
      return {
        ...props.options,
        ...(_a2 = props.options.locales) == null ? void 0 : _a2[routeLocale.value]
      };
    });
    const facetFilters = [];
    const initialize = () => {
      var _a2, _b;
      const rawFacetFilters = (_b = (_a2 = propsLocale.value.searchParameters) == null ? void 0 : _a2.facetFilters) != null ? _b : [];
      facetFilters.splice(0, facetFilters.length, `lang:${lang.value}`, ...isArray$1(rawFacetFilters) ? rawFacetFilters : [rawFacetFilters]);
      Co({
        ...docsearchShim,
        ...propsLocale.value,
        container: `#${props.containerId}`,
        searchParameters: {
          ...propsLocale.value.searchParameters,
          facetFilters
        }
      });
    };
    onMounted(() => {
      initialize();
      watch([routeLocale, propsLocale], ([curRouteLocale, curPropsLocale], [prevRouteLocale, prevPropsLocale]) => {
        if (curRouteLocale === prevRouteLocale)
          return;
        if (JSON.stringify(curPropsLocale) !== JSON.stringify(prevPropsLocale)) {
          initialize();
        }
      });
      watch(lang, (curLang, prevLang) => {
        if (curLang !== prevLang) {
          const prevIndex = facetFilters.findIndex((item) => item === `lang:${prevLang}`);
          if (prevIndex > -1) {
            facetFilters.splice(prevIndex, 1, `lang:${curLang}`);
          }
        }
      });
    });
    return () => h$1("div", { id: props.containerId });
  }
});
const options = { "apiKey": "e3224f6a8f05632af9c14c9767650b54", "indexName": "anyfork", "appId": "09V7PWK61N", "placeholder": "\u641C\u7D22\u6587\u6863", "locales": { "/": { "placeholder": "\u641C\u7D22\u6587\u6863", "translations": { "button": { "buttonText": "\u641C\u7D22\u6587\u6863" } } } } };
var clientConfig8 = defineClientConfig({
  enhance({ app }) {
    app.component("Docsearch", () => h$1(Docsearch, { options }));
  }
});
function mitt(n2) {
  return { all: n2 = n2 || /* @__PURE__ */ new Map(), on: function(t2, e2) {
    var i2 = n2.get(t2);
    i2 ? i2.push(e2) : n2.set(t2, [e2]);
  }, off: function(t2, e2) {
    var i2 = n2.get(t2);
    i2 && (e2 ? i2.splice(i2.indexOf(e2) >>> 0, 1) : n2.set(t2, []));
  }, emit: function(t2, e2) {
    var i2 = n2.get(t2);
    i2 && i2.slice().map(function(n3) {
      n3(e2);
    }), (i2 = n2.get("*")) && i2.slice().map(function(n3) {
      n3(t2, e2);
    });
  } };
}
const pwaEventSymbol = Symbol("pwaEvent");
const usePwaEvent = () => {
  const pwaEvent = inject(pwaEventSymbol);
  if (!pwaEvent) {
    throw new Error("usePwaEvent() is called without provider.");
  }
  return pwaEvent;
};
const useSkipWaiting = (registration) => {
  const worker = registration.waiting;
  if (!worker)
    return;
  const channel = new MessageChannel();
  worker.postMessage({ type: "SKIP_WAITING" }, [channel.port2]);
};
const swFilename = "service-worker.js";
var clientConfig9 = defineClientConfig({
  setup() {
    const log = (...args) => console.log("[@vuepress/plugin-pwa]", ...args);
    const event = mitt();
    provide(pwaEventSymbol, event);
    onMounted(async () => {
      const { register } = await __vitePreload(() => import("./index.0e8935cb.js"), true ? [] : void 0);
      register(withBase(swFilename), {
        ready(registration) {
          log("Service worker is active.");
          event.emit("ready", registration);
        },
        registered(registration) {
          log("Service worker has been registered.");
          event.emit("registered", registration);
        },
        cached(registration) {
          log("Content has been cached for offline use.");
          event.emit("cached", registration);
        },
        updatefound(registration) {
          log("New content is downloading.");
          event.emit("updatefound", registration);
        },
        updated(registration) {
          log("New content is available, please refresh.");
          event.emit("updated", registration);
        },
        offline() {
          log("No internet connection found. App is running in offline mode.");
          event.emit("offline");
        },
        error(err) {
          log("Error during service worker registration:", err);
          event.emit("error", err);
        }
      });
    });
  }
});
var vars = "";
var pwaPopup = "";
const PwaPopup = defineComponent({
  name: "PwaPopup",
  props: {
    locales: {
      type: Object,
      required: false,
      default: () => ({})
    }
  },
  setup(props) {
    const event = usePwaEvent();
    const routeLocale = useRouteLocale();
    const locale = computed(() => {
      var _a2;
      return (_a2 = props.locales[routeLocale.value]) != null ? _a2 : {
        message: "New content is available.",
        buttonText: "Refresh"
      };
    });
    const show = ref(false);
    const registration = ref(null);
    const onClick = () => {
      show.value = false;
      if (registration.value) {
        useSkipWaiting(registration.value);
        location.reload(true);
      }
    };
    event.on("updated", (reg) => {
      if (reg) {
        registration.value = reg;
        show.value = true;
      }
    });
    return () => h$1(Transition, {
      name: "pwa-popup"
    }, () => show.value ? h$1("div", {
      class: "pwa-popup"
    }, [
      locale.value.message,
      h$1("br"),
      h$1("button", {
        onClick
      }, locale.value.buttonText)
    ]) : null);
  }
});
const locales = { "/": { "message": "\u53D1\u73B0\u65B0\u5185\u5BB9\u53EF\u7528", "buttonText": "\u70B9\u6211\u5237\u65B0" } };
var clientConfig10 = defineClientConfig({
  rootComponents: [
    defineComponent(() => {
      return () => h$1(PwaPopup, { locales });
    })
  ]
});
var hopeInject = "";
var clientConfig11 = {};
var message = "";
const f = (t2) => {
  const e2 = useRouteLocale();
  return computed(() => t2[e2.value]);
};
class b {
  constructor() {
    const t2 = "message-container", e2 = document.getElementById(t2);
    e2 ? this.containerElement = e2 : (this.containerElement = document.createElement("div"), this.containerElement.id = t2, document.body.appendChild(this.containerElement));
  }
  pop(t2, e2 = 2e3) {
    const n2 = document.createElement("div");
    n2.className = "message move-in", n2.innerHTML = t2, this.containerElement.appendChild(n2), e2 > 0 && setTimeout(() => {
      this.close(n2);
    }, e2);
  }
  close(t2) {
    t2.className = t2.className.replace("move-in", ""), t2.className += "move-out", t2.addEventListener("animationend", () => {
      t2.remove();
    });
  }
}
Object.freeze({}), Object.freeze([]);
var L, H = function() {
  var t2 = 1e3, e2 = 6e4, n2 = 36e5, r2 = "millisecond", i2 = "second", s2 = "minute", o2 = "hour", a2 = "day", u2 = "week", c2 = "month", f2 = "quarter", d2 = "year", h2 = "date", l2 = "Invalid Date", m2 = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/, p2 = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g, $2 = { name: "en", weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_") }, v2 = function(t3, e3, n3) {
    var r3 = String(t3);
    return !r3 || r3.length >= e3 ? t3 : "" + Array(e3 + 1 - r3.length).join(n3) + t3;
  }, y2 = { s: v2, z: function(t3) {
    var e3 = -t3.utcOffset(), n3 = Math.abs(e3), r3 = Math.floor(n3 / 60), i3 = n3 % 60;
    return (e3 <= 0 ? "+" : "-") + v2(r3, 2, "0") + ":" + v2(i3, 2, "0");
  }, m: function t3(e3, n3) {
    if (e3.date() < n3.date())
      return -t3(n3, e3);
    var r3 = 12 * (n3.year() - e3.year()) + (n3.month() - e3.month()), i3 = e3.clone().add(r3, c2), s3 = n3 - i3 < 0, o3 = e3.clone().add(r3 + (s3 ? -1 : 1), c2);
    return +(-(r3 + (n3 - i3) / (s3 ? i3 - o3 : o3 - i3)) || 0);
  }, a: function(t3) {
    return t3 < 0 ? Math.ceil(t3) || 0 : Math.floor(t3);
  }, p: function(t3) {
    return { M: c2, y: d2, w: u2, d: a2, D: h2, h: o2, m: s2, s: i2, ms: r2, Q: f2 }[t3] || String(t3 || "").toLowerCase().replace(/s$/, "");
  }, u: function(t3) {
    return void 0 === t3;
  } }, g2 = "en", M2 = {};
  M2[g2] = $2;
  var D2 = function(t3) {
    return t3 instanceof S2;
  }, _2 = function t3(e3, n3, r3) {
    var i3;
    if (!e3)
      return g2;
    if ("string" == typeof e3) {
      var s3 = e3.toLowerCase();
      M2[s3] && (i3 = s3), n3 && (M2[s3] = n3, i3 = s3);
      var o3 = e3.split("-");
      if (!i3 && o3.length > 1)
        return t3(o3[0]);
    } else {
      var a3 = e3.name;
      M2[a3] = e3, i3 = a3;
    }
    return !r3 && i3 && (g2 = i3), i3 || !r3 && g2;
  }, Y2 = function(t3, e3) {
    if (D2(t3))
      return t3.clone();
    var n3 = "object" == typeof e3 ? e3 : {};
    return n3.date = t3, n3.args = arguments, new S2(n3);
  }, w2 = y2;
  w2.l = _2, w2.i = D2, w2.w = function(t3, e3) {
    return Y2(t3, { locale: e3.$L, utc: e3.$u, x: e3.$x, $offset: e3.$offset });
  };
  var S2 = function() {
    function $3(t3) {
      this.$L = _2(t3.locale, null, true), this.parse(t3);
    }
    var v3 = $3.prototype;
    return v3.parse = function(t3) {
      this.$d = function(t4) {
        var e3 = t4.date, n3 = t4.utc;
        if (null === e3)
          return new Date(NaN);
        if (w2.u(e3))
          return new Date();
        if (e3 instanceof Date)
          return new Date(e3);
        if ("string" == typeof e3 && !/Z$/i.test(e3)) {
          var r3 = e3.match(m2);
          if (r3) {
            var i3 = r3[2] - 1 || 0, s3 = (r3[7] || "0").substring(0, 3);
            return n3 ? new Date(Date.UTC(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3)) : new Date(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3);
          }
        }
        return new Date(e3);
      }(t3), this.$x = t3.x || {}, this.init();
    }, v3.init = function() {
      var t3 = this.$d;
      this.$y = t3.getFullYear(), this.$M = t3.getMonth(), this.$D = t3.getDate(), this.$W = t3.getDay(), this.$H = t3.getHours(), this.$m = t3.getMinutes(), this.$s = t3.getSeconds(), this.$ms = t3.getMilliseconds();
    }, v3.$utils = function() {
      return w2;
    }, v3.isValid = function() {
      return !(this.$d.toString() === l2);
    }, v3.isSame = function(t3, e3) {
      var n3 = Y2(t3);
      return this.startOf(e3) <= n3 && n3 <= this.endOf(e3);
    }, v3.isAfter = function(t3, e3) {
      return Y2(t3) < this.startOf(e3);
    }, v3.isBefore = function(t3, e3) {
      return this.endOf(e3) < Y2(t3);
    }, v3.$g = function(t3, e3, n3) {
      return w2.u(t3) ? this[e3] : this.set(n3, t3);
    }, v3.unix = function() {
      return Math.floor(this.valueOf() / 1e3);
    }, v3.valueOf = function() {
      return this.$d.getTime();
    }, v3.startOf = function(t3, e3) {
      var n3 = this, r3 = !!w2.u(e3) || e3, f3 = w2.p(t3), l3 = function(t4, e4) {
        var i3 = w2.w(n3.$u ? Date.UTC(n3.$y, e4, t4) : new Date(n3.$y, e4, t4), n3);
        return r3 ? i3 : i3.endOf(a2);
      }, m3 = function(t4, e4) {
        return w2.w(n3.toDate()[t4].apply(n3.toDate("s"), (r3 ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e4)), n3);
      }, p3 = this.$W, $4 = this.$M, v4 = this.$D, y3 = "set" + (this.$u ? "UTC" : "");
      switch (f3) {
        case d2:
          return r3 ? l3(1, 0) : l3(31, 11);
        case c2:
          return r3 ? l3(1, $4) : l3(0, $4 + 1);
        case u2:
          var g3 = this.$locale().weekStart || 0, M3 = (p3 < g3 ? p3 + 7 : p3) - g3;
          return l3(r3 ? v4 - M3 : v4 + (6 - M3), $4);
        case a2:
        case h2:
          return m3(y3 + "Hours", 0);
        case o2:
          return m3(y3 + "Minutes", 1);
        case s2:
          return m3(y3 + "Seconds", 2);
        case i2:
          return m3(y3 + "Milliseconds", 3);
        default:
          return this.clone();
      }
    }, v3.endOf = function(t3) {
      return this.startOf(t3, false);
    }, v3.$set = function(t3, e3) {
      var n3, u3 = w2.p(t3), f3 = "set" + (this.$u ? "UTC" : ""), l3 = (n3 = {}, n3[a2] = f3 + "Date", n3[h2] = f3 + "Date", n3[c2] = f3 + "Month", n3[d2] = f3 + "FullYear", n3[o2] = f3 + "Hours", n3[s2] = f3 + "Minutes", n3[i2] = f3 + "Seconds", n3[r2] = f3 + "Milliseconds", n3)[u3], m3 = u3 === a2 ? this.$D + (e3 - this.$W) : e3;
      if (u3 === c2 || u3 === d2) {
        var p3 = this.clone().set(h2, 1);
        p3.$d[l3](m3), p3.init(), this.$d = p3.set(h2, Math.min(this.$D, p3.daysInMonth())).$d;
      } else
        l3 && this.$d[l3](m3);
      return this.init(), this;
    }, v3.set = function(t3, e3) {
      return this.clone().$set(t3, e3);
    }, v3.get = function(t3) {
      return this[w2.p(t3)]();
    }, v3.add = function(r3, f3) {
      var h3, l3 = this;
      r3 = Number(r3);
      var m3 = w2.p(f3), p3 = function(t3) {
        var e3 = Y2(l3);
        return w2.w(e3.date(e3.date() + Math.round(t3 * r3)), l3);
      };
      if (m3 === c2)
        return this.set(c2, this.$M + r3);
      if (m3 === d2)
        return this.set(d2, this.$y + r3);
      if (m3 === a2)
        return p3(1);
      if (m3 === u2)
        return p3(7);
      var $4 = (h3 = {}, h3[s2] = e2, h3[o2] = n2, h3[i2] = t2, h3)[m3] || 1, v4 = this.$d.getTime() + r3 * $4;
      return w2.w(v4, this);
    }, v3.subtract = function(t3, e3) {
      return this.add(-1 * t3, e3);
    }, v3.format = function(t3) {
      var e3 = this, n3 = this.$locale();
      if (!this.isValid())
        return n3.invalidDate || l2;
      var r3 = t3 || "YYYY-MM-DDTHH:mm:ssZ", i3 = w2.z(this), s3 = this.$H, o3 = this.$m, a3 = this.$M, u3 = n3.weekdays, c3 = n3.months, f3 = function(t4, n4, i4, s4) {
        return t4 && (t4[n4] || t4(e3, r3)) || i4[n4].slice(0, s4);
      }, d3 = function(t4) {
        return w2.s(s3 % 12 || 12, t4, "0");
      }, h3 = n3.meridiem || function(t4, e4, n4) {
        var r4 = t4 < 12 ? "AM" : "PM";
        return n4 ? r4.toLowerCase() : r4;
      }, m3 = { YY: String(this.$y).slice(-2), YYYY: this.$y, M: a3 + 1, MM: w2.s(a3 + 1, 2, "0"), MMM: f3(n3.monthsShort, a3, c3, 3), MMMM: f3(c3, a3), D: this.$D, DD: w2.s(this.$D, 2, "0"), d: String(this.$W), dd: f3(n3.weekdaysMin, this.$W, u3, 2), ddd: f3(n3.weekdaysShort, this.$W, u3, 3), dddd: u3[this.$W], H: String(s3), HH: w2.s(s3, 2, "0"), h: d3(1), hh: d3(2), a: h3(s3, o3, true), A: h3(s3, o3, false), m: String(o3), mm: w2.s(o3, 2, "0"), s: String(this.$s), ss: w2.s(this.$s, 2, "0"), SSS: w2.s(this.$ms, 3, "0"), Z: i3 };
      return r3.replace(p2, function(t4, e4) {
        return e4 || m3[t4] || i3.replace(":", "");
      });
    }, v3.utcOffset = function() {
      return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);
    }, v3.diff = function(r3, h3, l3) {
      var m3, p3 = w2.p(h3), $4 = Y2(r3), v4 = ($4.utcOffset() - this.utcOffset()) * e2, y3 = this - $4, g3 = w2.m(this, $4);
      return g3 = (m3 = {}, m3[d2] = g3 / 12, m3[c2] = g3, m3[f2] = g3 / 3, m3[u2] = (y3 - v4) / 6048e5, m3[a2] = (y3 - v4) / 864e5, m3[o2] = y3 / n2, m3[s2] = y3 / e2, m3[i2] = y3 / t2, m3)[p3] || y3, l3 ? g3 : w2.a(g3);
    }, v3.daysInMonth = function() {
      return this.endOf(c2).$D;
    }, v3.$locale = function() {
      return M2[this.$L];
    }, v3.locale = function(t3, e3) {
      if (!t3)
        return this.$L;
      var n3 = this.clone(), r3 = _2(t3, e3, true);
      return r3 && (n3.$L = r3), n3;
    }, v3.clone = function() {
      return w2.w(this.$d, this);
    }, v3.toDate = function() {
      return new Date(this.valueOf());
    }, v3.toJSON = function() {
      return this.isValid() ? this.toISOString() : null;
    }, v3.toISOString = function() {
      return this.$d.toISOString();
    }, v3.toString = function() {
      return this.$d.toUTCString();
    }, $3;
  }(), b2 = S2.prototype;
  return Y2.prototype = b2, [["$ms", r2], ["$s", i2], ["$m", s2], ["$H", o2], ["$W", a2], ["$M", c2], ["$y", d2], ["$D", h2]].forEach(function(t3) {
    b2[t3[1]] = function(e3) {
      return this.$g(e3, t3[0], t3[1]);
    };
  }), Y2.extend = function(t3, e3) {
    return t3.$i || (t3(e3, S2, Y2), t3.$i = true), Y2;
  }, Y2.locale = _2, Y2.isDayjs = D2, Y2.unix = function(t3) {
    return Y2(1e3 * t3);
  }, Y2.en = M2[g2], Y2.Ls = M2, Y2.p = {}, Y2;
}(), z = (L = { LTS: "h:mm:ss A", LT: "h:mm A", L: "MM/DD/YYYY", LL: "MMMM D, YYYY", LLL: "MMMM D, YYYY h:mm A", LLLL: "dddd, MMMM D, YYYY h:mm A" }, function(t2, e2, n2) {
  var r2 = e2.prototype, i2 = r2.format;
  n2.en.formats = L, r2.format = function(t3) {
    void 0 === t3 && (t3 = "YYYY-MM-DDTHH:mm:ssZ");
    var e3 = this.$locale().formats, n3 = function(t4, e4) {
      return t4.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g, function(t5, n4, r3) {
        var i3 = r3 && r3.toUpperCase();
        return n4 || e4[r3] || L[r3] || e4[i3].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, function(t6, e5, n5) {
          return e5 || n5.slice(1);
        });
      });
    }(t3, void 0 === e3 ? {} : e3);
    return i2.call(this, n3);
  };
}), N = function(t2, e2, n2) {
  var r2 = e2.prototype, i2 = function(t3) {
    var e3, i3 = t3.date, s3 = t3.utc, o3 = {};
    if (!((e3 = i3) instanceof Date) && !(e3 instanceof Array) && e3 instanceof Object) {
      if (!Object.keys(i3).length)
        return new Date();
      var a3 = s3 ? n2.utc() : n2();
      Object.keys(i3).forEach(function(t4) {
        var e4, n3;
        o3[e4 = t4, n3 = r2.$utils().p(e4), "date" === n3 ? "day" : n3] = i3[t4];
      });
      var u3 = o3.day || (o3.year || o3.month >= 0 ? 1 : a3.date()), c2 = o3.year || a3.year(), f2 = o3.month >= 0 ? o3.month : o3.year || o3.day ? 0 : a3.month(), d2 = o3.hour || 0, h2 = o3.minute || 0, l2 = o3.second || 0, m2 = o3.millisecond || 0;
      return s3 ? new Date(Date.UTC(c2, f2, u3, d2, h2, l2, m2)) : new Date(c2, f2, u3, d2, h2, l2, m2);
    }
    return i3;
  }, s2 = r2.parse;
  r2.parse = function(t3) {
    t3.date = i2.bind(this)(t3), s2.bind(this)(t3);
  };
  var o2 = r2.set, a2 = r2.add, u2 = function(t3, e3, n3, r3) {
    if (void 0 === r3 && (r3 = 1), e3 instanceof Object) {
      var i3 = Object.keys(e3), s3 = this;
      return i3.forEach(function(n4) {
        s3 = t3.bind(s3)(e3[n4] * r3, n4);
      }), s3;
    }
    return t3.bind(this)(e3 * r3, n3);
  };
  r2.set = function(t3, e3) {
    return e3 = void 0 === e3 ? t3 : e3, u2.bind(this)(function(t4, e4) {
      return o2.bind(this)(e4, t4);
    }, e3, t3);
  }, r2.add = function(t3, e3) {
    return u2.bind(this)(a2, t3, e3);
  }, r2.subtract = function(t3, e3) {
    return u2.bind(this)(a2, t3, e3, -1);
  };
}, k = function() {
  var t2 = { year: 0, month: 1, day: 2, hour: 3, minute: 4, second: 5 }, e2 = {};
  return function(n2, r2, i2) {
    var s2, o2 = function(t3, n3, r3) {
      void 0 === r3 && (r3 = {});
      var i3 = new Date(t3), s3 = function(t4, n4) {
        void 0 === n4 && (n4 = {});
        var r4 = n4.timeZoneName || "short", i4 = t4 + "|" + r4, s4 = e2[i4];
        return s4 || (s4 = new Intl.DateTimeFormat("en-US", { hour12: false, timeZone: t4, year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit", timeZoneName: r4 }), e2[i4] = s4), s4;
      }(n3, r3);
      return s3.formatToParts(i3);
    }, a2 = function(e3, n3) {
      for (var r3 = o2(e3, n3), s3 = [], a3 = 0; a3 < r3.length; a3 += 1) {
        var u3 = r3[a3], c3 = u3.type, f2 = u3.value, d2 = t2[c3];
        d2 >= 0 && (s3[d2] = parseInt(f2, 10));
      }
      var h2 = s3[3], l2 = 24 === h2 ? 0 : h2, m2 = s3[0] + "-" + s3[1] + "-" + s3[2] + " " + l2 + ":" + s3[4] + ":" + s3[5] + ":000", p2 = +e3;
      return (i2.utc(m2).valueOf() - (p2 -= p2 % 1e3)) / 6e4;
    }, u2 = r2.prototype;
    u2.tz = function(t3, e3) {
      void 0 === t3 && (t3 = s2);
      var n3 = this.utcOffset(), r3 = this.toDate(), o3 = r3.toLocaleString("en-US", { timeZone: t3 }), a3 = Math.round((r3 - new Date(o3)) / 1e3 / 60), u3 = i2(o3).$set("millisecond", this.$ms).utcOffset(15 * -Math.round(r3.getTimezoneOffset() / 15) - a3, true);
      if (e3) {
        var c3 = u3.utcOffset();
        u3 = u3.add(n3 - c3, "minute");
      }
      return u3.$x.$timezone = t3, u3;
    }, u2.offsetName = function(t3) {
      var e3 = this.$x.$timezone || i2.tz.guess(), n3 = o2(this.valueOf(), e3, { timeZoneName: t3 }).find(function(t4) {
        return "timezonename" === t4.type.toLowerCase();
      });
      return n3 && n3.value;
    };
    var c2 = u2.startOf;
    u2.startOf = function(t3, e3) {
      if (!this.$x || !this.$x.$timezone)
        return c2.call(this, t3, e3);
      var n3 = i2(this.format("YYYY-MM-DD HH:mm:ss:SSS"));
      return c2.call(n3, t3, e3).tz(this.$x.$timezone, true);
    }, i2.tz = function(t3, e3, n3) {
      var r3 = n3 && e3, o3 = n3 || e3 || s2, u3 = a2(+i2(), o3);
      if ("string" != typeof t3)
        return i2(t3).tz(o3);
      var c3 = function(t4, e4, n4) {
        var r4 = t4 - 60 * e4 * 1e3, i3 = a2(r4, n4);
        if (e4 === i3)
          return [r4, e4];
        var s3 = a2(r4 -= 60 * (i3 - e4) * 1e3, n4);
        return i3 === s3 ? [r4, i3] : [t4 - 60 * Math.min(i3, s3) * 1e3, Math.max(i3, s3)];
      }(i2.utc(t3, r3).valueOf(), u3, o3), f2 = c3[0], d2 = c3[1], h2 = i2(f2).utcOffset(d2);
      return h2.$x.$timezone = o3, h2;
    }, i2.tz.guess = function() {
      return Intl.DateTimeFormat().resolvedOptions().timeZone;
    }, i2.tz.setDefault = function(t3) {
      s2 = t3;
    };
  };
}(), I = function() {
  var t2 = "minute", e2 = /[+-]\d\d(?::?\d\d)?/g, n2 = /([+-]|\d\d)/g;
  return function(r2, i2, s2) {
    var o2 = i2.prototype;
    s2.utc = function(t3) {
      return new i2({ date: t3, utc: true, args: arguments });
    }, o2.utc = function(e3) {
      var n3 = s2(this.toDate(), { locale: this.$L, utc: true });
      return e3 ? n3.add(this.utcOffset(), t2) : n3;
    }, o2.local = function() {
      return s2(this.toDate(), { locale: this.$L, utc: false });
    };
    var a2 = o2.parse;
    o2.parse = function(t3) {
      t3.utc && (this.$u = true), this.$utils().u(t3.$offset) || (this.$offset = t3.$offset), a2.call(this, t3);
    };
    var u2 = o2.init;
    o2.init = function() {
      if (this.$u) {
        var t3 = this.$d;
        this.$y = t3.getUTCFullYear(), this.$M = t3.getUTCMonth(), this.$D = t3.getUTCDate(), this.$W = t3.getUTCDay(), this.$H = t3.getUTCHours(), this.$m = t3.getUTCMinutes(), this.$s = t3.getUTCSeconds(), this.$ms = t3.getUTCMilliseconds();
      } else
        u2.call(this);
    };
    var c2 = o2.utcOffset;
    o2.utcOffset = function(r3, i3) {
      var s3 = this.$utils().u;
      if (s3(r3))
        return this.$u ? 0 : s3(this.$offset) ? c2.call(this) : this.$offset;
      if ("string" == typeof r3 && (r3 = function(t3) {
        void 0 === t3 && (t3 = "");
        var r4 = t3.match(e2);
        if (!r4)
          return null;
        var i4 = ("" + r4[0]).match(n2) || ["-", 0, 0], s4 = i4[0], o4 = 60 * +i4[1] + +i4[2];
        return 0 === o4 ? 0 : "+" === s4 ? o4 : -o4;
      }(r3), null === r3))
        return this;
      var o3 = Math.abs(r3) <= 16 ? 60 * r3 : r3, a3 = this;
      if (i3)
        return a3.$offset = o3, a3.$u = 0 === r3, a3;
      if (0 !== r3) {
        var u3 = this.$u ? this.toDate().getTimezoneOffset() : -1 * this.utcOffset();
        (a3 = this.local().add(o3 + u3, t2)).$offset = o3, a3.$x.$localOffset = u3;
      } else
        a3 = this.utc();
      return a3;
    };
    var f2 = o2.format;
    o2.format = function(t3) {
      var e3 = t3 || (this.$u ? "YYYY-MM-DDTHH:mm:ss[Z]" : "");
      return f2.call(this, e3);
    }, o2.valueOf = function() {
      var t3 = this.$utils().u(this.$offset) ? 0 : this.$offset + (this.$x.$localOffset || this.$d.getTimezoneOffset());
      return this.$d.valueOf() - 6e4 * t3;
    }, o2.isUTC = function() {
      return !!this.$u;
    }, o2.toISOString = function() {
      return this.toDate().toISOString();
    }, o2.toString = function() {
      return this.toDate().toUTCString();
    };
    var d2 = o2.toDate;
    o2.toDate = function(t3) {
      return "s" === t3 && this.$offset ? s2(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate() : d2.call(this);
    };
    var h2 = o2.diff;
    o2.diff = function(t3, e3, n3) {
      if (t3 && this.$u === t3.$u)
        return h2.call(this, t3, e3, n3);
      var r3 = this.local(), i3 = s2(t3).local();
      return h2.call(r3, i3, e3, n3);
    };
  };
}();
H.extend(z), H.extend(N), H.extend(I), H.extend(k);
const W = { name: "zh-cn", weekdays: "\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"), weekdaysShort: "\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"), weekdaysMin: "\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"), months: "\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"), monthsShort: "1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"), ordinal: (t2, e2) => "W" === e2 ? `${t2}\u5468` : `${t2}\u65E5`, weekStart: 1, yearStart: 4, formats: { LT: "HH:mm", LTS: "HH:mm:ss", L: "YYYY/MM/DD", LL: "YYYY\u5E74M\u6708D\u65E5", LLL: "YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206", LLLL: "YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206", l: "YYYY/M/D", ll: "YYYY\u5E74M\u6708D\u65E5", lll: "YYYY\u5E74M\u6708D\u65E5 HH:mm", llll: "YYYY\u5E74M\u6708D\u65E5dddd HH:mm" }, relativeTime: { future: "%s\u5185", past: "%s\u524D", s: "\u51E0\u79D2", m: "1 \u5206\u949F", mm: "%d \u5206\u949F", h: "1 \u5C0F\u65F6", hh: "%d \u5C0F\u65F6", d: "1 \u5929", dd: "%d \u5929", M: "1 \u4E2A\u6708", MM: "%d \u4E2A\u6708", y: "1 \u5E74", yy: "%d \u5E74" }, meridiem: (t2, e2) => {
  const n2 = 100 * t2 + e2;
  return n2 < 600 ? "\u51CC\u6668" : n2 < 900 ? "\u65E9\u4E0A" : n2 < 1100 ? "\u4E0A\u5348" : n2 < 1300 ? "\u4E2D\u5348" : n2 < 1800 ? "\u4E0B\u5348" : "\u665A\u4E0A";
} }, Z = { name: "en", weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_") };
H.locale("zh", W), H.locale("en", Z), H.extend(N), H.extend(I), H.extend(k);
var balloon = "";
var button = "";
const n = { "selector": '.theme-default-content div[class*="language-"] pre' }, a = () => !!navigator && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/iu.test(navigator.userAgent), l = () => {
  const e2 = useRoute(), l2 = f({ "/": { "copy": "\u590D\u5236\u6210\u529F!", "hint": "copy!" } });
  let i2;
  const p2 = (e3) => {
    if (!e3.hasAttribute("copy-code-registered")) {
      const t2 = document.createElement("button");
      n.pure ? (t2.className = "copy-code-pure-button", t2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon-copy-code"><path d="M704 896v80c0 26.51-21.49 48-48 48H112c-26.51 0-48-21.49-48-48V240c0-26.51 21.49-48 48-48h144v592c0 61.758 50.242 112 112 112h336zm0-688V0H368c-26.51 0-48 21.49-48 48v736c0 26.51 21.49 48 48 48h544c26.51 0 48-21.49 48-48V256H752c-26.4 0-48-21.6-48-48zm241.942-62.058L814.058 14.058A48 48 0 0 0 780.118 0H768v192h192v-12.118a48 48 0 0 0-14.058-33.94z"/></svg>') : (t2.className = "copy-code-button", t2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="icon-copy-code"><path fill="currentColor" d="M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 00-6-6H102a6 6 0 00-6 6v20a6 6 0 006 6h180a6 6 0 006-6z" /></svg>'), t2.addEventListener("click", () => {
        ((e4) => {
          const t3 = document.getSelection(), o2 = !!(t3 && t3.rangeCount > 0) && t3.getRangeAt(0), c2 = document.createElement("textarea");
          c2.value = e4, c2.setAttribute("readonly", ""), c2.style.position = "absolute", c2.style.top = "-9999px", document.body.appendChild(c2), c2.select(), document.execCommand("copy"), n.pure || i2.pop(`<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#06a35a"><path d="M822.812 824.618c-83.076 81.992-188.546 124.614-316.05 127.865-122.085-3.251-223.943-45.873-305.935-127.865S76.213 640.406 72.962 518.682c3.251-127.503 45.873-232.973 127.865-316.05 81.992-83.075 184.211-126.058 305.936-129.309 127.503 3.251 232.973 46.234 316.049 129.31 83.076 83.076 126.059 188.546 129.31 316.05-2.89 121.723-46.234 223.943-129.31 305.935zM432.717 684.111c3.973 3.974 8.307 5.78 13.364 6.14 5.057.362 9.753-1.444 13.365-5.417l292.57-287.515c3.974-3.973 5.78-8.307 5.78-13.364s-1.806-9.753-5.78-13.365l1.807 1.806c-3.973-3.973-8.669-5.779-14.087-6.14-5.418-.361-10.475 1.445-14.809 5.418L460.529 592.006c-3.973 3.25-8.669 4.695-14.448 4.695-5.78 0-10.836-1.445-15.531-3.973l-94.273-72.962c-4.335-3.251-9.392-4.335-14.448-3.973s-9.392 3.25-12.642 7.585l-2.89 3.973c-3.25 4.334-4.334 9.391-3.973 14.81.722 5.417 2.528 10.113 5.779 14.086L432.717 684.11z"/></svg><span>${l2.value.copy} \u{1F389}</span>`, n.duration), document.body.removeChild(c2), o2 && t3 && (t3.removeAllRanges(), t3.addRange(o2));
        })(e3.innerText);
      }), t2.setAttribute("aria-label", l2.value.hint), t2.setAttribute("data-balloon-pos", "left"), e3.parentElement && e3.parentElement.insertBefore(t2, e3), e3.setAttribute("copy-code-registered", "");
    }
  }, d2 = () => {
    const e3 = n.selector;
    setTimeout(() => {
      document.querySelectorAll(e3).forEach(p2);
    }, n.delay || 500);
  };
  onMounted(() => {
    i2 = new b(), a() && !n.showInMobile || d2();
  }), watch(() => e2.path, () => {
    a() && !n.showInMobile || d2();
  });
};
var i = defineClientConfig({ setup: () => {
  l();
} });
var _a;
const isClient = typeof window !== "undefined";
const isString = (val) => typeof val === "string";
const noop = () => {
};
isClient && ((_a = window == null ? void 0 : window.navigator) == null ? void 0 : _a.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);
function resolveUnref(r2) {
  return typeof r2 === "function" ? r2() : unref(r2);
}
function identity(arg) {
  return arg;
}
function tryOnScopeDispose(fn2) {
  if (getCurrentScope()) {
    onScopeDispose(fn2);
    return true;
  }
  return false;
}
function unrefElement(elRef) {
  var _a2;
  const plain = resolveUnref(elRef);
  return (_a2 = plain == null ? void 0 : plain.$el) != null ? _a2 : plain;
}
const defaultWindow = isClient ? window : void 0;
isClient ? window.document : void 0;
isClient ? window.navigator : void 0;
isClient ? window.location : void 0;
function useEventListener(...args) {
  let target;
  let event;
  let listener;
  let options2;
  if (isString(args[0])) {
    [event, listener, options2] = args;
    target = defaultWindow;
  } else {
    [target, event, listener, options2] = args;
  }
  if (!target)
    return noop;
  let cleanup = noop;
  const stopWatch = watch(() => unrefElement(target), (el) => {
    cleanup();
    if (!el)
      return;
    el.addEventListener(event, listener, options2);
    cleanup = () => {
      el.removeEventListener(event, listener, options2);
      cleanup = noop;
    };
  }, { immediate: true, flush: "post" });
  const stop = () => {
    stopWatch();
    cleanup();
  };
  tryOnScopeDispose(stop);
  return stop;
}
const _global = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
const globalKey = "__vueuse_ssr_handlers__";
_global[globalKey] = _global[globalKey] || {};
_global[globalKey];
var SwipeDirection;
(function(SwipeDirection2) {
  SwipeDirection2["UP"] = "UP";
  SwipeDirection2["RIGHT"] = "RIGHT";
  SwipeDirection2["DOWN"] = "DOWN";
  SwipeDirection2["LEFT"] = "LEFT";
  SwipeDirection2["NONE"] = "NONE";
})(SwipeDirection || (SwipeDirection = {}));
var __defProp = Object.defineProperty;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a2, b2) => {
  for (var prop in b2 || (b2 = {}))
    if (__hasOwnProp.call(b2, prop))
      __defNormalProp(a2, prop, b2[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b2)) {
      if (__propIsEnum.call(b2, prop))
        __defNormalProp(a2, prop, b2[prop]);
    }
  return a2;
};
const _TransitionPresets = {
  easeInSine: [0.12, 0, 0.39, 0],
  easeOutSine: [0.61, 1, 0.88, 1],
  easeInOutSine: [0.37, 0, 0.63, 1],
  easeInQuad: [0.11, 0, 0.5, 0],
  easeOutQuad: [0.5, 1, 0.89, 1],
  easeInOutQuad: [0.45, 0, 0.55, 1],
  easeInCubic: [0.32, 0, 0.67, 0],
  easeOutCubic: [0.33, 1, 0.68, 1],
  easeInOutCubic: [0.65, 0, 0.35, 1],
  easeInQuart: [0.5, 0, 0.75, 0],
  easeOutQuart: [0.25, 1, 0.5, 1],
  easeInOutQuart: [0.76, 0, 0.24, 1],
  easeInQuint: [0.64, 0, 0.78, 0],
  easeOutQuint: [0.22, 1, 0.36, 1],
  easeInOutQuint: [0.83, 0, 0.17, 1],
  easeInExpo: [0.7, 0, 0.84, 0],
  easeOutExpo: [0.16, 1, 0.3, 1],
  easeInOutExpo: [0.87, 0, 0.13, 1],
  easeInCirc: [0.55, 0, 1, 0.45],
  easeOutCirc: [0, 0.55, 0.45, 1],
  easeInOutCirc: [0.85, 0, 0.15, 1],
  easeInBack: [0.36, 0, 0.66, -0.56],
  easeOutBack: [0.34, 1.56, 0.64, 1],
  easeInOutBack: [0.68, -0.6, 0.32, 1.6]
};
__spreadValues({
  linear: identity
}, _TransitionPresets);
var r = defineClientConfig({ setup: () => {
  (() => {
    const o2 = usePageData(), r2 = usePageFrontmatter(), i2 = computed(() => Boolean(r2.value.copy) || false !== r2.value.copy && true), p2 = computed(() => {
      const e2 = r2.value.copy;
      return !!i2.value && ("object" == typeof e2 && "disableCopy" in e2 ? e2.disableCopy : false);
    }), u2 = computed(() => {
      const e2 = r2.value.copy;
      return !!i2.value && ("object" == typeof e2 && "disableSelection" in e2 ? e2.disableSelection : false);
    }), s2 = (e2) => {
      const t2 = getSelection();
      if (t2) {
        const a2 = t2.getRangeAt(0);
        if (i2.value) {
          if (p2.value)
            return void e2.preventDefault();
          if (a2.toString().length >= 100) {
            e2.preventDefault();
            const a3 = document.createElement("div");
            a3.appendChild(t2.getRangeAt(0).cloneContents()), e2.clipboardData && (e2.clipboardData.setData("text/html", `${a3.innerHTML}<hr><div class="copyright">${o2.value.copyright.replace(/\\n/g, "<br>")}</div>`), e2.clipboardData.setData("text/plain", `${t2.getRangeAt(0).cloneContents().textContent || ""}
------
${o2.value.copyright}`));
          }
        }
      }
    };
    onMounted(() => {
      const e2 = document.querySelector("#app");
      useEventListener(e2, "copy", s2), watchEffect(() => {
        e2.style.userSelect = u2.value ? "none" : "auto";
      });
    });
  })();
} });
var ModuleTransition_vue_vue_type_style_index_0_scoped_true_lang = "";
const _sfc_main$j = {
  name: "ModuleTransition",
  props: {
    delay: {
      type: String,
      default: "0"
    },
    duration: {
      type: String,
      default: ".25"
    },
    position: {
      type: String,
      default: "left"
    }
  },
  methods: {
    setStyle(items) {
      items.style.transition = `all ${this.duration}s ease-in-out ${this.delay}s`;
      items.style.transform = this.position === "right" ? "translateX(20px)" : "translateX(-20px)";
      items.style.opacity = 0;
    },
    unsetStyle(items) {
      items.style.transform = "translateX(0)";
      items.style.opacity = 1;
    }
  }
};
function _sfc_render$6(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock(Transition, {
    name: "module",
    onEnter: $options.setStyle,
    onAfterEnter: $options.unsetStyle,
    onBeforeLeave: $options.setStyle
  }, {
    default: withCtx(() => [
      renderSlot(_ctx.$slots, "default", {}, void 0, true)
    ]),
    _: 3
  }, 8, ["onEnter", "onAfterEnter", "onBeforeLeave"]);
}
var ModuleTransition = /* @__PURE__ */ _export_sfc(_sfc_main$j, [["render", _sfc_render$6], ["__scopeId", "data-v-069eeca3"], ["__file", "ModuleTransition.vue"]]);
const InterVal = ref();
const rotateVal = ref(0);
const volumeKey = ref("reco-bgm-volume");
const rotate = () => {
  InterVal.value = window.setInterval(() => {
    const cover = document.querySelector(".reco-bgm-cover");
    const btn = document.querySelector(".mini-operation");
    const fm = document.querySelector(".falut-message");
    rotateVal.value += 1;
    cover.style.transform = "rotate(" + rotateVal.value + "deg)";
    cover.style.transition = "0.1s linear";
    btn.style.transform = "rotate(-" + rotateVal.value + "deg)";
    btn.style.transition = "0.1s linear";
    fm.style.transform = "rotate(-" + rotateVal.value + "deg)";
    fm.style.transition = "0.1s linear";
  }, 100);
};
const sessionItem = {
  setVolume(val) {
    sessionStorage.setItem(volumeKey.value, val);
  },
  getVolume() {
    return sessionStorage.getItem(volumeKey.value) || "0";
  },
  removeVolume() {
    sessionStorage.removeItem(volumeKey.value);
  }
};
const player = reactive({
  panelPosition: { "position": { "left": "10px", "bottom": "10px", "z-index": "999999" }, "audios": [{ "name": "\u5361\u519C", "artist": "\u5361\u519C\u94A2\u7434\u7248", "url": "/blog-docs/music/canon/canon.mp3", "cover": "/blog-docs/music/canon/canon.jpg" }, { "name": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053", "artist": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2", "url": "/blog-docs/music/wind/wind.mp3", "cover": "/blog-docs/music/wind/wind.jpg" }, { "name": "\u591C\u7684\u94A2\u7434\u66F2", "artist": "\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB", "url": "/blog-docs/music/night/night.mp3", "cover": "/blog-docs/music/night/night.jpg" }], "autoplay": true, "autoShrink": true, "shrinkMode": "float", "floatPosition": "left", "floatStyle": { "bottom": "100px", "z-index": "999999" }, "color": "#3eaf7c" }.position,
  curIndex: 0,
  curPlayStatus: "paused",
  audio: { "position": { "left": "10px", "bottom": "10px", "z-index": "999999" }, "audios": [{ "name": "\u5361\u519C", "artist": "\u5361\u519C\u94A2\u7434\u7248", "url": "/blog-docs/music/canon/canon.mp3", "cover": "/blog-docs/music/canon/canon.jpg" }, { "name": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053", "artist": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2", "url": "/blog-docs/music/wind/wind.mp3", "cover": "/blog-docs/music/wind/wind.jpg" }, { "name": "\u591C\u7684\u94A2\u7434\u66F2", "artist": "\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB", "url": "/blog-docs/music/night/night.mp3", "cover": "/blog-docs/music/night/night.jpg" }], "autoplay": true, "autoShrink": true, "shrinkMode": "float", "floatPosition": "left", "floatStyle": { "bottom": "100px", "z-index": "999999" }, "color": "#3eaf7c" }.audios,
  autoplay: { "position": { "left": "10px", "bottom": "10px", "z-index": "999999" }, "audios": [{ "name": "\u5361\u519C", "artist": "\u5361\u519C\u94A2\u7434\u7248", "url": "/blog-docs/music/canon/canon.mp3", "cover": "/blog-docs/music/canon/canon.jpg" }, { "name": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053", "artist": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2", "url": "/blog-docs/music/wind/wind.mp3", "cover": "/blog-docs/music/wind/wind.jpg" }, { "name": "\u591C\u7684\u94A2\u7434\u66F2", "artist": "\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB", "url": "/blog-docs/music/night/night.mp3", "cover": "/blog-docs/music/night/night.jpg" }], "autoplay": true, "autoShrink": true, "shrinkMode": "float", "floatPosition": "left", "floatStyle": { "bottom": "100px", "z-index": "999999" }, "color": "#3eaf7c" }.autoplay,
  isFloat: false,
  isMini: false,
  firstLoad: true,
  isMute: false,
  isFault: false,
  floatPosition: { "position": { "left": "10px", "bottom": "10px", "z-index": "999999" }, "audios": [{ "name": "\u5361\u519C", "artist": "\u5361\u519C\u94A2\u7434\u7248", "url": "/blog-docs/music/canon/canon.mp3", "cover": "/blog-docs/music/canon/canon.jpg" }, { "name": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053", "artist": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2", "url": "/blog-docs/music/wind/wind.mp3", "cover": "/blog-docs/music/wind/wind.jpg" }, { "name": "\u591C\u7684\u94A2\u7434\u66F2", "artist": "\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB", "url": "/blog-docs/music/night/night.mp3", "cover": "/blog-docs/music/night/night.jpg" }], "autoplay": true, "autoShrink": true, "shrinkMode": "float", "floatPosition": "left", "floatStyle": { "bottom": "100px", "z-index": "999999" }, "color": "#3eaf7c" }.floatPosition,
  floatStyle: { "position": { "left": "10px", "bottom": "10px", "z-index": "999999" }, "audios": [{ "name": "\u5361\u519C", "artist": "\u5361\u519C\u94A2\u7434\u7248", "url": "/blog-docs/music/canon/canon.mp3", "cover": "/blog-docs/music/canon/canon.jpg" }, { "name": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053", "artist": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2", "url": "/blog-docs/music/wind/wind.mp3", "cover": "/blog-docs/music/wind/wind.jpg" }, { "name": "\u591C\u7684\u94A2\u7434\u66F2", "artist": "\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB", "url": "/blog-docs/music/night/night.mp3", "cover": "/blog-docs/music/night/night.jpg" }], "autoplay": true, "autoShrink": true, "shrinkMode": "float", "floatPosition": "left", "floatStyle": { "bottom": "100px", "z-index": "999999" }, "color": "#3eaf7c" }.floatStyle,
  autoShrink: { "position": { "left": "10px", "bottom": "10px", "z-index": "999999" }, "audios": [{ "name": "\u5361\u519C", "artist": "\u5361\u519C\u94A2\u7434\u7248", "url": "/blog-docs/music/canon/canon.mp3", "cover": "/blog-docs/music/canon/canon.jpg" }, { "name": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053", "artist": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2", "url": "/blog-docs/music/wind/wind.mp3", "cover": "/blog-docs/music/wind/wind.jpg" }, { "name": "\u591C\u7684\u94A2\u7434\u66F2", "artist": "\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB", "url": "/blog-docs/music/night/night.mp3", "cover": "/blog-docs/music/night/night.jpg" }], "autoplay": true, "autoShrink": true, "shrinkMode": "float", "floatPosition": "left", "floatStyle": { "bottom": "100px", "z-index": "999999" }, "color": "#3eaf7c" }.autoShrink,
  shrinkMode: { "position": { "left": "10px", "bottom": "10px", "z-index": "999999" }, "audios": [{ "name": "\u5361\u519C", "artist": "\u5361\u519C\u94A2\u7434\u7248", "url": "/blog-docs/music/canon/canon.mp3", "cover": "/blog-docs/music/canon/canon.jpg" }, { "name": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053", "artist": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2", "url": "/blog-docs/music/wind/wind.mp3", "cover": "/blog-docs/music/wind/wind.jpg" }, { "name": "\u591C\u7684\u94A2\u7434\u66F2", "artist": "\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB", "url": "/blog-docs/music/night/night.mp3", "cover": "/blog-docs/music/night/night.jpg" }], "autoplay": true, "autoShrink": true, "shrinkMode": "float", "floatPosition": "left", "floatStyle": { "bottom": "100px", "z-index": "999999" }, "color": "#3eaf7c" }.shrinkMode,
  color: { "position": { "left": "10px", "bottom": "10px", "z-index": "999999" }, "audios": [{ "name": "\u5361\u519C", "artist": "\u5361\u519C\u94A2\u7434\u7248", "url": "/blog-docs/music/canon/canon.mp3", "cover": "/blog-docs/music/canon/canon.jpg" }, { "name": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053", "artist": "\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2", "url": "/blog-docs/music/wind/wind.mp3", "cover": "/blog-docs/music/wind/wind.jpg" }, { "name": "\u591C\u7684\u94A2\u7434\u66F2", "artist": "\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB", "url": "/blog-docs/music/night/night.mp3", "cover": "/blog-docs/music/night/night.jpg" }], "autoplay": true, "autoShrink": true, "shrinkMode": "float", "floatPosition": "left", "floatStyle": { "bottom": "100px", "z-index": "999999" }, "color": "#3eaf7c" }.color
});
const playState = watch(() => player.curPlayStatus, (newVal, oldVal) => {
  if (newVal === "playing") {
    rotate();
  } else {
    window.clearInterval(InterVal.value);
  }
});
var BgMusicPlayer_vue_vue_type_style_index_0_scoped_true_lang = "";
const _withScopeId$1 = (n2) => (pushScopeId("data-v-43e364fd"), n2 = n2(), popScopeId(), n2);
const _hoisted_1$e = { class: "reco-bgm-panel" };
const _hoisted_2$7 = ["src"];
const _hoisted_3$5 = ["src"];
const _hoisted_4$3 = { class: "mini-operation" };
const _hoisted_5$3 = ["onClick"];
const _hoisted_6$2 = ["onClick"];
const _hoisted_7$2 = { class: "falut-message" };
const _hoisted_8$2 = { class: "reco-bgm-info" };
const _hoisted_9$2 = { class: "info-box" };
const _hoisted_10$1 = /* @__PURE__ */ _withScopeId$1(() => /* @__PURE__ */ createBaseVNode("i", { class: "reco-bgm reco-bgm-music music" }, null, -1));
const _hoisted_11$1 = { class: "info-box" };
const _hoisted_12$2 = /* @__PURE__ */ _withScopeId$1(() => /* @__PURE__ */ createBaseVNode("i", { class: "reco-bgm reco-bgm-artist" }, null, -1));
const _hoisted_13$2 = { class: "reco-bgm-progress" };
const _hoisted_14$1 = { class: "reco-bgm-operation" };
const _hoisted_15$1 = /* @__PURE__ */ _withScopeId$1(() => /* @__PURE__ */ createBaseVNode("i", { class: "reco-bgm reco-bgm-left" }, null, -1));
const _hoisted_16 = [
  _hoisted_15$1
];
const _sfc_main$i = /* @__PURE__ */ defineComponent({
  __name: "BgMusicPlayer",
  setup(__props) {
    useCssVars((_ctx) => ({
      "2c281396": unref(player).color
    }));
    const bgm = ref(null);
    const vbar = ref(null);
    const pbar = ref(null);
    onMounted(() => {
      playState();
      if (player.floatPosition === "left") {
        player.floatStyle = {
          ...player.floatStyle,
          left: "0",
          "border-top-right-radius": "20px",
          "border-bottom-right-radius": "20px"
        };
      } else {
        player.floatStyle = {
          ...player.floatStyle,
          right: "0",
          "border-top-left-radius": "20px",
          "border-bottom-left-radius": "20px"
        };
      }
      if (player.autoShrink) {
        changeBgmInfo(true);
      }
    });
    const changeBgmInfo = (flag) => {
      const isMobile = !!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      if (isMobile || player.shrinkMode === "float") {
        player.isFloat = flag;
      } else if (!isMobile && player.shrinkMode === "mini") {
        player.isMini = flag;
      }
    };
    const playReady = () => {
      if (player.firstLoad) {
        if (sessionItem.getVolume()) {
          const percent = sessionItem.getVolume();
          vbar.value.style.width = Number(percent) * 100 + "%";
          bgm.value.volume = percent;
        } else {
          const vbar_width = bgm.value.volume * 100 + "%";
          vbar.value.style.width = vbar_width;
        }
        player.firstLoad = false;
        if (player.autoplay) {
          const playPromise = bgm.value.play();
          if (playPromise !== void 0) {
            playPromise.then((res) => {
              player.curPlayStatus = "playing";
            }).catch((err) => {
              window.addEventListener("click", pageClickHandle);
            });
          }
        }
      }
      if (player.curPlayStatus === "playing") {
        playBgm();
      }
    };
    const pageClickHandle = () => {
      if (player.autoplay) {
        playBgm();
      }
      window.removeEventListener("click", pageClickHandle);
    };
    const pauseBgm = () => {
      bgm.value.pause();
      player.curPlayStatus = "paused";
    };
    const playBgm = () => {
      const playPromise = bgm.value.play();
      if (playPromise !== void 0) {
        playPromise.then((res) => {
          if (player.isFault) {
            player.isFault = false;
          }
        }).catch((err) => {
          console.log(err);
          player.isFault = true;
          pauseBgm();
        });
      }
      player.curPlayStatus = "playing";
    };
    const playNext = () => {
      pbar.value.style.width = 0;
      player.isFault = false;
      if (player.curIndex >= player.audio.length - 1) {
        player.curIndex = 0;
      } else {
        player.curIndex++;
      }
    };
    const playLast = () => {
      pbar.value.style.width = 0;
      player.isFault = false;
      if (player.curIndex <= 0) {
        player.curIndex = player.audio.length - 1;
      } else {
        player.curIndex--;
      }
    };
    const bgmEnded = () => {
      pbar.value.style.width = 0;
      playNext();
    };
    const timeUpdate = () => {
      const total_time = bgm.value.duration;
      const cur_time = bgm.value.currentTime;
      const bar_width = cur_time / total_time * 100 + "%";
      pbar.value.style.width = bar_width;
    };
    const progressJump = (e2) => {
      const total_time = bgm.value.duration;
      const percent = e2.offsetX / 150;
      if (isNaN(total_time))
        return;
      bgm.value.currentTime = percent * total_time;
    };
    const volumeJump = (e2) => {
      const percent = e2.offsetX / 57;
      if (percent >= 0 && percent <= 1) {
        player.isMute = !(percent > 0);
        vbar.value.style.width = percent * 100 + "%";
        bgm.value.volume = percent;
        sessionItem.setVolume(bgm.value.volume);
      }
    };
    const muteBgm = () => {
      player.isMute = true;
      sessionItem.setVolume(bgm.value.volume);
      vbar.value.style.width = 0;
      bgm.value.volume = 0;
    };
    const unMuteBgm = () => {
      player.isMute = false;
      if (sessionItem.getVolume()) {
        const percent = sessionItem.getVolume();
        vbar.value.style.width = Number(percent) * 100 + "%";
        bgm.value.volume = percent;
      } else {
        vbar.value.style.width = "100%";
        bgm.value.volume = 1;
      }
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", _hoisted_1$e, [
        createBaseVNode("audio", {
          id: "bgm",
          src: unref(player).audio[unref(player).curIndex].url,
          ref_key: "bgm",
          ref: bgm,
          onEnded: bgmEnded,
          onCanplay: playReady,
          onTimeupdate: timeUpdate
        }, null, 40, _hoisted_2$7),
        createVNode(ModuleTransition, {
          position: unref(player).floatPosition
        }, {
          default: withCtx(() => [
            withDirectives(createBaseVNode("div", {
              onClick: _cache[0] || (_cache[0] = ($event) => changeBgmInfo(false)),
              class: "reco-float-box",
              style: normalizeStyle(unref(player).floatStyle)
            }, [
              createBaseVNode("img", {
                src: unref(player).audio[unref(player).curIndex].cover
              }, null, 8, _hoisted_3$5)
            ], 4), [
              [vShow, unref(player).isFloat]
            ])
          ]),
          _: 1
        }, 8, ["position"]),
        createVNode(ModuleTransition, null, {
          default: withCtx(() => [
            withDirectives(createBaseVNode("div", {
              class: "reco-bgm-box",
              style: normalizeStyle(unref(player).panelPosition)
            }, [
              createBaseVNode("div", {
                class: "reco-bgm-cover",
                onClick: _cache[1] || (_cache[1] = ($event) => changeBgmInfo(false)),
                style: normalizeStyle(`background-image:url(${unref(player).audio[unref(player).curIndex].cover})`)
              }, [
                withDirectives(createBaseVNode("div", _hoisted_4$3, [
                  withDirectives(createBaseVNode("i", {
                    onClick: withModifiers(pauseBgm, ["stop"]),
                    class: "reco-bgm reco-bgm-pause"
                  }, null, 8, _hoisted_5$3), [
                    [vShow, unref(player).curPlayStatus === "playing" && unref(player).isMini]
                  ]),
                  withDirectives(createBaseVNode("i", {
                    onClick: withModifiers(playBgm, ["stop"]),
                    class: "reco-bgm reco-bgm-play"
                  }, null, 8, _hoisted_6$2), [
                    [vShow, unref(player).curPlayStatus === "paused" && unref(player).isMini]
                  ])
                ], 512), [
                  [vShow, unref(player).isMini]
                ]),
                withDirectives(createBaseVNode("div", _hoisted_7$2, "\u64AD\u653E\u5931\u8D25", 512), [
                  [vShow, unref(player).isFault]
                ])
              ], 4),
              createVNode(ModuleTransition, { duration: ".15" }, {
                default: withCtx(() => [
                  withDirectives(createBaseVNode("div", _hoisted_8$2, [
                    createBaseVNode("div", _hoisted_9$2, [
                      _hoisted_10$1,
                      createTextVNode(toDisplayString(unref(player).audio[unref(player).curIndex].name), 1)
                    ]),
                    createBaseVNode("div", _hoisted_11$1, [
                      _hoisted_12$2,
                      createTextVNode(toDisplayString(unref(player).audio[unref(player).curIndex].artist), 1)
                    ]),
                    createBaseVNode("div", _hoisted_13$2, [
                      createBaseVNode("div", {
                        class: "progress-bar",
                        onClick: progressJump
                      }, [
                        createBaseVNode("div", {
                          class: "bar",
                          ref_key: "pbar",
                          ref: pbar
                        }, null, 512)
                      ])
                    ]),
                    createBaseVNode("div", _hoisted_14$1, [
                      createBaseVNode("i", {
                        class: "reco-bgm reco-bgm-last last",
                        onClick: playLast
                      }),
                      withDirectives(createBaseVNode("i", {
                        onClick: pauseBgm,
                        class: "reco-bgm reco-bgm-pause pause"
                      }, null, 512), [
                        [vShow, unref(player).curPlayStatus === "playing"]
                      ]),
                      withDirectives(createBaseVNode("i", {
                        ref: "play",
                        onClick: playBgm,
                        class: "reco-bgm reco-bgm-play play"
                      }, null, 512), [
                        [vShow, unref(player).curPlayStatus === "paused"]
                      ]),
                      createBaseVNode("i", {
                        class: "reco-bgm reco-bgm-next next",
                        onClick: playNext
                      }),
                      withDirectives(createBaseVNode("i", {
                        onClick: muteBgm,
                        class: "reco-bgm reco-bgm-volume1 volume"
                      }, null, 512), [
                        [vShow, !unref(player).isMute]
                      ]),
                      withDirectives(createBaseVNode("i", {
                        onClick: unMuteBgm,
                        class: "reco-bgm reco-bgm-mute mute"
                      }, null, 512), [
                        [vShow, unref(player).isMute]
                      ]),
                      createBaseVNode("div", {
                        class: "volume-bar",
                        onClick: volumeJump
                      }, [
                        createBaseVNode("div", {
                          class: "bar",
                          ref_key: "vbar",
                          ref: vbar
                        }, null, 512)
                      ])
                    ])
                  ], 512), [
                    [vShow, !unref(player).isMini]
                  ])
                ]),
                _: 1
              }),
              createVNode(ModuleTransition, { duration: ".15" }, {
                default: withCtx(() => [
                  withDirectives(createBaseVNode("div", {
                    onClick: _cache[2] || (_cache[2] = ($event) => changeBgmInfo(true)),
                    class: "reco-bgm-left-box"
                  }, _hoisted_16, 512), [
                    [vShow, !unref(player).isMini]
                  ])
                ]),
                _: 1
              })
            ], 4), [
              [vShow, !unref(player).isFloat]
            ])
          ]),
          _: 1
        })
      ]);
    };
  }
});
var BgMusicPlayer = /* @__PURE__ */ _export_sfc(_sfc_main$i, [["__scopeId", "data-v-43e364fd"], ["__file", "BgMusicPlayer.vue"]]);
var clientConfig14 = defineClientConfig({
  enhance({ app }) {
    app.component("BgMusicPlayer", BgMusicPlayer);
  },
  rootComponents: [BgMusicPlayer]
});
class Particle {
  constructor({ origin, size: size2, speed, color, angle, context }) {
    this.origin = origin;
    this.position = { ...this.origin };
    this.size = size2;
    this.color = color;
    this.speed = speed;
    this.angle = angle;
    this.context = context;
    this.renderCount = 0;
  }
  draw() {
  }
  move() {
    this.position.x = Math.sin(this.angle) * this.speed + this.position.x;
    this.position.y = Math.cos(this.angle) * this.speed + this.position.y + this.renderCount * 0.3;
    this.renderCount++;
  }
}
class Circle extends Particle {
  draw() {
    this.context.fillStyle = this.color;
    this.context.beginPath();
    this.context.arc(this.position.x, this.position.y, this.size, 0, Math.PI * 2);
    this.context.fill();
  }
}
class Star extends Particle {
  constructor({ origin, size: size2, speed, color, angle, context }) {
    super({ origin, size: size2, speed, color, angle, context });
    this.rotate = 0;
  }
  draw() {
    this.context.fillStyle = this.color;
    this.context.beginPath();
    const R2 = this.size * 2;
    const r2 = this.size;
    for (let i2 = 0; i2 < 5; i2++) {
      this.context.lineTo(Math.cos((18 + 72 * i2 - this.rotate) / 180 * Math.PI) * R2 + this.position.x, -Math.sin((18 + 72 * i2 - this.rotate) / 180 * Math.PI) * R2 + this.position.y);
      this.context.lineTo(Math.cos((54 + 72 * i2 - this.rotate) / 180 * Math.PI) * r2 + this.position.x, -Math.sin((54 + 72 * i2 - this.rotate) / 180 * Math.PI) * r2 + this.position.y);
    }
    this.context.fill();
    this.rotate += 5;
  }
}
class Boom {
  constructor({ origin, context, shape = "star", size: size2 = 2, particleCount = 10, clientSize }) {
    this.origin = origin;
    this.context = context;
    this.shape = shape;
    this.size = size2;
    this.particleCount = particleCount;
    this.clientSize = clientSize;
    this.stop = false;
    this.particles = [];
  }
  randomArray(range) {
    const length = range.length;
    const randomIndex = Math.floor(length * Math.random());
    return range[randomIndex];
  }
  randomColor() {
    const range = ["8", "9", "A", "B", "C", "D", "E", "F"];
    return "#" + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range);
  }
  randomRange(start, end) {
    return (end - start) * Math.random() + start;
  }
  getShape(shape) {
    const shapeMap = {
      star: Star,
      circle: Circle
    };
    return shapeMap[shape];
  }
  init() {
    for (let i2 = 0; i2 < this.particleCount; i2++) {
      const Shape = this.getShape(this.shape);
      const particle = new Shape({
        context: this.context,
        origin: this.origin,
        size: this.size,
        color: this.randomColor(),
        angle: this.randomRange(Math.PI - 1, Math.PI + 1),
        speed: this.randomRange(1, 6)
      });
      this.particles.push(particle);
    }
  }
  move() {
    this.particles.forEach((particle, index2) => {
      if (particle.position.x < 0 || particle.position.x > this.clientSize.width || particle.position.y > this.clientSize.height) {
        this.particles.splice(index2, 1);
        return;
      }
      particle.move();
    });
    if (this.particles.length == 0) {
      this.stop = true;
    }
  }
  draw() {
    this.particles.forEach((particle) => particle.draw());
  }
}
const _sfc_main$h = {
  name: "CursorEffects",
  data() {
    return {
      shape: "star",
      size: 4,
      zIndex: 999999999,
      computerCanvas: null,
      renderCanvas: null,
      computerContext: null,
      renderContext: null,
      clientSize: { width: 0, height: 0 },
      resizeTimeout: null
    };
  },
  mounted() {
    this.computerCanvas = document.createElement("canvas");
    this.renderCanvas = document.getElementById("vuepress-canvas-cursor");
    this.computerContext = this.computerCanvas.getContext("2d");
    this.renderContext = this.renderCanvas.getContext("2d");
    this.clientSize.width = window.innerWidth;
    this.clientSize.height = window.innerHeight;
    this.booms = [];
    this.running = false;
    this.init();
  },
  methods: {
    init() {
      this.setStyle(this.renderCanvas.style);
      this.renderCanvas.width = this.computerCanvas.width = this.clientSize.width;
      this.renderCanvas.height = this.computerCanvas.height = this.clientSize.height;
      this.makeHighRes(this.renderCanvas, this.renderContext);
      this.makeHighRes(this.computerCanvas, this.computerContext);
      window.addEventListener("mousedown", this.handleMouseDown);
      window.addEventListener("pagehide", this.handlePageHide);
      window.addEventListener("resize", this.handleResize);
    },
    setStyle(style2) {
      style2.position = "fixed";
      style2.top = 0;
      style2.left = 0;
      style2.zIndex = this.zIndex;
      style2.pointerEvents = "none";
      style2.width = this.clientSize.width;
      style2.height = this.clientSize.height;
    },
    makeHighRes(canvas, ctx) {
      const dpr = window.devicePixelRatio || 1;
      const oldWidth = canvas.width;
      const oldHeight = canvas.height;
      canvas.width = Math.round(oldWidth * dpr);
      canvas.height = Math.round(oldHeight * dpr);
      canvas.style.width = oldWidth + "px";
      canvas.style.height = oldHeight + "px";
      ctx.scale(dpr, dpr);
    },
    handleMouseDown(e2) {
      const boom = new Boom({
        origin: { x: e2.clientX, y: e2.clientY },
        context: this.computerContext,
        size: this.size,
        shape: this.shape,
        clientSize: this.clientSize
      });
      boom.init();
      this.booms.push(boom);
      this.running || this.run();
    },
    handlePageHide() {
      this.booms = [];
      this.running = false;
    },
    handleResize() {
      if (this.resizeTimeout != null) {
        clearTimeout(this.resizeTimeout);
      }
      this.resizeTimeout = setTimeout(() => {
        this.clientSize.width = window.innerWidth;
        this.clientSize.height = window.innerHeight;
        this.renderCanvas.width = this.computerCanvas.width = this.clientSize.width;
        this.renderCanvas.height = this.computerCanvas.height = this.clientSize.height;
        this.makeHighRes(this.renderCanvas, this.renderContext);
        this.makeHighRes(this.computerCanvas, this.computerContext);
      }, 500);
    },
    run() {
      this.running = true;
      if (this.booms.length == 0) {
        return this.running = false;
      }
      requestAnimationFrame(this.run);
      this.computerContext.clearRect(0, 0, this.clientSize.width, this.clientSize.height);
      this.renderContext.clearRect(0, 0, this.clientSize.width, this.clientSize.height);
      this.booms.forEach((boom, index2) => {
        if (boom.stop) {
          this.booms.splice(index2, 1);
          return;
        }
        boom.move();
        boom.draw();
      });
      this.renderContext.drawImage(this.computerCanvas, 0, 0, this.clientSize.width, this.clientSize.height);
    }
  }
};
const _hoisted_1$d = { id: "vuepress-canvas-cursor" };
function _sfc_render$5(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("canvas", _hoisted_1$d);
}
var CursorEffects = /* @__PURE__ */ _export_sfc(_sfc_main$h, [["render", _sfc_render$5], ["__file", "CursorEffects.vue"]]);
var clientConfig15 = defineClientConfig({
  enhance({ app }) {
    app.component("CursorEffects", CursorEffects);
  },
  rootComponents: [CursorEffects]
});
const _sfc_main$g = {
  name: "DynamicTitle",
  data() {
    return {
      originTitle: "",
      recoverTimeout: null,
      config: {
        showIcon: "/favicon.ico",
        showText: "(/\u2267\u25BD\u2266/)\u54A6\uFF01\u53C8\u597D\u4E86\uFF01",
        hideIcon: "/favicon.ico",
        hideText: "(\u25CF\u2014\u25CF)\u5594\u54DF\uFF0C\u5D29\u6E83\u5566\uFF01",
        recoverTime: 2e3
      }
    };
  },
  mounted() {
    this.originTitle = document.title;
    if (this.config.showIcon !== "") {
      this.getIconElm().setAttribute("href", this.config.showIcon);
    }
    document.addEventListener("visibilitychange", () => {
      if (document.hidden) {
        this.hidden();
      } else {
        this.visible();
      }
    });
  },
  methods: {
    hidden() {
      if (this.config.hideIcon !== "") {
        this.getIconElm().setAttribute("href", this.config.hideIcon);
      }
      document.title = this.config.hideText;
      clearTimeout(this.recoverTimeout);
    },
    visible() {
      if (this.config.showIcon !== "") {
        this.getIconElm().setAttribute("href", this.config.showIcon);
      }
      document.title = this.config.showText + this.originTitle;
      this.recoverTimeout = setTimeout(() => {
        document.title = this.originTitle;
      }, this.config.recoverTime);
    },
    getIconElm() {
      let elm = document.querySelector("link[rel=icon]");
      if (elm === null) {
        elm = document.createElement("link");
        elm.setAttribute("rel", "icon");
        document.head.appendChild(elm);
      }
      return elm;
    }
  },
  watch: {
    $route(to2, from) {
      if (to2.path !== from.path) {
        this.originTitle = document.title;
        clearTimeout(this.recoverTimeout);
      }
    }
  }
};
function _sfc_render$4(_ctx, _cache, $props, $setup, $data, $options) {
  return null;
}
var DynamicTitle = /* @__PURE__ */ _export_sfc(_sfc_main$g, [["render", _sfc_render$4], ["__file", "DynamicTitle.vue"]]);
var clientConfig16 = defineClientConfig({
  enhance({ app }) {
    app.component(DynamicTitle.name, DynamicTitle);
  }
});
var live2dJSString = `!function(t){function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var e={};i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=4)}([function(t,i,e){"use strict";function r(){this.live2DModel=null,this.modelMatrix=null,this.eyeBlink=null,this.physics=null,this.pose=null,this.debugMode=!1,this.initialized=!1,this.updating=!1,this.alpha=1,this.accAlpha=0,this.lipSync=!1,this.lipSyncValue=0,this.accelX=0,this.accelY=0,this.accelZ=0,this.dragX=0,this.dragY=0,this.startTimeMSec=null,this.mainMotionManager=new h,this.expressionManager=new h,this.motions={},this.expressions={},this.isTexLoaded=!1}function o(){AMotion.prototype.constructor.call(this),this.paramList=new Array}function n(){this.id="",this.type=-1,this.value=null}function s(){this.nextBlinkTime=null,this.stateStartTime=null,this.blinkIntervalMsec=null,this.eyeState=g.STATE_FIRST,this.blinkIntervalMsec=4e3,this.closingMotionMsec=100,this.closedMotionMsec=50,this.openingMotionMsec=150,this.closeIfZero=!0,this.eyeID_L="PARAM_EYE_L_OPEN",this.eyeID_R="PARAM_EYE_R_OPEN"}function _(){this.tr=new Float32Array(16),this.identity()}function a(t,i){_.prototype.constructor.call(this),this.width=t,this.height=i}function h(){MotionQueueManager.prototype.constructor.call(this),this.currentPriority=null,this.reservePriority=null,this.super=MotionQueueManager.prototype}function l(){this.physicsList=new Array,this.startTimeMSec=UtSystem.getUserTimeMSec()}function $(){this.lastTime=0,this.lastModel=null,this.partsGroups=new Array}function u(t){this.paramIndex=-1,this.partsIndex=-1,this.link=null,this.id=t}function p(){this.EPSILON=.01,this.faceTargetX=0,this.faceTargetY=0,this.faceX=0,this.faceY=0,this.faceVX=0,this.faceVY=0,this.lastTimeSec=0}function f(){_.prototype.constructor.call(this),this.screenLeft=null,this.screenRight=null,this.screenTop=null,this.screenBottom=null,this.maxLeft=null,this.maxRight=null,this.maxTop=null,this.maxBottom=null,this.max=Number.MAX_VALUE,this.min=0}function c(){}var d=0;r.prototype.getModelMatrix=function(){return this.modelMatrix},r.prototype.setAlpha=function(t){t>.999&&(t=1),t<.001&&(t=0),this.alpha=t},r.prototype.getAlpha=function(){return this.alpha},r.prototype.isInitialized=function(){return this.initialized},r.prototype.setInitialized=function(t){this.initialized=t},r.prototype.isUpdating=function(){return this.updating},r.prototype.setUpdating=function(t){this.updating=t},r.prototype.getLive2DModel=function(){return this.live2DModel},r.prototype.setLipSync=function(t){this.lipSync=t},r.prototype.setLipSyncValue=function(t){this.lipSyncValue=t},r.prototype.setAccel=function(t,i,e){this.accelX=t,this.accelY=i,this.accelZ=e},r.prototype.setDrag=function(t,i){this.dragX=t,this.dragY=i},r.prototype.getMainMotionManager=function(){return this.mainMotionManager},r.prototype.getExpressionManager=function(){return this.expressionManager},r.prototype.loadModelData=function(t,i){var e=c.getPlatformManager();this.debugMode&&e.log("Load model : "+t);var r=this;e.loadLive2DModel(t,function(t){if(r.live2DModel=t,r.live2DModel.saveParam(),0!=Live2D.getError())return void console.error("Error : Failed to loadModelData().");r.modelMatrix=new a(r.live2DModel.getCanvasWidth(),r.live2DModel.getCanvasHeight()),r.modelMatrix.setWidth(2),r.modelMatrix.setCenterPosition(0,0),i(r.live2DModel)})},r.prototype.loadTexture=function(t,i,e){d++;var r=c.getPlatformManager();this.debugMode&&r.log("Load Texture : "+i);var o=this;r.loadTexture(this.live2DModel,t,i,function(){d--,0==d&&(o.isTexLoaded=!0),"function"==typeof e&&e()})},r.prototype.loadMotion=function(t,i,e){var r=c.getPlatformManager();this.debugMode&&r.log("Load Motion : "+i);var o=null,n=this;r.loadBytes(i,function(i){o=Live2DMotion.loadMotion(i),null!=t&&(n.motions[t]=o),e(o)})},r.prototype.loadExpression=function(t,i,e){var r=c.getPlatformManager();this.debugMode&&r.log("Load Expression : "+i);var n=this;r.loadBytes(i,function(i){null!=t&&(n.expressions[t]=o.loadJson(i)),"function"==typeof e&&e()})},r.prototype.loadPose=function(t,i){var e=c.getPlatformManager();this.debugMode&&e.log("Load Pose : "+t);var r=this;try{e.loadBytes(t,function(t){r.pose=$.load(t),"function"==typeof i&&i()})}catch(t){console.warn(t)}},r.prototype.loadPhysics=function(t){var i=c.getPlatformManager();this.debugMode&&i.log("Load Physics : "+t);var e=this;try{i.loadBytes(t,function(t){e.physics=l.load(t)})}catch(t){console.warn(t)}},r.prototype.hitTestSimple=function(t,i,e){if(null===this.live2DModel)return!1;var r=this.live2DModel.getDrawDataIndex(t);if(r<0)return!1;for(var o=this.live2DModel.getTransformedPoints(r),n=this.live2DModel.getCanvasWidth(),s=0,_=this.live2DModel.getCanvasHeight(),a=0,h=0;h<o.length;h+=2){var l=o[h],$=o[h+1];l<n&&(n=l),l>s&&(s=l),$<_&&(_=$),$>a&&(a=$)}var u=this.modelMatrix.invertTransformX(i),p=this.modelMatrix.invertTransformY(e);return n<=u&&u<=s&&_<=p&&p<=a},r.prototype.hitTestSimpleCustom=function(t,i,e,r){return null!==this.live2DModel&&t&&(e>=t[0]&&e<=i[0]&&r<=t[1]&&r>=i[1])},o.prototype=new AMotion,o.EXPRESSION_DEFAULT="DEFAULT",o.TYPE_SET=0,o.TYPE_ADD=1,o.TYPE_MULT=2,o.loadJson=function(t){var i=new o,e=c.getPlatformManager(),r=e.jsonParseFromBytes(t);if(i.setFadeIn(parseInt(r.fade_in)>0?parseInt(r.fade_in):1e3),i.setFadeOut(parseInt(r.fade_out)>0?parseInt(r.fade_out):1e3),null==r.params)return i;var s=r.params,_=s.length;i.paramList=[];for(var a=0;a<_;a++){var h=s[a],l=h.id.toString(),$=parseFloat(h.val),u=o.TYPE_ADD,p=null!=h.calc?h.calc.toString():"add";if((u="add"===p?o.TYPE_ADD:"mult"===p?o.TYPE_MULT:"set"===p?o.TYPE_SET:o.TYPE_ADD)==o.TYPE_ADD){var f=null==h.def?0:parseFloat(h.def);$-=f}else if(u==o.TYPE_MULT){var f=null==h.def?1:parseFloat(h.def);0==f&&(f=1),$/=f}var d=new n;d.id=l,d.type=u,d.value=$,i.paramList.push(d)}return i},o.prototype.updateParamExe=function(t,i,e,r){for(var n=this.paramList.length-1;n>=0;--n){var s=this.paramList[n];s.type==o.TYPE_ADD?t.addToParamFloat(s.id,s.value,e):s.type==o.TYPE_MULT?t.multParamFloat(s.id,s.value,e):s.type==o.TYPE_SET&&t.setParamFloat(s.id,s.value,e)}},s.prototype.calcNextBlink=function(){return UtSystem.getUserTimeMSec()+Math.random()*(2*this.blinkIntervalMsec-1)},s.prototype.setInterval=function(t){this.blinkIntervalMsec=t},s.prototype.setEyeMotion=function(t,i,e){this.closingMotionMsec=t,this.closedMotionMsec=i,this.openingMotionMsec=e},s.prototype.updateParam=function(t){var i,e=UtSystem.getUserTimeMSec(),r=0;switch(this.eyeState){case g.STATE_CLOSING:r=(e-this.stateStartTime)/this.closingMotionMsec,r>=1&&(r=1,this.eyeState=g.STATE_CLOSED,this.stateStartTime=e),i=1-r;break;case g.STATE_CLOSED:r=(e-this.stateStartTime)/this.closedMotionMsec,r>=1&&(this.eyeState=g.STATE_OPENING,this.stateStartTime=e),i=0;break;case g.STATE_OPENING:r=(e-this.stateStartTime)/this.openingMotionMsec,r>=1&&(r=1,this.eyeState=g.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink()),i=r;break;case g.STATE_INTERVAL:this.nextBlinkTime<e&&(this.eyeState=g.STATE_CLOSING,this.stateStartTime=e),i=1;break;case g.STATE_FIRST:default:this.eyeState=g.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink(),i=1}this.closeIfZero||(i=-i),t.setParamFloat(this.eyeID_L,i),t.setParamFloat(this.eyeID_R,i)};var g=function(){};g.STATE_FIRST="STATE_FIRST",g.STATE_INTERVAL="STATE_INTERVAL",g.STATE_CLOSING="STATE_CLOSING",g.STATE_CLOSED="STATE_CLOSED",g.STATE_OPENING="STATE_OPENING",_.mul=function(t,i,e){var r,o,n,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<4;r++)for(o=0;o<4;o++)for(n=0;n<4;n++)s[r+4*o]+=t[r+4*n]*i[n+4*o];for(r=0;r<16;r++)e[r]=s[r]},_.prototype.identity=function(){for(var t=0;t<16;t++)this.tr[t]=t%5==0?1:0},_.prototype.getArray=function(){return this.tr},_.prototype.getCopyMatrix=function(){return new Float32Array(this.tr)},_.prototype.setMatrix=function(t){if(null!=this.tr&&this.tr.length==this.tr.length)for(var i=0;i<16;i++)this.tr[i]=t[i]},_.prototype.getScaleX=function(){return this.tr[0]},_.prototype.getScaleY=function(){return this.tr[5]},_.prototype.transformX=function(t){return this.tr[0]*t+this.tr[12]},_.prototype.transformY=function(t){return this.tr[5]*t+this.tr[13]},_.prototype.invertTransformX=function(t){return(t-this.tr[12])/this.tr[0]},_.prototype.invertTransformY=function(t){return(t-this.tr[13])/this.tr[5]},_.prototype.multTranslate=function(t,i){var e=[1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1];_.mul(e,this.tr,this.tr)},_.prototype.translate=function(t,i){this.tr[12]=t,this.tr[13]=i},_.prototype.translateX=function(t){this.tr[12]=t},_.prototype.translateY=function(t){this.tr[13]=t},_.prototype.multScale=function(t,i){var e=[t,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1];_.mul(e,this.tr,this.tr)},_.prototype.scale=function(t,i){this.tr[0]=t,this.tr[5]=i},a.prototype=new _,a.prototype.setPosition=function(t,i){this.translate(t,i)},a.prototype.setCenterPosition=function(t,i){var e=this.width*this.getScaleX(),r=this.height*this.getScaleY();this.translate(t-e/2,i-r/2)},a.prototype.top=function(t){this.setY(t)},a.prototype.bottom=function(t){var i=this.height*this.getScaleY();this.translateY(t-i)},a.prototype.left=function(t){this.setX(t)},a.prototype.right=function(t){var i=this.width*this.getScaleX();this.translateX(t-i)},a.prototype.centerX=function(t){var i=this.width*this.getScaleX();this.translateX(t-i/2)},a.prototype.centerY=function(t){var i=this.height*this.getScaleY();this.translateY(t-i/2)},a.prototype.setX=function(t){this.translateX(t)},a.prototype.setY=function(t){this.translateY(t)},a.prototype.setHeight=function(t){var i=t/this.height,e=-i;this.scale(i,e)},a.prototype.setWidth=function(t){var i=t/this.width,e=-i;this.scale(i,e)},h.prototype=new MotionQueueManager,h.prototype.getCurrentPriority=function(){return this.currentPriority},h.prototype.getReservePriority=function(){return this.reservePriority},h.prototype.reserveMotion=function(t){return!(this.reservePriority>=t)&&(!(this.currentPriority>=t)&&(this.reservePriority=t,!0))},h.prototype.setReservePriority=function(t){this.reservePriority=t},h.prototype.updateParam=function(t){var i=MotionQueueManager.prototype.updateParam.call(this,t);return this.isFinished()&&(this.currentPriority=0),i},h.prototype.startMotionPrio=function(t,i){return i==this.reservePriority&&(this.reservePriority=0),this.currentPriority=i,this.startMotion(t,!1)},l.load=function(t){for(var i=new l,e=c.getPlatformManager(),r=e.jsonParseFromBytes(t),o=r.physics_hair,n=o.length,s=0;s<n;s++){var _=o[s],a=new PhysicsHair,h=_.setup,$=parseFloat(h.length),u=parseFloat(h.regist),p=parseFloat(h.mass);a.setup($,u,p);for(var f=_.src,d=f.length,g=0;g<d;g++){var y=f[g],m=y.id,T=PhysicsHair.Src.SRC_TO_X,P=y.ptype;"x"===P?T=PhysicsHair.Src.SRC_TO_X:"y"===P?T=PhysicsHair.Src.SRC_TO_Y:"angle"===P?T=PhysicsHair.Src.SRC_TO_G_ANGLE:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Src");var S=parseFloat(y.scale),v=parseFloat(y.weight);a.addSrcParam(T,m,S,v)}for(var L=_.targets,M=L.length,g=0;g<M;g++){var E=L[g],m=E.id,T=PhysicsHair.Target.TARGET_FROM_ANGLE,P=E.ptype;"angle"===P?T=PhysicsHair.Target.TARGET_FROM_ANGLE:"angle_v"===P?T=PhysicsHair.Target.TARGET_FROM_ANGLE_V:UtDebug.error("live2d","Invalid parameter:PhysicsHair.Target");var S=parseFloat(E.scale),v=parseFloat(E.weight);a.addTargetParam(T,m,S,v)}i.physicsList.push(a)}return i},l.prototype.updateParam=function(t){for(var i=UtSystem.getUserTimeMSec()-this.startTimeMSec,e=0;e<this.physicsList.length;e++)this.physicsList[e].update(t,i)},$.load=function(t){for(var i=new $,e=c.getPlatformManager(),r=e.jsonParseFromBytes(t),o=r.parts_visible,n=o.length,s=0;s<n;s++){for(var _=o[s],a=_.group,h=a.length,l=new Array,p=0;p<h;p++){var f=a[p],d=new u(f.id);if(l[p]=d,null!=f.link){var g=f.link,y=g.length;d.link=new Array;for(var m=0;m<y;m++){var T=new u(g[m]);d.link.push(T)}}}i.partsGroups.push(l)}return i},$.prototype.updateParam=function(t){if(null!=t){t!=this.lastModel&&this.initParam(t),this.lastModel=t;var i=UtSystem.getUserTimeMSec(),e=0==this.lastTime?0:(i-this.lastTime)/1e3;this.lastTime=i,e<0&&(e=0);for(var r=0;r<this.partsGroups.length;r++)this.normalizePartsOpacityGroup(t,this.partsGroups[r],e),this.copyOpacityOtherParts(t,this.partsGroups[r])}},$.prototype.initParam=function(t){if(null!=t)for(var i=0;i<this.partsGroups.length;i++)for(var e=this.partsGroups[i],r=0;r<e.length;r++){e[r].initIndex(t);var o=e[r].partsIndex,n=e[r].paramIndex;if(!(o<0)){var s=0!=t.getParamFloat(n);if(t.setPartsOpacity(o,s?1:0),t.setParamFloat(n,s?1:0),null!=e[r].link)for(var _=0;_<e[r].link.length;_++)e[r].link[_].initIndex(t)}}},$.prototype.normalizePartsOpacityGroup=function(t,i,e){for(var r=-1,o=1,n=0;n<i.length;n++){var s=i[n].partsIndex,_=i[n].paramIndex;if(!(s<0)&&0!=t.getParamFloat(_)){if(r>=0)break;r=n,o=t.getPartsOpacity(s),o+=e/.5,o>1&&(o=1)}}r<0&&(r=0,o=1);for(var n=0;n<i.length;n++){var s=i[n].partsIndex;if(!(s<0))if(r==n)t.setPartsOpacity(s,o);else{var a,h=t.getPartsOpacity(s);a=o<.5?-.5*o/.5+1:.5*(1-o)/.5;var l=(1-a)*(1-o);l>.15&&(a=1-.15/(1-o)),h>a&&(h=a),t.setPartsOpacity(s,h)}}},$.prototype.copyOpacityOtherParts=function(t,i){for(var e=0;e<i.length;e++){var r=i[e];if(null!=r.link&&!(r.partsIndex<0))for(var o=t.getPartsOpacity(r.partsIndex),n=0;n<r.link.length;n++){var s=r.link[n];s.partsIndex<0||t.setPartsOpacity(s.partsIndex,o)}}},u.prototype.initIndex=function(t){this.paramIndex=t.getParamIndex("VISIBLE:"+this.id),this.partsIndex=t.getPartsDataIndex(PartsDataID.getID(this.id)),t.setParamFloat(this.paramIndex,1)},p.FRAME_RATE=30,p.prototype.setPoint=function(t,i){this.faceTargetX=t,this.faceTargetY=i},p.prototype.getX=function(){return this.faceX},p.prototype.getY=function(){return this.faceY},p.prototype.update=function(){var t=40/7.5/p.FRAME_RATE;if(0==this.lastTimeSec)return void(this.lastTimeSec=UtSystem.getUserTimeMSec());var i=UtSystem.getUserTimeMSec(),e=(i-this.lastTimeSec)*p.FRAME_RATE/1e3;this.lastTimeSec=i;var r=.15*p.FRAME_RATE,o=e*t/r,n=this.faceTargetX-this.faceX,s=this.faceTargetY-this.faceY;if(!(Math.abs(n)<=this.EPSILON&&Math.abs(s)<=this.EPSILON)){var _=Math.sqrt(n*n+s*s),a=t*n/_,h=t*s/_,l=a-this.faceVX,$=h-this.faceVY,u=Math.sqrt(l*l+$*$);(u<-o||u>o)&&(l*=o/u,$*=o/u,u=o),this.faceVX+=l,this.faceVY+=$;var f=.5*(Math.sqrt(o*o+16*o*_-8*o*_)-o),c=Math.sqrt(this.faceVX*this.faceVX+this.faceVY*this.faceVY);c>f&&(this.faceVX*=f/c,this.faceVY*=f/c),this.faceX+=this.faceVX,this.faceY+=this.faceVY}},f.prototype=new _,f.prototype.getMaxScale=function(){return this.max},f.prototype.getMinScale=function(){return this.min},f.prototype.setMaxScale=function(t){this.max=t},f.prototype.setMinScale=function(t){this.min=t},f.prototype.isMaxScale=function(){return this.getScaleX()==this.max},f.prototype.isMinScale=function(){return this.getScaleX()==this.min},f.prototype.adjustTranslate=function(t,i){this.tr[0]*this.maxLeft+(this.tr[12]+t)>this.screenLeft&&(t=this.screenLeft-this.tr[0]*this.maxLeft-this.tr[12]),this.tr[0]*this.maxRight+(this.tr[12]+t)<this.screenRight&&(t=this.screenRight-this.tr[0]*this.maxRight-this.tr[12]),this.tr[5]*this.maxTop+(this.tr[13]+i)<this.screenTop&&(i=this.screenTop-this.tr[5]*this.maxTop-this.tr[13]),this.tr[5]*this.maxBottom+(this.tr[13]+i)>this.screenBottom&&(i=this.screenBottom-this.tr[5]*this.maxBottom-this.tr[13]);var e=[1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1];_.mul(e,this.tr,this.tr)},f.prototype.adjustScale=function(t,i,e){var r=e*this.tr[0];r<this.min?this.tr[0]>0&&(e=this.min/this.tr[0]):r>this.max&&this.tr[0]>0&&(e=this.max/this.tr[0]);var o=[1,0,0,0,0,1,0,0,0,0,1,0,t,i,0,1],n=[e,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1],s=[1,0,0,0,0,1,0,0,0,0,1,0,-t,-i,0,1];_.mul(s,this.tr,this.tr),_.mul(n,this.tr,this.tr),_.mul(o,this.tr,this.tr)},f.prototype.setScreenRect=function(t,i,e,r){this.screenLeft=t,this.screenRight=i,this.screenTop=r,this.screenBottom=e},f.prototype.setMaxScreenRect=function(t,i,e,r){this.maxLeft=t,this.maxRight=i,this.maxTop=r,this.maxBottom=e},f.prototype.getScreenLeft=function(){return this.screenLeft},f.prototype.getScreenRight=function(){return this.screenRight},f.prototype.getScreenBottom=function(){return this.screenBottom},f.prototype.getScreenTop=function(){return this.screenTop},f.prototype.getMaxLeft=function(){return this.maxLeft},f.prototype.getMaxRight=function(){return this.maxRight},f.prototype.getMaxBottom=function(){return this.maxBottom},f.prototype.getMaxTop=function(){return this.maxTop},c.platformManager=null,c.getPlatformManager=function(){return c.platformManager},c.setPlatformManager=function(t){c.platformManager=t},t.exports={L2DTargetPoint:p,Live2DFramework:c,L2DViewMatrix:f,L2DPose:$,L2DPartsParam:u,L2DPhysics:l,L2DMotionManager:h,L2DModelMatrix:a,L2DMatrix44:_,EYE_STATE:g,L2DEyeBlink:s,L2DExpressionParam:n,L2DExpressionMotion:o,L2DBaseModel:r}},function(t,i,e){"use strict";var r={DEBUG_LOG:!1,DEBUG_MOUSE_LOG:!1,DEBUG_DRAW_HIT_AREA:!1,DEBUG_DRAW_ALPHA_MODEL:!1,VIEW_MAX_SCALE:2,VIEW_MIN_SCALE:.8,VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2,PRIORITY_NONE:0,PRIORITY_IDLE:1,PRIORITY_SLEEPY:2,PRIORITY_NORMAL:3,PRIORITY_FORCE:4,MOTION_GROUP_IDLE:"idle",MOTION_GROUP_SLEEPY:"sleepy",MOTION_GROUP_TAP_BODY:"tap_body",MOTION_GROUP_FLICK_HEAD:"flick_head",MOTION_GROUP_PINCH_IN:"pinch_in",MOTION_GROUP_PINCH_OUT:"pinch_out",MOTION_GROUP_SHAKE:"shake",HIT_AREA_HEAD:"head",HIT_AREA_BODY:"body"};t.exports=r},function(t,i,e){"use strict";function r(t){n=t}function o(){return n}Object.defineProperty(i,"__esModule",{value:!0}),i.setContext=r,i.getContext=o;var n=void 0},function(t,i,e){"use strict";function r(){}r.matrixStack=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.depth=0,r.currentMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.tmp=new Array(16),r.reset=function(){this.depth=0},r.loadIdentity=function(){for(var t=0;t<16;t++)this.currentMatrix[t]=t%5==0?1:0},r.push=function(){var t=(this.depth,16*(this.depth+1));this.matrixStack.length<t+16&&(this.matrixStack.length=t+16);for(var i=0;i<16;i++)this.matrixStack[t+i]=this.currentMatrix[i];this.depth++},r.pop=function(){--this.depth<0&&(myError("Invalid matrix stack."),this.depth=0);for(var t=16*this.depth,i=0;i<16;i++)this.currentMatrix[i]=this.matrixStack[t+i]},r.getMatrix=function(){return this.currentMatrix},r.multMatrix=function(t){var i,e,r;for(i=0;i<16;i++)this.tmp[i]=0;for(i=0;i<4;i++)for(e=0;e<4;e++)for(r=0;r<4;r++)this.tmp[i+4*e]+=this.currentMatrix[i+4*r]*t[r+4*e];for(i=0;i<16;i++)this.currentMatrix[i]=this.tmp[i]},t.exports=r},function(t,i,e){t.exports=e(5)},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){C=document.getElementById(t),C.addEventListener&&(window.addEventListener("click",g),window.addEventListener("mousedown",g),window.addEventListener("mousemove",g),window.addEventListener("mouseup",g),document.addEventListener("mouseout",g),window.addEventListener("touchstart",y),window.addEventListener("touchend",y),window.addEventListener("touchmove",y))}function n(t){var i=C.width,e=C.height;N=new M.L2DTargetPoint;var r=e/i,o=w.default.VIEW_LOGICAL_LEFT,n=w.default.VIEW_LOGICAL_RIGHT,_=-r,h=r;if(window.Live2D.captureFrame=!1,B=new M.L2DViewMatrix,B.setScreenRect(o,n,_,h),B.setMaxScreenRect(w.default.VIEW_LOGICAL_MAX_LEFT,w.default.VIEW_LOGICAL_MAX_RIGHT,w.default.VIEW_LOGICAL_MAX_BOTTOM,w.default.VIEW_LOGICAL_MAX_TOP),B.setMaxScale(w.default.VIEW_MAX_SCALE),B.setMinScale(w.default.VIEW_MIN_SCALE),U=new M.L2DMatrix44,U.multScale(1,i/e),G=new M.L2DMatrix44,G.multTranslate(-i/2,-e/2),G.multScale(2/i,-2/i),F=v(),(0,D.setContext)(F),!F)return console.error("Failed to create WebGL context."),void(window.WebGLRenderingContext&&console.error("Your browser don't support WebGL, check https://get.webgl.org/ for futher information."));window.Live2D.setGL(F),F.clearColor(0,0,0,0),a(t),s()}function s(){b||(b=!0,function t(){_();var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(window.Live2D.captureFrame){window.Live2D.captureFrame=!1;var e=document.createElement("a");document.body.appendChild(e),e.setAttribute("type","hidden"),e.href=C.toDataURL(),e.download=window.Live2D.captureName||"live2d.png",e.click()}i(t,C)}())}function _(){O.default.reset(),O.default.loadIdentity(),N.update(),R.setDrag(N.getX(),N.getY()),F.clear(F.COLOR_BUFFER_BIT),O.default.multMatrix(U.getArray()),O.default.multMatrix(B.getArray()),O.default.push();for(var t=0;t<R.numModels();t++){var i=R.getModel(t);if(null==i)return;i.initialized&&!i.updating&&(i.update(),i.draw(F))}O.default.pop()}function a(t){R.reloadFlg=!0,R.count++,R.changeModel(F,t)}function h(t,i){return t.x*i.x+t.y*i.y}function l(t,i){var e=Math.sqrt(t*t+i*i);return{x:t/e,y:i/e}}function $(t,i,e){function r(t,i){return 180*Math.acos(h({x:0,y:1},l(t,i)))/Math.PI}if(i.x<e.left+e.width&&i.y<e.top+e.height&&i.x>e.left&&i.y>e.top)return i;var o=t.x-i.x,n=t.y-i.y,s=r(o,n);i.x<t.x&&(s=360-s);var _=360-r(e.left-t.x,-1*(e.top-t.y)),a=360-r(e.left-t.x,-1*(e.top+e.height-t.y)),$=r(e.left+e.width-t.x,-1*(e.top-t.y)),u=r(e.left+e.width-t.x,-1*(e.top+e.height-t.y)),p=n/o,f={};if(s<$){var c=e.top-t.y,d=c/p;f={y:t.y+c,x:t.x+d}}else if(s<u){var g=e.left+e.width-t.x,y=g*p;f={y:t.y+y,x:t.x+g}}else if(s<a){var m=e.top+e.height-t.y,T=m/p;f={y:t.y+m,x:t.x+T}}else if(s<_){var P=t.x-e.left,S=P*p;f={y:t.y-S,x:t.x-P}}else{var v=e.top-t.y,L=v/p;f={y:t.y+v,x:t.x+L}}return f}function u(t){Y=!0;var i=C.getBoundingClientRect(),e=P(t.clientX-i.left),r=S(t.clientY-i.top),o=$({x:i.left+i.width/2,y:i.top+i.height*X},{x:t.clientX,y:t.clientY},i),n=m(o.x-i.left),s=T(o.y-i.top);w.default.DEBUG_MOUSE_LOG&&console.log("onMouseMove device( x:"+t.clientX+" y:"+t.clientY+" ) view( x:"+n+" y:"+s+")"),k=e,V=r,N.setPoint(n,s)}function p(t){Y=!0;var i=C.getBoundingClientRect(),e=P(t.clientX-i.left),r=S(t.clientY-i.top),o=$({x:i.left+i.width/2,y:i.top+i.height*X},{x:t.clientX,y:t.clientY},i),n=m(o.x-i.left),s=T(o.y-i.top);w.default.DEBUG_MOUSE_LOG&&console.log("onMouseDown device( x:"+t.clientX+" y:"+t.clientY+" ) view( x:"+n+" y:"+s+")"),k=e,V=r,R.tapEvent(n,s)}function f(t){var i=C.getBoundingClientRect(),e=P(t.clientX-i.left),r=S(t.clientY-i.top),o=$({x:i.left+i.width/2,y:i.top+i.height*X},{x:t.clientX,y:t.clientY},i),n=m(o.x-i.left),s=T(o.y-i.top);w.default.DEBUG_MOUSE_LOG&&console.log("onMouseMove device( x:"+t.clientX+" y:"+t.clientY+" ) view( x:"+n+" y:"+s+")"),Y&&(k=e,V=r,N.setPoint(n,s))}function c(){Y&&(Y=!1),N.setPoint(0,0)}function d(){w.default.DEBUG_LOG&&console.log("Set Session Storage."),sessionStorage.setItem("Sleepy","1")}function g(t){if("mousewheel"==t.type);else if("mousedown"==t.type)p(t);else if("mousemove"==t.type){var i=sessionStorage.getItem("Sleepy");"1"===i&&sessionStorage.setItem("Sleepy","0"),u(t)}else if("mouseup"==t.type){if("button"in t&&0!=t.button)return}else if("mouseout"==t.type){w.default.DEBUG_LOG&&console.log("Mouse out Window."),c();var e=sessionStorage.getItem("SleepyTimer");window.clearTimeout(e),e=window.setTimeout(d,5e4),sessionStorage.setItem("SleepyTimer",e)}}function y(t){var i=t.touches[0];"touchstart"==t.type?1==t.touches.length&&u(i):"touchmove"==t.type?f(i):"touchend"==t.type&&c()}function m(t){var i=G.transformX(t);return B.invertTransformX(i)}function T(t){var i=G.transformY(t);return B.invertTransformY(i)}function P(t){return G.transformX(t)}function S(t){return G.transformY(t)}function v(){for(var t=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0;i<t.length;i++)try{var e=C.getContext(t[i],{premultipliedAlpha:!0});if(e)return e}catch(t){}return null}function L(t,i,e){X=void 0===e?.5:e,o(t),n(i)}e(6);var M=e(0),E=e(8),A=r(E),I=e(1),w=r(I),x=e(3),O=r(x),D=e(2),R=(window.navigator.platform.toLowerCase(),new A.default),b=!1,F=null,C=null,N=null,B=null,U=null,G=null,Y=!1,k=0,V=0,X=.5;window.loadlive2d=L},function(t,i,e){"use strict";(function(t){!function(){function i(){At||(this._$MT=null,this._$5S=null,this._$NP=0,i._$42++,this._$5S=new Y(this))}function e(t){if(!At){this.clipContextList=new Array,this.glcontext=t.gl,this.dp_webgl=t,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new S,at.glContext.length>at.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new R,this.tmpMatrix2=new R,this.tmpMatrixForMask=new R,this.tmpMatrixForDraw=new R,this.CHANNEL_COLORS=new Array;var i=new A;i=new A,i.r=0,i.g=0,i.b=0,i.a=1,this.CHANNEL_COLORS.push(i),i=new A,i.r=1,i.g=0,i.b=0,i.a=0,this.CHANNEL_COLORS.push(i),i=new A,i.r=0,i.g=1,i.b=0,i.a=0,this.CHANNEL_COLORS.push(i),i=new A,i.r=0,i.g=0,i.b=1,i.a=0,this.CHANNEL_COLORS.push(i);for(var e=0;e<this.CHANNEL_COLORS.length;e++)this.dp_webgl.setChannelFlagAsColor(e,this.CHANNEL_COLORS[e])}}function r(t,i,e){this.clipIDList=new Array,this.clipIDList=e,this.clippingMaskDrawIndexList=new Array;for(var r=0;r<e.length;r++)this.clippingMaskDrawIndexList.push(i.getDrawDataIndex(e[r]));this.clippedDrawContextList=new Array,this.isUsing=!0,this.layoutChannelNo=0,this.layoutBounds=new S,this.allClippedDrawRect=new S,this.matrixForMask=new Float32Array(16),this.matrixForDraw=new Float32Array(16),this.owner=t}function o(t,i){this._$gP=t,this.drawDataIndex=i}function n(){At||(this.color=null)}function s(){At||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1e3,this._$eo=1e3,this._$V0=1,this._$a0())}function _(){}function a(){this._$r=null,this._$0S=null}function h(){At||(this.x=null,this.y=null,this.width=null,this.height=null)}function l(t){At||et.prototype.constructor.call(this,t)}function $(){}function u(t){At||et.prototype.constructor.call(this,t)}function p(){At||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,p._$42++)}function f(){At||(this.p1=new c,this.p2=new c,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=new Array,this._$qP=new Array,this.setup(.3,.5,.1))}function c(){this._$p=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$s0=0,this._$70=0,this._$7L=0,this._$HL=0}function d(t,i,e){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=t,this.scale=i,this._$V0=e}function g(t,i,e,r){d.prototype.constructor.call(this,i,e,r),this._$tL=null,this._$tL=t}function y(t,i,e){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=t,this.scale=i,this._$V0=e}function T(t,i,e,r){y.prototype.constructor.call(this,i,e,r),this._$YP=null,this._$YP=t}function P(){At||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}function S(){At||(this.x=null,this.y=null,this.width=null,this.height=null)}function v(){}function L(){At||(this.x=null,this.y=null)}function M(){At||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=new Array)}function E(){At||(this._$Eb=E._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=E.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=new Array)}function A(){At||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=at.L2D_COLOR_BLEND_MODE_MULT)}function I(){At||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}function w(){}function x(){At||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=x._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}function O(){}function D(){At||(this._$Ob=null)}function R(){this.m=new Float32Array(16),this.identity()}function b(t){At||et.prototype.constructor.call(this,t)}function F(){At||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}function C(){At||(s.prototype.constructor.call(this),this.motions=new Array,this._$7r=null,this._$7r=C._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}function N(){this._$P=new Float32Array(100),this.size=0}function B(){this._$4P=null,this._$I0=null,this._$RP=null}function U(){}function G(){}function Y(t){At||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=new Array(Y._$is),this._$_2=new Float32Array(Y._$is),this._$vr=new Float32Array(Y._$is),this._$Rr=new Float32Array(Y._$is),this._$Or=new Float32Array(Y._$is),this._$fs=new Float32Array(Y._$is),this._$Js=new Array(Y._$is),this._$3S=new Array,this._$aS=new Array,this._$Bo=null,this._$F2=new Array,this._$db=new Array,this._$8b=new Array,this._$Hr=new Array,this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(U._$Qb),this._$ZP=new Float32Array(2*U._$1r),this._$Ri=t,this._$b0=Y._$HP++,this.clipManager=null,this.dp_webgl=null)}function k(){}function V(){At||(this._$12=null,this._$bb=null,this._$_L=null,this._$jo=null,this._$iL=null,this._$0L=null,this._$Br=null,this._$Dr=null,this._$Cb=null,this._$mr=null,this._$_L=wt.STATE_FIRST,this._$Br=4e3,this._$Dr=100,this._$Cb=50,this._$mr=150,this._$jo=!0,this._$iL="PARAM_EYE_L_OPEN",this._$0L="PARAM_EYE_R_OPEN")}function X(){At||(E.prototype.constructor.call(this),this._$sb=new Int32Array(X._$As),this._$U2=new Array,this.transform=null,this.gl=null,null==X._$NT&&(X._$NT=X._$9r(256),X._$vS=X._$9r(256),X._$no=X._$vb(256)))}function z(){At||(I.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}function H(t){_t.prototype.constructor.call(this,t),this._$8r=I._$ur,this._$Yr=null,this._$Wr=null}function W(){At||(M.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}function j(){At||(this._$NL=null,this._$3S=null,this._$aS=null,j._$42++)}function q(){At||(i.prototype.constructor.call(this),this._$zo=new X)}function J(){At||(s.prototype.constructor.call(this),this.motions=new Array,this._$o2=null,this._$7r=J._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}function Q(t,i){return String.fromCharCode(t.getUint8(i))}function N(){this._$P=new Float32Array(100),this.size=0}function B(){this._$4P=null,this._$I0=null,this._$RP=null}function Z(){At||(I.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}function K(t){_t.prototype.constructor.call(this,t),this._$8r=I._$ur,this._$Cr=null,this._$hr=null}function tt(){At||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,tt._$42++)}function it(t){this._$VS=null,this._$e0=null,this._$e0=t}function et(t){At||(this.id=t)}function rt(){}function ot(){At||(this._$4S=null)}function nt(t,i){this.canvas=t,this.context=i,this.viewport=new Array(0,0,t.width,t.height),this._$6r=1,this._$xP=0,this._$3r=1,this._$uP=0,this._$Qo=-1,this.cacheImages={}}function st(){At||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}function _t(t){At||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=t,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}function at(){}function ht(){}function lt(t){At||(this._$ib=t)}function $t(){At||(W.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=$t._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=$t._$42++)}function ut(t){Mt.prototype.constructor.call(this,t),this._$8r=W._$ur,this._$Cr=null,this._$hr=null}function pt(){At||(this.x=null,this.y=null)}function ft(t){At||(i.prototype.constructor.call(this),this.drawParamWebGL=new mt(t),this.drawParamWebGL.setGL(at.getGL(t)))}function ct(){At||(this.motions=null,this._$eb=!1,this.motions=new Array)}function dt(){this._$w0=null,this._$AT=!0,this._$9L=!1,this._$z2=-1,this._$bs=-1,this._$Do=-1,this._$sr=null,this._$sr=dt._$Gs++}function gt(){this.m=new Array(1,0,0,0,1,0,0,0,1)}function yt(t){At||et.prototype.constructor.call(this,t)}function mt(t){At||(E.prototype.constructor.call(this),this.textures=new Array,this.transform=null,this.gl=null,this.glno=t,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}function Tt(t,i,e){return null==i&&(i=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),i}function Pt(t,i,e){return null==i&&(i=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.DYNAMIC_DRAW),i}function St(t){At||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1e3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=new Array,this._$T=t,this._$F=0)}function vt(){}function Lt(){}function Mt(t){At||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=t)}function Et(){}var At=!0;i._$0s=1,i._$4s=2,i._$42=0,i._$62=function(t,e){try{if(e instanceof ArrayBuffer&&(e=new DataView(e)),!(e instanceof DataView))throw new lt("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var r,o=new St(e),n=o._$ST(),s=o._$ST(),a=o._$ST();if(109!=n||111!=s||99!=a)throw new lt("_$gi _$C _$li , _$Q0 _$P0.");if(r=o._$ST(),o._$gr(r),r>G._$T7){t._$NP|=i._$4s;throw new lt("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+G._$T7+" < _$f0 : "+r+" )@_$SS#loadModel()\\n")}var h=o._$nP();if(r>=G._$s7){var l=o._$9T(),$=o._$9T();if(-30584!=l||-30584!=$)throw t._$NP|=i._$0s,new lt("_$gi _$C _$li , _$0 _$6 _$Ui.")}t._$KS(h);var u=t.getModelContext();u.setDrawParam(t.getDrawParam()),u.init()}catch(t){_._$Rb(t)}},i.prototype._$KS=function(t){this._$MT=t},i.prototype.getModelImpl=function(){return null==this._$MT&&(this._$MT=new p,this._$MT._$zP()),this._$MT},i.prototype.getCanvasWidth=function(){return null==this._$MT?0:this._$MT.getCanvasWidth()},i.prototype.getCanvasHeight=function(){return null==this._$MT?0:this._$MT.getCanvasHeight()},i.prototype.getParamFloat=function(t){return"number"!=typeof t&&(t=this._$5S.getParamIndex(u.getID(t))),this._$5S.getParamFloat(t)},i.prototype.setParamFloat=function(t,i,e){"number"!=typeof t&&(t=this._$5S.getParamIndex(u.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)*(1-e)+i*e)},i.prototype.addToParamFloat=function(t,i,e){"number"!=typeof t&&(t=this._$5S.getParamIndex(u.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)+i*e)},i.prototype.multParamFloat=function(t,i,e){"number"!=typeof t&&(t=this._$5S.getParamIndex(u.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)*(1+(i-1)*e))},i.prototype.getParamIndex=function(t){return this._$5S.getParamIndex(u.getID(t))},i.prototype.loadParam=function(){this._$5S.loadParam()},i.prototype.saveParam=function(){this._$5S.saveParam()},i.prototype.init=function(){this._$5S.init()},i.prototype.update=function(){this._$5S.update()},i.prototype._$Rs=function(){return _._$li("_$60 _$PT _$Rs()"),-1},i.prototype._$Ds=function(t){_._$li("_$60 _$PT _$SS#_$Ds() \\n")},i.prototype._$K2=function(){},i.prototype.draw=function(){},i.prototype.getModelContext=function(){return this._$5S},i.prototype._$s2=function(){return this._$NP},i.prototype._$P7=function(t,i,e,r){var o=-1,n=0,s=this;if(0!=e)if(1==t.length){var _=t[0],a=0!=s.getParamFloat(_),h=i[0],l=s.getPartsOpacity(h),$=e/r;a?(l+=$)>1&&(l=1):(l-=$)<0&&(l=0),s.setPartsOpacity(h,l)}else{for(var u=0;u<t.length;u++){var _=t[u],p=0!=s.getParamFloat(_);if(p){if(o>=0)break;o=u;var h=i[u];n=s.getPartsOpacity(h),n+=e/r,n>1&&(n=1)}}o<0&&(console.log("No _$wi _$q0/ _$U default[%s]",t[0]),o=0,n=1,s.loadParam(),s.setParamFloat(t[o],n),s.saveParam());for(var u=0;u<t.length;u++){var h=i[u];if(o==u)s.setPartsOpacity(h,n);else{var f,c=s.getPartsOpacity(h);f=n<.5?-.5*n/.5+1:.5*(1-n)/.5;var d=(1-f)*(1-n);d>.15&&(f=1-.15/(1-n)),c>f&&(c=f),s.setPartsOpacity(h,c)}}}else for(var u=0;u<t.length;u++){var _=t[u],h=i[u],p=0!=s.getParamFloat(_);s.setPartsOpacity(h,p?1:0)}},i.prototype.setPartsOpacity=function(t,i){"number"!=typeof t&&(t=this._$5S.getPartsDataIndex(l.getID(t))),this._$5S.setPartsOpacity(t,i)},i.prototype.getPartsDataIndex=function(t){return t instanceof l||(t=l.getID(t)),this._$5S.getPartsDataIndex(t)},i.prototype.getPartsOpacity=function(t){return"number"!=typeof t&&(t=this._$5S.getPartsDataIndex(l.getID(t))),t<0?0:this._$5S.getPartsOpacity(t)},i.prototype.getDrawParam=function(){},i.prototype.getDrawDataIndex=function(t){return this._$5S.getDrawDataIndex(b.getID(t))},i.prototype.getDrawData=function(t){return this._$5S.getDrawData(t)},i.prototype.getTransformedPoints=function(t){var i=this._$5S._$C2(t);return i instanceof ut?i.getTransformedPoints():null},i.prototype.getIndexArray=function(t){if(t<0||t>=this._$5S._$aS.length)return null;var i=this._$5S._$aS[t];return null!=i&&i.getType()==W._$wb&&i instanceof $t?i.getIndexArray():null},e.CHANNEL_COUNT=4,e.RENDER_TEXTURE_USE_MIPMAP=!1,e.NOT_USED_FRAME=-100,e.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var t=this.CHANNEL_COLORS.length-1;t>=0;--t)this.CHANNEL_COLORS.splice(t,1);this.CHANNEL_COLORS=[]}this.releaseShader()},e.prototype.releaseShader=function(){for(var t=at.frameBuffers.length,i=0;i<t;i++)this.gl.deleteFramebuffer(at.frameBuffers[i].framebuffer);at.frameBuffers=[],at.glContext=[]},e.prototype.init=function(t,i,e){for(var o=0;o<i.length;o++){var n=i[o].getClipIDList();if(null!=n){var s=this.findSameClip(n);null==s&&(s=new r(this,t,n),this.clipContextList.push(s));var _=i[o].getDrawDataID(),a=t.getDrawDataIndex(_);s.addClippedDrawData(_,a);e[o].clipBufPre_clipContext=s}}},e.prototype.getMaskRenderTexture=function(){var t=null;return t=this.dp_webgl.createFramebuffer(),at.frameBuffers[this.dp_webgl.glno]=t,this.dp_webgl.glno},e.prototype.setupClip=function(t,i){for(var e=0,r=0;r<this.clipContextList.length;r++){var o=this.clipContextList[r];this.calcClippedDrawTotalBounds(t,o),o.isUsing&&e++}if(e>0){var n=i.gl.getParameter(i.gl.FRAMEBUFFER_BINDING),s=new Array(4);s[0]=0,s[1]=0,s[2]=i.gl.canvas.width,s[3]=i.gl.canvas.height,i.gl.viewport(0,0,at.clippingMaskBufferSize,at.clippingMaskBufferSize),this.setupLayoutBounds(e),i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,at.frameBuffers[this.curFrameNo].framebuffer),i.gl.clearColor(0,0,0,0),i.gl.clear(i.gl.COLOR_BUFFER_BIT);for(var r=0;r<this.clipContextList.length;r++){var o=this.clipContextList[r],_=o.allClippedDrawRect,a=(o.layoutChannelNo,o.layoutBounds);this.tmpBoundsOnModel._$jL(_),this.tmpBoundsOnModel.expand(.05*_.width,.05*_.height);var h=a.width/this.tmpBoundsOnModel.width,l=a.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity(),this.tmpMatrix2.translate(-1,-1,0),this.tmpMatrix2.scale(2,2,1),this.tmpMatrix2.translate(a.x,a.y,0),this.tmpMatrix2.scale(h,l,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m),this.tmpMatrix2.identity(),this.tmpMatrix2.translate(a.x,a.y,0),this.tmpMatrix2.scale(h,l,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);for(var $=this.tmpMatrixForMask.getArray(),u=0;u<16;u++)o.matrixForMask[u]=$[u];for(var p=this.tmpMatrixForDraw.getArray(),u=0;u<16;u++)o.matrixForDraw[u]=p[u];for(var f=o.clippingMaskDrawIndexList.length,c=0;c<f;c++){var d=o.clippingMaskDrawIndexList[c],g=t.getDrawData(d),y=t._$C2(d);i.setClipBufPre_clipContextForMask(o),g.draw(i,t,y)}}i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,n),i.setClipBufPre_clipContextForMask(null),i.gl.viewport(s[0],s[1],s[2],s[3])}},e.prototype.getColorBuffer=function(){return this.colorBuffer},e.prototype.findSameClip=function(t){for(var i=0;i<this.clipContextList.length;i++){var e=this.clipContextList[i],r=e.clipIDList.length;if(r==t.length){for(var o=0,n=0;n<r;n++)for(var s=e.clipIDList[n],_=0;_<r;_++)if(t[_]==s){o++;break}if(o==r)return e}}return null},e.prototype.calcClippedDrawTotalBounds=function(t,i){for(var e=t._$Ri.getModelImpl().getCanvasWidth(),r=t._$Ri.getModelImpl().getCanvasHeight(),o=e>r?e:r,n=o,s=o,_=0,a=0,h=i.clippedDrawContextList.length,l=0;l<h;l++){var $=i.clippedDrawContextList[l],u=$.drawDataIndex,p=t._$C2(u);if(p._$yo()){for(var f=p.getTransformedPoints(),c=f.length,d=[],g=[],y=0,m=U._$i2;m<c;m+=U._$No)d[y]=f[m],g[y]=f[m+1],y++;var T=Math.min.apply(null,d),P=Math.min.apply(null,g),S=Math.max.apply(null,d),v=Math.max.apply(null,g);T<n&&(n=T),P<s&&(s=P),S>_&&(_=S),v>a&&(a=v)}}if(n==o)i.allClippedDrawRect.x=0,i.allClippedDrawRect.y=0,i.allClippedDrawRect.width=0,i.allClippedDrawRect.height=0,i.isUsing=!1;else{var L=_-n,M=a-s;i.allClippedDrawRect.x=n,i.allClippedDrawRect.y=s,i.allClippedDrawRect.width=L,i.allClippedDrawRect.height=M,i.isUsing=!0}},e.prototype.setupLayoutBounds=function(t){var i=t/e.CHANNEL_COUNT,r=t%e.CHANNEL_COUNT;i=~~i,r=~~r;for(var o=0,n=0;n<e.CHANNEL_COUNT;n++){var s=i+(n<r?1:0);if(0==s);else if(1==s){var a=this.clipContextList[o++];a.layoutChannelNo=n,a.layoutBounds.x=0,a.layoutBounds.y=0,a.layoutBounds.width=1,a.layoutBounds.height=1}else if(2==s)for(var h=0;h<s;h++){var l=h%2,$=0;l=~~l;var a=this.clipContextList[o++];a.layoutChannelNo=n,a.layoutBounds.x=.5*l,a.layoutBounds.y=0,a.layoutBounds.width=.5,a.layoutBounds.height=1}else if(s<=4)for(var h=0;h<s;h++){var l=h%2,$=h/2;l=~~l,$=~~$;var a=this.clipContextList[o++];a.layoutChannelNo=n,a.layoutBounds.x=.5*l,a.layoutBounds.y=.5*$,a.layoutBounds.width=.5,a.layoutBounds.height=.5}else if(s<=9)for(var h=0;h<s;h++){var l=h%3,$=h/3;l=~~l,$=~~$;var a=this.clipContextList[o++];a.layoutChannelNo=n,a.layoutBounds.x=l/3,a.layoutBounds.y=$/3,a.layoutBounds.width=1/3,a.layoutBounds.height=1/3}else _._$li("_$6 _$0P mask count : %d",s)}},r.prototype.addClippedDrawData=function(t,i){var e=new o(t,i);this.clippedDrawContextList.push(e)},s._$JT=function(t,i,e){var r=t/i,o=e/i,n=o,s=1-(1-o)*(1-o),_=1-(1-n)*(1-n),a=1/3*(1-o)*s+(n*(2/3)+1/3*(1-n))*(1-s),h=(n+2/3*(1-n))*_+(o*(1/3)+2/3*(1-o))*(1-_),l=1-3*h+3*a-0,$=3*h-6*a+0,u=3*a-0;if(r<=0)return 0;if(r>=1)return 1;var p=r,f=p*p;return l*(p*f)+$*f+u*p+0},s.prototype._$a0=function(){},s.prototype.setFadeIn=function(t){this._$dP=t},s.prototype.setFadeOut=function(t){this._$eo=t},s.prototype._$pT=function(t){this._$V0=t},s.prototype.getFadeOut=function(){return this._$eo},s.prototype._$4T=function(){return this._$eo},s.prototype._$mT=function(){return this._$V0},s.prototype.getDurationMSec=function(){return-1},s.prototype.getLoopDurationMSec=function(){return-1},s.prototype.updateParam=function(t,i){if(i._$AT&&!i._$9L){var e=w.getUserTimeMSec();if(i._$z2<0){i._$z2=e,i._$bs=e;var r=this.getDurationMSec();i._$Do<0&&(i._$Do=r<=0?-1:i._$z2+r)}var o=this._$V0;o=o*(0==this._$dP?1:ht._$r2((e-i._$bs)/this._$dP))*(0==this._$eo||i._$Do<0?1:ht._$r2((i._$Do-e)/this._$eo)),0<=o&&o<=1||console.log("### assert!! ### "),this.updateParamExe(t,e,o,i),i._$Do>0&&i._$Do<e&&(i._$9L=!0)}},s.prototype.updateParamExe=function(t,i,e,r){},_._$8s=0,_._$fT=new Object,_.start=function(t){var i=_._$fT[t];null==i&&(i=new a,i._$r=t,_._$fT[t]=i),i._$0S=w.getSystemTimeMSec()},_.dump=function(t){var i=_._$fT[t];if(null!=i){var e=w.getSystemTimeMSec(),r=e-i._$0S;return console.log(t+" : "+r+"ms"),r}return-1},_.end=function(t){var i=_._$fT[t];if(null!=i){return w.getSystemTimeMSec()-i._$0S}return-1},_._$li=function(t,i){console.log("_$li : "+t+"\\n",i)},_._$Ji=function(t,i){console.log(t,i)},_._$dL=function(t,i){console.log(t,i),console.log("\\n")},_._$KL=function(t,i){for(var e=0;e<i;e++)e%16==0&&e>0?console.log("\\n"):e%8==0&&e>0&&console.log("  "),console.log("%02X ",255&t[e]);console.log("\\n")},_._$nr=function(t,i,e){console.log("%s\\n",t);for(var r=i.length,o=0;o<r;++o)console.log("%5d",i[o]),console.log("%s\\n",e),console.log(",");console.log("\\n")},_._$Rb=function(t){console.log("dump exception : "+t),console.log("stack :: "+t.stack)},h.prototype._$8P=function(){return.5*(this.x+this.x+this.width)},h.prototype._$6P=function(){return.5*(this.y+this.y+this.height)},h.prototype._$EL=function(){return this.x+this.width},h.prototype._$5T=function(){return this.y+this.height},h.prototype._$jL=function(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r},h.prototype._$jL=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},l.prototype=new et,l._$tP=new Object,l._$27=function(){l._$tP.clear()},l.getID=function(t){var i=l._$tP[t];return null==i&&(i=new l(t),l._$tP[t]=i),i},l.prototype._$3s=function(){return new l},u.prototype=new et,u._$tP=new Object,u._$27=function(){u._$tP.clear()},u.getID=function(t){var i=u._$tP[t];return null==i&&(i=new u(t),u._$tP[t]=i),i},u.prototype._$3s=function(){return new u},p._$42=0,p.prototype._$zP=function(){null==this._$vo&&(this._$vo=new ot),null==this._$F2&&(this._$F2=new Array)},p.prototype.getCanvasWidth=function(){return this._$ao},p.prototype.getCanvasHeight=function(){return this._$1S},p.prototype._$F0=function(t){this._$vo=t._$nP(),this._$F2=t._$nP(),this._$ao=t._$6L(),this._$1S=t._$6L()},p.prototype._$6S=function(t){this._$F2.push(t)},p.prototype._$Xr=function(){return this._$F2},p.prototype._$E2=function(){return this._$vo},f.prototype.setup=function(t,i,e){this._$ks=this._$Yb(),this.p2._$xT(),3==arguments.length&&(this._$Fo=t,this._$L2=i,this.p1._$p=e,this.p2._$p=e,this.p2.y=t,this.setup())},f.prototype.getPhysicsPoint1=function(){return this.p1},f.prototype.getPhysicsPoint2=function(){return this.p2},f.prototype._$qr=function(){return this._$Db},f.prototype._$pr=function(t){this._$Db=t},f.prototype._$5r=function(){return this._$M2},f.prototype._$Cs=function(){return this._$9b},f.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},f.prototype.addSrcParam=function(t,i,e,r){var o=new g(t,i,e,r);this._$lL.push(o)},f.prototype.addTargetParam=function(t,i,e,r){var o=new T(t,i,e,r);this._$qP.push(o)},f.prototype.update=function(t,i){if(0==this._$iP)return this._$iP=this._$iT=i,void(this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var e=(i-this._$iT)/1e3;if(0!=e){for(var r=this._$lL.length-1;r>=0;--r){this._$lL[r]._$oP(t,this)}this._$oo(t,e),this._$M2=this._$Yb(),this._$9b=(this._$M2-this._$ks)/e,this._$ks=this._$M2}for(var r=this._$qP.length-1;r>=0;--r){this._$qP[r]._$YS(t,this)}this._$iT=i},f.prototype._$oo=function(t,i){i<.033&&(i=.033);var e=1/i;this.p1.vx=(this.p1.x-this.p1._$s0)*e,this.p1.vy=(this.p1.y-this.p1._$70)*e,this.p1.ax=(this.p1.vx-this.p1._$7L)*e,this.p1.ay=(this.p1.vy-this.p1._$HL)*e,this.p1.fx=this.p1.ax*this.p1._$p,this.p1.fy=this.p1.ay*this.p1._$p,this.p1._$xT();var r,o,n=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),s=Math.cos(n),_=Math.sin(n),a=9.8*this.p2._$p,h=this._$Db*Lt._$bS,l=a*Math.cos(n-h);r=l*_,o=l*s;var $=-this.p1.fx*_*_,u=-this.p1.fy*_*s,p=-this.p2.vx*this._$L2,f=-this.p2.vy*this._$L2;this.p2.fx=r+$+p,this.p2.fy=o+u+f,this.p2.ax=this.p2.fx/this.p2._$p,this.p2.ay=this.p2.fy/this.p2._$p,this.p2.vx+=this.p2.ax*i,this.p2.vy+=this.p2.ay*i,this.p2.x+=this.p2.vx*i,this.p2.y+=this.p2.vy*i;var c=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/c,this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/c,this.p2.vx=(this.p2.x-this.p2._$s0)*e,this.p2.vy=(this.p2.y-this.p2._$70)*e,this.p2._$xT()},c.prototype._$xT=function(){this._$s0=this.x,this._$70=this.y,this._$7L=this.vx,this._$HL=this.vy},d.prototype._$oP=function(t,i){},g.prototype=new d,g.prototype._$oP=function(t,i){var e=this.scale*t.getParamFloat(this._$wL),r=i.getPhysicsPoint1();switch(this._$tL){default:case f.Src.SRC_TO_X:r.x=r.x+(e-r.x)*this._$V0;break;case f.Src.SRC_TO_Y:r.y=r.y+(e-r.y)*this._$V0;break;case f.Src.SRC_TO_G_ANGLE:var o=i._$qr();o+=(e-o)*this._$V0,i._$pr(o)}},y.prototype._$YS=function(t,i){},T.prototype=new y,T.prototype._$YS=function(t,i){switch(this._$YP){default:case f.Target.TARGET_FROM_ANGLE:t.setParamFloat(this._$wL,this.scale*i._$5r(),this._$V0);break;case f.Target.TARGET_FROM_ANGLE_V:t.setParamFloat(this._$wL,this.scale*i._$Cs(),this._$V0)}},f.Src=function(){},f.Src.SRC_TO_X="SRC_TO_X",f.Src.SRC_TO_Y="SRC_TO_Y",f.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",f.Target=function(){},f.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",f.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V",P.prototype.init=function(t){this._$fL=t._$fL,this._$gL=t._$gL,this._$B0=t._$B0,this._$z0=t._$z0,this._$qT=t._$qT,this.reflectX=t.reflectX,this.reflectY=t.reflectY},P.prototype._$F0=function(t){this._$fL=t._$_T(),this._$gL=t._$_T(),this._$B0=t._$_T(),this._$z0=t._$_T(),this._$qT=t._$_T(),t.getFormatVersion()>=G.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=t._$po(),this.reflectY=t._$po())},P.prototype._$e=function(){};var It=function(){};It._$ni=function(t,i,e,r,o,n,s,_,a){var h=s*n-_*o;if(0==h)return null;var l,$=((t-e)*n-(i-r)*o)/h;return l=0!=o?(t-e-$*s)/o:(i-r-$*_)/n,isNaN(l)&&(l=(t-e-$*s)/o,isNaN(l)&&(l=(i-r-$*_)/n),isNaN(l)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+o),console.log("v1x != 0 ? "+(0!=o)))),null==a?new Array(l,$):(a[0]=l,a[1]=$,a)},S.prototype._$8P=function(){return this.x+.5*this.width},S.prototype._$6P=function(){return this.y+.5*this.height},S.prototype._$EL=function(){return this.x+this.width},S.prototype._$5T=function(){return this.y+this.height},S.prototype._$jL=function(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r},S.prototype._$jL=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},S.prototype.contains=function(t,i){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},S.prototype.expand=function(t,i){this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},v._$Z2=function(t,i,e,r){var o=i._$Q2(t,e),n=t._$vs(),s=t._$Tr();if(i._$zr(n,s,o),o<=0)return r[n[0]];if(1==o){var _=r[n[0]],a=r[n[1]],h=s[0];return _+(a-_)*h|0}if(2==o){var _=r[n[0]],a=r[n[1]],l=r[n[2]],$=r[n[3]],h=s[0],u=s[1],p=_+(a-_)*h|0,f=l+($-l)*h|0;return p+(f-p)*u|0}if(3==o){var c=r[n[0]],d=r[n[1]],g=r[n[2]],y=r[n[3]],m=r[n[4]],T=r[n[5]],P=r[n[6]],S=r[n[7]],h=s[0],u=s[1],v=s[2],_=c+(d-c)*h|0,a=g+(y-g)*h|0,l=m+(T-m)*h|0,$=P+(S-P)*h|0,p=_+(a-_)*u|0,f=l+($-l)*u|0;return p+(f-p)*v|0}if(4==o){var L=r[n[0]],M=r[n[1]],E=r[n[2]],A=r[n[3]],I=r[n[4]],w=r[n[5]],x=r[n[6]],O=r[n[7]],D=r[n[8]],R=r[n[9]],b=r[n[10]],F=r[n[11]],C=r[n[12]],N=r[n[13]],B=r[n[14]],U=r[n[15]],h=s[0],u=s[1],v=s[2],G=s[3],c=L+(M-L)*h|0,d=E+(A-E)*h|0,g=I+(w-I)*h|0,y=x+(O-x)*h|0,m=D+(R-D)*h|0,T=b+(F-b)*h|0,P=C+(N-C)*h|0,S=B+(U-B)*h|0,_=c+(d-c)*u|0,a=g+(y-g)*u|0,l=m+(T-m)*u|0,$=P+(S-P)*u|0,p=_+(a-_)*v|0,f=l+($-l)*v|0;return p+(f-p)*G|0}for(var Y=1<<o,k=new Float32Array(Y),V=0;V<Y;V++){for(var X=V,z=1,H=0;H<o;H++)z*=X%2==0?1-s[H]:s[H],X/=2;k[V]=z}for(var W=new Float32Array(Y),j=0;j<Y;j++)W[j]=r[n[j]];for(var q=0,j=0;j<Y;j++)q+=k[j]*W[j];return q+.5|0},v._$br=function(t,i,e,r){var o=i._$Q2(t,e),n=t._$vs(),s=t._$Tr();if(i._$zr(n,s,o),o<=0)return r[n[0]];if(1==o){var _=r[n[0]],a=r[n[1]],h=s[0];return _+(a-_)*h}if(2==o){var _=r[n[0]],a=r[n[1]],l=r[n[2]],$=r[n[3]],h=s[0],u=s[1];return(1-u)*(_+(a-_)*h)+u*(l+($-l)*h)}if(3==o){var p=r[n[0]],f=r[n[1]],c=r[n[2]],d=r[n[3]],g=r[n[4]],y=r[n[5]],m=r[n[6]],T=r[n[7]],h=s[0],u=s[1],P=s[2];return(1-P)*((1-u)*(p+(f-p)*h)+u*(c+(d-c)*h))+P*((1-u)*(g+(y-g)*h)+u*(m+(T-m)*h))}if(4==o){var S=r[n[0]],v=r[n[1]],L=r[n[2]],M=r[n[3]],E=r[n[4]],A=r[n[5]],I=r[n[6]],w=r[n[7]],x=r[n[8]],O=r[n[9]],D=r[n[10]],R=r[n[11]],b=r[n[12]],F=r[n[13]],C=r[n[14]],N=r[n[15]],h=s[0],u=s[1],P=s[2],B=s[3];return(1-B)*((1-P)*((1-u)*(S+(v-S)*h)+u*(L+(M-L)*h))+P*((1-u)*(E+(A-E)*h)+u*(I+(w-I)*h)))+B*((1-P)*((1-u)*(x+(O-x)*h)+u*(D+(R-D)*h))+P*((1-u)*(b+(F-b)*h)+u*(C+(N-C)*h)))}for(var U=1<<o,G=new Float32Array(U),Y=0;Y<U;Y++){for(var k=Y,V=1,X=0;X<o;X++)V*=k%2==0?1-s[X]:s[X],k/=2;G[Y]=V}for(var z=new Float32Array(U),H=0;H<U;H++)z[H]=r[n[H]];for(var W=0,H=0;H<U;H++)W+=G[H]*z[H];return W},v._$Vr=function(t,i,e,r,o,n,s,_){var a=i._$Q2(t,e),h=t._$vs(),l=t._$Tr();i._$zr(h,l,a);var $=2*r,u=s;if(a<=0){var p=h[0],f=o[p];if(2==_&&0==s)w._$jT(f,0,n,0,$);else for(var c=0;c<$;)n[u]=f[c++],n[u+1]=f[c++],u+=_}else if(1==a)for(var f=o[h[0]],d=o[h[1]],g=l[0],y=1-g,c=0;c<$;)n[u]=f[c]*y+d[c]*g,++c,n[u+1]=f[c]*y+d[c]*g,++c,u+=_;else if(2==a)for(var f=o[h[0]],d=o[h[1]],m=o[h[2]],T=o[h[3]],g=l[0],P=l[1],y=1-g,S=1-P,v=S*y,L=S*g,M=P*y,E=P*g,c=0;c<$;)n[u]=v*f[c]+L*d[c]+M*m[c]+E*T[c],++c,n[u+1]=v*f[c]+L*d[c]+M*m[c]+E*T[c],++c,u+=_;else if(3==a)for(var A=o[h[0]],I=o[h[1]],x=o[h[2]],O=o[h[3]],D=o[h[4]],R=o[h[5]],b=o[h[6]],F=o[h[7]],g=l[0],P=l[1],C=l[2],y=1-g,S=1-P,N=1-C,B=N*S*y,U=N*S*g,G=N*P*y,Y=N*P*g,k=C*S*y,V=C*S*g,X=C*P*y,z=C*P*g,c=0;c<$;)n[u]=B*A[c]+U*I[c]+G*x[c]+Y*O[c]+k*D[c]+V*R[c]+X*b[c]+z*F[c],++c,n[u+1]=B*A[c]+U*I[c]+G*x[c]+Y*O[c]+k*D[c]+V*R[c]+X*b[c]+z*F[c],++c,u+=_;else if(4==a)for(var H=o[h[0]],W=o[h[1]],j=o[h[2]],q=o[h[3]],J=o[h[4]],Q=o[h[5]],Z=o[h[6]],K=o[h[7]],tt=o[h[8]],it=o[h[9]],et=o[h[10]],rt=o[h[11]],ot=o[h[12]],nt=o[h[13]],st=o[h[14]],_t=o[h[15]],g=l[0],P=l[1],C=l[2],at=l[3],y=1-g,S=1-P,N=1-C,ht=1-at,lt=ht*N*S*y,$t=ht*N*S*g,ut=ht*N*P*y,pt=ht*N*P*g,ft=ht*C*S*y,ct=ht*C*S*g,dt=ht*C*P*y,gt=ht*C*P*g,yt=at*N*S*y,mt=at*N*S*g,Tt=at*N*P*y,Pt=at*N*P*g,St=at*C*S*y,vt=at*C*S*g,Lt=at*C*P*y,Mt=at*C*P*g,c=0;c<$;)n[u]=lt*H[c]+$t*W[c]+ut*j[c]+pt*q[c]+ft*J[c]+ct*Q[c]+dt*Z[c]+gt*K[c]+yt*tt[c]+mt*it[c]+Tt*et[c]+Pt*rt[c]+St*ot[c]+vt*nt[c]+Lt*st[c]+Mt*_t[c],++c,n[u+1]=lt*H[c]+$t*W[c]+ut*j[c]+pt*q[c]+ft*J[c]+ct*Q[c]+dt*Z[c]+gt*K[c]+yt*tt[c]+mt*it[c]+Tt*et[c]+Pt*rt[c]+St*ot[c]+vt*nt[c]+Lt*st[c]+Mt*_t[c],++c,u+=_;else{for(var Et=1<<a,At=new Float32Array(Et),It=0;It<Et;It++){for(var wt=It,xt=1,Ot=0;Ot<a;Ot++)xt*=wt%2==0?1-l[Ot]:l[Ot],wt/=2;At[It]=xt}for(var Dt=new Float32Array(Et),Rt=0;Rt<Et;Rt++)Dt[Rt]=o[h[Rt]];for(var c=0;c<$;){for(var bt=0,Ft=0,Ct=c+1,Rt=0;Rt<Et;Rt++)bt+=At[Rt]*Dt[Rt][c],Ft+=At[Rt]*Dt[Rt][Ct];c+=2,n[u]=bt,n[u+1]=Ft,u+=_}}},L.prototype._$HT=function(t,i){this.x=t,this.y=i},L.prototype._$HT=function(t){this.x=t.x,this.y=t.y},M._$ur=-2,M._$ES=500,M._$wb=2,M._$8S=3,M._$52=M._$ES,M._$R2=M._$ES,M._$or=function(){return M._$52},M._$Pr=function(){return M._$R2},M.prototype.convertClipIDForV2_11=function(t){var i=[];return null==t?null:0==t.length?null:/,/.test(t)?i=t.id.split(","):(i.push(t.id),i)},M.prototype._$F0=function(t){this._$gP=t._$nP(),this._$dr=t._$nP(),this._$GS=t._$nP(),this._$qb=t._$6L(),this._$Lb=t._$cS(),this._$mS=t._$Tb(),t.getFormatVersion()>=G._$T7?(this.clipID=t._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[],this._$MS(this._$Lb)},M.prototype.getClipIDList=function(){return this.clipIDList},M.prototype.init=function(t){},M.prototype._$Nr=function(t,i){if(i._$IS[0]=!1,i._$Us=v._$Z2(t,this._$GS,i._$IS,this._$Lb),at._$Zs);else if(i._$IS[0])return;i._$7s=v._$br(t,this._$GS,i._$IS,this._$mS)},M.prototype._$2b=function(t,i){},M.prototype.getDrawDataID=function(){return this._$gP},M.prototype._$j2=function(t){this._$gP=t},M.prototype.getOpacity=function(t,i){return i._$7s},M.prototype._$zS=function(t,i){return i._$Us},M.prototype._$MS=function(t){for(var i=t.length-1;i>=0;--i){var e=t[i];e<M._$52?M._$52=e:e>M._$R2&&(M._$R2=e)}},M.prototype.getTargetBaseDataID=function(){return this._$dr},M.prototype._$gs=function(t){this._$dr=t},M.prototype._$32=function(){return null!=this._$dr&&this._$dr!=yt._$2o()},M.prototype.preDraw=function(t,i,e){},M.prototype.draw=function(t,i,e){},M.prototype.getType=function(){},M.prototype._$B2=function(t,i,e){},E._$ps=32,E.CLIPPING_PROCESS_NONE=0,E.CLIPPING_PROCESS_OVERWRITE_ALPHA=1,E.CLIPPING_PROCESS_MULTIPLY_ALPHA=2,E.CLIPPING_PROCESS_DRAW=3,E.CLIPPING_PROCESS_CLEAR_ALPHA=4,E.prototype.setChannelFlagAsColor=function(t,i){this.CHANNEL_COLORS[t]=i},E.prototype.getChannelFlagAsColor=function(t){return this.CHANNEL_COLORS[t]},E.prototype._$ZT=function(){},E.prototype._$Uo=function(t,i,e,r,o,n,s){},E.prototype._$Rs=function(){return-1},E.prototype._$Ds=function(t){},E.prototype.setBaseColor=function(t,i,e,r){t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),this._$lT=t,this._$C0=i,this._$tT=e,this._$WL=r},E.prototype._$WP=function(t){this.culling=t},E.prototype.setMatrix=function(t){for(var i=0;i<16;i++)this.matrix4x4[i]=t[i]},E.prototype._$IT=function(){return this.matrix4x4},E.prototype.setPremultipliedAlpha=function(t){this.premultipliedAlpha=t},E.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha},E.prototype.setAnisotropy=function(t){this.anisotropy=t},E.prototype.getAnisotropy=function(){return this.anisotropy},E.prototype.getClippingProcess=function(){return this.clippingProcess},E.prototype.setClippingProcess=function(t){this.clippingProcess=t},E.prototype.setClipBufPre_clipContextForMask=function(t){this.clipBufPre_clipContextMask=t},E.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask},E.prototype.setClipBufPre_clipContextForDraw=function(t){this.clipBufPre_clipContextDraw=t},E.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw},I._$ur=-2,I._$c2=1,I._$_b=2,I.prototype._$F0=function(t){this._$kP=t._$nP(),this._$dr=t._$nP()},I.prototype.readV2_opacity=function(t){t.getFormatVersion()>=G.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=t._$Tb())},I.prototype.init=function(t){},I.prototype._$Nr=function(t,i){},I.prototype.interpolateOpacity=function(t,i,e,r){null==this._$mS?e.setInterpolatedOpacity(1):e.setInterpolatedOpacity(v._$br(t,i,r,this._$mS))},I.prototype._$2b=function(t,i){},I.prototype._$nb=function(t,i,e,r,o,n,s){},I.prototype.getType=function(){},I.prototype._$gs=function(t){this._$dr=t},I.prototype._$a2=function(t){this._$kP=t},I.prototype.getTargetBaseDataID=function(){return this._$dr},I.prototype.getBaseDataID=function(){return this._$kP},I.prototype._$32=function(){return null!=this._$dr&&this._$dr!=yt._$2o()},w._$W2=0,w._$CS=w._$W2,w._$Mo=function(){return!0},w._$XP=function(t){try{for(var i=getTimeMSec();getTimeMSec()-i<t;);}catch(t){t._$Rb()}},w.getUserTimeMSec=function(){return w._$CS==w._$W2?w.getSystemTimeMSec():w._$CS},w.setUserTimeMSec=function(t){w._$CS=t},w.updateUserTimeMSec=function(){return w._$CS=w.getSystemTimeMSec()},w.getTimeMSec=function(){return(new Date).getTime()},w.getSystemTimeMSec=function(){return(new Date).getTime()},w._$Q=function(t){},w._$jT=function(t,i,e,r,o){for(var n=0;n<o;n++)e[r+n]=t[i+n]},x._$ds=-2,x.prototype._$F0=function(t){this._$wL=t._$nP(),this._$VP=t._$6L(),this._$GP=t._$nP()},x.prototype.getParamIndex=function(t){return this._$2r!=t&&(this._$8o=x._$ds),this._$8o},x.prototype._$Pb=function(t,i){this._$8o=t,this._$2r=i},x.prototype.getParamID=function(){return this._$wL},x.prototype._$yP=function(t){this._$wL=t},x.prototype._$N2=function(){return this._$VP},x.prototype._$d2=function(){return this._$GP},x.prototype._$t2=function(t,i){this._$VP=t,this._$GP=i},x.prototype._$Lr=function(){return this._$O2},x.prototype._$wr=function(t){this._$O2=t},x.prototype._$SL=function(){return this._$ri},x.prototype._$AL=function(t){this._$ri=t},O.startsWith=function(t,i,e){var r=i+e.length;if(r>=t.length)return!1;for(var o=i;o<r;o++)if(O.getChar(t,o)!=e.charAt(o-i))return!1;return!0},O.getChar=function(t,i){return String.fromCharCode(t.getUint8(i))},O.createString=function(t,i,e){for(var r=new ArrayBuffer(2*e),o=new Uint16Array(r),n=0;n<e;n++)o[n]=t.getUint8(i+n);return String.fromCharCode.apply(null,o)},O._$LS=function(t,i,e,r){t instanceof ArrayBuffer&&(t=new DataView(t));var o=e,n=!1,s=!1,_=0,a=O.getChar(t,o);"-"==a&&(n=!0,o++);for(var h=!1;o<i;o++){switch(a=O.getChar(t,o)){case"0":_*=10;break;case"1":_=10*_+1;break;case"2":_=10*_+2;break;case"3":_=10*_+3;break;case"4":_=10*_+4;break;case"5":_=10*_+5;break;case"6":_=10*_+6;break;case"7":_=10*_+7;break;case"8":_=10*_+8;break;case"9":_=10*_+9;break;case".":s=!0,o++,h=!0;break;default:h=!0}if(h)break}if(s)for(var l=.1,$=!1;o<i;o++){switch(a=O.getChar(t,o)){case"0":break;case"1":_+=1*l;break;case"2":_+=2*l;break;case"3":_+=3*l;break;case"4":_+=4*l;break;case"5":_+=5*l;break;case"6":_+=6*l;break;case"7":_+=7*l;break;case"8":_+=8*l;break;case"9":_+=9*l;break;default:$=!0}if(l*=.1,$)break}return n&&(_=-_),r[0]=o,_},D.prototype._$zP=function(){this._$Ob=new Array},D.prototype._$F0=function(t){this._$Ob=t._$nP()},D.prototype._$Ur=function(t){if(t._$WS())return!0;for(var i=t._$v2(),e=this._$Ob.length-1;e>=0;--e){var r=this._$Ob[e].getParamIndex(i);if(r==x._$ds&&(r=t.getParamIndex(this._$Ob[e].getParamID())),t._$Xb(r))return!0}return!1},D.prototype._$Q2=function(t,i){for(var e,r,o=this._$Ob.length,n=t._$v2(),s=0,_=0;_<o;_++){var a=this._$Ob[_];if(e=a.getParamIndex(n),e==x._$ds&&(e=t.getParamIndex(a.getParamID()),a._$Pb(e,n)),e<0)throw new Exception("err 23242 : "+a.getParamID());var h=e<0?0:t.getParamFloat(e);r=a._$N2();var l,$,u=a._$d2(),p=-1,f=0;if(r<1);else if(1==r)l=u[0],l-U._$J<h&&h<l+U._$J?(p=0,f=0):(p=0,i[0]=!0);else if(l=u[0],h<l-U._$J)p=0,i[0]=!0;else if(h<l+U._$J)p=0;else{for(var c=!1,d=1;d<r;++d){if($=u[d],h<$+U._$J){$-U._$J<h?p=d:(p=d-1,f=(h-l)/($-l),s++),c=!0;break}l=$}c||(p=r-1,f=0,i[0]=!0)}a._$wr(p),a._$AL(f)}return s},D.prototype._$zr=function(t,i,e){var r=1<<e;r+1>U._$Qb&&console.log("err 23245\\n");for(var o=this._$Ob.length,n=1,s=1,_=0,a=0;a<r;++a)t[a]=0;for(var h=0;h<o;++h){var l=this._$Ob[h];if(0==l._$SL()){var $=l._$Lr()*n;if($<0&&at._$3T)throw new Exception("err 23246");for(var a=0;a<r;++a)t[a]+=$}else{for(var $=n*l._$Lr(),u=n*(l._$Lr()+1),a=0;a<r;++a)t[a]+=(a/s|0)%2==0?$:u;i[_++]=l._$SL(),s*=2}n*=l._$N2()}t[r]=65535,i[_]=-1},D.prototype._$h2=function(t,i,e){for(var r=new Float32Array(i),o=0;o<i;++o)r[o]=e[o];var n=new x;n._$yP(t),n._$t2(i,r),this._$Ob.push(n)},D.prototype._$J2=function(t){for(var i=t,e=this._$Ob.length,r=0;r<e;++r){var o=this._$Ob[r],n=o._$N2(),s=i%o._$N2(),_=o._$d2()[s];console.log("%s[%d]=%7.2f / ",o.getParamID(),s,_),i/=n}console.log("\\n")},D.prototype.getParamCount=function(){return this._$Ob.length},D.prototype._$zs=function(){return this._$Ob},R.prototype.identity=function(){for(var t=0;t<16;t++)this.m[t]=t%5==0?1:0},R.prototype.getArray=function(){return this.m},R.prototype.getCopyMatrix=function(){return new Float32Array(this.m)},R.prototype.setMatrix=function(t){if(null!=t&&16==t.length)for(var i=0;i<16;i++)this.m[i]=t[i]},R.prototype.mult=function(t,i,e){return null==i?null:(this==i?this.mult_safe(this.m,t.m,i.m,e):this.mult_fast(this.m,t.m,i.m,e),i)},R.prototype.mult_safe=function(t,i,e,r){if(t==e){var o=new Array(16);this.mult_fast(t,i,o,r);for(var n=15;n>=0;--n)e[n]=o[n]}else this.mult_fast(t,i,e,r)},R.prototype.mult_fast=function(t,i,e,r){r?(e[0]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2],e[4]=t[0]*i[4]+t[4]*i[5]+t[8]*i[6],e[8]=t[0]*i[8]+t[4]*i[9]+t[8]*i[10],e[12]=t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],e[1]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2],e[5]=t[1]*i[4]+t[5]*i[5]+t[9]*i[6],e[9]=t[1]*i[8]+t[5]*i[9]+t[9]*i[10],e[13]=t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],e[2]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2],e[6]=t[2]*i[4]+t[6]*i[5]+t[10]*i[6],e[10]=t[2]*i[8]+t[6]*i[9]+t[10]*i[10],e[14]=t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],e[3]=e[7]=e[11]=0,e[15]=1):(e[0]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],e[4]=t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],e[8]=t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],e[12]=t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],e[1]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],e[5]=t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],e[9]=t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],e[13]=t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],e[2]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],e[6]=t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],e[10]=t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],e[14]=t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],e[3]=t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],e[7]=t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],e[11]=t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],e[15]=t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15])},R.prototype.translate=function(t,i,e){this.m[12]=this.m[0]*t+this.m[4]*i+this.m[8]*e+this.m[12],this.m[13]=this.m[1]*t+this.m[5]*i+this.m[9]*e+this.m[13],this.m[14]=this.m[2]*t+this.m[6]*i+this.m[10]*e+this.m[14],this.m[15]=this.m[3]*t+this.m[7]*i+this.m[11]*e+this.m[15]},R.prototype.scale=function(t,i,e){this.m[0]*=t,this.m[4]*=i,this.m[8]*=e,this.m[1]*=t,this.m[5]*=i,this.m[9]*=e,this.m[2]*=t,this.m[6]*=i,this.m[10]*=e,this.m[3]*=t,this.m[7]*=i,this.m[11]*=e},R.prototype.rotateX=function(t){var i=Lt.fcos(t),e=Lt._$9(t),r=this.m[4];this.m[4]=r*i+this.m[8]*e,this.m[8]=r*-e+this.m[8]*i,r=this.m[5],this.m[5]=r*i+this.m[9]*e,this.m[9]=r*-e+this.m[9]*i,r=this.m[6],this.m[6]=r*i+this.m[10]*e,this.m[10]=r*-e+this.m[10]*i,r=this.m[7],this.m[7]=r*i+this.m[11]*e,this.m[11]=r*-e+this.m[11]*i},R.prototype.rotateY=function(t){var i=Lt.fcos(t),e=Lt._$9(t),r=this.m[0];this.m[0]=r*i+this.m[8]*-e,this.m[8]=r*e+this.m[8]*i,r=this.m[1],this.m[1]=r*i+this.m[9]*-e,this.m[9]=r*e+this.m[9]*i,r=m[2],this.m[2]=r*i+this.m[10]*-e,this.m[10]=r*e+this.m[10]*i,r=m[3],this.m[3]=r*i+this.m[11]*-e,this.m[11]=r*e+this.m[11]*i},R.prototype.rotateZ=function(t){var i=Lt.fcos(t),e=Lt._$9(t),r=this.m[0];this.m[0]=r*i+this.m[4]*e,this.m[4]=r*-e+this.m[4]*i,r=this.m[1],this.m[1]=r*i+this.m[5]*e,this.m[5]=r*-e+this.m[5]*i,r=this.m[2],this.m[2]=r*i+this.m[6]*e,this.m[6]=r*-e+this.m[6]*i,r=this.m[3],this.m[3]=r*i+this.m[7]*e,this.m[7]=r*-e+this.m[7]*i},b.prototype=new et,b._$tP=new Object,b._$27=function(){b._$tP.clear()},b.getID=function(t){var i=b._$tP[t];return null==i&&(i=new b(t),b._$tP[t]=i),i},b.prototype._$3s=function(){return new b},F._$kS=-1,F._$pS=0,F._$hb=1,F.STATE_IDENTITY=0,F._$gb=1,F._$fo=2,F._$go=4,F.prototype.transform=function(t,i,e){var r,o,n,s,_,a,h=0,l=0;switch(this._$hi){default:return;case F._$go|F._$fo|F._$gb:for(r=this._$7,o=this._$H,n=this._$k,s=this._$f,_=this._$g,a=this._$w;--e>=0;){var $=t[h++],u=t[h++];i[l++]=r*$+o*u+n,i[l++]=s*$+_*u+a}return;case F._$go|F._$fo:for(r=this._$7,o=this._$H,s=this._$f,_=this._$g;--e>=0;){var $=t[h++],u=t[h++];i[l++]=r*$+o*u,i[l++]=s*$+_*u}return;case F._$go|F._$gb:for(o=this._$H,n=this._$k,s=this._$f,a=this._$w;--e>=0;){var $=t[h++];i[l++]=o*t[h++]+n,i[l++]=s*$+a}return;case F._$go:for(o=this._$H,s=this._$f;--e>=0;){var $=t[h++];i[l++]=o*t[h++],i[l++]=s*$}return;case F._$fo|F._$gb:for(r=this._$7,n=this._$k,_=this._$g,a=this._$w;--e>=0;)i[l++]=r*t[h++]+n,i[l++]=_*t[h++]+a;return;case F._$fo:for(r=this._$7,_=this._$g;--e>=0;)i[l++]=r*t[h++],i[l++]=_*t[h++];return;case F._$gb:for(n=this._$k,a=this._$w;--e>=0;)i[l++]=t[h++]+n,i[l++]=t[h++]+a;return;case F.STATE_IDENTITY:return void(t==i&&h==l||w._$jT(t,h,i,l,2*e))}},F.prototype.update=function(){0==this._$H&&0==this._$f?1==this._$7&&1==this._$g?0==this._$k&&0==this._$w?(this._$hi=F.STATE_IDENTITY,this._$Z=F._$pS):(this._$hi=F._$gb,this._$Z=F._$hb):0==this._$k&&0==this._$w?(this._$hi=F._$fo,this._$Z=F._$kS):(this._$hi=F._$fo|F._$gb,this._$Z=F._$kS):0==this._$7&&0==this._$g?0==this._$k&&0==this._$w?(this._$hi=F._$go,this._$Z=F._$kS):(this._$hi=F._$go|F._$gb,this._$Z=F._$kS):0==this._$k&&0==this._$w?(this._$hi=F._$go|F._$fo,this._$Z=F._$kS):(this._$hi=F._$go|F._$fo|F._$gb,this._$Z=F._$kS)},F.prototype._$RT=function(t){this._$IT(t);var i=t[0],e=t[2],r=t[1],o=t[3],n=Math.sqrt(i*i+r*r),s=i*o-e*r;0==n?at._$so&&console.log("affine._$RT() / rt==0"):(t[0]=n,t[1]=s/n,t[2]=(r*o+i*e)/s,t[3]=Math.atan2(r,i))},F.prototype._$ho=function(t,i,e,r){var o=new Float32Array(6),n=new Float32Array(6);t._$RT(o),i._$RT(n);var s=new Float32Array(6);s[0]=o[0]+(n[0]-o[0])*e,s[1]=o[1]+(n[1]-o[1])*e,s[2]=o[2]+(n[2]-o[2])*e,s[3]=o[3]+(n[3]-o[3])*e,s[4]=o[4]+(n[4]-o[4])*e,s[5]=o[5]+(n[5]-o[5])*e,r._$CT(s)},F.prototype._$CT=function(t){var i=Math.cos(t[3]),e=Math.sin(t[3]);this._$7=t[0]*i,this._$f=t[0]*e,this._$H=t[1]*(t[2]*i-e),this._$g=t[1]*(t[2]*e+i),this._$k=t[4],this._$w=t[5],this.update()},F.prototype._$IT=function(t){t[0]=this._$7,t[1]=this._$f,t[2]=this._$H,t[3]=this._$g,t[4]=this._$k,t[5]=this._$w},C.prototype=new s,C._$cs="VISIBLE:",C._$ar="LAYOUT:",C._$Co=0,C._$D2=[],C._$1T=1,C.loadMotion=function(t){var i=new C,e=[0],r=t.length;i._$yT=0;for(var o=0;o<r;++o){var n=255&t[o];if("\\n"!=n&&"\\r"!=n)if("#"!=n)if("$"!=n){if("a"<=n&&n<="z"||"A"<=n&&n<="Z"||"_"==n){for(var s=o,_=-1;o<r&&("\\r"!=(n=255&t[o])&&"\\n"!=n);++o)if("="==n){_=o;break}if(_>=0){var a=new B;O.startsWith(t,s,C._$cs)?(a._$RP=B._$hs,a._$4P=new String(t,s,_-s)):O.startsWith(t,s,C._$ar)?(a._$4P=new String(t,s+7,_-s-7),O.startsWith(t,s+7,"ANCHOR_X")?a._$RP=B._$xs:O.startsWith(t,s+7,"ANCHOR_Y")?a._$RP=B._$us:O.startsWith(t,s+7,"SCALE_X")?a._$RP=B._$qs:O.startsWith(t,s+7,"SCALE_Y")?a._$RP=B._$Ys:O.startsWith(t,s+7,"X")?a._$RP=B._$ws:O.startsWith(t,s+7,"Y")&&(a._$RP=B._$Ns)):(a._$RP=B._$Fr,a._$4P=new String(t,s,_-s)),i.motions.push(a);var h=0;for(C._$D2.clear(),o=_+1;o<r&&("\\r"!=(n=255&t[o])&&"\\n"!=n);++o)if(","!=n&&" "!=n&&"\\t"!=n){var l=O._$LS(t,r,o,e);if(e[0]>0){C._$D2.push(l),h++;var $=e[0];if($<o){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\\n");break}o=$}}a._$I0=C._$D2._$BL(),h>i._$yT&&(i._$yT=h)}}}else{for(var s=o,_=-1;o<r&&("\\r"!=(n=255&t[o])&&"\\n"!=n);++o)if("="==n){_=o;break}var u=!1;if(_>=0)for(_==s+4&&"f"==t[s+1]&&"p"==t[s+2]&&"s"==t[s+3]&&(u=!0),o=_+1;o<r&&("\\r"!=(n=255&t[o])&&"\\n"!=n);++o)if(","!=n&&" "!=n&&"\\t"!=n){var l=O._$LS(t,r,o,e);e[0]>0&&u&&5<l&&l<121&&(i._$D0=l),o=e[0]}for(;o<r&&("\\n"!=t[o]&&"\\r"!=t[o]);++o);}else for(;o<r&&("\\n"!=t[o]&&"\\r"!=t[o]);++o);}return i._$AS=1e3*i._$yT/i._$D0|0,i},C.prototype.getDurationMSec=function(){return this._$AS},C.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var e=0;e<i._$I0.length&&e<10;e++)console.log("%5.2f ,",i._$I0[e]);console.log("\\n")}},C.prototype.updateParamExe=function(t,i,e,r){for(var o=i-r._$z2,n=o*this._$D0/1e3,s=0|n,_=n-s,a=0;a<this.motions.length;a++){var h=this.motions[a],l=h._$I0.length,$=h._$4P;if(h._$RP==B._$hs){var u=h._$I0[s>=l?l-1:s];t.setParamFloat($,u)}else if(B._$ws<=h._$RP&&h._$RP<=B._$Ys);else{var p=t.getParamFloat($),f=h._$I0[s>=l?l-1:s],c=h._$I0[s+1>=l?l-1:s+1],d=f+(c-f)*_,g=p+(d-p)*e;t.setParamFloat($,g)}}s>=this._$yT&&(this._$E?(r._$z2=i,this.loopFadeIn&&(r._$bs=i)):r._$9L=!0)},C.prototype._$r0=function(){return this._$E},C.prototype._$aL=function(t){this._$E=t},C.prototype.isLoopFadeIn=function(){return this.loopFadeIn},C.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t},N.prototype.clear=function(){this.size=0},N.prototype.add=function(t){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);w._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=t},N.prototype._$BL=function(){var t=new Float32Array(this.size);return w._$jT(this._$P,0,t,0,this.size),t},B._$Fr=0,B._$hs=1,B._$ws=100,B._$Ns=101,B._$xs=102,B._$us=103,B._$qs=104,B._$Ys=105,U._$Ms=1,U._$Qs=2,U._$i2=0,U._$No=2,U._$do=U._$Ms,U._$Ls=!0,U._$1r=5,U._$Qb=65,U._$J=1e-4,U._$FT=.001,U._$Ss=3,G._$o7=6,G._$S7=7,G._$s7=8,G._$77=9,G.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,G.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11,G._$T7=G.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1,G._$Is=-2004318072,G._$h0=0,G._$4L=23,G._$7P=33,G._$uT=function(t){console.log("_$bo :: _$6 _$mo _$E0 : %d\\n",t)},G._$9o=function(t){if(t<40)return G._$uT(t),null;if(t<50)return G._$uT(t),null;if(t<60)return G._$uT(t),null;if(t<100)switch(t){case 65:return new Z;case 66:return new D;case 67:return new x;case 68:return new z;case 69:return new P;case 70:return new $t;default:return G._$uT(t),null}else if(t<150)switch(t){case 131:return new st;case 133:return new tt;case 136:return new p;case 137:return new ot;case 142:return new j}return G._$uT(t),null},Y._$HP=0,Y._$_0=!0;Y._$V2=-1,Y._$W0=-1,Y._$jr=!1,Y._$ZS=!0,Y._$tr=-1e6,Y._$lr=1e6,Y._$is=32,Y._$e=!1,Y.prototype.getDrawDataIndex=function(t){for(var i=this._$aS.length-1;i>=0;--i)if(null!=this._$aS[i]&&this._$aS[i].getDrawDataID()==t)return i;return-1},Y.prototype.getDrawData=function(t){if(t instanceof b){if(null==this._$Bo){this._$Bo=new Object;for(var i=this._$aS.length,e=0;e<i;e++){var r=this._$aS[e],o=r.getDrawDataID();null!=o&&(this._$Bo[o]=r)}}return this._$Bo[id]}return t<this._$aS.length?this._$aS[t]:null},Y.prototype.release=function(){this._$3S.clear(),this._$aS.clear(),this._$F2.clear(),null!=this._$Bo&&this._$Bo.clear(),this._$db.clear(),this._$8b.clear(),this._$Hr.clear()},Y.prototype.init=function(){this._$co++,this._$F2.length>0&&this.release();for(var t=this._$Ri.getModelImpl(),i=t._$Xr(),r=i.length,o=new Array,n=new Array,s=0;s<r;++s){var _=i[s];this._$F2.push(_),this._$Hr.push(_.init(this));for(var a=_.getBaseData(),h=a.length,l=0;l<h;++l)o.push(a[l]);for(var l=0;l<h;++l){var $=a[l].init(this);$._$l2(s),n.push($)}for(var u=_.getDrawData(),p=u.length,l=0;l<p;++l){var f=u[l],c=f.init(this);c._$IP=s,this._$aS.push(f),this._$8b.push(c)}}for(var d=o.length,g=yt._$2o();;){for(var y=!1,s=0;s<d;++s){var m=o[s];if(null!=m){var T=m.getTargetBaseDataID();(null==T||T==g||this.getBaseDataIndex(T)>=0)&&(this._$3S.push(m),this._$db.push(n[s]),o[s]=null,y=!0)}}if(!y)break}var P=t._$E2();if(null!=P){var S=P._$1s();if(null!=S)for(var v=S.length,s=0;s<v;++s){var L=S[s];null!=L&&this._$02(L.getParamID(),L.getDefaultValue(),L.getMinValue(),L.getMaxValue())}}this.clipManager=new e(this.dp_webgl),this.clipManager.init(this,this._$aS,this._$8b),this._$QT=!0},Y.prototype.update=function(){Y._$e&&_.start("_$zL");for(var t=this._$_2.length,i=0;i<t;i++)this._$_2[i]!=this._$vr[i]&&(this._$Js[i]=Y._$ZS,this._$vr[i]=this._$_2[i]);var e=this._$3S.length,r=this._$aS.length,o=W._$or(),n=W._$Pr(),s=n-o+1;(null==this._$Ws||this._$Ws.length<s)&&(this._$Ws=new Int16Array(s),this._$Vs=new Int16Array(s));for(var i=0;i<s;i++)this._$Ws[i]=Y._$V2,this._$Vs[i]=Y._$V2;(null==this._$Er||this._$Er.length<r)&&(this._$Er=new Int16Array(r));for(var i=0;i<r;i++)this._$Er[i]=Y._$W0;Y._$e&&_.dump("_$zL"),Y._$e&&_.start("_$UL");for(var a=null,h=0;h<e;++h){var l=this._$3S[h],$=this._$db[h];try{l._$Nr(this,$),l._$2b(this,$)}catch(t){null==a&&(a=t)}}null!=a&&Y._$_0&&_._$Rb(a),Y._$e&&_.dump("_$UL"),Y._$e&&_.start("_$DL");for(var u=null,p=0;p<r;++p){var f=this._$aS[p],c=this._$8b[p];try{if(f._$Nr(this,c),c._$u2())continue;f._$2b(this,c);var d,g=Math.floor(f._$zS(this,c)-o);try{d=this._$Vs[g]}catch(t){console.log("_$li :: %s / %s \\t\\t\\t\\t@@_$fS\\n",t.toString(),f.getDrawDataID().toString()),g=Math.floor(f._$zS(this,c)-o);continue}d==Y._$V2?this._$Ws[g]=p:this._$Er[d]=p,this._$Vs[g]=p}catch(t){null==u&&(u=t,at._$sT(at._$H7))}}null!=u&&Y._$_0&&_._$Rb(u),Y._$e&&_.dump("_$DL"),Y._$e&&_.start("_$eL");for(var i=this._$Js.length-1;i>=0;i--)this._$Js[i]=Y._$jr;return this._$QT=!1,Y._$e&&_.dump("_$eL"),!1},Y.prototype.preDraw=function(t){null!=this.clipManager&&(t._$ZT(),this.clipManager.setupClip(this,t))},Y.prototype.draw=function(t){if(null==this._$Ws)return void _._$li("call _$Ri.update() before _$Ri.draw() ");var i=this._$Ws.length;t._$ZT();for(var e=0;e<i;++e){var r=this._$Ws[e];if(r!=Y._$V2)for(;;){var o=this._$aS[r],n=this._$8b[r];if(n._$yo()){var s=n._$IP,a=this._$Hr[s];n._$VS=a.getPartsOpacity(),o.draw(t,this,n)}var h=this._$Er[r];if(h<=r||h==Y._$W0)break;r=h}}},Y.prototype.getParamIndex=function(t){for(var i=this._$pb.length-1;i>=0;--i)if(this._$pb[i]==t)return i;return this._$02(t,0,Y._$tr,Y._$lr)},Y.prototype._$BS=function(t){return this.getBaseDataIndex(t)},Y.prototype.getBaseDataIndex=function(t){for(var i=this._$3S.length-1;i>=0;--i)if(null!=this._$3S[i]&&this._$3S[i].getBaseDataID()==t)return i;return-1},Y.prototype._$UT=function(t,i){var e=new Float32Array(i);return w._$jT(t,0,e,0,t.length),e},Y.prototype._$02=function(t,i,e,r){if(this._$qo>=this._$pb.length){var o=this._$pb.length,n=new Array(2*o);w._$jT(this._$pb,0,n,0,o),this._$pb=n,this._$_2=this._$UT(this._$_2,2*o),this._$vr=this._$UT(this._$vr,2*o),this._$Rr=this._$UT(this._$Rr,2*o),this._$Or=this._$UT(this._$Or,2*o);var s=new Array;w._$jT(this._$Js,0,s,0,o),this._$Js=s}return this._$pb[this._$qo]=t,this._$_2[this._$qo]=i,this._$vr[this._$qo]=i,this._$Rr[this._$qo]=e,this._$Or[this._$qo]=r,this._$Js[this._$qo]=Y._$ZS,this._$qo++},Y.prototype._$Zo=function(t,i){this._$3S[t]=i},Y.prototype.setParamFloat=function(t,i){i<this._$Rr[t]&&(i=this._$Rr[t]),i>this._$Or[t]&&(i=this._$Or[t]),this._$_2[t]=i},Y.prototype.loadParam=function(){var t=this._$_2.length;t>this._$fs.length&&(t=this._$fs.length),w._$jT(this._$fs,0,this._$_2,0,t)},Y.prototype.saveParam=function(){var t=this._$_2.length;t>this._$fs.length&&(this._$fs=new Float32Array(t)),w._$jT(this._$_2,0,this._$fs,0,t)},Y.prototype._$v2=function(){return this._$co},Y.prototype._$WS=function(){return this._$QT},Y.prototype._$Xb=function(t){return this._$Js[t]==Y._$ZS},Y.prototype._$vs=function(){return this._$Es},Y.prototype._$Tr=function(){return this._$ZP},Y.prototype.getBaseData=function(t){return this._$3S[t]},Y.prototype.getParamFloat=function(t){return this._$_2[t]},Y.prototype.getParamMax=function(t){return this._$Or[t]},Y.prototype.getParamMin=function(t){return this._$Rr[t]},Y.prototype.setPartsOpacity=function(t,i){this._$Hr[t].setPartsOpacity(i)},Y.prototype.getPartsOpacity=function(t){return this._$Hr[t].getPartsOpacity()},Y.prototype.getPartsDataIndex=function(t){for(var i=this._$F2.length-1;i>=0;--i)if(null!=this._$F2[i]&&this._$F2[i]._$p2()==t)return i;return-1},Y.prototype._$q2=function(t){return this._$db[t]},Y.prototype._$C2=function(t){return this._$8b[t]},Y.prototype._$Bb=function(t){return this._$Hr[t]},Y.prototype._$5s=function(t,i){for(var e=this._$Ws.length,r=t,o=0;o<e;++o){var n=this._$Ws[o];if(n!=Y._$V2)for(;;){var s=this._$8b[n];s._$yo()&&(s._$GT()._$B2(this,s,r),r+=i);var _=this._$Er[n];if(_<=n||_==Y._$W0)break;n=_}}},Y.prototype.setDrawParam=function(t){this.dp_webgl=t},Y.prototype.getDrawParam=function(){return this.dp_webgl},k._$0T=function(t){return k._$0T(new _$5(t))},k._$0T=function(t){if(!t.exists())throw new _$ls(t._$3b());for(var i,e=t.length(),r=new Int8Array(e),o=new _$Xs(new _$kb(t),8192),n=0;(i=o.read(r,n,e-n))>0;)n+=i;return r},k._$C=function(t){var i=null,e=null;try{i=t instanceof Array?t:new _$Xs(t,8192),e=new _$js;for(var r,o=new Int8Array(1e3);(r=i.read(o))>0;)e.write(o,0,r);return e._$TS()}finally{null!=t&&t.close(),null!=e&&(e.flush(),e.close())}},V.prototype._$T2=function(){return w.getUserTimeMSec()+Math._$10()*(2*this._$Br-1)},V.prototype._$uo=function(t){this._$Br=t},V.prototype._$QS=function(t,i,e){this._$Dr=t,this._$Cb=i,this._$mr=e},V.prototype._$7T=function(t){var i,e=w.getUserTimeMSec(),r=0;switch(this._$_L){case STATE_CLOSING:r=(e-this._$bb)/this._$Dr,r>=1&&(r=1,this._$_L=wt.STATE_CLOSED,this._$bb=e),i=1-r;break;case STATE_CLOSED:r=(e-this._$bb)/this._$Cb,r>=1&&(this._$_L=wt.STATE_OPENING,this._$bb=e),i=0;break;case STATE_OPENING:r=(e-this._$bb)/this._$mr,r>=1&&(r=1,this._$_L=wt.STATE_INTERVAL,this._$12=this._$T2()),i=r;break;case STATE_INTERVAL:this._$12<e&&(this._$_L=wt.STATE_CLOSING,this._$bb=e),i=1;break;case STATE_FIRST:default:this._$_L=wt.STATE_INTERVAL,this._$12=this._$T2(),i=1}this._$jo||(i=-i),t.setParamFloat(this._$iL,i),t.setParamFloat(this._$0L,i)};var wt=function(){};wt.STATE_FIRST="STATE_FIRST",wt.STATE_INTERVAL="STATE_INTERVAL",wt.STATE_CLOSING="STATE_CLOSING",wt.STATE_CLOSED="STATE_CLOSED",wt.STATE_OPENING="STATE_OPENING",X.prototype=new E,X._$As=32,X._$Gr=!1,X._$NT=null,X._$vS=null,X._$no=null,X._$9r=function(t){return new Float32Array(t)},X._$vb=function(t){return new Int16Array(t)},X._$cr=function(t,i){return null==t||t._$yL()<i.length?(t=X._$9r(2*i.length),t.put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},X._$mb=function(t,i){return null==t||t._$yL()<i.length?(t=X._$vb(2*i.length),t.put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},X._$Hs=function(){return X._$Gr},X._$as=function(t){X._$Gr=t},X.prototype.setGL=function(t){this.gl=t},X.prototype.setTransform=function(t){this.transform=t},X.prototype._$ZT=function(){},X.prototype._$Uo=function(t,i,e,r,o,n,s,_){if(!(n<.01)){var a=this._$U2[t],h=n>.9?at.EXPAND_W:0;this.gl.drawElements(a,e,r,o,n,h,this.transform,_)}},X.prototype._$Rs=function(){throw new Error("_$Rs")},X.prototype._$Ds=function(t){throw new Error("_$Ds")},X.prototype._$K2=function(){for(var t=0;t<this._$sb.length;t++){0!=this._$sb[t]&&(this.gl._$Sr(1,this._$sb,t),this._$sb[t]=0)}},X.prototype.setTexture=function(t,i){this._$sb.length<t+1&&this._$nS(t),this._$sb[t]=i},X.prototype.setTexture=function(t,i){this._$sb.length<t+1&&this._$nS(t),this._$U2[t]=i},X.prototype._$nS=function(t){var i=Math.max(2*this._$sb.length,t+1+10),e=new Int32Array(i);w._$jT(this._$sb,0,e,0,this._$sb.length),this._$sb=e;var r=new Array;w._$jT(this._$U2,0,r,0,this._$U2.length),this._$U2=r},z.prototype=new I,z._$Xo=new Float32Array(2),z._$io=new Float32Array(2),z._$0o=new Float32Array(2),z._$Lo=new Float32Array(2),z._$To=new Float32Array(2),z._$Po=new Float32Array(2),z._$gT=new Array,z.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP(),this._$Y0=new Array},z.prototype.getType=function(){return I._$c2},z.prototype._$F0=function(t){I.prototype._$F0.call(this,t),this._$GS=t._$nP(),this._$Y0=t._$nP(),I.prototype.readV2_opacity.call(this,t)},z.prototype.init=function(t){var i=new H(this);return i._$Yr=new P,this._$32()&&(i._$Wr=new P),i},z.prototype._$Nr=function(t,i){this!=i._$GT()&&console.log("### assert!! ### ");var e=i;if(this._$GS._$Ur(t)){var r=z._$gT;r[0]=!1;var o=this._$GS._$Q2(t,r);i._$Ib(r[0]),this.interpolateOpacity(t,this._$GS,i,r);var n=t._$vs(),s=t._$Tr();if(this._$GS._$zr(n,s,o),o<=0){var _=this._$Y0[n[0]];e._$Yr.init(_)}else if(1==o){var _=this._$Y0[n[0]],a=this._$Y0[n[1]],h=s[0];e._$Yr._$fL=_._$fL+(a._$fL-_._$fL)*h,e._$Yr._$gL=_._$gL+(a._$gL-_._$gL)*h,e._$Yr._$B0=_._$B0+(a._$B0-_._$B0)*h,e._$Yr._$z0=_._$z0+(a._$z0-_._$z0)*h,e._$Yr._$qT=_._$qT+(a._$qT-_._$qT)*h}else if(2==o){var _=this._$Y0[n[0]],a=this._$Y0[n[1]],l=this._$Y0[n[2]],$=this._$Y0[n[3]],h=s[0],u=s[1],p=_._$fL+(a._$fL-_._$fL)*h,f=l._$fL+($._$fL-l._$fL)*h;e._$Yr._$fL=p+(f-p)*u,p=_._$gL+(a._$gL-_._$gL)*h,f=l._$gL+($._$gL-l._$gL)*h,e._$Yr._$gL=p+(f-p)*u,p=_._$B0+(a._$B0-_._$B0)*h,f=l._$B0+($._$B0-l._$B0)*h,e._$Yr._$B0=p+(f-p)*u,p=_._$z0+(a._$z0-_._$z0)*h,f=l._$z0+($._$z0-l._$z0)*h,e._$Yr._$z0=p+(f-p)*u,p=_._$qT+(a._$qT-_._$qT)*h,f=l._$qT+($._$qT-l._$qT)*h,e._$Yr._$qT=p+(f-p)*u}else if(3==o){var c=this._$Y0[n[0]],d=this._$Y0[n[1]],g=this._$Y0[n[2]],y=this._$Y0[n[3]],m=this._$Y0[n[4]],T=this._$Y0[n[5]],P=this._$Y0[n[6]],S=this._$Y0[n[7]],h=s[0],u=s[1],v=s[2],p=c._$fL+(d._$fL-c._$fL)*h,f=g._$fL+(y._$fL-g._$fL)*h,L=m._$fL+(T._$fL-m._$fL)*h,M=P._$fL+(S._$fL-P._$fL)*h;e._$Yr._$fL=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u),p=c._$gL+(d._$gL-c._$gL)*h,f=g._$gL+(y._$gL-g._$gL)*h,L=m._$gL+(T._$gL-m._$gL)*h,M=P._$gL+(S._$gL-P._$gL)*h,e._$Yr._$gL=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u),p=c._$B0+(d._$B0-c._$B0)*h,f=g._$B0+(y._$B0-g._$B0)*h,L=m._$B0+(T._$B0-m._$B0)*h,M=P._$B0+(S._$B0-P._$B0)*h,e._$Yr._$B0=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u),p=c._$z0+(d._$z0-c._$z0)*h,f=g._$z0+(y._$z0-g._$z0)*h,L=m._$z0+(T._$z0-m._$z0)*h,M=P._$z0+(S._$z0-P._$z0)*h,e._$Yr._$z0=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u),p=c._$qT+(d._$qT-c._$qT)*h,f=g._$qT+(y._$qT-g._$qT)*h,L=m._$qT+(T._$qT-m._$qT)*h,M=P._$qT+(S._$qT-P._$qT)*h,e._$Yr._$qT=(1-v)*(p+(f-p)*u)+v*(L+(M-L)*u)}else if(4==o){var E=this._$Y0[n[0]],A=this._$Y0[n[1]],I=this._$Y0[n[2]],w=this._$Y0[n[3]],x=this._$Y0[n[4]],O=this._$Y0[n[5]],D=this._$Y0[n[6]],R=this._$Y0[n[7]],b=this._$Y0[n[8]],F=this._$Y0[n[9]],C=this._$Y0[n[10]],N=this._$Y0[n[11]],B=this._$Y0[n[12]],U=this._$Y0[n[13]],G=this._$Y0[n[14]],Y=this._$Y0[n[15]],h=s[0],u=s[1],v=s[2],k=s[3],p=E._$fL+(A._$fL-E._$fL)*h,f=I._$fL+(w._$fL-I._$fL)*h,L=x._$fL+(O._$fL-x._$fL)*h,M=D._$fL+(R._$fL-D._$fL)*h,V=b._$fL+(F._$fL-b._$fL)*h,X=C._$fL+(N._$fL-C._$fL)*h,H=B._$fL+(U._$fL-B._$fL)*h,W=G._$fL+(Y._$fL-G._$fL)*h;e._$Yr._$fL=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u)),p=E._$gL+(A._$gL-E._$gL)*h,f=I._$gL+(w._$gL-I._$gL)*h,L=x._$gL+(O._$gL-x._$gL)*h,M=D._$gL+(R._$gL-D._$gL)*h,V=b._$gL+(F._$gL-b._$gL)*h,X=C._$gL+(N._$gL-C._$gL)*h,H=B._$gL+(U._$gL-B._$gL)*h,W=G._$gL+(Y._$gL-G._$gL)*h,e._$Yr._$gL=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u)),p=E._$B0+(A._$B0-E._$B0)*h,f=I._$B0+(w._$B0-I._$B0)*h,L=x._$B0+(O._$B0-x._$B0)*h,M=D._$B0+(R._$B0-D._$B0)*h,V=b._$B0+(F._$B0-b._$B0)*h,X=C._$B0+(N._$B0-C._$B0)*h,H=B._$B0+(U._$B0-B._$B0)*h,W=G._$B0+(Y._$B0-G._$B0)*h,e._$Yr._$B0=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u)),p=E._$z0+(A._$z0-E._$z0)*h,f=I._$z0+(w._$z0-I._$z0)*h,L=x._$z0+(O._$z0-x._$z0)*h,M=D._$z0+(R._$z0-D._$z0)*h,V=b._$z0+(F._$z0-b._$z0)*h,X=C._$z0+(N._$z0-C._$z0)*h,H=B._$z0+(U._$z0-B._$z0)*h,W=G._$z0+(Y._$z0-G._$z0)*h,e._$Yr._$z0=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u)),p=E._$qT+(A._$qT-E._$qT)*h,f=I._$qT+(w._$qT-I._$qT)*h,L=x._$qT+(O._$qT-x._$qT)*h,M=D._$qT+(R._$qT-D._$qT)*h,V=b._$qT+(F._$qT-b._$qT)*h,X=C._$qT+(N._$qT-C._$qT)*h,H=B._$qT+(U._$qT-B._$qT)*h,W=G._$qT+(Y._$qT-G._$qT)*h,e._$Yr._$qT=(1-k)*((1-v)*(p+(f-p)*u)+v*(L+(M-L)*u))+k*((1-v)*(V+(X-V)*u)+v*(H+(W-H)*u))}else{for(var j=0|Math.pow(2,o),q=new Float32Array(j),J=0;J<j;J++){for(var Q=J,Z=1,K=0;K<o;K++)Z*=Q%2==0?1-s[K]:s[K],Q/=2;q[J]=Z}for(var tt=new Array,it=0;it<j;it++)tt[it]=this._$Y0[n[it]];for(var et=0,rt=0,ot=0,nt=0,st=0,it=0;it<j;it++)et+=q[it]*tt[it]._$fL,rt+=q[it]*tt[it]._$gL,ot+=q[it]*tt[it]._$B0,nt+=q[it]*tt[it]._$z0,st+=q[it]*tt[it]._$qT;e._$Yr._$fL=et,e._$Yr._$gL=rt,e._$Yr._$B0=ot,e._$Yr._$z0=nt,e._$Yr._$qT=st}var _=this._$Y0[n[0]];e._$Yr.reflectX=_.reflectX,e._$Yr.reflectY=_.reflectY}},z.prototype._$2b=function(t,i){this!=i._$GT()&&console.log("### assert!! ### ");var e=i;if(e._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(e._$8r==I._$ur&&(e._$8r=t.getBaseDataIndex(r)),e._$8r<0)at._$so&&_._$li("_$L _$0P _$G :: %s",r),e._$hS(!1);else{var o=t.getBaseData(e._$8r);if(null!=o){var n=t._$q2(e._$8r),s=z._$Xo;s[0]=e._$Yr._$fL,s[1]=e._$Yr._$gL;var a=z._$io;a[0]=0,a[1]=-.1;n._$GT().getType()==I._$c2?a[1]=-10:a[1]=-.1;var h=z._$0o;this._$Jr(t,o,n,s,a,h);var l=Lt._$92(a,h);o._$nb(t,n,s,s,1,0,2),e._$Wr._$fL=s[0],e._$Wr._$gL=s[1],e._$Wr._$B0=e._$Yr._$B0,e._$Wr._$z0=e._$Yr._$z0,e._$Wr._$qT=e._$Yr._$qT-l*Lt._$NS;var $=n.getTotalScale();e.setTotalScale_notForClient($*e._$Wr._$B0);var u=n.getTotalOpacity();e.setTotalOpacity(u*e.getInterpolatedOpacity()),e._$Wr.reflectX=e._$Yr.reflectX,e._$Wr.reflectY=e._$Yr.reflectY,e._$hS(n._$yo())}else e._$hS(!1)}}else e.setTotalScale_notForClient(e._$Yr._$B0),e.setTotalOpacity(e.getInterpolatedOpacity())},z.prototype._$nb=function(t,i,e,r,o,n,s){this!=i._$GT()&&console.log("### assert!! ### ");for(var _,a,h=i,l=null!=h._$Wr?h._$Wr:h._$Yr,$=Math.sin(Lt._$bS*l._$qT),u=Math.cos(Lt._$bS*l._$qT),p=h.getTotalScale(),f=l.reflectX?-1:1,c=l.reflectY?-1:1,d=u*p*f,g=-$*p*c,y=$*p*f,m=u*p*c,T=l._$fL,P=l._$gL,S=o*s,v=n;v<S;v+=s)_=e[v],a=e[v+1],r[v]=d*_+g*a+T,r[v+1]=y*_+m*a+P},z.prototype._$Jr=function(t,i,e,r,o,n){i!=e._$GT()&&console.log("### assert!! ### ");var s=z._$Lo;z._$Lo[0]=r[0],z._$Lo[1]=r[1],i._$nb(t,e,s,s,1,0,2);for(var _=z._$To,a=z._$Po,h=1,l=0;l<10;l++){if(a[0]=r[0]+h*o[0],a[1]=r[1]+h*o[1],i._$nb(t,e,a,_,1,0,2),_[0]-=s[0],_[1]-=s[1],0!=_[0]||0!=_[1])return n[0]=_[0],void(n[1]=_[1]);if(a[0]=r[0]-h*o[0],a[1]=r[1]-h*o[1],i._$nb(t,e,a,_,1,0,2),_[0]-=s[0],_[1]-=s[1],0!=_[0]||0!=_[1])return _[0]=-_[0],_[0]=-_[0],n[0]=_[0],void(n[1]=_[1]);h*=.1}at._$so&&console.log("_$L0 to transform _$SP\\n")},H.prototype=new _t,W.prototype=new M,W._$ur=-2,W._$ES=500,W._$wb=2,W._$8S=3,W._$os=4,W._$52=W._$ES,W._$R2=W._$ES,W._$Sb=function(t){for(var i=t.length-1;i>=0;--i){var e=t[i];e<W._$52?W._$52=e:e>W._$R2&&(W._$R2=e)}},W._$or=function(){return W._$52},W._$Pr=function(){return W._$R2},W.prototype._$F0=function(t){this._$gP=t._$nP(),this._$dr=t._$nP(),this._$GS=t._$nP(),this._$qb=t._$6L(),this._$Lb=t._$cS(),this._$mS=t._$Tb(),t.getFormatVersion()>=G._$T7?(this.clipID=t._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null,W._$Sb(this._$Lb)},W.prototype.getClipIDList=function(){return this.clipIDList},W.prototype._$Nr=function(t,i){if(i._$IS[0]=!1,i._$Us=v._$Z2(t,this._$GS,i._$IS,this._$Lb),at._$Zs);else if(i._$IS[0])return;i._$7s=v._$br(t,this._$GS,i._$IS,this._$mS)},W.prototype._$2b=function(t){},W.prototype.getDrawDataID=function(){return this._$gP},W.prototype._$j2=function(t){this._$gP=t},W.prototype.getOpacity=function(t,i){return i._$7s},W.prototype._$zS=function(t,i){return i._$Us},W.prototype.getTargetBaseDataID=function(){return this._$dr},W.prototype._$gs=function(t){this._$dr=t},W.prototype._$32=function(){return null!=this._$dr&&this._$dr!=yt._$2o()},W.prototype.getType=function(){},j._$42=0,j.prototype._$1b=function(){return this._$3S},j.prototype.getDrawDataList=function(){return this._$aS},j.prototype._$F0=function(t){this._$NL=t._$nP(),this._$aS=t._$nP(),this._$3S=t._$nP()},j.prototype._$kr=function(t){t._$Zo(this._$3S),t._$xo(this._$aS),this._$3S=null,this._$aS=null},q.prototype=new i,q.loadModel=function(t){var e=new q;return i._$62(e,t),e},q.loadModel=function(t){var e=new q;return i._$62(e,t),e},q._$to=function(){return new q},q._$er=function(t){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==i.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var e=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],r=q.loadModel(i._$3b()),o=0;o<e.length;o++){var n=new _$5(e[o]);if(0==n.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+n._$PL());r.setTexture(o,_$nL._$_o(t,n._$3b()))}return r},q.prototype.setGL=function(t){this._$zo.setGL(t)},q.prototype.setTransform=function(t){this._$zo.setTransform(t)},q.prototype.draw=function(){this._$5S.draw(this._$zo)},q.prototype._$K2=function(){this._$zo._$K2()},q.prototype.setTexture=function(t,i){null==this._$zo&&_._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(t,i)},q.prototype.setTexture=function(t,i){null==this._$zo&&_._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(t,i)},q.prototype._$Rs=function(){return this._$zo._$Rs()},q.prototype._$Ds=function(t){this._$zo._$Ds(t)},q.prototype.getDrawParam=function(){return this._$zo},J.prototype=new s,J._$cs="VISIBLE:",J._$ar="LAYOUT:",J.MTN_PREFIX_FADEIN="FADEIN:",J.MTN_PREFIX_FADEOUT="FADEOUT:",J._$Co=0,J._$1T=1,J.loadMotion=function(t){var i=k._$C(t);return J.loadMotion(i)},J.loadMotion=function(t){t instanceof ArrayBuffer&&(t=new DataView(t));var i=new J,e=[0],r=t.byteLength;i._$yT=0;for(var o=0;o<r;++o){var n=Q(t,o),s=n.charCodeAt(0);if("\\n"!=n&&"\\r"!=n)if("#"!=n)if("$"!=n){if(97<=s&&s<=122||65<=s&&s<=90||"_"==n){for(var _=o,a=-1;o<r&&("\\r"!=(n=Q(t,o))&&"\\n"!=n);++o)if("="==n){a=o;break}if(a>=0){var h=new B;O.startsWith(t,_,J._$cs)?(h._$RP=B._$hs,h._$4P=O.createString(t,_,a-_)):O.startsWith(t,_,J._$ar)?(h._$4P=O.createString(t,_+7,a-_-7),O.startsWith(t,_+7,"ANCHOR_X")?h._$RP=B._$xs:O.startsWith(t,_+7,"ANCHOR_Y")?h._$RP=B._$us:O.startsWith(t,_+7,"SCALE_X")?h._$RP=B._$qs:O.startsWith(t,_+7,"SCALE_Y")?h._$RP=B._$Ys:O.startsWith(t,_+7,"X")?h._$RP=B._$ws:O.startsWith(t,_+7,"Y")&&(h._$RP=B._$Ns)):(h._$RP=B._$Fr,h._$4P=O.createString(t,_,a-_)),i.motions.push(h);var l=0,$=[];for(o=a+1;o<r&&("\\r"!=(n=Q(t,o))&&"\\n"!=n);++o)if(","!=n&&" "!=n&&"\\t"!=n){var u=O._$LS(t,r,o,e);if(e[0]>0){$.push(u),l++;var p=e[0];if(p<o){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\\n");break}o=p-1}}h._$I0=new Float32Array($),l>i._$yT&&(i._$yT=l)}}}else{for(var _=o,a=-1;o<r&&("\\r"!=(n=Q(t,o))&&"\\n"!=n);++o)if("="==n){a=o;break}var f=!1;if(a>=0)for(a==_+4&&"f"==Q(t,_+1)&&"p"==Q(t,_+2)&&"s"==Q(t,_+3)&&(f=!0),o=a+1;o<r&&("\\r"!=(n=Q(t,o))&&"\\n"!=n);++o)if(","!=n&&" "!=n&&"\\t"!=n){var u=O._$LS(t,r,o,e);e[0]>0&&f&&5<u&&u<121&&(i._$D0=u),o=e[0]}for(;o<r&&("\\n"!=Q(t,o)&&"\\r"!=Q(t,o));++o);}else for(;o<r&&("\\n"!=Q(t,o)&&"\\r"!=Q(t,o));++o);}return i._$rr=1e3*i._$yT/i._$D0|0,i},J.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr},J.prototype.getLoopDurationMSec=function(){return this._$rr},J.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var e=0;e<i._$I0.length&&e<10;e++)console.log("%5.2f ,",i._$I0[e]);console.log("\\n")}},J.prototype.updateParamExe=function(t,i,e,r){for(var o=i-r._$z2,n=o*this._$D0/1e3,s=0|n,_=n-s,a=0;a<this.motions.length;a++){var h=this.motions[a],l=h._$I0.length,$=h._$4P;if(h._$RP==B._$hs){var u=h._$I0[s>=l?l-1:s];t.setParamFloat($,u)}else if(B._$ws<=h._$RP&&h._$RP<=B._$Ys);else{var p,f=t.getParamIndex($),c=t.getModelContext(),d=c.getParamMax(f),g=c.getParamMin(f),y=.4*(d-g),m=c.getParamFloat(f),T=h._$I0[s>=l?l-1:s],P=h._$I0[s+1>=l?l-1:s+1];p=T<P&&P-T>y||T>P&&T-P>y?T:T+(P-T)*_;var S=m+(p-m)*e;t.setParamFloat($,S)}}s>=this._$yT&&(this._$E?(r._$z2=i,this.loopFadeIn&&(r._$bs=i)):r._$9L=!0),this._$eP=e},J.prototype._$r0=function(){return this._$E},J.prototype._$aL=function(t){this._$E=t},J.prototype._$S0=function(){return this._$D0},J.prototype._$U0=function(t){this._$D0=t},J.prototype.isLoopFadeIn=function(){return this.loopFadeIn},J.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t},N.prototype.clear=function(){this.size=0},N.prototype.add=function(t){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);w._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=t},N.prototype._$BL=function(){var t=new Float32Array(this.size);return w._$jT(this._$P,0,t,0,this.size),t},B._$Fr=0,B._$hs=1,B._$ws=100,B._$Ns=101,B._$xs=102,B._$us=103,B._$qs=104,B._$Ys=105,Z.prototype=new I,Z._$gT=new Array,Z.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP()},Z.prototype._$F0=function(t){I.prototype._$F0.call(this,t),this._$A=t._$6L(),this._$o=t._$6L(),this._$GS=t._$nP(),this._$Eo=t._$nP(),I.prototype.readV2_opacity.call(this,t)},Z.prototype.init=function(t){var i=new K(this),e=(this._$o+1)*(this._$A+1);return null!=i._$Cr&&(i._$Cr=null),i._$Cr=new Float32Array(2*e),null!=i._$hr&&(i._$hr=null),this._$32()?i._$hr=new Float32Array(2*e):i._$hr=null,i},Z.prototype._$Nr=function(t,i){var e=i;if(this._$GS._$Ur(t)){var r=this._$VT(),o=Z._$gT;o[0]=!1,v._$Vr(t,this._$GS,o,r,this._$Eo,e._$Cr,0,2),i._$Ib(o[0]),this.interpolateOpacity(t,this._$GS,i,o)}},Z.prototype._$2b=function(t,i){var e=i;if(e._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(e._$8r==I._$ur&&(e._$8r=t.getBaseDataIndex(r)),e._$8r<0)at._$so&&_._$li("_$L _$0P _$G :: %s",r),e._$hS(!1);else{var o=t.getBaseData(e._$8r),n=t._$q2(e._$8r);if(null!=o&&n._$yo()){var s=n.getTotalScale();e.setTotalScale_notForClient(s);var a=n.getTotalOpacity();e.setTotalOpacity(a*e.getInterpolatedOpacity()),o._$nb(t,n,e._$Cr,e._$hr,this._$VT(),0,2),e._$hS(!0)}else e._$hS(!1)}}else e.setTotalOpacity(e.getInterpolatedOpacity())},Z.prototype._$nb=function(t,i,e,r,o,n,s){var _=i,a=null!=_._$hr?_._$hr:_._$Cr;Z.transformPoints_sdk2(e,r,o,n,s,a,this._$o,this._$A)},Z.transformPoints_sdk2=function(i,e,r,o,n,s,_,a){for(var h,l,$,u=r*n,p=0,f=0,c=0,d=0,g=0,y=0,m=!1,T=o;T<u;T+=n){var P,S,v,L;if(v=i[T],L=i[T+1],P=v*_,S=L*a,P<0||S<0||_<=P||a<=S){var M=_+1;if(!m){m=!0,p=.25*(s[2*(0+0*M)]+s[2*(_+0*M)]+s[2*(0+a*M)]+s[2*(_+a*M)]),f=.25*(s[2*(0+0*M)+1]+s[2*(_+0*M)+1]+s[2*(0+a*M)+1]+s[2*(_+a*M)+1]);var E=s[2*(_+a*M)]-s[2*(0+0*M)],A=s[2*(_+a*M)+1]-s[2*(0+0*M)+1],I=s[2*(_+0*M)]-s[2*(0+a*M)],w=s[2*(_+0*M)+1]-s[2*(0+a*M)+1];c=.5*(E+I),d=.5*(A+w),g=.5*(E-I),y=.5*(A-w),p-=.5*(c+g),f-=.5*(d+y)}if(-2<v&&v<3&&-2<L&&L<3)if(v<=0)if(L<=0){var x=s[2*(0+0*M)],O=s[2*(0+0*M)+1],D=p-2*c,R=f-2*d,b=p-2*g,F=f-2*y,C=p-2*c-2*g,N=f-2*d-2*y,B=.5*(v- -2),U=.5*(L- -2);B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(L>=1){var b=s[2*(0+a*M)],F=s[2*(0+a*M)+1],C=p-2*c+1*g,N=f-2*d+1*y,x=p+3*g,O=f+3*y,D=p-2*c+3*g,R=f-2*d+3*y,B=.5*(v- -2),U=.5*(L-1);B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else{var G=0|S;G==a&&(G=a-1);var B=.5*(v- -2),U=S-G,Y=G/a,k=(G+1)/a,b=s[2*(0+G*M)],F=s[2*(0+G*M)+1],x=s[2*(0+(G+1)*M)],O=s[2*(0+(G+1)*M)+1],C=p-2*c+Y*g,N=f-2*d+Y*y,D=p-2*c+k*g,R=f-2*d+k*y;B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(1<=v)if(L<=0){var D=s[2*(_+0*M)],R=s[2*(_+0*M)+1],x=p+3*c,O=f+3*d,C=p+1*c-2*g,N=f+1*d-2*y,b=p+3*c-2*g,F=f+3*d-2*y,B=.5*(v-1),U=.5*(L- -2);B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(L>=1){var C=s[2*(_+a*M)],N=s[2*(_+a*M)+1],b=p+3*c+1*g,F=f+3*d+1*y,D=p+1*c+3*g,R=f+1*d+3*y,x=p+3*c+3*g,O=f+3*d+3*y,B=.5*(v-1),U=.5*(L-1);B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else{var G=0|S;G==a&&(G=a-1);var B=.5*(v-1),U=S-G,Y=G/a,k=(G+1)/a,C=s[2*(_+G*M)],N=s[2*(_+G*M)+1],D=s[2*(_+(G+1)*M)],R=s[2*(_+(G+1)*M)+1],b=p+3*c+Y*g,F=f+3*d+Y*y,x=p+3*c+k*g,O=f+3*d+k*y;B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(L<=0){var V=0|P;V==_&&(V=_-1);var B=P-V,U=.5*(L- -2),X=V/_,z=(V+1)/_,D=s[2*(V+0*M)],R=s[2*(V+0*M)+1],x=s[2*(V+1+0*M)],O=s[2*(V+1+0*M)+1],C=p+X*c-2*g,N=f+X*d-2*y,b=p+z*c-2*g,F=f+z*d-2*y;B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else if(L>=1){var V=0|P;V==_&&(V=_-1);var B=P-V,U=.5*(L-1),X=V/_,z=(V+1)/_,C=s[2*(V+a*M)],N=s[2*(V+a*M)+1],b=s[2*(V+1+a*M)],F=s[2*(V+1+a*M)+1],D=p+X*c+3*g,R=f+X*d+3*y,x=p+z*c+3*g,O=f+z*d+3*y;B+U<=1?(e[T]=C+(b-C)*B+(D-C)*U,e[T+1]=N+(F-N)*B+(R-N)*U):(e[T]=x+(D-x)*(1-B)+(b-x)*(1-U),e[T+1]=O+(R-O)*(1-B)+(F-O)*(1-U))}else t.err.printf("_$li calc : %.4f , %.4f\\t\\t\\t\\t\\t@@BDBoxGrid\\n",v,L);else e[T]=p+v*c+L*g,e[T+1]=f+v*d+L*y}else l=P-(0|P),$=S-(0|S),h=2*((0|P)+(0|S)*(_+1)),l+$<1?(e[T]=s[h]*(1-l-$)+s[h+2]*l+s[h+2*(_+1)]*$,e[T+1]=s[h+1]*(1-l-$)+s[h+3]*l+s[h+2*(_+1)+1]*$):(e[T]=s[h+2*(_+1)+2]*(l-1+$)+s[h+2*(_+1)]*(1-l)+s[h+2]*(1-$),e[T+1]=s[h+2*(_+1)+3]*(l-1+$)+s[h+2*(_+1)+1]*(1-l)+s[h+3]*(1-$))}},Z.prototype.transformPoints_sdk1=function(t,i,e,r,o,n,s){for(var _,a,h,l,$,u,p,f=i,c=this._$o,d=this._$A,g=o*s,y=null!=f._$hr?f._$hr:f._$Cr,m=n;m<g;m+=s)at._$ts?(_=e[m],a=e[m+1],_<0?_=0:_>1&&(_=1),a<0?a=0:a>1&&(a=1),_*=c,a*=d,h=0|_,l=0|a,h>c-1&&(h=c-1),l>d-1&&(l=d-1),u=_-h,p=a-l,$=2*(h+l*(c+1))):(_=e[m]*c,a=e[m+1]*d,u=_-(0|_),p=a-(0|a),$=2*((0|_)+(0|a)*(c+1))),u+p<1?(r[m]=y[$]*(1-u-p)+y[$+2]*u+y[$+2*(c+1)]*p,r[m+1]=y[$+1]*(1-u-p)+y[$+3]*u+y[$+2*(c+1)+1]*p):(r[m]=y[$+2*(c+1)+2]*(u-1+p)+y[$+2*(c+1)]*(1-u)+y[$+2]*(1-p),r[m+1]=y[$+2*(c+1)+3]*(u-1+p)+y[$+2*(c+1)+1]*(1-u)+y[$+3]*(1-p))},Z.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)},Z.prototype.getType=function(){return I._$_b},K.prototype=new _t,tt._$42=0,tt.prototype._$zP=function(){this._$3S=new Array,this._$aS=new Array},tt.prototype._$F0=function(t){this._$g0=t._$8L(),this.visible=t._$8L(),this._$NL=t._$nP(),this._$3S=t._$nP(),this._$aS=t._$nP()},tt.prototype.init=function(t){var i=new it(this);return i.setPartsOpacity(this.isVisible()?1:0),i},tt.prototype._$6o=function(t){if(null==this._$3S)throw new Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(t)},tt.prototype._$3o=function(t){if(null==this._$aS)throw new Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(t)},tt.prototype._$Zo=function(t){this._$3S=t},tt.prototype._$xo=function(t){this._$aS=t},tt.prototype.isVisible=function(){return this.visible},tt.prototype._$uL=function(){return this._$g0},tt.prototype._$KP=function(t){this.visible=t},tt.prototype._$ET=function(t){this._$g0=t},tt.prototype.getBaseData=function(){return this._$3S},tt.prototype.getDrawData=function(){return this._$aS},tt.prototype._$p2=function(){return this._$NL},tt.prototype._$ob=function(t){this._$NL=t},tt.prototype.getPartsID=function(){return this._$NL},tt.prototype._$MP=function(t){this._$NL=t},it.prototype=new $,it.prototype.getPartsOpacity=function(){return this._$VS},it.prototype.setPartsOpacity=function(t){this._$VS=t},et._$L7=function(){u._$27(),yt._$27(),b._$27(),l._$27()},et.prototype.toString=function(){return this.id},rt.prototype._$F0=function(t){},ot.prototype._$1s=function(){return this._$4S},ot.prototype._$zP=function(){this._$4S=new Array},ot.prototype._$F0=function(t){this._$4S=t._$nP()},ot.prototype._$Ks=function(t){this._$4S.push(t)},nt.tr=new gt,nt._$50=new gt,nt._$Ti=new Array(0,0),nt._$Pi=new Array(0,0),nt._$B=new Array(0,0),nt.prototype._$lP=function(t,i,e,r){this.viewport=new Array(t,i,e,r)},nt.prototype._$bL=function(){this.context.save();var t=this.viewport;null!=t&&(this.context.beginPath(),this.context._$Li(t[0],t[1],t[2],t[3]),this.context.clip())},nt.prototype._$ei=function(){this.context.restore()},nt.prototype.drawElements=function(t,i,e,r,o,n,s,a){try{o!=this._$Qo&&(this._$Qo=o,this.context.globalAlpha=o);for(var h=i.length,l=t.width,$=t.height,u=this.context,p=this._$xP,f=this._$uP,c=this._$6r,d=this._$3r,g=nt.tr,y=nt._$Ti,m=nt._$Pi,T=nt._$B,P=0;P<h;P+=3){u.save();var S=i[P],v=i[P+1],L=i[P+2],M=p+c*e[2*S],E=f+d*e[2*S+1],A=p+c*e[2*v],I=f+d*e[2*v+1],w=p+c*e[2*L],x=f+d*e[2*L+1];s&&(s._$PS(M,E,T),M=T[0],E=T[1],s._$PS(A,I,T),A=T[0],I=T[1],s._$PS(w,x,T),w=T[0],x=T[1]);var O=l*r[2*S],D=$-$*r[2*S+1],R=l*r[2*v],b=$-$*r[2*v+1],F=l*r[2*L],C=$-$*r[2*L+1],N=Math.atan2(b-D,R-O),B=Math.atan2(I-E,A-M),U=A-M,G=I-E,Y=Math.sqrt(U*U+G*G),k=R-O,V=b-D,X=Math.sqrt(k*k+V*V),z=Y/X;It._$ni(F,C,O,D,R-O,b-D,-(b-D),R-O,y),It._$ni(w,x,M,E,A-M,I-E,-(I-E),A-M,m);var H=(m[0]-y[0])/y[1],W=Math.min(O,R,F),j=Math.max(O,R,F),q=Math.min(D,b,C),J=Math.max(D,b,C),Q=Math.floor(W),Z=Math.floor(q),K=Math.ceil(j),tt=Math.ceil(J);g.identity(),g.translate(M,E),g.rotate(B),g.scale(1,m[1]/y[1]),g.shear(H,0),g.scale(z,z),g.rotate(-N),g.translate(-O,-D),g.setContext(u);if(n||(n=1.2),at.IGNORE_EXPAND&&(n=0),at.USE_CACHED_POLYGON_IMAGE){var it=a._$e0;if(it.gl_cacheImage=it.gl_cacheImage||{},!it.gl_cacheImage[P]){var et=nt.createCanvas(K-Q,tt-Z);at.DEBUG_DATA.LDGL_CANVAS_MB=at.DEBUG_DATA.LDGL_CANVAS_MB||0,at.DEBUG_DATA.LDGL_CANVAS_MB+=(K-Q)*(tt-Z)*4;var rt=et.getContext("2d");rt.translate(-Q,-Z),nt.clip(rt,g,n,Y,O,D,R,b,F,C,M,E,A,I,w,x),rt.drawImage(t,0,0),it.gl_cacheImage[P]={cacheCanvas:et,cacheContext:rt}}u.drawImage(it.gl_cacheImage[P].cacheCanvas,Q,Z)}else at.IGNORE_CLIP||nt.clip(u,g,n,Y,O,D,R,b,F,C,M,E,A,I,w,x),at.USE_ADJUST_TRANSLATION&&(W=0,j=l,q=0,J=$),u.drawImage(t,W,q,j-W,J-q,W,q,j-W,J-q);u.restore()}}catch(t){_._$Rb(t)}},nt.clip=function(t,i,e,r,o,n,s,_,a,h,l,$,u,p,f,c){e>.02?nt.expandClip(t,i,e,r,l,$,u,p,f,c):nt.clipWithTransform(t,null,o,n,s,_,a,h)},nt.expandClip=function(t,i,e,r,o,n,s,_,a,h){var l=s-o,$=_-n,u=a-o,p=h-n,f=l*p-$*u>0?e:-e,c=-$,d=l,g=a-s,y=h-_,m=-y,T=g,P=Math.sqrt(g*g+y*y),S=-p,v=u,L=Math.sqrt(u*u+p*p),M=o-f*c/r,E=n-f*d/r,A=s-f*c/r,I=_-f*d/r,w=s-f*m/P,x=_-f*T/P,O=a-f*m/P,D=h-f*T/P,R=o+f*S/L,b=n+f*v/L,F=a+f*S/L,C=h+f*v/L,N=nt._$50;return null!=i._$P2(N)&&(nt.clipWithTransform(t,N,M,E,A,I,w,x,O,D,F,C,R,b),!0)},nt.clipWithTransform=function(t,i,e,r,o,n,s,a){if(arguments.length<7)return void _._$li("err : @LDGL.clip()");if(!(arguments[1]instanceof gt))return void _._$li("err : a[0] is _$6 LDTransform @LDGL.clip()");var h=nt._$B,l=i,$=arguments;if(t.beginPath(),l){l._$PS($[2],$[3],h),t.moveTo(h[0],h[1]);for(var u=4;u<$.length;u+=2)l._$PS($[u],$[u+1],h),t.lineTo(h[0],h[1])}else{t.moveTo($[2],$[3]);for(var u=4;u<$.length;u+=2)t.lineTo($[u],$[u+1])}t.clip()},nt.createCanvas=function(t,i){var e=document.createElement("canvas");return e.setAttribute("width",t),e.setAttribute("height",i),e||_._$li("err : "+e),e},nt.dumpValues=function(){for(var t="",i=0;i<arguments.length;i++)t+="["+i+"]= "+arguments[i].toFixed(3)+" , ";console.log(t)},st.prototype._$F0=function(t){this._$TT=t._$_T(),this._$LT=t._$_T(),this._$FS=t._$_T(),this._$wL=t._$nP()},st.prototype.getMinValue=function(){return this._$TT},st.prototype.getMaxValue=function(){return this._$LT},st.prototype.getDefaultValue=function(){return this._$FS},st.prototype.getParamID=function(){return this._$wL},_t.prototype._$yo=function(){return this._$AT&&!this._$JS},_t.prototype._$hS=function(t){this._$AT=t},_t.prototype._$GT=function(){return this._$e0},_t.prototype._$l2=function(t){this._$IP=t},_t.prototype.getPartsIndex=function(){return this._$IP},_t.prototype._$x2=function(){return this._$JS},_t.prototype._$Ib=function(t){this._$JS=t},_t.prototype.getTotalScale=function(){return this.totalScale},_t.prototype.setTotalScale_notForClient=function(t){this.totalScale=t},_t.prototype.getInterpolatedOpacity=function(){return this._$7s},_t.prototype.setInterpolatedOpacity=function(t){this._$7s=t},_t.prototype.getTotalOpacity=function(t){return this.totalOpacity},_t.prototype.setTotalOpacity=function(t){this.totalOpacity=t},at._$2s="2.1.00_1",at._$Kr=201001e3,at._$sP=!0,at._$so=!0,at._$cb=!1,at._$3T=!0,at._$Ts=!0,at._$fb=!0,at._$ts=!0,at.L2D_DEFORMER_EXTEND=!0,at._$Wb=!1;at._$yr=!1,at._$Zs=!1,at.L2D_NO_ERROR=0,at._$i7=1e3,at._$9s=1001,at._$es=1100,at._$r7=2e3,at._$07=2001,at._$b7=2002,at._$H7=4e3,at.L2D_COLOR_BLEND_MODE_MULT=0,at.L2D_COLOR_BLEND_MODE_ADD=1,at.L2D_COLOR_BLEND_MODE_INTERPOLATE=2,at._$6b=!0,at._$cT=0,at.clippingMaskBufferSize=256,at.glContext=new Array,at.frameBuffers=new Array,at.fTexture=new Array,at.IGNORE_CLIP=!1,at.IGNORE_EXPAND=!1,at.EXPAND_W=2,at.USE_ADJUST_TRANSLATION=!0,at.USE_CANVAS_TRANSFORM=!0,at.USE_CACHED_POLYGON_IMAGE=!1,at.DEBUG_DATA={},at.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},at.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},at.PROFILE_IOS_DEFAULT=at.PROFILE_IOS_QUALITY,at.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},at.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},at.initProfile=function(){Et.isIOS()?at.setupProfile(at.PROFILE_IOS_DEFAULT):Et.isAndroid()?at.setupProfile(at.PROFILE_ANDROID):at.setupProfile(at.PROFILE_DESKTOP)},at.setupProfile=function(t,i){if("number"==typeof t)switch(t){case 9901:t=at.PROFILE_IOS_SPEED;break;case 9902:t=at.PROFILE_IOS_QUALITY;break;case 9903:t=at.PROFILE_IOS_DEFAULT;break;case 9904:t=at.PROFILE_ANDROID;break;case 9905:t=at.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+t)}arguments.length<2&&(i=!0),i&&console.log("profile : "+t.PROFILE_NAME);for(var e in t)at[e]=t[e],i&&console.log("  ["+e+"] = "+t[e])},at.init=function(){if(at._$6b){console.log("Live2D %s",at._$2s),at._$6b=!1;!0,at.initProfile()}},at.getVersionStr=function(){return at._$2s},at.getVersionNo=function(){return at._$Kr},at._$sT=function(t){at._$cT=t},at.getError=function(){var t=at._$cT;return at._$cT=0,t},at.dispose=function(){at.glContext=[],at.frameBuffers=[],at.fTexture=[]},at.setGL=function(t,i){var e=i||0;at.glContext[e]=t},at.getGL=function(t){return at.glContext[t]},at.setClippingMaskBufferSize=function(t){at.clippingMaskBufferSize=t},at.getClippingMaskBufferSize=function(){return at.clippingMaskBufferSize},at.deleteBuffer=function(t){at.getGL(t).deleteFramebuffer(at.frameBuffers[t].framebuffer),delete at.frameBuffers[t],delete at.glContext[t]},ht._$r2=function(t){return t<0?0:t>1?1:.5-.5*Math.cos(t*Lt.PI_F)},lt._$fr=-1,lt.prototype.toString=function(){return this._$ib},$t.prototype=new W,$t._$42=0,$t._$Os=30,$t._$ms=0,$t._$ns=1,$t._$_s=2,$t._$gT=new Array,$t.prototype._$_S=function(t){this._$LP=t},$t.prototype.getTextureNo=function(){return this._$LP},$t.prototype._$ZL=function(){return this._$Qi},$t.prototype._$H2=function(){return this._$JP},$t.prototype.getNumPoints=function(){return this._$d0},$t.prototype.getType=function(){return W._$wb},$t.prototype._$B2=function(t,i,e){var r=i,o=null!=r._$hr?r._$hr:r._$Cr;switch(U._$do){default:case U._$Ms:throw new Error("_$L _$ro ");case U._$Qs:for(var n=this._$d0-1;n>=0;--n)o[n*U._$No+4]=e}},$t.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP()},$t.prototype._$F0=function(t){W.prototype._$F0.call(this,t),this._$LP=t._$6L(),this._$d0=t._$6L(),this._$Yo=t._$6L();var i=t._$nP();this._$BP=new Int16Array(3*this._$Yo);for(var e=3*this._$Yo-1;e>=0;--e)this._$BP[e]=i[e];if(this._$Eo=t._$nP(),this._$Qi=t._$nP(),t.getFormatVersion()>=G._$s7){if(this._$JP=t._$6L(),0!=this._$JP){if(0!=(1&this._$JP)){var r=t._$6L();null==this._$5P&&(this._$5P=new Object),this._$5P._$Hb=parseInt(r)}0!=(this._$JP&$t._$Os)?this._$6s=(this._$JP&$t._$Os)>>1:this._$6s=$t._$ms,0!=(32&this._$JP)&&(this.culling=!1)}}else this._$JP=0},$t.prototype.init=function(t){var i=new ut(this),e=this._$d0*U._$No,r=this._$32();switch(null!=i._$Cr&&(i._$Cr=null),i._$Cr=new Float32Array(e),null!=i._$hr&&(i._$hr=null),i._$hr=r?new Float32Array(e):null,U._$do){default:case U._$Ms:if(U._$Ls)for(var o=this._$d0-1;o>=0;--o){var n=o<<1;this._$Qi[n+1]=1-this._$Qi[n+1]}break;case U._$Qs:for(var o=this._$d0-1;o>=0;--o){var n=o<<1,s=o*U._$No,_=this._$Qi[n],a=this._$Qi[n+1];i._$Cr[s]=_,i._$Cr[s+1]=a,i._$Cr[s+4]=0,r&&(i._$hr[s]=_,i._$hr[s+1]=a,i._$hr[s+4]=0)}}return i},$t.prototype._$Nr=function(t,i){var e=i;if(this!=e._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(t)&&(W.prototype._$Nr.call(this,t,e),!e._$IS[0])){var r=$t._$gT;r[0]=!1,v._$Vr(t,this._$GS,r,this._$d0,this._$Eo,e._$Cr,U._$i2,U._$No)}},$t.prototype._$2b=function(t,i){try{this!=i._$GT()&&console.log("### assert!! ### ");var e=!1;i._$IS[0]&&(e=!0);var r=i;if(!e&&(W.prototype._$2b.call(this,t),this._$32())){var o=this.getTargetBaseDataID();if(r._$8r==W._$ur&&(r._$8r=t.getBaseDataIndex(o)),r._$8r<0)at._$so&&_._$li("_$L _$0P _$G :: %s",o);else{var n=t.getBaseData(r._$8r),s=t._$q2(r._$8r);null==n||s._$x2()?r._$AT=!1:(n._$nb(t,s,r._$Cr,r._$hr,this._$d0,U._$i2,U._$No),r._$AT=!0),r.baseOpacity=s.getTotalOpacity()}}}catch(t){throw t}},$t.prototype.draw=function(t,i,e){if(this!=e._$GT()&&console.log("### assert!! ### "),!e._$IS[0]){var r=e,o=this._$LP;o<0&&(o=1);var n=this.getOpacity(i,r)*e._$VS*e.baseOpacity,s=null!=r._$hr?r._$hr:r._$Cr;t.setClipBufPre_clipContextForDraw(e.clipBufPre_clipContext),t._$WP(this.culling),t._$Uo(o,3*this._$Yo,this._$BP,s,this._$Qi,n,this._$6s,r)}},$t.prototype.dump=function(){console.log("  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) \\n",this._$LP,this._$d0,this._$Yo),console.log("  _$Oi _$di = { ");for(var t=0;t<this._$BP.length;t++)console.log("%5d ,",this._$BP[t]);console.log("\\n  _$5i _$30");for(var t=0;t<this._$Eo.length;t++){console.log("\\n    _$30[%d] = ",t);for(var i=this._$Eo[t],e=0;e<i.length;e++)console.log("%6.2f, ",i[e])}console.log("\\n")},$t.prototype._$72=function(t){return null==this._$5P?null:this._$5P[t]},$t.prototype.getIndexArray=function(){return this._$BP},ut.prototype=new Mt,ut.prototype.getTransformedPoints=function(){return null!=this._$hr?this._$hr:this._$Cr},pt.prototype._$HT=function(t){this.x=t.x,this.y=t.y},pt.prototype._$HT=function(t,i){this.x=t,this.y=i},ft.prototype=new i,ft.loadModel=function(t){var e=new ft;return i._$62(e,t),e},ft.loadModel=function(t,e){var r=e||0,o=new ft(r);return i._$62(o,t),o},ft._$to=function(){return new ft},ft._$er=function(t){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==i.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var e=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],r=ft.loadModel(i._$3b()),o=0;o<e.length;o++){var n=new _$5(e[o]);if(0==n.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+n._$PL());r.setTexture(o,_$nL._$_o(t,n._$3b()))}return r},ft.prototype.setGL=function(t){at.setGL(t)},ft.prototype.setTransform=function(t){this.drawParamWebGL.setTransform(t)},ft.prototype.update=function(){this._$5S.update(),this._$5S.preDraw(this.drawParamWebGL)},ft.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)},ft.prototype._$K2=function(){this.drawParamWebGL._$K2()},ft.prototype.setTexture=function(t,i){null==this.drawParamWebGL&&_._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(t,i)},ft.prototype.setTexture=function(t,i){null==this.drawParamWebGL&&_._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(t,i)},ft.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()},ft.prototype._$Ds=function(t){this.drawParamWebGL._$Ds(t)},ft.prototype.getDrawParam=function(){return this.drawParamWebGL},ft.prototype.setMatrix=function(t){this.drawParamWebGL.setMatrix(t)},ft.prototype.setPremultipliedAlpha=function(t){this.drawParamWebGL.setPremultipliedAlpha(t)},ft.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()},ft.prototype.setAnisotropy=function(t){this.drawParamWebGL.setAnisotropy(t)},ft.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()},ct.prototype._$tb=function(){return this.motions},ct.prototype.startMotion=function(t,i){for(var e=null,r=this.motions.length,o=0;o<r;++o)null!=(e=this.motions[o])&&(e._$qS(e._$w0.getFadeOut()),this._$eb&&_._$Ji("MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)\\n",r,e._$sr));if(null==t)return-1;e=new dt,e._$w0=t,this.motions.push(e);var n=e._$sr;return this._$eb&&_._$Ji("MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)\\n",r,n),n},ct.prototype.updateParam=function(t){try{for(var i=!1,e=0;e<this.motions.length;e++){var r=this.motions[e];if(null!=r){var o=r._$w0;null!=o?(o.updateParam(t,r),i=!0,r.isFinished()&&(this._$eb&&_._$Ji("MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)\\n",this.motions.length-1,r._$sr),this.motions.splice(e,1),e--)):(this.motions=this.motions.splice(e,1),e--)}else this.motions.splice(e,1),e--}return i}catch(t){return _._$li(t),!0}},ct.prototype.isFinished=function(t){if(arguments.length>=1){for(var i=0;i<this.motions.length;i++){var e=this.motions[i];if(null!=e&&(e._$sr==t&&!e.isFinished()))return!1}return!0}for(var i=0;i<this.motions.length;i++){var e=this.motions[i];if(null!=e){if(null!=e._$w0){if(!e.isFinished())return!1}else this.motions.splice(i,1),i--}else this.motions.splice(i,1),i--}return!0},ct.prototype.stopAllMotions=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];if(null!=i){i._$w0;this.motions.splice(t,1),t--}else this.motions.splice(t,1),t--}},ct.prototype._$Zr=function(t){this._$eb=t},ct.prototype._$e=function(){console.log("-- _$R --\\n");for(var t=0;t<this.motions.length;t++){var i=this.motions[t],e=i._$w0;console.log("MotionQueueEnt[%d] :: %s\\n",this.motions.length,e.toString())}},dt._$Gs=0,dt.prototype.isFinished=function(){return this._$9L},dt.prototype._$qS=function(t){var i=w.getUserTimeMSec(),e=i+t;(this._$Do<0||e<this._$Do)&&(this._$Do=e)},dt.prototype._$Bs=function(){return this._$sr},gt.prototype.setContext=function(t){var i=this.m;t.transform(i[0],i[1],i[3],i[4],i[6],i[7])},gt.prototype.toString=function(){for(var t="LDTransform { ",i=0;i<9;i++)t+=this.m[i].toFixed(2)+" ,";return t+=" }"},gt.prototype.identity=function(){var t=this.m;t[0]=t[4]=t[8]=1,t[1]=t[2]=t[3]=t[5]=t[6]=t[7]=0},gt.prototype._$PS=function(t,i,e){null==e&&(e=new Array(0,0));var r=this.m;return e[0]=r[0]*t+r[3]*i+r[6],e[1]=r[1]*t+r[4]*i+r[7],e},gt.prototype._$P2=function(t){t||(t=new gt);var i=this.m,e=i[0],r=i[1],o=i[2],n=i[3],s=i[4],_=i[5],a=i[6],h=i[7],l=i[8],$=e*s*l+r*_*a+o*n*h-e*_*h-o*s*a-r*n*l;if(0==$)return null;var u=1/$;return t.m[0]=u*(s*l-h*_),t.m[1]=u*(h*o-r*l),t.m[2]=u*(r*_-s*o),t.m[3]=u*(a*_-n*l),t.m[4]=u*(e*l-a*o),t.m[5]=u*(n*o-e*_),t.m[6]=u*(n*h-a*s),t.m[7]=u*(a*r-e*h),t.m[8]=u*(e*s-n*r),t},gt.prototype.transform=function(t,i,e){null==e&&(e=new Array(0,0));var r=this.m;return e[0]=r[0]*t+r[3]*i+r[6],e[1]=r[1]*t+r[4]*i+r[7],e},gt.prototype.translate=function(t,i){var e=this.m;e[6]=e[0]*t+e[3]*i+e[6],e[7]=e[1]*t+e[4]*i+e[7],e[8]=e[2]*t+e[5]*i+e[8]},gt.prototype.scale=function(t,i){var e=this.m;e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=i,e[4]*=i,e[5]*=i},gt.prototype.shear=function(t,i){var e=this.m,r=e[0]+e[3]*i,o=e[1]+e[4]*i,n=e[2]+e[5]*i;e[3]=e[0]*t+e[3],e[4]=e[1]*t+e[4],e[5]=e[2]*t+e[5],e[0]=r,e[1]=o,e[2]=n},gt.prototype.rotate=function(t){var i=this.m,e=Math.cos(t),r=Math.sin(t),o=i[0]*e+i[3]*r,n=i[1]*e+i[4]*r,s=i[2]*e+i[5]*r;i[3]=-i[0]*r+i[3]*e,i[4]=-i[1]*r+i[4]*e,i[5]=-i[2]*r+i[5]*e,i[0]=o,i[1]=n,i[2]=s},gt.prototype.concatenate=function(t){var i=this.m,e=t.m,r=i[0]*e[0]+i[3]*e[1]+i[6]*e[2],o=i[1]*e[0]+i[4]*e[1]+i[7]*e[2],n=i[2]*e[0]+i[5]*e[1]+i[8]*e[2],s=i[0]*e[3]+i[3]*e[4]+i[6]*e[5],_=i[1]*e[3]+i[4]*e[4]+i[7]*e[5],a=i[2]*e[3]+i[5]*e[4]+i[8]*e[5],h=i[0]*e[6]+i[3]*e[7]+i[6]*e[8],l=i[1]*e[6]+i[4]*e[7]+i[7]*e[8],$=i[2]*e[6]+i[5]*e[7]+i[8]*e[8];m[0]=r,m[1]=o,m[2]=n,m[3]=s,m[4]=_,m[5]=a,m[6]=h,m[7]=l,m[8]=$},yt.prototype=new et,yt._$eT=null,yt._$tP=new Object,yt._$2o=function(){return null==yt._$eT&&(yt._$eT=yt.getID("DST_BASE")),yt._$eT},yt._$27=function(){yt._$tP.clear(),yt._$eT=null},yt.getID=function(t){var i=yt._$tP[t];return null==i&&(i=new yt(t),yt._$tP[t]=i),i},yt.prototype._$3s=function(){return new yt},mt.prototype=new E,mt._$9r=function(t){return new Float32Array(t)},mt._$vb=function(t){return new Int16Array(t)},mt._$cr=function(t,i){return null==t||t._$yL()<i.length?(t=mt._$9r(2*i.length),t.put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},mt._$mb=function(t,i){return null==t||t._$yL()<i.length?(t=mt._$vb(2*i.length),t.put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},mt._$Hs=function(){return this._$Gr},mt._$as=function(t){this._$Gr=t},mt.prototype.getGL=function(){return this.gl},mt.prototype.setGL=function(t){this.gl=t},mt.prototype.setTransform=function(t){this.transform=t},mt.prototype._$ZT=function(){var t=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=t.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.DEPTH_TEST),t.frontFace(t.CW),t.enable(t.BLEND),t.colorMask(1,1,1,1),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)},mt.prototype._$Uo=function(t,i,e,r,o,n,s,_){if(!(n<.01&&null==this.clipBufPre_clipContextMask)){var a=(n>.9&&at.EXPAND_W,this.gl);if(null==this.gl)throw new Error("gl is null");var h=1*this._$C0*n,l=1*this._$tT*n,$=1*this._$WL*n,u=this._$lT*n;if(null!=this.clipBufPre_clipContextMask){a.frontFace(a.CCW),a.useProgram(this.shaderProgram),this._$vS=Tt(a,this._$vS,r),this._$no=Pt(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0),this._$NT=Tt(a,this._$NT,o),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc,1),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask);var p=this.getClipBufPre_clipContextMask().layoutChannelNo,f=this.getChannelFlagAsColor(p);a.uniform4f(this.u_channelFlag,f.r,f.g,f.b,f.a);var c=this.getClipBufPre_clipContextMask().layoutBounds;a.uniform4f(this.u_baseColor_Loc,2*c.x-1,2*c.y-1,2*c._$EL()-1,2*c._$5T()-1),a.uniform1i(this.u_maskFlag_Loc,!0)}else if(null!=this.getClipBufPre_clipContextDraw()){a.useProgram(this.shaderProgramOff),this._$vS=Tt(a,this._$vS,r),this._$no=Pt(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc_Off),a.vertexAttribPointer(this.a_position_Loc_Off,2,a.FLOAT,!1,0,0),this._$NT=Tt(a,this._$NT,o),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc_Off,1),a.enableVertexAttribArray(this.a_texCoord_Loc_Off),a.vertexAttribPointer(this.a_texCoord_Loc_Off,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),a.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,at.fTexture[this.glno]),a.uniform1i(this.s_texture1_Loc_Off,2);var p=this.getClipBufPre_clipContextDraw().layoutChannelNo,f=this.getChannelFlagAsColor(p);a.uniform4f(this.u_channelFlag_Loc_Off,f.r,f.g,f.b,f.a),a.uniform4f(this.u_baseColor_Loc_Off,h,l,$,u)}else a.useProgram(this.shaderProgram),this._$vS=Tt(a,this._$vS,r),this._$no=Pt(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0),this._$NT=Tt(a,this._$NT,o),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc,1),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),a.uniform4f(this.u_baseColor_Loc,h,l,$,u),a.uniform1i(this.u_maskFlag_Loc,!1);this.culling?this.gl.enable(a.CULL_FACE):this.gl.disable(a.CULL_FACE),this.gl.enable(a.BLEND);var d,g,y,m;if(null!=this.clipBufPre_clipContextMask)d=a.ONE,g=a.ONE_MINUS_SRC_ALPHA,y=a.ONE,m=a.ONE_MINUS_SRC_ALPHA;else switch(s){case $t._$ms:d=a.ONE,g=a.ONE_MINUS_SRC_ALPHA,y=a.ONE,m=a.ONE_MINUS_SRC_ALPHA;break;case $t._$ns:d=a.ONE,g=a.ONE,y=a.ZERO,m=a.ONE;break;case $t._$_s:d=a.DST_COLOR,g=a.ONE_MINUS_SRC_ALPHA,y=a.ZERO,m=a.ONE}a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(d,g,y,m),this.anisotropyExt&&a.texParameteri(a.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);var T=e.length;a.drawElements(a.TRIANGLES,T,a.UNSIGNED_SHORT,0),a.bindTexture(a.TEXTURE_2D,null)}},mt.prototype._$Rs=function(){throw new Error("_$Rs")},mt.prototype._$Ds=function(t){throw new Error("_$Ds")},mt.prototype._$K2=function(){for(var t=0;t<this.textures.length;t++){0!=this.textures[t]&&(this.gl._$K2(1,this.textures,t),this.textures[t]=null)}},mt.prototype.setTexture=function(t,i){this.textures[t]=i},mt.prototype.initShader=function(){var t=this.gl;this.loadShaders2(),this.a_position_Loc=t.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=t.getAttribLocation(this.shaderProgram,"a_texCoord"),this.u_matrix_Loc=t.getUniformLocation(this.shaderProgram,"u_mvpMatrix"),this.s_texture0_Loc=t.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_channelFlag=t.getUniformLocation(this.shaderProgram,"u_channelFlag"),this.u_baseColor_Loc=t.getUniformLocation(this.shaderProgram,"u_baseColor"),this.u_maskFlag_Loc=t.getUniformLocation(this.shaderProgram,"u_maskFlag"),this.a_position_Loc_Off=t.getAttribLocation(this.shaderProgramOff,"a_position"),this.a_texCoord_Loc_Off=t.getAttribLocation(this.shaderProgramOff,"a_texCoord"),this.u_matrix_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix"),this.u_clipMatrix_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix"),this.s_texture0_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"s_texture0"),this.s_texture1_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"s_texture1"),this.u_channelFlag_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_channelFlag"),this.u_baseColor_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_baseColor")},mt.prototype.disposeShader=function(){var t=this.gl;this.shaderProgram&&(t.deleteProgram(this.shaderProgram),this.shaderProgram=null),this.shaderProgramOff&&(t.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)},mt.prototype.compileShader=function(t,i){var e=this.gl,r=i,o=e.createShader(t);if(null==o)return _._$Ji("_$L0 to create shader"),null;if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(o);return _._$Ji("_$L0 to compile shader : "+n),e.deleteShader(o),null}return o},mt.prototype.loadShaders2=function(){var t=this.gl;if(this.shaderProgram=t.createProgram(),!this.shaderProgram)return!1;if(this.shaderProgramOff=t.createProgram(),!this.shaderProgramOff)return!1;if(this.vertShader=this.compileShader(t.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}"),!this.vertShader)return _._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(t.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}"),!this.vertShaderOff)return _._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(t.FRAGMENT_SHADER,"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}"),!this.fragShader)return _._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(t.FRAGMENT_SHADER,"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}"),!this.fragShaderOff)return _._$Ji("OffFragment shader compile _$li!"),!1;if(t.attachShader(this.shaderProgram,this.vertShader),t.attachShader(this.shaderProgram,this.fragShader),t.attachShader(this.shaderProgramOff,this.vertShaderOff),t.attachShader(this.shaderProgramOff,this.fragShaderOff),t.linkProgram(this.shaderProgram),t.linkProgram(this.shaderProgramOff),!t.getProgramParameter(this.shaderProgram,t.LINK_STATUS)){var i=t.getProgramInfoLog(this.shaderProgram);return _._$Ji("_$L0 to link program: "+i),this.vertShader&&(t.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(t.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(t.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(t.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(t.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(t.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0},mt.prototype.createFramebuffer=function(){var t=this.gl,i=at.clippingMaskBufferSize,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,r);var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),at.fTexture[this.glno]=o,{framebuffer:e,renderbuffer:r,texture:at.fTexture[this.glno]}},St.prototype._$fP=function(){var t,i,e,r=this._$ST();if(0==(128&r))return 255&r;if(0==(128&(t=this._$ST())))return(127&r)<<7|127&t;if(0==(128&(i=this._$ST())))return(127&r)<<14|(127&t)<<7|255&i;if(0==(128&(e=this._$ST())))return(127&r)<<21|(127&t)<<14|(127&i)<<7|255&e;throw new lt("_$L _$0P  _")},St.prototype.getFormatVersion=function(){return this._$S2},St.prototype._$gr=function(t){this._$S2=t},St.prototype._$3L=function(){return this._$fP()},St.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)},St.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)},St.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)},St.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)},St.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)},St.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new lt("_$L _$q read long")},St.prototype._$po=function(){return this._$zT(),0!=this._$T.getInt8(this._$F++)};var xt=!0;St.prototype._$bT=function(){this._$zT();var t=this._$3L(),i=null;if(xt)try{var e=new ArrayBuffer(2*t);i=new Uint16Array(e);for(var r=0;r<t;++r)i[r]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,i)}catch(t){xt=!1}try{var o=new Array;if(null==i)for(var r=0;r<t;++r)o[r]=this._$T.getUint8(this._$F++);else for(var r=0;r<t;++r)o[r]=i[r];return String.fromCharCode.apply(null,o)}catch(t){console.log("read utf8 / _$rT _$L0 !! : "+t)}},St.prototype._$cS=function(){this._$zT();for(var t=this._$3L(),i=new Int32Array(t),e=0;e<t;e++)i[e]=this._$T.getInt32(this._$F),this._$F+=4;return i},St.prototype._$Tb=function(){this._$zT();for(var t=this._$3L(),i=new Float32Array(t),e=0;e<t;e++)i[e]=this._$T.getFloat32(this._$F),this._$F+=4;return i},St.prototype._$5b=function(){this._$zT();for(var t=this._$3L(),i=new Float64Array(t),e=0;e<t;e++)i[e]=this._$T.getFloat64(this._$F),this._$F+=8;return i},St.prototype._$nP=function(){return this._$Jb(-1)},St.prototype._$Jb=function(t){if(this._$zT(),t<0&&(t=this._$3L()),t==G._$7P){var i=this._$6L();if(0<=i&&i<this._$Ko.length)return this._$Ko[i];throw new lt("_$sL _$4i @_$m0")}var e=this._$4b(t);return this._$Ko.push(e),e},St.prototype._$4b=function(t){if(0==t)return null;if(50==t){var i=this._$bT(),e=b.getID(i);return e}if(51==t){var i=this._$bT(),e=yt.getID(i);return e}if(134==t){var i=this._$bT(),e=l.getID(i);return e}if(60==t){var i=this._$bT(),e=u.getID(i);return e}if(t>=48){var r=G._$9o(t);return null!=r?(r._$F0(this),r):null}switch(t){case 1:return this._$bT();case 10:return new n(this._$6L(),!0);case 11:return new S(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new S(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new L(this._$mP(),this._$mP());case 14:return new L(this._$_T(),this._$_T());case 15:for(var o=this._$3L(),e=new Array(o),s=0;s<o;s++)e[s]=this._$nP();return e;case 17:var e=new F(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());return e;case 21:return new h(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new pt(this._$6L(),this._$6L());case 23:throw new Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new lt("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+t);default:throw new lt("_$6 _$q : _$nP() NO _$i : "+t)}},St.prototype._$8L=function(){return 0==this._$hL?this._$v0=this._$ST():8==this._$hL&&(this._$v0=this._$ST(),this._$hL=0),1==(this._$v0>>7-this._$hL++&1)},St.prototype._$zT=function(){0!=this._$hL&&(this._$hL=0)},vt.prototype._$wP=function(t,i,e){for(var r=0;r<e;r++){for(var o=0;o<i;o++){var n=2*(o+r*i);console.log("(% 7.3f , % 7.3f) , ",t[n],t[n+1])}console.log("\\n")}console.log("\\n")},Lt._$2S=Math.PI/180,Lt._$bS=Math.PI/180,Lt._$wS=180/Math.PI,Lt._$NS=180/Math.PI,Lt.PI_F=Math.PI,Lt._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],Lt._$92=function(t,i){var e=Math.atan2(t[1],t[0]),r=Math.atan2(i[1],i[0]);return Lt._$tS(e,r)},Lt._$tS=function(t,i){for(var e=t-i;e<-Math.PI;)e+=2*Math.PI;for(;e>Math.PI;)e-=2*Math.PI;return e},Lt._$9=function(t){return Math.sin(t)},Lt.fcos=function(t){return Math.cos(t)},Mt.prototype._$u2=function(){return this._$IS[0]},Mt.prototype._$yo=function(){return this._$AT&&!this._$IS[0]},Mt.prototype._$GT=function(){return this._$e0},Et._$W2=0,Et.SYSTEM_INFO=null,Et.USER_AGENT=navigator.userAgent,Et.isIPhone=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO._isIPhone},Et.isIOS=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO._isIPhone||Et.SYSTEM_INFO._isIPad},Et.isAndroid=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO._isAndroid},Et.getOSVersion=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO.version},Et.getOS=function(){return Et.SYSTEM_INFO||Et.setup(),Et.SYSTEM_INFO._isIPhone||Et.SYSTEM_INFO._isIPad?"iOS":Et.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"},Et.setup=function(){function t(t,i){for(var e=t.substring(i).split(/[ _,;\\.]/),r=0,o=0;o<=2&&!isNaN(e[o]);o++){var n=parseInt(e[o]);if(n<0||n>999){_._$li("err : "+n+" @UtHtml5.setup()"),r=0;break}r+=n*Math.pow(1e3,2-o)}return r}var i,e=Et.USER_AGENT,r=Et.SYSTEM_INFO={userAgent:e};if((i=e.indexOf("iPhone OS "))>=0)r.os="iPhone",r._isIPhone=!0,r.version=t(e,i+"iPhone OS ".length);else if((i=e.indexOf("iPad"))>=0){if((i=e.indexOf("CPU OS"))<0)return void _._$li(" err : "+e+" @UtHtml5.setup()");r.os="iPad",r._isIPad=!0,r.version=t(e,i+"CPU OS ".length)}else(i=e.indexOf("Android"))>=0?(r.os="Android",r._isAndroid=!0,r.version=t(e,i+"Android ".length)):(r.os="-",r.version=-1)},window.UtSystem=w,window.UtDebug=_,window.LDTransform=gt,window.LDGL=nt,window.Live2D=at,window.Live2DModelWebGL=ft,window.Live2DModelJS=q,window.Live2DMotion=J,window.MotionQueueManager=ct,window.PhysicsHair=f,window.AMotion=s,window.PartsDataID=l,window.DrawDataID=b,window.BaseDataID=yt,window.ParamID=u,at.init();var At=!1}()}).call(i,e(7))},function(t,i){t.exports={import:function(){throw new Error("System.import cannot be used indirectly")}}},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){this.models=[],this.count=-1,this.reloadFlg=!1,Live2D.init(),n.Live2DFramework.setPlatformManager(new _.default)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var n=e(0),s=e(9),_=r(s),a=e(10),h=r(a),l=e(1),$=r(l);o.prototype.createModel=function(){var t=new h.default;return this.models.push(t),t},o.prototype.changeModel=function(t,i){if(this.reloadFlg){this.reloadFlg=!1;this.releaseModel(0,t),this.createModel(),this.models[0].load(t,i)}},o.prototype.getModel=function(t){return t>=this.models.length?null:this.models[t]},o.prototype.releaseModel=function(t,i){this.models.length<=t||(this.models[t].release(i),delete this.models[t],this.models.splice(t,1))},o.prototype.numModels=function(){return this.models.length},o.prototype.setDrag=function(t,i){for(var e=0;e<this.models.length;e++)this.models[e].setDrag(t,i)},o.prototype.maxScaleEvent=function(){$.default.DEBUG_LOG&&console.log("Max scale event.");for(var t=0;t<this.models.length;t++)this.models[t].startRandomMotion($.default.MOTION_GROUP_PINCH_IN,$.default.PRIORITY_NORMAL)},o.prototype.minScaleEvent=function(){$.default.DEBUG_LOG&&console.log("Min scale event.");for(var t=0;t<this.models.length;t++)this.models[t].startRandomMotion($.default.MOTION_GROUP_PINCH_OUT,$.default.PRIORITY_NORMAL)},o.prototype.tapEvent=function(t,i){$.default.DEBUG_LOG&&console.log("tapEvent view x:"+t+" y:"+i);for(var e=0;e<this.models.length;e++)this.models[e].hitTest($.default.HIT_AREA_HEAD,t,i)?($.default.DEBUG_LOG&&console.log("Tap face."),this.models[e].setRandomExpression()):this.models[e].hitTest($.default.HIT_AREA_BODY,t,i)?($.default.DEBUG_LOG&&console.log("Tap body. models["+e+"]"),this.models[e].startRandomMotion($.default.MOTION_GROUP_TAP_BODY,$.default.PRIORITY_NORMAL)):this.models[e].hitTestCustom("head",t,i)?($.default.DEBUG_LOG&&console.log("Tap face."),this.models[e].startRandomMotion($.default.MOTION_GROUP_FLICK_HEAD,$.default.PRIORITY_NORMAL)):this.models[e].hitTestCustom("body",t,i)&&($.default.DEBUG_LOG&&console.log("Tap body. models["+e+"]"),this.models[e].startRandomMotion($.default.MOTION_GROUP_TAP_BODY,$.default.PRIORITY_NORMAL));return!0}},function(t,i,e){"use strict";function r(){}Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;var o=e(2);r.prototype.loadBytes=function(t,i){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){switch(e.status){case 200:i(e.response);break;default:console.error("Failed to load ("+e.status+") : "+t)}},e.send(null)},r.prototype.loadString=function(t){this.loadBytes(t,function(t){return t})},r.prototype.loadLive2DModel=function(t,i){var e=null;this.loadBytes(t,function(t){e=Live2DModelWebGL.loadModel(t),i(e)})},r.prototype.loadTexture=function(t,i,e,r){var n=new Image;n.crossOrigin="Anonymous",n.src=e;n.onload=function(){var e=(0,o.getContext)(),s=e.createTexture();if(!s)return console.error("Failed to generate gl texture name."),-1;0==t.isPremultipliedAlpha()&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D),t.setTexture(i,s),s=null,"function"==typeof r&&r()},n.onerror=function(){console.error("Failed to load image : "+e)}},r.prototype.jsonParseFromBytes=function(t){var i,e=new Uint8Array(t,0,3);return i=239==e[0]&&187==e[1]&&191==e[2]?String.fromCharCode.apply(null,new Uint8Array(t,3)):String.fromCharCode.apply(null,new Uint8Array(t)),JSON.parse(i)},r.prototype.log=function(t){}},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){n.L2DBaseModel.prototype.constructor.call(this),this.modelHomeDir="",this.modelSetting=null,this.tmpMatrix=[]}Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var n=e(0),s=e(11),_=r(s),a=e(1),h=r(a),l=e(3),$=r(l);o.prototype=new n.L2DBaseModel,o.prototype.load=function(t,i,e){this.setUpdating(!0),this.setInitialized(!1),this.modelHomeDir=i.substring(0,i.lastIndexOf("/")+1),this.modelSetting=new _.default;var r=this;this.modelSetting.loadModelSetting(i,function(){var t=r.modelHomeDir+r.modelSetting.getModelFile();r.loadModelData(t,function(t){for(var i=0;i<r.modelSetting.getTextureNum();i++){if(/^https?:\\/\\/|^\\/\\//i.test(r.modelSetting.getTextureFile(i)))var o=r.modelSetting.getTextureFile(i);else var o=r.modelHomeDir+r.modelSetting.getTextureFile(i);r.loadTexture(i,o,function(){if(r.isTexLoaded){if(r.modelSetting.getExpressionNum()>0){r.expressions={};for(var t=0;t<r.modelSetting.getExpressionNum();t++){var i=r.modelSetting.getExpressionName(t),o=r.modelHomeDir+r.modelSetting.getExpressionFile(t);r.loadExpression(i,o)}}else r.expressionManager=null,r.expressions={};if(r.eyeBlink,null!=r.modelSetting.getPhysicsFile()?r.loadPhysics(r.modelHomeDir+r.modelSetting.getPhysicsFile()):r.physics=null,null!=r.modelSetting.getPoseFile()?r.loadPose(r.modelHomeDir+r.modelSetting.getPoseFile(),function(){r.pose.updateParam(r.live2DModel)}):r.pose=null,null!=r.modelSetting.getLayout()){var n=r.modelSetting.getLayout();null!=n.width&&r.modelMatrix.setWidth(n.width),null!=n.height&&r.modelMatrix.setHeight(n.height),null!=n.x&&r.modelMatrix.setX(n.x),null!=n.y&&r.modelMatrix.setY(n.y),null!=n.center_x&&r.modelMatrix.centerX(n.center_x),null!=n.center_y&&r.modelMatrix.centerY(n.center_y),null!=n.top&&r.modelMatrix.top(n.top),null!=n.bottom&&r.modelMatrix.bottom(n.bottom),null!=n.left&&r.modelMatrix.left(n.left),null!=n.right&&r.modelMatrix.right(n.right)}if(null!=r.modelSetting.getHitAreasCustom()){var s=r.modelSetting.getHitAreasCustom();null!=s.head_x&&(h.default.hit_areas_custom_head_x=s.head_x),null!=s.head_y&&(h.default.hit_areas_custom_head_y=s.head_y),null!=s.body_x&&(h.default.hit_areas_custom_body_x=s.body_x),null!=s.body_y&&(h.default.hit_areas_custom_body_y=s.body_y)}for(var t=0;t<r.modelSetting.getInitParamNum();t++)r.live2DModel.setParamFloat(r.modelSetting.getInitParamID(t),r.modelSetting.getInitParamValue(t));for(var t=0;t<r.modelSetting.getInitPartsVisibleNum();t++)r.live2DModel.setPartsOpacity(r.modelSetting.getInitPartsVisibleID(t),r.modelSetting.getInitPartsVisibleValue(t));r.live2DModel.saveParam(),r.preloadMotionGroup(h.default.MOTION_GROUP_IDLE),r.preloadMotionGroup(h.default.MOTION_GROUP_SLEEPY),r.mainMotionManager.stopAllMotions(),r.setUpdating(!1),r.setInitialized(!0),"function"==typeof e&&e()}})}})})},o.prototype.release=function(t){var i=n.Live2DFramework.getPlatformManager();t.deleteTexture(i.texture)},o.prototype.preloadMotionGroup=function(t){for(var i=this,e=0;e<this.modelSetting.getMotionNum(t);e++){var r=this.modelSetting.getMotionFile(t,e);this.loadMotion(r,this.modelHomeDir+r,function(r){r.setFadeIn(i.modelSetting.getMotionFadeIn(t,e)),r.setFadeOut(i.modelSetting.getMotionFadeOut(t,e))})}},o.prototype.update=function(){if(null==this.live2DModel)return void(h.default.DEBUG_LOG&&console.error("Failed to update."));var t=UtSystem.getUserTimeMSec()-this.startTimeMSec,i=t/1e3,e=2*i*Math.PI;if(this.mainMotionManager.isFinished()){"1"===sessionStorage.getItem("Sleepy")?this.startRandomMotion(h.default.MOTION_GROUP_SLEEPY,h.default.PRIORITY_SLEEPY):this.startRandomMotion(h.default.MOTION_GROUP_IDLE,h.default.PRIORITY_IDLE)}this.live2DModel.loadParam(),this.mainMotionManager.updateParam(this.live2DModel)||null!=this.eyeBlink&&this.eyeBlink.updateParam(this.live2DModel),this.live2DModel.saveParam(),null==this.expressionManager||null==this.expressions||this.expressionManager.isFinished()||this.expressionManager.updateParam(this.live2DModel),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",30*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",30*this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",this.dragX*this.dragY*-30,1),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",10*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_X",this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_Y",this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",Number(15*Math.sin(e/6.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",Number(8*Math.sin(e/3.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",Number(10*Math.sin(e/5.5345)),.5),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",Number(4*Math.sin(e/15.5345)),.5),this.live2DModel.setParamFloat("PARAM_BREATH",Number(.5+.5*Math.sin(e/3.2345)),1),null!=this.physics&&this.physics.updateParam(this.live2DModel),null==this.lipSync&&this.live2DModel.setParamFloat("PARAM_MOUTH_OPEN_Y",this.lipSyncValue),null!=this.pose&&this.pose.updateParam(this.live2DModel),this.live2DModel.update()},o.prototype.setRandomExpression=function(){var t=[];for(var i in this.expressions)t.push(i);var e=parseInt(Math.random()*t.length);this.setExpression(t[e])},o.prototype.startRandomMotion=function(t,i){var e=this.modelSetting.getMotionNum(t),r=parseInt(Math.random()*e);this.startMotion(t,r,i)},o.prototype.startMotion=function(t,i,e){var r=this.modelSetting.getMotionFile(t,i);if(null==r||""==r)return void(h.default.DEBUG_LOG&&console.error("Failed to motion."));if(e==h.default.PRIORITY_FORCE)this.mainMotionManager.setReservePriority(e);else if(!this.mainMotionManager.reserveMotion(e))return void(h.default.DEBUG_LOG&&console.log("Motion is running."));var o,n=this;null==this.motions[t]?this.loadMotion(null,this.modelHomeDir+r,function(r){o=r,n.setFadeInFadeOut(t,i,e,o)}):(o=this.motions[t],n.setFadeInFadeOut(t,i,e,o))},o.prototype.setFadeInFadeOut=function(t,i,e,r){var o=this.modelSetting.getMotionFile(t,i);if(r.setFadeIn(this.modelSetting.getMotionFadeIn(t,i)),r.setFadeOut(this.modelSetting.getMotionFadeOut(t,i)),h.default.DEBUG_LOG&&console.log("Start motion : "+o),null==this.modelSetting.getMotionSound(t,i))this.mainMotionManager.startMotionPrio(r,e);else{var n=this.modelSetting.getMotionSound(t,i),s=document.createElement("audio");s.src=this.modelHomeDir+n,h.default.DEBUG_LOG&&console.log("Start sound : "+n),s.play(),this.mainMotionManager.startMotionPrio(r,e)}},o.prototype.setExpression=function(t){var i=this.expressions[t];h.default.DEBUG_LOG&&console.log("Expression : "+t),this.expressionManager.startMotion(i,!1)},o.prototype.draw=function(t){$.default.push(),$.default.multMatrix(this.modelMatrix.getArray()),this.tmpMatrix=$.default.getMatrix(),this.live2DModel.setMatrix(this.tmpMatrix),this.live2DModel.draw(),$.default.pop()},o.prototype.hitTest=function(t,i,e){for(var r=this.modelSetting.getHitAreaNum(),o=0;o<r;o++)if(t==this.modelSetting.getHitAreaName(o)){var n=this.modelSetting.getHitAreaID(o);return this.hitTestSimple(n,i,e)}return!1},o.prototype.hitTestCustom=function(t,i,e){return"head"==t?this.hitTestSimpleCustom(h.default.hit_areas_custom_head_x,h.default.hit_areas_custom_head_y,i,e):"body"==t&&this.hitTestSimpleCustom(h.default.hit_areas_custom_body_x,h.default.hit_areas_custom_body_y,i,e)}},function(t,i,e){"use strict";function r(){this.NAME="name",this.ID="id",this.MODEL="model",this.TEXTURES="textures",this.HIT_AREAS="hit_areas",this.PHYSICS="physics",this.POSE="pose",this.EXPRESSIONS="expressions",this.MOTION_GROUPS="motions",this.SOUND="sound",this.FADE_IN="fade_in",this.FADE_OUT="fade_out",this.LAYOUT="layout",this.HIT_AREAS_CUSTOM="hit_areas_custom",this.INIT_PARAM="init_param",this.INIT_PARTS_VISIBLE="init_parts_visible",this.VALUE="val",this.FILE="file",this.json={}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;var o=e(0);r.prototype.loadModelSetting=function(t,i){var e=this;o.Live2DFramework.getPlatformManager().loadBytes(t,function(t){var r=String.fromCharCode.apply(null,new Uint8Array(t));e.json=JSON.parse(r),i()})},r.prototype.getTextureFile=function(t){return null==this.json[this.TEXTURES]||null==this.json[this.TEXTURES][t]?null:this.json[this.TEXTURES][t]},r.prototype.getModelFile=function(){return this.json[this.MODEL]},r.prototype.getTextureNum=function(){return null==this.json[this.TEXTURES]?0:this.json[this.TEXTURES].length},r.prototype.getHitAreaNum=function(){return null==this.json[this.HIT_AREAS]?0:this.json[this.HIT_AREAS].length},r.prototype.getHitAreaID=function(t){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][t]?null:this.json[this.HIT_AREAS][t][this.ID]},r.prototype.getHitAreaName=function(t){return null==this.json[this.HIT_AREAS]||null==this.json[this.HIT_AREAS][t]?null:this.json[this.HIT_AREAS][t][this.NAME]},r.prototype.getPhysicsFile=function(){return this.json[this.PHYSICS]},r.prototype.getPoseFile=function(){return this.json[this.POSE]},r.prototype.getExpressionNum=function(){return null==this.json[this.EXPRESSIONS]?0:this.json[this.EXPRESSIONS].length},r.prototype.getExpressionFile=function(t){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][t][this.FILE]},r.prototype.getExpressionName=function(t){return null==this.json[this.EXPRESSIONS]?null:this.json[this.EXPRESSIONS][t][this.NAME]},r.prototype.getLayout=function(){return this.json[this.LAYOUT]},r.prototype.getHitAreasCustom=function(){return this.json[this.HIT_AREAS_CUSTOM]},r.prototype.getInitParamNum=function(){return null==this.json[this.INIT_PARAM]?0:this.json[this.INIT_PARAM].length},r.prototype.getMotionNum=function(t){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]?0:this.json[this.MOTION_GROUPS][t].length},r.prototype.getMotionFile=function(t,i){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][i]?null:this.json[this.MOTION_GROUPS][t][i][this.FILE]},r.prototype.getMotionSound=function(t,i){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][i]||null==this.json[this.MOTION_GROUPS][t][i][this.SOUND]?null:this.json[this.MOTION_GROUPS][t][i][this.SOUND]},r.prototype.getMotionFadeIn=function(t,i){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][i]||null==this.json[this.MOTION_GROUPS][t][i][this.FADE_IN]?1e3:this.json[this.MOTION_GROUPS][t][i][this.FADE_IN]},r.prototype.getMotionFadeOut=function(t,i){return null==this.json[this.MOTION_GROUPS]||null==this.json[this.MOTION_GROUPS][t]||null==this.json[this.MOTION_GROUPS][t][i]||null==this.json[this.MOTION_GROUPS][t][i][this.FADE_OUT]?1e3:this.json[this.MOTION_GROUPS][t][i][this.FADE_OUT]},r.prototype.getInitParamID=function(t){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][t]?null:this.json[this.INIT_PARAM][t][this.ID]},r.prototype.getInitParamValue=function(t){return null==this.json[this.INIT_PARAM]||null==this.json[this.INIT_PARAM][t]?NaN:this.json[this.INIT_PARAM][t][this.VALUE]},r.prototype.getInitPartsVisibleNum=function(){return null==this.json[this.INIT_PARTS_VISIBLE]?0:this.json[this.INIT_PARTS_VISIBLE].length},r.prototype.getInitPartsVisibleID=function(t){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][t]?null:this.json[this.INIT_PARTS_VISIBLE][t][this.ID]},r.prototype.getInitPartsVisibleValue=function(t){return null==this.json[this.INIT_PARTS_VISIBLE]||null==this.json[this.INIT_PARTS_VISIBLE][t]?NaN:this.json[this.INIT_PARTS_VISIBLE][t][this.VALUE]}}]);
`;
var KanBanNiang_vue_vue_type_style_index_0_scoped_true_lang = "";
const _sfc_main$f = {
  name: "KanBanNiang",
  data() {
    return {
      isLoaded: true,
      displayBanNiang: false,
      isShowMessageBox: false,
      isShowBtns: false,
      messages: {
        message: { "welcome": "\u6B22\u8FCE\u6765\u5230\u6211\u7684\u535A\u5BA2", "home": "\u5FC3\u91CC\u7684\u82B1\uFF0C\u6211\u60F3\u8981\u5E26\u4F60\u56DE\u5BB6\u3002", "theme": "\u597D\u5427\uFF0C\u5E0C\u671B\u4F60\u80FD\u559C\u6B22\u6211\u7684\u5176\u4ED6\u5C0F\u4F19\u4F34\u3002", "close": "\u4F60\u77E5\u9053\u6211\u559C\u6B22\u5403\u4EC0\u4E48\u5417\uFF1F\u75F4\u75F4\u5730\u671B\u7740\u4F60\u3002", "info": "\u60F3\u77E5\u9053\u5173\u4E8E\u6211\u7684\u66F4\u591A\u4FE1\u606F\u5417\uFF1F" }.welcome,
        welcome: { "welcome": "\u6B22\u8FCE\u6765\u5230\u6211\u7684\u535A\u5BA2", "home": "\u5FC3\u91CC\u7684\u82B1\uFF0C\u6211\u60F3\u8981\u5E26\u4F60\u56DE\u5BB6\u3002", "theme": "\u597D\u5427\uFF0C\u5E0C\u671B\u4F60\u80FD\u559C\u6B22\u6211\u7684\u5176\u4ED6\u5C0F\u4F19\u4F34\u3002", "close": "\u4F60\u77E5\u9053\u6211\u559C\u6B22\u5403\u4EC0\u4E48\u5417\uFF1F\u75F4\u75F4\u5730\u671B\u7740\u4F60\u3002", "info": "\u60F3\u77E5\u9053\u5173\u4E8E\u6211\u7684\u66F4\u591A\u4FE1\u606F\u5417\uFF1F" }.welcome,
        home: { "welcome": "\u6B22\u8FCE\u6765\u5230\u6211\u7684\u535A\u5BA2", "home": "\u5FC3\u91CC\u7684\u82B1\uFF0C\u6211\u60F3\u8981\u5E26\u4F60\u56DE\u5BB6\u3002", "theme": "\u597D\u5427\uFF0C\u5E0C\u671B\u4F60\u80FD\u559C\u6B22\u6211\u7684\u5176\u4ED6\u5C0F\u4F19\u4F34\u3002", "close": "\u4F60\u77E5\u9053\u6211\u559C\u6B22\u5403\u4EC0\u4E48\u5417\uFF1F\u75F4\u75F4\u5730\u671B\u7740\u4F60\u3002", "info": "\u60F3\u77E5\u9053\u5173\u4E8E\u6211\u7684\u66F4\u591A\u4FE1\u606F\u5417\uFF1F" }.home,
        theme: { "welcome": "\u6B22\u8FCE\u6765\u5230\u6211\u7684\u535A\u5BA2", "home": "\u5FC3\u91CC\u7684\u82B1\uFF0C\u6211\u60F3\u8981\u5E26\u4F60\u56DE\u5BB6\u3002", "theme": "\u597D\u5427\uFF0C\u5E0C\u671B\u4F60\u80FD\u559C\u6B22\u6211\u7684\u5176\u4ED6\u5C0F\u4F19\u4F34\u3002", "close": "\u4F60\u77E5\u9053\u6211\u559C\u6B22\u5403\u4EC0\u4E48\u5417\uFF1F\u75F4\u75F4\u5730\u671B\u7740\u4F60\u3002", "info": "\u60F3\u77E5\u9053\u5173\u4E8E\u6211\u7684\u66F4\u591A\u4FE1\u606F\u5417\uFF1F" }.theme,
        close: { "welcome": "\u6B22\u8FCE\u6765\u5230\u6211\u7684\u535A\u5BA2", "home": "\u5FC3\u91CC\u7684\u82B1\uFF0C\u6211\u60F3\u8981\u5E26\u4F60\u56DE\u5BB6\u3002", "theme": "\u597D\u5427\uFF0C\u5E0C\u671B\u4F60\u80FD\u559C\u6B22\u6211\u7684\u5176\u4ED6\u5C0F\u4F19\u4F34\u3002", "close": "\u4F60\u77E5\u9053\u6211\u559C\u6B22\u5403\u4EC0\u4E48\u5417\uFF1F\u75F4\u75F4\u5730\u671B\u7740\u4F60\u3002", "info": "\u60F3\u77E5\u9053\u5173\u4E8E\u6211\u7684\u66F4\u591A\u4FE1\u606F\u5417\uFF1F" }.close,
        info: { "welcome": "\u6B22\u8FCE\u6765\u5230\u6211\u7684\u535A\u5BA2", "home": "\u5FC3\u91CC\u7684\u82B1\uFF0C\u6211\u60F3\u8981\u5E26\u4F60\u56DE\u5BB6\u3002", "theme": "\u597D\u5427\uFF0C\u5E0C\u671B\u4F60\u80FD\u559C\u6B22\u6211\u7684\u5176\u4ED6\u5C0F\u4F19\u4F34\u3002", "close": "\u4F60\u77E5\u9053\u6211\u559C\u6B22\u5403\u4EC0\u4E48\u5417\uFF1F\u75F4\u75F4\u5730\u671B\u7740\u4F60\u3002", "info": "\u60F3\u77E5\u9053\u5173\u4E8E\u6211\u7684\u66F4\u591A\u4FE1\u606F\u5417\uFF1F" }.info
      },
      currentTheme: ["blackCat", "whiteCat", "haru1", "haru2", "haruto", "koharu", "izumi", "shizuku", "wanko", "miku", "z16"][0],
      myTheme: ["blackCat", "whiteCat", "haru1", "haru2", "haruto", "koharu", "izumi", "shizuku", "wanko", "miku", "z16"],
      themeName: ["blackCat", "whiteCat", "haru1", "haru2", "haruto", "koharu", "izumi", "shizuku", "wanko", "miku", "z16"],
      model: {
        blackCat: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-hijiki/assets/hijiki.model.json",
        whiteCat: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-tororo/assets/tororo.model.json",
        haru1: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-haru/01/assets/haru01.model.json",
        haru2: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-haru/02/assets/haru02.model.json",
        haruto: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-haruto/assets/haruto.model.json",
        koharu: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-koharu/assets/koharu.model.json",
        izumi: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-izumi/assets/izumi.model.json",
        shizuku: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-shizuku/assets/shizuku.model.json",
        wanko: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-wanko/assets/wanko.model.json",
        miku: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-miku/assets/miku.model.json",
        z16: "https://cdn.jsdelivr.net/gh/QiShaoXuan/live2DModel@1.0.0/live2d-widget-model-z16/assets/z16.model.json"
      },
      style: {
        width: 250,
        height: 320
      },
      modelStyle: { "right": "90px", "bottom": "-20px", "opacity": "0.9" },
      messageStyle: { "right": "68px", "bottom": "290px" },
      btnStyle: { "right": "90px", "bottom": "40px" }
    };
  },
  mounted() {
    this.btnStyle = {
      ...this.btnStyle,
      height: this.myTheme.length > 1 ? "120px" : "100px"
    };
    this.initBanNiang();
  },
  methods: {
    hoverGoHome() {
      this.messages.message = this.messages.home;
    },
    hoverChangeTheme() {
      this.messages.message = this.messages.theme;
    },
    hoverMoreInfo() {
      this.messages.message = this.messages.info;
    },
    hoverCloseBanNiang() {
      this.messages.message = this.messages.close;
    },
    resetMessage() {
      this.messages.message = this.messages.welcome;
    },
    goHome() {
      if (this.$route.path !== "/") {
        this.$router.push("/");
      }
    },
    changeTheme() {
      const themes = [];
      for (var i2 = 0; i2 < this.myTheme.length; i2++) {
        if (this.myTheme[i2] != this.currentTheme) {
          themes.push(this.myTheme[i2]);
        }
      }
      const randomNum = Math.floor(Math.random() * (this.myTheme.length - 1));
      this.currentTheme = themes[randomNum];
      this.initBanNiang();
    },
    closeBanNiang() {
      this.isLoaded = false;
      this.displayBanNiang = true;
    },
    showBanNiang() {
      this.isLoaded = true;
      this.displayBanNiang = false;
      this.initBanNiang();
    },
    initBanNiang() {
      if (this.themeName.indexOf(this.currentTheme) === -1) {
        console.log("@vuepress-reco/vuepress-plugin-kan-ban-niang\u4E0D\u652F\u6301\u4E3B\u9898" + this.currentTheme + ", \u8BF7\u68C0\u67E5\u4E3B\u9898\u540D, \u6216\u524D\u5F80https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html \u67E5\u770B\u652F\u6301\u7684\u4E3B\u9898");
        document.querySelector(".kanbanniang").style.display = "none";
        return;
      }
      const isMobile = !!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      if (isMobile) {
        this.isLoaded = false;
        return console.log("mobile do not load model");
      }
      if (!window.loadlive2d) {
        const script = document.createElement("script");
        script.innerHTML = live2dJSString;
        document.body.appendChild(script);
      }
      var ajax = new XMLHttpRequest();
      ajax.open("get", this.model[this.currentTheme]);
      ajax.send();
      ajax.onreadystatechange = function() {
        if (ajax.status !== 200) {
          console.log("\u770B\u677F\u5A18\u7684CDN\u8D44\u6E90\u52A0\u8F7D\u5931\u8D25\u4E86\uFF0C\u8BF7\u7A0D\u540E\u5237\u65B0\u9875\u9762\u91CD\u8BD5\uFF01");
          document.querySelector(".kanbanniang").style.display = "none";
        }
      };
      window.loadlive2d("banniang", this.model[this.currentTheme]);
    }
  }
};
const _withScopeId = (n2) => (pushScopeId("data-v-cd08bc2a"), n2 = n2(), popScopeId(), n2);
const _hoisted_1$c = { class: "kanbanniang" };
const _hoisted_2$6 = { class: "banniang-container" };
const _hoisted_3$4 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ createBaseVNode("i", { class: "kbnfont kbn-ban-message message" }, null, -1));
const _hoisted_4$2 = {
  target: "_blank",
  href: "https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html"
};
const _hoisted_5$2 = ["width", "height"];
function _sfc_render$3(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", _hoisted_1$c, [
    withDirectives(createBaseVNode("div", _hoisted_2$6, [
      withDirectives(createBaseVNode("div", {
        class: "messageBox",
        style: normalizeStyle($data.messageStyle)
      }, toDisplayString($data.messages.message || "\u6B22\u8FCE\u6765\u5230 " + _ctx.$site.title), 5), [
        [vShow, $data.isShowMessageBox]
      ]),
      withDirectives(createBaseVNode("div", {
        style: normalizeStyle($data.btnStyle),
        class: "operation",
        onMouseenter: _cache[11] || (_cache[11] = ($event) => $data.isShowMessageBox = true),
        onMouseleave: _cache[12] || (_cache[12] = ($event) => $data.isShowMessageBox = false)
      }, [
        createBaseVNode("i", {
          class: "kbnfont kbn-ban-home ban-home",
          onClick: _cache[0] || (_cache[0] = (...args) => $options.goHome && $options.goHome(...args)),
          onMouseenter: _cache[1] || (_cache[1] = (...args) => $options.hoverGoHome && $options.hoverGoHome(...args)),
          onMouseleave: _cache[2] || (_cache[2] = (...args) => $options.resetMessage && $options.resetMessage(...args))
        }, null, 32),
        _hoisted_3$4,
        createBaseVNode("i", {
          class: "kbnfont kbn-ban-close close",
          onClick: _cache[3] || (_cache[3] = (...args) => $options.closeBanNiang && $options.closeBanNiang(...args)),
          onMouseenter: _cache[4] || (_cache[4] = (...args) => $options.hoverCloseBanNiang && $options.hoverCloseBanNiang(...args)),
          onMouseleave: _cache[5] || (_cache[5] = (...args) => $options.resetMessage && $options.resetMessage(...args))
        }, null, 32),
        createBaseVNode("a", _hoisted_4$2, [
          createBaseVNode("i", {
            class: "kbnfont kbn-ban-info info",
            onMouseenter: _cache[6] || (_cache[6] = (...args) => $options.hoverMoreInfo && $options.hoverMoreInfo(...args)),
            onMouseleave: _cache[7] || (_cache[7] = (...args) => $options.resetMessage && $options.resetMessage(...args))
          }, null, 32)
        ]),
        withDirectives(createBaseVNode("i", {
          class: "kbnfont kbn-ban-theme skin",
          onClick: _cache[8] || (_cache[8] = (...args) => $options.changeTheme && $options.changeTheme(...args)),
          onMouseenter: _cache[9] || (_cache[9] = (...args) => $options.hoverChangeTheme && $options.hoverChangeTheme(...args)),
          onMouseleave: _cache[10] || (_cache[10] = (...args) => $options.resetMessage && $options.resetMessage(...args))
        }, null, 544), [
          [vShow, $data.myTheme.length > 1]
        ])
      ], 36), [
        [vShow, !$data.isShowBtns]
      ]),
      createBaseVNode("canvas", {
        id: "banniang",
        style: normalizeStyle($data.modelStyle),
        width: $data.style.width,
        height: $data.style.height,
        class: "live2d"
      }, null, 12, _hoisted_5$2)
    ], 512), [
      [vShow, $data.isLoaded]
    ]),
    withDirectives(createBaseVNode("div", {
      class: "showBanNiang",
      onClick: _cache[13] || (_cache[13] = (...args) => $options.showBanNiang && $options.showBanNiang(...args))
    }, "\u770B\u677F\u5A18", 512), [
      [vShow, $data.displayBanNiang]
    ])
  ]);
}
var kanBanNiang = /* @__PURE__ */ _export_sfc(_sfc_main$f, [["render", _sfc_render$3], ["__scopeId", "data-v-cd08bc2a"], ["__file", "KanBanNiang.vue"]]);
var clientConfig17 = defineClientConfig({
  enhance({ app }) {
    app.component(kanBanNiang.name, kanBanNiang);
  },
  rootComponents: [kanBanNiang]
});
const _sfc_main$e = {
  name: "Ribbon",
  data() {
    return {
      canvas: null,
      ctx: null,
      angle: 0,
      resizeTimeout: null,
      visible: false,
      config: {
        size: 120,
        opacity: 0.3,
        zIndex: -1
      }
    };
  },
  mounted() {
    {
      return;
    }
  },
  methods: {
    draw(foldMark) {
      const ctx = this.ctx;
      const size2 = this.config.size;
      const p1 = foldMark[0];
      const p2 = foldMark[1];
      const p3 = { x: p2.x + this.rand(-0.25, 1.75) * size2, y: this.nextY(p2.y) };
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.lineTo(p3.x, p3.y);
      ctx.closePath();
      ctx.fillStyle = this.nextColor();
      ctx.fill();
      foldMark[0] = p2;
      foldMark[1] = p3;
    },
    getCanvas() {
      const canvas = document.getElementById("Ribbon");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      this.setStyle(canvas);
      return canvas;
    },
    redraw() {
      const width = this.canvas.width;
      const height = this.canvas.height;
      const size2 = this.config.size;
      const foldMark = [
        { x: 0, y: height * 0.7 + size2 },
        { x: 0, y: height * 0.7 - size2 }
      ];
      this.ctx.clearRect(0, 0, width, height);
      while (foldMark[1].x < width + size2)
        this.draw(foldMark);
    },
    nextY(y2) {
      this.canvas.width;
      const height = this.canvas.height;
      const size2 = this.config.size;
      const t2 = y2 + this.rand(-1.1, 0.9) * size2;
      return t2 > height || t2 < 0 ? this.nextY(y2) : t2;
    },
    setStyle(canvas) {
      const style2 = canvas.style;
      style2.opacity = this.config.opacity;
      style2.position = "fixed";
      style2.top = 0;
      style2.left = 0;
      style2.zIndex = this.config.zIndex;
      style2.width = canvas.width;
      style2.height = canvas.height;
      style2.pointerEvents = "none";
    },
    rand(start, end) {
      return Math.random() * (end - start) + start;
    },
    nextColor() {
      const pi_2 = Math.PI * 2;
      this.angle += pi_2 * 0.02;
      this.angle %= pi_2;
      return "#" + (Math.cos(this.angle) * 127 + 128 << 16 | Math.cos(this.angle + pi_2 / 3) * 127 + 128 << 8 | Math.cos(this.angle + pi_2 / 3 * 2) * 127 + 128).toString(16).padStart(6, "0");
    },
    isMobile() {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    },
    handleResize() {
      if (this.resizeTimeout != null) {
        clearTimeout(this.resizeTimeout);
      }
      this.resizeTimeout = setTimeout(() => {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
        this.redraw();
      }, 500);
    }
  }
};
const _hoisted_1$b = {
  key: 0,
  id: "Ribbon"
};
function _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {
  return $data.visible ? (openBlock(), createElementBlock("canvas", _hoisted_1$b)) : createCommentVNode("", true);
}
var Ribbon = /* @__PURE__ */ _export_sfc(_sfc_main$e, [["render", _sfc_render$2], ["__file", "Ribbon.vue"]]);
function Ribbons(options2) {
  var _w = window, _b = document.body, _d = document.documentElement;
  var random = function() {
    if (arguments.length === 1) {
      if (Array.isArray(arguments[0])) {
        var index2 = Math.round(random(0, arguments[0].length - 1));
        return arguments[0][index2];
      }
      return random(0, arguments[0]);
    } else if (arguments.length === 2) {
      return Math.random() * (arguments[1] - arguments[0]) + arguments[0];
    }
    return 0;
  };
  var screenInfo = function(e2) {
    var width = Math.max(0, _w.innerWidth || _d.clientWidth || _b.clientWidth || 0), height = Math.max(0, _w.innerHeight || _d.clientHeight || _b.clientHeight || 0), scrollx = Math.max(0, _w.pageXOffset || _d.scrollLeft || _b.scrollLeft || 0) - (_d.clientLeft || 0), scrolly = Math.max(0, _w.pageYOffset || _d.scrollTop || _b.scrollTop || 0) - (_d.clientTop || 0);
    return {
      width,
      height,
      ratio: width / height,
      centerx: width / 2,
      centery: height / 2,
      scrollx,
      scrolly
    };
  };
  var Point = function(x2, y2) {
    this.x = 0;
    this.y = 0;
    this.set(x2, y2);
  };
  Point.prototype = {
    constructor: Point,
    set: function(x2, y2) {
      this.x = x2 || 0;
      this.y = y2 || 0;
    },
    copy: function(point) {
      this.x = point.x || 0;
      this.y = point.y || 0;
      return this;
    },
    multiply: function(x2, y2) {
      this.x *= x2 || 1;
      this.y *= y2 || 1;
      return this;
    },
    divide: function(x2, y2) {
      this.x /= x2 || 1;
      this.y /= y2 || 1;
      return this;
    },
    add: function(x2, y2) {
      this.x += x2 || 0;
      this.y += y2 || 0;
      return this;
    },
    subtract: function(x2, y2) {
      this.x -= x2 || 0;
      this.y -= y2 || 0;
      return this;
    },
    clampX: function(min, max) {
      this.x = Math.max(min, Math.min(this.x, max));
      return this;
    },
    clampY: function(min, max) {
      this.y = Math.max(min, Math.min(this.y, max));
      return this;
    },
    flipX: function() {
      this.x *= -1;
      return this;
    },
    flipY: function() {
      this.y *= -1;
      return this;
    }
  };
  var Factory = function(options3) {
    this._canvas = null;
    this._context = null;
    this._sto = null;
    this._width = 0;
    this._height = 0;
    this._scroll = 0;
    this._ribbons = [];
    this._options = {
      colorSaturation: "80%",
      colorBrightness: "60%",
      colorAlpha: 0.65,
      colorCycleSpeed: 6,
      verticalPosition: "random",
      horizontalSpeed: 200,
      ribbonCount: 5,
      strokeSize: 0,
      parallaxAmount: -0.5,
      animateSections: true
    };
    this._onDraw = this._onDraw.bind(this);
    this._onResize = this._onResize.bind(this);
    this._onScroll = this._onScroll.bind(this);
    this.setOptions(options3);
    this.init();
  };
  Factory.prototype = {
    constructor: Factory,
    setOptions: function(options3) {
      if (typeof options3 === "object") {
        for (var key in options3) {
          if (Object.prototype.hasOwnProperty.call(options3, "key")) {
            this._options[key] = options3[key];
          }
        }
      }
    },
    init: function() {
      try {
        this._canvas = document.createElement("canvas");
        this._canvas.style["display"] = "block";
        this._canvas.style["position"] = "fixed";
        this._canvas.style["margin"] = "0";
        this._canvas.style["padding"] = "0";
        this._canvas.style["border"] = "0";
        this._canvas.style["outline"] = "0";
        this._canvas.style["left"] = "0";
        this._canvas.style["top"] = "0";
        this._canvas.style["width"] = "100%";
        this._canvas.style["height"] = "100%";
        this._canvas.style["z-index"] = "-1";
        this._canvas.style["background-color"] = "rgba(223, 223, 223, 0.3)";
        this._canvas.id = "bgCanvas";
        this._onResize();
        this._context = this._canvas.getContext("2d");
        this._context.clearRect(0, 0, this._width, this._height);
        this._context.globalAlpha = this._options.colorAlpha;
        window.addEventListener("resize", this._onResize);
        window.addEventListener("scroll", this._onScroll);
        document.body.appendChild(this._canvas);
      } catch (e2) {
        console.warn("Canvas Context Error: " + e2.toString());
        return;
      }
      this._onDraw();
    },
    addRibbon: function() {
      var dir = Math.round(random(1, 9)) > 5 ? "right" : "left", stop = 1e3, hide = 200, min = 0 - hide, max = this._width + hide, movex = 0, movey = 0, startx = dir === "right" ? min : max, starty = Math.round(random(0, this._height));
      if (/^(top|min)$/i.test(this._options.verticalPosition)) {
        starty = 0 + hide;
      } else if (/^(middle|center)$/i.test(this._options.verticalPosition)) {
        starty = this._height / 2;
      } else if (/^(bottom|max)$/i.test(this._options.verticalPosition)) {
        starty = this._height - hide;
      }
      var ribbon = [], point1 = new Point(startx, starty), point2 = new Point(startx, starty), point3 = null, color = Math.round(random(0, 360)), delay2 = 0;
      while (true) {
        if (stop <= 0)
          break;
        stop--;
        movex = Math.round((Math.random() * 1 - 0.2) * this._options.horizontalSpeed);
        movey = Math.round((Math.random() * 1 - 0.5) * (this._height * 0.25));
        point3 = new Point();
        point3.copy(point2);
        if (dir === "right") {
          point3.add(movex, movey);
          if (point2.x >= max)
            break;
        } else if (dir === "left") {
          point3.subtract(movex, movey);
          if (point2.x <= min)
            break;
        }
        ribbon.push({
          point1: new Point(point1.x, point1.y),
          point2: new Point(point2.x, point2.y),
          point3,
          color,
          delay: delay2,
          dir,
          alpha: 0,
          phase: 0
        });
        point1.copy(point2);
        point2.copy(point3);
        delay2 += 4;
        color += this._options.colorCycleSpeed;
      }
      this._ribbons.push(ribbon);
    },
    _drawRibbonSection: function(section) {
      if (section) {
        if (section.phase >= 1 && section.alpha <= 0) {
          return true;
        }
        if (section.delay <= 0) {
          section.phase += 0.02;
          section.alpha = Math.sin(section.phase) * 1;
          section.alpha = section.alpha <= 0 ? 0 : section.alpha;
          section.alpha = section.alpha >= 1 ? 1 : section.alpha;
          if (this._options.animateSections) {
            var mod = Math.sin(1 + section.phase * Math.PI / 2) * 0.1;
            if (section.dir === "right") {
              section.point1.add(mod, 0);
              section.point2.add(mod, 0);
              section.point3.add(mod, 0);
            } else {
              section.point1.subtract(mod, 0);
              section.point2.subtract(mod, 0);
              section.point3.subtract(mod, 0);
            }
            section.point1.add(0, mod);
            section.point2.add(0, mod);
            section.point3.add(0, mod);
          }
        } else {
          section.delay -= 0.5;
        }
        var s2 = this._options.colorSaturation, l2 = this._options.colorBrightness, c2 = "hsla(" + section.color + ", " + s2 + ", " + l2 + ", " + section.alpha + " )";
        this._context.save();
        if (this._options.parallaxAmount !== 0) {
          this._context.translate(0, this._scroll * this._options.parallaxAmount);
        }
        this._context.beginPath();
        this._context.moveTo(section.point1.x, section.point1.y);
        this._context.lineTo(section.point2.x, section.point2.y);
        this._context.lineTo(section.point3.x, section.point3.y);
        this._context.fillStyle = c2;
        this._context.fill();
        if (this._options.strokeSize > 0) {
          this._context.lineWidth = this._options.strokeSize;
          this._context.strokeStyle = c2;
          this._context.lineCap = "round";
          this._context.stroke();
        }
        this._context.restore();
      }
      return false;
    },
    _onDraw: function() {
      for (var i2 = 0, t2 = this._ribbons.length; i2 < t2; ++i2) {
        if (!this._ribbons[i2]) {
          this._ribbons.splice(i2, 1);
        }
      }
      this._context.clearRect(0, 0, this._width, this._height);
      for (var a2 = 0; a2 < this._ribbons.length; ++a2) {
        var ribbon = this._ribbons[a2], numSections = ribbon.length, numDone = 0;
        for (var b2 = 0; b2 < numSections; ++b2) {
          if (this._drawRibbonSection(ribbon[b2])) {
            numDone++;
          }
        }
        if (numDone >= numSections) {
          this._ribbons[a2] = null;
        }
      }
      if (this._ribbons.length < this._options.ribbonCount) {
        this.addRibbon();
      }
      requestAnimationFrame(this._onDraw);
    },
    _onResize: function(e2) {
      var screen = screenInfo();
      this._width = screen.width;
      this._height = screen.height;
      if (this._canvas) {
        this._canvas.width = this._width;
        this._canvas.height = this._height;
        if (this._context) {
          this._context.globalAlpha = this._options.colorAlpha;
        }
      }
    },
    _onScroll: function(e2) {
      var screen = screenInfo();
      this._scroll = screen.scrolly;
    }
  };
  return new Factory(options2);
}
const _sfc_main$d = {
  name: "RibbonAnimation",
  data() {
    return {
      RIBBON_OPTION: { "colorSaturation": "80%", "colorBrightness": "60%", "colorAlpha": 0.65, "colorCycleSpeed": 6, "verticalPosition": "max", "horizontalSpeed": 200, "ribbonCount": 3, "strokeSize": 0, "parallaxAmount": -0.5, "animateSections": true },
      visible: true
    };
  },
  mounted() {
    Ribbons(this.RIBBON_OPTION);
  }
};
const _hoisted_1$a = {
  key: 0,
  class: "RibbonAnimation"
};
function _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {
  return $data.visible ? (openBlock(), createElementBlock("div", _hoisted_1$a)) : createCommentVNode("", true);
}
var RibbonAnimation = /* @__PURE__ */ _export_sfc(_sfc_main$d, [["render", _sfc_render$1], ["__file", "RibbonAnimation.vue"]]);
var clientConfig18 = defineClientConfig({
  enhance({ app }) {
    app.component(Ribbon.name, Ribbon);
    app.component(RibbonAnimation.name, RibbonAnimation);
  },
  rootComponents: [Ribbon, RibbonAnimation]
});
var Sakura_vue_vue_type_style_index_0_scoped_true_lang = "";
class Sakura {
  constructor(x2, y2, s2, r2, fn2, that, img) {
    this.x = x2;
    this.y = y2;
    this.s = s2;
    this.r = r2;
    this.fn = fn2;
    this.that = that;
    this.img = img;
  }
  draw(cxt) {
    cxt.save();
    40 * this.s / 4;
    cxt.translate(this.x, this.y);
    cxt.rotate(this.r);
    cxt.drawImage(this.img, 0, 0, 40 * this.s, 40 * this.s);
    cxt.restore();
  }
  update() {
    this.x = this.fn.x(this.x, this.y);
    this.y = this.fn.y(this.y, this.y);
    this.r = this.fn.r(this.r);
    if (this.x > window.innerWidth || this.x < 0 || this.y > window.innerHeight || this.y < 0) {
      this.r = this.that.getRandom("fnr");
      if (Math.random() > 0.4) {
        this.x = this.that.getRandom("x");
        this.y = 0;
        this.s = this.that.getRandom("s");
        this.r = this.that.getRandom("r");
      } else {
        this.x = window.innerWidth;
        this.y = this.that.getRandom("y");
        this.s = this.that.getRandom("s");
        this.r = this.that.getRandom("r");
      }
    }
  }
}
class SakuraList {
  constructor() {
    this.list = [];
  }
  push(sakura2) {
    this.list.push(sakura2);
  }
  update() {
    for (var i2 = 0, len = this.list.length; i2 < len; i2++) {
      this.list[i2].update();
    }
  }
  draw(cxt) {
    for (var i2 = 0, len = this.list.length; i2 < len; i2++) {
      this.list[i2].draw(cxt);
    }
  }
  get(i2) {
    return this.list[i2];
  }
  size() {
    return this.list.length;
  }
}
const _sfc_main$c = {
  name: "Sakura",
  data() {
    return {
      staticx: false,
      stop: null,
      num: 20,
      show: true,
      zIndex: 1
    };
  },
  mounted() {
    this.$nextTick(() => {
      if (this.show) {
        this.startSakura();
      }
    });
  },
  methods: {
    getRandom(option) {
      var ret, random;
      switch (option) {
        case "x":
          ret = Math.random() * window.innerWidth;
          break;
        case "y":
          ret = Math.random() * window.innerHeight;
          break;
        case "s":
          ret = Math.random();
          break;
        case "r":
          ret = Math.random() * 6;
          break;
        case "fnx":
          random = -0.5 + Math.random() * 1;
          ret = function(x2, y2) {
            return x2 + 0.5 * random - 1.7;
          };
          break;
        case "fny":
          random = 1.5 + Math.random() * 0.7;
          ret = function(x2, y2) {
            return y2 + random;
          };
          break;
        case "fnr":
          random = Math.random() * 0.03;
          ret = function(r2) {
            return r2 + random;
          };
          break;
      }
      return ret;
    },
    startSakura() {
      let that = this;
      requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame;
      var canvas = document.getElementById("canvas_sakura");
      this.staticx = true;
      this.$refs.canvas_sakura.width = window.innerWidth;
      this.$refs.canvas_sakura.height = window.innerHeight;
      var cxt = this.$refs.canvas_sakura.getContext("2d");
      var sakuraList = new SakuraList();
      const img = new Image();
      img.src = "/blog-docs/images/blue.png";
      for (var i2 = 0; i2 < that.num; i2++) {
        let sakura2, randomX, randomY, randomS, randomR, randomFnx, randomFny, randomFnR;
        randomX = this.getRandom("x");
        randomY = this.getRandom("y");
        randomR = this.getRandom("r");
        randomS = this.getRandom("s");
        randomFnx = this.getRandom("fnx");
        randomFny = this.getRandom("fny");
        randomFnR = this.getRandom("fnr");
        sakura2 = new Sakura(
          randomX,
          randomY,
          randomS,
          randomR,
          {
            x: randomFnx,
            y: randomFny,
            r: randomFnR
          },
          this,
          img
        );
        sakura2.draw(cxt);
        sakuraList.push(sakura2);
      }
      this.stop = requestAnimationFrame(function fn2() {
        cxt.clearRect(0, 0, canvas.width, canvas.height);
        sakuraList.update();
        sakuraList.draw(cxt);
        that.stop = requestAnimationFrame(fn2);
      });
    },
    stopp() {
      if (this.staticx) {
        var child = document.getElementById("canvas_sakura");
        child.parentNode.removeChild(child);
        window.cancelAnimationFrame(this.stop);
        this.staticx = false;
      } else {
        this.startSakura();
      }
    }
  }
};
const _hoisted_1$9 = { class: "Sakura" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", _hoisted_1$9, [
    createBaseVNode("canvas", {
      id: "canvas_sakura",
      ref: "canvas_sakura",
      style: normalizeStyle({ zIndex: $data.zIndex })
    }, null, 4)
  ]);
}
var sakura = /* @__PURE__ */ _export_sfc(_sfc_main$c, [["render", _sfc_render], ["__scopeId", "data-v-4bd5e2a2"], ["__file", "Sakura.vue"]]);
var clientConfig19 = defineClientConfig({
  enhance({ app }) {
    app.component("sakura", sakura);
  },
  rootComponents: [sakura]
});
const _sfc_main$b = /* @__PURE__ */ defineComponent({
  __name: "NavbarBrand",
  setup(__props) {
    const routeLocale = useRouteLocale();
    const siteLocale = useSiteLocaleData();
    const themeLocale = useThemeLocaleData();
    const isDarkMode = useDarkMode();
    const navbarBrandLink = computed(
      () => themeLocale.value.home || routeLocale.value
    );
    const navbarBrandTitle = computed(() => siteLocale.value.title);
    const navbarBrandLogo = computed(() => {
      if (isDarkMode.value && themeLocale.value.logoDark !== void 0) {
        return themeLocale.value.logoDark;
      }
      return themeLocale.value.logo;
    });
    const NavbarBrandLogo = () => {
      if (!navbarBrandLogo.value)
        return null;
      const img = h$1("img", {
        class: "logo",
        src: withBase(navbarBrandLogo.value),
        alt: navbarBrandTitle.value
      });
      if (themeLocale.value.logoDark === void 0) {
        return img;
      }
      return h$1(ClientOnly, () => img);
    };
    return (_ctx, _cache) => {
      const _component_RouterLink = resolveComponent("RouterLink");
      return openBlock(), createBlock(_component_RouterLink, { to: unref(navbarBrandLink) }, {
        default: withCtx(() => [
          createVNode(NavbarBrandLogo),
          unref(navbarBrandTitle) ? (openBlock(), createElementBlock("span", {
            key: 0,
            class: normalizeClass(["site-name", { "can-hide": unref(navbarBrandLogo) }])
          }, toDisplayString(unref(navbarBrandTitle)), 3)) : createCommentVNode("", true)
        ]),
        _: 1
      }, 8, ["to"]);
    };
  }
});
var NavbarBrand = /* @__PURE__ */ _export_sfc(_sfc_main$b, [["__file", "NavbarBrand.vue"]]);
const _hoisted_1$8 = ["href", "rel", "target", "aria-label"];
const __default__ = defineComponent({
  inheritAttrs: false
});
const _sfc_main$a = /* @__PURE__ */ defineComponent({
  ...__default__,
  __name: "AutoLink",
  props: {
    item: {
      type: Object,
      required: true
    }
  },
  setup(__props) {
    const props = __props;
    const route = useRoute();
    const site = useSiteData();
    const { item } = toRefs(props);
    const hasHttpProtocol = computed(() => isLinkHttp(item.value.link));
    const hasNonHttpProtocol = computed(
      () => isLinkMailto(item.value.link) || isLinkTel(item.value.link)
    );
    const linkTarget = computed(() => {
      if (hasNonHttpProtocol.value)
        return void 0;
      if (item.value.target)
        return item.value.target;
      if (hasHttpProtocol.value)
        return "_blank";
      return void 0;
    });
    const isBlankTarget = computed(() => linkTarget.value === "_blank");
    const isRouterLink = computed(
      () => !hasHttpProtocol.value && !hasNonHttpProtocol.value && !isBlankTarget.value
    );
    const linkRel = computed(() => {
      if (hasNonHttpProtocol.value)
        return void 0;
      if (item.value.rel)
        return item.value.rel;
      if (isBlankTarget.value)
        return "noopener noreferrer";
      return void 0;
    });
    const linkAriaLabel = computed(() => item.value.ariaLabel || item.value.text);
    const shouldBeActiveInSubpath = computed(() => {
      const localeKeys = Object.keys(site.value.locales);
      if (localeKeys.length) {
        return !localeKeys.some((key) => key === item.value.link);
      }
      return item.value.link !== "/";
    });
    const isActiveInSubpath = computed(() => {
      if (!shouldBeActiveInSubpath.value) {
        return false;
      }
      return route.path.startsWith(item.value.link);
    });
    const isActive = computed(() => {
      if (!isRouterLink.value) {
        return false;
      }
      if (item.value.activeMatch) {
        return new RegExp(item.value.activeMatch).test(route.path);
      }
      return isActiveInSubpath.value;
    });
    return (_ctx, _cache) => {
      const _component_RouterLink = resolveComponent("RouterLink");
      const _component_AutoLinkExternalIcon = resolveComponent("AutoLinkExternalIcon");
      return unref(isRouterLink) ? (openBlock(), createBlock(_component_RouterLink, mergeProps({
        key: 0,
        class: { "router-link-active": unref(isActive) },
        to: unref(item).link,
        "aria-label": unref(linkAriaLabel)
      }, _ctx.$attrs), {
        default: withCtx(() => [
          renderSlot(_ctx.$slots, "before"),
          createTextVNode(" " + toDisplayString(unref(item).text) + " ", 1),
          renderSlot(_ctx.$slots, "after")
        ]),
        _: 3
      }, 16, ["class", "to", "aria-label"])) : (openBlock(), createElementBlock("a", mergeProps({
        key: 1,
        class: "external-link",
        href: unref(item).link,
        rel: unref(linkRel),
        target: unref(linkTarget),
        "aria-label": unref(linkAriaLabel)
      }, _ctx.$attrs), [
        renderSlot(_ctx.$slots, "before"),
        createTextVNode(" " + toDisplayString(unref(item).text) + " ", 1),
        unref(isBlankTarget) ? (openBlock(), createBlock(_component_AutoLinkExternalIcon, { key: 0 })) : createCommentVNode("", true),
        renderSlot(_ctx.$slots, "after")
      ], 16, _hoisted_1$8));
    };
  }
});
var AutoLink = /* @__PURE__ */ _export_sfc(_sfc_main$a, [["__file", "AutoLink.vue"]]);
const _sfc_main$9 = /* @__PURE__ */ defineComponent({
  __name: "DropdownTransition",
  setup(__props) {
    const setHeight = (items) => {
      items.style.height = items.scrollHeight + "px";
    };
    const unsetHeight = (items) => {
      items.style.height = "";
    };
    return (_ctx, _cache) => {
      return openBlock(), createBlock(Transition, {
        name: "dropdown",
        onEnter: setHeight,
        onAfterEnter: unsetHeight,
        onBeforeLeave: setHeight
      }, {
        default: withCtx(() => [
          renderSlot(_ctx.$slots, "default")
        ]),
        _: 3
      });
    };
  }
});
var DropdownTransition = /* @__PURE__ */ _export_sfc(_sfc_main$9, [["__file", "DropdownTransition.vue"]]);
const _hoisted_1$7 = ["aria-label"];
const _hoisted_2$5 = { class: "title" };
const _hoisted_3$3 = /* @__PURE__ */ createBaseVNode("span", { class: "arrow down" }, null, -1);
const _hoisted_4$1 = ["aria-label"];
const _hoisted_5$1 = { class: "title" };
const _hoisted_6$1 = { class: "navbar-dropdown" };
const _hoisted_7$1 = { class: "navbar-dropdown-subtitle" };
const _hoisted_8$1 = { key: 1 };
const _hoisted_9$1 = { class: "navbar-dropdown-subitem-wrapper" };
const _sfc_main$8 = /* @__PURE__ */ defineComponent({
  __name: "NavbarDropdown",
  props: {
    item: {
      type: Object,
      required: true
    }
  },
  setup(__props) {
    const props = __props;
    const { item } = toRefs(props);
    const dropdownAriaLabel = computed(
      () => item.value.ariaLabel || item.value.text
    );
    const open = ref(false);
    const route = useRoute();
    watch(
      () => route.path,
      () => {
        open.value = false;
      }
    );
    const handleDropdown = (e2) => {
      const isTriggerByTab = e2.detail === 0;
      if (isTriggerByTab) {
        open.value = !open.value;
      } else {
        open.value = false;
      }
    };
    const isLastItemOfArray = (item2, arr) => arr[arr.length - 1] === item2;
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: normalizeClass(["navbar-dropdown-wrapper", { open: open.value }])
      }, [
        createBaseVNode("button", {
          class: "navbar-dropdown-title",
          type: "button",
          "aria-label": unref(dropdownAriaLabel),
          onClick: handleDropdown
        }, [
          createBaseVNode("span", _hoisted_2$5, toDisplayString(unref(item).text), 1),
          _hoisted_3$3
        ], 8, _hoisted_1$7),
        createBaseVNode("button", {
          class: "navbar-dropdown-title-mobile",
          type: "button",
          "aria-label": unref(dropdownAriaLabel),
          onClick: _cache[0] || (_cache[0] = ($event) => open.value = !open.value)
        }, [
          createBaseVNode("span", _hoisted_5$1, toDisplayString(unref(item).text), 1),
          createBaseVNode("span", {
            class: normalizeClass(["arrow", open.value ? "down" : "right"])
          }, null, 2)
        ], 8, _hoisted_4$1),
        createVNode(DropdownTransition, null, {
          default: withCtx(() => [
            withDirectives(createBaseVNode("ul", _hoisted_6$1, [
              (openBlock(true), createElementBlock(Fragment, null, renderList(unref(item).children, (child) => {
                return openBlock(), createElementBlock("li", {
                  key: child.text,
                  class: "navbar-dropdown-item"
                }, [
                  child.children ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
                    createBaseVNode("h4", _hoisted_7$1, [
                      child.link ? (openBlock(), createBlock(AutoLink, {
                        key: 0,
                        item: child,
                        onFocusout: ($event) => isLastItemOfArray(child, unref(item).children) && child.children.length === 0 && (open.value = false)
                      }, null, 8, ["item", "onFocusout"])) : (openBlock(), createElementBlock("span", _hoisted_8$1, toDisplayString(child.text), 1))
                    ]),
                    createBaseVNode("ul", _hoisted_9$1, [
                      (openBlock(true), createElementBlock(Fragment, null, renderList(child.children, (grandchild) => {
                        return openBlock(), createElementBlock("li", {
                          key: grandchild.link,
                          class: "navbar-dropdown-subitem"
                        }, [
                          createVNode(AutoLink, {
                            item: grandchild,
                            onFocusout: ($event) => isLastItemOfArray(grandchild, child.children) && isLastItemOfArray(child, unref(item).children) && (open.value = false)
                          }, null, 8, ["item", "onFocusout"])
                        ]);
                      }), 128))
                    ])
                  ], 64)) : (openBlock(), createBlock(AutoLink, {
                    key: 1,
                    item: child,
                    onFocusout: ($event) => isLastItemOfArray(child, unref(item).children) && (open.value = false)
                  }, null, 8, ["item", "onFocusout"]))
                ]);
              }), 128))
            ], 512), [
              [vShow, open.value]
            ])
          ]),
          _: 1
        })
      ], 2);
    };
  }
});
var NavbarDropdown = /* @__PURE__ */ _export_sfc(_sfc_main$8, [["__file", "NavbarDropdown.vue"]]);
const resolveRepoType = (repo) => {
  if (!isLinkHttp(repo) || /github\.com/.test(repo))
    return "GitHub";
  if (/bitbucket\.org/.test(repo))
    return "Bitbucket";
  if (/gitlab\.com/.test(repo))
    return "GitLab";
  if (/gitee\.com/.test(repo))
    return "Gitee";
  return null;
};
const _hoisted_1$6 = {
  key: 0,
  class: "navbar-items inline-flex items-center"
};
const _sfc_main$7 = /* @__PURE__ */ defineComponent({
  __name: "NavbarItems",
  setup(__props) {
    const useNavbarSelectLanguage = () => {
      const router = useRouter();
      const routeLocale = useRouteLocale();
      const siteLocale = useSiteLocaleData();
      const themeLocale = useThemeLocaleData();
      return computed(() => {
        var _a2, _b, _c;
        const localePaths = Object.keys(siteLocale.value.locales);
        if (localePaths.length < 2) {
          return [];
        }
        const currentPath = router.currentRoute.value.path;
        const currentFullPath = router.currentRoute.value.fullPath;
        const currentHash = router.currentRoute.value.hash;
        const languageDropdown = {
          text: (_a2 = themeLocale.value.selectLanguageText) != null ? _a2 : "unknown language",
          ariaLabel: (_c = (_b = themeLocale.value.selectLanguageAriaLabel) != null ? _b : themeLocale.value.selectLanguageText) != null ? _c : "unknown language",
          children: localePaths.map((targetLocalePath) => {
            var _a3, _b2, _c2, _d, _e2, _f;
            const targetSiteLocale = (_b2 = (_a3 = siteLocale.value.locales) == null ? void 0 : _a3[targetLocalePath]) != null ? _b2 : {};
            const targetThemeLocale = (_d = (_c2 = themeLocale.value.locales) == null ? void 0 : _c2[targetLocalePath]) != null ? _d : {};
            const targetLang = `${targetSiteLocale.lang}`;
            const text = (_e2 = targetThemeLocale.selectLanguageName) != null ? _e2 : targetLang;
            let link;
            if (targetLang === siteLocale.value.lang) {
              link = currentFullPath;
            } else {
              const targetLocalePage = currentPath.replace(routeLocale.value, targetLocalePath);
              if (router.getRoutes().some((item) => item.path === targetLocalePage)) {
                link = `${targetLocalePage}${currentHash}`;
              } else {
                link = (_f = targetThemeLocale.home) != null ? _f : targetLocalePath;
              }
            }
            return {
              text,
              link
            };
          })
        };
        return [languageDropdown];
      });
    };
    const useNavbarRepo = () => {
      const themeLocale = useThemeLocaleData();
      const repo = computed(() => themeLocale.value.repo);
      const repoType = computed(() => repo.value ? resolveRepoType(repo.value) : null);
      const repoLink = computed(() => {
        if (repo.value && !isLinkHttp(repo.value)) {
          return `https://github.com/${repo.value}`;
        }
        return repo.value;
      });
      const repoLabel = computed(() => {
        if (!repoLink.value)
          return null;
        if (themeLocale.value.repoLabel)
          return themeLocale.value.repoLabel;
        if (repoType.value === null)
          return "Source";
        return repoType.value;
      });
      return computed(() => {
        if (!repoLink.value || !repoLabel.value) {
          return [];
        }
        return [
          {
            text: repoLabel.value,
            link: repoLink.value
          }
        ];
      });
    };
    const resolveNavbarItem = (item) => {
      if (isString$2(item)) {
        return useNavLink(item);
      }
      if (item.children) {
        return {
          ...item,
          children: item.children.map(resolveNavbarItem)
        };
      }
      return item;
    };
    const useNavbarConfig = () => {
      const themeLocale = useThemeLocaleData();
      return computed(() => (themeLocale.value.navbar || []).map(resolveNavbarItem));
    };
    const navbarConfig = useNavbarConfig();
    const navbarSelectLanguage = useNavbarSelectLanguage();
    const navbarRepo = useNavbarRepo();
    const navbarLinks = computed(() => [...navbarConfig.value, ...navbarSelectLanguage.value, ...navbarRepo.value]);
    return (_ctx, _cache) => {
      const _component_Icon = resolveComponent("Icon");
      return unref(navbarLinks).length ? (openBlock(), createElementBlock("nav", _hoisted_1$6, [
        (openBlock(true), createElementBlock(Fragment, null, renderList(unref(navbarLinks), (item) => {
          return openBlock(), createElementBlock("div", {
            key: item.text,
            class: "navbar-item"
          }, [
            item.children ? (openBlock(), createBlock(NavbarDropdown, {
              key: 0,
              item,
              class: "!flex !items-center"
            }, null, 8, ["item"])) : item.icon ? (openBlock(), createBlock(AutoLink, {
              key: 1,
              item,
              class: "!flex !items-center !text-[#000]"
            }, {
              before: withCtx(() => [
                createVNode(_component_Icon, {
                  icon: item.icon,
                  iconColor: "#000"
                }, null, 8, ["icon"])
              ]),
              _: 2
            }, 1032, ["item"])) : (openBlock(), createBlock(AutoLink, {
              key: 2,
              item
            }, null, 8, ["item"]))
          ]);
        }), 128))
      ])) : createCommentVNode("", true);
    };
  }
});
var NavbarItems = /* @__PURE__ */ _export_sfc(_sfc_main$7, [["__file", "NavbarItems.vue"]]);
const _hoisted_1$5 = ["title"];
const _hoisted_2$4 = {
  class: "icon",
  focusable: "false",
  viewBox: "0 0 32 32"
};
const _hoisted_3$2 = /* @__PURE__ */ createStaticVNode('<path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path>', 9);
const _hoisted_12$1 = [
  _hoisted_3$2
];
const _hoisted_13$1 = {
  class: "icon",
  focusable: "false",
  viewBox: "0 0 32 32"
};
const _hoisted_14 = /* @__PURE__ */ createBaseVNode("path", {
  d: "M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z",
  fill: "currentColor"
}, null, -1);
const _hoisted_15 = [
  _hoisted_14
];
const _sfc_main$6 = /* @__PURE__ */ defineComponent({
  __name: "ToggleColorModeButton",
  setup(__props) {
    const themeLocale = useThemeLocaleData();
    const isDarkMode = useDarkMode();
    const toggleColorMode = () => {
      isDarkMode.value = !isDarkMode.value;
    };
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("button", {
        class: "toggle-color-mode-button",
        title: unref(themeLocale).toggleColorMode,
        onClick: toggleColorMode
      }, [
        withDirectives((openBlock(), createElementBlock("svg", _hoisted_2$4, _hoisted_12$1, 512)), [
          [vShow, !unref(isDarkMode)]
        ]),
        withDirectives((openBlock(), createElementBlock("svg", _hoisted_13$1, _hoisted_15, 512)), [
          [vShow, unref(isDarkMode)]
        ])
      ], 8, _hoisted_1$5);
    };
  }
});
var ToggleColorModeButton = /* @__PURE__ */ _export_sfc(_sfc_main$6, [["__file", "ToggleColorModeButton.vue"]]);
const _hoisted_1$4 = ["title"];
const _hoisted_2$3 = /* @__PURE__ */ createBaseVNode("div", {
  class: "icon",
  "aria-hidden": "true"
}, [
  /* @__PURE__ */ createBaseVNode("span"),
  /* @__PURE__ */ createBaseVNode("span"),
  /* @__PURE__ */ createBaseVNode("span")
], -1);
const _hoisted_3$1 = [
  _hoisted_2$3
];
const _sfc_main$5 = /* @__PURE__ */ defineComponent({
  __name: "ToggleSidebarButton",
  emits: ["toggle"],
  setup(__props) {
    const themeLocale = useThemeLocaleData();
    return (_ctx, _cache) => {
      return openBlock(), createElementBlock("div", {
        class: "toggle-sidebar-button",
        title: unref(themeLocale).toggleSidebar,
        "aria-expanded": "false",
        role: "button",
        tabindex: "0",
        onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("toggle"))
      }, _hoisted_3$1, 8, _hoisted_1$4);
    };
  }
});
var ToggleSidebarButton = /* @__PURE__ */ _export_sfc(_sfc_main$5, [["__file", "ToggleSidebarButton.vue"]]);
const _sfc_main$4 = /* @__PURE__ */ defineComponent({
  __name: "Navbar",
  emits: ["toggle-sidebar"],
  setup(__props) {
    const themeLocale = useThemeLocaleData();
    const navbar = ref(null);
    const navbarBrand = ref(null);
    const linksWrapperMaxWidth = ref(0);
    const linksWrapperStyle = computed(() => {
      if (!linksWrapperMaxWidth.value) {
        return {};
      }
      return {
        maxWidth: linksWrapperMaxWidth.value + "px"
      };
    });
    onMounted(() => {
      const MOBILE_DESKTOP_BREAKPOINT = 719;
      const navbarHorizontalPadding = getCssValue(navbar.value, "paddingLeft") + getCssValue(navbar.value, "paddingRight");
      const handleLinksWrapWidth = () => {
        var _a2;
        if (window.innerWidth <= MOBILE_DESKTOP_BREAKPOINT) {
          linksWrapperMaxWidth.value = 0;
        } else {
          linksWrapperMaxWidth.value = navbar.value.offsetWidth - navbarHorizontalPadding - (((_a2 = navbarBrand.value) == null ? void 0 : _a2.offsetWidth) || 0);
        }
      };
      handleLinksWrapWidth();
      window.addEventListener("resize", handleLinksWrapWidth, false);
      window.addEventListener("orientationchange", handleLinksWrapWidth, false);
    });
    function getCssValue(el, property) {
      var _a2, _b, _c;
      const val = (_c = (_b = (_a2 = el == null ? void 0 : el.ownerDocument) == null ? void 0 : _a2.defaultView) == null ? void 0 : _b.getComputedStyle(el, null)) == null ? void 0 : _c[property];
      const num = Number.parseInt(val, 10);
      return Number.isNaN(num) ? 0 : num;
    }
    return (_ctx, _cache) => {
      const _component_NavbarSearch = resolveComponent("NavbarSearch");
      return openBlock(), createElementBlock("header", {
        ref_key: "navbar",
        ref: navbar,
        class: "navbar"
      }, [
        createVNode(ToggleSidebarButton, {
          onToggle: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("toggle-sidebar"))
        }),
        createBaseVNode("span", {
          ref_key: "navbarBrand",
          ref: navbarBrand
        }, [
          createVNode(NavbarBrand)
        ], 512),
        createBaseVNode("div", {
          class: "navbar-items-wrapper",
          style: normalizeStyle(unref(linksWrapperStyle))
        }, [
          renderSlot(_ctx.$slots, "before"),
          createVNode(NavbarItems, { class: "can-hide" }),
          renderSlot(_ctx.$slots, "after"),
          unref(themeLocale).colorModeSwitch ? (openBlock(), createBlock(ToggleColorModeButton, { key: 0 })) : createCommentVNode("", true),
          createVNode(_component_NavbarSearch)
        ], 4)
      ], 512);
    };
  }
});
var Navbar = /* @__PURE__ */ _export_sfc(_sfc_main$4, [["__file", "Navbar.vue"]]);
var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
function getDefaultExportFromCjs(x2) {
  return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, "default") ? x2["default"] : x2;
}
var dayjs_min = { exports: {} };
(function(module, exports) {
  !function(t2, e2) {
    module.exports = e2();
  }(commonjsGlobal, function() {
    var t2 = 1e3, e2 = 6e4, n2 = 36e5, r2 = "millisecond", i2 = "second", s2 = "minute", u2 = "hour", a2 = "day", o2 = "week", f2 = "month", h2 = "quarter", c2 = "year", d2 = "date", $2 = "Invalid Date", l2 = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/, y2 = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g, M2 = { name: "en", weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_") }, m2 = function(t3, e3, n3) {
      var r3 = String(t3);
      return !r3 || r3.length >= e3 ? t3 : "" + Array(e3 + 1 - r3.length).join(n3) + t3;
    }, g2 = { s: m2, z: function(t3) {
      var e3 = -t3.utcOffset(), n3 = Math.abs(e3), r3 = Math.floor(n3 / 60), i3 = n3 % 60;
      return (e3 <= 0 ? "+" : "-") + m2(r3, 2, "0") + ":" + m2(i3, 2, "0");
    }, m: function t3(e3, n3) {
      if (e3.date() < n3.date())
        return -t3(n3, e3);
      var r3 = 12 * (n3.year() - e3.year()) + (n3.month() - e3.month()), i3 = e3.clone().add(r3, f2), s3 = n3 - i3 < 0, u3 = e3.clone().add(r3 + (s3 ? -1 : 1), f2);
      return +(-(r3 + (n3 - i3) / (s3 ? i3 - u3 : u3 - i3)) || 0);
    }, a: function(t3) {
      return t3 < 0 ? Math.ceil(t3) || 0 : Math.floor(t3);
    }, p: function(t3) {
      return { M: f2, y: c2, w: o2, d: a2, D: d2, h: u2, m: s2, s: i2, ms: r2, Q: h2 }[t3] || String(t3 || "").toLowerCase().replace(/s$/, "");
    }, u: function(t3) {
      return void 0 === t3;
    } }, v2 = "en", D2 = {};
    D2[v2] = M2;
    var p2 = function(t3) {
      return t3 instanceof _2;
    }, S2 = function t3(e3, n3, r3) {
      var i3;
      if (!e3)
        return v2;
      if ("string" == typeof e3) {
        var s3 = e3.toLowerCase();
        D2[s3] && (i3 = s3), n3 && (D2[s3] = n3, i3 = s3);
        var u3 = e3.split("-");
        if (!i3 && u3.length > 1)
          return t3(u3[0]);
      } else {
        var a3 = e3.name;
        D2[a3] = e3, i3 = a3;
      }
      return !r3 && i3 && (v2 = i3), i3 || !r3 && v2;
    }, w2 = function(t3, e3) {
      if (p2(t3))
        return t3.clone();
      var n3 = "object" == typeof e3 ? e3 : {};
      return n3.date = t3, n3.args = arguments, new _2(n3);
    }, O2 = g2;
    O2.l = S2, O2.i = p2, O2.w = function(t3, e3) {
      return w2(t3, { locale: e3.$L, utc: e3.$u, x: e3.$x, $offset: e3.$offset });
    };
    var _2 = function() {
      function M3(t3) {
        this.$L = S2(t3.locale, null, true), this.parse(t3);
      }
      var m3 = M3.prototype;
      return m3.parse = function(t3) {
        this.$d = function(t4) {
          var e3 = t4.date, n3 = t4.utc;
          if (null === e3)
            return new Date(NaN);
          if (O2.u(e3))
            return new Date();
          if (e3 instanceof Date)
            return new Date(e3);
          if ("string" == typeof e3 && !/Z$/i.test(e3)) {
            var r3 = e3.match(l2);
            if (r3) {
              var i3 = r3[2] - 1 || 0, s3 = (r3[7] || "0").substring(0, 3);
              return n3 ? new Date(Date.UTC(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3)) : new Date(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3);
            }
          }
          return new Date(e3);
        }(t3), this.$x = t3.x || {}, this.init();
      }, m3.init = function() {
        var t3 = this.$d;
        this.$y = t3.getFullYear(), this.$M = t3.getMonth(), this.$D = t3.getDate(), this.$W = t3.getDay(), this.$H = t3.getHours(), this.$m = t3.getMinutes(), this.$s = t3.getSeconds(), this.$ms = t3.getMilliseconds();
      }, m3.$utils = function() {
        return O2;
      }, m3.isValid = function() {
        return !(this.$d.toString() === $2);
      }, m3.isSame = function(t3, e3) {
        var n3 = w2(t3);
        return this.startOf(e3) <= n3 && n3 <= this.endOf(e3);
      }, m3.isAfter = function(t3, e3) {
        return w2(t3) < this.startOf(e3);
      }, m3.isBefore = function(t3, e3) {
        return this.endOf(e3) < w2(t3);
      }, m3.$g = function(t3, e3, n3) {
        return O2.u(t3) ? this[e3] : this.set(n3, t3);
      }, m3.unix = function() {
        return Math.floor(this.valueOf() / 1e3);
      }, m3.valueOf = function() {
        return this.$d.getTime();
      }, m3.startOf = function(t3, e3) {
        var n3 = this, r3 = !!O2.u(e3) || e3, h3 = O2.p(t3), $3 = function(t4, e4) {
          var i3 = O2.w(n3.$u ? Date.UTC(n3.$y, e4, t4) : new Date(n3.$y, e4, t4), n3);
          return r3 ? i3 : i3.endOf(a2);
        }, l3 = function(t4, e4) {
          return O2.w(n3.toDate()[t4].apply(n3.toDate("s"), (r3 ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e4)), n3);
        }, y3 = this.$W, M4 = this.$M, m4 = this.$D, g3 = "set" + (this.$u ? "UTC" : "");
        switch (h3) {
          case c2:
            return r3 ? $3(1, 0) : $3(31, 11);
          case f2:
            return r3 ? $3(1, M4) : $3(0, M4 + 1);
          case o2:
            var v3 = this.$locale().weekStart || 0, D3 = (y3 < v3 ? y3 + 7 : y3) - v3;
            return $3(r3 ? m4 - D3 : m4 + (6 - D3), M4);
          case a2:
          case d2:
            return l3(g3 + "Hours", 0);
          case u2:
            return l3(g3 + "Minutes", 1);
          case s2:
            return l3(g3 + "Seconds", 2);
          case i2:
            return l3(g3 + "Milliseconds", 3);
          default:
            return this.clone();
        }
      }, m3.endOf = function(t3) {
        return this.startOf(t3, false);
      }, m3.$set = function(t3, e3) {
        var n3, o3 = O2.p(t3), h3 = "set" + (this.$u ? "UTC" : ""), $3 = (n3 = {}, n3[a2] = h3 + "Date", n3[d2] = h3 + "Date", n3[f2] = h3 + "Month", n3[c2] = h3 + "FullYear", n3[u2] = h3 + "Hours", n3[s2] = h3 + "Minutes", n3[i2] = h3 + "Seconds", n3[r2] = h3 + "Milliseconds", n3)[o3], l3 = o3 === a2 ? this.$D + (e3 - this.$W) : e3;
        if (o3 === f2 || o3 === c2) {
          var y3 = this.clone().set(d2, 1);
          y3.$d[$3](l3), y3.init(), this.$d = y3.set(d2, Math.min(this.$D, y3.daysInMonth())).$d;
        } else
          $3 && this.$d[$3](l3);
        return this.init(), this;
      }, m3.set = function(t3, e3) {
        return this.clone().$set(t3, e3);
      }, m3.get = function(t3) {
        return this[O2.p(t3)]();
      }, m3.add = function(r3, h3) {
        var d3, $3 = this;
        r3 = Number(r3);
        var l3 = O2.p(h3), y3 = function(t3) {
          var e3 = w2($3);
          return O2.w(e3.date(e3.date() + Math.round(t3 * r3)), $3);
        };
        if (l3 === f2)
          return this.set(f2, this.$M + r3);
        if (l3 === c2)
          return this.set(c2, this.$y + r3);
        if (l3 === a2)
          return y3(1);
        if (l3 === o2)
          return y3(7);
        var M4 = (d3 = {}, d3[s2] = e2, d3[u2] = n2, d3[i2] = t2, d3)[l3] || 1, m4 = this.$d.getTime() + r3 * M4;
        return O2.w(m4, this);
      }, m3.subtract = function(t3, e3) {
        return this.add(-1 * t3, e3);
      }, m3.format = function(t3) {
        var e3 = this, n3 = this.$locale();
        if (!this.isValid())
          return n3.invalidDate || $2;
        var r3 = t3 || "YYYY-MM-DDTHH:mm:ssZ", i3 = O2.z(this), s3 = this.$H, u3 = this.$m, a3 = this.$M, o3 = n3.weekdays, f3 = n3.months, h3 = function(t4, n4, i4, s4) {
          return t4 && (t4[n4] || t4(e3, r3)) || i4[n4].slice(0, s4);
        }, c3 = function(t4) {
          return O2.s(s3 % 12 || 12, t4, "0");
        }, d3 = n3.meridiem || function(t4, e4, n4) {
          var r4 = t4 < 12 ? "AM" : "PM";
          return n4 ? r4.toLowerCase() : r4;
        }, l3 = { YY: String(this.$y).slice(-2), YYYY: this.$y, M: a3 + 1, MM: O2.s(a3 + 1, 2, "0"), MMM: h3(n3.monthsShort, a3, f3, 3), MMMM: h3(f3, a3), D: this.$D, DD: O2.s(this.$D, 2, "0"), d: String(this.$W), dd: h3(n3.weekdaysMin, this.$W, o3, 2), ddd: h3(n3.weekdaysShort, this.$W, o3, 3), dddd: o3[this.$W], H: String(s3), HH: O2.s(s3, 2, "0"), h: c3(1), hh: c3(2), a: d3(s3, u3, true), A: d3(s3, u3, false), m: String(u3), mm: O2.s(u3, 2, "0"), s: String(this.$s), ss: O2.s(this.$s, 2, "0"), SSS: O2.s(this.$ms, 3, "0"), Z: i3 };
        return r3.replace(y2, function(t4, e4) {
          return e4 || l3[t4] || i3.replace(":", "");
        });
      }, m3.utcOffset = function() {
        return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);
      }, m3.diff = function(r3, d3, $3) {
        var l3, y3 = O2.p(d3), M4 = w2(r3), m4 = (M4.utcOffset() - this.utcOffset()) * e2, g3 = this - M4, v3 = O2.m(this, M4);
        return v3 = (l3 = {}, l3[c2] = v3 / 12, l3[f2] = v3, l3[h2] = v3 / 3, l3[o2] = (g3 - m4) / 6048e5, l3[a2] = (g3 - m4) / 864e5, l3[u2] = g3 / n2, l3[s2] = g3 / e2, l3[i2] = g3 / t2, l3)[y3] || g3, $3 ? v3 : O2.a(v3);
      }, m3.daysInMonth = function() {
        return this.endOf(f2).$D;
      }, m3.$locale = function() {
        return D2[this.$L];
      }, m3.locale = function(t3, e3) {
        if (!t3)
          return this.$L;
        var n3 = this.clone(), r3 = S2(t3, e3, true);
        return r3 && (n3.$L = r3), n3;
      }, m3.clone = function() {
        return O2.w(this.$d, this);
      }, m3.toDate = function() {
        return new Date(this.valueOf());
      }, m3.toJSON = function() {
        return this.isValid() ? this.toISOString() : null;
      }, m3.toISOString = function() {
        return this.$d.toISOString();
      }, m3.toString = function() {
        return this.$d.toUTCString();
      }, M3;
    }(), T2 = _2.prototype;
    return w2.prototype = T2, [["$ms", r2], ["$s", i2], ["$m", s2], ["$H", u2], ["$W", a2], ["$M", f2], ["$y", c2], ["$D", d2]].forEach(function(t3) {
      T2[t3[1]] = function(e3) {
        return this.$g(e3, t3[0], t3[1]);
      };
    }), w2.extend = function(t3, e3) {
      return t3.$i || (t3(e3, _2, w2), t3.$i = true), w2;
    }, w2.locale = S2, w2.isDayjs = p2, w2.unix = function(t3) {
      return w2(1e3 * t3);
    }, w2.en = D2[v2], w2.Ls = D2, w2.p = {}, w2;
  });
})(dayjs_min);
var dayjs = dayjs_min.exports;
var utc$1 = { exports: {} };
(function(module, exports) {
  !function(t2, i2) {
    module.exports = i2();
  }(commonjsGlobal, function() {
    var t2 = "minute", i2 = /[+-]\d\d(?::?\d\d)?/g, e2 = /([+-]|\d\d)/g;
    return function(s2, f2, n2) {
      var u2 = f2.prototype;
      n2.utc = function(t3) {
        var i3 = { date: t3, utc: true, args: arguments };
        return new f2(i3);
      }, u2.utc = function(i3) {
        var e3 = n2(this.toDate(), { locale: this.$L, utc: true });
        return i3 ? e3.add(this.utcOffset(), t2) : e3;
      }, u2.local = function() {
        return n2(this.toDate(), { locale: this.$L, utc: false });
      };
      var o2 = u2.parse;
      u2.parse = function(t3) {
        t3.utc && (this.$u = true), this.$utils().u(t3.$offset) || (this.$offset = t3.$offset), o2.call(this, t3);
      };
      var r2 = u2.init;
      u2.init = function() {
        if (this.$u) {
          var t3 = this.$d;
          this.$y = t3.getUTCFullYear(), this.$M = t3.getUTCMonth(), this.$D = t3.getUTCDate(), this.$W = t3.getUTCDay(), this.$H = t3.getUTCHours(), this.$m = t3.getUTCMinutes(), this.$s = t3.getUTCSeconds(), this.$ms = t3.getUTCMilliseconds();
        } else
          r2.call(this);
      };
      var a2 = u2.utcOffset;
      u2.utcOffset = function(s3, f3) {
        var n3 = this.$utils().u;
        if (n3(s3))
          return this.$u ? 0 : n3(this.$offset) ? a2.call(this) : this.$offset;
        if ("string" == typeof s3 && (s3 = function(t3) {
          void 0 === t3 && (t3 = "");
          var s4 = t3.match(i2);
          if (!s4)
            return null;
          var f4 = ("" + s4[0]).match(e2) || ["-", 0, 0], n4 = f4[0], u4 = 60 * +f4[1] + +f4[2];
          return 0 === u4 ? 0 : "+" === n4 ? u4 : -u4;
        }(s3), null === s3))
          return this;
        var u3 = Math.abs(s3) <= 16 ? 60 * s3 : s3, o3 = this;
        if (f3)
          return o3.$offset = u3, o3.$u = 0 === s3, o3;
        if (0 !== s3) {
          var r3 = this.$u ? this.toDate().getTimezoneOffset() : -1 * this.utcOffset();
          (o3 = this.local().add(u3 + r3, t2)).$offset = u3, o3.$x.$localOffset = r3;
        } else
          o3 = this.utc();
        return o3;
      };
      var h2 = u2.format;
      u2.format = function(t3) {
        var i3 = t3 || (this.$u ? "YYYY-MM-DDTHH:mm:ss[Z]" : "");
        return h2.call(this, i3);
      }, u2.valueOf = function() {
        var t3 = this.$utils().u(this.$offset) ? 0 : this.$offset + (this.$x.$localOffset || this.$d.getTimezoneOffset());
        return this.$d.valueOf() - 6e4 * t3;
      }, u2.isUTC = function() {
        return !!this.$u;
      }, u2.toISOString = function() {
        return this.toDate().toISOString();
      }, u2.toString = function() {
        return this.toDate().toUTCString();
      };
      var l2 = u2.toDate;
      u2.toDate = function(t3) {
        return "s" === t3 && this.$offset ? n2(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate() : l2.call(this);
      };
      var c2 = u2.diff;
      u2.diff = function(t3, i3, e3) {
        if (t3 && this.$u === t3.$u)
          return c2.call(this, t3, i3, e3);
        var s3 = this.local(), f3 = n2(t3).local();
        return c2.call(s3, f3, i3, e3);
      };
    };
  });
})(utc$1);
var utc = utc$1.exports;
var timezone$1 = { exports: {} };
(function(module, exports) {
  !function(t2, e2) {
    module.exports = e2();
  }(commonjsGlobal, function() {
    var t2 = { year: 0, month: 1, day: 2, hour: 3, minute: 4, second: 5 }, e2 = {};
    return function(n2, i2, o2) {
      var r2, a2 = function(t3, n3, i3) {
        void 0 === i3 && (i3 = {});
        var o3 = new Date(t3), r3 = function(t4, n4) {
          void 0 === n4 && (n4 = {});
          var i4 = n4.timeZoneName || "short", o4 = t4 + "|" + i4, r4 = e2[o4];
          return r4 || (r4 = new Intl.DateTimeFormat("en-US", { hour12: false, timeZone: t4, year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit", timeZoneName: i4 }), e2[o4] = r4), r4;
        }(n3, i3);
        return r3.formatToParts(o3);
      }, u2 = function(e3, n3) {
        for (var i3 = a2(e3, n3), r3 = [], u3 = 0; u3 < i3.length; u3 += 1) {
          var f3 = i3[u3], s3 = f3.type, m2 = f3.value, c2 = t2[s3];
          c2 >= 0 && (r3[c2] = parseInt(m2, 10));
        }
        var d2 = r3[3], l2 = 24 === d2 ? 0 : d2, v2 = r3[0] + "-" + r3[1] + "-" + r3[2] + " " + l2 + ":" + r3[4] + ":" + r3[5] + ":000", h2 = +e3;
        return (o2.utc(v2).valueOf() - (h2 -= h2 % 1e3)) / 6e4;
      }, f2 = i2.prototype;
      f2.tz = function(t3, e3) {
        void 0 === t3 && (t3 = r2);
        var n3 = this.utcOffset(), i3 = this.toDate(), a3 = i3.toLocaleString("en-US", { timeZone: t3 }), u3 = Math.round((i3 - new Date(a3)) / 1e3 / 60), f3 = o2(a3).$set("millisecond", this.$ms).utcOffset(15 * -Math.round(i3.getTimezoneOffset() / 15) - u3, true);
        if (e3) {
          var s3 = f3.utcOffset();
          f3 = f3.add(n3 - s3, "minute");
        }
        return f3.$x.$timezone = t3, f3;
      }, f2.offsetName = function(t3) {
        var e3 = this.$x.$timezone || o2.tz.guess(), n3 = a2(this.valueOf(), e3, { timeZoneName: t3 }).find(function(t4) {
          return "timezonename" === t4.type.toLowerCase();
        });
        return n3 && n3.value;
      };
      var s2 = f2.startOf;
      f2.startOf = function(t3, e3) {
        if (!this.$x || !this.$x.$timezone)
          return s2.call(this, t3, e3);
        var n3 = o2(this.format("YYYY-MM-DD HH:mm:ss:SSS"));
        return s2.call(n3, t3, e3).tz(this.$x.$timezone, true);
      }, o2.tz = function(t3, e3, n3) {
        var i3 = n3 && e3, a3 = n3 || e3 || r2, f3 = u2(+o2(), a3);
        if ("string" != typeof t3)
          return o2(t3).tz(a3);
        var s3 = function(t4, e4, n4) {
          var i4 = t4 - 60 * e4 * 1e3, o3 = u2(i4, n4);
          if (e4 === o3)
            return [i4, e4];
          var r3 = u2(i4 -= 60 * (o3 - e4) * 1e3, n4);
          return o3 === r3 ? [i4, o3] : [t4 - 60 * Math.min(o3, r3) * 1e3, Math.max(o3, r3)];
        }(o2.utc(t3, i3).valueOf(), f3, a3), m2 = s3[0], c2 = s3[1], d2 = o2(m2).utcOffset(c2);
        return d2.$x.$timezone = a3, d2;
      }, o2.tz.guess = function() {
        return Intl.DateTimeFormat().resolvedOptions().timeZone;
      }, o2.tz.setDefault = function(t3) {
        r2 = t3;
      };
    };
  });
})(timezone$1);
var timezone = timezone$1.exports;
const _hoisted_1$3 = { class: "w-full h-9 mt-[15px] flex items-center" };
const _sfc_main$3 = /* @__PURE__ */ defineComponent({
  __name: "BlogItemInfo",
  props: {
    page: null
  },
  setup(__props) {
    const props = __props;
    dayjs.extend(utc);
    dayjs.extend(timezone);
    const themeData2 = useThemeData();
    const author = computed(() => props.page.frontmatter.author || themeData2.value.author);
    const formatDateValue = (value) => {
      return value ? dayjs.tz(value, "Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss") : "";
    };
    const timeAndWord = computed(() => {
      const { minutes, words } = props.page.readingTime;
      if (minutes && words) {
        if (minutes < 1) {
          return { minutes: "\u5C11\u4E8E1\u5206\u949F", words: `${words}\u5B57` };
        } else {
          return { minutes: `\u5927\u7EA6${Math.floor(minutes)}\u5206\u949F`, words: `${words}\u5B57` };
        }
      } else {
        return { minutes: void 0, words: void 0 };
      }
    });
    return (_ctx, _cache) => {
      const _component_Icon = resolveComponent("Icon");
      return openBlock(), createElementBlock("div", _hoisted_1$3, [
        unref(author) ? (openBlock(), createBlock(_component_Icon, {
          key: 0,
          icon: "UserOutlined",
          text: unref(author),
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, 8, ["text"])) : createCommentVNode("", true),
        formatDateValue(__props.page.frontmatter.date) ? (openBlock(), createBlock(_component_Icon, {
          key: 1,
          icon: "FieldTimeOutlined",
          text: formatDateValue(__props.page.frontmatter.date),
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, 8, ["text"])) : createCommentVNode("", true),
        __props.page.frontmatter.categories ? (openBlock(), createBlock(_component_Icon, {
          key: 2,
          icon: "AppstoreOutlined",
          text: __props.page.frontmatter.categories,
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, 8, ["text"])) : createCommentVNode("", true),
        __props.page.frontmatter.tags ? (openBlock(), createBlock(_component_Icon, {
          key: 3,
          icon: "TagsOutlined",
          text: __props.page.frontmatter.tags,
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, 8, ["text"])) : createCommentVNode("", true),
        unref(timeAndWord).words ? (openBlock(), createBlock(_component_Icon, {
          key: 4,
          icon: "ReadOutlined",
          text: unref(timeAndWord).words,
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, 8, ["text"])) : createCommentVNode("", true),
        unref(timeAndWord).minutes ? (openBlock(), createBlock(_component_Icon, {
          key: 5,
          icon: "HourglassOutlined",
          text: unref(timeAndWord).minutes,
          class: "text-[#7F7F7F] text-[13px] mr-[1rem]"
        }, null, 8, ["text"])) : createCommentVNode("", true)
      ]);
    };
  }
});
var BlogItemInfo = /* @__PURE__ */ _export_sfc(_sfc_main$3, [["__file", "BlogItemInfo.vue"]]);
var BlogItem_vue_vue_type_style_index_0_scoped_true_lang = "";
const _hoisted_1$2 = {
  key: 0,
  class: "left-box flex mt-[15px] items-center"
};
const _hoisted_2$2 = { class: "img h-[200px] rounded-[8px] overflow-hidden flex-[0_0_50%]" };
const _hoisted_3 = ["src"];
const _hoisted_4 = { class: "content flex-1 pl-[40px] flex flex-wrap m-0 px-[0.2rem] overflow-hidden" };
const _hoisted_5 = { class: "title w-full text-[1.28rem]" };
const _hoisted_6 = ["innerHTML"];
const _hoisted_7 = {
  key: 1,
  class: "right-box flex mt-[15px] items-center"
};
const _hoisted_8 = { class: "content flex-1 pr-[40px] flex flex-wrap m-0 px-[0.2rem] overflow-hidden" };
const _hoisted_9 = { class: "title w-full text-[1.28rem]" };
const _hoisted_10 = ["innerHTML"];
const _hoisted_11 = { class: "img h-[200px] rounded-[8px] overflow-hidden flex-[0_0_50%] mr-[1rem]" };
const _hoisted_12 = ["src"];
const _hoisted_13 = { class: "toTop absolute top-[10px] right-[10px] z-0" };
const _sfc_main$2 = /* @__PURE__ */ defineComponent({
  __name: "BlogItem",
  props: {
    page: null,
    position: null
  },
  setup(__props) {
    return (_ctx, _cache) => {
      const _component_router_link = resolveComponent("router-link");
      const _component_Icon = resolveComponent("Icon");
      return openBlock(), createElementBlock("div", {
        class: "blog-item relative w-full h-[300px] py-[16px] px-[20px] rounded dark:bg-[#181818] bg-[#fff] shadow-box mb-[20px] cursor-pointer box-border",
        onClick: _cache[0] || (_cache[0] = withModifiers(($event) => _ctx.$router.push(__props.page.path), ["stop"]))
      }, [
        __props.position == "left" ? (openBlock(), createElementBlock("div", _hoisted_1$2, [
          createBaseVNode("div", _hoisted_2$2, [
            createBaseVNode("img", {
              src: __props.page.frontmatter.image ? __props.page.frontmatter.image : unref(withBase)("/images/index/bg1.jpg"),
              class: "w-full h-full scale-100 transition-transform duration-[.6s]"
            }, null, 8, _hoisted_3)
          ]),
          createBaseVNode("div", _hoisted_4, [
            createBaseVNode("div", _hoisted_5, [
              createVNode(_component_router_link, {
                to: __props.page.path,
                class: "font-bold text-[color:var(--text-color)] truncate block",
                title: __props.page.title
              }, {
                default: withCtx(() => [
                  createTextVNode(toDisplayString(__props.page.title), 1)
                ]),
                _: 1
              }, 8, ["to", "title"])
            ]),
            createBaseVNode("div", {
              class: "abstract w-full h-[180px] font-normal indent-6",
              innerHTML: __props.page.excerpt
            }, null, 8, _hoisted_6)
          ])
        ])) : (openBlock(), createElementBlock("div", _hoisted_7, [
          createBaseVNode("div", _hoisted_8, [
            createBaseVNode("div", _hoisted_9, [
              createVNode(_component_router_link, {
                to: __props.page.path,
                class: "font-bold text-[color:var(--text-color)] truncate block",
                title: __props.page.title
              }, {
                default: withCtx(() => [
                  createTextVNode(toDisplayString(__props.page.title), 1)
                ]),
                _: 1
              }, 8, ["to", "title"])
            ]),
            createBaseVNode("div", {
              class: "abstract w-full h-[180px] font-normal indent-6",
              innerHTML: __props.page.excerpt
            }, null, 8, _hoisted_10)
          ]),
          createBaseVNode("div", _hoisted_11, [
            createBaseVNode("img", {
              src: __props.page.frontmatter.image ? __props.page.frontmatter.image : unref(withBase)("/images/index/bg1.jpg"),
              class: "w-full h-full scale-100 transition-transform duration-[.6s]"
            }, null, 8, _hoisted_12)
          ])
        ])),
        createBaseVNode("div", _hoisted_13, [
          createVNode(_component_Icon, {
            icon: "VerticalAlignTopOutlined",
            iconSize: 28,
            iconColor: "#fff"
          })
        ]),
        createVNode(BlogItemInfo, { page: __props.page }, null, 8, ["page"])
      ]);
    };
  }
});
var BlogItem = /* @__PURE__ */ _export_sfc(_sfc_main$2, [["__scopeId", "data-v-76e066a0"], ["__file", "BlogItem.vue"]]);
const usePostData = () => {
  const posts = [{ "data": { "key": "v-8daa1a0e", "path": "/", "title": "", "lang": "zh-CN", "frontmatter": { "home": true, "heroText": ["\u5B66\u800C\u65F6\u4E60\u4E4B\uFF0C\u4E0D\u4EA6\u8BF4\u4E4E?^1000", "\u5B66\u4E60\u8981\u6709\u4E09\u5FC3\uFF0C\u4E00\u4FE1\u5FC3\uFF0C\u4E8C\u51B3\u5FC3\uFF0C\u4E09\u6052\u5FC3"], "tagline": "\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77.", "bgImage": ["https://pic.netbian.com/uploads/allimg/220304/001005-16463238059274.jpg", "https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg", "https://pic.netbian.com/uploads/allimg/220507/092102-165188646268bd.jpg"], "bgImageSec": 1e4, "isBgImagetrigger": true, "needDefaultImages": true, "bgImageStyle": { "height": "550px", "color": "#fff" }, "showArrow": true, "summary": "", "hobby": ["\u6E38\u6CF3", "\u6ED1\u96EA", "\u4E52\u4E53\u7403", "\u770B\u5C0F\u8BF4", "\u7F16\u7A0B", "\u65C5\u6E38", "\u770B\u7535\u89C6"], "bubbles": true, "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:type", "content": "website" }], ["meta", { "property": "og:updated_time", "content": "2022-08-20T05:06:28.000Z" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "article:modified_time", "content": "2022-08-20T05:06:28.000Z" }]] }, "excerpt": "", "headers": [], "git": { "updatedTime": 1660971988e3, "contributors": [{ "name": "anyfork", "email": "874957743@qq.com", "commits": 1 }] }, "filePathRelative": "README.md", "readingTime": { "minutes": 0.93, "words": 279 }, "copyright": "\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709\n\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/" }, "key": "v-8daa1a0e", "path": "/", "title": "", "lang": "zh-CN", "frontmatter": { "home": true, "heroText": ["\u5B66\u800C\u65F6\u4E60\u4E4B\uFF0C\u4E0D\u4EA6\u8BF4\u4E4E?^1000", "\u5B66\u4E60\u8981\u6709\u4E09\u5FC3\uFF0C\u4E00\u4FE1\u5FC3\uFF0C\u4E8C\u51B3\u5FC3\uFF0C\u4E09\u6052\u5FC3"], "tagline": "\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77.", "bgImage": ["https://pic.netbian.com/uploads/allimg/220304/001005-16463238059274.jpg", "https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg", "https://pic.netbian.com/uploads/allimg/220507/092102-165188646268bd.jpg"], "bgImageSec": 1e4, "isBgImagetrigger": true, "needDefaultImages": true, "bgImageStyle": { "height": "550px", "color": "#fff" }, "showArrow": true, "summary": "", "hobby": ["\u6E38\u6CF3", "\u6ED1\u96EA", "\u4E52\u4E53\u7403", "\u770B\u5C0F\u8BF4", "\u7F16\u7A0B", "\u65C5\u6E38", "\u770B\u7535\u89C6"], "bubbles": true, "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:type", "content": "website" }], ["meta", { "property": "og:updated_time", "content": "2022-08-20T05:06:28.000Z" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "article:modified_time", "content": "2022-08-20T05:06:28.000Z" }]] }, "excerpt": "", "headers": [], "content": "---\nhome: true\n#\u4E3B\u6807\u9898\u6587\u672C\uFF0C\u4E3A\u6570\u7EC4\u65F6\u4F1A\u4F7F\u7528\u6253\u5370\u673A\u6253\u5370\u529F\u80FD\uFF0C\u975E\u6570\u7EC4\u9759\u6001\u6587\u672C\nheroText:\n  - \u5B66\u800C\u65F6\u4E60\u4E4B\uFF0C\u4E0D\u4EA6\u8BF4\u4E4E?^1000\n  - \u5B66\u4E60\u8981\u6709\u4E09\u5FC3\uFF0C\u4E00\u4FE1\u5FC3\uFF0C\u4E8C\u51B3\u5FC3\uFF0C\u4E09\u6052\u5FC3\n#\u526F\u6807\u9898\ntagline: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77.\n#\u80CC\u666F\u56FE\u7247\uFF0C\u53EF\u4EE5\u4E3A\u6570\u7EC4,\u53EF\u4EE5\u4E3A\u8FDC\u7A0B\u80CC\u666F\u56FE\u7247\uFF0C\u56FE\u7247\u8D44\u6E90\u7F51\uFF1Ahttps://pic.netbian.com/4kmeinv/\nbgImage:\n  - https://pic.netbian.com/uploads/allimg/220304/001005-16463238059274.jpg\n  - https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg\n  - https://pic.netbian.com/uploads/allimg/220507/092102-165188646268bd.jpg\n#\u80CC\u666F\u56FE\u7247\u5207\u6362\u65F6\u95F4\u95F4\u9694\uFF1A\u9ED8\u8BA44\u79D2\uFF0C\u5355\u4F4D\u6BEB\u79D2\nbgImageSec: 10000\n#\u80CC\u666F\u56FE\u7247\u662F\u5426\u52A8\u6001\u5207\u6362,\u9ED8\u8BA4true\uFF0Cfalse\u6BCF\u6B21\u5237\u65B0\u4F1A\u66F4\u6362\u56FE\u7247\nisBgImagetrigger: true\n#\u662F\u5426\u4F7F\u7528\u7CFB\u7EDF\u9ED8\u8BA4\u7684\u80CC\u666F\u56FE\u7247\uFF0C\u9ED8\u8BA4true,\u5F00\u542F\u540E\u4F1A\u548C\u81EA\u5B9A\u4E49\u7684\u80CC\u666F\u56FE\u7247\u4E00\u8D77\u4F7F\u7528\nneedDefaultImages: true\n#\u80CC\u666F\u56FE\u7247\u6837\u5F0F\nbgImageStyle: { height: '550px', color: '#fff' }\n#\u662F\u5426\u5C55\u793A\u7BAD\u5934\nshowArrow: true\n#\u4E2A\u4EBA\u6458\u8981\nsummary: \u52A0\u6CB9,\u4E3A\u66F4\u7F8E\u597D\u7684\u660E\u5929\u800C\u6218!\n#\u5174\u8DA3\u7231\u597D\nhobby:\n  - \u6E38\u6CF3\n  - \u6ED1\u96EA\n  - \u4E52\u4E53\u7403\n  - \u770B\u5C0F\u8BF4\n  - \u7F16\u7A0B\n  - \u65C5\u6E38\n  - \u770B\u7535\u89C6\n# \u662F\u5426\u663E\u793A\u9996\u9875\u6C14\u6CE1\nbubbles: true\n---\n", "contentRendered": "", "date": "0000-00-00", "deps": [], "links": [], "pathInferred": "/", "pathLocale": "/", "permalink": null, "routeMeta": { "title": "" }, "sfcBlocks": [], "slug": "README", "filePath": "/home/runner/work/blog-docs/blog-docs/docs/README.md", "filePathRelative": "README.md", "componentFilePath": "/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/index.html.vue", "componentFilePathRelative": "pages/index.html.vue", "componentFileChunkName": "v-8daa1a0e", "dataFilePath": "/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/index.html.js", "dataFilePathRelative": "pages/index.html.js", "dataFileChunkName": "v-8daa1a0e", "htmlFilePath": "/home/runner/work/blog-docs/blog-docs/dist/index.html", "htmlFilePathRelative": "index.html" }, { "data": { "key": "v-d5fe0c96", "path": "/design-pattern/", "title": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F", "lang": "zh-CN", "frontmatter": { "title": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F", "description": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava", "date": "2022-08-19T21:55:00.000Z", "sidebar": "auto", "tags": "\u8BBE\u8BA1\u6A21\u5F0F", "categories": "java", "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/design-pattern/" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:title", "content": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F" }], ["meta", { "property": "og:description", "content": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava" }], ["meta", { "property": "og:type", "content": "article" }], ["meta", { "property": "og:updated_time", "content": "2022-08-20T05:06:28.000Z" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "article:published_time", "content": "2022-08-19T21:55:00.000Z" }], ["meta", { "property": "article:modified_time", "content": "2022-08-20T05:06:28.000Z" }]] }, "excerpt": "<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>\n", "headers": [{ "level": 1, "title": "1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0", "slug": "_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0", "children": [{ "level": 2, "title": "1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F", "slug": "_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F", "children": [] }, { "level": 2, "title": "1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5", "slug": "_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5", "children": [] }, { "level": 2, "title": "1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027", "slug": "_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027", "children": [] }, { "level": 2, "title": "1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B", "slug": "_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B", "children": [] }] }, { "level": 1, "title": "2\uFF0CUML \u56FE", "slug": "_2-uml-\u56FE", "children": [{ "level": 2, "title": "2.1 \u7C7B\u56FE\u6982\u8FF0", "slug": "_2-1-\u7C7B\u56FE\u6982\u8FF0", "children": [] }, { "level": 2, "title": "2.2 \u7C7B\u56FE\u7684\u4F5C\u7528", "slug": "_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528", "children": [] }, { "level": 2, "title": "2.3 \u7C7B\u56FE\u8868\u793A\u6CD5", "slug": "_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5", "children": [{ "level": 3, "title": "2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F", "slug": "_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F", "children": [] }, { "level": 3, "title": "2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F", "slug": "_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F", "children": [{ "level": 4, "title": "2.3.2.1 \u5173\u8054\u5173\u7CFB", "slug": "_2-3-2-1-\u5173\u8054\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.2 \u805A\u5408\u5173\u7CFB", "slug": "_2-3-2-2-\u805A\u5408\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.3 \u7EC4\u5408\u5173\u7CFB", "slug": "_2-3-2-3-\u7EC4\u5408\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.4 \u4F9D\u8D56\u5173\u7CFB", "slug": "_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.5 \u7EE7\u627F\u5173\u7CFB", "slug": "_2-3-2-5-\u7EE7\u627F\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.6 \u5B9E\u73B0\u5173\u7CFB", "slug": "_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB", "children": [] }] }] }] }, { "level": 1, "title": "3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219", "slug": "_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219", "children": [{ "level": 2, "title": "3.1 \u5F00\u95ED\u539F\u5219", "slug": "_3-1-\u5F00\u95ED\u539F\u5219", "children": [] }, { "level": 2, "title": "3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219", "slug": "_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219", "children": [] }, { "level": 2, "title": "3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219", "slug": "_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219", "children": [] }, { "level": 2, "title": "3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219", "slug": "_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219", "children": [] }, { "level": 2, "title": "3.5 \u8FEA\u7C73\u7279\u6CD5\u5219", "slug": "_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219", "children": [] }, { "level": 2, "title": "3.6 \u5408\u6210\u590D\u7528\u539F\u5219", "slug": "_3-6-\u5408\u6210\u590D\u7528\u539F\u5219", "children": [] }] }, { "level": 1, "title": "4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F", "slug": "_4-\u521B\u5EFA\u8005\u6A21\u5F0F", "children": [{ "level": 2, "title": "4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F", "slug": "_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784", "slug": "_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0", "slug": "_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898", "slug": "_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898", "children": [{ "level": 4, "title": "4.1.3.1 \u95EE\u9898\u6F14\u793A", "slug": "_4-1-3-1-\u95EE\u9898\u6F14\u793A", "children": [] }, { "level": 4, "title": "4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3", "slug": "_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3", "children": [] }] }, { "level": 3, "title": "4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B", "slug": "_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B", "children": [] }] }, { "level": 2, "title": "4.2 \u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.2.1 \u6982\u8FF0", "slug": "_4-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.2.1 \u7ED3\u6784", "slug": "_4-2-2-1-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.2.2 \u5B9E\u73B0", "slug": "_4-2-2-2-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.2.4 \u4F18\u7F3A\u70B9", "slug": "_4-2-2-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 4, "title": "4.2.2.3 \u6269\u5C55", "slug": "_4-2-2-3-\u6269\u5C55", "children": [] }] }, { "level": 3, "title": "4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F", "slug": "_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.3.1 \u6982\u5FF5", "slug": "_4-2-3-1-\u6982\u5FF5", "children": [] }, { "level": 4, "title": "4.2.3.2 \u7ED3\u6784", "slug": "_4-2-3-2-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.3.3 \u5B9E\u73B0", "slug": "_4-2-3-3-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.3.4 \u4F18\u7F3A\u70B9", "slug": "_4-2-3-4-\u4F18\u7F3A\u70B9", "children": [] }] }, { "level": 3, "title": "4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.4.1 \u6982\u5FF5", "slug": "_4-2-4-1-\u6982\u5FF5", "children": [] }, { "level": 4, "title": "4.2.4.2 \u7ED3\u6784", "slug": "_4-2-4-2-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.4.2 \u5B9E\u73B0", "slug": "_4-2-4-2-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.4.3 \u4F18\u7F3A\u70B9", "slug": "_4-2-4-3-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 4, "title": "4.2.4.4 \u4F7F\u7528\u573A\u666F", "slug": "_4-2-4-4-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 3, "title": "4.2.5 \u6A21\u5F0F\u6269\u5C55", "slug": "_4-2-5-\u6A21\u5F0F\u6269\u5C55", "children": [] }, { "level": 3, "title": "4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5", "slug": "_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5", "children": [] }] }, { "level": 2, "title": "4.3 \u539F\u578B\u6A21\u5F0F", "slug": "_4-3-\u539F\u578B\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.3.1 \u6982\u8FF0", "slug": "_4-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.3.2 \u7ED3\u6784", "slug": "_4-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.3.3 \u5B9E\u73B0", "slug": "_4-3-3-\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "4.3.4 \u6848\u4F8B", "slug": "_4-3-4-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "4.3.5 \u4F7F\u7528\u573A\u666F", "slug": "_4-3-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09", "slug": "_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686", "children": [] }] }, { "level": 2, "title": "4.5 \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.4.1 \u6982\u8FF0", "slug": "_4-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.4.2 \u7ED3\u6784", "slug": "_4-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.4.3 \u5B9E\u4F8B", "slug": "_4-4-3-\u5B9E\u4F8B", "children": [] }, { "level": 3, "title": "4.4.4 \u4F18\u7F3A\u70B9", "slug": "_4-4-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "4.4.5 \u4F7F\u7528\u573A\u666F", "slug": "_4-4-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "4.4.6 \u6A21\u5F0F\u6269\u5C55", "slug": "_4-4-6-\u6A21\u5F0F\u6269\u5C55", "children": [] }] }, { "level": 2, "title": "4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4", "slug": "_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4", "children": [{ "level": 3, "title": "4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [] }] }] }, { "level": 1, "title": "5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F", "slug": "_5-\u7ED3\u6784\u578B\u6A21\u5F0F", "children": [{ "level": 2, "title": "5.1 \u4EE3\u7406\u6A21\u5F0F", "slug": "_5-1-\u4EE3\u7406\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.1.1 \u6982\u8FF0", "slug": "_5-1-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.1.2 \u7ED3\u6784", "slug": "_5-1-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.1.3 \u9759\u6001\u4EE3\u7406", "slug": "_5-1-3-\u9759\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.4 JDK \u52A8\u6001\u4EE3\u7406", "slug": "_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406", "slug": "_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4", "slug": "_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4", "children": [] }, { "level": 3, "title": "5.1.7 \u4F18\u7F3A\u70B9", "slug": "_5-1-7-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "5.1.8 \u4F7F\u7528\u573A\u666F", "slug": "_5-1-8-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.2 \u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-\u9002\u914D\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.2.1 \u6982\u8FF0", "slug": "_5-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.2.2 \u7ED3\u6784", "slug": "_5-2-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "5.2.5 \u5E94\u7528\u573A\u666F", "slug": "_5-2-5-\u5E94\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.2.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-2-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "5.3 \u88C5\u9970\u8005\u6A21\u5F0F", "slug": "_5-3-\u88C5\u9970\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.3.1 \u6982\u8FF0", "slug": "_5-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.3.2 \u7ED3\u6784", "slug": "_5-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.3.3 \u6848\u4F8B", "slug": "_5-3-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.3.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-3-4-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.3.5 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-3-5-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }, { "level": 3, "title": "5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B", "slug": "_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B", "children": [] }] }, { "level": 2, "title": "5.4 \u6865\u63A5\u6A21\u5F0F", "slug": "_5-4-\u6865\u63A5\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.4.1 \u6982\u8FF0", "slug": "_5-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.4.2 \u7ED3\u6784", "slug": "_5-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.4.3 \u6848\u4F8B", "slug": "_5-4-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.4.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-4-4-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.5 \u5916\u89C2\u6A21\u5F0F", "slug": "_5-5-\u5916\u89C2\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.5.1 \u6982\u8FF0", "slug": "_5-5-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.5.2 \u7ED3\u6784", "slug": "_5-5-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.5.3 \u6848\u4F8B", "slug": "_5-5-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.5.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-5-4-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.5.5 \u6E90\u7801\u89E3\u6790", "slug": "_5-5-5-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "5.6 \u7EC4\u5408\u6A21\u5F0F", "slug": "_5-6-\u7EC4\u5408\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.6.1 \u6982\u8FF0", "slug": "_5-6-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.6.2 \u7ED3\u6784", "slug": "_5-6-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.6.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_5-6-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B", "slug": "_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B", "children": [] }, { "level": 3, "title": "5.6.5 \u4F18\u70B9", "slug": "_5-6-5-\u4F18\u70B9", "children": [] }, { "level": 3, "title": "5.6.6 \u4F7F\u7528\u573A\u666F", "slug": "_5-6-6-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.7 \u4EAB\u5143\u6A21\u5F0F", "slug": "_5-7-\u4EAB\u5143\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.7.1 \u6982\u8FF0", "slug": "_5-7-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.7.2 \u7ED3\u6784", "slug": "_5-7-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.7.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_5-7-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F", "slug": "_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.7.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-7-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }] }, { "level": 1, "title": "6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F", "slug": "_6-\u884C\u4E3A\u578B\u6A21\u5F0F", "children": [{ "level": 2, "title": "6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F", "slug": "_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.1.1 \u6982\u8FF0", "slug": "_6-1-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.1.2 \u7ED3\u6784", "slug": "_6-1-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.1.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-1-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.1.3 \u4F18\u7F3A\u70B9", "slug": "_6-1-3-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.1.4 \u9002\u7528\u573A\u666F", "slug": "_6-1-4-\u9002\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.1.5 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-1-5-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.2 \u7B56\u7565\u6A21\u5F0F", "slug": "_6-2-\u7B56\u7565\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.2.1 \u6982\u8FF0", "slug": "_6-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.2.2 \u7ED3\u6784", "slug": "_6-2-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.2.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-2-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.2.4 \u4F18\u7F3A\u70B9", "slug": "_6-2-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.2.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-2-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.2.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-2-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.3 \u547D\u4EE4\u6A21\u5F0F", "slug": "_6-3-\u547D\u4EE4\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.3.1 \u6982\u8FF0", "slug": "_6-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.3.2 \u7ED3\u6784", "slug": "_6-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.3.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-3-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.3.4 \u4F18\u7F3A\u70B9", "slug": "_6-3-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.3.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-3-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.3.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-3-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F", "slug": "_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.4.1 \u6982\u8FF0", "slug": "_6-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.4.2 \u7ED3\u6784", "slug": "_6-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.4.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-4-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.4.4 \u4F18\u7F3A\u70B9", "slug": "_6-4-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.4.5 \u6E90\u7801\u89E3\u6790", "slug": "_6-4-5-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.5 \u72B6\u6001\u6A21\u5F0F", "slug": "_6-5-\u72B6\u6001\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.5.1 \u6982\u8FF0", "slug": "_6-5-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.5.2 \u7ED3\u6784", "slug": "_6-5-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.5.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-5-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.5.4 \u4F18\u7F3A\u70B9", "slug": "_6-5-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.5.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-5-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F", "slug": "_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.6.1 \u6982\u8FF0", "slug": "_6-6-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.6.2 \u7ED3\u6784", "slug": "_6-6-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.6.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-6-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.6.4 \u4F18\u7F3A\u70B9", "slug": "_6-6-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.6.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-6-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0", "slug": "_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0", "children": [] }] }, { "level": 2, "title": "6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F", "slug": "_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.7.1 \u6982\u8FF0", "slug": "_6-7-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.7.2 \u7ED3\u6784", "slug": "_6-7-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.7.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-7-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.7.4 \u4F18\u7F3A\u70B9", "slug": "_6-7-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.7.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-7-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F", "slug": "_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.8.1 \u6982\u8FF0", "slug": "_6-8-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.8.2 \u7ED3\u6784", "slug": "_6-8-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.8.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-8-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.8.4 \u4F18\u7F3A\u70B9", "slug": "_6-8-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.8.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-8-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.8.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-8-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F", "slug": "_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.9.1 \u6982\u8FF0", "slug": "_6-9-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.9.2 \u7ED3\u6784", "slug": "_6-9-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.9.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-9-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.9.4 \u4F18\u7F3A\u70B9", "slug": "_6-9-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.9.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-9-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.9.6 \u6269\u5C55", "slug": "_6-9-6-\u6269\u5C55", "children": [] }] }, { "level": 2, "title": "6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.10.1 \u6982\u8FF0", "slug": "_6-10-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.10.2 \u7ED3\u6784", "slug": "_6-10-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.10.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-10-3-\u6848\u4F8B\u5B9E\u73B0", "children": [{ "level": 4, "title": "6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [] }, { "level": 4, "title": "6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [] }] }, { "level": 3, "title": "6.10.4 \u4F18\u7F3A\u70B9", "slug": "_6-10-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.10.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-10-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.11 \u89E3\u91CA\u5668\u6A21\u5F0F", "slug": "_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.11.1 \u6982\u8FF0", "slug": "_6-11-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.11.2 \u7ED3\u6784", "slug": "_6-11-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.11.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-11-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.11.4 \u4F18\u7F3A\u70B9", "slug": "_6-11-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.11.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-11-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }] }, { "level": 1, "title": "7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6", "slug": "_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6", "children": [{ "level": 2, "title": "7.1 spring \u4F7F\u7528\u56DE\u987E", "slug": "_7-1-spring-\u4F7F\u7528\u56DE\u987E", "children": [] }, { "level": 2, "title": "7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784", "slug": "_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784", "children": [{ "level": 3, "title": "7.1.1 bean \u6982\u8FF0", "slug": "_7-1-1-bean-\u6982\u8FF0", "children": [] }] }, { "level": 2, "title": "7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790", "slug": "_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790", "children": [{ "level": 3, "title": "7.3.1 BeanFactory \u89E3\u6790", "slug": "_7-3-1-beanfactory-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.2 BeanDefinition \u89E3\u6790", "slug": "_7-3-2-beandefinition-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.3 BeanDefinitionReader \u89E3\u6790", "slug": "_7-3-3-beandefinitionreader-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.4 BeanDefinitionRegistry \u89E3\u6790", "slug": "_7-3-4-beandefinitionregistry-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.5 \u521B\u5EFA\u5BB9\u5668", "slug": "_7-3-5-\u521B\u5EFA\u5BB9\u5668", "children": [] }] }, { "level": 2, "title": "7.4 \u81EA\u5B9A\u4E49 SpringIOC", "slug": "_7-4-\u81EA\u5B9A\u4E49-springioc", "children": [{ "level": 3, "title": "7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B", "slug": "_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B", "children": [{ "level": 4, "title": "7.4.1.1 PropertyValue \u7C7B", "slug": "_7-4-1-1-propertyvalue-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.1.2 MutablePropertyValues \u7C7B", "slug": "_7-4-1-2-mutablepropertyvalues-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.1.3 BeanDefinition \u7C7B", "slug": "_7-4-1-3-beandefinition-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B", "slug": "_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3", "slug": "_7-4-2-1-beandefinitionregistry-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B", "slug": "_7-4-2-2-simplebeandefinitionregistry-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B", "slug": "_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.3.1 BeanDefinitionReader \u63A5\u53E3", "slug": "_7-4-3-1-beandefinitionreader-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.3.2 XmlBeanDefinitionReader \u7C7B", "slug": "_7-4-3-2-xmlbeandefinitionreader-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B", "slug": "_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.4.1 BeanFactory \u63A5\u53E3", "slug": "_7-4-4-1-beanfactory-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.4.2 ApplicationContext \u63A5\u53E3", "slug": "_7-4-4-2-applicationcontext-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.4.3 AbstractApplicationContext \u7C7B", "slug": "_7-4-4-3-abstractapplicationcontext-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.4.4 ClassPathXmlApplicationContext \u7C7B", "slug": "_7-4-4-4-classpathxmlapplicationcontext-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3", "slug": "_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3", "children": [{ "level": 4, "title": "7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F", "slug": "_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F", "children": [] }, { "level": 4, "title": "7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219", "slug": "_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219", "children": [] }, { "level": 4, "title": "7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165", "slug": "_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165", "children": [] }] }] }] }], "git": { "updatedTime": 1660971988e3, "contributors": [{ "name": "anyfork", "email": "874957743@qq.com", "commits": 1 }] }, "filePathRelative": "design-pattern/README.md", "readingTime": { "minutes": 164.66, "words": 49399 }, "copyright": "\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709\n\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/design-pattern/" }, "key": "v-d5fe0c96", "path": "/design-pattern/", "title": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F", "lang": "zh-CN", "frontmatter": { "title": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F", "description": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava", "date": "2022-08-19T21:55:00.000Z", "sidebar": "auto", "tags": "\u8BBE\u8BA1\u6A21\u5F0F", "categories": "java", "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/design-pattern/" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:title", "content": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F" }], ["meta", { "property": "og:description", "content": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava" }], ["meta", { "property": "og:type", "content": "article" }], ["meta", { "property": "og:updated_time", "content": "2022-08-20T05:06:28.000Z" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "article:published_time", "content": "2022-08-19T21:55:00.000Z" }], ["meta", { "property": "article:modified_time", "content": "2022-08-20T05:06:28.000Z" }]] }, "excerpt": "<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>\n", "headers": [{ "level": 1, "title": "1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0", "slug": "_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0", "children": [{ "level": 2, "title": "1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F", "slug": "_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F", "children": [] }, { "level": 2, "title": "1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5", "slug": "_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5", "children": [] }, { "level": 2, "title": "1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027", "slug": "_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027", "children": [] }, { "level": 2, "title": "1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B", "slug": "_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B", "children": [] }] }, { "level": 1, "title": "2\uFF0CUML \u56FE", "slug": "_2-uml-\u56FE", "children": [{ "level": 2, "title": "2.1 \u7C7B\u56FE\u6982\u8FF0", "slug": "_2-1-\u7C7B\u56FE\u6982\u8FF0", "children": [] }, { "level": 2, "title": "2.2 \u7C7B\u56FE\u7684\u4F5C\u7528", "slug": "_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528", "children": [] }, { "level": 2, "title": "2.3 \u7C7B\u56FE\u8868\u793A\u6CD5", "slug": "_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5", "children": [{ "level": 3, "title": "2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F", "slug": "_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F", "children": [] }, { "level": 3, "title": "2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F", "slug": "_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F", "children": [{ "level": 4, "title": "2.3.2.1 \u5173\u8054\u5173\u7CFB", "slug": "_2-3-2-1-\u5173\u8054\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.2 \u805A\u5408\u5173\u7CFB", "slug": "_2-3-2-2-\u805A\u5408\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.3 \u7EC4\u5408\u5173\u7CFB", "slug": "_2-3-2-3-\u7EC4\u5408\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.4 \u4F9D\u8D56\u5173\u7CFB", "slug": "_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.5 \u7EE7\u627F\u5173\u7CFB", "slug": "_2-3-2-5-\u7EE7\u627F\u5173\u7CFB", "children": [] }, { "level": 4, "title": "2.3.2.6 \u5B9E\u73B0\u5173\u7CFB", "slug": "_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB", "children": [] }] }] }] }, { "level": 1, "title": "3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219", "slug": "_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219", "children": [{ "level": 2, "title": "3.1 \u5F00\u95ED\u539F\u5219", "slug": "_3-1-\u5F00\u95ED\u539F\u5219", "children": [] }, { "level": 2, "title": "3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219", "slug": "_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219", "children": [] }, { "level": 2, "title": "3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219", "slug": "_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219", "children": [] }, { "level": 2, "title": "3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219", "slug": "_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219", "children": [] }, { "level": 2, "title": "3.5 \u8FEA\u7C73\u7279\u6CD5\u5219", "slug": "_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219", "children": [] }, { "level": 2, "title": "3.6 \u5408\u6210\u590D\u7528\u539F\u5219", "slug": "_3-6-\u5408\u6210\u590D\u7528\u539F\u5219", "children": [] }] }, { "level": 1, "title": "4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F", "slug": "_4-\u521B\u5EFA\u8005\u6A21\u5F0F", "children": [{ "level": 2, "title": "4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F", "slug": "_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784", "slug": "_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0", "slug": "_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898", "slug": "_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898", "children": [{ "level": 4, "title": "4.1.3.1 \u95EE\u9898\u6F14\u793A", "slug": "_4-1-3-1-\u95EE\u9898\u6F14\u793A", "children": [] }, { "level": 4, "title": "4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3", "slug": "_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3", "children": [] }] }, { "level": 3, "title": "4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B", "slug": "_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B", "children": [] }] }, { "level": 2, "title": "4.2 \u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.2.1 \u6982\u8FF0", "slug": "_4-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.2.1 \u7ED3\u6784", "slug": "_4-2-2-1-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.2.2 \u5B9E\u73B0", "slug": "_4-2-2-2-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.2.4 \u4F18\u7F3A\u70B9", "slug": "_4-2-2-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 4, "title": "4.2.2.3 \u6269\u5C55", "slug": "_4-2-2-3-\u6269\u5C55", "children": [] }] }, { "level": 3, "title": "4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F", "slug": "_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.3.1 \u6982\u5FF5", "slug": "_4-2-3-1-\u6982\u5FF5", "children": [] }, { "level": 4, "title": "4.2.3.2 \u7ED3\u6784", "slug": "_4-2-3-2-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.3.3 \u5B9E\u73B0", "slug": "_4-2-3-3-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.3.4 \u4F18\u7F3A\u70B9", "slug": "_4-2-3-4-\u4F18\u7F3A\u70B9", "children": [] }] }, { "level": 3, "title": "4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F", "slug": "_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F", "children": [{ "level": 4, "title": "4.2.4.1 \u6982\u5FF5", "slug": "_4-2-4-1-\u6982\u5FF5", "children": [] }, { "level": 4, "title": "4.2.4.2 \u7ED3\u6784", "slug": "_4-2-4-2-\u7ED3\u6784", "children": [] }, { "level": 4, "title": "4.2.4.2 \u5B9E\u73B0", "slug": "_4-2-4-2-\u5B9E\u73B0", "children": [] }, { "level": 4, "title": "4.2.4.3 \u4F18\u7F3A\u70B9", "slug": "_4-2-4-3-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 4, "title": "4.2.4.4 \u4F7F\u7528\u573A\u666F", "slug": "_4-2-4-4-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 3, "title": "4.2.5 \u6A21\u5F0F\u6269\u5C55", "slug": "_4-2-5-\u6A21\u5F0F\u6269\u5C55", "children": [] }, { "level": 3, "title": "4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5", "slug": "_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5", "children": [] }] }, { "level": 2, "title": "4.3 \u539F\u578B\u6A21\u5F0F", "slug": "_4-3-\u539F\u578B\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.3.1 \u6982\u8FF0", "slug": "_4-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.3.2 \u7ED3\u6784", "slug": "_4-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.3.3 \u5B9E\u73B0", "slug": "_4-3-3-\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "4.3.4 \u6848\u4F8B", "slug": "_4-3-4-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "4.3.5 \u4F7F\u7528\u573A\u666F", "slug": "_4-3-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09", "slug": "_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686", "children": [] }] }, { "level": 2, "title": "4.5 \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "4.4.1 \u6982\u8FF0", "slug": "_4-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "4.4.2 \u7ED3\u6784", "slug": "_4-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "4.4.3 \u5B9E\u4F8B", "slug": "_4-4-3-\u5B9E\u4F8B", "children": [] }, { "level": 3, "title": "4.4.4 \u4F18\u7F3A\u70B9", "slug": "_4-4-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "4.4.5 \u4F7F\u7528\u573A\u666F", "slug": "_4-4-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "4.4.6 \u6A21\u5F0F\u6269\u5C55", "slug": "_4-4-6-\u6A21\u5F0F\u6269\u5C55", "children": [] }] }, { "level": 2, "title": "4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4", "slug": "_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4", "children": [{ "level": 3, "title": "4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F", "slug": "_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F", "children": [] }] }] }, { "level": 1, "title": "5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F", "slug": "_5-\u7ED3\u6784\u578B\u6A21\u5F0F", "children": [{ "level": 2, "title": "5.1 \u4EE3\u7406\u6A21\u5F0F", "slug": "_5-1-\u4EE3\u7406\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.1.1 \u6982\u8FF0", "slug": "_5-1-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.1.2 \u7ED3\u6784", "slug": "_5-1-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.1.3 \u9759\u6001\u4EE3\u7406", "slug": "_5-1-3-\u9759\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.4 JDK \u52A8\u6001\u4EE3\u7406", "slug": "_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406", "slug": "_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406", "children": [] }, { "level": 3, "title": "5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4", "slug": "_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4", "children": [] }, { "level": 3, "title": "5.1.7 \u4F18\u7F3A\u70B9", "slug": "_5-1-7-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "5.1.8 \u4F7F\u7528\u573A\u666F", "slug": "_5-1-8-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.2 \u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-\u9002\u914D\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.2.1 \u6982\u8FF0", "slug": "_5-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.2.2 \u7ED3\u6784", "slug": "_5-2-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F", "slug": "_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F", "children": [] }, { "level": 3, "title": "5.2.5 \u5E94\u7528\u573A\u666F", "slug": "_5-2-5-\u5E94\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.2.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-2-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "5.3 \u88C5\u9970\u8005\u6A21\u5F0F", "slug": "_5-3-\u88C5\u9970\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.3.1 \u6982\u8FF0", "slug": "_5-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.3.2 \u7ED3\u6784", "slug": "_5-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.3.3 \u6848\u4F8B", "slug": "_5-3-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.3.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-3-4-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.3.5 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-3-5-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }, { "level": 3, "title": "5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B", "slug": "_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B", "children": [] }] }, { "level": 2, "title": "5.4 \u6865\u63A5\u6A21\u5F0F", "slug": "_5-4-\u6865\u63A5\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.4.1 \u6982\u8FF0", "slug": "_5-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.4.2 \u7ED3\u6784", "slug": "_5-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.4.3 \u6848\u4F8B", "slug": "_5-4-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.4.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-4-4-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.5 \u5916\u89C2\u6A21\u5F0F", "slug": "_5-5-\u5916\u89C2\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.5.1 \u6982\u8FF0", "slug": "_5-5-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.5.2 \u7ED3\u6784", "slug": "_5-5-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.5.3 \u6848\u4F8B", "slug": "_5-5-3-\u6848\u4F8B", "children": [] }, { "level": 3, "title": "5.5.4 \u4F7F\u7528\u573A\u666F", "slug": "_5-5-4-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.5.5 \u6E90\u7801\u89E3\u6790", "slug": "_5-5-5-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "5.6 \u7EC4\u5408\u6A21\u5F0F", "slug": "_5-6-\u7EC4\u5408\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.6.1 \u6982\u8FF0", "slug": "_5-6-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.6.2 \u7ED3\u6784", "slug": "_5-6-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.6.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_5-6-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B", "slug": "_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B", "children": [] }, { "level": 3, "title": "5.6.5 \u4F18\u70B9", "slug": "_5-6-5-\u4F18\u70B9", "children": [] }, { "level": 3, "title": "5.6.6 \u4F7F\u7528\u573A\u666F", "slug": "_5-6-6-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "5.7 \u4EAB\u5143\u6A21\u5F0F", "slug": "_5-7-\u4EAB\u5143\u6A21\u5F0F", "children": [{ "level": 3, "title": "5.7.1 \u6982\u8FF0", "slug": "_5-7-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "5.7.2 \u7ED3\u6784", "slug": "_5-7-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "5.7.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_5-7-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F", "slug": "_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "5.7.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_5-7-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }] }, { "level": 1, "title": "6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F", "slug": "_6-\u884C\u4E3A\u578B\u6A21\u5F0F", "children": [{ "level": 2, "title": "6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F", "slug": "_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.1.1 \u6982\u8FF0", "slug": "_6-1-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.1.2 \u7ED3\u6784", "slug": "_6-1-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.1.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-1-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.1.3 \u4F18\u7F3A\u70B9", "slug": "_6-1-3-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.1.4 \u9002\u7528\u573A\u666F", "slug": "_6-1-4-\u9002\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.1.5 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-1-5-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.2 \u7B56\u7565\u6A21\u5F0F", "slug": "_6-2-\u7B56\u7565\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.2.1 \u6982\u8FF0", "slug": "_6-2-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.2.2 \u7ED3\u6784", "slug": "_6-2-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.2.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-2-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.2.4 \u4F18\u7F3A\u70B9", "slug": "_6-2-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.2.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-2-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.2.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-2-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.3 \u547D\u4EE4\u6A21\u5F0F", "slug": "_6-3-\u547D\u4EE4\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.3.1 \u6982\u8FF0", "slug": "_6-3-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.3.2 \u7ED3\u6784", "slug": "_6-3-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.3.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-3-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.3.4 \u4F18\u7F3A\u70B9", "slug": "_6-3-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.3.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-3-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.3.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-3-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F", "slug": "_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.4.1 \u6982\u8FF0", "slug": "_6-4-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.4.2 \u7ED3\u6784", "slug": "_6-4-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.4.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-4-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.4.4 \u4F18\u7F3A\u70B9", "slug": "_6-4-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.4.5 \u6E90\u7801\u89E3\u6790", "slug": "_6-4-5-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.5 \u72B6\u6001\u6A21\u5F0F", "slug": "_6-5-\u72B6\u6001\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.5.1 \u6982\u8FF0", "slug": "_6-5-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.5.2 \u7ED3\u6784", "slug": "_6-5-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.5.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-5-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.5.4 \u4F18\u7F3A\u70B9", "slug": "_6-5-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.5.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-5-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F", "slug": "_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.6.1 \u6982\u8FF0", "slug": "_6-6-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.6.2 \u7ED3\u6784", "slug": "_6-6-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.6.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-6-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.6.4 \u4F18\u7F3A\u70B9", "slug": "_6-6-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.6.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-6-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0", "slug": "_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0", "children": [] }] }, { "level": 2, "title": "6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F", "slug": "_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.7.1 \u6982\u8FF0", "slug": "_6-7-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.7.2 \u7ED3\u6784", "slug": "_6-7-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.7.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-7-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.7.4 \u4F18\u7F3A\u70B9", "slug": "_6-7-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.7.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-7-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F", "slug": "_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.8.1 \u6982\u8FF0", "slug": "_6-8-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.8.2 \u7ED3\u6784", "slug": "_6-8-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.8.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-8-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.8.4 \u4F18\u7F3A\u70B9", "slug": "_6-8-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.8.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-8-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.8.6 JDK \u6E90\u7801\u89E3\u6790", "slug": "_6-8-6-jdk-\u6E90\u7801\u89E3\u6790", "children": [] }] }, { "level": 2, "title": "6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F", "slug": "_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.9.1 \u6982\u8FF0", "slug": "_6-9-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.9.2 \u7ED3\u6784", "slug": "_6-9-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.9.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-9-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.9.4 \u4F18\u7F3A\u70B9", "slug": "_6-9-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.9.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-9-5-\u4F7F\u7528\u573A\u666F", "children": [] }, { "level": 3, "title": "6.9.6 \u6269\u5C55", "slug": "_6-9-6-\u6269\u5C55", "children": [] }] }, { "level": 2, "title": "6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.10.1 \u6982\u8FF0", "slug": "_6-10-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.10.2 \u7ED3\u6784", "slug": "_6-10-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.10.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-10-3-\u6848\u4F8B\u5B9E\u73B0", "children": [{ "level": 4, "title": "6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [] }, { "level": 4, "title": "6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F", "slug": "_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F", "children": [] }] }, { "level": 3, "title": "6.10.4 \u4F18\u7F3A\u70B9", "slug": "_6-10-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.10.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-10-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }, { "level": 2, "title": "6.11 \u89E3\u91CA\u5668\u6A21\u5F0F", "slug": "_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F", "children": [{ "level": 3, "title": "6.11.1 \u6982\u8FF0", "slug": "_6-11-1-\u6982\u8FF0", "children": [] }, { "level": 3, "title": "6.11.2 \u7ED3\u6784", "slug": "_6-11-2-\u7ED3\u6784", "children": [] }, { "level": 3, "title": "6.11.3 \u6848\u4F8B\u5B9E\u73B0", "slug": "_6-11-3-\u6848\u4F8B\u5B9E\u73B0", "children": [] }, { "level": 3, "title": "6.11.4 \u4F18\u7F3A\u70B9", "slug": "_6-11-4-\u4F18\u7F3A\u70B9", "children": [] }, { "level": 3, "title": "6.11.5 \u4F7F\u7528\u573A\u666F", "slug": "_6-11-5-\u4F7F\u7528\u573A\u666F", "children": [] }] }] }, { "level": 1, "title": "7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6", "slug": "_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6", "children": [{ "level": 2, "title": "7.1 spring \u4F7F\u7528\u56DE\u987E", "slug": "_7-1-spring-\u4F7F\u7528\u56DE\u987E", "children": [] }, { "level": 2, "title": "7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784", "slug": "_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784", "children": [{ "level": 3, "title": "7.1.1 bean \u6982\u8FF0", "slug": "_7-1-1-bean-\u6982\u8FF0", "children": [] }] }, { "level": 2, "title": "7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790", "slug": "_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790", "children": [{ "level": 3, "title": "7.3.1 BeanFactory \u89E3\u6790", "slug": "_7-3-1-beanfactory-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.2 BeanDefinition \u89E3\u6790", "slug": "_7-3-2-beandefinition-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.3 BeanDefinitionReader \u89E3\u6790", "slug": "_7-3-3-beandefinitionreader-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.4 BeanDefinitionRegistry \u89E3\u6790", "slug": "_7-3-4-beandefinitionregistry-\u89E3\u6790", "children": [] }, { "level": 3, "title": "7.3.5 \u521B\u5EFA\u5BB9\u5668", "slug": "_7-3-5-\u521B\u5EFA\u5BB9\u5668", "children": [] }] }, { "level": 2, "title": "7.4 \u81EA\u5B9A\u4E49 SpringIOC", "slug": "_7-4-\u81EA\u5B9A\u4E49-springioc", "children": [{ "level": 3, "title": "7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B", "slug": "_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B", "children": [{ "level": 4, "title": "7.4.1.1 PropertyValue \u7C7B", "slug": "_7-4-1-1-propertyvalue-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.1.2 MutablePropertyValues \u7C7B", "slug": "_7-4-1-2-mutablepropertyvalues-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.1.3 BeanDefinition \u7C7B", "slug": "_7-4-1-3-beandefinition-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B", "slug": "_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3", "slug": "_7-4-2-1-beandefinitionregistry-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B", "slug": "_7-4-2-2-simplebeandefinitionregistry-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B", "slug": "_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.3.1 BeanDefinitionReader \u63A5\u53E3", "slug": "_7-4-3-1-beandefinitionreader-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.3.2 XmlBeanDefinitionReader \u7C7B", "slug": "_7-4-3-2-xmlbeandefinitionreader-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B", "slug": "_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B", "children": [{ "level": 4, "title": "7.4.4.1 BeanFactory \u63A5\u53E3", "slug": "_7-4-4-1-beanfactory-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.4.2 ApplicationContext \u63A5\u53E3", "slug": "_7-4-4-2-applicationcontext-\u63A5\u53E3", "children": [] }, { "level": 4, "title": "7.4.4.3 AbstractApplicationContext \u7C7B", "slug": "_7-4-4-3-abstractapplicationcontext-\u7C7B", "children": [] }, { "level": 4, "title": "7.4.4.4 ClassPathXmlApplicationContext \u7C7B", "slug": "_7-4-4-4-classpathxmlapplicationcontext-\u7C7B", "children": [] }] }, { "level": 3, "title": "7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3", "slug": "_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3", "children": [{ "level": 4, "title": "7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F", "slug": "_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F", "children": [] }, { "level": 4, "title": "7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219", "slug": "_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219", "children": [] }, { "level": 4, "title": "7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165", "slug": "_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165", "children": [] }] }] }] }], "content": '---\ntitle: \'Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F\'\ndescription: \'Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava\'\ndate: 2022-8-19 21:55:00\nsidebar: \'auto\'\ntags: \u8BBE\u8BA1\u6A21\u5F0F\ncategories: java\n---\n\n\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002\n\n<!-- more -->\n\n# 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0\n\n## 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F\n\n"\u8BBE\u8BA1\u6A21\u5F0F"\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002\n\n1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB`\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09`\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002\n\n1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002\n\n## 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5\n\n\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002\n\n## 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027\n\n\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002\n\n\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002\n\n- \u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002\n- \u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002\n- \u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002\n\n## 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\n\n- **\u521B\u5EFA\u578B\u6A21\u5F0F**\n\n  \u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002\n\n- **\u7ED3\u6784\u578B\u6A21\u5F0F**\n\n  \u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002\n\n- **\u884C\u4E3A\u578B\u6A21\u5F0F**\n\n  \u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002\n\n# 2\uFF0CUML \u56FE\n\n\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002\n\nUML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002\n\n## 2.1 \u7C7B\u56FE\u6982\u8FF0\n\n\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002\n\n## 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528\n\n- \u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B\n- \u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002\n\n## 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5\n\n### 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F\n\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002\n\n![](\\img\\Employee.jpg)\n\n\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A\n\n- +\uFF1A\u8868\u793A public\n\n- -\uFF1A\u8868\u793A private\n\n- #\uFF1A\u8868\u793A protected\n\n\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A **\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]**\n\n\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A **\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]**\n\n> \u6CE8\u610F\uFF1A\n>\n> \u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684\n>\n> \u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762\n\n**\u4E3E\u4E2A\u6817\u5B50\uFF1A**\n\n![](\\img\\demo.png)\n\n\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A\n\n- method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002\n- method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002\n- method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002\n\n### 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F\n\n#### 2.3.2.1 \u5173\u8054\u5173\u7CFB\n\n\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002\n\n\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002\n\n**1\uFF0C\u5355\u5411\u5173\u8054**\n\n![](\\img\\customer_address.png)\n\n\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002\n\n**2\uFF0C\u53CC\u5411\u5173\u8054**\n\n![](\\img\\customer_product.png)\n\n\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002\n\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List\\<Product>\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002\n\n**3\uFF0C\u81EA\u5173\u8054**\n\n![](\\img\\node.png)\n\n\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002\n\n#### 2.3.2.2 \u805A\u5408\u5173\u7CFB\n\n\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\n\n\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002\n\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A\n\n![](\\img\\image-20191229173422328.png)\n\n#### 2.3.2.3 \u7EC4\u5408\u5173\u7CFB\n\n\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002\n\n\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002\n\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A\n\n![](\\img\\image-20191229173455149.png)\n\n#### 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB\n\n\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002\n\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A\n\n![](\\img\\image-20191229173518926.png)\n\n#### 2.3.2.5 \u7EE7\u627F\u5173\u7CFB\n\n\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002\n\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A\n\n![](\\img\\image-20191229173539838.png)\n\n#### 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB\n\n\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002\n\n\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002\n\n![](\\img\\image-20191229173554296.png)\n\n# 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219\n\n\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002\n\n## 3.1 \u5F00\u95ED\u539F\u5219\n\n**\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED**\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002\n\n\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002\n\n\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002\n\n\u4E0B\u9762\u4EE5 `\u641C\u72D7\u8F93\u5165\u6CD5` \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002\n\n\u3010\u4F8B\u3011`\u641C\u72D7\u8F93\u5165\u6CD5` \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002\n\n\u5206\u6790\uFF1A`\u641C\u72D7\u8F93\u5165\u6CD5` \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002\n\n![](\\img\\open-close.png)\n\n## 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219\n\n\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002\n\n\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002\n\n\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002\n\n\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50\n\n\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002\n\n\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002\n\n![](\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png)\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n**\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A**\n\n```java\npublic class Rectangle {\n    private double length;\n    private double width;\n\n    public double getLength() {\n        return length;\n    }\n\n    public void setLength(double length) {\n        this.length = length;\n    }\n\n    public double getWidth() {\n        return width;\n    }\n\n    public void setWidth(double width) {\n        this.width = width;\n    }\n}\n```\n\n**\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A**\n\n\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002\n\n```java\npublic class Square extends Rectangle {\n\n    public void setWidth(double width) {\n        super.setLength(width);\n        super.setWidth(width);\n    }\n\n    public void setLength(double length) {\n        super.setLength(length);\n        super.setWidth(length);\n    }\n}\n```\n\n\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002\n\n```java\npublic class RectangleDemo {\n\n    public static void resize(Rectangle rectangle) {\n        while (rectangle.getWidth() <= rectangle.getLength()) {\n            rectangle.setWidth(rectangle.getWidth() + 1);\n        }\n    }\n\n    //\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD\n    public static void printLengthAndWidth(Rectangle rectangle) {\n        System.out.println(rectangle.getLength());\n        System.out.println(rectangle.getWidth());\n    }\n\n    public static void main(String[] args) {\n        Rectangle rectangle = new Rectangle();\n        rectangle.setLength(20);\n        rectangle.setWidth(10);\n        resize(rectangle);\n        printLengthAndWidth(rectangle);\n\n        System.out.println("============");\n\n        Rectangle rectangle1 = new Square();\n        rectangle1.setLength(10);\n        resize(rectangle1);\n        printLengthAndWidth(rectangle1);\n    }\n}\n```\n\n\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002\n\u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002\n\n\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3\n\n<img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png" style="zoom:80%;" />\n\n## 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219\n\n\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002\n\n\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\n\n\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111\n\n\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002\n\n**\u7C7B\u56FE\u5982\u4E0B\uFF1A**\n\n<img src="\\img\\\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n**\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:**\n\n```java\npublic class XiJieHardDisk implements HardDisk {\n\n    public void save(String data) {\n        System.out.println("\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E" + data);\n    }\n\n    public String get() {\n        System.out.println("\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E");\n        return "\u6570\u636E";\n    }\n}\n```\n\n**Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A**\n\n```java\npublic class IntelCpu implements Cpu {\n\n    public void run() {\n        System.out.println("\u4F7F\u7528Intel\u5904\u7406\u5668");\n    }\n}\n```\n\n**\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A**\n\n```java\npublic class KingstonMemory implements Memory {\n\n    public void save() {\n        System.out.println("\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761");\n    }\n}\n```\n\n**\u7535\u8111\uFF08Computer\uFF09\uFF1A**\n\n```java\npublic class Computer {\n\n    private XiJieHardDisk hardDisk;\n    private IntelCpu cpu;\n    private KingstonMemory memory;\n\n    public IntelCpu getCpu() {\n        return cpu;\n    }\n\n    public void setCpu(IntelCpu cpu) {\n        this.cpu = cpu;\n    }\n\n    public KingstonMemory getMemory() {\n        return memory;\n    }\n\n    public void setMemory(KingstonMemory memory) {\n        this.memory = memory;\n    }\n\n    public XiJieHardDisk getHardDisk() {\n        return hardDisk;\n    }\n\n    public void setHardDisk(XiJieHardDisk hardDisk) {\n        this.hardDisk = hardDisk;\n    }\n\n    public void run() {\n        System.out.println("\u8BA1\u7B97\u673A\u5DE5\u4F5C");\n        cpu.run();\n        memory.save();\n        String data = hardDisk.get();\n        System.out.println("\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A" + data);\n    }\n}\n```\n\n**\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A**\n\n\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002\n\n```java\npublic class TestComputer {\n    public static void main(String[] args) {\n        Computer computer = new Computer();\n        computer.setHardDisk(new XiJieHardDisk());\n        computer.setCpu(new IntelCpu());\n        computer.setMemory(new KingstonMemory());\n\n        computer.run();\n    }\n}\n```\n\n\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002\n\n\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A\n\n\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002\n\n**\u7C7B\u56FE\u5982\u4E0B\uFF1A**\n\n<img src="/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png" alt="image-20191229173554296" style="zoom:70%;" />\n\n**\u7535\u8111\uFF08Computer\uFF09\uFF1A**\n\n```java\npublic class Computer {\n\n    private HardDisk hardDisk;\n    private Cpu cpu;\n    private Memory memory;\n\n    public HardDisk getHardDisk() {\n        return hardDisk;\n    }\n\n    public void setHardDisk(HardDisk hardDisk) {\n        this.hardDisk = hardDisk;\n    }\n\n    public Cpu getCpu() {\n        return cpu;\n    }\n\n    public void setCpu(Cpu cpu) {\n        this.cpu = cpu;\n    }\n\n    public Memory getMemory() {\n        return memory;\n    }\n\n    public void setMemory(Memory memory) {\n        this.memory = memory;\n    }\n\n    public void run() {\n        System.out.println("\u8BA1\u7B97\u673A\u5DE5\u4F5C");\n    }\n}\n```\n\n\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002\n\n## 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219\n\n\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002\n\n\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219\n\n\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B\n\n\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A`\u9ED1\u9A6C`\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n![](\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u5219.png)\n\n\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A\n\n![](\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u52191.png)\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n**AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A**\n\n```java\npublic interface AntiTheft {\n    void antiTheft();\n}\n```\n\n**Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A**\n\n```java\npublic interface Fireproof {\n    void fireproof();\n}\n```\n\n**Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A**\n\n```java\npublic interface Waterproof {\n    void waterproof();\n}\n```\n\n**HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A**\n\n```java\npublic class HeiMaSafetyDoor implements AntiTheft,Fireproof,Waterproof {\n    public void antiTheft() {\n        System.out.println("\u9632\u76D7");\n    }\n\n    public void fireproof() {\n        System.out.println("\u9632\u706B");\n    }\n\n\n    public void waterproof() {\n        System.out.println("\u9632\u6C34");\n    }\n}\n```\n\n**ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A**\n\n```java\npublic class ItcastSafetyDoor implements AntiTheft,Fireproof {\n    public void antiTheft() {\n        System.out.println("\u9632\u76D7");\n    }\n\n    public void fireproof() {\n        System.out.println("\u9632\u706B");\n    }\n}\n```\n\n## 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219\n\n\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002\n\n\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002\n\n\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002\n\n\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002\n\n\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219\n\n\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B\n\n\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n**\u660E\u661F\u7C7B\uFF08Star\uFF09**\n\n```java\npublic class Star {\n    private String name;\n\n    public Star(String name) {\n        this.name=name;\n    }\n\n    public String getName() {\n        return name;\n    }\n}\n```\n\n**\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09**\n\n```java\npublic class Fans {\n    private String name;\n\n    public Fans(String name) {\n        this.name=name;\n    }\n\n    public String getName() {\n        return name;\n    }\n}\n```\n\n**\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09**\n\n```java\npublic class Company {\n    private String name;\n\n    public Company(String name) {\n        this.name=name;\n    }\n\n    public String getName() {\n        return name;\n    }\n}\n```\n\n**\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09**\n\n```java\npublic class Agent {\n    private Star star;\n    private Fans fans;\n    private Company company;\n\n    public void setStar(Star star) {\n        this.star = star;\n    }\n\n    public void setFans(Fans fans) {\n        this.fans = fans;\n    }\n\n    public void setCompany(Company company) {\n        this.company = company;\n    }\n\n    public void meeting() {\n        System.out.println(fans.getName() + "\u4E0E\u660E\u661F" + star.getName() + "\u89C1\u9762\u4E86\u3002");\n    }\n\n    public void business() {\n        System.out.println(company.getName() + "\u4E0E\u660E\u661F" + star.getName() + "\u6D3D\u6DE1\u4E1A\u52A1\u3002");\n    }\n}\n```\n\n## 3.6 \u5408\u6210\u590D\u7528\u539F\u5219\n\n\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002\n\n\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002\n\n\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A\n\n1. \u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002\n2. \u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002\n3. \u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002\n\n\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A\n\n1. \u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002\n2. \u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002\n3. \u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002\n\n\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219\n\n\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F\n\n\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u5408\u6210\u590D\u7528\u539F\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />\n\n\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002\n\n<img src="/img/\u5408\u6210\u590D\u7528\u539F\u52191.png" alt="image-20191229173554296" style="zoom:80%;" />\n\n# 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F\n\n\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002\n\n\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002\n\n\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A\n\n- \u5355\u4F8B\u6A21\u5F0F\n- \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\n- \u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F\n- \u539F\u578B\u6A21\u5F0F\n- \u5EFA\u9020\u8005\u6A21\u5F0F\n\n## 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\n\n\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002\n\n\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002\n\n### 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784\n\n\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A\n\n- \u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B\n- \u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B\n\n### 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0\n\n> \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A\n>\n> \u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\n>\n> \u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA\n\n1. \u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09\n\n   ```java\n   /**\n    * \u997F\u6C49\u5F0F\n    *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61\n    */\n   public class Singleton {\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n       private Singleton() {}\n\n       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61\n       private static Singleton instance = new Singleton();\n\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n       public static Singleton getInstance() {\n           return instance;\n       }\n   }\n   ```\n\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\n\n   \u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002\n\n2. \u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09\n\n   ```java\n   /**\n    * \u6076\u6C49\u5F0F\n    *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61\n    */\n   public class Singleton {\n\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n       private Singleton() {}\n\n       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61\n       private static Singleton instance;\n\n       static {\n           instance = new Singleton();\n       }\n\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n       public static Singleton getInstance() {\n           return instance;\n       }\n   }\n   ```\n\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\n\n   \u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002\n\n3. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09\n\n   ```java\n   /**\n    * \u61D2\u6C49\u5F0F\n    *  \u7EBF\u7A0B\u4E0D\u5B89\u5168\n    */\n   public class Singleton {\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n       private Singleton() {}\n\n       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61\n       private static Singleton instance;\n\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n       public static Singleton getInstance() {\n\n           if(instance == null) {\n               instance = new Singleton();\n           }\n           return instance;\n       }\n   }\n   ```\n\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\n\n   \u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\n\n4. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09\n\n   ```java\n   /**\n    * \u61D2\u6C49\u5F0F\n    *  \u7EBF\u7A0B\u5B89\u5168\n    */\n   public class Singleton {\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n       private Singleton() {}\n\n       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61\n       private static Singleton instance;\n\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n       public static synchronized Singleton getInstance() {\n\n           if(instance == null) {\n               instance = new Singleton();\n           }\n           return instance;\n       }\n   }\n   ```\n\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\n\n   \u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002\n\n5. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09\n\n   \u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E `getInstance()` \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\n\n   ```java\n   /**\n    * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F\n    */\n   public class Singleton {\n\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n       private Singleton() {}\n\n       private static Singleton instance;\n\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n       public static Singleton getInstance() {\n   		//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B\n           if(instance == null) {\n               synchronized (Singleton.class) {\n                   //\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull\n                   if(instance == null) {\n                       instance = new Singleton();\n                   }\n               }\n           }\n           return instance;\n       }\n   }\n   ```\n\n   \u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002\n\n   \u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 `volatile` \u5173\u952E\u5B57, `volatile` \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002\n\n   ```java\n   /**\n    * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F\n    */\n   public class Singleton {\n\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n       private Singleton() {}\n\n       private static volatile Singleton instance;\n\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n       public static Singleton getInstance() {\n   		//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645\n           if(instance == null) {\n               synchronized (Singleton.class) {\n                   //\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A\n                   if(instance == null) {\n                       instance = new Singleton();\n                   }\n               }\n           }\n           return instance;\n       }\n   }\n   ```\n\n   <div color="red">\u5C0F\u7ED3\uFF1A</div>\n\n   \u6DFB\u52A0 `volatile` \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002\n\n6. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09\n\n   \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB `static` \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002\n\n   ```java\n   /**\n    * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\n    */\n   public class Singleton {\n\n       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n       private Singleton() {}\n\n       private static class SingletonHolder {\n           private static final Singleton INSTANCE = new Singleton();\n       }\n\n       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n       public static Singleton getInstance() {\n           return SingletonHolder.INSTANCE;\n       }\n   }\n   ```\n\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\n\n   \u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder\n\n   \u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002\n\n   <div color="red">\u5C0F\u7ED3\uFF1A</div>\n\n   \u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002\n\n7. \u679A\u4E3E\u65B9\u5F0F\n\n   \u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002\n\n   ```java\n   /**\n    * \u679A\u4E3E\u65B9\u5F0F\n    */\n   public enum Singleton {\n       INSTANCE;\n   }\n   ```\n\n   <div color=\'red\'>\u8BF4\u660E\uFF1A</div>\n\n   \u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002\n\n### 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898\n\n#### 4.1.3.1 \u95EE\u9898\u6F14\u793A\n\n\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002\n\n- \u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\n\n  **Singleton \u7C7B\uFF1A**\n\n  ```java\n  public class Singleton implements Serializable {\n\n      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n      private Singleton() {}\n\n      private static class SingletonHolder {\n          private static final Singleton INSTANCE = new Singleton();\n      }\n\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n      public static Singleton getInstance() {\n          return SingletonHolder.INSTANCE;\n      }\n  }\n  ```\n\n  **Test \u7C7B\uFF1A**\n\n  ```java\n  public class Test {\n      public static void main(String[] args) throws Exception {\n          //\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61\n          //writeObject2File();\n          //\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61\n          Singleton s1 = readObjectFromFile();\n          Singleton s2 = readObjectFromFile();\n\n          //\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\n          System.out.println(s1 == s2);\n      }\n\n      private static Singleton readObjectFromFile() throws Exception {\n          //\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61\n          ObjectInputStream ois = new ObjectInputStream(new FileInputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"));\n          //\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61\n          Singleton instance = (Singleton) ois.readObject();\n\n          return instance;\n      }\n\n      public static void writeObject2File() throws Exception {\n          //\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61\n          Singleton instance = Singleton.getInstance();\n          //\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\n          ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"));\n          //\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D\n          oos.writeObject(instance);\n      }\n  }\n  ```\n\n  > \u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F`false`\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002\n\n- \u53CD\u5C04\n\n  **Singleton \u7C7B\uFF1A**\n\n  ```java\n  public class Singleton {\n\n      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n      private Singleton() {}\n\n      private static volatile Singleton instance;\n\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n      public static Singleton getInstance() {\n\n          if(instance != null) {\n              return instance;\n          }\n\n          synchronized (Singleton.class) {\n              if(instance != null) {\n                  return instance;\n              }\n              instance = new Singleton();\n              return instance;\n          }\n      }\n  }\n  ```\n\n  **Test \u7C7B\uFF1A**\n\n  ```java\n  public class Test {\n      public static void main(String[] args) throws Exception {\n          //\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61\n          Class clazz = Singleton.class;\n          //\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61\n          Constructor constructor = clazz.getDeclaredConstructor();\n          //\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5\n          constructor.setAccessible(true);\n\n          //\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1\n          Singleton s1 = (Singleton) constructor.newInstance();\n          //\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2\n          Singleton s2 = (Singleton) constructor.newInstance();\n\n          //\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\n          System.out.println(s1 == s2);\n      }\n  }\n  ```\n\n  > \u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F`false`\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\n\n> <div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002\n\n#### 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3\n\n- \u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5\n\n  \u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0`readResolve()`\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002\n\n  **Singleton \u7C7B\uFF1A**\n\n  ```java\n  public class Singleton implements Serializable {\n\n      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n      private Singleton() {}\n\n      private static class SingletonHolder {\n          private static final Singleton INSTANCE = new Singleton();\n      }\n\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n      public static Singleton getInstance() {\n          return SingletonHolder.INSTANCE;\n      }\n\n      /**\n       * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\n       */\n      private Object readResolve() {\n          return SingletonHolder.INSTANCE;\n      }\n  }\n  ```\n\n  **\u6E90\u7801\u89E3\u6790\uFF1A**\n\n  ObjectInputStream \u7C7B\n\n  ```java\n  public final Object readObject() throws IOException, ClassNotFoundException{\n      ...\n      // if nested read, passHandle contains handle of enclosing object\n      int outerHandle = passHandle;\n      try {\n          Object obj = readObject0(false);//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5\n      .....\n  }\n\n  private Object readObject0(boolean unshared) throws IOException {\n  	...\n      try {\n  		switch (tc) {\n  			...\n  			case TC_OBJECT:\n  				return checkResolve(readOrdinaryObject(unshared));//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5\n  			...\n          }\n      } finally {\n          depth--;\n          bin.setBlockDataMode(oldMode);\n      }\n  }\n\n  private Object readOrdinaryObject(boolean unshared) throws IOException {\n  	...\n  	//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C\n      obj = desc.isInstantiable() ? desc.newInstance() : null;\n      ...\n      // \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue\n      if (obj != null && handles.lookupException(passHandle) == null && desc.hasReadResolveMethod()) {\n      	// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF\n      	// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002\n      	Object rep = desc.invokeReadResolve(obj);\n       	...\n      }\n      return obj;\n  }\n  ```\n\n- \u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5\n\n  ```java\n  public class Singleton {\n\n      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5\n      private Singleton() {\n          /*\n             \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801\n          */\n          if(instance != null) {\n              throw new RuntimeException();\n          }\n      }\n\n      private static volatile Singleton instance;\n\n      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61\n      public static Singleton getInstance() {\n\n          if(instance != null) {\n              return instance;\n          }\n\n          synchronized (Singleton.class) {\n              if(instance != null) {\n                  return instance;\n              }\n              instance = new Singleton();\n              return instance;\n          }\n      }\n  }\n  ```\n\n  <div color="red">\u8BF4\u660E:</div>\n\n  \u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002\n\n### 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B\n\nRuntime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002\n\n1. \u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F\n\n   ```java\n   public class Runtime {\n       private static Runtime currentRuntime = new Runtime();\n\n       /**\n        * Returns the runtime object associated with the current Java application.\n        * Most of the methods of class <code>Runtime</code> are instance\n        * methods and must be invoked with respect to the current runtime object.\n        *\n        * @return  the <code>Runtime</code> object associated with the current\n        *          Java application.\n        */\n       public static Runtime getRuntime() {\n           return currentRuntime;\n       }\n\n       /** Don\'t let anyone else instantiate this class */\n       private Runtime() {}\n       ...\n   }\n   ```\n\n   \u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002\n\n2. \u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5\n\n   ```java\n   public class RuntimeDemo {\n       public static void main(String[] args) throws IOException {\n           //\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61\n           Runtime runtime = Runtime.getRuntime();\n\n           //\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002\n           System.out.println(runtime.totalMemory());\n           //\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002\n           System.out.println(runtime.maxMemory());\n\n           //\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61\n           Process process = runtime.exec("ipconfig");\n           //\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6\n           InputStream inputStream = process.getInputStream();\n           byte[] arr = new byte[1024 * 1024* 100];\n           int b = inputStream.read(arr);\n           System.out.println(new String(arr,0,b,"gbk"));\n       }\n   }\n   ```\n\n## 4.2 \u5DE5\u5382\u6A21\u5F0F\n\n### 4.2.1 \u6982\u8FF0\n\n\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002\n\n\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002\n\n\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A\n\n<img src="/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png" style="zoom:80%;" />\n\n\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A**\u89E3\u8026**\u3002\n\n\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528\n\n- \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09\n- \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\n- \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\n\n### 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\n\n\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002\n\n#### 4.2.2.1 \u7ED3\u6784\n\n\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002\n- \u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B\n- \u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002\n\n#### 4.2.2.2 \u5B9E\u73B0\n\n\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:70%;" />\n\n\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\npublic class SimpleCoffeeFactory {\n\n    public Coffee createCoffee(String type) {\n        Coffee coffee = null;\n        if("americano".equals(type)) {\n            coffee = new AmericanoCoffee();\n        } else if("latte".equals(type)) {\n            coffee = new LatteCoffee();\n        }\n        return coffee;\n    }\n}\n```\n\n\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\n\n\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002\n\n#### 4.2.2.4 \u4F18\u7F3A\u70B9\n\n**\u4F18\u70B9\uFF1A**\n\n\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002\n\n**\u7F3A\u70B9\uFF1A**\n\n\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002\n\n#### 4.2.2.3 \u6269\u5C55\n\n**\u9759\u6001\u5DE5\u5382**\n\n\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\npublic class SimpleCoffeeFactory {\n\n    public static Coffee createCoffee(String type) {\n        Coffee coffee = null;\n        if("americano".equals(type)) {\n            coffee = new AmericanoCoffee();\n        } else if("latte".equals(type)) {\n            coffee = new LatteCoffee();\n        }\n        return coffe;\n    }\n}\n```\n\n### 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\n\n\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002\n\n#### 4.2.3.1 \u6982\u5FF5\n\n\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002\n\n#### 4.2.3.2 \u7ED3\u6784\n\n\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002\n- \u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002\n- \u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002\n- \u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002\n\n#### 4.2.3.3 \u5B9E\u73B0\n\n\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:70%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u62BD\u8C61\u5DE5\u5382\uFF1A\n\n```java\npublic interface CoffeeFactory {\n\n    Coffee createCoffee();\n}\n```\n\n\u5177\u4F53\u5DE5\u5382\uFF1A\n\n```java\npublic class LatteCoffeeFactory implements CoffeeFactory {\n\n    public Coffee createCoffee() {\n        return new LatteCoffee();\n    }\n}\n\npublic class AmericanCoffeeFactory implements CoffeeFactory {\n\n    public Coffee createCoffee() {\n        return new AmericanCoffee();\n    }\n}\n```\n\n\u5496\u5561\u5E97\u7C7B\uFF1A\n\n```java\npublic class CoffeeStore {\n\n    private CoffeeFactory factory;\n\n    public CoffeeStore(CoffeeFactory factory) {\n        this.factory = factory;\n    }\n\n    public Coffee orderCoffee(String type) {\n        Coffee coffee = factory.createCoffee();\n        coffee.addMilk();\n        coffee.addsugar();\n        return coffee;\n    }\n}\n```\n\n\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002\n\n\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002\n\n#### 4.2.3.4 \u4F18\u7F3A\u70B9\n\n**\u4F18\u70B9\uFF1A**\n\n- \u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B\n- \u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B\n\n**\u7F3A\u70B9\uFF1A**\n\n- \u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002\n\n### 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\n\n\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002\n\n\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002\n\n\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002\n\n<img src="/img/image-20200401214509176.png" style="zoom:67%;" />\n\n<img src="/img/image-20200401222951963.png" style="zoom:67%;" />\n\n#### 4.2.4.1 \u6982\u5FF5\n\n\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002\n\n\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002\n\n#### 4.2.4.2 \u7ED3\u6784\n\n\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A\n\n- \u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002\n- \u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002\n- \u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002\n- \u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002\n\n#### 4.2.4.2 \u5B9E\u73B0\n\n\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:67%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u62BD\u8C61\u5DE5\u5382\uFF1A\n\n```java\npublic interface DessertFactory {\n\n    Coffee createCoffee();\n\n    Dessert createDessert();\n}\n```\n\n\u5177\u4F53\u5DE5\u5382\uFF1A\n\n```java\n//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382\npublic class AmericanDessertFactory implements DessertFactory {\n\n    public Coffee createCoffee() {\n        return new AmericanCoffee();\n    }\n\n    public Dessert createDessert() {\n        return new MatchaMousse();\n    }\n}\n//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382\npublic class ItalyDessertFactory implements DessertFactory {\n\n    public Coffee createCoffee() {\n        return new LatteCoffee();\n    }\n\n    public Dessert createDessert() {\n        return new Tiramisu();\n    }\n}\n```\n\n\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002\n\n#### 4.2.4.3 \u4F18\u7F3A\u70B9\n\n**\u4F18\u70B9\uFF1A**\n\n\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002\n\n**\u7F3A\u70B9\uFF1A**\n\n\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002\n\n#### 4.2.4.4 \u4F7F\u7528\u573A\u666F\n\n- \u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002\n\n- \u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002\n\n- \u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002\n\n\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002\n\n### 4.2.5 \u6A21\u5F0F\u6269\u5C55\n\n**\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408**\n\n\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002\n\n\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6\n\n\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties\n\n```properties\namerican=com.itheima.pattern.factory.config_factory.AmericanCoffee\nlatte=com.itheima.pattern.factory.config_factory.LatteCoffee\n```\n\n\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B\n\n```java\npublic class CoffeeFactory {\n\n    private static Map<String,Coffee> map = new HashMap();\n\n    static {\n        Properties p = new Properties();\n        InputStream is = CoffeeFactory.class.getClassLoader().getResourceAsStream("bean.properties");\n        try {\n            p.load(is);\n            //\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61\n            Set<Object> keys = p.keySet();\n            for (Object key : keys) {\n                //\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09\n                String className = p.getProperty((String) key);\n                //\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61\n                Class clazz = Class.forName(className);\n                Coffee obj = (Coffee) clazz.newInstance();\n                map.put((String)key,obj);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static Coffee createCoffee(String name) {\n\n        return map.get(name);\n    }\n}\n```\n\n\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002\n\n### 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5\n\n```java\npublic class Demo {\n    public static void main(String[] args) {\n        List<String> list = new ArrayList<>();\n        list.add("\u4EE4\u72D0\u51B2");\n        list.add("\u98CE\u6E05\u626C");\n        list.add("\u4EFB\u6211\u884C");\n\n        //\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\n        Iterator<String> it = list.iterator();\n        //\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\n        while(it.hasNext()) {\n            String ele = it.next();\n            System.out.println(ele);\n        }\n    }\n}\n```\n\n\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A\n\n<img src="/img/jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:75%;" />\n\nCollection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002\n\n> \u53E6\uFF1A\n>\n> \u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B\n>\n> \u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B\n\n## 4.3 \u539F\u578B\u6A21\u5F0F\n\n### 4.3.1 \u6982\u8FF0\n\n\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002\n\n### 4.3.2 \u7ED3\u6784\n\n\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002\n- \u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002\n- \u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002\n\n\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n![](\\img\\\u539F\u578B\u6A21\u5F0F.png)\n\n### 4.3.3 \u5B9E\u73B0\n\n\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002\n\n> \u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002\n>\n> \u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002\n\nJava \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 `clone()` \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n**Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A**\n\n```java\npublic class Realizetype implements Cloneable {\n\n    public Realizetype() {\n        System.out.println("\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01");\n    }\n\n    @Override\n    protected Realizetype clone() throws CloneNotSupportedException {\n        System.out.println("\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01");\n        return (Realizetype) super.clone();\n    }\n}\n```\n\n**PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A**\n\n```java\npublic class PrototypeTest {\n    public static void main(String[] args) throws CloneNotSupportedException {\n        Realizetype r1 = new Realizetype();\n        Realizetype r2 = r1.clone();\n\n        System.out.println("\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (r1 == r2));\n    }\n}\n```\n\n### 4.3.4 \u6848\u4F8B\n\n**\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6**\n\n\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="\\img\\\u539F\u578B\u6A21\u5F0F1.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u5956\u72B6\u7C7B\npublic class Citation implements Cloneable {\n    private String name;\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return (this.name);\n    }\n\n    public void show() {\n        System.out.println(name + "\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01");\n    }\n\n    @Override\n    public Citation clone() throws CloneNotSupportedException {\n        return (Citation) super.clone();\n    }\n}\n\n//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\npublic class CitationTest {\n    public static void main(String[] args) throws CloneNotSupportedException {\n        Citation c1 = new Citation();\n        c1.setName("\u5F20\u4E09");\n\n        //\u590D\u5236\u5956\u72B6\n        Citation c2 = c1.clone();\n        //\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB\n        c2.setName("\u674E\u56DB");\n\n        c1.show();\n        c2.show();\n    }\n}\n```\n\n### 4.3.5 \u4F7F\u7528\u573A\u666F\n\n- \u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002\n- \u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002\n\n### 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09\n\n\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u5956\u72B6\u7C7B\npublic class Citation implements Cloneable {\n    private Student stu;\n\n    public Student getStu() {\n        return stu;\n    }\n\n    public void setStu(Student stu) {\n        this.stu = stu;\n    }\n\n    void show() {\n        System.out.println(stu.getName() + "\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01");\n    }\n\n    @Override\n    public Citation clone() throws CloneNotSupportedException {\n        return (Citation) super.clone();\n    }\n}\n\n//\u5B66\u751F\u7C7B\npublic class Student {\n    private String name;\n    private String address;\n\n    public Student(String name, String address) {\n        this.name = name;\n        this.address = address;\n    }\n\n    public Student() {\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class CitationTest {\n    public static void main(String[] args) throws CloneNotSupportedException {\n\n        Citation c1 = new Citation();\n        Student stu = new Student("\u5F20\u4E09", "\u897F\u5B89");\n        c1.setStu(stu);\n\n        //\u590D\u5236\u5956\u72B6\n        Citation c2 = c1.clone();\n        //\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61\n        Student stu1 = c2.getStu();\n        stu1.setName("\u674E\u56DB");\n\n        //\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\n        System.out.println("stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (stu == stu1));\n\n        c1.show();\n        c2.show();\n    }\n}\n```\n\n\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A\n\n<img src="\\img\\\u539F\u578B\u6A21\u5F0F2.png" style="zoom:80%;" />\n\n<div color="red">\u8BF4\u660E\uFF1A</div>\n\n\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\npublic class CitationTest1 {\n    public static void main(String[] args) throws Exception {\n        Citation c1 = new Citation();\n        Student stu = new Student("\u5F20\u4E09", "\u897F\u5B89");\n        c1.setStu(stu);\n\n        //\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"));\n        //\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D\n        oos.writeObject(c1);\n        oos.close();\n\n        //\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"));\n        //\u8BFB\u53D6\u5BF9\u8C61\n        Citation c2 = (Citation) ois.readObject();\n        //\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61\n        Student stu1 = c2.getStu();\n        stu1.setName("\u674E\u56DB");\n\n        //\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\n        System.out.println("stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (stu == stu1));\n\n        c1.show();\n        c2.show();\n    }\n}\n```\n\n\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A\n\n<img src="\\img\\\u539F\u578B\u6A21\u5F0F3.png" style="zoom:80%;" />\n\n> \u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002\n\n## 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F\n\n### 4.4.1 \u6982\u8FF0\n\n\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002\n\n<img src="/img/image-20200413225341516.png" style="zoom:60%;" />\n\n- \u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002\n- \u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002\n- \u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002\n\n### 4.4.2 \u7ED3\u6784\n\n\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002\n\n- \u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002\n\n- \u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002\n\n- \u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png" style="zoom:80%;" />\n\n### 4.4.3 \u5B9E\u4F8B\n\n**\u521B\u5EFA\u5171\u4EAB\u5355\u8F66**\n\n\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002\n\n\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png" style="zoom:80%;" />\n\n\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u81EA\u884C\u8F66\u7C7B\npublic class Bike {\n    private String frame;\n    private String seat;\n\n    public String getFrame() {\n        return frame;\n    }\n\n    public void setFrame(String frame) {\n        this.frame = frame;\n    }\n\n    public String getSeat() {\n        return seat;\n    }\n\n    public void setSeat(String seat) {\n        this.seat = seat;\n    }\n}\n\n// \u62BD\u8C61 builder \u7C7B\npublic abstract class Builder {\n\n    protected Bike mBike = new Bike();\n\n    public abstract void buildFrame();\n    public abstract void buildSeat();\n    public abstract Bike createBike();\n}\n\n//\u6469\u62DC\u5355\u8F66Builder\u7C7B\npublic class MobikeBuilder extends Builder {\n\n    @Override\n    public void buildFrame() {\n        mBike.setFrame("\u94DD\u5408\u91D1\u8F66\u67B6");\n    }\n\n    @Override\n    public void buildSeat() {\n        mBike.setSeat("\u771F\u76AE\u8F66\u5EA7");\n    }\n\n    @Override\n    public Bike createBike() {\n        return mBike;\n    }\n}\n\n//ofo\u5355\u8F66Builder\u7C7B\npublic class OfoBuilder extends Builder {\n\n    @Override\n    public void buildFrame() {\n        mBike.setFrame("\u78B3\u7EA4\u7EF4\u8F66\u67B6");\n    }\n\n    @Override\n    public void buildSeat() {\n        mBike.setSeat("\u6A61\u80F6\u8F66\u5EA7");\n    }\n\n    @Override\n    public Bike createBike() {\n        return mBike;\n    }\n}\n\n//\u6307\u6325\u8005\u7C7B\npublic class Director {\n    private Builder mBuilder;\n\n    public Director(Builder builder) {\n        mBuilder = builder;\n    }\n\n    public Bike construct() {\n        mBuilder.buildFrame();\n        mBuilder.buildSeat();\n        return mBuilder.createBike();\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        showBike(new OfoBuilder());\n        showBike(new MobikeBuilder());\n    }\n    private static void showBike(Builder builder) {\n        Director director = new Director(builder);\n        Bike bike = director.construct();\n        System.out.println(bike.getFrame());\n        System.out.println(bike.getSeat());\n    }\n}\n```\n\n**\u6CE8\u610F\uFF1A**\n\n\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408\n\n```java\n// \u62BD\u8C61 builder \u7C7B\npublic abstract class Builder {\n\n    protected Bike mBike = new Bike();\n\n    public abstract void buildFrame();\n    public abstract void buildSeat();\n    public abstract Bike createBike();\n\n    public Bike construct() {\n        this.buildFrame();\n        this.BuildSeat();\n        return this.createBike();\n    }\n}\n```\n\n**\u8BF4\u660E\uFF1A**\n\n\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002\n\n### 4.4.4 \u4F18\u7F3A\u70B9\n\n**\u4F18\u70B9\uFF1A**\n\n- \u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002\n- \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002\n- \u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002\n- \u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002\n\n**\u7F3A\u70B9\uFF1A**\n\n\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002\n\n### 4.4.5 \u4F7F\u7528\u573A\u666F\n\n\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002\n\n- \u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002\n- \u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002\n\n### 4.4.6 \u6A21\u5F0F\u6269\u5C55\n\n\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002\n\n\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\npublic class Phone {\n    private String cpu;\n    private String screen;\n    private String memory;\n    private String mainboard;\n\n    public Phone(String cpu, String screen, String memory, String mainboard) {\n        this.cpu = cpu;\n        this.screen = screen;\n        this.memory = memory;\n        this.mainboard = mainboard;\n    }\n\n    public String getCpu() {\n        return cpu;\n    }\n\n    public void setCpu(String cpu) {\n        this.cpu = cpu;\n    }\n\n    public String getScreen() {\n        return screen;\n    }\n\n    public void setScreen(String screen) {\n        this.screen = screen;\n    }\n\n    public String getMemory() {\n        return memory;\n    }\n\n    public void setMemory(String memory) {\n        this.memory = memory;\n    }\n\n    public String getMainboard() {\n        return mainboard;\n    }\n\n    public void setMainboard(String mainboard) {\n        this.mainboard = mainboard;\n    }\n\n    @Override\n    public String toString() {\n        return "Phone{" +\n                "cpu=\'" + cpu + \'\\\'\' +\n                ", screen=\'" + screen + \'\\\'\' +\n                ", memory=\'" + memory + \'\\\'\' +\n                ", mainboard=\'" + mainboard + \'\\\'\' +\n                \'}\';\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        //\u6784\u5EFAPhone\u5BF9\u8C61\n        Phone phone = new Phone("intel","\u4E09\u661F\u5C4F\u5E55","\u91D1\u58EB\u987F","\u534E\u7855");\n        System.out.println(phone);\n    }\n}\n```\n\n\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002\n\n\u91CD\u6784\u540E\u4EE3\u7801\uFF1A\n\n```java\npublic class Phone {\n\n    private String cpu;\n    private String screen;\n    private String memory;\n    private String mainboard;\n\n    private Phone(Builder builder) {\n        cpu = builder.cpu;\n        screen = builder.screen;\n        memory = builder.memory;\n        mainboard = builder.mainboard;\n    }\n\n    public static final class Builder {\n        private String cpu;\n        private String screen;\n        private String memory;\n        private String mainboard;\n\n        public Builder() {}\n\n        public Builder cpu(String val) {\n            cpu = val;\n            return this;\n        }\n        public Builder screen(String val) {\n            screen = val;\n            return this;\n        }\n        public Builder memory(String val) {\n            memory = val;\n            return this;\n        }\n        public Builder mainboard(String val) {\n            mainboard = val;\n            return this;\n        }\n        public Phone build() {\n            return new Phone(this);}\n    }\n    @Override\n    public String toString() {\n        return "Phone{" +\n                "cpu=\'" + cpu + \'\\\'\' +\n                ", screen=\'" + screen + \'\\\'\' +\n                ", memory=\'" + memory + \'\\\'\' +\n                ", mainboard=\'" + mainboard + \'\\\'\' +\n                \'}\';\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        Phone phone = new Phone.Builder()\n                .cpu("intel")\n                .mainboard("\u534E\u7855")\n                .memory("\u91D1\u58EB\u987F")\n                .screen("\u4E09\u661F")\n                .build();\n        System.out.println(phone);\n    }\n}\n```\n\n\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002\n\n## 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4\n\n### 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F\n\n\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\n\n\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002\n\n### 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F\n\n\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002\n\n\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002\n\n\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002\n\n# 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F\n\n\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002\n\n\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002\n\n\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A\n\n- \u4EE3\u7406\u6A21\u5F0F\n- \u9002\u914D\u5668\u6A21\u5F0F\n- \u88C5\u9970\u8005\u6A21\u5F0F\n- \u6865\u63A5\u6A21\u5F0F\n- \u5916\u89C2\u6A21\u5F0F\n- \u7EC4\u5408\u6A21\u5F0F\n- \u4EAB\u5143\u6A21\u5F0F\n\n## 5.1 \u4EE3\u7406\u6A21\u5F0F\n\n### 5.1.1 \u6982\u8FF0\n\n\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002\n\nJava \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002\n\n### 5.1.2 \u7ED3\u6784\n\n\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002\n- \u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002\n- \u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002\n\n### 5.1.3 \u9759\u6001\u4EE3\u7406\n\n\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002\n\n\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968\n\n\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="\\img\\\u9759\u6001\u4EE3\u7406.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u5356\u7968\u63A5\u53E3\npublic interface SellTickets {\n    void sell();\n}\n\n//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3\npublic class TrainStation implements SellTickets {\n\n    public void sell() {\n        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");\n    }\n}\n\n//\u4EE3\u552E\u70B9\npublic class ProxyPoint implements SellTickets {\n\n    private TrainStation station = new TrainStation();\n\n    public void sell() {\n        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528");\n        station.sell();\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        ProxyPoint pp = new ProxyPoint();\n        pp.sell();\n    }\n}\n```\n\n\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002\n\n### 5.1.4 JDK \u52A8\u6001\u4EE3\u7406\n\n\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u5356\u7968\u63A5\u53E3\npublic interface SellTickets {\n    void sell();\n}\n\n//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3\npublic class TrainStation implements SellTickets {\n\n    public void sell() {\n        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");\n    }\n}\n\n//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\npublic class ProxyFactory {\n\n    private TrainStation station = new TrainStation();\n\n    public SellTickets getProxyObject() {\n        //\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\n        /*\n            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A\n                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF\n                Class<?>[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3\n                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F\n         */\n        SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),\n                station.getClass().getInterfaces(),\n                new InvocationHandler() {\n                    /*\n                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A\n                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61\n                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B\n                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570\n                     */\n                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n\n                        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");\n                        //\u6267\u884C\u771F\u5B9E\u5BF9\u8C61\n                        Object result = method.invoke(station, args);\n                        return result;\n                    }\n                });\n        return sellTickets;\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\n        ProxyFactory factory = new ProxyFactory();\n\n        SellTickets proxyObject = factory.getProxyObject();\n        proxyObject.sell();\n    }\n}\n```\n\n<div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div>\n\n- ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F\n\n  ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A\n\n  ```java\n  package com.sun.proxy;\n\n  import com.itheima.proxy.dynamic.jdk.SellTickets;\n  import java.lang.reflect.InvocationHandler;\n  import java.lang.reflect.Method;\n  import java.lang.reflect.Proxy;\n  import java.lang.reflect.UndeclaredThrowableException;\n\n  public final class $Proxy0 extends Proxy implements SellTickets {\n      private static Method m1;\n      private static Method m2;\n      private static Method m3;\n      private static Method m0;\n\n      public $Proxy0(InvocationHandler invocationHandler) {\n          super(invocationHandler);\n      }\n\n      static {\n          try {\n              m1 = Class.forName("java.lang.Object").getMethod("equals", Class.forName("java.lang.Object"));\n              m2 = Class.forName("java.lang.Object").getMethod("toString", new Class[0]);\n              m3 = Class.forName("com.itheima.proxy.dynamic.jdk.SellTickets").getMethod("sell", new Class[0]);\n              m0 = Class.forName("java.lang.Object").getMethod("hashCode", new Class[0]);\n              return;\n          }\n          catch (NoSuchMethodException noSuchMethodException) {\n              throw new NoSuchMethodError(noSuchMethodException.getMessage());\n          }\n          catch (ClassNotFoundException classNotFoundException) {\n              throw new NoClassDefFoundError(classNotFoundException.getMessage());\n          }\n      }\n\n      public final boolean equals(Object object) {\n          try {\n              return (Boolean)this.h.invoke(this, m1, new Object[]{object});\n          }\n          catch (Error | RuntimeException throwable) {\n              throw throwable;\n          }\n          catch (Throwable throwable) {\n              throw new UndeclaredThrowableException(throwable);\n          }\n      }\n\n      public final String toString() {\n          try {\n              return (String)this.h.invoke(this, m2, null);\n          }\n          catch (Error | RuntimeException throwable) {\n              throw throwable;\n          }\n          catch (Throwable throwable) {\n              throw new UndeclaredThrowableException(throwable);\n          }\n      }\n\n      public final int hashCode() {\n          try {\n              return (Integer)this.h.invoke(this, m0, null);\n          }\n          catch (Error | RuntimeException throwable) {\n              throw throwable;\n          }\n          catch (Throwable throwable) {\n              throw new UndeclaredThrowableException(throwable);\n          }\n      }\n\n      public final void sell() {\n          try {\n              this.h.invoke(this, m3, null);\n              return;\n          }\n          catch (Error | RuntimeException throwable) {\n              throw throwable;\n          }\n          catch (Throwable throwable) {\n              throw new UndeclaredThrowableException(throwable);\n          }\n      }\n  }\n  ```\n\n  \u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A\n\n  - \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002\n  - \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002\n\n- \u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F\n\n  \u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A\n\n  ```java\n  //\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B\n  public final class $Proxy0 extends Proxy implements SellTickets {\n      private static Method m3;\n\n      public $Proxy0(InvocationHandler invocationHandler) {\n          super(invocationHandler);\n      }\n\n      static {\n          m3 = Class.forName("com.itheima.proxy.dynamic.jdk.SellTickets").getMethod("sell", new Class[0]);\n      }\n\n      public final void sell() {\n          this.h.invoke(this, m3, null);\n      }\n  }\n\n  //Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B\n  public class Proxy implements java.io.Serializable {\n  	protected InvocationHandler h;\n\n  	protected Proxy(InvocationHandler h) {\n          this.h = h;\n      }\n  }\n\n  //\u4EE3\u7406\u5DE5\u5382\u7C7B\n  public class ProxyFactory {\n\n      private TrainStation station = new TrainStation();\n\n      public SellTickets getProxyObject() {\n          SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),\n                  station.getClass().getInterfaces(),\n                  new InvocationHandler() {\n\n                      public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n\n                          System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");\n                          Object result = method.invoke(station, args);\n                          return result;\n                      }\n                  });\n          return sellTickets;\n      }\n  }\n\n\n  //\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\n  public class Client {\n      public static void main(String[] args) {\n          //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\n          ProxyFactory factory = new ProxyFactory();\n          SellTickets proxyObject = factory.getProxyObject();\n          proxyObject.sell();\n      }\n  }\n  ```\n\n\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A\n\n    1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5\n    2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\n    3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5\n    4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5\n\n### 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406\n\n\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002\n\n\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002\n\nCGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002\n\nCGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A\n\n```xml\n<dependency>\n    <groupId>cglib</groupId>\n    <artifactId>cglib</artifactId>\n    <version>2.2.2</version>\n</dependency>\n```\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u706B\u8F66\u7AD9\npublic class TrainStation {\n\n    public void sell() {\n        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");\n    }\n}\n\n//\u4EE3\u7406\u5DE5\u5382\npublic class ProxyFactory implements MethodInterceptor {\n\n    private TrainStation target = new TrainStation();\n\n    public TrainStation getProxyObject() {\n        //\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570\n        Enhancer enhancer =new Enhancer();\n        //\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61\n        enhancer.setSuperclass(target.getClass());\n        //\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570\n        enhancer.setCallback(this);\n        //\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\n        TrainStation obj = (TrainStation) enhancer.create();\n        return obj;\n    }\n\n    /*\n        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A\n            o \uFF1A \u4EE3\u7406\u5BF9\u8C61\n            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B\n            args \uFF1A \u5B9E\u9645\u53C2\u6570\n            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B\n     */\n    public TrainStation intercept(Object o, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {\n        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");\n        TrainStation result = (TrainStation) methodProxy.invokeSuper(o, args);\n        return result;\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        //\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61\n        ProxyFactory factory = new ProxyFactory();\n        //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\n        TrainStation proxyObject = factory.getProxyObject();\n\n        proxyObject.sell();\n    }\n}\n```\n\n### 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4\n\n- jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406\n\n  \u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002\n\n  \u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002\n\n- \u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406\n\n  \u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002\n\n  \u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898\n\n### 5.1.7 \u4F18\u7F3A\u70B9\n\n**\u4F18\u70B9\uFF1A**\n\n- \u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B\n- \u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B\n- \u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B\n\n**\u7F3A\u70B9\uFF1A**\n\n- \u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B\n\n### 5.1.8 \u4F7F\u7528\u573A\u666F\n\n- \u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406\n\n  \u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002\n\n- \u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406\n\n  \u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002\n\n- \u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406\n\n  \u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002\n\n## 5.2 \u9002\u914D\u5668\u6A21\u5F0F\n\n### 5.2.1 \u6982\u8FF0\n\n\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002\n\n![](\\img\\\u8F6C\u63A5\u5934.png)\n\n**\u5B9A\u4E49\uFF1A**\n\n\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002\n\n\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002\n\n### 5.2.2 \u7ED3\u6784\n\n\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\n\n- \u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002\n- \u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002\n- \u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002\n\n### 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F\n\n\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002\n\n\u3010\u4F8B\u3011\u8BFB\u5361\u5668\n\n\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//SD\u5361\u7684\u63A5\u53E3\npublic interface SDCard {\n    //\u8BFB\u53D6SD\u5361\u65B9\u6CD5\n    String readSD();\n    //\u5199\u5165SD\u5361\u529F\u80FD\n    void writeSD(String msg);\n}\n\n//SD\u5361\u5B9E\u73B0\u7C7B\npublic class SDCardImpl implements SDCard {\n    public String readSD() {\n        String msg = "sd card read a msg :hello word SD";\n        return msg;\n    }\n\n    public void writeSD(String msg) {\n        System.out.println("sd card write msg : " + msg);\n    }\n}\n\n//\u7535\u8111\u7C7B\npublic class Computer {\n\n    public String readSD(SDCard sdCard) {\n        if(sdCard == null) {\n            throw new NullPointerException("sd card null");\n        }\n        return sdCard.readSD();\n    }\n}\n\n//TF\u5361\u63A5\u53E3\npublic interface TFCard {\n    //\u8BFB\u53D6TF\u5361\u65B9\u6CD5\n    String readTF();\n    //\u5199\u5165TF\u5361\u529F\u80FD\n    void writeTF(String msg);\n}\n\n//TF\u5361\u5B9E\u73B0\u7C7B\npublic class TFCardImpl implements TFCard {\n\n    public String readTF() {\n        String msg ="tf card read msg : hello word tf card";\n        return msg;\n    }\n\n    public void writeTF(String msg) {\n        System.out.println("tf card write a msg : " + msg);\n    }\n}\n\n//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09\npublic class SDAdapterTF extends TFCardImpl implements SDCard {\n\n    public String readSD() {\n        System.out.println("adapter read tf card ");\n        return readTF();\n    }\n\n    public void writeSD(String msg) {\n        System.out.println("adapter write tf card");\n        writeTF(msg);\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        Computer computer = new Computer();\n        SDCard sdCard = new SDCardImpl();\n        System.out.println(computer.readSD(sdCard));\n\n        System.out.println("------------");\n\n        SDAdapterTF adapter = new SDAdapterTF();\n        System.out.println(computer.readSD(adapter));\n    }\n}\n```\n\n\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002\n\n### 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\n\n\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002\n\n\u3010\u4F8B\u3011\u8BFB\u5361\u5668\n\n\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="\\img\\\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002\n\n```java\n//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09\npublic class SDAdapterTF  implements SDCard {\n\n    private TFCard tfCard;\n\n    public SDAdapterTF(TFCard tfCard) {\n        this.tfCard = tfCard;\n    }\n\n    public String readSD() {\n        System.out.println("adapter read tf card ");\n        return tfCard.readTF();\n    }\n\n    public void writeSD(String msg) {\n        System.out.println("adapter write tf card");\n        tfCard.writeTF(msg);\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        Computer computer = new Computer();\n        SDCard sdCard = new SDCardImpl();\n        System.out.println(computer.readSD(sdCard));\n\n        System.out.println("------------");\n\n        TFCard tfCard = new TFCardImpl();\n        SDAdapterTF adapter = new SDAdapterTF(tfCard);\n        System.out.println(computer.readSD(adapter));\n    }\n}\n```\n\n> \u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002\n\n### 5.2.5 \u5E94\u7528\u573A\u666F\n\n- \u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002\n- \u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002\n\n### 5.2.6 JDK \u6E90\u7801\u89E3\u6790\n\nReader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002\n\nInputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A\n\n```java\npublic int read() throws IOException {\n    return sd.read();\n}\n\npublic int read(char cbuf[], int offset, int length) throws IOException {\n    return sd.read(cbuf, offset, length);\n}\n```\n\n\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A\n\n![](\\img\\\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png)\n\n\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A\n\n- InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002\n- StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002\n\n<div color="red">\u7ED3\u8BBA\uFF1A</div>\n\n\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002\n\n## 5.3 \u88C5\u9970\u8005\u6A21\u5F0F\n\n### 5.3.1 \u6982\u8FF0\n\n\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002\n\n\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002\n\n<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png" style="zoom:80%;" />\n\n\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A\n\n- \u6269\u5C55\u6027\u4E0D\u597D\n\n  \u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002\n\n- \u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B\n\n**\u5B9A\u4E49\uFF1A**\n\n\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002\n\n### 5.3.2 \u7ED3\u6784\n\n\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002\n- \u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002\n- \u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002\n- \u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002\n\n### 5.3.3 \u6848\u4F8B\n\n\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F.png" style="zoom:75%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u5FEB\u9910\u63A5\u53E3\npublic abstract class FastFood {\n    private float price;\n    private String desc;\n\n    public FastFood() {\n    }\n\n    public FastFood(float price, String desc) {\n        this.price = price;\n        this.desc = desc;\n    }\n\n    public void setPrice(float price) {\n        this.price = price;\n    }\n\n    public float getPrice() {\n        return price;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public void setDesc(String desc) {\n        this.desc = desc;\n    }\n\n    public abstract float cost();  //\u83B7\u53D6\u4EF7\u683C\n}\n\n//\u7092\u996D\npublic class FriedRice extends FastFood {\n\n    public FriedRice() {\n        super(10, "\u7092\u996D");\n    }\n\n    public float cost() {\n        return getPrice();\n    }\n}\n\n//\u7092\u9762\npublic class FriedNoodles extends FastFood {\n\n    public FriedNoodles() {\n        super(12, "\u7092\u9762");\n    }\n\n    public float cost() {\n        return getPrice();\n    }\n}\n\n//\u914D\u6599\u7C7B\npublic abstract class Garnish extends FastFood {\n\n    private FastFood fastFood;\n\n    public FastFood getFastFood() {\n        return fastFood;\n    }\n\n    public void setFastFood(FastFood fastFood) {\n        this.fastFood = fastFood;\n    }\n\n    public Garnish(FastFood fastFood, float price, String desc) {\n        super(price,desc);\n        this.fastFood = fastFood;\n    }\n}\n\n//\u9E21\u86CB\u914D\u6599\npublic class Egg extends Garnish {\n\n    public Egg(FastFood fastFood) {\n        super(fastFood,1,"\u9E21\u86CB");\n    }\n\n    public float cost() {\n        return getPrice() + getFastFood().getPrice();\n    }\n\n    @Override\n    public String getDesc() {\n        return super.getDesc() + getFastFood().getDesc();\n    }\n}\n\n//\u57F9\u6839\u914D\u6599\npublic class Bacon extends Garnish {\n\n    public Bacon(FastFood fastFood) {\n\n        super(fastFood,2,"\u57F9\u6839");\n    }\n\n    @Override\n    public float cost() {\n        return getPrice() + getFastFood().getPrice();\n    }\n\n    @Override\n    public String getDesc() {\n        return super.getDesc() + getFastFood().getDesc();\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        //\u70B9\u4E00\u4EFD\u7092\u996D\n        FastFood food = new FriedRice();\n        //\u82B1\u8D39\u7684\u4EF7\u683C\n        System.out.println(food.getDesc() + " " + food.cost() + "\u5143");\n\n        System.out.println("========");\n        //\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D\n        FastFood food1 = new FriedRice();\n\n        food1 = new Egg(food1);\n        //\u82B1\u8D39\u7684\u4EF7\u683C\n        System.out.println(food1.getDesc() + " " + food1.cost() + "\u5143");\n\n        System.out.println("========");\n        //\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762\n        FastFood food2 = new FriedNoodles();\n        food2 = new Bacon(food2);\n        //\u82B1\u8D39\u7684\u4EF7\u683C\n        System.out.println(food2.getDesc() + " " + food2.cost() + "\u5143");\n    }\n}\n```\n\n**\u597D\u5904\uFF1A**\n\n- \u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002\n\n- \u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002\n\n### 5.3.4 \u4F7F\u7528\u573A\u666F\n\n- \u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002\n\n  \u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A\n\n  - \u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B\n  - \u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09\n\n- \u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002\n\n- \u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002\n\n### 5.3.5 JDK \u6E90\u7801\u89E3\u6790\n\nIO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002\n\n\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter\n\n```java\npublic class Demo {\n    public static void main(String[] args) throws Exception{\n        //\u521B\u5EFABufferedWriter\u5BF9\u8C61\n        //\u521B\u5EFAFileWriter\u5BF9\u8C61\n        FileWriter fw = new FileWriter("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt");\n        BufferedWriter bw = new BufferedWriter(fw);\n\n        //\u5199\u6570\u636E\n        bw.write("hello Buffered");\n\n        bw.close();\n    }\n}\n```\n\n\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A\n\n<img src="\\img\\\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png" style="zoom:80%;" />\n\n> <div color="red">\u5C0F\u7ED3\uFF1A</div>\n>\n> \u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002\n\n### 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B\n\n\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A\n\n- \u76F8\u540C\u70B9\uFF1A\n  - \u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3\n  - \u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61\n  - \u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5\n- \u4E0D\u540C\u70B9\uFF1A\n  - \u76EE\u7684\u4E0D\u540C\n    \u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61\n    \u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61\n  - \u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C\n    \u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012\n    \u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61\n\n## 5.4 \u6865\u63A5\u6A21\u5F0F\n\n### 5.4.1 \u6982\u8FF0\n\n\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A\n\n![](\\img\\image-20200207194617620.png)\n\n\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002\n\n\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002\n\n**\u5B9A\u4E49\uFF1A**\n\n\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002\n\n### 5.4.2 \u7ED3\u6784\n\n\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002\n- \u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002\n- \u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002\n- \u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002\n\n### 5.4.3 \u6848\u4F8B\n\n\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668\n\n\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="\\img\\\u6865\u63A5\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u89C6\u9891\u6587\u4EF6\npublic interface VideoFile {\n    void decode(String fileName);\n}\n\n//avi\u6587\u4EF6\npublic class AVIFile implements VideoFile {\n    public void decode(String fileName) {\n        System.out.println("avi\u89C6\u9891\u6587\u4EF6\uFF1A"+ fileName);\n    }\n}\n\n//rmvb\u6587\u4EF6\npublic class REVBBFile implements VideoFile {\n\n    public void decode(String fileName) {\n        System.out.println("rmvb\u6587\u4EF6\uFF1A" + fileName);\n    }\n}\n\n//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C\npublic abstract class OperatingSystemVersion {\n\n    protected VideoFile videoFile;\n\n    public OperatingSystemVersion(VideoFile videoFile) {\n        this.videoFile = videoFile;\n    }\n\n    public abstract void play(String fileName);\n}\n\n//Windows\u7248\u672C\npublic class Windows extends OperatingSystem {\n\n    public Windows(VideoFile videoFile) {\n        super(videoFile);\n    }\n\n    public void play(String fileName) {\n        videoFile.decode(fileName);\n    }\n}\n\n//mac\u7248\u672C\npublic class Mac extends OperatingSystemVersion {\n\n    public Mac(VideoFile videoFile) {\n        super(videoFile);\n    }\n\n    public void play(String fileName) {\n		videoFile.decode(fileName);\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        OperatingSystem os = new Windows(new AVIFile());\n        os.play("\u6218\u72FC3");\n    }\n}\n```\n\n**\u597D\u5904\uFF1A**\n\n- \u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002\n\n  \u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002\n\n- \u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E\n\n### 5.4.4 \u4F7F\u7528\u573A\u666F\n\n- \u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002\n- \u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002\n- \u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002\n\n## 5.5 \u5916\u89C2\u6A21\u5F0F\n\n### 5.5.1 \u6982\u8FF0\n\n\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002\n\n**\u5B9A\u4E49\uFF1A**\n\n\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002\n\n\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528\n\n![](\\img\\\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg)\n\n### 5.5.2 \u7ED3\u6784\n\n\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\n\n- \u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002\n- \u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002\n\n### 5.5.3 \u6848\u4F8B\n\n\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236\n\n\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u5916\u89C2\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u706F\u7C7B\npublic class Light {\n    public void on() {\n        System.out.println("\u6253\u5F00\u4E86\u706F....");\n    }\n\n    public void off() {\n        System.out.println("\u5173\u95ED\u4E86\u706F....");\n    }\n}\n\n//\u7535\u89C6\u7C7B\npublic class TV {\n    public void on() {\n        System.out.println("\u6253\u5F00\u4E86\u7535\u89C6....");\n    }\n\n    public void off() {\n        System.out.println("\u5173\u95ED\u4E86\u7535\u89C6....");\n    }\n}\n\n//\u63A7\u5236\u7C7B\npublic class AirCondition {\n    public void on() {\n        System.out.println("\u6253\u5F00\u4E86\u7A7A\u8C03....");\n    }\n\n    public void off() {\n        System.out.println("\u5173\u95ED\u4E86\u7A7A\u8C03....");\n    }\n}\n\n//\u667A\u80FD\u97F3\u7BB1\npublic class SmartAppliancesFacade {\n\n    private Light light;\n    private TV tv;\n    private AirCondition airCondition;\n\n    public SmartAppliancesFacade() {\n        light = new Light();\n        tv = new TV();\n        airCondition = new AirCondition();\n    }\n\n    public void say(String message) {\n        if(message.contains("\u6253\u5F00")) {\n            on();\n        } else if(message.contains("\u5173\u95ED")) {\n            off();\n        } else {\n            System.out.println("\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01");\n        }\n    }\n\n    //\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668\n    private void on() {\n        System.out.println("\u8D77\u5E8A\u4E86");\n        light.on();\n        tv.on();\n        airCondition.on();\n    }\n\n    //\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668\n    private void off() {\n        System.out.println("\u7761\u89C9\u4E86");\n        light.off();\n        tv.off();\n        airCondition.off();\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        //\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61\n        SmartAppliancesFacade facade = new SmartAppliancesFacade();\n        //\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92\n        facade.say("\u6253\u5F00\u5BB6\u7535");\n        facade.say("\u5173\u95ED\u5BB6\u7535");\n    }\n}\n```\n\n**\u597D\u5904\uFF1A**\n\n- \u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002\n- \u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002\n\n**\u7F3A\u70B9\uFF1A**\n\n- \u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6\n\n### 5.5.4 \u4F7F\u7528\u573A\u666F\n\n- \u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002\n- \u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002\n- \u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002\n\n### 5.5.5 \u6E90\u7801\u89E3\u6790\n\n\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002\n\n<img src="/img/image-20200207234545691.png" style="zoom:60%;" />\n\nRequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A\n\n<img src="/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:70%;" />\n\n**\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F**\n\n\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002\n\n## 5.6 \u7EC4\u5408\u6A21\u5F0F\n\n### 5.6.1 \u6982\u8FF0\n\n<img src="/img/image-20200208180417291.png" style="zoom:60%;" />\n\n\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002\n\n**\u5B9A\u4E49\uFF1A**\n\n\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002\n\n### 5.6.2 \u7ED3\u6784\n\n\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002\n- \u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002\n- \u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002\n\n### 5.6.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355\n\n\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002\n\n<img src="/img/image-20200208182322313.png" style="zoom:80%;" />\n\n\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A\n\n<img src="/img/\u7EC4\u5408\u6A21\u5F0F.png" style="zoom:80%;" />\n\n**\u4EE3\u7801\u5B9E\u73B0\uFF1A**\n\n\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002\n\n```java\n//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B\npublic abstract class MenuComponent {\n\n    protected String name;\n    protected int level;\n\n    //\u6DFB\u52A0\u83DC\u5355\n    public void add(MenuComponent menuComponent){\n        throw new UnsupportedOperationException();\n    }\n\n    //\u79FB\u9664\u83DC\u5355\n    public void remove(MenuComponent menuComponent){\n        throw new UnsupportedOperationException();\n    }\n\n    //\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355\n    public MenuComponent getChild(int i){\n        throw new UnsupportedOperationException();\n    }\n\n    //\u83B7\u53D6\u83DC\u5355\u540D\u79F0\n    public String getName(){\n        return name;\n    }\n\n    public void print(){\n        throw new UnsupportedOperationException();\n    }\n}\n```\n\n\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002\n\n```java\npublic class Menu extends MenuComponent {\n\n    private List<MenuComponent> menuComponentList;\n\n    public Menu(String name,int level){\n        this.level = level;\n        this.name = name;\n        menuComponentList = new ArrayList<MenuComponent>();\n    }\n\n    @Override\n    public void add(MenuComponent menuComponent) {\n        menuComponentList.add(menuComponent);\n    }\n\n    @Override\n    public void remove(MenuComponent menuComponent) {\n        menuComponentList.remove(menuComponent);\n    }\n\n    @Override\n    public MenuComponent getChild(int i) {\n        return menuComponentList.get(i);\n    }\n\n    @Override\n    public void print() {\n\n        for (int i = 1; i < level; i++) {\n            System.out.print("--");\n        }\n        System.out.println(name);\n        for (MenuComponent menuComponent : menuComponentList) {\n            menuComponent.print();\n        }\n    }\n}\n```\n\nMenu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002\n\n```java\npublic class MenuItem extends MenuComponent {\n\n    public MenuItem(String name,int level) {\n        this.name = name;\n        this.level = level;\n    }\n\n    @Override\n    public void print() {\n        for (int i = 1; i < level; i++) {\n            System.out.print("--");\n        }\n        System.out.println(name);\n    }\n}\n```\n\nMenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002\n\n### 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B\n\n\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002\n\n- \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\n\n  \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D `MenuComponent` \u58F0\u660E\u4E86 `add`\u3001`remove` \u3001`getChild` \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002\n\n  \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09\n\n- \u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\n\n  \u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 `Menu` \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002\n\n  <img src="/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png" style="zoom:80%;" />\n\n### 5.6.5 \u4F18\u70B9\n\n- \u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002\n- \u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002\n- \u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002\n- \u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002\n\n### 5.6.6 \u4F7F\u7528\u573A\u666F\n\n\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002\n\n## 5.7 \u4EAB\u5143\u6A21\u5F0F\n\n### 5.7.1 \u6982\u8FF0\n\n**\u5B9A\u4E49\uFF1A**\n\n\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002\n\n### 5.7.2 \u7ED3\u6784\n\n\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A\n\n1. \u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002\n2. \u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002\n\n\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002\n- \u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002\n- \u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002\n- \u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002\n\n### 5.7.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757\n\n\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002\n\n<img src="/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg" style="zoom:60%;" />\n\n**\u5148\u6765\u770B\u7C7B\u56FE\uFF1A**\n\n<img src="/img/\u4EAB\u5143\u6A21\u5F0F.png" style="zoom:80%;" />\n\n**\u4EE3\u7801\u5982\u4E0B\uFF1A**\n\n\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002\n\n```java\npublic abstract class AbstractBox {\n    public abstract String getShape();\n\n    public void display(String color) {\n        System.out.println("\u65B9\u5757\u5F62\u72B6\uFF1A" + this.getShape() + " \u989C\u8272\uFF1A" + color);\n    }\n}\n```\n\n\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002\n\n```java\npublic class IBox extends AbstractBox {\n\n    @Override\n    public String getShape() {\n        return "I";\n    }\n}\n\npublic class LBox extends AbstractBox {\n\n    @Override\n    public String getShape() {\n        return "L";\n    }\n}\n\npublic class OBox extends AbstractBox {\n\n    @Override\n    public String getShape() {\n        return "O";\n    }\n}\n```\n\n\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002\n\n```java\npublic class BoxFactory {\n\n    private static HashMap<String, AbstractBox> map;\n\n    private BoxFactory() {\n        map = new HashMap<String, AbstractBox>();\n        AbstractBox iBox = new IBox();\n        AbstractBox lBox = new LBox();\n        AbstractBox oBox = new OBox();\n        map.put("I", iBox);\n        map.put("L", lBox);\n        map.put("O", oBox);\n    }\n\n    public static final BoxFactory getInstance() {\n        return SingletonHolder.INSTANCE;\n    }\n\n    private static class SingletonHolder {\n        private static final BoxFactory INSTANCE = new BoxFactory();\n    }\n\n    public AbstractBox getBox(String key) {\n        return map.get(key);\n    }\n}\n```\n\n### 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F\n\n**1\uFF0C\u4F18\u70B9**\n\n- \u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD\n- \u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742\n\n**3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A**\n\n- \u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002\n- \u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002\n- \u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002\n\n### 5.7.6 JDK \u6E90\u7801\u89E3\u6790\n\nInteger \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A\n\n```java\npublic class Demo {\n    public static void main(String[] args) {\n        Integer i1 = 127;\n        Integer i2 = 127;\n\n        System.out.println("i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (i1 == i2));\n\n        Integer i3 = 128;\n        Integer i4 = 128;\n\n        System.out.println("i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (i3 == i4));\n    }\n}\n```\n\n\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A\n\n<img src="/img/image-20200208212930857.png" style="zoom:80%;" />\n\n\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\npublic class Demo {\n    public static void main(String[] args) {\n        Integer i1 = Integer.valueOf((int)127);\n        Integer i2 Integer.valueOf((int)127);\n        System.out.println((String)new StringBuilder().append((String)"i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f").append((boolean)(i1 == i2)).toString());\n        Integer i3 = Integer.valueOf((int)128);\n        Integer i4 = Integer.valueOf((int)128);\n        System.out.println((String)new StringBuilder().append((String)"i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f").append((boolean)(i3 == i4)).toString());\n    }\n}\n```\n\n\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F `valueOf()` \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF\n\n```java\npublic final class Integer extends Number implements Comparable<Integer> {\n\n	public static Integer valueOf(int i) {\n        if (i >= IntegerCache.low && i <= IntegerCache.high)\n            return IntegerCache.cache[i + (-IntegerCache.low)];\n        return new Integer(i);\n    }\n\n    private static class IntegerCache {\n        static final int low = -128;\n        static final int high;\n        static final Integer cache[];\n\n        static {\n            int h = 127;\n            String integerCacheHighPropValue =\n                sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");\n            if (integerCacheHighPropValue != null) {\n                try {\n                    int i = parseInt(integerCacheHighPropValue);\n                    i = Math.max(i, 127);\n                    // Maximum array size is Integer.MAX_VALUE\n                    h = Math.min(i, Integer.MAX_VALUE - (-low) -1);\n                } catch( NumberFormatException nfe) {\n                }\n            }\n            high = h;\n            cache = new Integer[(high - low) + 1];\n            int j = low;\n            for(int k = 0; k < cache.length; k++)\n                cache[k] = new Integer(j++);\n            // range [-128, 127] must be interned (JLS7 5.1.7)\n            assert IntegerCache.high >= 127;\n        }\n\n        private IntegerCache() {}\n    }\n}\n```\n\n\u53EF\u4EE5\u770B\u5230 `Integer` \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 `-128 ~ 127` \u4E4B\u95F4\u6570\u7684 `Integer` \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 `valueOf` \u65F6\u5982\u679C\u53C2\u6570\u5728 `-128 ~ 127` \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 `Integer` \u5BF9\u8C61\u3002\n\n# 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F\n\n\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002\n\n\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002\n\n\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A\n\n- \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\n- \u7B56\u7565\u6A21\u5F0F\n- \u547D\u4EE4\u6A21\u5F0F\n- \u804C\u8D23\u94FE\u6A21\u5F0F\n- \u72B6\u6001\u6A21\u5F0F\n- \u89C2\u5BDF\u8005\u6A21\u5F0F\n- \u4E2D\u4ECB\u8005\u6A21\u5F0F\n- \u8FED\u4EE3\u5668\u6A21\u5F0F\n- \u8BBF\u95EE\u8005\u6A21\u5F0F\n- \u5907\u5FD8\u5F55\u6A21\u5F0F\n- \u89E3\u91CA\u5668\u6A21\u5F0F\n\n\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002\n\n## 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\n\n### 6.1.1 \u6982\u8FF0\n\n\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002\n\n\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002\n\n**\u5B9A\u4E49\uFF1A**\n\n\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002\n\n### 6.1.2 \u7ED3\u6784\n\n\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002\n\n  - \u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002\n\n  - \u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A\n\n    - \u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002\n\n    - \u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002\n\n    - \u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002\n\n      \u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002\n\n- \u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002\n\n### 6.1.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u7092\u83DC\n\n\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\npublic abstract class AbstractClass {\n\n    public final void cookProcess() {\n        //\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9\n        this.pourOil();\n        //\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\n        this.heatOil();\n        //\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\n        this.pourVegetable();\n        //\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\n        this.pourSauce();\n        //\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\n        this.fry();\n    }\n\n    public void pourOil() {\n        System.out.println("\u5012\u6CB9");\n    }\n\n    //\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0\n    public void heatOil() {\n        System.out.println("\u70ED\u6CB9");\n    }\n\n    //\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09\n    public abstract void pourVegetable();\n\n    //\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837\n    public abstract void pourSauce();\n\n\n    //\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0\n    public void fry(){\n        System.out.println("\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A");\n    }\n}\n\npublic class ConcreteClass_BaoCai extends AbstractClass {\n\n    @Override\n    public void pourVegetable() {\n        System.out.println("\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC");\n    }\n\n    @Override\n    public void pourSauce() {\n        System.out.println("\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912");\n    }\n}\n\npublic class ConcreteClass_CaiXin extends AbstractClass {\n    @Override\n    public void pourVegetable() {\n        System.out.println("\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3");\n    }\n\n    @Override\n    public void pourSauce() {\n        System.out.println("\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9");\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        //\u7092\u624B\u6495\u5305\u83DC\n        ConcreteClass_BaoCai baoCai = new ConcreteClass_BaoCai();\n        baoCai.cookProcess();\n\n        //\u7092\u849C\u84C9\u83DC\u5FC3\n        ConcreteClass_CaiXin caiXin = new ConcreteClass_CaiXin();\n        caiXin.cookProcess();\n    }\n}\n```\n\n> \u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002\n\n### 6.1.3 \u4F18\u7F3A\u70B9\n\n**\u4F18\u70B9\uFF1A**\n\n- \u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027\n\n  \u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002\n\n- \u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236\n\n  \u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002\n\n**\u7F3A\u70B9\uFF1A**\n\n- \u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002\n- \u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002\n\n### 6.1.4 \u9002\u7528\u573A\u666F\n\n- \u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002\n- \u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002\n\n### 6.1.5 JDK \u6E90\u7801\u89E3\u6790\n\nInputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A `read()` \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A\n\n```java\npublic abstract class InputStream implements Closeable {\n    //\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199\n    public abstract int read() throws IOException;\n\n    public int read(byte b[]) throws IOException {\n        return read(b, 0, b.length);\n    }\n\n    public int read(byte b[], int off, int len) throws IOException {\n        if (b == null) {\n            throw new NullPointerException();\n        } else if (off < 0 || len < 0 || len > b.length - off) {\n            throw new IndexOutOfBoundsException();\n        } else if (len == 0) {\n            return 0;\n        }\n\n        int c = read(); //\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\n        if (c == -1) {\n            return -1;\n        }\n        b[off] = (byte)c;\n\n        int i = 1;\n        try {\n            for (; i < len ; i++) {\n                c = read();\n                if (c == -1) {\n                    break;\n                }\n                b[off + i] = (byte)c;\n            }\n        } catch (IOException ee) {\n        }\n        return i;\n    }\n}\n```\n\n\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 `read()` \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C `read(byte b[])` \u65B9\u6CD5\u8C03\u7528\u4E86 `read(byte b[], int off, int len)` \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002\n\n\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 `read()` \u65B9\u6CD5\u3002\n\n\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002\n\n## 6.2 \u7B56\u7565\u6A21\u5F0F\n\n### 6.2.1 \u6982\u8FF0\n\n\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002\n\n<img src="/img/image-20200210143039168.png" style="zoom:80%;" />\n\n\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002\n\n<img src="/img/image-20200210144457478.png" style="zoom:70%;" />\n\n**\u5B9A\u4E49\uFF1A**\n\n\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002\n\n### 6.2.2 \u7ED3\u6784\n\n\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A\n\n- \u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002\n- \u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002\n- \u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002\n\n### 6.2.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8\n\n\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u7B56\u7565\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3\n\n```java\npublic interface Strategy {\n    void show();\n}\n```\n\n\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8\n\n```java\n//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A\npublic class StrategyA implements Strategy {\n\n    public void show() {\n        System.out.println("\u4E70\u4E00\u9001\u4E00");\n    }\n}\n\n//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B\npublic class StrategyB implements Strategy {\n\n    public void show() {\n        System.out.println("\u6EE1200\u5143\u51CF50\u5143");\n    }\n}\n\n//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C\npublic class StrategyC implements Strategy {\n\n    public void show() {\n        System.out.println("\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1");\n    }\n}\n```\n\n\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458\n\n```java\npublic class SalesMan {\n    //\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528\n    private Strategy strategy;\n\n    public SalesMan(Strategy strategy) {\n        this.strategy = strategy;\n    }\n\n    //\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8\n    public void salesManShow(){\n        strategy.show();\n    }\n}\n```\n\n### 6.2.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\n\n  \u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002\n\n- \u6613\u4E8E\u6269\u5C55\n\n  \u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C\n\n- \u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n- \u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002\n- \u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002\n\n### 6.2.5 \u4F7F\u7528\u573A\u666F\n\n- \u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002\n- \u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002\n- \u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002\n- \u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002\n- \u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002\n\n### 6.2.6 JDK \u6E90\u7801\u89E3\u6790\n\n`Comparator` \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A `sort()` \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A\n\n```java\npublic class Arrays{\n    public static <T> void sort(T[] a, Comparator<? super T> c) {\n        if (c == null) {\n            sort(a);\n        } else {\n            if (LegacyMergeSort.userRequested)\n                legacyMergeSort(a, c);\n            else\n                TimSort.sort(a, 0, a.length, c, null, 0, 0);\n        }\n    }\n}\n```\n\nArrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002\n\n```java\npublic class demo {\n    public static void main(String[] args) {\n\n        Integer[] data = {12, 2, 3, 2, 4, 5, 1};\n        // \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F\n        Arrays.sort(data, new Comparator<Integer>() {\n            public int compare(Integer o1, Integer o2) {\n                return o2 - o1;\n            }\n        });\n        System.out.println(Arrays.toString(data)); //[12, 5, 4, 3, 2, 2, 1]\n    }\n}\n```\n\n\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 `compare()` \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 `sort()` \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\nclass TimSort<T> {\n    static <T> void sort(T[] a, int lo, int hi, Comparator<? super T> c,\n                         T[] work, int workBase, int workLen) {\n        assert c != null && a != null && lo >= 0 && lo <= hi && hi <= a.length;\n\n        int nRemaining  = hi - lo;\n        if (nRemaining < 2)\n            return;  // Arrays of size 0 and 1 are always sorted\n\n        // If array is small, do a "mini-TimSort" with no merges\n        if (nRemaining < MIN_MERGE) {\n            int initRunLen = countRunAndMakeAscending(a, lo, hi, c);\n            binarySort(a, lo, hi, lo + initRunLen, c);\n            return;\n        }\n        ...\n    }\n\n    private static <T> int countRunAndMakeAscending(T[] a, int lo, int hi,Comparator<? super T> c) {\n        assert lo < hi;\n        int runHi = lo + 1;\n        if (runHi == hi)\n            return 1;\n\n        // Find end of run, and reverse range if descending\n        if (c.compare(a[runHi++], a[lo]) < 0) { // Descending\n            while (runHi < hi && c.compare(a[runHi], a[runHi - 1]) < 0)\n                runHi++;\n            reverseRange(a, lo, runHi);\n        } else {                              // Ascending\n            while (runHi < hi && c.compare(a[runHi], a[runHi - 1]) >= 0)\n                runHi++;\n        }\n\n        return runHi - lo;\n    }\n}\n```\n\n\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 `countRunAndMakeAscending()` \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002\n\n## 6.3 \u547D\u4EE4\u6A21\u5F0F\n\n### 6.3.1 \u6982\u8FF0\n\n\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002\n\n<img src="/img/image-20200211130313251.png" style="zoom:60%;" />\n\n**\u5B9A\u4E49\uFF1A**\n\n\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002\n\n### 6.3.2 \u7ED3\u6784\n\n\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002\n- \u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002\n- \u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002\n- \u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002\n\n### 6.3.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002\n\n\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002\n\n\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002\n\n\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u547D\u4EE4\u6A21\u5F0F.png" style="zoom:75%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\npublic interface Command {\n    void execute();//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5\n}\n\npublic class OrderCommand implements Command {\n\n    //\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61\n    private SeniorChef receiver;\n    private Order order;\n\n    public OrderCommand(SeniorChef receiver, Order order){\n        this.receiver = receiver;\n        this.order = order;\n    }\n\n    public void execute()  {\n        System.out.println(order.getDiningTable() + "\u684C\u7684\u8BA2\u5355\uFF1A");\n        Set<String> keys = order.getFoodDic().keySet();\n        for (String key : keys) {\n            receiver.makeFood(order.getFoodDic().get(key),key);\n        }\n\n        try {\n            Thread.sleep(100);//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n\n        System.out.println(order.getDiningTable() + "\u684C\u7684\u996D\u5F04\u597D\u4E86");\n    }\n}\n\npublic class Order {\n    // \u9910\u684C\u53F7\u7801\n    private int diningTable;\n\n    // \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570\n    private Map<String, Integer> foodDic = new HashMap<String, Integer>();\n\n    public int getDiningTable() {\n        return diningTable;\n    }\n\n    public void setDiningTable(int diningTable) {\n        this.diningTable = diningTable;\n    }\n\n    public Map<String, Integer> getFoodDic() {\n        return foodDic;\n    }\n\n    public void setFoodDic(String name, int num) {\n        foodDic.put(name,num);\n    }\n}\n\n// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver\npublic class SeniorChef {\n\n    public void makeFood(int num,String foodName) {\n        System.out.println(num + "\u4EFD" + foodName);\n    }\n}\n\npublic class Waitor {\n\n    private ArrayList<Command> commands;//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\n\n    public Waitor() {\n        commands = new ArrayList();\n    }\n\n    public void setCommand(Command cmd){\n        commands.add(cmd);\n    }\n\n    // \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C\n    public void orderUp() {\n        System.out.println("\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86.......");\n        for (int i = 0; i < commands.size(); i++) {\n            Command cmd = commands.get(i);\n            if (cmd != null) {\n                cmd.execute();\n            }\n        }\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        //\u521B\u5EFA2\u4E2Aorder\n        Order order1 = new Order();\n        order1.setDiningTable(1);\n        order1.getFoodDic().put("\u897F\u7EA2\u67FF\u9E21\u86CB\u9762",1);\n        order1.getFoodDic().put("\u5C0F\u676F\u53EF\u4E50",2);\n\n        Order order2 = new Order();\n        order2.setDiningTable(3);\n        order2.getFoodDic().put("\u5C16\u6912\u8089\u4E1D\u76D6\u996D",1);\n        order2.getFoodDic().put("\u5C0F\u676F\u96EA\u78A7",1);\n\n        //\u521B\u5EFA\u63A5\u6536\u8005\n        SeniorChef receiver=new SeniorChef();\n        //\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61\n        OrderCommand cmd1 = new OrderCommand(receiver, order1);\n        OrderCommand cmd2 = new OrderCommand(receiver, order2);\n        //\u521B\u5EFA\u8C03\u7528\u8005 waitor\n        Waitor invoker = new Waitor();\n        invoker.setCommand(cmd1);\n        invoker.setCommand(cmd2);\n\n        //\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86\n        invoker.orderUp();\n    }\n}\n```\n\n### 6.3.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002\n- \u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002\n- \u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002\n- \u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n- \u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002\n- \u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002\n\n### 6.3.5 \u4F7F\u7528\u573A\u666F\n\n- \u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002\n- \u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002\n- \u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002\n\n### 6.3.6 JDK \u6E90\u7801\u89E3\u6790\n\nRunable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5\n\n```java\n//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)\npublic interface Runnable {\n	public abstract void run();\n}\n\n//\u8C03\u7528\u8005\npublic class Thread implements Runnable {\n    private Runnable target;\n\n    public synchronized void start() {\n        if (threadStatus != 0)\n            throw new IllegalThreadStateException();\n\n        group.add(this);\n\n        boolean started = false;\n        try {\n            start0();\n            started = true;\n        } finally {\n            try {\n                if (!started) {\n                    group.threadStartFailed(this);\n                }\n            } catch (Throwable ignore) {\n            }\n        }\n    }\n\n    private native void start0();\n}\n```\n\n\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002\n\n```java\n/**\n * jdk Runnable \u547D\u4EE4\u6A21\u5F0F\n *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53\n */\npublic class TurnOffThread implements Runnable{\n     private Receiver receiver;\n\n     public TurnOffThread(Receiver receiver) {\n     	this.receiver = receiver;\n     }\n     public void run() {\n     	receiver.turnOFF();\n     }\n}\n```\n\n```java\n/**\n * \u6D4B\u8BD5\u7C7B\n */\npublic class Demo {\n     public static void main(String[] args) {\n         Receiver receiver = new Receiver();\n         TurnOffThread turnOffThread = new TurnOffThread(receiver);\n         Thread thread = new Thread(turnOffThread);\n         thread.start();\n     }\n}\n```\n\n## 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F\n\n### 6.4.1 \u6982\u8FF0\n\n\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002\n\n**\u5B9A\u4E49\uFF1A**\n\n\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002\n\n### 6.4.2 \u7ED3\u6784\n\n\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:\n\n- \u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002\n- \u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002\n- \u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002\n\n### 6.4.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u8BF7\u5047\u6761\npublic class LeaveRequest {\n    private String name;//\u59D3\u540D\n    private int num;//\u8BF7\u5047\u5929\u6570\n    private String content;//\u8BF7\u5047\u5185\u5BB9\n\n    public LeaveRequest(String name, int num, String content) {\n        this.name = name;\n        this.num = num;\n        this.content = content;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public int getNum() {\n        return num;\n    }\n\n    public String getContent() {\n        return content;\n    }\n}\n\n//\u5904\u7406\u8005\u62BD\u8C61\u7C7B\npublic abstract class Handler {\n    protected final static int NUM_ONE = 1;\n    protected final static int NUM_THREE = 3;\n    protected final static int NUM_SEVEN = 7;\n\n    //\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4\n    private int numStart;\n    private int numEnd;\n\n    //\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC\n    private Handler nextHandler;\n\n    //\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876\n    public Handler(int numStart) {\n        this.numStart = numStart;\n    }\n\n    //\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4\n    public Handler(int numStart, int numEnd) {\n        this.numStart = numStart;\n        this.numEnd = numEnd;\n    }\n\n    //\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\n    public void setNextHandler(Handler nextHandler){\n        this.nextHandler = nextHandler;\n    }\n\n    //\u63D0\u4EA4\u8BF7\u5047\u6761\n    public final void submit(LeaveRequest leave){\n        if(0 == this.numStart){\n            return;\n        }\n\n        //\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42\n        if(leave.getNum() >= this.numStart){\n            this.handleLeave(leave);\n\n            //\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4\n            if(null != this.nextHandler && leave.getNum() > numEnd){\n                this.nextHandler.submit(leave);//\u7EE7\u7EED\u63D0\u4EA4\n            } else {\n                System.out.println("\u6D41\u7A0B\u7ED3\u675F");\n            }\n        }\n    }\n\n    //\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5\n    protected abstract void handleLeave(LeaveRequest leave);\n}\n\n//\u5C0F\u7EC4\u957F\npublic class GroupLeader extends Handler {\n    public GroupLeader() {\n        //\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047\n        super(Handler.NUM_ONE, Handler.NUM_THREE);\n    }\n\n    @Override\n    protected void handleLeave(LeaveRequest leave) {\n        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");\n        System.out.println("\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002");\n    }\n}\n\n//\u90E8\u95E8\u7ECF\u7406\npublic class Manager extends Handler {\n    public Manager() {\n        //\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047\n        super(Handler.NUM_THREE, Handler.NUM_SEVEN);\n    }\n\n    @Override\n    protected void handleLeave(LeaveRequest leave) {\n        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");\n        System.out.println("\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002");\n    }\n}\n\n//\u603B\u7ECF\u7406\npublic class GeneralManager extends Handler {\n    public GeneralManager() {\n        //\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047\n        super(Handler.NUM_SEVEN);\n    }\n\n    @Override\n    protected void handleLeave(LeaveRequest leave) {\n        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");\n        System.out.println("\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002");\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        //\u8BF7\u5047\u6761\u6765\u4E00\u5F20\n        LeaveRequest leave = new LeaveRequest("\u5C0F\u82B1",5,"\u8EAB\u4F53\u4E0D\u9002");\n\n        //\u5404\u4F4D\u9886\u5BFC\n        GroupLeader groupLeader = new GroupLeader();\n        Manager manager = new Manager();\n        GeneralManager generalManager = new GeneralManager();\n\n        groupLeader.setNextHandler(manager);//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406\n        manager.setNextHandler(generalManager);//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406\n        //\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002\n\n        //\u63D0\u4EA4\u7533\u8BF7\n        groupLeader.submit(leave);\n    }\n}\n```\n\n### 6.4.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\n\n  \u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002\n\n- \u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027\n\n  \u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002\n\n- \u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027\n\n  \u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002\n\n- \u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5\n\n  \u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002\n\n- \u8D23\u4EFB\u5206\u62C5\n\n  \u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n- \u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002\n- \u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002\n- \u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002\n\n### 6.4.5 \u6E90\u7801\u89E3\u6790\n\n\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:\n\n- \u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response\n\n  ```java\n  public interface Request{\n\n  }\n\n  public interface Response{\n\n  }\n  ```\n\n- \u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter\n\n  ```java\n   public interface Filter {\n   	public void doFilter(Request req,Response res,FilterChain c);\n   }\n  ```\n\n- \u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668\n\n  ```java\n  public class FirstFilter implements Filter {\n      @Override\n      public void doFilter(Request request, Response response, FilterChain chain) {\n\n          System.out.println("\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406");\n\n          // \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response\n          chain.doFilter(request, response);\n\n          System.out.println("\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406");\n      }\n  }\n\n  public class SecondFilter  implements Filter {\n      @Override\n      public void doFilter(Request request, Response response, FilterChain chain) {\n\n          System.out.println("\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406");\n\n          // \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response\n          chain.doFilter(request, response);\n\n          System.out.println("\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406");\n      }\n  }\n  ```\n\n- \u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain\n\n  ```java\n  public class FilterChain {\n\n      private List<Filter> filters = new ArrayList<Filter>();\n\n      private int index = 0;\n\n      // \u94FE\u5F0F\u8C03\u7528\n      public FilterChain addFilter(Filter filter) {\n          this.filters.add(filter);\n          return this;\n      }\n\n      public void doFilter(Request request, Response response) {\n          if (index == filters.size()) {\n              return;\n          }\n          Filter filter = filters.get(index);\n          index++;\n          filter.doFilter(request, response, this);\n      }\n  }\n  ```\n\n- \u6D4B\u8BD5\u7C7B\n\n  ```java\n  public class Client {\n      public static void main(String[] args) {\n          Request  req = null;\n          Response res = null ;\n\n          FilterChain filterChain = new FilterChain();\n          filterChain.addFilter(new FirstFilter()).addFilter(new SecondFilter());\n          filterChain.doFilter(req,res);\n      }\n  }\n  ```\n\n## 6.5 \u72B6\u6001\u6A21\u5F0F\n\n### 6.5.1 \u6982\u8FF0\n\n\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u72B6\u6001\u6A21\u5F0F\u524D.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\npublic interface ILift {\n    //\u7535\u68AF\u76844\u4E2A\u72B6\u6001\n    //\u5F00\u95E8\u72B6\u6001\n    public final static int OPENING_STATE = 1;\n    //\u5173\u95E8\u72B6\u6001\n    public final static int CLOSING_STATE = 2;\n    //\u8FD0\u884C\u72B6\u6001\n    public final static int RUNNING_STATE = 3;\n    //\u505C\u6B62\u72B6\u6001\n    public final static int STOPPING_STATE = 4;\n\n    //\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001\n    public void setState(int state);\n\n    //\u7535\u68AF\u7684\u52A8\u4F5C\n    public void open();\n    public void close();\n    public void run();\n    public void stop();\n}\n\npublic class Lift implements ILift {\n    private int state;\n\n    @Override\n    public void setState(int state) {\n        this.state = state;\n    }\n\n    //\u6267\u884C\u5173\u95E8\u52A8\u4F5C\n    @Override\n    public void close() {\n        switch (this.state) {\n            case OPENING_STATE:\n                System.out.println("\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002");//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B\n                this.setState(CLOSING_STATE);//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86\n                break;\n            case CLOSING_STATE:\n                //do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8\n                break;\n            case RUNNING_STATE:\n                //do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8\n                break;\n            case STOPPING_STATE:\n                //do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8\n                break;\n        }\n    }\n\n    //\u6267\u884C\u5F00\u95E8\u52A8\u4F5C\n    @Override\n    public void open() {\n        switch (this.state) {\n            case OPENING_STATE://\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86\n                //do nothing\n                break;\n            case CLOSING_STATE://\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00:\n                System.out.println("\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002");\n                this.setState(OPENING_STATE);\n                break;\n            case RUNNING_STATE:\n                //do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8\n                break;\n            case STOPPING_STATE:\n                System.out.println("\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002");//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86\n                this.setState(OPENING_STATE);\n                break;\n        }\n    }\n\n    //\u6267\u884C\u8FD0\u884C\u52A8\u4F5C\n    @Override\n    public void run() {\n        switch (this.state) {\n            case OPENING_STATE://\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70\n                //do nothing\n                break;\n            case CLOSING_STATE://\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86\n                System.out.println("\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002");\n                this.setState(RUNNING_STATE);//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001\n                break;\n            case RUNNING_STATE:\n                //do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86\n                break;\n            case STOPPING_STATE:\n                System.out.println("\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002");\n                this.setState(RUNNING_STATE);\n                break;\n        }\n    }\n\n    //\u6267\u884C\u505C\u6B62\u52A8\u4F5C\n    @Override\n    public void stop() {\n        switch (this.state) {\n            case OPENING_STATE: //\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)\n                //do nothing\n                break;\n            case CLOSING_STATE://\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62\n                System.out.println("\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002");\n                this.setState(STOPPING_STATE);\n                break;\n            case RUNNING_STATE://\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86\n                System.out.println("\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002");\n                this.setState(STOPPING_STATE);\n                break;\n            case STOPPING_STATE:\n                //do nothing\n                break;\n        }\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        Lift lift = new Lift();\n        lift.setState(ILift.STOPPING_STATE);//\u7535\u68AF\u662F\u505C\u6B62\u7684\n        lift.open();//\u5F00\u95E8\n        lift.close();//\u5173\u95E8\n        lift.run();//\u8FD0\u884C\n        lift.stop();//\u505C\u6B62\n    }\n}\n```\n\n\u95EE\u9898\u5206\u6790\uFF1A\n\n- \u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002\n- \u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91\n\n**\u5B9A\u4E49\uFF1A**\n\n\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002\n\n### 6.5.2 \u7ED3\u6784\n\n\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002\n\n- \u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002\n- \u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002\n- \u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002\n\n### 6.5.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u72B6\u6001\u6A21\u5F0F.png" style="zoom:70%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u62BD\u8C61\u72B6\u6001\u7C7B\npublic abstract class LiftState {\n    //\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316\n    protected Context context;\n\n    public void setContext(Context context) {\n        this.context = context;\n    }\n\n    //\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C\n    public abstract void open();\n\n    //\u7535\u68AF\u5173\u95E8\u52A8\u4F5C\n    public abstract void close();\n\n    //\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C\n    public abstract void run();\n\n    //\u7535\u68AF\u505C\u6B62\u52A8\u4F5C\n    public abstract void stop();\n}\n\n//\u5F00\u542F\u72B6\u6001\npublic class OpenningState extends LiftState {\n\n    //\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD\n    @Override\n    public void open() {\n        System.out.println("\u7535\u68AF\u95E8\u5F00\u542F...");\n    }\n\n    @Override\n    public void close() {\n        //\u72B6\u6001\u4FEE\u6539\n        super.context.setLiftState(Context.closeingState);\n        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C\n        super.context.getLiftState().close();\n    }\n\n    //\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A\n    @Override\n    public void run() {\n        //do nothing\n    }\n\n    //\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86\n    @Override\n    public void stop() {\n        //do nothing\n    }\n}\n\n//\u8FD0\u884C\u72B6\u6001\npublic class RunningState extends LiftState {\n\n    //\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684\n    @Override\n    public void open() {\n        //do nothing\n    }\n\n    //\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86\n    @Override\n    public void close() {//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C\n        //do nothing\n    }\n\n    //\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5\n    @Override\n    public void run() {\n        System.out.println("\u7535\u68AF\u6B63\u5728\u8FD0\u884C...");\n    }\n\n    //\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86\n    @Override\n    public void stop() {\n        super.context.setLiftState(Context.stoppingState);\n        super.context.stop();\n    }\n}\n\n//\u505C\u6B62\u72B6\u6001\npublic class StoppingState extends LiftState {\n\n    //\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01\n    @Override\n    public void open() {\n        //\u72B6\u6001\u4FEE\u6539\n        super.context.setLiftState(Context.openningState);\n        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C\n        super.context.getLiftState().open();\n    }\n\n    @Override\n    public void close() {//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C\n        //\u72B6\u6001\u4FEE\u6539\n        super.context.setLiftState(Context.closeingState);\n        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C\n        super.context.getLiftState().close();\n    }\n\n    //\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88\n    @Override\n    public void run() {\n        //\u72B6\u6001\u4FEE\u6539\n        super.context.setLiftState(Context.runningState);\n        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C\n        super.context.getLiftState().run();\n    }\n\n    //\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86\n    @Override\n    public void stop() {\n        System.out.println("\u7535\u68AF\u505C\u6B62\u4E86...");\n    }\n}\n\n//\u5173\u95ED\u72B6\u6001\npublic class ClosingState extends LiftState {\n\n    @Override\n    //\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C\n    public void close() {\n        System.out.println("\u7535\u68AF\u95E8\u5173\u95ED...");\n    }\n\n    //\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440\n    @Override\n    public void open() {\n        super.context.setLiftState(Context.openningState);\n        super.context.open();\n    }\n\n\n    //\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86\n    @Override\n    public void run() {\n        super.context.setLiftState(Context.runningState);\n        super.context.run();\n    }\n\n    //\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42\n    @Override\n    public void stop() {\n        super.context.setLiftState(Context.stoppingState);\n        super.context.stop();\n    }\n}\n\n//\u73AF\u5883\u89D2\u8272\npublic class Context {\n    //\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001\n    public final static OpenningState openningState = new OpenningState();//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED\n    public final static ClosingState closeingState = new ClosingState();//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8\n    public final static RunningState runningState = new RunningState();//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62\n    public final static StoppingState stoppingState = new StoppingState();//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C\n\n\n    //\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001\n    private LiftState liftState;\n\n    public LiftState getLiftState() {\n        return this.liftState;\n    }\n\n    public void setLiftState(LiftState liftState) {\n        //\u5F53\u524D\u73AF\u5883\u6539\u53D8\n        this.liftState = liftState;\n        //\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D\n        this.liftState.setContext(this);\n    }\n\n    public void open() {\n        this.liftState.open();\n    }\n\n    public void close() {\n        this.liftState.close();\n    }\n\n    public void run() {\n        this.liftState.run();\n    }\n\n    public void stop() {\n        this.liftState.stop();\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        Context context = new Context();\n        context.setLiftState(new ClosingState());\n\n        context.open();\n        context.close();\n        context.run();\n        context.stop();\n    }\n}\n```\n\n### 6.5.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002\n- \u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n- \u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002\n- \u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002\n- \u72B6\u6001\u6A21\u5F0F\u5BF9"\u5F00\u95ED\u539F\u5219"\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002\n\n### 6.5.5 \u4F7F\u7528\u573A\u666F\n\n- \u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002\n- \u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002\n\n## 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F\n\n### 6.6.1 \u6982\u8FF0\n\n**\u5B9A\u4E49\uFF1A**\n\n\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002\n\n### 6.6.2 \u7ED3\u6784\n\n\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A\n\n- Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002\n- ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002\n- Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002\n- ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002\n\n### 6.6.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7\n\n\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5\n\n```java\npublic interface Observer {\n    void update(String message);\n}\n```\n\n\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5\n\n```java\npublic class WeixinUser implements Observer {\n    // \u5FAE\u4FE1\u7528\u6237\u540D\n    private String name;\n\n    public WeixinUser(String name) {\n        this.name = name;\n    }\n    @Override\n    public void update(String message) {\n        System.out.println(name + "-" + message);\n    }\n}\n```\n\n\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5\n\n```java\npublic interface Subject {\n    //\u589E\u52A0\u8BA2\u9605\u8005\n    public void attach(Observer observer);\n\n    //\u5220\u9664\u8BA2\u9605\u8005\n    public void detach(Observer observer);\n\n    //\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F\n    public void notify(String message);\n}\n\n```\n\n\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5\n\n```java\npublic class SubscriptionSubject implements Subject {\n    //\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\n    private List<Observer> weixinUserlist = new ArrayList<Observer>();\n\n    @Override\n    public void attach(Observer observer) {\n        weixinUserlist.add(observer);\n    }\n\n    @Override\n    public void detach(Observer observer) {\n        weixinUserlist.remove(observer);\n    }\n\n    @Override\n    public void notify(String message) {\n        for (Observer observer : weixinUserlist) {\n            observer.update(message);\n        }\n    }\n}\n```\n\n\u5BA2\u6237\u7AEF\u7A0B\u5E8F\n\n```java\npublic class Client {\n    public static void main(String[] args) {\n        SubscriptionSubject mSubscriptionSubject=new SubscriptionSubject();\n        //\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237\n        WeixinUser user1=new WeixinUser("\u5B59\u609F\u7A7A");\n        WeixinUser user2=new WeixinUser("\u732A\u609F\u80FD");\n        WeixinUser user3=new WeixinUser("\u6C99\u609F\u51C0");\n        //\u8BA2\u9605\u516C\u4F17\u53F7\n        mSubscriptionSubject.attach(user1);\n        mSubscriptionSubject.attach(user2);\n        mSubscriptionSubject.attach(user3);\n        //\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237\n        mSubscriptionSubject.notify("\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86");\n    }\n}\n\n```\n\n### 6.6.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002\n- \u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n- \u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6\n- \u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83\n\n### 6.6.5 \u4F7F\u7528\u573A\u666F\n\n- \u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002\n- \u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002\n\n### 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0\n\n\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002\n\n**1\uFF0CObservable \u7C7B**\n\nObservable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002\n\n- void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002\n\n- void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002\n\n- void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002\n\n**2\uFF0CObserver \u63A5\u53E3**\n\nObserver \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002\n\n\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077\n\n\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B\n\n```java\npublic class Thief extends Observable {\n\n    private String name;\n\n    public Thief(String name) {\n        this.name = name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void steal() {\n        System.out.println("\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01");\n        super.setChanged(); //changed  = true\n        super.notifyObservers();\n    }\n}\n\n```\n\n\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3\n\n```java\npublic class Policemen implements Observer {\n\n    private String name;\n\n    public Policemen(String name) {\n        this.name = name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public void update(Observable o, Object arg) {\n        System.out.println("\u8B66\u5BDF\uFF1A" + ((Thief) o).getName() + "\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01");\n    }\n}\n```\n\n\u5BA2\u6237\u7AEF\u4EE3\u7801\n\n```java\npublic class Client {\n    public static void main(String[] args) {\n        //\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61\n        Thief t = new Thief("\u9694\u58C1\u8001\u738B");\n        //\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61\n        Policemen p = new Policemen("\u5C0F\u674E");\n        //\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077\n        t.addObserver(p);\n        //\u5C0F\u5077\u5077\u4E1C\u897F\n        t.steal();\n    }\n}\n```\n\n## 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F\n\n### 6.7.1 \u6982\u8FF0\n\n\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002\n\n\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002\n\n<img src="/img/image-20200214110924010.png" style="zoom:60%;" />\n\n**\u5B9A\u4E49\uFF1A**\n\n\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002\n\n### 6.7.2 \u7ED3\u6784\n\n\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002\n\n- \u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002\n- \u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002\n- \u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002\n\n### 6.7.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u79DF\u623F\n\n\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png" style="zoom:70%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u62BD\u8C61\u4E2D\u4ECB\u8005\npublic abstract class Mediator {\n    //\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5\n    public abstract void constact(String message,Person person);\n}\n\n//\u62BD\u8C61\u540C\u4E8B\u7C7B\npublic abstract class Person {\n    protected String name;\n    protected Mediator mediator;\n\n    public Person(String name,Mediator mediator){\n        this.name = name;\n        this.mediator = mediator;\n    }\n}\n\n//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005\npublic class HouseOwner extends Person {\n\n    public HouseOwner(String name, Mediator mediator) {\n        super(name, mediator);\n    }\n\n    //\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB\n    public void constact(String message){\n        mediator.constact(message, this);\n    }\n\n    //\u83B7\u53D6\u4FE1\u606F\n    public void getMessage(String message){\n        System.out.println("\u623F\u4E3B" + name +"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A" + message);\n    }\n}\n\n//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA\npublic class Tenant extends Person {\n    public Tenant(String name, Mediator mediator) {\n        super(name, mediator);\n    }\n\n    //\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB\n    public void constact(String message){\n        mediator.constact(message, this);\n    }\n\n    //\u83B7\u53D6\u4FE1\u606F\n    public void getMessage(String message){\n        System.out.println("\u79DF\u623F\u8005" + name +"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A" + message);\n    }\n}\n\n//\u4E2D\u4ECB\u673A\u6784\npublic class MediatorStructure extends Mediator {\n    //\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F\n    private HouseOwner houseOwner;\n    private Tenant tenant;\n\n    public HouseOwner getHouseOwner() {\n        return houseOwner;\n    }\n\n    public void setHouseOwner(HouseOwner houseOwner) {\n        this.houseOwner = houseOwner;\n    }\n\n    public Tenant getTenant() {\n        return tenant;\n    }\n\n    public void setTenant(Tenant tenant) {\n        this.tenant = tenant;\n    }\n\n    public void constact(String message, Person person) {\n        if (person == houseOwner) {          //\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F\n            tenant.getMessage(message);\n        } else {       //\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F\n            houseOwner.getMessage(message);\n        }\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        //\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784\n        MediatorStructure mediator = new MediatorStructure();\n\n        //\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF\n        HouseOwner houseOwner = new HouseOwner("\u5F20\u4E09", mediator);\n        Tenant tenant = new Tenant("\u674E\u56DB", mediator);\n\n        //\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005\n        mediator.setHouseOwner(houseOwner);\n        mediator.setTenant(tenant);\n\n        tenant.constact("\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50");\n        houseOwner.constact("\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F");\n    }\n}\n```\n\n### 6.7.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u677E\u6563\u8026\u5408\n\n  \u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002\n\n- \u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92\n\n  \u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002\n\n- \u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054\n\n  \u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002\n\n### 6.7.5 \u4F7F\u7528\u573A\u666F\n\n- \u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002\n- \u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002\n\n## 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F\n\n### 6.8.1 \u6982\u8FF0\n\n**\u5B9A\u4E49\uFF1A**\n\n\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002\n\n### 6.8.2 \u7ED3\u6784\n\n\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A\n\n- \u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002\n\n- \u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002\n- \u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002\n- \u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002\n\n### 6.8.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A\n\n<img src="/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png" style="zoom:90%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5\n\n```java\npublic interface StudentIterator {\n    boolean hasNext();\n    Student next();\n}\n```\n\n\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5\n\n```java\npublic class StudentIteratorImpl implements StudentIterator {\n    private List<Student> list;\n    private int position = 0;\n\n    public StudentIteratorImpl(List<Student> list) {\n        this.list = list;\n    }\n\n    @Override\n    public boolean hasNext() {\n        return position < list.size();\n    }\n\n    @Override\n    public Student next() {\n        Student currentStudent = list.get(position);\n        position ++;\n        return currentStudent;\n    }\n}\n```\n\n\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5\n\n```java\npublic interface StudentAggregate {\n    void addStudent(Student student);\n\n    void removeStudent(Student student);\n\n    StudentIterator getStudentIterator();\n}\n```\n\n\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5\n\n```java\npublic class StudentAggregateImpl implements StudentAggregate {\n\n    private List<Student> list = new ArrayList<Student>();  // \u5B66\u751F\u5217\u8868\n\n    @Override\n    public void addStudent(Student student) {\n        this.list.add(student);\n    }\n\n    @Override\n    public void removeStudent(Student student) {\n        this.list.remove(student);\n    }\n\n    @Override\n    public StudentIterator getStudentIterator() {\n        return new StudentIteratorImpl(list);\n    }\n}\n```\n\n### 6.8.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002\n- \u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002\n- \u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002\n\n### 6.8.5 \u4F7F\u7528\u573A\u666F\n\n- \u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002\n- \u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002\n- \u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002\n\n### 6.8.6 JDK \u6E90\u7801\u89E3\u6790\n\n\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002\n\n```java\nList<String> list = new ArrayList<>();\nIterator<String> iterator = list.iterator(); //list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\nwhile (iterator.hasNext()) {\n    System.out.println(iterator.next());\n}\n```\n\n\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E\n\n- List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B\n- ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B\n- Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668\n- list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 `Iterator` \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61\n\n\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0\n\n```java\npublic class ArrayList<E> extends AbstractList<E>\n        implements List<E>, RandomAccess, Cloneable, java.io.Serializable {\n\n    public Iterator<E> iterator() {\n        return new Itr();\n    }\n\n    private class Itr implements Iterator<E> {\n        int cursor;       // \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15\n        int lastRet = -1; // \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15\n        int expectedModCount = modCount;\n\n        Itr() {}\n\n        //\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20\n        public boolean hasNext() {\n            return cursor != size;\n        }\n\n        //\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20\n        public E next() {\n            checkForComodification();\n            int i = cursor;\n            if (i >= size)\n                throw new NoSuchElementException();\n            Object[] elementData = ArrayList.this.elementData;\n            if (i >= elementData.length)\n                throw new ConcurrentModificationException();\n            cursor = i + 1;\n            return (E) elementData[lastRet = i];\n        }\n        ...\n}\n```\n\n\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 `iterator` \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 `Iterator` \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 `Iterator` \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002\n\n> \u6CE8\u610F\uFF1A\n>\n> \u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0`java.util.Iterable`\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A `java.util.Iterator` \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002\n\n## 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F\n\n### 6.9.1 \u6982\u8FF0\n\n**\u5B9A\u4E49\uFF1A**\n\n\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002\n\n### 6.9.2 \u7ED3\u6784\n\n\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:\n\n- \u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20`\uFF08Element\uFF09`\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002\n- \u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002\n- \u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08`accept`\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002\n- \u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002\n- \u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08`Element`\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002\n\n### 6.9.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF\n\n\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002\n\n- \u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA\n- \u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA\n- \u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B\n- \u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B\n- \u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6\n\n\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n![](\\img\\\u8BBF\u95EE\u8005\u6A21\u5F0F.png)\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3\n\n```java\npublic interface Person {\n    void feed(Cat cat);\n\n    void feed(Dog dog);\n}\n```\n\n\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 `Person`\u63A5\u53E3\n\n```java\npublic class Owner implements Person {\n\n    @Override\n    public void feed(Cat cat) {\n        System.out.println("\u4E3B\u4EBA\u5582\u98DF\u732B");\n    }\n\n    @Override\n    public void feed(Dog dog) {\n        System.out.println("\u4E3B\u4EBA\u5582\u98DF\u72D7");\n    }\n}\n\npublic class Someone implements Person {\n    @Override\n    public void feed(Cat cat) {\n        System.out.println("\u5176\u4ED6\u4EBA\u5582\u98DF\u732B");\n    }\n\n    @Override\n    public void feed(Dog dog) {\n        System.out.println("\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7");\n    }\n}\n```\n\n\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269\n\n```java\npublic interface Animal {\n    void accept(Person person);\n}\n```\n\n\u5B9A\u4E49\u5B9E\u73B0`Animal`\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09\n\n```java\npublic class Dog implements Animal {\n\n    @Override\n    public void accept(Person person) {\n        person.feed(this);\n        System.out.println("\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01");\n    }\n}\n\npublic class Cat implements Animal {\n\n    @Override\n    public void accept(Person person) {\n        person.feed(this);\n        System.out.println("\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01");\n    }\n}\n```\n\n\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6\n\n```java\npublic class Home {\n    private List<Animal> nodeList = new ArrayList<Animal>();\n\n    public void action(Person person) {\n        for (Animal node : nodeList) {\n            node.accept(person);\n        }\n    }\n\n    //\u6DFB\u52A0\u64CD\u4F5C\n    public void add(Animal animal) {\n        nodeList.add(animal);\n    }\n}\n\n```\n\n\u6D4B\u8BD5\u7C7B\n\n```java\npublic class Client {\n    public static void main(String[] args) {\n        Home home = new Home();\n        home.add(new Dog());\n        home.add(new Cat());\n\n        Owner owner = new Owner();\n        home.action(owner);\n\n        Someone someone = new Someone();\n        home.action(someone);\n    }\n}\n```\n\n### 6.9.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u6269\u5C55\u6027\u597D\n\n  \u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002\n\n- \u590D\u7528\u6027\u597D\n\n  \u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002\n\n- \u5206\u79BB\u65E0\u5173\u884C\u4E3A\n\n  \u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n- \u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE\n\n  \u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002\n\n- \u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219\n\n  \u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002\n\n### 6.9.5 \u4F7F\u7528\u573A\u666F\n\n- \u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002\n\n- \u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002\n\n### 6.9.6 \u6269\u5C55\n\n\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002\n\n**1\uFF0C\u5206\u6D3E\uFF1A**\n\n\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 `Map map = new HashMap()` \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F `Map` \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F `HashMap` \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002\n\n**\u9759\u6001\u5206\u6D3E(Static Dispatch)** \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002\n\n**\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)** \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002\n\n**2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A**\n\n\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002\n\n```java\npublic class Animal {\n    public void execute() {\n        System.out.println("Animal");\n    }\n}\n\npublic class Dog extends Animal {\n    @Override\n    public void execute() {\n        System.out.println("dog");\n    }\n}\n\npublic class Cat extends Animal {\n     @Override\n    public void execute() {\n        System.out.println("cat");\n    }\n}\n\npublic class Client {\n   	public static void main(String[] args) {\n        Animal a = new Dog();\n        a.execute();\n\n        Animal a1 = new Cat();\n        a1.execute();\n    }\n}\n```\n\n\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002\n\nJava \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002\n\n**3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A**\n\n\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002\n\n```java\npublic class Animal {\n}\n\npublic class Dog extends Animal {\n}\n\npublic class Cat extends Animal {\n}\n\npublic class Execute {\n    public void execute(Animal a) {\n        System.out.println("Animal");\n    }\n\n    public void execute(Dog d) {\n        System.out.println("dog");\n    }\n\n    public void execute(Cat c) {\n        System.out.println("cat");\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        Animal a = new Animal();\n        Animal a1 = new Dog();\n        Animal a2 = new Cat();\n\n        Execute exe = new Execute();\n        exe.execute(a);\n        exe.execute(a1);\n        exe.execute(a2);\n    }\n}\n```\n\n\u8FD0\u884C\u7ED3\u679C\uFF1A\n\n<img src="/img/image-20200214215446638.png" style="zoom:70%;" />\n\n\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F\n\n**\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002**\n\n**4\uFF0C\u53CC\u5206\u6D3E\uFF1A**\n\n\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002\n\n```java\npublic class Animal {\n    public void accept(Execute exe) {\n        exe.execute(this);\n    }\n}\n\npublic class Dog extends Animal {\n    public void accept(Execute exe) {\n        exe.execute(this);\n    }\n}\n\npublic class Cat extends Animal {\n    public void accept(Execute exe) {\n        exe.execute(this);\n    }\n}\n\npublic class Execute {\n    public void execute(Animal a) {\n        System.out.println("animal");\n    }\n\n    public void execute(Dog d) {\n        System.out.println("dog");\n    }\n\n    public void execute(Cat c) {\n        System.out.println("cat");\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        Animal a = new Animal();\n        Animal d = new Dog();\n        Animal c = new Cat();\n\n        Execute exe = new Execute();\n        a.accept(exe);\n        d.accept(exe);\n        c.accept(exe);\n    }\n}\n```\n\n\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F`\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E`\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002\n\n\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002\n\n\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A\n\n<img src="/img/image-20200426233931693.png" style="zoom:67%;" />\n\n**\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002**\n\n## 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F\n\n### 6.10.1 \u6982\u8FF0\n\n\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002\n\n**\u5B9A\u4E49\uFF1A**\n\n\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002\n\n### 6.10.2 \u7ED3\u6784\n\n\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A\n\n- \u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002\n- \u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002\n- \u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002\n\n> \u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A\n>\n> - **\u7A84\u63A5\u53E3**\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002\n> - **\u5BBD\u63A5\u53E3**\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002\n\n### 6.10.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS\n\n\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002\n\n\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A\n\n- \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F\n- \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F\n\n#### 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F\n\n\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u6E38\u620F\u89D2\u8272\u7C7B\npublic class GameRole {\n    private int vit; //\u751F\u547D\u529B\n    private int atk; //\u653B\u51FB\u529B\n    private int def; //\u9632\u5FA1\u529B\n\n    //\u521D\u59CB\u5316\u72B6\u6001\n    public void initState() {\n        this.vit = 100;\n        this.atk = 100;\n        this.def = 100;\n    }\n\n    //\u6218\u6597\n    public void fight() {\n        this.vit = 0;\n        this.atk = 0;\n        this.def = 0;\n    }\n\n    //\u4FDD\u5B58\u89D2\u8272\u72B6\u6001\n    public RoleStateMemento saveState() {\n        return new RoleStateMemento(vit, atk, def);\n    }\n\n    //\u56DE\u590D\u89D2\u8272\u72B6\u6001\n    public void recoverState(RoleStateMemento roleStateMemento) {\n        this.vit = roleStateMemento.getVit();\n        this.atk = roleStateMemento.getAtk();\n        this.def = roleStateMemento.getDef();\n    }\n\n    public void stateDisplay() {\n        System.out.println("\u89D2\u8272\u751F\u547D\u529B\uFF1A" + vit);\n        System.out.println("\u89D2\u8272\u653B\u51FB\u529B\uFF1A" + atk);\n        System.out.println("\u89D2\u8272\u9632\u5FA1\u529B\uFF1A" + def);\n    }\n\n    public int getVit() {\n        return vit;\n    }\n\n    public void setVit(int vit) {\n        this.vit = vit;\n    }\n\n    public int getAtk() {\n        return atk;\n    }\n\n    public void setAtk(int atk) {\n        this.atk = atk;\n    }\n\n    public int getDef() {\n        return def;\n    }\n\n    public void setDef(int def) {\n        this.def = def;\n    }\n}\n\n//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)\npublic class RoleStateMemento {\n    private int vit;\n    private int atk;\n    private int def;\n\n    public RoleStateMemento(int vit, int atk, int def) {\n        this.vit = vit;\n        this.atk = atk;\n        this.def = def;\n    }\n\n    public int getVit() {\n        return vit;\n    }\n\n    public void setVit(int vit) {\n        this.vit = vit;\n    }\n\n    public int getAtk() {\n        return atk;\n    }\n\n    public void setAtk(int atk) {\n        this.atk = atk;\n    }\n\n    public int getDef() {\n        return def;\n    }\n\n    public void setDef(int def) {\n        this.def = def;\n    }\n}\n\n//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B\npublic class RoleStateCaretaker {\n    private RoleStateMemento roleStateMemento;\n\n    public RoleStateMemento getRoleStateMemento() {\n        return roleStateMemento;\n    }\n\n    public void setRoleStateMemento(RoleStateMemento roleStateMemento) {\n        this.roleStateMemento = roleStateMemento;\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        System.out.println("------------\u5927\u6218Boss\u524D------------");\n        //\u5927\u6218Boss\u524D\n        GameRole gameRole = new GameRole();\n        gameRole.initState();\n        gameRole.stateDisplay();\n\n        //\u4FDD\u5B58\u8FDB\u5EA6\n        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();\n        roleStateCaretaker.setRoleStateMemento(gameRole.saveState());\n\n        System.out.println("------------\u5927\u6218Boss\u540E------------");\n        //\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD\n        gameRole.fight();\n        gameRole.stateDisplay();\n        System.out.println("------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------");\n        //\u6062\u590D\u4E4B\u524D\u72B6\u6001\n        gameRole.recoverState(roleStateCaretaker.getRoleStateMemento());\n        gameRole.stateDisplay();\n\n    }\n}\n```\n\n> \u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002\n\n#### 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F\n\n\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06**\u5907\u5FD8\u5F55\u7C7B**\u8BBE\u8BA1\u6210**\u53D1\u8D77\u4EBA\u7C7B**\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002\n\n\u5C06 `RoleStateMemento` \u8BBE\u4E3A `GameRole` \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 `RoleStateMemento` \u5BF9\u8C61\u5C01\u88C5\u5728 `GameRole` \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 `Memento` \u7ED9 `RoleStateCaretaker` \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 `GameRole` \u7C7B\u770B\u5230\u7684\u662F `RoleStateMemento` \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C`RoleStateCaretaker` \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 `Memento` \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:70%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\u7A84\u63A5\u53E3`Memento`\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5\n\n```java\npublic interface Memento {\n}\n```\n\n\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B `GameRole`\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B `RoleStateMemento`\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09\n\n```java\n/\u6E38\u620F\u89D2\u8272\u7C7B\npublic class GameRole {\n    private int vit; //\u751F\u547D\u529B\n    private int atk; //\u653B\u51FB\u529B\n    private int def; //\u9632\u5FA1\u529B\n\n    //\u521D\u59CB\u5316\u72B6\u6001\n    public void initState() {\n        this.vit = 100;\n        this.atk = 100;\n        this.def = 100;\n    }\n\n    //\u6218\u6597\n    public void fight() {\n        this.vit = 0;\n        this.atk = 0;\n        this.def = 0;\n    }\n\n    //\u4FDD\u5B58\u89D2\u8272\u72B6\u6001\n    public Memento saveState() {\n        return new RoleStateMemento(vit, atk, def);\n    }\n\n    //\u56DE\u590D\u89D2\u8272\u72B6\u6001\n    public void recoverState(Memento memento) {\n        RoleStateMemento roleStateMemento = (RoleStateMemento) memento;\n        this.vit = roleStateMemento.getVit();\n        this.atk = roleStateMemento.getAtk();\n        this.def = roleStateMemento.getDef();\n    }\n\n    public void stateDisplay() {\n        System.out.println("\u89D2\u8272\u751F\u547D\u529B\uFF1A" + vit);\n        System.out.println("\u89D2\u8272\u653B\u51FB\u529B\uFF1A" + atk);\n        System.out.println("\u89D2\u8272\u9632\u5FA1\u529B\uFF1A" + def);\n\n    }\n\n    public int getVit() {\n        return vit;\n    }\n\n    public void setVit(int vit) {\n        this.vit = vit;\n    }\n\n    public int getAtk() {\n        return atk;\n    }\n\n    public void setAtk(int atk) {\n        this.atk = atk;\n    }\n\n    public int getDef() {\n        return def;\n    }\n\n    public void setDef(int def) {\n        this.def = def;\n    }\n\n    private class RoleStateMemento implements Memento {\n        private int vit;\n        private int atk;\n        private int def;\n\n        public RoleStateMemento(int vit, int atk, int def) {\n            this.vit = vit;\n            this.atk = atk;\n            this.def = def;\n        }\n\n        public int getVit() {\n            return vit;\n        }\n\n        public void setVit(int vit) {\n            this.vit = vit;\n        }\n\n        public int getAtk() {\n            return atk;\n        }\n\n        public void setAtk(int atk) {\n            this.atk = atk;\n        }\n\n        public int getDef() {\n            return def;\n        }\n\n        public void setDef(int def) {\n            this.def = def;\n        }\n    }\n}\n```\n\n\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B `RoleStateCaretaker` \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 `Memento` \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9\n\n```java\n//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B\npublic class RoleStateCaretaker {\n    private Memento memento;\n\n    public Memento getMemento() {\n        return memento;\n    }\n\n    public void setMemento(Memento memento) {\n        this.memento = memento;\n    }\n}\n```\n\n\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B\n\n```java\npublic class Client {\n    public static void main(String[] args) {\n        System.out.println("------------\u5927\u6218Boss\u524D------------");\n        //\u5927\u6218Boss\u524D\n        GameRole gameRole = new GameRole();\n        gameRole.initState();\n        gameRole.stateDisplay();\n\n        //\u4FDD\u5B58\u8FDB\u5EA6\n        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();\n        roleStateCaretaker.setMemento(gameRole.saveState());\n\n        System.out.println("------------\u5927\u6218Boss\u540E------------");\n        //\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD\n        gameRole.fight();\n        gameRole.stateDisplay();\n        System.out.println("------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------");\n        //\u6062\u590D\u4E4B\u524D\u72B6\u6001\n        gameRole.recoverState(roleStateCaretaker.getMemento());\n        gameRole.stateDisplay();\n    }\n}\n\n```\n\n### 6.10.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002\n- \u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002\n- \u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n- \u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002\n\n### 6.10.5 \u4F7F\u7528\u573A\u666F\n\n- \u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002\n\n- \u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002\n\n## 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F\n\n### 6.11.1 \u6982\u8FF0\n\n<img src="/img/image-20200215220322641.png" style="zoom:60%;" />\n\n\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002\n\n```java\n//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0\npublic static int add(int a,int b){\n    return a + b;\n}\n\n//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0\npublic static int add(int a,int b,int c){\n    return a + b + c;\n}\n\n//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0\npublic static int add(Integer ... arr) {\n    int sum = 0;\n    for (Integer i : arr) {\n        sum += i;\n    }\n    return sum;\n}\n```\n\n\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002\n\n\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002\n\n**\u5B9A\u4E49\uFF1A**\n\n> \u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002\n\n\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002\n\n\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F\n\n**\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A**\n\n\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002\n\n```\nexpression ::= value | plus | minus\nplus ::= expression \u2018+\u2019 expression\nminus ::= expression \u2018-\u2019 expression\nvalue ::= integer\n```\n\n> \u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002\n\n\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A\n\n\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002\n\n**\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A**\n\n\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002\n\n\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002\n\n<img src="/img/image-20200215225227616.png" style="zoom:50%;" />\n\n### 6.11.2 \u7ED3\u6784\n\n\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002\n\n- \u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002\n\n- \u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002\n- \u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002\n- \u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002\n- \u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002\n\n### 6.11.3 \u6848\u4F8B\u5B9E\u73B0\n\n\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6\n\n<img src="/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png" style="zoom:80%;" />\n\n\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```java\n//\u62BD\u8C61\u89D2\u8272AbstractExpression\npublic abstract class AbstractExpression {\n    public abstract int interpret(Context context);\n}\n\n//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272\npublic class Value extends AbstractExpression {\n    private int value;\n\n    public Value(int value) {\n        this.value = value;\n    }\n\n    @Override\n    public int interpret(Context context) {\n        return value;\n    }\n\n    @Override\n    public String toString() {\n        return new Integer(value).toString();\n    }\n}\n\n//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F\npublic class Plus extends AbstractExpression {\n    private AbstractExpression left;\n    private AbstractExpression right;\n\n    public Plus(AbstractExpression left, AbstractExpression right) {\n        this.left = left;\n        this.right = right;\n    }\n\n    @Override\n    public int interpret(Context context) {\n        return left.interpret(context) + right.interpret(context);\n    }\n\n    @Override\n    public String toString() {\n        return "(" + left.toString() + " + " + right.toString() + ")";\n    }\n}\n\n///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F\npublic class Minus extends AbstractExpression {\n    private AbstractExpression left;\n    private AbstractExpression right;\n\n    public Minus(AbstractExpression left, AbstractExpression right) {\n        this.left = left;\n        this.right = right;\n    }\n\n    @Override\n    public int interpret(Context context) {\n        return left.interpret(context) - right.interpret(context);\n    }\n\n    @Override\n    public String toString() {\n        return "(" + left.toString() + " - " + right.toString() + ")";\n    }\n}\n\n//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F\npublic class Variable extends AbstractExpression {\n    private String name;\n\n    public Variable(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public int interpret(Context ctx) {\n        return ctx.getValue(this);\n    }\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n\n//\u73AF\u5883\u7C7B\npublic class Context {\n    private Map<Variable, Integer> map = new HashMap<Variable, Integer>();\n\n    public void assign(Variable var, Integer value) {\n        map.put(var, value);\n    }\n\n    public int getValue(Variable var) {\n        Integer value = map.get(var);\n        return value;\n    }\n}\n\n//\u6D4B\u8BD5\u7C7B\npublic class Client {\n    public static void main(String[] args) {\n        Context context = new Context();\n\n        Variable a = new Variable("a");\n        Variable b = new Variable("b");\n        Variable c = new Variable("c");\n        Variable d = new Variable("d");\n        Variable e = new Variable("e");\n        //Value v = new Value(1);\n\n        context.assign(a, 1);\n        context.assign(b, 2);\n        context.assign(c, 3);\n        context.assign(d, 4);\n        context.assign(e, 5);\n\n        AbstractExpression expression = new Minus(new Plus(new Plus(new Plus(a, b), c), d), e);\n\n        System.out.println(expression + "= " + expression.interpret(context));\n    }\n}\n```\n\n### 6.11.4 \u4F18\u7F3A\u70B9\n\n**1\uFF0C\u4F18\u70B9\uFF1A**\n\n- \u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002\n\n  \u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002\n\n- \u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002\n\n  \u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002\n\n- \u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002\n\n  \u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 "\u5F00\u95ED\u539F\u5219"\u3002\n\n**2\uFF0C\u7F3A\u70B9\uFF1A**\n\n- \u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002\n\n  \u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002\n\n* \u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002\n\n  \u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002\n\n### 6.11.5 \u4F7F\u7528\u573A\u666F\n\n- \u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002\n\n- \u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002\n\n- \u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002\n\n# 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\n\n## 7.1 spring \u4F7F\u7528\u56DE\u987E\n\n\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002\n\n- \u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B\n\n  ```java\n  public interface UserDao {\n      public void add();\n  }\n\n  public class UserDaoImpl implements UserDao {\n\n      public void add() {\n          System.out.println("userDaoImpl ....");\n      }\n  }\n  ```\n\n- \u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B\n\n  ```java\n  public interface UserService {\n      public void add();\n  }\n\n  public class UserServiceImpl implements UserService {\n\n      private UserDao userDao;\n\n      public void setUserDao(UserDao userDao) {\n          this.userDao = userDao;\n      }\n\n      public void add() {\n          System.out.println("userServiceImpl ...");\n          userDao.add();\n      }\n  }\n  ```\n\n- \u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42\n\n  ```java\n  public class UserController {\n      public static void main(String[] args) {\n          //\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61\n          ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");\n          //\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61\n          UserService userService = applicationContext.getBean("userService", UserService.class);\n          //\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5\n          userService.add();\n      }\n  }\n  ```\n\n- \u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6\n\n  ```java\n  <?xml version="1.0" encoding="UTF-8"?>\n  <beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xmlns="http://www.springframework.org/schema/beans"\n         xmlns:context="http://www.springframework.org/schema/context"\n         xsi:schemaLocation="http://www.springframework.org/schema/beans\n          http://www.springframework.org/schema/beans/spring-beans.xsd\n          http://www.springframework.org/schema/context\n          http://www.springframework.org/schema/context/spring-context.xsd">\n\n      <bean id="userService" class="com.itheima.service.impl.UserServiceImpl">\n          <property name="userDao" ref="userDao"></property>\n      </bean>\n\n      <bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>\n\n  </beans>\n  ```\n\n  \u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A\n\n  <img src="/img/image-20200429165544151.png" style="zoom:60%;" />\n\n\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A\n\n- userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002\n- \u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002\n- UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002\n\n\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09\n\n## 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784\n\nSpring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:\n\n\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A\n\n<img src="/img/image-20200429111324770.png" style="zoom:40%;" />\n\n\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002\n\n- spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002\n- spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002\n- spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002\n- spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002\n- spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002\n\n### 7.1.1 bean \u6982\u8FF0\n\nSpring \u5C31\u662F\u9762\u5411 `Bean` \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002\n\nspring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A\n\n```xml\n<bean id="userService" class="com.itheima.service.impl.UserServiceImpl">\n    <property name="userDao" ref="userDao"></property>\n</bean>\n<bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>\n```\n\n\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F\n\n- spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002\n- bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002\n\n## 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790\n\n### 7.3.1 BeanFactory \u89E3\u6790\n\nSpring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002\n\n<img src="/img/image-20200429185050396.png" style="zoom:60%;" />\n\n\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002\n\n\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F\n\n\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C\n\n- ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002\n- HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean\n- AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002\n\n\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A\n\n```java\npublic interface BeanFactory {\n\n	String FACTORY_BEAN_PREFIX = "&";\n\n	//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\n	Object getBean(String name) throws BeansException;\n	//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86\n	<T> T getBean(String name, Class<T> requiredType) throws BeansException;\n	Object getBean(String name, Object... args) throws BeansException;\n	<T> T getBean(Class<T> requiredType) throws BeansException;\n	<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;\n\n	<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);\n	<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);\n\n	//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61\n	boolean containsBean(String name);\n	//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B\n	boolean isSingleton(String name) throws NoSuchBeanDefinitionException;\n	boolean isPrototype(String name) throws NoSuchBeanDefinitionException;\n	boolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;\n	boolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;\n	@Nullable\n	Class<?> getType(String name) throws NoSuchBeanDefinitionException;\n	String[] getAliases(String name);\n}\n```\n\n\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002\n\nBeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002\n\n<img src="/img/image-20200430220155371.png" style="zoom:60%;" />\n\n\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A\n\n- ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002\n- FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002\n- AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002\n\n### 7.3.2 BeanDefinition \u89E3\u6790\n\nSpring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6\n\n```xml\n<bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>\n\nbean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A\n	scope\u3001init-method\u3001destory-method\u7B49\u3002\n```\n\n\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002\n\n<img src="/img/image-20200429204239868.png" style="zoom:60%;" />\n\n### 7.3.3 BeanDefinitionReader \u89E3\u6790\n\nBean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002\n\n<img src="/img/image-20200429204700956.png" style="zoom:60%;" />\n\n\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A\n\n```java\npublic interface BeanDefinitionReader {\n\n	//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61\n	BeanDefinitionRegistry getRegistry();\n\n	@Nullable\n	ResourceLoader getResourceLoader();\n\n	@Nullable\n	ClassLoader getBeanClassLoader();\n\n	BeanNameGenerator getBeanNameGenerator();\n\n	/*\n		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D\n	*/\n	int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException;\n	int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException;\n	int loadBeanDefinitions(String location) throws BeanDefinitionStoreException;\n	int loadBeanDefinitions(String... locations) throws BeanDefinitionStoreException;\n}\n```\n\n### 7.3.4 BeanDefinitionRegistry \u89E3\u6790\n\nBeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002\n\n```java\npublic interface BeanDefinitionRegistry extends AliasRegistry {\n\n	//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean\n	void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\n			throws BeanDefinitionStoreException;\n\n	//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean\n	void removeBeanDefinition(String beanName) throws NoSuchBeanDefinitionException;\n\n	//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean\n	BeanDefinition getBeanDefinition(String beanName) throws NoSuchBeanDefinitionException;\n\n	//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean\n	boolean containsBeanDefinition(String beanName);\n\n	//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0\n	String[] getBeanDefinitionNames();\n\n	int getBeanDefinitionCount();\n	boolean isBeanNameInUse(String beanName);\n}\n```\n\n\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A\n\n<img src="/img/image-20200429211132185.png" style="zoom:60%;" />\n\n\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A\n\n- DefaultListableBeanFactory\n\n  \u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean\n\n  ```java\n  private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(256);\n  ```\n\n- SimpleBeanDefinitionRegistry\n\n  \u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean\n\n  ```java\n  private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(64);\n  ```\n\n### 7.3.5 \u521B\u5EFA\u5BB9\u5668\n\nClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002\n\n## 7.4 \u81EA\u5B9A\u4E49 SpringIOC\n\n\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002\n\n```xml\n<?xml version="1.0" encoding="UTF-8"?>\n<beans>\n    <bean id="userService" class="com.itheima.service.impl.UserServiceImpl">\n        <property name="userDao" ref="userDao"></property>\n    </bean>\n    <bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>\n</beans>\n```\n\n### 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B\n\n#### 7.4.1.1 PropertyValue \u7C7B\n\n\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002\n\n```java\npublic class PropertyValue {\n\n  private String name;\n  private String ref;\n  private String value;\n\n  public PropertyValue() {\n  }\n\n  public PropertyValue(String name, String ref,String value) {\n    this.name = name;\n    this.ref = ref;\n    this.value = value;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public String getRef() {\n    return ref;\n  }\n\n  public void setRef(String ref) {\n    this.ref = ref;\n  }\n\n  public String getValue() {\n    return value;\n  }\n\n  public void setValue(String value) {\n    this.value = value;\n  }\n}\n```\n\n#### 7.4.1.2 MutablePropertyValues \u7C7B\n\n\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002\n\n```java\npublic class MutablePropertyValues implements Iterable<PropertyValue> {\n\n    private final List<PropertyValue> propertyValueList;\n\n    public MutablePropertyValues() {\n        this.propertyValueList = new ArrayList<PropertyValue>();\n    }\n\n    public MutablePropertyValues(List<PropertyValue> propertyValueList) {\n        this.propertyValueList = (propertyValueList != null ? propertyValueList : new ArrayList<PropertyValue>());\n    }\n\n    public PropertyValue[] getPropertyValues() {\n        return this.propertyValueList.toArray(new PropertyValue[0]);\n    }\n\n    public PropertyValue getPropertyValue(String propertyName) {\n        for (PropertyValue pv : this.propertyValueList) {\n            if (pv.getName().equals(propertyName)) {\n                return pv;\n            }\n        }\n        return null;\n    }\n\n    @Override\n    public Iterator<PropertyValue> iterator() {\n        return propertyValueList.iterator();\n    }\n\n    public boolean isEmpty() {\n        return this.propertyValueList.isEmpty();\n    }\n\n    public MutablePropertyValues addPropertyValue(PropertyValue pv) {\n        for (int i = 0; i < this.propertyValueList.size(); i++) {\n            PropertyValue currentPv = this.propertyValueList.get(i);\n            if (currentPv.getName().equals(pv.getName())) {\n                this.propertyValueList.set(i, new PropertyValue(pv.getName(),pv.getRef(), pv.getValue()));\n                return this;\n            }\n        }\n        this.propertyValueList.add(pv);\n        return this;\n    }\n\n    public boolean contains(String propertyName) {\n        return getPropertyValue(propertyName) != null;\n    }\n}\n```\n\n#### 7.4.1.3 BeanDefinition \u7C7B\n\nBeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002\n\n```java\npublic class BeanDefinition {\n    private String id;\n    private String className;\n\n    private MutablePropertyValues propertyValues;\n\n    public BeanDefinition() {\n        propertyValues = new MutablePropertyValues();\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getClassName() {\n        return className;\n    }\n\n    public void setClassName(String className) {\n        this.className = className;\n    }\n\n    public void setPropertyValues(MutablePropertyValues propertyValues) {\n        this.propertyValues = propertyValues;\n    }\n\n    public MutablePropertyValues getPropertyValues() {\n        return propertyValues;\n    }\n}\n```\n\n### 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B\n\n#### 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3\n\nBeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A\n\n- \u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D\n- \u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61\n- \u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61\n- \u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61\n- \u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570\n- \u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0\n\n```java\npublic interface BeanDefinitionRegistry {\n\n    //\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D\n    void registerBeanDefinition(String beanName, BeanDefinition beanDefinition);\n\n    //\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61\n    void removeBeanDefinition(String beanName) throws Exception;\n\n    //\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61\n    BeanDefinition getBeanDefinition(String beanName) throws Exception;\n\n    boolean containsBeanDefinition(String beanName);\n\n    int getBeanDefinitionCount();\n\n    String[] getBeanDefinitionNames();\n}\n```\n\n#### 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B\n\n\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002\n\n```java\npublic class SimpleBeanDefinitionRegistry implements BeanDefinitionRegistry {\n\n    private Map<String, BeanDefinition> beanDefinitionMap = new HashMap<String, BeanDefinition>();\n\n    @Override\n    public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) {\n        beanDefinitionMap.put(beanName,beanDefinition);\n    }\n\n    @Override\n    public void removeBeanDefinition(String beanName) throws Exception {\n        beanDefinitionMap.remove(beanName);\n    }\n\n    @Override\n    public BeanDefinition getBeanDefinition(String beanName) throws Exception {\n        return beanDefinitionMap.get(beanName);\n    }\n\n    @Override\n    public boolean containsBeanDefinition(String beanName) {\n        return beanDefinitionMap.containsKey(beanName);\n    }\n\n    @Override\n    public int getBeanDefinitionCount() {\n        return beanDefinitionMap.size();\n    }\n\n    @Override\n    public String[] getBeanDefinitionNames() {\n        return beanDefinitionMap.keySet().toArray(new String[1]);\n    }\n}\n```\n\n### 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B\n\n#### 7.4.3.1 BeanDefinitionReader \u63A5\u53E3\n\nBeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A\n\n- \u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002\n- \u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002\n\n```java\npublic interface BeanDefinitionReader {\n\n	//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\n    BeanDefinitionRegistry getRegistry();\n	//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C\n    void loadBeanDefinitions(String configLocation) throws Exception;\n}\n```\n\n#### 7.4.3.2 XmlBeanDefinitionReader \u7C7B\n\nXmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002\n\n```java\npublic class XmlBeanDefinitionReader implements BeanDefinitionReader {\n\n    private BeanDefinitionRegistry registry;\n\n    public XmlBeanDefinitionReader() {\n        this.registry = new SimpleBeanDefinitionRegistry();\n    }\n\n    @Override\n    public BeanDefinitionRegistry getRegistry() {\n        return registry;\n    }\n\n    @Override\n    public void loadBeanDefinitions(String configLocation) throws Exception {\n\n        InputStream is = this.getClass().getClassLoader().getResourceAsStream(configLocation);\n        SAXReader reader = new SAXReader();\n        Document document = reader.read(is);\n        Element rootElement = document.getRootElement();\n        //\u89E3\u6790bean\u6807\u7B7E\n        parseBean(rootElement);\n    }\n\n    private void parseBean(Element rootElement) {\n\n        List<Element> elements = rootElement.elements();\n        for (Element element : elements) {\n            String id = element.attributeValue("id");\n            String className = element.attributeValue("class");\n            BeanDefinition beanDefinition = new BeanDefinition();\n            beanDefinition.setId(id);\n            beanDefinition.setClassName(className);\n            List<Element> list = element.elements("property");\n            MutablePropertyValues mutablePropertyValues = new MutablePropertyValues();\n            for (Element element1 : list) {\n                String name = element1.attributeValue("name");\n                String ref = element1.attributeValue("ref");\n                String value = element1.attributeValue("value");\n                PropertyValue propertyValue = new PropertyValue(name,ref,value);\n                mutablePropertyValues.addPropertyValue(propertyValue);\n            }\n            beanDefinition.setPropertyValues(mutablePropertyValues);\n\n            registry.registerBeanDefinition(id,beanDefinition);\n        }\n    }\n}\n```\n\n### 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B\n\n#### 7.4.4.1 BeanFactory \u63A5\u53E3\n\n\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002\n\n```java\npublic interface BeanFactory {\n	//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\n    Object getBean(String name) throws Exception;\n	//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362\n    <T> T getBean(String name, Class<? extends T> clazz) throws Exception;\n}\n```\n\n#### 7.4.4.2 ApplicationContext \u63A5\u53E3\n\n\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 `refresh()` \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A\n\n- \u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002\n- \u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002\n\n```java\npublic interface ApplicationContext extends BeanFactory {\n	//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA\n    void refresh() throws IllegalStateException, Exception;\n}\n```\n\n#### 7.4.4.3 AbstractApplicationContext \u7C7B\n\n- \u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002\n\n- \u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002\n\n  BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\n\n```java\npublic abstract class AbstractApplicationContext implements ApplicationContext {\n\n    protected BeanDefinitionReader beanDefinitionReader;\n    //\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61\n    protected Map<String, Object> singletonObjects = new HashMap<String, Object>();\n\n    //\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84\n    protected String configLocation;\n\n    public void refresh() throws IllegalStateException, Exception {\n\n        //\u52A0\u8F7DBeanDefinition\n        beanDefinitionReader.loadBeanDefinitions(configLocation);\n\n        //\u521D\u59CB\u5316bean\n        finishBeanInitialization();\n    }\n\n    //bean\u7684\u521D\u59CB\u5316\n    private void finishBeanInitialization() throws Exception {\n        BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();\n        String[] beanNames = registry.getBeanDefinitionNames();\n\n        for (String beanName : beanNames) {\n            BeanDefinition beanDefinition = registry.getBeanDefinition(beanName);\n            getBean(beanName);\n        }\n    }\n}\n```\n\n> \u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\n\n#### 7.4.4.4 ClassPathXmlApplicationContext \u7C7B\n\n\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A\n\n- \u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002\n- \u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002\n- \u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002\n\n```java\npublic class ClassPathXmlApplicationContext extends AbstractApplicationContext{\n\n    public ClassPathXmlApplicationContext(String configLocation) {\n        this.configLocation = configLocation;\n        //\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61\n        beanDefinitionReader = new XmlBeanDefinitionReader();\n        try {\n            this.refresh();\n        } catch (Exception e) {\n        }\n    }\n\n    //\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61\n    @Override\n    public Object getBean(String name) throws Exception {\n\n        //return singletonObjects.get(name);\n        Object obj = singletonObjects.get(name);\n        if(obj != null) {\n            return obj;\n        }\n\n        BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();\n        BeanDefinition beanDefinition = registry.getBeanDefinition(name);\n        if(beanDefinition == null) {\n            return null;\n        }\n        String className = beanDefinition.getClassName();\n        Class<?> clazz = Class.forName(className);\n        Object beanObj = clazz.newInstance();\n        MutablePropertyValues propertyValues = beanDefinition.getPropertyValues();\n        for (PropertyValue propertyValue : propertyValues) {\n            String propertyName = propertyValue.getName();\n            String value = propertyValue.getValue();\n            String ref = propertyValue.getRef();\n            if(ref != null && !"".equals(ref)) {\n\n                Object bean = getBean(ref);\n                String methodName = StringUtils.getSetterMethodNameByFieldName(propertyName);\n                Method[] methods = clazz.getMethods();\n                for (Method method : methods) {\n                    if(method.getName().equals(methodName)) {\n                        method.invoke(beanObj,bean);\n                    }\n                }\n            }\n\n            if(value != null && !"".equals(value)) {\n                String methodName = StringUtils.getSetterMethodNameByFieldName(propertyName);\n                Method method = clazz.getMethod(methodName, String.class);\n                method.invoke(beanObj,value);\n            }\n        }\n        singletonObjects.put(name,beanObj);\n        return beanObj;\n    }\n\n    @Override\n    public <T> T getBean(String name, Class<? extends T> clazz) throws Exception {\n\n        Object bean = getBean(name);\n        if(bean != null) {\n            return clazz.cast(bean);\n        }\n        return null;\n    }\n}\n```\n\n### 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3\n\n#### 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F\n\n- \u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002\n- \u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002\n- \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002\n- \u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002\n\nspring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002\n\n#### 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219\n\n#### 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165\n\nspring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A\n\n- \u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002\n- \u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002\n- \u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002\n', "contentRendered": `<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
<!-- more -->
<h1 id="_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" aria-hidden="true">#</a> 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0</h1>
<h2 id="_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" aria-hidden="true">#</a> 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F</h2>
<p>&quot;\u8BBE\u8BA1\u6A21\u5F0F&quot;\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002</p>
<p>1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB<code v-pre>\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09</code>\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002</p>
<p>1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002</p>
<h2 id="_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" aria-hidden="true">#</a> 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5</h2>
<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
<h2 id="_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" tabindex="-1"><a class="header-anchor" href="#_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" aria-hidden="true">#</a> 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027</h2>
<p>\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002</p>
<p>\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002</p>
<ul>
<li>\u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002</li>
<li>\u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002</li>
<li>\u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002</li>
</ul>
<h2 id="_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" aria-hidden="true">#</a> 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B</h2>
<ul>
<li>
<p><strong>\u521B\u5EFA\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002</p>
</li>
<li>
<p><strong>\u7ED3\u6784\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002</p>
</li>
<li>
<p><strong>\u884C\u4E3A\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p>
</li>
</ul>
<h1 id="_2-uml-\u56FE" tabindex="-1"><a class="header-anchor" href="#_2-uml-\u56FE" aria-hidden="true">#</a> 2\uFF0CUML \u56FE</h1>
<p>\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002</p>
<p>UML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002</p>
<h2 id="_2-1-\u7C7B\u56FE\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_2-1-\u7C7B\u56FE\u6982\u8FF0" aria-hidden="true">#</a> 2.1 \u7C7B\u56FE\u6982\u8FF0</h2>
<p>\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002</p>
<h2 id="_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" aria-hidden="true">#</a> 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528</h2>
<ul>
<li>\u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B</li>
<li>\u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002</li>
</ul>
<h2 id="_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" aria-hidden="true">#</a> 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5</h2>
<h3 id="_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F</h3>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002</p>
<p><img src="\\img\\Employee.jpg" alt=""></p>
<p>\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A</p>
<ul>
<li>
<p>+\uFF1A\u8868\u793A public</p>
</li>
<li>
<p>-\uFF1A\u8868\u793A private</p>
</li>
<li>
<p>#\uFF1A\u8868\u793A protected</p>
</li>
</ul>
<p>\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]</strong></p>
<p>\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]</strong></p>
<blockquote>
<p>\u6CE8\u610F\uFF1A</p>
<p>\u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684</p>
<p>\u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762</p>
</blockquote>
<p><strong>\u4E3E\u4E2A\u6817\u5B50\uFF1A</strong></p>
<p><img src="\\img\\demo.png" alt=""></p>
<p>\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A</p>
<ul>
<li>method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002</li>
<li>method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002</li>
<li>method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002</li>
</ul>
<h3 id="_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F</h3>
<h4 id="_2-3-2-1-\u5173\u8054\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-1-\u5173\u8054\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.1 \u5173\u8054\u5173\u7CFB</h4>
<p>\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002</p>
<p>\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002</p>
<p><strong>1\uFF0C\u5355\u5411\u5173\u8054</strong></p>
<p><img src="\\img\\customer_address.png" alt=""></p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002</p>
<p><strong>2\uFF0C\u53CC\u5411\u5173\u8054</strong></p>
<p><img src="\\img\\customer_product.png" alt=""></p>
<p>\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List&lt;Product&gt;\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002</p>
<p><strong>3\uFF0C\u81EA\u5173\u8054</strong></p>
<p><img src="\\img\\node.png" alt=""></p>
<p>\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002</p>
<h4 id="_2-3-2-2-\u805A\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-2-\u805A\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.2 \u805A\u5408\u5173\u7CFB</h4>
<p>\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002</p>
<p>\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A</p>
<p><img src="\\img\\image-20191229173422328.png" alt=""></p>
<h4 id="_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.3 \u7EC4\u5408\u5173\u7CFB</h4>
<p>\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002</p>
<p>\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A</p>
<p><img src="\\img\\image-20191229173455149.png" alt=""></p>
<h4 id="_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB</h4>
<p>\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A</p>
<p><img src="\\img\\image-20191229173518926.png" alt=""></p>
<h4 id="_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.5 \u7EE7\u627F\u5173\u7CFB</h4>
<p>\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p>
<p><img src="\\img\\image-20191229173539838.png" alt=""></p>
<h4 id="_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB</h4>
<p>\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002</p>
<p><img src="\\img\\image-20191229173554296.png" alt=""></p>
<h1 id="_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219</h1>
<p>\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002</p>
<h2 id="_3-1-\u5F00\u95ED\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-1-\u5F00\u95ED\u539F\u5219" aria-hidden="true">#</a> 3.1 \u5F00\u95ED\u539F\u5219</h2>
<p><strong>\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED</strong>\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002</p>
<p>\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002</p>
<p>\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002</p>
<p>\u4E0B\u9762\u4EE5 <code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002</p>
<p>\u3010\u4F8B\u3011<code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002</p>
<p>\u5206\u6790\uFF1A<code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002</p>
<p><img src="\\img\\open-close.png" alt=""></p>
<h2 id="_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" aria-hidden="true">#</a> 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219</h2>
<p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002</p>
<p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002</p>
<p>\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50</p>
<p>\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p>
<p>\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002</p>
<p><img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> length<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> width<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A</strong></p>
<p>\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RectangleDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Rectangle</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"============"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Rectangle</span> rectangle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle1<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002
\u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p>
<p>\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3</p>
<img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png" style="zoom:80%;" />
<h2 id="_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" aria-hidden="true">#</a> 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219</h2>
<p>\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111</p>
<p>\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002</p>
<p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p>
<img src="\\img\\\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XiJieHardDisk</span> <span class="token keyword">implements</span> <span class="token class-name">HardDisk</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E"</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"\u6570\u636E"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IntelCpu</span> <span class="token keyword">implements</span> <span class="token class-name">Cpu</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528Intel\u5904\u7406\u5668"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KingstonMemory</span> <span class="token keyword">implements</span> <span class="token class-name">Memory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">IntelCpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">KingstonMemory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">XiJieHardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8BA1\u7B97\u673A\u5DE5\u4F5C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cpu<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> hardDisk<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A"</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A</strong></p>
<p>\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestComputer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XiJieHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IntelCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KingstonMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        computer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002</p>
<p>\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A</p>
<p>\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002</p>
<p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p>
<img src="/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png" alt="image-20191229173554296" style="zoom:70%;" />
<p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Cpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Memory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">Cpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Memory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">Memory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8BA1\u7B97\u673A\u5DE5\u4F5C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002</p>
<h2 id="_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" aria-hidden="true">#</a> 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219</h2>
<p>\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B</p>
<p>\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A<code v-pre>\u9ED1\u9A6C</code>\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u5219.png" alt=""></p>
<p>\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A</p>
<p><img src="\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u52191.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AntiTheft</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeiMaSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span><span class="token punctuation">,</span><span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u76D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u706B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u6C34"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItcastSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u76D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u706B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" tabindex="-1"><a class="header-anchor" href="#_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" aria-hidden="true">#</a> 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219</h2>
<p>\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002</p>
<p>\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002</p>
<p>\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002</p>
<p>\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219</p>
<p>\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B</p>
<p>\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u660E\u661F\u7C7B\uFF08Star\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fans</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Fans</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Agent</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Star</span> star<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Fans</span> fans<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Company</span> company<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStar</span><span class="token punctuation">(</span><span class="token class-name">Star</span> star<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>star <span class="token operator">=</span> star<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFans</span><span class="token punctuation">(</span><span class="token class-name">Fans</span> fans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fans <span class="token operator">=</span> fans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCompany</span><span class="token punctuation">(</span><span class="token class-name">Company</span> company<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">meeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fans<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u4E0E\u660E\u661F"</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u89C1\u9762\u4E86\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">business</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>company<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u4E0E\u660E\u661F"</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u6D3D\u6DE1\u4E1A\u52A1\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" aria-hidden="true">#</a> 3.6 \u5408\u6210\u590D\u7528\u539F\u5219</h2>
<p>\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002</p>
<p>\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002</p>
<p>\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A</p>
<ol>
<li>\u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002</li>
<li>\u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002</li>
<li>\u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002</li>
</ol>
<p>\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A</p>
<ol>
<li>\u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002</li>
<li>\u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002</li>
<li>\u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002</li>
</ol>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F</p>
<p>\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5408\u6210\u590D\u7528\u539F\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />
<p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002</p>
<img src="/img/\u5408\u6210\u590D\u7528\u539F\u52191.png" alt="image-20191229173554296" style="zoom:80%;" />
<h1 id="_4-\u521B\u5EFA\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-\u521B\u5EFA\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F</h1>
<p>\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002</p>
<p>\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002</p>
<p>\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p>
<ul>
<li>\u5355\u4F8B\u6A21\u5F0F</li>
<li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F</li>
<li>\u539F\u578B\u6A21\u5F0F</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F</li>
</ul>
<h2 id="_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</h2>
<p>\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002</p>
<p>\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<h3 id="_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" aria-hidden="true">#</a> 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784</h3>
<p>\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B</li>
<li>\u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B</li>
</ul>
<h3 id="_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0</h3>
<blockquote>
<p>\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A</p>
<p>\u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA</p>
<p>\u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA</p>
</blockquote>
<ol>
<li>
<p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u997F\u6C49\u5F0F
 *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002</p>
</li>
<li>
<p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6076\u6C49\u5F0F
 *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u4E0D\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09</p>
<p>\u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E <code v-pre>getInstance()</code> \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002</p>
<p>\u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 <code v-pre>volatile</code> \u5173\u952E\u5B57, <code v-pre>volatile</code> \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u6DFB\u52A0 <code v-pre>volatile</code> \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09</p>
<p>\u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB <code v-pre>static</code> \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder</p>
<p>\u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002</p>
<div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002</p>
</li>
<li>
<p>\u679A\u4E3E\u65B9\u5F0F</p>
<p>\u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u679A\u4E3E\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    INSTANCE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002</p>
</li>
</ol>
<h3 id="_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" aria-hidden="true">#</a> 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898</h3>
<h4 id="_4-1-3-1-\u95EE\u9898\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#_4-1-3-1-\u95EE\u9898\u6F14\u793A" aria-hidden="true">#</a> 4.1.3.1 \u95EE\u9898\u6F14\u793A</h4>
<p>\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002</p>
<ul>
<li>
<p>\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61</span>
        <span class="token comment">//writeObject2File();</span>
        <span class="token comment">//\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeObject2File</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code v-pre>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p>
</blockquote>
</li>
<li>
<p>\u53CD\u5C04</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61</span>
        <span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5</span>
        constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code v-pre>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</p>
</blockquote>
</li>
</ul>
<blockquote>
<div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002
</blockquote>
<h4 id="_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" aria-hidden="true">#</a> 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3</h4>
<ul>
<li>
<p>\u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5</p>
<p>\u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0<code v-pre>readResolve()</code>\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6E90\u7801\u89E3\u6790\uFF1A</strong></p>
<p>ObjectInputStream \u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// if nested read, passHandle contains handle of enclosing object</span>
    <span class="token keyword">int</span> outerHandle <span class="token operator">=</span> passHandle<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>tc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
			<span class="token keyword">case</span> TC_OBJECT<span class="token operator">:</span>
				<span class="token keyword">return</span> <span class="token function">checkResolve</span><span class="token punctuation">(</span><span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span>unshared<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        depth<span class="token operator">--</span><span class="token punctuation">;</span>
        bin<span class="token punctuation">.</span><span class="token function">setBlockDataMode</span><span class="token punctuation">(</span>oldMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C</span>
    obj <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">isInstantiable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> desc<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> handles<span class="token punctuation">.</span><span class="token function">lookupException</span><span class="token punctuation">(</span>passHandle<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> desc<span class="token punctuation">.</span><span class="token function">hasReadResolveMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF</span>
    	<span class="token comment">// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002</span>
    	<span class="token class-name">Object</span> rep <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">invokeReadResolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/*
           \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801
        */</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E:</div>
<p>\u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002</p>
</li>
</ul>
<h3 id="_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" aria-hidden="true">#</a> 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B</h3>
<p>Runtime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p>
<ol>
<li>
<p>\u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> currentRuntime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Returns the runtime object associated with the current Java application.
     * Most of the methods of class <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span> are instance
     * methods and must be invoked with respect to the current runtime object.
     *
     * <span class="token keyword">@return</span>  the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span> object associated with the current
     *          Java application.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> <span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> currentRuntime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/** Don't let anyone else instantiate this class */</span>
    <span class="token keyword">private</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002</p>
</li>
<li>
<p>\u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuntimeDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61</span>
        <span class="token class-name">Runtime</span> runtime <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">totalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">maxMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61</span>
        <span class="token class-name">Process</span> process <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">"ipconfig"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ol>
<h2 id="_4-2-\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2 \u5DE5\u5382\u6A21\u5F0F</h2>
<h3 id="_4-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.2.1 \u6982\u8FF0</h3>
<p>\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002</p>
<p>\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002</p>
<p>\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png" style="zoom:80%;" />
<p>\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A<strong>\u89E3\u8026</strong>\u3002</p>
<p>\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528</p>
<ul>
<li>\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09</li>
<li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</li>
</ul>
<h3 id="_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F</h3>
<p>\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002</p>
<h4 id="_4-2-2-1-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-2-1-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.2.1 \u7ED3\u6784</h4>
<p>\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B</li>
<li>\u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002</li>
</ul>
<h4 id="_4-2-2-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-2-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.2.2 \u5B9E\u73B0</h4>
<p>\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"americano"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002</p>
<p>\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002</p>
<h4 id="_4-2-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.2.4 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<p>\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002</p>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
<h4 id="_4-2-2-3-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-2-3-\u6269\u5C55" aria-hidden="true">#</a> 4.2.2.3 \u6269\u5C55</h4>
<p><strong>\u9759\u6001\u5DE5\u5382</strong></p>
<p>\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"americano"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffe<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</h3>
<p>\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002</p>
<h4 id="_4-2-3-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-3-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.3.1 \u6982\u5FF5</h4>
<p>\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002</p>
<h4 id="_4-2-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.3.2 \u7ED3\u6784</h4>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li>
<li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002</li>
</ul>
<h4 id="_4-2-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.3.3 \u5B9E\u73B0</h4>
<p>\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5496\u5561\u5E97\u7C7B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002</p>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002</p>
<h4 id="_4-2-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.3.4 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B</li>
<li>\u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002</li>
</ul>
<h3 id="_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</h3>
<p>\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002</p>
<p>\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002</p>
<p>\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002</p>
<img src="/img/image-20200401214509176.png" style="zoom:67%;" />
<img src="/img/image-20200401222951963.png" style="zoom:67%;" />
<h4 id="_4-2-4-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-4-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.4.1 \u6982\u5FF5</h4>
<p>\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002</p>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</p>
<h4 id="_4-2-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.4.2 \u7ED3\u6784</h4>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li>
<li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002</li>
</ul>
<h4 id="_4-2-4-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.4.2 \u5B9E\u73B0</h4>
<p>\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:67%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MatchaMousse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItalyDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tiramisu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002</p>
<h4 id="_4-2-4-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-4-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.4.3 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<p>\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002</p>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002</p>
<h4 id="_4-2-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.2.4.4 \u4F7F\u7528\u573A\u666F</h4>
<ul>
<li>
<p>\u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002</p>
</li>
<li>
<p>\u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002</p>
</li>
<li>
<p>\u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002</p>
</li>
</ul>
<p>\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002</p>
<h3 id="_4-2-5-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-5-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.2.5 \u6A21\u5F0F\u6269\u5C55</h3>
<p><strong>\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408</strong></p>
<p>\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002</p>
<p>\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6</p>
<p>\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties</p>
<div class="language-properties ext-properties line-numbers-mode"><pre v-pre class="language-properties"><code><span class="token key attr-name">american</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.AmericanCoffee</span>
<span class="token key attr-name">latte</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.LatteCoffee</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Coffee</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">CoffeeFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"bean.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            p<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> keys <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09</span>
                <span class="token class-name">String</span> className <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61</span>
                <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Coffee</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Coffee</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002</p>
<h3 id="_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" aria-hidden="true">#</a> 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5</h3>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u4EE4\u72D0\u51B2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u98CE\u6E05\u626C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u4EFB\u6211\u884C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> ele <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A</p>
<img src="/img/jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:75%;" />
<p>Collection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<blockquote>
<p>\u53E6\uFF1A</p>
<p>\u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p>
<p>\u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p>
</blockquote>
<h2 id="_4-3-\u539F\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-3-\u539F\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 4.3 \u539F\u578B\u6A21\u5F0F</h2>
<h3 id="_4-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.3.1 \u6982\u8FF0</h3>
<p>\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002</p>
<h3 id="_4-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.3.2 \u7ED3\u6784</h3>
<p>\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002</li>
<li>\u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002</li>
<li>\u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002</li>
</ul>
<p>\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u539F\u578B\u6A21\u5F0F.png" alt=""></p>
<h3 id="_4-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.3.3 \u5B9E\u73B0</h3>
<p>\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002</p>
<blockquote>
<p>\u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002</p>
<p>\u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002</p>
</blockquote>
<p>Java \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 <code v-pre>clone()</code> \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Realizetype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Realizetype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Realizetype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypeTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Realizetype</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Realizetype</span> r2 <span class="token operator">=</span> r1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>r1 <span class="token operator">==</span> r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-4-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-3-4-\u6848\u4F8B" aria-hidden="true">#</a> 4.3.4 \u6848\u4F8B</h3>
<p><strong>\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6</strong></p>
<p>\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F1.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB</span>
        c2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.3.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002</li>
<li>\u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</li>
</ul>
<h3 id="_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" tabindex="-1"><a class="header-anchor" href="#_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" aria-hidden="true">#</a> 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09</h3>
<p>\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Student</span> stu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStu</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stu <span class="token operator">=</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B66\u751F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>

        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> <span class="token string">"\u897F\u5B89"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F2.png" style="zoom:80%;" />
<div color="red">\u8BF4\u660E\uFF1A</div>
<p>\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> <span class="token string">"\u897F\u5B89"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F3.png" style="zoom:80%;" />
<blockquote>
<p>\u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002</p>
</blockquote>
<h2 id="_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F</h2>
<h3 id="_4-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.4.1 \u6982\u8FF0</h3>
<p>\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002</p>
<img src="/img/image-20200413225341516.png" style="zoom:60%;" />
<ul>
<li>\u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002</li>
<li>\u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002</li>
</ul>
<h3 id="_4-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.4.2 \u7ED3\u6784</h3>
<p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002</p>
</li>
<li>
<p>\u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002</p>
</li>
<li>
<p>\u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002</p>
</li>
</ul>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png" style="zoom:80%;" />
<h3 id="_4-4-3-\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-4-3-\u5B9E\u4F8B" aria-hidden="true">#</a> 4.4.3 \u5B9E\u4F8B</h3>
<p><strong>\u521B\u5EFA\u5171\u4EAB\u5355\u8F66</strong></p>
<p>\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002</p>
<p>\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png" style="zoom:80%;" />
<p>\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u81EA\u884C\u8F66\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bike</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> frame<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> seat<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token class-name">String</span> frame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frame <span class="token operator">=</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token class-name">String</span> seat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seat <span class="token operator">=</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6469\u62DC\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobikeBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"\u94DD\u5408\u91D1\u8F66\u67B6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"\u771F\u76AE\u8F66\u5EA7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ofo\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OfoBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"\u78B3\u7EA4\u7EF4\u8F66\u67B6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"\u6A61\u80F6\u8F66\u5EA7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6307\u6325\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Builder</span> mBuilder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder <span class="token operator">=</span> builder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mBuilder<span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MobikeBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Director</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bike</span> bike <span class="token operator">=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F\uFF1A</strong></p>
<p>\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>BuildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u8BF4\u660E\uFF1A</strong></p>
<p>\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002</p>
<h3 id="_4-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.4.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002</li>
<li>\u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002</li>
<li>\u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002</p>
<h3 id="_4-4-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-4-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.4.5 \u4F7F\u7528\u573A\u666F</h3>
<p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002</p>
<ul>
<li>\u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002</li>
<li>\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002</li>
</ul>
<h3 id="_4-4-6-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-4-6-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.4.6 \u6A21\u5F0F\u6269\u5C55</h3>
<p>\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002</p>
<p>\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">,</span> <span class="token class-name">String</span> screen<span class="token punctuation">,</span> <span class="token class-name">String</span> memory<span class="token punctuation">,</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setScreen</span><span class="token punctuation">(</span><span class="token class-name">String</span> screen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">String</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMainboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u6784\u5EFAPhone\u5BF9\u8C61</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">"intel"</span><span class="token punctuation">,</span><span class="token string">"\u4E09\u661F\u5C4F\u5E55"</span><span class="token punctuation">,</span><span class="token string">"\u91D1\u58EB\u987F"</span><span class="token punctuation">,</span><span class="token string">"\u534E\u7855"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002</p>
<p>\u91CD\u6784\u540E\u4EE3\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cpu <span class="token operator">=</span> builder<span class="token punctuation">.</span>cpu<span class="token punctuation">;</span>
        screen <span class="token operator">=</span> builder<span class="token punctuation">.</span>screen<span class="token punctuation">;</span>
        memory <span class="token operator">=</span> builder<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
        mainboard <span class="token operator">=</span> builder<span class="token punctuation">.</span>mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cpu <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">screen</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            screen <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">memory</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            memory <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mainboard <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">cpu</span><span class="token punctuation">(</span><span class="token string">"intel"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token string">"\u534E\u7855"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token string">"\u91D1\u58EB\u987F"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">screen</span><span class="token punctuation">(</span><span class="token string">"\u4E09\u661F"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</p>
<h2 id="_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" aria-hidden="true">#</a> 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4</h2>
<h3 id="_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002</p>
<p>\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002</p>
<h3 id="_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002</p>
<p>\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002</p>
<p>\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002</p>
<h1 id="_5-\u7ED3\u6784\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-\u7ED3\u6784\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F</h1>
<p>\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002</p>
<p>\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p>
<p>\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A</p>
<ul>
<li>\u4EE3\u7406\u6A21\u5F0F</li>
<li>\u9002\u914D\u5668\u6A21\u5F0F</li>
<li>\u88C5\u9970\u8005\u6A21\u5F0F</li>
<li>\u6865\u63A5\u6A21\u5F0F</li>
<li>\u5916\u89C2\u6A21\u5F0F</li>
<li>\u7EC4\u5408\u6A21\u5F0F</li>
<li>\u4EAB\u5143\u6A21\u5F0F</li>
</ul>
<h2 id="_5-1-\u4EE3\u7406\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-1-\u4EE3\u7406\u6A21\u5F0F" aria-hidden="true">#</a> 5.1 \u4EE3\u7406\u6A21\u5F0F</h2>
<h3 id="_5-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.1.1 \u6982\u8FF0</h3>
<p>\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002</p>
<p>Java \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002</p>
<h3 id="_5-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.1.2 \u7ED3\u6784</h3>
<p>\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li>
<li>\u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002</li>
<li>\u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002</li>
</ul>
<h3 id="_5-1-3-\u9759\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-3-\u9759\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.3 \u9759\u6001\u4EE3\u7406</h3>
<p>\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002</p>
<p>\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968</p>
<p>\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u9759\u6001\u4EE3\u7406.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u552E\u70B9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyPoint</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        station<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProxyPoint</span> pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pp<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002</p>
<h3 id="_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.4 JDK \u52A8\u6001\u4EE3\u7406</h3>
<p>\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002</p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token comment">/*
            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF
                Class&lt;?>[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3
                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F
         */</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">/*
                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61
                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B
                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570
                     */</span>
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//\u6267\u884C\u771F\u5B9E\u5BF9\u8C61</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div>
<ul>
<li>
<p>ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F</p>
<p>ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>jdk<span class="token punctuation">.</span></span><span class="token class-name">SellTickets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">UndeclaredThrowableException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m1<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m2<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m0<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            m1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"equals"</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"toString"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.proxy.dynamic.jdk.SellTickets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"sell"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m0 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"hashCode"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMethodException</span> noSuchMethodException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchMethodError</span><span class="token punctuation">(</span>noSuchMethodException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> classNotFoundException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoClassDefFoundError</span><span class="token punctuation">(</span>classNotFoundException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m1<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m0<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A</p>
<ul>
<li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002</li>
<li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002</li>
</ul>
</li>
<li>
<p>\u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F</p>
<p>\u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.proxy.dynamic.jdk.SellTickets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"sell"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">;</span>

	<span class="token keyword">protected</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> h<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<p>\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A</p>
<pre><code>1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5
2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5
3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5
4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5
</code></pre>
<h3 id="_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406</h3>
<p>\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002</p>
<p>\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002</p>
<p>CGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002</p>
<p>CGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u706B\u8F66\u7AD9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
            o \uFF1A \u4EE3\u7406\u5BF9\u8C61
            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B
            args \uFF1A \u5B9E\u9645\u53C2\u6570
            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrainStation</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" aria-hidden="true">#</a> 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4</h3>
<ul>
<li>
<p>jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406</p>
<p>\u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002</p>
<p>\u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002</p>
</li>
<li>
<p>\u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406</p>
<p>\u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002</p>
<p>\u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898</p>
</li>
</ul>
<h3 id="_5-1-7-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-1-7-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 5.1.7 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B</li>
<li>\u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B</li>
<li>\u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B</li>
</ul>
<h3 id="_5-1-8-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-1-8-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.1.8 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406</p>
<p>\u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002</p>
</li>
<li>
<p>\u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406</p>
<p>\u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002</p>
</li>
<li>
<p>\u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406</p>
<p>\u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002</p>
</li>
</ul>
<h2 id="_5-2-\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2 \u9002\u914D\u5668\u6A21\u5F0F</h2>
<h3 id="_5-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.2.1 \u6982\u8FF0</h3>
<p>\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p>
<p><img src="\\img\\\u8F6C\u63A5\u5934.png" alt=""></p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002</p>
<p>\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002</p>
<h3 id="_5-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.2.2 \u7ED3\u6784</h3>
<p>\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002</li>
<li>\u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002</li>
<li>\u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002</li>
</ul>
<h3 id="_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F</h3>
<p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002</p>
<p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p>
<p>\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//SD\u5361\u7684\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6SD\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165SD\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//SD\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">"sd card read a msg :hello word SD"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sd card write msg : "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u8111\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token class-name">SDCard</span> sdCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sdCard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">"sd card null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sdCard<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6TF\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165TF\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span><span class="token string">"tf card read msg : hello word tf card"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"tf card write a msg : "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span> <span class="token keyword">extends</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter read tf card "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter write tf card"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002</p>
<h3 id="_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F</h3>
<p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002</p>
<p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p>
<p>\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span>  <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TFCard</span> tfCard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token class-name">TFCard</span> tfCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tfCard <span class="token operator">=</span> tfCard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter read tf card "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tfCard<span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter write tf card"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tfCard<span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TFCard</span> tfCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TFCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span>tfCard<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002</p>
</blockquote>
<h3 id="_5-2-5-\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-2-5-\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> 5.2.5 \u5E94\u7528\u573A\u666F</h3>
<ul>
<li>\u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002</li>
<li>\u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002</li>
</ul>
<h3 id="_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.2.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Reader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002</p>
<p>InputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">char</span> cbuf<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" alt=""></p>
<p>\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A</p>
<ul>
<li>InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002</li>
<li>StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002</li>
</ul>
<div color="red">\u7ED3\u8BBA\uFF1A</div>
<p>\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p>
<h2 id="_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 5.3 \u88C5\u9970\u8005\u6A21\u5F0F</h2>
<h3 id="_5-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.3.1 \u6982\u8FF0</h3>
<p>\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002</p>
<p>\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002</p>
<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png" style="zoom:80%;" />
<p>\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A</p>
<ul>
<li>
<p>\u6269\u5C55\u6027\u4E0D\u597D</p>
<p>\u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002</p>
</li>
<li>
<p>\u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B</p>
</li>
</ul>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002</p>
<h3 id="_5-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.3.2 \u7ED3\u6784</h3>
<p>\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002</li>
<li>\u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002</li>
<li>\u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002</li>
</ul>
<h3 id="_5-3-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-3-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.3.3 \u6848\u4F8B</h3>
<p>\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F.png" style="zoom:75%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5FEB\u9910\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDesc</span><span class="token punctuation">(</span><span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u83B7\u53D6\u4EF7\u683C</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u996D</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedRice</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"\u7092\u996D"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u9762</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedNoodles</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"\u7092\u9762"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u914D\u6599\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Garnish</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">FastFood</span> fastFood<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFastFood</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Garnish</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">,</span> <span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u9E21\u86CB\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Egg</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"\u9E21\u86CB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u57F9\u6839\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bacon</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"\u57F9\u6839"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span>food1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food1<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food1<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762</span>
        <span class="token class-name">FastFood</span> food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span>food2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food2<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food2<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>
<p>\u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002</p>
</li>
<li>
<p>\u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002</p>
</li>
</ul>
<h3 id="_5-3-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-3-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.3.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002</p>
<p>\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A</p>
<ul>
<li>\u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B</li>
<li>\u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09</li>
</ul>
</li>
<li>
<p>\u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002</p>
</li>
<li>
<p>\u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002</p>
</li>
</ul>
<h3 id="_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.3.5 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>IO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002</p>
<p>\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFABufferedWriter\u5BF9\u8C61</span>
        <span class="token comment">//\u521B\u5EFAFileWriter\u5BF9\u8C61</span>
        <span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>fw<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5199\u6570\u636E</span>
        bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"hello Buffered"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A</p>
<img src="\\img\\\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png" style="zoom:80%;" />
<blockquote>
<div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002</p>
</blockquote>
<h3 id="_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" aria-hidden="true">#</a> 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B</h3>
<p>\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A</p>
<ul>
<li>\u76F8\u540C\u70B9\uFF1A
<ul>
<li>\u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3</li>
<li>\u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61</li>
<li>\u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5</li>
</ul>
</li>
<li>\u4E0D\u540C\u70B9\uFF1A
<ul>
<li>\u76EE\u7684\u4E0D\u540C
\u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61
\u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li>
<li>\u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C
\u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012
\u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li>
</ul>
</li>
</ul>
<h2 id="_5-4-\u6865\u63A5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-4-\u6865\u63A5\u6A21\u5F0F" aria-hidden="true">#</a> 5.4 \u6865\u63A5\u6A21\u5F0F</h2>
<h3 id="_5-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.4.1 \u6982\u8FF0</h3>
<p>\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A</p>
<p><img src="\\img\\image-20200207194617620.png" alt=""></p>
<p>\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002</p>
<p>\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002</p>
<h3 id="_5-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.4.2 \u7ED3\u6784</h3>
<p>\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002</li>
<li>\u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li>
<li>\u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002</li>
<li>\u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002</li>
</ul>
<h3 id="_5-4-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-4-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.4.3 \u6848\u4F8B</h3>
<p>\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668</p>
<p>\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u6865\u63A5\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u89C6\u9891\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//avi\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AVIFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"avi\u89C6\u9891\u6587\u4EF6\uFF1A"</span><span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//rmvb\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">REVBBFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"rmvb\u6587\u4EF6\uFF1A"</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OperatingSystemVersion</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoFile <span class="token operator">=</span> videoFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Windows\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Windows</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystem</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//mac\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mac</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Mac</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OperatingSystem</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AVIFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">"\u6218\u72FC3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>
<p>\u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002</p>
<p>\u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E</p>
</li>
</ul>
<h3 id="_5-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.4.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002</li>
<li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002</li>
<li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002</li>
</ul>
<h2 id="_5-5-\u5916\u89C2\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-5-\u5916\u89C2\u6A21\u5F0F" aria-hidden="true">#</a> 5.5 \u5916\u89C2\u6A21\u5F0F</h2>
<h3 id="_5-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.5.1 \u6982\u8FF0</h3>
<p>\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002</p>
<p>\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528</p>
<p><img src="\\img\\\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg" alt=""></p>
<h3 id="_5-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.5.2 \u7ED3\u6784</h3>
<p>\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002</li>
<li>\u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002</li>
</ul>
<h3 id="_5-5-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-5-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.5.3 \u6848\u4F8B</h3>
<p>\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236</p>
<p>\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5916\u89C2\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u706F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Light</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u706F...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u706F...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u89C6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u7535\u89C6...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u7535\u89C6...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u63A7\u5236\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AirCondition</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u7A7A\u8C03...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u7A7A\u8C03...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u667A\u80FD\u97F3\u7BB1</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAppliancesFacade</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Light</span> light<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">TV</span> tv<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AirCondition</span> airCondition<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AirCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8D77\u5E8A\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7761\u89C9\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61</span>
        <span class="token class-name">SmartAppliancesFacade</span> facade <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u5BB6\u7535"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u5BB6\u7535"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002</li>
<li>\u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6</li>
</ul>
<h3 id="_5-5-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-5-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.5.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</li>
<li>\u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002</li>
<li>\u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002</li>
</ul>
<h3 id="_5-5-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-5-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.5.5 \u6E90\u7801\u89E3\u6790</h3>
<p>\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<img src="/img/image-20200207234545691.png" style="zoom:60%;" />
<p>RequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A</p>
<img src="/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:70%;" />
<p><strong>\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F</strong></p>
<p>\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002</p>
<h2 id="_5-6-\u7EC4\u5408\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-6-\u7EC4\u5408\u6A21\u5F0F" aria-hidden="true">#</a> 5.6 \u7EC4\u5408\u6A21\u5F0F</h2>
<h3 id="_5-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.6.1 \u6982\u8FF0</h3>
<img src="/img/image-20200208180417291.png" style="zoom:60%;" />
<p>\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002</p>
<h3 id="_5-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.6.2 \u7ED3\u6784</h3>
<p>\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002</li>
<li>\u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002</li>
<li>\u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002</li>
</ul>
<h3 id="_5-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.6.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355</p>
<p>\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002</p>
<img src="/img/image-20200208182322313.png" style="zoom:80%;" />
<p>\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A</p>
<img src="/img/\u7EC4\u5408\u6A21\u5F0F.png" style="zoom:80%;" />
<p><strong>\u4EE3\u7801\u5B9E\u73B0\uFF1A</strong></p>
<p>\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>

    <span class="token comment">//\u6DFB\u52A0\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u79FB\u9664\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u83DC\u5355\u540D\u79F0</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">></span></span> menuComponentList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        menuComponentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> menuComponentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent <span class="token operator">:</span> menuComponentList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            menuComponent<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Menu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuItem</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002</p>
<h3 id="_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" aria-hidden="true">#</a> 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B</h3>
<p>\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002</p>
<ul>
<li>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F</p>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D <code v-pre>MenuComponent</code> \u58F0\u660E\u4E86 <code v-pre>add</code>\u3001<code v-pre>remove</code> \u3001<code v-pre>getChild</code> \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002</p>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09</p>
</li>
<li>
<p>\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F</p>
<p>\u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 <code v-pre>Menu</code> \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002</p>
<img src="/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png" style="zoom:80%;" />
</li>
</ul>
<h3 id="_5-6-5-\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-6-5-\u4F18\u70B9" aria-hidden="true">#</a> 5.6.5 \u4F18\u70B9</h3>
<ul>
<li>\u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002</li>
<li>\u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002</li>
<li>\u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</li>
<li>\u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002</li>
</ul>
<h3 id="_5-6-6-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-6-6-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.6.6 \u4F7F\u7528\u573A\u666F</h3>
<p>\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002</p>
<h2 id="_5-7-\u4EAB\u5143\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-7-\u4EAB\u5143\u6A21\u5F0F" aria-hidden="true">#</a> 5.7 \u4EAB\u5143\u6A21\u5F0F</h2>
<h3 id="_5-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.7.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002</p>
<h3 id="_5-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.7.2 \u7ED3\u6784</h3>
<p>\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A</p>
<ol>
<li>\u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002</li>
<li>\u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002</li>
</ol>
<p>\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002</li>
<li>\u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li>
<li>\u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002</li>
<li>\u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li>
</ul>
<h3 id="_5-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.7.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757</p>
<p>\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002</p>
<img src="/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg" style="zoom:60%;" />
<p><strong>\u5148\u6765\u770B\u7C7B\u56FE\uFF1A</strong></p>
<img src="/img/\u4EAB\u5143\u6A21\u5F0F.png" style="zoom:80%;" />
<p><strong>\u4EE3\u7801\u5982\u4E0B\uFF1A</strong></p>
<p>\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u65B9\u5757\u5F62\u72B6\uFF1A"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" \u989C\u8272\uFF1A"</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"I"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"L"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"O"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoxFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">></span></span> map<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> iBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> lBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> oBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"I"</span><span class="token punctuation">,</span> iBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"L"</span><span class="token punctuation">,</span> lBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"O"</span><span class="token punctuation">,</span> oBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">AbstractBox</span> <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F</h3>
<p><strong>1\uFF0C\u4F18\u70B9</strong></p>
<ul>
<li>\u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD</li>
<li>\u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742</p>
<p><strong>3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A</strong></p>
<ul>
<li>\u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002</li>
<li>\u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002</li>
<li>\u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002</li>
</ul>
<h3 id="_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.7.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Integer \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200208212930857.png" style="zoom:80%;" />
<p>\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">"i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">"i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F <code v-pre>valueOf()</code> \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Integer</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntegerCache</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> high<span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">static</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> integerCacheHighPropValue <span class="token operator">=</span>
                sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>VM<span class="token punctuation">.</span><span class="token function">getSavedProperty</span><span class="token punctuation">(</span><span class="token string">"java.lang.Integer.IntegerCache.high"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>integerCacheHighPropValue <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>integerCacheHighPropValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    i <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// Maximum array size is Integer.MAX_VALUE</span>
                    h <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">NumberFormatException</span> nfe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            high <span class="token operator">=</span> h<span class="token punctuation">;</span>
            cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> low<span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
                cache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>
            <span class="token keyword">assert</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high <span class="token operator">>=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230 <code v-pre>Integer</code> \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 <code v-pre>-128 ~ 127</code> \u4E4B\u95F4\u6570\u7684 <code v-pre>Integer</code> \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 <code v-pre>valueOf</code> \u65F6\u5982\u679C\u53C2\u6570\u5728 <code v-pre>-128 ~ 127</code> \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 <code v-pre>Integer</code> \u5BF9\u8C61\u3002</p>
<h1 id="_6-\u884C\u4E3A\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-\u884C\u4E3A\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F</h1>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002</p>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p>
<ul>
<li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u7B56\u7565\u6A21\u5F0F</li>
<li>\u547D\u4EE4\u6A21\u5F0F</li>
<li>\u804C\u8D23\u94FE\u6A21\u5F0F</li>
<li>\u72B6\u6001\u6A21\u5F0F</li>
<li>\u89C2\u5BDF\u8005\u6A21\u5F0F</li>
<li>\u4E2D\u4ECB\u8005\u6A21\u5F0F</li>
<li>\u8FED\u4EE3\u5668\u6A21\u5F0F</li>
<li>\u8BBF\u95EE\u8005\u6A21\u5F0F</li>
<li>\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
<li>\u89E3\u91CA\u5668\u6A21\u5F0F</li>
</ul>
<p>\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p>
<h2 id="_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</h2>
<h3 id="_6-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.1.1 \u6982\u8FF0</h3>
<p>\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002</p>
<p>\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002</p>
<h3 id="_6-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.1.2 \u7ED3\u6784</h3>
<p>\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002</p>
<ul>
<li>
<p>\u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002</p>
</li>
<li>
<p>\u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002</p>
<p>\u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>\u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002</p>
</li>
</ul>
<h3 id="_6-1-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.1.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u7092\u83DC</p>
<p>\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5012\u6CB9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u70ED\u6CB9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_BaoCai</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_CaiXin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7092\u624B\u6495\u5305\u83DC</span>
        <span class="token class-name">ConcreteClass_BaoCai</span> baoCai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_BaoCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        baoCai<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u7092\u849C\u84C9\u83DC\u5FC3</span>
        <span class="token class-name">ConcreteClass_CaiXin</span> caiXin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_CaiXin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        caiXin<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002</p>
</blockquote>
<h3 id="_6-1-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.1.3 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027</p>
<p>\u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236</p>
<p>\u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002</li>
<li>\u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002</li>
</ul>
<h3 id="_6-1-4-\u9002\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-1-4-\u9002\u7528\u573A\u666F" aria-hidden="true">#</a> 6.1.4 \u9002\u7528\u573A\u666F</h3>
<ul>
<li>\u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002</li>
<li>\u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002</li>
</ul>
<h3 id="_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.1.5 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>InputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A <code v-pre>read()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>off <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">></span> b<span class="token punctuation">.</span>length <span class="token operator">-</span> off<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        b<span class="token punctuation">[</span>off<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>

        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                b<span class="token punctuation">[</span>off <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 <code v-pre>read()</code> \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C <code v-pre>read(byte b[])</code> \u65B9\u6CD5\u8C03\u7528\u4E86 <code v-pre>read(byte b[], int off, int len)</code> \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002</p>
<p>\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 <code v-pre>read()</code> \u65B9\u6CD5\u3002</p>
<p>\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002</p>
<h2 id="_6-2-\u7B56\u7565\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-2-\u7B56\u7565\u6A21\u5F0F" aria-hidden="true">#</a> 6.2 \u7B56\u7565\u6A21\u5F0F</h2>
<h3 id="_6-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.2.1 \u6982\u8FF0</h3>
<p>\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002</p>
<img src="/img/image-20200210143039168.png" style="zoom:80%;" />
<p>\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002</p>
<img src="/img/image-20200210144457478.png" style="zoom:70%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002</p>
<h3 id="_6-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.2.2 \u7ED3\u6784</h3>
<p>\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002</li>
<li>\u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002</li>
<li>\u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002</li>
</ul>
<h3 id="_6-2-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-2-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.2.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8</p>
<p>\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u7B56\u7565\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyA</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E70\u4E00\u9001\u4E00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyB</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6EE1200\u5143\u51CF50\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyC</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SalesMan</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528</span>
    <span class="token keyword">private</span> <span class="token class-name">Strategy</span> strategy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">salesManShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        strategy<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.2.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362</p>
<p>\u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002</p>
</li>
<li>
<p>\u6613\u4E8E\u6269\u5C55</p>
<p>\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C</p>
</li>
<li>
<p>\u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002</li>
<li>\u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002</li>
</ul>
<h3 id="_6-2-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-2-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.2.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002</li>
<li>\u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002</li>
<li>\u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002</li>
<li>\u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002</li>
<li>\u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002</li>
</ul>
<h3 id="_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.2.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p><code v-pre>Comparator</code> \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A <code v-pre>sort()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">LegacyMergeSort</span><span class="token punctuation">.</span>userRequested<span class="token punctuation">)</span>
                <span class="token function">legacyMergeSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token class-name">TimSort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Arrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> demo <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> o2 <span class="token operator">-</span> o1<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[12, 5, 4, 3, 2, 2, 1]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 <code v-pre>compare()</code> \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 <code v-pre>sort()</code> \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">TimSort</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">,</span>
                         <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> work<span class="token punctuation">,</span> <span class="token keyword">int</span> workBase<span class="token punctuation">,</span> <span class="token keyword">int</span> workLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> c <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">&lt;=</span> hi <span class="token operator">&amp;&amp;</span> hi <span class="token operator">&lt;=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

        <span class="token keyword">int</span> nRemaining  <span class="token operator">=</span> hi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// Arrays of size 0 and 1 are always sorted</span>

        <span class="token comment">// If array is small, do a "mini-TimSort" with no merges</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> MIN_MERGE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> initRunLen <span class="token operator">=</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">binarySort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> lo <span class="token operator">+</span> initRunLen<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">int</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> lo <span class="token operator">&lt;</span> hi<span class="token punctuation">;</span>
        <span class="token keyword">int</span> runHi <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>runHi <span class="token operator">==</span> hi<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token comment">// Find end of run, and reverse range if descending</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Descending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">reverseRange</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> runHi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                              <span class="token comment">// Ascending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> runHi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 <code v-pre>countRunAndMakeAscending()</code> \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002</p>
<h2 id="_6-3-\u547D\u4EE4\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-3-\u547D\u4EE4\u6A21\u5F0F" aria-hidden="true">#</a> 6.3 \u547D\u4EE4\u6A21\u5F0F</h2>
<h3 id="_6-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.3.1 \u6982\u8FF0</h3>
<p>\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002</p>
<img src="/img/image-20200211130313251.png" style="zoom:60%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002</p>
<h3 id="_6-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.3.2 \u7ED3\u6784</h3>
<p>\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002</li>
<li>\u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002</li>
<li>\u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002</li>
<li>\u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002</li>
</ul>
<h3 id="_6-3-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-3-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.3.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002</p>
<p>\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002</p>
<p>\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002</p>
<p>\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u547D\u4EE4\u6A21\u5F0F.png" style="zoom:75%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Order</span> order<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span><span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">,</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u684C\u7684\u8BA2\u5355\uFF1A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> keys <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            receiver<span class="token punctuation">.</span><span class="token function">makeFood</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u684C\u7684\u996D\u5F04\u597D\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u9910\u684C\u53F7\u7801</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> diningTable<span class="token punctuation">;</span>

    <span class="token comment">// \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> foodDic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token keyword">int</span> diningTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>diningTable <span class="token operator">=</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> foodDic<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFoodDic</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        foodDic<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeniorChef</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">makeFood</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token class-name">String</span> foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">"\u4EFD"</span> <span class="token operator">+</span> foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">></span></span> commands<span class="token punctuation">;</span><span class="token comment">//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61</span>

    <span class="token keyword">public</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        commands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86......."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> commands<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Command</span> cmd <span class="token operator">=</span> commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmd<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA2\u4E2Aorder</span>
        <span class="token class-name">Order</span> order1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u897F\u7EA2\u67FF\u9E21\u86CB\u9762"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u676F\u53EF\u4E50"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Order</span> order2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C16\u6912\u8089\u4E1D\u76D6\u996D"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u676F\u96EA\u78A7"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u63A5\u6536\u8005</span>
        <span class="token class-name">SeniorChef</span> receiver<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SeniorChef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61</span>
        <span class="token class-name">OrderCommand</span> cmd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OrderCommand</span> cmd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8C03\u7528\u8005 waitor</span>
        <span class="token class-name">Waitor</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86</span>
        invoker<span class="token punctuation">.</span><span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.3.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002</li>
<li>\u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002</li>
<li>\u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002</li>
<li>\u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002</li>
<li>\u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002</li>
</ul>
<h3 id="_6-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.3.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002</li>
<li>\u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002</li>
<li>\u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002</li>
</ul>
<h3 id="_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.3.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Runable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8C03\u7528\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Runnable</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>threadStatus <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> started <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            started <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>started<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    group<span class="token punctuation">.</span><span class="token function">threadStartFailed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * jdk Runnable \u547D\u4EE4\u6A21\u5F0F
 *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TurnOffThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span>

     <span class="token keyword">public</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	receiver<span class="token punctuation">.</span><span class="token function">turnOFF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5\u7C7B
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">TurnOffThread</span> turnOffThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>turnOffThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" aria-hidden="true">#</a> 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F</h2>
<h3 id="_6-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.4.1 \u6982\u8FF0</h3>
<p>\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002</p>
<h3 id="_6-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.4.2 \u7ED3\u6784</h3>
<p>\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:</p>
<ul>
<li>\u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002</li>
<li>\u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002</li>
<li>\u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002</li>
</ul>
<h3 id="_6-4-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-4-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.4.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u8BF7\u5047\u6761</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeaveRequest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//\u59D3\u540D</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5929\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5185\u5BB9</span>

    <span class="token keyword">public</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5904\u7406\u8005\u62BD\u8C61\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_ONE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_THREE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_SEVEN <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numStart<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">;</span>

    <span class="token comment">//\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC</span>
    <span class="token keyword">private</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">,</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numEnd <span class="token operator">=</span> numEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u63D0\u4EA4\u8BF7\u5047\u6761</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleLeave</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> numEnd<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7EE7\u7EED\u63D0\u4EA4</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6D41\u7A0B\u7ED3\u675F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5C0F\u7EC4\u957F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeader</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_ONE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u90E8\u95E8\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u603B\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u8BF7\u5047\u6761\u6765\u4E00\u5F20</span>
        <span class="token class-name">LeaveRequest</span> leave <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u82B1"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"\u8EAB\u4F53\u4E0D\u9002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5404\u4F4D\u9886\u5BFC</span>
        <span class="token class-name">GroupLeader</span> groupLeader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeneralManager</span> generalManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        groupLeader<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406</span>
        manager<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>generalManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406</span>
        <span class="token comment">//\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002</span>

        <span class="token comment">//\u63D0\u4EA4\u7533\u8BF7</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.4.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6</p>
<p>\u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002</p>
</li>
<li>
<p>\u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027</p>
<p>\u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002</p>
</li>
<li>
<p>\u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027</p>
<p>\u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002</p>
</li>
<li>
<p>\u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5</p>
<p>\u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002</p>
</li>
<li>
<p>\u8D23\u4EFB\u5206\u62C5</p>
<p>\u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002</li>
<li>\u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002</li>
<li>\u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002</li>
</ul>
<h3 id="_6-4-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-4-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.4.5 \u6E90\u7801\u89E3\u6790</h3>
<p>\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:</p>
<ul>
<li>
<p>\u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Request</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Response</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">,</span><span class="token class-name">Response</span> res<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondFilter</span>  <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterChain</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// \u94FE\u5F0F\u8C03\u7528</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterChain</span> <span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token class-name">Filter</span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> filters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Filter</span> filter <span class="token operator">=</span> filters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        index<span class="token operator">++</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Request</span>  req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Response</span> res <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span>

        <span class="token class-name">FilterChain</span> filterChain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FirstFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecondFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h2 id="_6-5-\u72B6\u6001\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-5-\u72B6\u6001\u6A21\u5F0F" aria-hidden="true">#</a> 6.5 \u72B6\u6001\u6A21\u5F0F</h2>
<h3 id="_6-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.5.1 \u6982\u8FF0</h3>
<p>\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u72B6\u6001\u6A21\u5F0F\u524D.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7535\u68AF\u76844\u4E2A\u72B6\u6001</span>
    <span class="token comment">//\u5F00\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> OPENING_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5173\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> CLOSING_STATE <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> RUNNING_STATE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> STOPPING_STATE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lift</span> <span class="token keyword">implements</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> state<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> OPENING_STATE<span class="token operator">:</span> <span class="token comment">//\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> CLOSING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> RUNNING_STATE<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> STOPPING_STATE<span class="token operator">:</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Lift</span> lift <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lift<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">ILift</span><span class="token punctuation">.</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u662F\u505C\u6B62\u7684</span>
        lift<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C</span>
        lift<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u95EE\u9898\u5206\u6790\uFF1A</p>
<ul>
<li>\u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002</li>
<li>\u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91</li>
</ul>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002</p>
<h3 id="_6-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.5.2 \u7ED3\u6784</h3>
<p>\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p>
<ul>
<li>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002</li>
<li>\u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li>
<li>\u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li>
</ul>
<h3 id="_6-5-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-5-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.5.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u72B6\u6001\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u72B6\u6001\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316</span>
    <span class="token keyword">protected</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5F00\u542F\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5F00\u542F..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u6B63\u5728\u8FD0\u884C..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoppingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5173\u95ED\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClosingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5173\u95ED..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">OpenningState</span> openningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">ClosingState</span> closeingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">RunningState</span> runningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">StoppingState</span> stoppingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C</span>


    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">private</span> <span class="token class-name">LiftState</span> liftState<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LiftState</span> <span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F53\u524D\u73AF\u5883\u6539\u53D8</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState <span class="token operator">=</span> liftState<span class="token punctuation">;</span>
        <span class="token comment">//\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-5-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.5.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002</li>
<li>\u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002</li>
<li>\u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002</li>
<li>\u72B6\u6001\u6A21\u5F0F\u5BF9&quot;\u5F00\u95ED\u539F\u5219&quot;\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002</li>
</ul>
<h3 id="_6-5-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-5-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.5.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002</li>
<li>\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002</li>
</ul>
<h2 id="_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F</h2>
<h3 id="_6-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.6.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002</p>
<h3 id="_6-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.6.2 \u7ED3\u6784</h3>
<p>\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002</li>
<li>ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002</li>
<li>Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002</li>
<li>ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002</li>
</ul>
<h3 id="_6-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7</p>
<p>\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeixinUser</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5FAE\u4FE1\u7528\u6237\u540D</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u589E\u52A0\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5220\u9664\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span> weixinUserlist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer <span class="token operator">:</span> weixinUserlist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u7A0B\u5E8F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SubscriptionSubject</span> mSubscriptionSubject<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237</span>
        <span class="token class-name">WeixinUser</span> user1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u5B59\u609F\u7A7A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u732A\u609F\u80FD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u6C99\u609F\u51C0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA2\u9605\u516C\u4F17\u53F7</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">"\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-6-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.6.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002</li>
<li>\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6</li>
<li>\u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83</li>
</ul>
<h3 id="_6-6-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-6-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.6.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002</li>
<li>\u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002</li>
</ul>
<h3 id="_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0</h3>
<p>\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002</p>
<p><strong>1\uFF0CObservable \u7C7B</strong></p>
<p>Observable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002</p>
<ul>
<li>
<p>void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002</p>
</li>
<li>
<p>void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002</p>
</li>
<li>
<p>void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002</p>
</li>
</ul>
<p><strong>2\uFF0CObserver \u63A5\u53E3</strong></p>
<p>Observer \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002</p>
<p>\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077</p>
<p>\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thief</span> <span class="token keyword">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//changed  = true</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Policemen</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Observable</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8B66\u5BDF\uFF1A"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Thief</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u4EE3\u7801</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61</span>
        <span class="token class-name">Thief</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token string">"\u9694\u58C1\u8001\u738B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61</span>
        <span class="token class-name">Policemen</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u674E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077</span>
        t<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C0F\u5077\u5077\u4E1C\u897F</span>
        t<span class="token punctuation">.</span><span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F</h2>
<h3 id="_6-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.7.1 \u6982\u8FF0</h3>
<p>\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002</p>
<p>\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002</p>
<img src="/img/image-20200214110924010.png" style="zoom:60%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002</p>
<h3 id="_6-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.7.2 \u7ED3\u6784</h3>
<p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002</p>
</li>
<li>
<p>\u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002</p>
</li>
</ul>
<h3 id="_6-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.7.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u79DF\u623F</p>
<p>\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u4E2D\u4ECB\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u62BD\u8C61\u540C\u4E8B\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HouseOwner</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u623F\u4E3B"</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tenant</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u79DF\u623F\u8005"</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E2D\u4ECB\u673A\u6784</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorStructure</span> <span class="token keyword">extends</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F</span>
    <span class="token keyword">private</span> <span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tenant</span> tenant<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span> <span class="token function">getHouseOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHouseOwner</span><span class="token punctuation">(</span><span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>houseOwner <span class="token operator">=</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Tenant</span> <span class="token function">getTenant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTenant</span><span class="token punctuation">(</span><span class="token class-name">Tenant</span> tenant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tenant <span class="token operator">=</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>person <span class="token operator">==</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">//\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F</span>
            tenant<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>       <span class="token comment">//\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F</span>
            houseOwner<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784</span>
        <span class="token class-name">MediatorStructure</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediatorStructure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF</span>
        <span class="token class-name">HouseOwner</span> houseOwner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Tenant</span> tenant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005</span>
        mediator<span class="token punctuation">.</span><span class="token function">setHouseOwner</span><span class="token punctuation">(</span>houseOwner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediator<span class="token punctuation">.</span><span class="token function">setTenant</span><span class="token punctuation">(</span>tenant<span class="token punctuation">)</span><span class="token punctuation">;</span>

        tenant<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">"\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        houseOwner<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">"\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-7-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-7-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.7.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u677E\u6563\u8026\u5408</p>
<p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002</p>
</li>
<li>
<p>\u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92</p>
<p>\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002</p>
</li>
<li>
<p>\u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054</p>
<p>\u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002</p>
<h3 id="_6-7-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-7-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.7.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002</li>
<li>\u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002</li>
</ul>
<h2 id="_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F</h2>
<h3 id="_6-8-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-8-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.8.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002</p>
<h3 id="_6-8-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-8-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.8.2 \u7ED3\u6784</h3>
<p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002</p>
</li>
<li>
<p>\u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002</p>
</li>
</ul>
<h3 id="_6-8-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-8-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.8.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png" style="zoom:90%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentIteratorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> position <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Student</span> currentStudent <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position <span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> currentStudent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAggregateImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u5B66\u751F\u5217\u8868</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-8-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-8-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.8.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002</li>
<li>\u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002</li>
<li>\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002</p>
<h3 id="_6-8-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-8-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.8.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002</li>
<li>\u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002</li>
<li>\u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002</li>
</ul>
<h3 id="_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.8.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E</p>
<ul>
<li>List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B</li>
<li>ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B</li>
<li>Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668</li>
<li>list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 <code v-pre>Iterator</code> \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61</li>
</ul>
<p>\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span>
        <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>       <span class="token comment">// \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>

        <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token comment">//\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> cursor <span class="token operator">!=</span> size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> size<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cursor <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 <code v-pre>iterator</code> \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 <code v-pre>Iterator</code> \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 <code v-pre>Iterator</code> \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p>
<blockquote>
<p>\u6CE8\u610F\uFF1A</p>
<p>\u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0<code v-pre>java.util.Iterable</code>\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A <code v-pre>java.util.Iterator</code> \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002</p>
</blockquote>
<h2 id="_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F</h2>
<h3 id="_6-9-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-9-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.9.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002</p>
<h3 id="_6-9-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-9-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.9.2 \u7ED3\u6784</h3>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:</p>
<ul>
<li>\u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20<code v-pre>\uFF08Element\uFF09</code>\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002</li>
<li>\u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002</li>
<li>\u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08<code v-pre>accept</code>\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li>
<li>\u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002</li>
<li>\u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08<code v-pre>Element</code>\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li>
</ul>
<h3 id="_6-9-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-9-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.9.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF</p>
<p>\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002</p>
<ul>
<li>\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA</li>
<li>\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA</li>
<li>\u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B</li>
<li>\u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B</li>
<li>\u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6</li>
</ul>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u8BBF\u95EE\u8005\u6A21\u5F0F.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 <code v-pre>Person</code>\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Owner</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E3B\u4EBA\u5582\u98DF\u732B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E3B\u4EBA\u5582\u98DF\u72D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Someone</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5176\u4ED6\u4EBA\u5582\u98DF\u732B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5B9E\u73B0<code v-pre>Animal</code>\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">></span></span> nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span> node <span class="token operator">:</span> nodeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6DFB\u52A0\u64CD\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nodeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Home</span> home <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Owner</span> owner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Someone</span> someone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Someone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-9-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-9-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.9.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u6269\u5C55\u6027\u597D</p>
<p>\u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u590D\u7528\u6027\u597D</p>
<p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002</p>
</li>
<li>
<p>\u5206\u79BB\u65E0\u5173\u884C\u4E3A</p>
<p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE</p>
<p>\u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
</li>
<li>
<p>\u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219</p>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002</p>
</li>
</ul>
<h3 id="_6-9-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-9-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.9.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002</p>
</li>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002</p>
</li>
</ul>
<h3 id="_6-9-6-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_6-9-6-\u6269\u5C55" aria-hidden="true">#</a> 6.9.6 \u6269\u5C55</h3>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002</p>
<p><strong>1\uFF0C\u5206\u6D3E\uFF1A</strong></p>
<p>\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 <code v-pre>Map map = new HashMap()</code> \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F <code v-pre>Map</code> \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F <code v-pre>HashMap</code> \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002</p>
<p><strong>\u9759\u6001\u5206\u6D3E(Static Dispatch)</strong> \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002</p>
<p><strong>\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)</strong> \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p>
<p><strong>2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A</strong></p>
<p>\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
   	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002</p>
<p>Java \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002</p>
<p><strong>3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A</strong></p>
<p>\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p>
<img src="/img/image-20200214215446638.png" style="zoom:70%;" />
<p>\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F</p>
<p><strong>\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002</strong></p>
<p><strong>4\uFF0C\u53CC\u5206\u6D3E\uFF1A</strong></p>
<p>\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F<code v-pre>\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E</code>\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002</p>
<p>\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002</p>
<p>\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200426233931693.png" style="zoom:67%;" />
<p><strong>\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002</strong></p>
<h2 id="_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F</h2>
<h3 id="_6-10-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-10-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.10.1 \u6982\u8FF0</h3>
<p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002</p>
<h3 id="_6-10-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-10-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.10.2 \u7ED3\u6784</h3>
<p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002</li>
<li>\u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002</li>
<li>\u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002</li>
</ul>
<blockquote>
<p>\u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A</p>
<ul>
<li><strong>\u7A84\u63A5\u53E3</strong>\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002</li>
<li><strong>\u5BBD\u63A5\u53E3</strong>\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002</li>
</ul>
</blockquote>
<h3 id="_6-10-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-10-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.10.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS</p>
<p>\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002</p>
<p>\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A</p>
<ul>
<li>\u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
<li>\u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
</ul>
<h4 id="_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4>
<p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u6E38\u620F\u89D2\u8272\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u751F\u547D\u529B\uFF1A"</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u653B\u51FB\u529B\uFF1A"</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u9632\u5FA1\u529B\uFF1A"</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u524D------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u540E------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002</p>
</blockquote>
<h4 id="_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4>
<p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06<strong>\u5907\u5FD8\u5F55\u7C7B</strong>\u8BBE\u8BA1\u6210<strong>\u53D1\u8D77\u4EBA\u7C7B</strong>\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002</p>
<p>\u5C06 <code v-pre>RoleStateMemento</code> \u8BBE\u4E3A <code v-pre>GameRole</code> \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 <code v-pre>RoleStateMemento</code> \u5BF9\u8C61\u5C01\u88C5\u5728 <code v-pre>GameRole</code> \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 <code v-pre>Memento</code> \u7ED9 <code v-pre>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 <code v-pre>GameRole</code> \u7C7B\u770B\u5230\u7684\u662F <code v-pre>RoleStateMemento</code> \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C<code v-pre>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 <code v-pre>Memento</code> \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u7A84\u63A5\u53E3<code v-pre>Memento</code>\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B <code v-pre>GameRole</code>\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B <code v-pre>RoleStateMemento</code>\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token operator">/</span>\u6E38\u620F\u89D2\u8272\u7C7B
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RoleStateMemento</span> roleStateMemento <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span><span class="token punctuation">)</span> memento<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u751F\u547D\u529B\uFF1A"</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u653B\u51FB\u529B\uFF1A"</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u9632\u5FA1\u529B\uFF1A"</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token keyword">implements</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B <code v-pre>RoleStateCaretaker</code> \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 <code v-pre>Memento</code> \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u524D------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u540E------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-10-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-10-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.10.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002</li>
<li>\u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002</li>
<li>\u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002</li>
</ul>
<h3 id="_6-10-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-10-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.10.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002</p>
</li>
</ul>
<h2 id="_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F</h2>
<h3 id="_6-11-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-11-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.11.1 \u6982\u8FF0</h3>
<img src="/img/image-20200215220322641.png" style="zoom:60%;" />
<p>\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> i <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002</p>
<p>\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<blockquote>
<p>\u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002</p>
</blockquote>
<p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002</p>
<p>\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F</p>
<p><strong>\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A</strong></p>
<p>\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>expression ::= value | plus | minus
plus ::= expression \u2018+\u2019 expression
minus ::= expression \u2018-\u2019 expression
value ::= integer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002</p>
</blockquote>
<p>\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A</p>
<p>\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002</p>
<p><strong>\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A</strong></p>
<p>\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002</p>
<p>\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002</p>
<img src="/img/image-20200215225227616.png" style="zoom:50%;" />
<h3 id="_6-11-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-11-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.11.2 \u7ED3\u6784</h3>
<p>\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p>
<ul>
<li>
<p>\u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002</p>
</li>
<li>
<p>\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002</p>
</li>
<li>
<p>\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002</p>
</li>
<li>
<p>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002</p>
</li>
<li>
<p>\u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002</p>
</li>
</ul>
<h3 id="_6-11-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-11-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.11.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6</p>
<img src="/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u89D2\u8272AbstractExpression</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"("</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" + "</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Minus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"("</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" - "</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Variable</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> value <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Variable</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Value v = new Value(1);</span>

        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AbstractExpression</span> expression <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>expression <span class="token operator">+</span> <span class="token string">"= "</span> <span class="token operator">+</span> expression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-11-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-11-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.11.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002</p>
<p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002</p>
<p>\u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002</p>
</li>
<li>
<p>\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002</p>
<p>\u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 &quot;\u5F00\u95ED\u539F\u5219&quot;\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002</p>
<p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002</p>
</li>
</ul>
<ul>
<li>
<p>\u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002</p>
<p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002</p>
</li>
</ul>
<h3 id="_6-11-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-11-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.11.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002</p>
</li>
<li>
<p>\u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002</p>
</li>
<li>
<p>\u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002</p>
</li>
</ul>
<h1 id="_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" tabindex="-1"><a class="header-anchor" href="#_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" aria-hidden="true">#</a> 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6</h1>
<h2 id="_7-1-spring-\u4F7F\u7528\u56DE\u987E" tabindex="-1"><a class="header-anchor" href="#_7-1-spring-\u4F7F\u7528\u56DE\u987E" aria-hidden="true">#</a> 7.1 spring \u4F7F\u7528\u56DE\u987E</h2>
<p>\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002</p>
<ul>
<li>
<p>\u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"userDaoImpl ...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"userServiceImpl ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61</span>
        <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">,</span> <span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5</span>
        userService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">></span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd"<span class="token operator">></span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userService"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.itheima.service.impl.UserServiceImpl"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"userDao"</span> ref<span class="token operator">=</span><span class="token string">"userDao"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userDao"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.itheima.dao.impl.UserDaoImpl"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200429165544151.png" style="zoom:60%;" />
</li>
</ul>
<p>\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A</p>
<ul>
<li>userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002</li>
<li>\u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002</li>
<li>UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002</li>
</ul>
<p>\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09</p>
<h2 id="_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" aria-hidden="true">#</a> 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784</h2>
<p>Spring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:</p>
<p>\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A</p>
<img src="/img/image-20200429111324770.png" style="zoom:40%;" />
<p>\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002</p>
<ul>
<li>spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002</li>
<li>spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002</li>
<li>spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002</li>
<li>spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002</li>
<li>spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002</li>
</ul>
<h3 id="_7-1-1-bean-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_7-1-1-bean-\u6982\u8FF0" aria-hidden="true">#</a> 7.1.1 bean \u6982\u8FF0</h3>
<p>Spring \u5C31\u662F\u9762\u5411 <code v-pre>Bean</code> \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</p>
<p>spring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F</p>
<ul>
<li>spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002</li>
<li>bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002</li>
</ul>
<h2 id="_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" aria-hidden="true">#</a> 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790</h2>
<h3 id="_7-3-1-beanfactory-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-1-beanfactory-\u89E3\u6790" aria-hidden="true">#</a> 7.3.1 BeanFactory \u89E3\u6790</h3>
<p>Spring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429185050396.png" style="zoom:60%;" />
<p>\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002</p>
<p>\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F</p>
<p>\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C</p>
<ul>
<li>ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002</li>
<li>HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean</li>
<li>AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002</li>
</ul>
<p>\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>

	<span class="token class-name">String</span> FACTORY_BEAN_PREFIX <span class="token operator">=</span> <span class="token string">"&amp;"</span><span class="token punctuation">;</span>

	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>

	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">ResolvableType</span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B</span>
	<span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isPrototype</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">ResolvableType</span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAliases</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002</p>
<p>BeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002</p>
<img src="/img/image-20200430220155371.png" style="zoom:60%;" />
<p>\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A</p>
<ul>
<li>ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li>
<li>FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li>
<li>AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002</li>
</ul>
<h3 id="_7-3-2-beandefinition-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-2-beandefinition-\u89E3\u6790" aria-hidden="true">#</a> 7.3.2 BeanDefinition \u89E3\u6790</h3>
<p>Spring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>

bean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A
	scope\u3001init-method\u3001destory-method\u7B49\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429204239868.png" style="zoom:60%;" />
<h3 id="_7-3-3-beandefinitionreader-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-3-beandefinitionreader-\u89E3\u6790" aria-hidden="true">#</a> 7.3.3 BeanDefinitionReader \u89E3\u6790</h3>
<p>Bean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429204700956.png" style="zoom:60%;" />
<p>\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61</span>
	<span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ResourceLoader</span> <span class="token function">getResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ClassLoader</span> <span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token class-name">BeanNameGenerator</span> <span class="token function">getBeanNameGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*
		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D
	*/</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span> resource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> resources<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> locations<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-4-beandefinitionregistry-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-4-beandefinitionregistry-\u89E3\u6790" aria-hidden="true">#</a> 7.3.4 BeanDefinitionRegistry \u89E3\u6790</h3>
<p>BeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token keyword">extends</span> <span class="token class-name">AliasRegistry</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean</span>
	<span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200429211132185.png" style="zoom:60%;" />
<p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A</p>
<ul>
<li>
<p>DefaultListableBeanFactory</p>
<p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
<li>
<p>SimpleBeanDefinitionRegistry</p>
<p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
</ul>
<h3 id="_7-3-5-\u521B\u5EFA\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_7-3-5-\u521B\u5EFA\u5BB9\u5668" aria-hidden="true">#</a> 7.3.5 \u521B\u5EFA\u5BB9\u5668</h3>
<p>ClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002</p>
<h2 id="_7-4-\u81EA\u5B9A\u4E49-springioc" tabindex="-1"><a class="header-anchor" href="#_7-4-\u81EA\u5B9A\u4E49-springioc" aria-hidden="true">#</a> 7.4 \u81EA\u5B9A\u4E49 SpringIOC</h2>
<p>\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" aria-hidden="true">#</a> 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B</h3>
<h4 id="_7-4-1-1-propertyvalue-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-1-propertyvalue-\u7C7B" aria-hidden="true">#</a> 7.4.1.1 PropertyValue \u7C7B</h4>
<p>\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertyValue</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> ref<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> ref<span class="token punctuation">,</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRef</span><span class="token punctuation">(</span><span class="token class-name">String</span> ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-2-mutablepropertyvalues-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-2-mutablepropertyvalues-\u7C7B" aria-hidden="true">#</a> 7.4.1.2 MutablePropertyValues \u7C7B</h4>
<p>\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MutablePropertyValues</span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> propertyValueList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token punctuation">(</span>propertyValueList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> propertyValueList <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> pv<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValueList<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">PropertyValue</span> currentPv <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pv<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pv<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-3-beandefinition-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-3-beandefinition-\u7C7B" aria-hidden="true">#</a> 7.4.1.3 BeanDefinition \u7C7B</h4>
<p>BeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDefinition</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> className<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setClassName</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPropertyValues</span><span class="token punctuation">(</span><span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValues <span class="token operator">=</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3</h4>
<p>BeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A</p>
<ul>
<li>\u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</li>
<li>\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li>
<li>\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61</li>
<li>\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570</li>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</span>
    <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61</span>
    <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token comment">//\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-2-2-simplebeandefinitionregistry-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-2-simplebeandefinitionregistry-\u7C7B" aria-hidden="true">#</a> 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B</h4>
<p>\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-3-1-beandefinitionreader-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-3-1-beandefinitionreader-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.3.1 BeanDefinitionReader \u63A5\u53E3</h4>
<p>BeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A</p>
<ul>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002</li>
<li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C</span>
    <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-3-2-xmlbeandefinitionreader-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-2-xmlbeandefinitionreader-\u7C7B" aria-hidden="true">#</a> 7.4.3.2 XmlBeanDefinitionReader \u7C7B</h4>
<p>XmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlBeanDefinitionReader</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SAXReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> document <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Element</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u89E3\u6790bean\u6807\u7B7E</span>
        <span class="token function">parseBean</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">parseBean</span><span class="token punctuation">(</span><span class="token class-name">Element</span> rootElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> elements <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">"property"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MutablePropertyValues</span> mutablePropertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element1 <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> ref <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"ref"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> value <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>ref<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                mutablePropertyValues<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setPropertyValues</span><span class="token punctuation">(</span>mutablePropertyValues<span class="token punctuation">)</span><span class="token punctuation">;</span>

            registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-4-1-beanfactory-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-1-beanfactory-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.1 BeanFactory \u63A5\u53E3</h4>
<p>\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-2-applicationcontext-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-2-applicationcontext-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.2 ApplicationContext \u63A5\u53E3</h4>
<p>\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 <code v-pre>refresh()</code> \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A</p>
<ul>
<li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002</li>
<li>\u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA</span>
    <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-3-abstractapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-3-abstractapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.3 AbstractApplicationContext \u7C7B</h4>
<ul>
<li>
<p>\u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002</p>
</li>
<li>
<p>\u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p>
<p>BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002</p>
</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractApplicationContext</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContext</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">BeanDefinitionReader</span> beanDefinitionReader<span class="token punctuation">;</span>
    <span class="token comment">//\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61</span>
    <span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> singletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> configLocation<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//\u52A0\u8F7DBeanDefinition</span>
        beanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521D\u59CB\u5316bean</span>
        <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//bean\u7684\u521D\u59CB\u5316</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanNames <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002</p>
</blockquote>
<h4 id="_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.4 ClassPathXmlApplicationContext \u7C7B</h4>
<p>\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A</p>
<ul>
<li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002</li>
<li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002</li>
<li>\u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathXmlApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configLocation <span class="token operator">=</span> configLocation<span class="token punctuation">;</span>
        <span class="token comment">//\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61</span>
        beanDefinitionReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//return singletonObjects.get(name);</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> singletonObjects<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>beanDefinition <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> beanObj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MutablePropertyValues</span> propertyValues <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> propertyName <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> ref <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>ref <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        singletonObjects<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>beanObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> beanObj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>bean <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" aria-hidden="true">#</a> 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3</h3>
<h4 id="_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F</h4>
<ul>
<li>\u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002</li>
<li>\u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002</li>
<li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002</li>
<li>\u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002</li>
</ul>
<p>spring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002</p>
<h4 id="_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219</h4>
<h4 id="_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" tabindex="-1"><a class="header-anchor" href="#_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" aria-hidden="true">#</a> 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165</h4>
<p>spring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A</p>
<ul>
<li>\u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002</li>
<li>\u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002</li>
<li>\u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002</li>
</ul>
`, "date": "2022-08-19", "deps": [], "links": [], "pathInferred": "/design-pattern/", "pathLocale": "/", "permalink": null, "routeMeta": { "title": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F" }, "sfcBlocks": [], "slug": "README", "filePath": "/home/runner/work/blog-docs/blog-docs/docs/design-pattern/README.md", "filePathRelative": "design-pattern/README.md", "componentFilePath": "/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/design-pattern/index.html.vue", "componentFilePathRelative": "pages/design-pattern/index.html.vue", "componentFileChunkName": "v-d5fe0c96", "dataFilePath": "/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/design-pattern/index.html.js", "dataFilePathRelative": "pages/design-pattern/index.html.js", "dataFileChunkName": "v-d5fe0c96", "htmlFilePath": "/home/runner/work/blog-docs/blog-docs/dist/design-pattern/index.html", "htmlFilePathRelative": "design-pattern/index.html" }, { "data": { "key": "v-3706649a", "path": "/404.html", "title": "", "lang": "zh-CN", "frontmatter": { "layout": "404", "summary": "", "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/404.html" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:type", "content": "website" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }]] }, "excerpt": "", "headers": [], "git": {}, "filePathRelative": null, "readingTime": { "minutes": 0, "words": 0 }, "copyright": "\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709\n\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/404.html" }, "key": "v-3706649a", "path": "/404.html", "title": "", "lang": "zh-CN", "frontmatter": { "layout": "404", "summary": "", "head": [["meta", { "property": "og:url", "content": "https://anyfork.github.io/blog-docs/404.html" }], ["meta", { "property": "og:site_name", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }], ["meta", { "property": "og:type", "content": "website" }], ["meta", { "property": "og:locale", "content": "zh-CN" }], ["meta", { "property": "article:author", "content": "\u5C0F\u7D2B\u5FF5\u6C81" }]] }, "excerpt": "", "headers": [], "content": "", "contentRendered": "", "date": "0000-00-00", "deps": [], "links": [], "pathInferred": null, "pathLocale": "/", "permalink": null, "routeMeta": { "title": "" }, "sfcBlocks": [], "slug": "", "filePath": null, "filePathRelative": null, "componentFilePath": "/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/404.html.vue", "componentFilePathRelative": "pages/404.html.vue", "componentFileChunkName": "v-3706649a", "dataFilePath": "/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/404.html.js", "dataFilePathRelative": "pages/404.html.js", "dataFileChunkName": "v-3706649a", "htmlFilePath": "/home/runner/work/blog-docs/blog-docs/dist/404.html", "htmlFilePathRelative": "404.html" }].filter((item) => item.path != "/" && item.path != "/404.html");
  return { posts };
};
var typed = { exports: {} };
/*!
 * 
 *   typed.js - A JavaScript Typing Animation Library
 *   Author: Matt Boldt <me@mattboldt.com>
 *   Version: v2.0.12
 *   Url: https://github.com/mattboldt/typed.js
 *   License(s): MIT
 * 
 */
(function(module, exports) {
  (function webpackUniversalModuleDefinition(root, factory) {
    module.exports = factory();
  })(commonjsGlobal, function() {
    return function(modules) {
      var installedModules = {};
      function __webpack_require__(moduleId) {
        if (installedModules[moduleId])
          return installedModules[moduleId].exports;
        var module2 = installedModules[moduleId] = {
          exports: {},
          id: moduleId,
          loaded: false
        };
        modules[moduleId].call(module2.exports, module2, module2.exports, __webpack_require__);
        module2.loaded = true;
        return module2.exports;
      }
      __webpack_require__.m = modules;
      __webpack_require__.c = installedModules;
      __webpack_require__.p = "";
      return __webpack_require__(0);
    }([
      function(module2, exports2, __webpack_require__) {
        Object.defineProperty(exports2, "__esModule", {
          value: true
        });
        var _createClass = function() {
          function defineProperties(target, props) {
            for (var i2 = 0; i2 < props.length; i2++) {
              var descriptor = props[i2];
              descriptor.enumerable = descriptor.enumerable || false;
              descriptor.configurable = true;
              if ("value" in descriptor)
                descriptor.writable = true;
              Object.defineProperty(target, descriptor.key, descriptor);
            }
          }
          return function(Constructor, protoProps, staticProps) {
            if (protoProps)
              defineProperties(Constructor.prototype, protoProps);
            if (staticProps)
              defineProperties(Constructor, staticProps);
            return Constructor;
          };
        }();
        function _classCallCheck(instance, Constructor) {
          if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
          }
        }
        var _initializerJs = __webpack_require__(1);
        var _htmlParserJs = __webpack_require__(3);
        var Typed2 = function() {
          function Typed3(elementId, options2) {
            _classCallCheck(this, Typed3);
            _initializerJs.initializer.load(this, options2, elementId);
            this.begin();
          }
          _createClass(Typed3, [{
            key: "toggle",
            value: function toggle() {
              this.pause.status ? this.start() : this.stop();
            }
          }, {
            key: "stop",
            value: function stop() {
              if (this.typingComplete)
                return;
              if (this.pause.status)
                return;
              this.toggleBlinking(true);
              this.pause.status = true;
              this.options.onStop(this.arrayPos, this);
            }
          }, {
            key: "start",
            value: function start() {
              if (this.typingComplete)
                return;
              if (!this.pause.status)
                return;
              this.pause.status = false;
              if (this.pause.typewrite) {
                this.typewrite(this.pause.curString, this.pause.curStrPos);
              } else {
                this.backspace(this.pause.curString, this.pause.curStrPos);
              }
              this.options.onStart(this.arrayPos, this);
            }
          }, {
            key: "destroy",
            value: function destroy() {
              this.reset(false);
              this.options.onDestroy(this);
            }
          }, {
            key: "reset",
            value: function reset2() {
              var restart = arguments.length <= 0 || arguments[0] === void 0 ? true : arguments[0];
              clearInterval(this.timeout);
              this.replaceText("");
              if (this.cursor && this.cursor.parentNode) {
                this.cursor.parentNode.removeChild(this.cursor);
                this.cursor = null;
              }
              this.strPos = 0;
              this.arrayPos = 0;
              this.curLoop = 0;
              if (restart) {
                this.insertCursor();
                this.options.onReset(this);
                this.begin();
              }
            }
          }, {
            key: "begin",
            value: function begin() {
              var _this = this;
              this.options.onBegin(this);
              this.typingComplete = false;
              this.shuffleStringsIfNeeded(this);
              this.insertCursor();
              if (this.bindInputFocusEvents)
                this.bindFocusEvents();
              this.timeout = setTimeout(function() {
                if (!_this.currentElContent || _this.currentElContent.length === 0) {
                  _this.typewrite(_this.strings[_this.sequence[_this.arrayPos]], _this.strPos);
                } else {
                  _this.backspace(_this.currentElContent, _this.currentElContent.length);
                }
              }, this.startDelay);
            }
          }, {
            key: "typewrite",
            value: function typewrite(curString, curStrPos) {
              var _this2 = this;
              if (this.fadeOut && this.el.classList.contains(this.fadeOutClass)) {
                this.el.classList.remove(this.fadeOutClass);
                if (this.cursor)
                  this.cursor.classList.remove(this.fadeOutClass);
              }
              var humanize = this.humanizer(this.typeSpeed);
              var numChars = 1;
              if (this.pause.status === true) {
                this.setPauseStatus(curString, curStrPos, true);
                return;
              }
              this.timeout = setTimeout(function() {
                curStrPos = _htmlParserJs.htmlParser.typeHtmlChars(curString, curStrPos, _this2);
                var pauseTime = 0;
                var substr = curString.substr(curStrPos);
                if (substr.charAt(0) === "^") {
                  if (/^\^\d+/.test(substr)) {
                    var skip = 1;
                    substr = /\d+/.exec(substr)[0];
                    skip += substr.length;
                    pauseTime = parseInt(substr);
                    _this2.temporaryPause = true;
                    _this2.options.onTypingPaused(_this2.arrayPos, _this2);
                    curString = curString.substring(0, curStrPos) + curString.substring(curStrPos + skip);
                    _this2.toggleBlinking(true);
                  }
                }
                if (substr.charAt(0) === "`") {
                  while (curString.substr(curStrPos + numChars).charAt(0) !== "`") {
                    numChars++;
                    if (curStrPos + numChars > curString.length)
                      break;
                  }
                  var stringBeforeSkip = curString.substring(0, curStrPos);
                  var stringSkipped = curString.substring(stringBeforeSkip.length + 1, curStrPos + numChars);
                  var stringAfterSkip = curString.substring(curStrPos + numChars + 1);
                  curString = stringBeforeSkip + stringSkipped + stringAfterSkip;
                  numChars--;
                }
                _this2.timeout = setTimeout(function() {
                  _this2.toggleBlinking(false);
                  if (curStrPos >= curString.length) {
                    _this2.doneTyping(curString, curStrPos);
                  } else {
                    _this2.keepTyping(curString, curStrPos, numChars);
                  }
                  if (_this2.temporaryPause) {
                    _this2.temporaryPause = false;
                    _this2.options.onTypingResumed(_this2.arrayPos, _this2);
                  }
                }, pauseTime);
              }, humanize);
            }
          }, {
            key: "keepTyping",
            value: function keepTyping(curString, curStrPos, numChars) {
              if (curStrPos === 0) {
                this.toggleBlinking(false);
                this.options.preStringTyped(this.arrayPos, this);
              }
              curStrPos += numChars;
              var nextString = curString.substr(0, curStrPos);
              this.replaceText(nextString);
              this.typewrite(curString, curStrPos);
            }
          }, {
            key: "doneTyping",
            value: function doneTyping(curString, curStrPos) {
              var _this3 = this;
              this.options.onStringTyped(this.arrayPos, this);
              this.toggleBlinking(true);
              if (this.arrayPos === this.strings.length - 1) {
                this.complete();
                if (this.loop === false || this.curLoop === this.loopCount) {
                  return;
                }
              }
              this.timeout = setTimeout(function() {
                _this3.backspace(curString, curStrPos);
              }, this.backDelay);
            }
          }, {
            key: "backspace",
            value: function backspace(curString, curStrPos) {
              var _this4 = this;
              if (this.pause.status === true) {
                this.setPauseStatus(curString, curStrPos, false);
                return;
              }
              if (this.fadeOut)
                return this.initFadeOut();
              this.toggleBlinking(false);
              var humanize = this.humanizer(this.backSpeed);
              this.timeout = setTimeout(function() {
                curStrPos = _htmlParserJs.htmlParser.backSpaceHtmlChars(curString, curStrPos, _this4);
                var curStringAtPosition = curString.substr(0, curStrPos);
                _this4.replaceText(curStringAtPosition);
                if (_this4.smartBackspace) {
                  var nextString = _this4.strings[_this4.arrayPos + 1];
                  if (nextString && curStringAtPosition === nextString.substr(0, curStrPos)) {
                    _this4.stopNum = curStrPos;
                  } else {
                    _this4.stopNum = 0;
                  }
                }
                if (curStrPos > _this4.stopNum) {
                  curStrPos--;
                  _this4.backspace(curString, curStrPos);
                } else if (curStrPos <= _this4.stopNum) {
                  _this4.arrayPos++;
                  if (_this4.arrayPos === _this4.strings.length) {
                    _this4.arrayPos = 0;
                    _this4.options.onLastStringBackspaced();
                    _this4.shuffleStringsIfNeeded();
                    _this4.begin();
                  } else {
                    _this4.typewrite(_this4.strings[_this4.sequence[_this4.arrayPos]], curStrPos);
                  }
                }
              }, humanize);
            }
          }, {
            key: "complete",
            value: function complete() {
              this.options.onComplete(this);
              if (this.loop) {
                this.curLoop++;
              } else {
                this.typingComplete = true;
              }
            }
          }, {
            key: "setPauseStatus",
            value: function setPauseStatus(curString, curStrPos, isTyping) {
              this.pause.typewrite = isTyping;
              this.pause.curString = curString;
              this.pause.curStrPos = curStrPos;
            }
          }, {
            key: "toggleBlinking",
            value: function toggleBlinking(isBlinking) {
              if (!this.cursor)
                return;
              if (this.pause.status)
                return;
              if (this.cursorBlinking === isBlinking)
                return;
              this.cursorBlinking = isBlinking;
              if (isBlinking) {
                this.cursor.classList.add("typed-cursor--blink");
              } else {
                this.cursor.classList.remove("typed-cursor--blink");
              }
            }
          }, {
            key: "humanizer",
            value: function humanizer(speed) {
              return Math.round(Math.random() * speed / 2) + speed;
            }
          }, {
            key: "shuffleStringsIfNeeded",
            value: function shuffleStringsIfNeeded() {
              if (!this.shuffle)
                return;
              this.sequence = this.sequence.sort(function() {
                return Math.random() - 0.5;
              });
            }
          }, {
            key: "initFadeOut",
            value: function initFadeOut() {
              var _this5 = this;
              this.el.className += " " + this.fadeOutClass;
              if (this.cursor)
                this.cursor.className += " " + this.fadeOutClass;
              return setTimeout(function() {
                _this5.arrayPos++;
                _this5.replaceText("");
                if (_this5.strings.length > _this5.arrayPos) {
                  _this5.typewrite(_this5.strings[_this5.sequence[_this5.arrayPos]], 0);
                } else {
                  _this5.typewrite(_this5.strings[0], 0);
                  _this5.arrayPos = 0;
                }
              }, this.fadeOutDelay);
            }
          }, {
            key: "replaceText",
            value: function replaceText(str) {
              if (this.attr) {
                this.el.setAttribute(this.attr, str);
              } else {
                if (this.isInput) {
                  this.el.value = str;
                } else if (this.contentType === "html") {
                  this.el.innerHTML = str;
                } else {
                  this.el.textContent = str;
                }
              }
            }
          }, {
            key: "bindFocusEvents",
            value: function bindFocusEvents() {
              var _this6 = this;
              if (!this.isInput)
                return;
              this.el.addEventListener("focus", function(e2) {
                _this6.stop();
              });
              this.el.addEventListener("blur", function(e2) {
                if (_this6.el.value && _this6.el.value.length !== 0) {
                  return;
                }
                _this6.start();
              });
            }
          }, {
            key: "insertCursor",
            value: function insertCursor() {
              if (!this.showCursor)
                return;
              if (this.cursor)
                return;
              this.cursor = document.createElement("span");
              this.cursor.className = "typed-cursor";
              this.cursor.setAttribute("aria-hidden", true);
              this.cursor.innerHTML = this.cursorChar;
              this.el.parentNode && this.el.parentNode.insertBefore(this.cursor, this.el.nextSibling);
            }
          }]);
          return Typed3;
        }();
        exports2["default"] = Typed2;
        module2.exports = exports2["default"];
      },
      function(module2, exports2, __webpack_require__) {
        Object.defineProperty(exports2, "__esModule", {
          value: true
        });
        var _extends2 = Object.assign || function(target) {
          for (var i2 = 1; i2 < arguments.length; i2++) {
            var source = arguments[i2];
            for (var key in source) {
              if (Object.prototype.hasOwnProperty.call(source, key)) {
                target[key] = source[key];
              }
            }
          }
          return target;
        };
        var _createClass = function() {
          function defineProperties(target, props) {
            for (var i2 = 0; i2 < props.length; i2++) {
              var descriptor = props[i2];
              descriptor.enumerable = descriptor.enumerable || false;
              descriptor.configurable = true;
              if ("value" in descriptor)
                descriptor.writable = true;
              Object.defineProperty(target, descriptor.key, descriptor);
            }
          }
          return function(Constructor, protoProps, staticProps) {
            if (protoProps)
              defineProperties(Constructor.prototype, protoProps);
            if (staticProps)
              defineProperties(Constructor, staticProps);
            return Constructor;
          };
        }();
        function _interopRequireDefault(obj) {
          return obj && obj.__esModule ? obj : { "default": obj };
        }
        function _classCallCheck(instance, Constructor) {
          if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
          }
        }
        var _defaultsJs = __webpack_require__(2);
        var _defaultsJs2 = _interopRequireDefault(_defaultsJs);
        var Initializer = function() {
          function Initializer2() {
            _classCallCheck(this, Initializer2);
          }
          _createClass(Initializer2, [{
            key: "load",
            value: function load(self2, options2, elementId) {
              if (typeof elementId === "string") {
                self2.el = document.querySelector(elementId);
              } else {
                self2.el = elementId;
              }
              self2.options = _extends2({}, _defaultsJs2["default"], options2);
              self2.isInput = self2.el.tagName.toLowerCase() === "input";
              self2.attr = self2.options.attr;
              self2.bindInputFocusEvents = self2.options.bindInputFocusEvents;
              self2.showCursor = self2.isInput ? false : self2.options.showCursor;
              self2.cursorChar = self2.options.cursorChar;
              self2.cursorBlinking = true;
              self2.elContent = self2.attr ? self2.el.getAttribute(self2.attr) : self2.el.textContent;
              self2.contentType = self2.options.contentType;
              self2.typeSpeed = self2.options.typeSpeed;
              self2.startDelay = self2.options.startDelay;
              self2.backSpeed = self2.options.backSpeed;
              self2.smartBackspace = self2.options.smartBackspace;
              self2.backDelay = self2.options.backDelay;
              self2.fadeOut = self2.options.fadeOut;
              self2.fadeOutClass = self2.options.fadeOutClass;
              self2.fadeOutDelay = self2.options.fadeOutDelay;
              self2.isPaused = false;
              self2.strings = self2.options.strings.map(function(s2) {
                return s2.trim();
              });
              if (typeof self2.options.stringsElement === "string") {
                self2.stringsElement = document.querySelector(self2.options.stringsElement);
              } else {
                self2.stringsElement = self2.options.stringsElement;
              }
              if (self2.stringsElement) {
                self2.strings = [];
                self2.stringsElement.style.display = "none";
                var strings = Array.prototype.slice.apply(self2.stringsElement.children);
                var stringsLength = strings.length;
                if (stringsLength) {
                  for (var i2 = 0; i2 < stringsLength; i2 += 1) {
                    var stringEl = strings[i2];
                    self2.strings.push(stringEl.innerHTML.trim());
                  }
                }
              }
              self2.strPos = 0;
              self2.arrayPos = 0;
              self2.stopNum = 0;
              self2.loop = self2.options.loop;
              self2.loopCount = self2.options.loopCount;
              self2.curLoop = 0;
              self2.shuffle = self2.options.shuffle;
              self2.sequence = [];
              self2.pause = {
                status: false,
                typewrite: true,
                curString: "",
                curStrPos: 0
              };
              self2.typingComplete = false;
              for (var i2 in self2.strings) {
                self2.sequence[i2] = i2;
              }
              self2.currentElContent = this.getCurrentElContent(self2);
              self2.autoInsertCss = self2.options.autoInsertCss;
              this.appendAnimationCss(self2);
            }
          }, {
            key: "getCurrentElContent",
            value: function getCurrentElContent(self2) {
              var elContent = "";
              if (self2.attr) {
                elContent = self2.el.getAttribute(self2.attr);
              } else if (self2.isInput) {
                elContent = self2.el.value;
              } else if (self2.contentType === "html") {
                elContent = self2.el.innerHTML;
              } else {
                elContent = self2.el.textContent;
              }
              return elContent;
            }
          }, {
            key: "appendAnimationCss",
            value: function appendAnimationCss(self2) {
              var cssDataName = "data-typed-js-css";
              if (!self2.autoInsertCss) {
                return;
              }
              if (!self2.showCursor && !self2.fadeOut) {
                return;
              }
              if (document.querySelector("[" + cssDataName + "]")) {
                return;
              }
              var css2 = document.createElement("style");
              css2.type = "text/css";
              css2.setAttribute(cssDataName, true);
              var innerCss = "";
              if (self2.showCursor) {
                innerCss += "\n        .typed-cursor{\n          opacity: 1;\n        }\n        .typed-cursor.typed-cursor--blink{\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      ";
              }
              if (self2.fadeOut) {
                innerCss += "\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n        }\n        .typed-cursor.typed-cursor--blink.typed-fade-out{\n          -webkit-animation: 0;\n          animation: 0;\n        }\n      ";
              }
              if (css2.length === 0) {
                return;
              }
              css2.innerHTML = innerCss;
              document.body.appendChild(css2);
            }
          }]);
          return Initializer2;
        }();
        exports2["default"] = Initializer;
        var initializer = new Initializer();
        exports2.initializer = initializer;
      },
      function(module2, exports2) {
        Object.defineProperty(exports2, "__esModule", {
          value: true
        });
        var defaults = {
          strings: ["These are the default values...", "You know what you should do?", "Use your own!", "Have a great day!"],
          stringsElement: null,
          typeSpeed: 0,
          startDelay: 0,
          backSpeed: 0,
          smartBackspace: true,
          shuffle: false,
          backDelay: 700,
          fadeOut: false,
          fadeOutClass: "typed-fade-out",
          fadeOutDelay: 500,
          loop: false,
          loopCount: Infinity,
          showCursor: true,
          cursorChar: "|",
          autoInsertCss: true,
          attr: null,
          bindInputFocusEvents: false,
          contentType: "html",
          onBegin: function onBegin(self2) {
          },
          onComplete: function onComplete(self2) {
          },
          preStringTyped: function preStringTyped(arrayPos, self2) {
          },
          onStringTyped: function onStringTyped(arrayPos, self2) {
          },
          onLastStringBackspaced: function onLastStringBackspaced(self2) {
          },
          onTypingPaused: function onTypingPaused(arrayPos, self2) {
          },
          onTypingResumed: function onTypingResumed(arrayPos, self2) {
          },
          onReset: function onReset(self2) {
          },
          onStop: function onStop(arrayPos, self2) {
          },
          onStart: function onStart(arrayPos, self2) {
          },
          onDestroy: function onDestroy(self2) {
          }
        };
        exports2["default"] = defaults;
        module2.exports = exports2["default"];
      },
      function(module2, exports2) {
        Object.defineProperty(exports2, "__esModule", {
          value: true
        });
        var _createClass = function() {
          function defineProperties(target, props) {
            for (var i2 = 0; i2 < props.length; i2++) {
              var descriptor = props[i2];
              descriptor.enumerable = descriptor.enumerable || false;
              descriptor.configurable = true;
              if ("value" in descriptor)
                descriptor.writable = true;
              Object.defineProperty(target, descriptor.key, descriptor);
            }
          }
          return function(Constructor, protoProps, staticProps) {
            if (protoProps)
              defineProperties(Constructor.prototype, protoProps);
            if (staticProps)
              defineProperties(Constructor, staticProps);
            return Constructor;
          };
        }();
        function _classCallCheck(instance, Constructor) {
          if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
          }
        }
        var HTMLParser = function() {
          function HTMLParser2() {
            _classCallCheck(this, HTMLParser2);
          }
          _createClass(HTMLParser2, [{
            key: "typeHtmlChars",
            value: function typeHtmlChars(curString, curStrPos, self2) {
              if (self2.contentType !== "html")
                return curStrPos;
              var curChar = curString.substr(curStrPos).charAt(0);
              if (curChar === "<" || curChar === "&") {
                var endTag = "";
                if (curChar === "<") {
                  endTag = ">";
                } else {
                  endTag = ";";
                }
                while (curString.substr(curStrPos + 1).charAt(0) !== endTag) {
                  curStrPos++;
                  if (curStrPos + 1 > curString.length) {
                    break;
                  }
                }
                curStrPos++;
              }
              return curStrPos;
            }
          }, {
            key: "backSpaceHtmlChars",
            value: function backSpaceHtmlChars(curString, curStrPos, self2) {
              if (self2.contentType !== "html")
                return curStrPos;
              var curChar = curString.substr(curStrPos).charAt(0);
              if (curChar === ">" || curChar === ";") {
                var endTag = "";
                if (curChar === ">") {
                  endTag = "<";
                } else {
                  endTag = "&";
                }
                while (curString.substr(curStrPos - 1).charAt(0) !== endTag) {
                  curStrPos--;
                  if (curStrPos < 0) {
                    break;
                  }
                }
                curStrPos--;
              }
              return curStrPos;
            }
          }]);
          return HTMLParser2;
        }();
        exports2["default"] = HTMLParser;
        var htmlParser = new HTMLParser();
        exports2.htmlParser = htmlParser;
      }
    ]);
  });
})(typed);
var Typed = /* @__PURE__ */ getDefaultExportFromCjs(typed.exports);
const useCategory = () => {
  const category = [];
  const { posts } = usePostData();
  const caclCategory = (data, item) => {
    const categoryItem = category.find((o2) => o2.name == data);
    categoryItem ? categoryItem.path.push(item) : category.push({ name: data, path: [item] });
  };
  posts.forEach((item) => {
    const categories = item.frontmatter.categories;
    if (typeof categories == "string") {
      caclCategory(categories, item);
    }
    if (Array.isArray(categories)) {
      categories.forEach((obj) => caclCategory(obj, item));
    }
  });
  return { category };
};
const useTags = () => {
  const tags = [];
  const { posts } = usePostData();
  const caclTags = (data, item) => {
    const tagItem = tags.find((o2) => o2.name == data);
    tagItem ? tagItem.path.push(item) : tags.push({ name: data, path: [item] });
  };
  posts.forEach((item) => {
    const tags2 = item.frontmatter.tags;
    if (typeof tags2 == "string") {
      caclTags(tags2, item);
    }
    if (Array.isArray(tags2)) {
      tags2.forEach((obj) => caclTags(obj, item));
    }
  });
  return { tags };
};
const useRandomColor = () => {
  const tagColorArr = [
    "#e15b64",
    "#f47e60",
    "#f8b26a",
    "#abbd81",
    "#849b87",
    "#e15b64",
    "#f47e60",
    "#f8b26a",
    "#f26d6d",
    "#67cc86",
    "#fb9b5f",
    "#3498db"
  ];
  const index2 = Math.floor(Math.random() * tagColorArr.length);
  return tagColorArr[index2];
};
const _hoisted_1$1 = { class: "pt-[100px] w-[var(--content-width)] my-0 mx-auto" };
const _hoisted_2$1 = { class: "w-full flex my-[10px]" };
const _sfc_main$1 = /* @__PURE__ */ defineComponent({
  __name: "Category",
  setup(__props) {
    const { category } = useCategory();
    const active = ref(category[0]);
    const pages = reactive({
      pageTotal: active.value.path.length,
      pageNumber: 1,
      pageSize: 10
    });
    const blogData = computed(() => active.value.path.slice((pages.pageNumber - 1) * pages.pageSize, pages.pageNumber * pages.pageSize));
    const getBack = (value) => {
      const { page, pageSize } = value;
      pages.pageNumber = page;
      pages.pageSize = pageSize;
    };
    const changeCategory = (item) => {
      active.value = item;
      pages.pageNumber = 1;
      pages.pageSize = 10;
      pages.pageTotal = item.path.length;
    };
    const styleBg = (item) => active.value.name == item.name ? { "background-color": "#3eaf7c" } : "";
    return (_ctx, _cache) => {
      const _component_Icon = resolveComponent("Icon");
      const _component_Item = resolveComponent("Item");
      const _component_Pagination = resolveComponent("Pagination");
      return openBlock(), createElementBlock(Fragment, null, [
        createVNode(Navbar),
        createBaseVNode("div", _hoisted_1$1, [
          createVNode(_component_Icon, {
            icon: "AppstoreTwotone",
            iconSize: 25,
            text: "\u5206\u7C7B\u5217\u8868",
            textSize: 20,
            class: "dark:hover:text-[#fff]"
          }),
          createBaseVNode("div", _hoisted_2$1, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(category), (item, index2) => {
              return openBlock(), createBlock(_component_Item, {
                key: index2,
                categoryItem: item,
                color: unref(useRandomColor)(),
                style: normalizeStyle(styleBg(item)),
                onClick: ($event) => changeCategory(item)
              }, null, 8, ["categoryItem", "color", "style", "onClick"]);
            }), 128))
          ]),
          (openBlock(true), createElementBlock(Fragment, null, renderList(unref(blogData), (obj, index2) => {
            return openBlock(), createBlock(BlogItem, {
              page: obj.data,
              position: index2 % 2 == 0 ? "left" : "right",
              key: obj
            }, null, 8, ["page", "position"]);
          }), 128)),
          createVNode(_component_Pagination, {
            pageTotal: pages.pageTotal,
            pageNumber: pages.pageNumber,
            pageSize: pages.pageSize,
            onClick: getBack
          }, null, 8, ["pageTotal", "pageNumber", "pageSize"])
        ])
      ], 64);
    };
  }
});
var Category = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["__file", "Category.vue"]]);
const _hoisted_1 = { class: "pt-[100px] w-[var(--content-width)] my-0 mx-auto" };
const _hoisted_2 = { class: "w-full flex my-[10px]" };
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "Tags",
  setup(__props) {
    const { tags } = useTags();
    const active = ref(tags[0]);
    const pages = reactive({
      pageTotal: active.value.path.length,
      pageNumber: 1,
      pageSize: 10
    });
    const blogData = computed(() => active.value.path.slice((pages.pageNumber - 1) * pages.pageSize, pages.pageNumber * pages.pageSize));
    const getBack = (value) => {
      const { page, pageSize } = value;
      pages.pageNumber = page;
      pages.pageSize = pageSize;
    };
    const changeTag = (item) => {
      active.value = item;
      pages.pageNumber = 1;
      pages.pageSize = 10;
      pages.pageTotal = item.path.length;
    };
    const styleBg = (item) => active.value.name == item.name ? { "background-color": "#3eaf7c" } : "";
    return (_ctx, _cache) => {
      const _component_Icon = resolveComponent("Icon");
      const _component_Item = resolveComponent("Item");
      const _component_Pagination = resolveComponent("Pagination");
      return openBlock(), createElementBlock(Fragment, null, [
        createVNode(Navbar),
        createBaseVNode("div", _hoisted_1, [
          createVNode(_component_Icon, {
            icon: "TagsOutlined",
            iconSize: 25,
            text: "\u6807\u7B7E\u5217\u8868",
            class: "dark:hover:text-[#fff]",
            textSize: 20
          }),
          createBaseVNode("div", _hoisted_2, [
            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(tags), (item, index2) => {
              return openBlock(), createBlock(_component_Item, {
                key: index2,
                categoryItem: item,
                color: unref(useRandomColor)(),
                style: normalizeStyle(styleBg(item)),
                onClick: ($event) => changeTag(item)
              }, null, 8, ["categoryItem", "color", "style", "onClick"]);
            }), 128))
          ]),
          (openBlock(true), createElementBlock(Fragment, null, renderList(unref(blogData), (obj, index2) => {
            return openBlock(), createBlock(BlogItem, {
              page: obj.data,
              position: index2 % 2 == 0 ? "left" : "right",
              key: obj
            }, null, 8, ["page", "position"]);
          }), 128)),
          createVNode(_component_Pagination, {
            pageTotal: pages.pageTotal,
            pageNumber: pages.pageNumber,
            pageSize: pages.pageSize,
            onClick: getBack
          }, null, 8, ["pageTotal", "pageNumber", "pageSize"])
        ])
      ], 64);
    };
  }
});
var Tags = /* @__PURE__ */ _export_sfc(_sfc_main, [["__file", "Tags.vue"]]);
var clientConfig20 = defineClientConfig({
  enhance({ app, router, siteData: siteData2 }) {
    router.addRoute({ name: "category", path: "/category", component: Category });
    router.addRoute({ name: "tags", path: "/tags", component: Tags });
  },
  setup() {
  },
  rootComponents: []
});
const clientConfigs = [
  clientConfig0,
  clientConfig1,
  clientConfig2,
  clientConfig3,
  clientConfig4,
  clientConfig5,
  clientConfig6,
  clientConfig7,
  clientConfig8,
  clientConfig9,
  clientConfig10,
  clientConfig11,
  i,
  r,
  clientConfig14,
  clientConfig15,
  clientConfig16,
  clientConfig17,
  clientConfig18,
  clientConfig19,
  clientConfig20
];
const pagesRoutes = [
  ["v-8daa1a0e", "/", { "title": "" }, ["/index.html", "/README.md"]],
  ["v-d5fe0c96", "/design-pattern/", { "title": "Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F" }, ["/design-pattern/index.html", "/design-pattern/README.md"]],
  ["v-3706649a", "/404.html", { "title": "" }, ["/404"]]
];
var createRoutes = () => pagesRoutes.reduce((result, [name, path, meta, redirects]) => {
  result.push({
    name,
    path,
    component: Vuepress,
    meta
  }, ...redirects.map((item) => ({
    path: item,
    redirect: path
  })));
  return result;
}, [
  {
    name: "404",
    path: "/:catchAll(.*)",
    component: Vuepress
  }
]);
var historyCreator = createWebHistory;
var createVueRouter = () => {
  const router = createRouter({
    history: historyCreator(removeEndingSlash(siteData.value.base)),
    routes: createRoutes(),
    scrollBehavior: (to2, from, savedPosition) => {
      if (savedPosition)
        return savedPosition;
      if (to2.hash)
        return { el: to2.hash };
      return { top: 0 };
    }
  });
  router.beforeResolve(async (to2, from) => {
    var _a2;
    if (to2.path !== from.path || from === START_LOCATION_NORMALIZED) {
      [pageData.value] = await Promise.all([
        resolvers.resolvePageData(to2.name),
        (_a2 = pagesComponents[to2.name]) == null ? void 0 : _a2.__asyncLoader()
      ]);
    }
  });
  return router;
};
var COMPONENT_STATE_TYPE = "VuePress";
var setupDevtools = (app, globalComputed) => {
  setupDevtoolsPlugin({
    app,
    id: "org.vuejs.vuepress",
    label: "VuePress",
    packageName: "@vuepress/client",
    homepage: "https://v2.vuepress.vuejs.org",
    logo: "https://v2.vuepress.vuejs.org/images/hero.png",
    componentStateTypes: [COMPONENT_STATE_TYPE]
  }, (api) => {
    api.on.inspectComponent((payload) => {
      payload.instanceData.state.push(...Object.entries(globalComputed).map(([name, item]) => ({
        type: COMPONENT_STATE_TYPE,
        key: name,
        editable: false,
        value: item.value
      })));
    });
  });
};
var setupGlobalComponents = (app) => {
  app.component("ClientOnly", ClientOnly);
  app.component("Content", Content);
};
var setupGlobalComputed = (app, router) => {
  const routeLocale = computed(() => resolvers.resolveRouteLocale(siteData.value.locales, router.currentRoute.value.path));
  const siteLocaleData = computed(() => resolvers.resolveSiteLocaleData(siteData.value, routeLocale.value));
  const pageFrontmatter = computed(() => resolvers.resolvePageFrontmatter(pageData.value));
  const pageHeadTitle = computed(() => resolvers.resolvePageHeadTitle(pageData.value, siteLocaleData.value));
  const pageHead = computed(() => resolvers.resolvePageHead(pageHeadTitle.value, pageFrontmatter.value, siteLocaleData.value));
  const pageLang = computed(() => resolvers.resolvePageLang(pageData.value));
  app.provide(routeLocaleSymbol, routeLocale);
  app.provide(siteLocaleDataSymbol, siteLocaleData);
  app.provide(pageFrontmatterSymbol, pageFrontmatter);
  app.provide(pageHeadTitleSymbol, pageHeadTitle);
  app.provide(pageHeadSymbol, pageHead);
  app.provide(pageLangSymbol, pageLang);
  Object.defineProperties(app.config.globalProperties, {
    $frontmatter: { get: () => pageFrontmatter.value },
    $head: { get: () => pageHead.value },
    $headTitle: { get: () => pageHeadTitle.value },
    $lang: { get: () => pageLang.value },
    $page: { get: () => pageData.value },
    $routeLocale: { get: () => routeLocale.value },
    $site: { get: () => siteData.value },
    $siteLocale: { get: () => siteLocaleData.value },
    $withBase: { get: () => withBase }
  });
  return {
    pageData,
    pageFrontmatter,
    pageHead,
    pageHeadTitle,
    pageLang,
    routeLocale,
    siteData,
    siteLocaleData
  };
};
var setupUpdateHead = () => {
  const route = useRoute();
  const head = usePageHead();
  const lang = usePageLang();
  const headTags = ref([]);
  const loadHead = () => {
    head.value.forEach((item) => {
      const tag = queryHeadTag(item);
      if (tag) {
        headTags.value.push(tag);
      }
    });
  };
  const updateHead = () => {
    document.documentElement.lang = lang.value;
    headTags.value.forEach((item) => {
      if (item.parentNode === document.head) {
        document.head.removeChild(item);
      }
    });
    headTags.value.splice(0, headTags.value.length);
    head.value.forEach((item) => {
      const tag = createHeadTag(item);
      if (tag !== null) {
        document.head.appendChild(tag);
        headTags.value.push(tag);
      }
    });
  };
  provide(updateHeadSymbol, updateHead);
  onMounted(() => {
    loadHead();
    updateHead();
    watch(() => route.path, () => updateHead());
  });
};
var queryHeadTag = ([
  tagName,
  attrs,
  content = ""
]) => {
  const attrsSelector = Object.entries(attrs).map(([key, value]) => {
    if (isString$2(value)) {
      return `[${key}="${value}"]`;
    }
    if (value === true) {
      return `[${key}]`;
    }
    return "";
  }).join("");
  const selector2 = `head > ${tagName}${attrsSelector}`;
  const tags = Array.from(document.querySelectorAll(selector2));
  const matchedTag = tags.find((item) => item.innerText === content);
  return matchedTag || null;
};
var createHeadTag = ([
  tagName,
  attrs,
  content
]) => {
  if (!isString$2(tagName)) {
    return null;
  }
  const tag = document.createElement(tagName);
  if (isPlainObject(attrs)) {
    Object.entries(attrs).forEach(([key, value]) => {
      if (isString$2(value)) {
        tag.setAttribute(key, value);
      } else if (value === true) {
        tag.setAttribute(key, "");
      }
    });
  }
  if (isString$2(content)) {
    tag.appendChild(document.createTextNode(content));
  }
  return tag;
};
var appCreator = createSSRApp;
var createVueApp = async () => {
  var _a2;
  const app = appCreator({
    name: "VuepressApp",
    setup() {
      var _a3;
      setupUpdateHead();
      for (const clientConfig of clientConfigs) {
        (_a3 = clientConfig.setup) == null ? void 0 : _a3.call(clientConfig);
      }
      return () => [
        h$1(RouterView),
        ...clientConfigs.flatMap(({ rootComponents = [] }) => rootComponents.map((component) => h$1(component)))
      ];
    }
  });
  const router = createVueRouter();
  setupGlobalComponents(app);
  const globalComputed = setupGlobalComputed(app, router);
  {
    setupDevtools(app, globalComputed);
  }
  for (const clientConfig of clientConfigs) {
    await ((_a2 = clientConfig.enhance) == null ? void 0 : _a2.call(clientConfig, { app, router, siteData }));
  }
  app.use(router);
  return {
    app,
    router
  };
};
{
  createVueApp().then(({ app, router }) => {
    router.isReady().then(() => {
      app.mount("#app");
    });
  });
}
export { vShow as $, createCommentVNode as A, renderList as B, normalizeStyle as C, useRandomColor as D, createBlock as E, Fragment as F, useThemeData as G, reactive as H, computed as I, normalizeClass as J, BlogItem as K, AutoLink as L, usePageData as M, useSidebarItems as N, useRoute as O, isString$2 as P, useNavLink as Q, isPlainObject as R, renderSlot as S, Typed as T, toRefs as U, useRouter as V, useToggle as W, onBeforeUnmount as X, withKeys as Y, withDirectives as Z, _export_sfc as _, createStaticVNode as a, DropdownTransition as a0, watch as a1, NavbarItems as a2, ref as a3, Navbar as a4, Transition as a5, useScrollPromise as a6, BlogItemInfo as a7, resolveDynamicComponent as a8, isRef as a9, vModelText as aa, vModelSelect as ab, useThemeLocaleData as b, createElementBlock as c, createVueApp, defineComponent as d, createBaseVNode as e, createVNode as f, createTextVNode as g, unref as h, isLinkHttp as i, removeLeadingSlash as j, removeEndingSlash as k, resolveRepoType as l, usePageFrontmatter as m, onMounted as n, openBlock as o, nextTick as p, onUnmounted as q, resolveComponent as r, withBase as s, toDisplayString as t, useRouteLocale as u, __vitePreload as v, withCtx as w, usePostData as x, useCategory as y, useTags as z };
