const n=[["v-8daa1a0e","/",{title:""},["/index.html","/README.md"]],["v-db9b3b8e","/posts/design-pattern/",{_blog:{data:{key:"v-db9b3b8e",path:"/posts/design-pattern/",title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",lang:"zh-CN",frontmatter:{title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",description:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava",date:"2022-08-19T21:55:00.000Z",sidebar:"auto",tag:["\u8BBE\u8BA1\u6A21\u5F0F"],category:["java"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208242030437.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/design-pattern/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{property:"og:description",content:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{property:"article:published_time",content:"2022-08-19T21:55:00.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
`,headers:[{level:1,title:"1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0",slug:"_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0",children:[{level:2,title:"1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F",slug:"_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F",children:[]},{level:2,title:"1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5",slug:"_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5",children:[]},{level:2,title:"1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027",slug:"_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027",children:[]},{level:2,title:"1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B",slug:"_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B",children:[]}]},{level:1,title:"2\uFF0CUML \u56FE",slug:"_2-uml-\u56FE",children:[{level:2,title:"2.1 \u7C7B\u56FE\u6982\u8FF0",slug:"_2-1-\u7C7B\u56FE\u6982\u8FF0",children:[]},{level:2,title:"2.2 \u7C7B\u56FE\u7684\u4F5C\u7528",slug:"_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528",children:[]},{level:2,title:"2.3 \u7C7B\u56FE\u8868\u793A\u6CD5",slug:"_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5",children:[{level:3,title:"2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F",slug:"_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F",children:[]},{level:3,title:"2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F",slug:"_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F",children:[{level:4,title:"2.3.2.1 \u5173\u8054\u5173\u7CFB",slug:"_2-3-2-1-\u5173\u8054\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.2 \u805A\u5408\u5173\u7CFB",slug:"_2-3-2-2-\u805A\u5408\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.3 \u7EC4\u5408\u5173\u7CFB",slug:"_2-3-2-3-\u7EC4\u5408\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.4 \u4F9D\u8D56\u5173\u7CFB",slug:"_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.5 \u7EE7\u627F\u5173\u7CFB",slug:"_2-3-2-5-\u7EE7\u627F\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.6 \u5B9E\u73B0\u5173\u7CFB",slug:"_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB",children:[]}]}]}]},{level:1,title:"3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219",slug:"_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219",children:[{level:2,title:"3.1 \u5F00\u95ED\u539F\u5219",slug:"_3-1-\u5F00\u95ED\u539F\u5219",children:[]},{level:2,title:"3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219",slug:"_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219",children:[]},{level:2,title:"3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219",slug:"_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219",children:[]},{level:2,title:"3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219",slug:"_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219",children:[]},{level:2,title:"3.5 \u8FEA\u7C73\u7279\u6CD5\u5219",slug:"_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219",children:[]},{level:2,title:"3.6 \u5408\u6210\u590D\u7528\u539F\u5219",slug:"_3-6-\u5408\u6210\u590D\u7528\u539F\u5219",children:[]}]},{level:1,title:"4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F",slug:"_4-\u521B\u5EFA\u8005\u6A21\u5F0F",children:[{level:2,title:"4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F",slug:"_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F",children:[{level:3,title:"4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784",slug:"_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784",children:[]},{level:3,title:"4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0",slug:"_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0",children:[]},{level:3,title:"4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898",slug:"_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898",children:[{level:4,title:"4.1.3.1 \u95EE\u9898\u6F14\u793A",slug:"_4-1-3-1-\u95EE\u9898\u6F14\u793A",children:[]},{level:4,title:"4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3",slug:"_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3",children:[]}]},{level:3,title:"4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B",slug:"_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B",children:[]}]},{level:2,title:"4.2 \u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-\u5DE5\u5382\u6A21\u5F0F",children:[{level:3,title:"4.2.1 \u6982\u8FF0",slug:"_4-2-1-\u6982\u8FF0",children:[]},{level:3,title:"4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F",children:[{level:4,title:"4.2.2.1 \u7ED3\u6784",slug:"_4-2-2-1-\u7ED3\u6784",children:[]},{level:4,title:"4.2.2.2 \u5B9E\u73B0",slug:"_4-2-2-2-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.2.4 \u4F18\u7F3A\u70B9",slug:"_4-2-2-4-\u4F18\u7F3A\u70B9",children:[]},{level:4,title:"4.2.2.3 \u6269\u5C55",slug:"_4-2-2-3-\u6269\u5C55",children:[]}]},{level:3,title:"4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F",slug:"_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F",children:[{level:4,title:"4.2.3.1 \u6982\u5FF5",slug:"_4-2-3-1-\u6982\u5FF5",children:[]},{level:4,title:"4.2.3.2 \u7ED3\u6784",slug:"_4-2-3-2-\u7ED3\u6784",children:[]},{level:4,title:"4.2.3.3 \u5B9E\u73B0",slug:"_4-2-3-3-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.3.4 \u4F18\u7F3A\u70B9",slug:"_4-2-3-4-\u4F18\u7F3A\u70B9",children:[]}]},{level:3,title:"4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F",children:[{level:4,title:"4.2.4.1 \u6982\u5FF5",slug:"_4-2-4-1-\u6982\u5FF5",children:[]},{level:4,title:"4.2.4.2 \u7ED3\u6784",slug:"_4-2-4-2-\u7ED3\u6784",children:[]},{level:4,title:"4.2.4.2 \u5B9E\u73B0",slug:"_4-2-4-2-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.4.3 \u4F18\u7F3A\u70B9",slug:"_4-2-4-3-\u4F18\u7F3A\u70B9",children:[]},{level:4,title:"4.2.4.4 \u4F7F\u7528\u573A\u666F",slug:"_4-2-4-4-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:3,title:"4.2.5 \u6A21\u5F0F\u6269\u5C55",slug:"_4-2-5-\u6A21\u5F0F\u6269\u5C55",children:[]},{level:3,title:"4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5",slug:"_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5",children:[]}]},{level:2,title:"4.3 \u539F\u578B\u6A21\u5F0F",slug:"_4-3-\u539F\u578B\u6A21\u5F0F",children:[{level:3,title:"4.3.1 \u6982\u8FF0",slug:"_4-3-1-\u6982\u8FF0",children:[]},{level:3,title:"4.3.2 \u7ED3\u6784",slug:"_4-3-2-\u7ED3\u6784",children:[]},{level:3,title:"4.3.3 \u5B9E\u73B0",slug:"_4-3-3-\u5B9E\u73B0",children:[]},{level:3,title:"4.3.4 \u6848\u4F8B",slug:"_4-3-4-\u6848\u4F8B",children:[]},{level:3,title:"4.3.5 \u4F7F\u7528\u573A\u666F",slug:"_4-3-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09",slug:"_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686",children:[]}]},{level:2,title:"4.5 \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[{level:3,title:"4.4.1 \u6982\u8FF0",slug:"_4-4-1-\u6982\u8FF0",children:[]},{level:3,title:"4.4.2 \u7ED3\u6784",slug:"_4-4-2-\u7ED3\u6784",children:[]},{level:3,title:"4.4.3 \u5B9E\u4F8B",slug:"_4-4-3-\u5B9E\u4F8B",children:[]},{level:3,title:"4.4.4 \u4F18\u7F3A\u70B9",slug:"_4-4-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"4.4.5 \u4F7F\u7528\u573A\u666F",slug:"_4-4-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"4.4.6 \u6A21\u5F0F\u6269\u5C55",slug:"_4-4-6-\u6A21\u5F0F\u6269\u5C55",children:[]}]},{level:2,title:"4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4",slug:"_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4",children:[{level:3,title:"4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[]},{level:3,title:"4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[]}]}]},{level:1,title:"5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F",slug:"_5-\u7ED3\u6784\u578B\u6A21\u5F0F",children:[{level:2,title:"5.1 \u4EE3\u7406\u6A21\u5F0F",slug:"_5-1-\u4EE3\u7406\u6A21\u5F0F",children:[{level:3,title:"5.1.1 \u6982\u8FF0",slug:"_5-1-1-\u6982\u8FF0",children:[]},{level:3,title:"5.1.2 \u7ED3\u6784",slug:"_5-1-2-\u7ED3\u6784",children:[]},{level:3,title:"5.1.3 \u9759\u6001\u4EE3\u7406",slug:"_5-1-3-\u9759\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.4 JDK \u52A8\u6001\u4EE3\u7406",slug:"_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406",slug:"_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4",slug:"_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4",children:[]},{level:3,title:"5.1.7 \u4F18\u7F3A\u70B9",slug:"_5-1-7-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"5.1.8 \u4F7F\u7528\u573A\u666F",slug:"_5-1-8-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.2 \u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-\u9002\u914D\u5668\u6A21\u5F0F",children:[{level:3,title:"5.2.1 \u6982\u8FF0",slug:"_5-2-1-\u6982\u8FF0",children:[]},{level:3,title:"5.2.2 \u7ED3\u6784",slug:"_5-2-2-\u7ED3\u6784",children:[]},{level:3,title:"5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F",children:[]},{level:3,title:"5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F",children:[]},{level:3,title:"5.2.5 \u5E94\u7528\u573A\u666F",slug:"_5-2-5-\u5E94\u7528\u573A\u666F",children:[]},{level:3,title:"5.2.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-2-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"5.3 \u88C5\u9970\u8005\u6A21\u5F0F",slug:"_5-3-\u88C5\u9970\u8005\u6A21\u5F0F",children:[{level:3,title:"5.3.1 \u6982\u8FF0",slug:"_5-3-1-\u6982\u8FF0",children:[]},{level:3,title:"5.3.2 \u7ED3\u6784",slug:"_5-3-2-\u7ED3\u6784",children:[]},{level:3,title:"5.3.3 \u6848\u4F8B",slug:"_5-3-3-\u6848\u4F8B",children:[]},{level:3,title:"5.3.4 \u4F7F\u7528\u573A\u666F",slug:"_5-3-4-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.3.5 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-3-5-jdk-\u6E90\u7801\u89E3\u6790",children:[]},{level:3,title:"5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B",slug:"_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B",children:[]}]},{level:2,title:"5.4 \u6865\u63A5\u6A21\u5F0F",slug:"_5-4-\u6865\u63A5\u6A21\u5F0F",children:[{level:3,title:"5.4.1 \u6982\u8FF0",slug:"_5-4-1-\u6982\u8FF0",children:[]},{level:3,title:"5.4.2 \u7ED3\u6784",slug:"_5-4-2-\u7ED3\u6784",children:[]},{level:3,title:"5.4.3 \u6848\u4F8B",slug:"_5-4-3-\u6848\u4F8B",children:[]},{level:3,title:"5.4.4 \u4F7F\u7528\u573A\u666F",slug:"_5-4-4-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.5 \u5916\u89C2\u6A21\u5F0F",slug:"_5-5-\u5916\u89C2\u6A21\u5F0F",children:[{level:3,title:"5.5.1 \u6982\u8FF0",slug:"_5-5-1-\u6982\u8FF0",children:[]},{level:3,title:"5.5.2 \u7ED3\u6784",slug:"_5-5-2-\u7ED3\u6784",children:[]},{level:3,title:"5.5.3 \u6848\u4F8B",slug:"_5-5-3-\u6848\u4F8B",children:[]},{level:3,title:"5.5.4 \u4F7F\u7528\u573A\u666F",slug:"_5-5-4-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.5.5 \u6E90\u7801\u89E3\u6790",slug:"_5-5-5-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"5.6 \u7EC4\u5408\u6A21\u5F0F",slug:"_5-6-\u7EC4\u5408\u6A21\u5F0F",children:[{level:3,title:"5.6.1 \u6982\u8FF0",slug:"_5-6-1-\u6982\u8FF0",children:[]},{level:3,title:"5.6.2 \u7ED3\u6784",slug:"_5-6-2-\u7ED3\u6784",children:[]},{level:3,title:"5.6.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_5-6-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B",slug:"_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B",children:[]},{level:3,title:"5.6.5 \u4F18\u70B9",slug:"_5-6-5-\u4F18\u70B9",children:[]},{level:3,title:"5.6.6 \u4F7F\u7528\u573A\u666F",slug:"_5-6-6-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.7 \u4EAB\u5143\u6A21\u5F0F",slug:"_5-7-\u4EAB\u5143\u6A21\u5F0F",children:[{level:3,title:"5.7.1 \u6982\u8FF0",slug:"_5-7-1-\u6982\u8FF0",children:[]},{level:3,title:"5.7.2 \u7ED3\u6784",slug:"_5-7-2-\u7ED3\u6784",children:[]},{level:3,title:"5.7.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_5-7-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F",slug:"_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.7.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-7-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]}]},{level:1,title:"6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F",slug:"_6-\u884C\u4E3A\u578B\u6A21\u5F0F",children:[{level:2,title:"6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F",slug:"_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F",children:[{level:3,title:"6.1.1 \u6982\u8FF0",slug:"_6-1-1-\u6982\u8FF0",children:[]},{level:3,title:"6.1.2 \u7ED3\u6784",slug:"_6-1-2-\u7ED3\u6784",children:[]},{level:3,title:"6.1.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-1-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.1.3 \u4F18\u7F3A\u70B9",slug:"_6-1-3-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.1.4 \u9002\u7528\u573A\u666F",slug:"_6-1-4-\u9002\u7528\u573A\u666F",children:[]},{level:3,title:"6.1.5 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-1-5-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.2 \u7B56\u7565\u6A21\u5F0F",slug:"_6-2-\u7B56\u7565\u6A21\u5F0F",children:[{level:3,title:"6.2.1 \u6982\u8FF0",slug:"_6-2-1-\u6982\u8FF0",children:[]},{level:3,title:"6.2.2 \u7ED3\u6784",slug:"_6-2-2-\u7ED3\u6784",children:[]},{level:3,title:"6.2.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-2-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.2.4 \u4F18\u7F3A\u70B9",slug:"_6-2-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.2.5 \u4F7F\u7528\u573A\u666F",slug:"_6-2-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.2.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-2-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.3 \u547D\u4EE4\u6A21\u5F0F",slug:"_6-3-\u547D\u4EE4\u6A21\u5F0F",children:[{level:3,title:"6.3.1 \u6982\u8FF0",slug:"_6-3-1-\u6982\u8FF0",children:[]},{level:3,title:"6.3.2 \u7ED3\u6784",slug:"_6-3-2-\u7ED3\u6784",children:[]},{level:3,title:"6.3.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-3-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.3.4 \u4F18\u7F3A\u70B9",slug:"_6-3-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.3.5 \u4F7F\u7528\u573A\u666F",slug:"_6-3-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.3.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-3-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F",slug:"_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F",children:[{level:3,title:"6.4.1 \u6982\u8FF0",slug:"_6-4-1-\u6982\u8FF0",children:[]},{level:3,title:"6.4.2 \u7ED3\u6784",slug:"_6-4-2-\u7ED3\u6784",children:[]},{level:3,title:"6.4.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-4-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.4.4 \u4F18\u7F3A\u70B9",slug:"_6-4-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.4.5 \u6E90\u7801\u89E3\u6790",slug:"_6-4-5-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.5 \u72B6\u6001\u6A21\u5F0F",slug:"_6-5-\u72B6\u6001\u6A21\u5F0F",children:[{level:3,title:"6.5.1 \u6982\u8FF0",slug:"_6-5-1-\u6982\u8FF0",children:[]},{level:3,title:"6.5.2 \u7ED3\u6784",slug:"_6-5-2-\u7ED3\u6784",children:[]},{level:3,title:"6.5.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-5-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.5.4 \u4F18\u7F3A\u70B9",slug:"_6-5-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.5.5 \u4F7F\u7528\u573A\u666F",slug:"_6-5-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F",slug:"_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F",children:[{level:3,title:"6.6.1 \u6982\u8FF0",slug:"_6-6-1-\u6982\u8FF0",children:[]},{level:3,title:"6.6.2 \u7ED3\u6784",slug:"_6-6-2-\u7ED3\u6784",children:[]},{level:3,title:"6.6.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-6-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.6.4 \u4F18\u7F3A\u70B9",slug:"_6-6-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.6.5 \u4F7F\u7528\u573A\u666F",slug:"_6-6-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0",slug:"_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0",children:[]}]},{level:2,title:"6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F",slug:"_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F",children:[{level:3,title:"6.7.1 \u6982\u8FF0",slug:"_6-7-1-\u6982\u8FF0",children:[]},{level:3,title:"6.7.2 \u7ED3\u6784",slug:"_6-7-2-\u7ED3\u6784",children:[]},{level:3,title:"6.7.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-7-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.7.4 \u4F18\u7F3A\u70B9",slug:"_6-7-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.7.5 \u4F7F\u7528\u573A\u666F",slug:"_6-7-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F",slug:"_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F",children:[{level:3,title:"6.8.1 \u6982\u8FF0",slug:"_6-8-1-\u6982\u8FF0",children:[]},{level:3,title:"6.8.2 \u7ED3\u6784",slug:"_6-8-2-\u7ED3\u6784",children:[]},{level:3,title:"6.8.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-8-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.8.4 \u4F18\u7F3A\u70B9",slug:"_6-8-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.8.5 \u4F7F\u7528\u573A\u666F",slug:"_6-8-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.8.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-8-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F",slug:"_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F",children:[{level:3,title:"6.9.1 \u6982\u8FF0",slug:"_6-9-1-\u6982\u8FF0",children:[]},{level:3,title:"6.9.2 \u7ED3\u6784",slug:"_6-9-2-\u7ED3\u6784",children:[]},{level:3,title:"6.9.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-9-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.9.4 \u4F18\u7F3A\u70B9",slug:"_6-9-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.9.5 \u4F7F\u7528\u573A\u666F",slug:"_6-9-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.9.6 \u6269\u5C55",slug:"_6-9-6-\u6269\u5C55",children:[]}]},{level:2,title:"6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[{level:3,title:"6.10.1 \u6982\u8FF0",slug:"_6-10-1-\u6982\u8FF0",children:[]},{level:3,title:"6.10.2 \u7ED3\u6784",slug:"_6-10-2-\u7ED3\u6784",children:[]},{level:3,title:"6.10.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-10-3-\u6848\u4F8B\u5B9E\u73B0",children:[{level:4,title:"6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[]},{level:4,title:"6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[]}]},{level:3,title:"6.10.4 \u4F18\u7F3A\u70B9",slug:"_6-10-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.10.5 \u4F7F\u7528\u573A\u666F",slug:"_6-10-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.11 \u89E3\u91CA\u5668\u6A21\u5F0F",slug:"_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F",children:[{level:3,title:"6.11.1 \u6982\u8FF0",slug:"_6-11-1-\u6982\u8FF0",children:[]},{level:3,title:"6.11.2 \u7ED3\u6784",slug:"_6-11-2-\u7ED3\u6784",children:[]},{level:3,title:"6.11.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-11-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.11.4 \u4F18\u7F3A\u70B9",slug:"_6-11-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.11.5 \u4F7F\u7528\u573A\u666F",slug:"_6-11-5-\u4F7F\u7528\u573A\u666F",children:[]}]}]},{level:1,title:"7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6",slug:"_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6",children:[{level:2,title:"7.1 spring \u4F7F\u7528\u56DE\u987E",slug:"_7-1-spring-\u4F7F\u7528\u56DE\u987E",children:[]},{level:2,title:"7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784",slug:"_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784",children:[{level:3,title:"7.1.1 bean \u6982\u8FF0",slug:"_7-1-1-bean-\u6982\u8FF0",children:[]}]},{level:2,title:"7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790",slug:"_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790",children:[{level:3,title:"7.3.1 BeanFactory \u89E3\u6790",slug:"_7-3-1-beanfactory-\u89E3\u6790",children:[]},{level:3,title:"7.3.2 BeanDefinition \u89E3\u6790",slug:"_7-3-2-beandefinition-\u89E3\u6790",children:[]},{level:3,title:"7.3.3 BeanDefinitionReader \u89E3\u6790",slug:"_7-3-3-beandefinitionreader-\u89E3\u6790",children:[]},{level:3,title:"7.3.4 BeanDefinitionRegistry \u89E3\u6790",slug:"_7-3-4-beandefinitionregistry-\u89E3\u6790",children:[]},{level:3,title:"7.3.5 \u521B\u5EFA\u5BB9\u5668",slug:"_7-3-5-\u521B\u5EFA\u5BB9\u5668",children:[]}]},{level:2,title:"7.4 \u81EA\u5B9A\u4E49 SpringIOC",slug:"_7-4-\u81EA\u5B9A\u4E49-springioc",children:[{level:3,title:"7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B",slug:"_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B",children:[{level:4,title:"7.4.1.1 PropertyValue \u7C7B",slug:"_7-4-1-1-propertyvalue-\u7C7B",children:[]},{level:4,title:"7.4.1.2 MutablePropertyValues \u7C7B",slug:"_7-4-1-2-mutablepropertyvalues-\u7C7B",children:[]},{level:4,title:"7.4.1.3 BeanDefinition \u7C7B",slug:"_7-4-1-3-beandefinition-\u7C7B",children:[]}]},{level:3,title:"7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B",slug:"_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3",slug:"_7-4-2-1-beandefinitionregistry-\u63A5\u53E3",children:[]},{level:4,title:"7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B",slug:"_7-4-2-2-simplebeandefinitionregistry-\u7C7B",children:[]}]},{level:3,title:"7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B",slug:"_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.3.1 BeanDefinitionReader \u63A5\u53E3",slug:"_7-4-3-1-beandefinitionreader-\u63A5\u53E3",children:[]},{level:4,title:"7.4.3.2 XmlBeanDefinitionReader \u7C7B",slug:"_7-4-3-2-xmlbeandefinitionreader-\u7C7B",children:[]}]},{level:3,title:"7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B",slug:"_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.4.1 BeanFactory \u63A5\u53E3",slug:"_7-4-4-1-beanfactory-\u63A5\u53E3",children:[]},{level:4,title:"7.4.4.2 ApplicationContext \u63A5\u53E3",slug:"_7-4-4-2-applicationcontext-\u63A5\u53E3",children:[]},{level:4,title:"7.4.4.3 AbstractApplicationContext \u7C7B",slug:"_7-4-4-3-abstractapplicationcontext-\u7C7B",children:[]},{level:4,title:"7.4.4.4 ClassPathXmlApplicationContext \u7C7B",slug:"_7-4-4-4-classpathxmlapplicationcontext-\u7C7B",children:[]}]},{level:3,title:"7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3",slug:"_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3",children:[{level:4,title:"7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F",slug:"_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F",children:[]},{level:4,title:"7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219",slug:"_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219",children:[]},{level:4,title:"7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165",slug:"_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165",children:[]}]}]}]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/design-pattern/README.md",readingTime:{minutes:164.7,words:49409},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/design-pattern/`},key:"v-db9b3b8e",path:"/posts/design-pattern/",title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",lang:"zh-CN",frontmatter:{title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",description:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava",date:"2022-08-19T21:55:00.000Z",sidebar:"auto",tag:["\u8BBE\u8BA1\u6A21\u5F0F"],category:["java"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208242030437.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/design-pattern/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{property:"og:description",content:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u8BBE\u8BA1\u6A21\u5F0F"}],["meta",{property:"article:published_time",content:"2022-08-19T21:55:00.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
`,headers:[{level:1,title:"1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0",slug:"_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0",children:[{level:2,title:"1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F",slug:"_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F",children:[]},{level:2,title:"1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5",slug:"_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5",children:[]},{level:2,title:"1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027",slug:"_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027",children:[]},{level:2,title:"1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B",slug:"_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B",children:[]}]},{level:1,title:"2\uFF0CUML \u56FE",slug:"_2-uml-\u56FE",children:[{level:2,title:"2.1 \u7C7B\u56FE\u6982\u8FF0",slug:"_2-1-\u7C7B\u56FE\u6982\u8FF0",children:[]},{level:2,title:"2.2 \u7C7B\u56FE\u7684\u4F5C\u7528",slug:"_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528",children:[]},{level:2,title:"2.3 \u7C7B\u56FE\u8868\u793A\u6CD5",slug:"_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5",children:[{level:3,title:"2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F",slug:"_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F",children:[]},{level:3,title:"2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F",slug:"_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F",children:[{level:4,title:"2.3.2.1 \u5173\u8054\u5173\u7CFB",slug:"_2-3-2-1-\u5173\u8054\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.2 \u805A\u5408\u5173\u7CFB",slug:"_2-3-2-2-\u805A\u5408\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.3 \u7EC4\u5408\u5173\u7CFB",slug:"_2-3-2-3-\u7EC4\u5408\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.4 \u4F9D\u8D56\u5173\u7CFB",slug:"_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.5 \u7EE7\u627F\u5173\u7CFB",slug:"_2-3-2-5-\u7EE7\u627F\u5173\u7CFB",children:[]},{level:4,title:"2.3.2.6 \u5B9E\u73B0\u5173\u7CFB",slug:"_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB",children:[]}]}]}]},{level:1,title:"3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219",slug:"_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219",children:[{level:2,title:"3.1 \u5F00\u95ED\u539F\u5219",slug:"_3-1-\u5F00\u95ED\u539F\u5219",children:[]},{level:2,title:"3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219",slug:"_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219",children:[]},{level:2,title:"3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219",slug:"_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219",children:[]},{level:2,title:"3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219",slug:"_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219",children:[]},{level:2,title:"3.5 \u8FEA\u7C73\u7279\u6CD5\u5219",slug:"_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219",children:[]},{level:2,title:"3.6 \u5408\u6210\u590D\u7528\u539F\u5219",slug:"_3-6-\u5408\u6210\u590D\u7528\u539F\u5219",children:[]}]},{level:1,title:"4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F",slug:"_4-\u521B\u5EFA\u8005\u6A21\u5F0F",children:[{level:2,title:"4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F",slug:"_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F",children:[{level:3,title:"4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784",slug:"_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784",children:[]},{level:3,title:"4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0",slug:"_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0",children:[]},{level:3,title:"4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898",slug:"_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898",children:[{level:4,title:"4.1.3.1 \u95EE\u9898\u6F14\u793A",slug:"_4-1-3-1-\u95EE\u9898\u6F14\u793A",children:[]},{level:4,title:"4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3",slug:"_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3",children:[]}]},{level:3,title:"4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B",slug:"_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B",children:[]}]},{level:2,title:"4.2 \u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-\u5DE5\u5382\u6A21\u5F0F",children:[{level:3,title:"4.2.1 \u6982\u8FF0",slug:"_4-2-1-\u6982\u8FF0",children:[]},{level:3,title:"4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F",children:[{level:4,title:"4.2.2.1 \u7ED3\u6784",slug:"_4-2-2-1-\u7ED3\u6784",children:[]},{level:4,title:"4.2.2.2 \u5B9E\u73B0",slug:"_4-2-2-2-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.2.4 \u4F18\u7F3A\u70B9",slug:"_4-2-2-4-\u4F18\u7F3A\u70B9",children:[]},{level:4,title:"4.2.2.3 \u6269\u5C55",slug:"_4-2-2-3-\u6269\u5C55",children:[]}]},{level:3,title:"4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F",slug:"_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F",children:[{level:4,title:"4.2.3.1 \u6982\u5FF5",slug:"_4-2-3-1-\u6982\u5FF5",children:[]},{level:4,title:"4.2.3.2 \u7ED3\u6784",slug:"_4-2-3-2-\u7ED3\u6784",children:[]},{level:4,title:"4.2.3.3 \u5B9E\u73B0",slug:"_4-2-3-3-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.3.4 \u4F18\u7F3A\u70B9",slug:"_4-2-3-4-\u4F18\u7F3A\u70B9",children:[]}]},{level:3,title:"4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F",slug:"_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F",children:[{level:4,title:"4.2.4.1 \u6982\u5FF5",slug:"_4-2-4-1-\u6982\u5FF5",children:[]},{level:4,title:"4.2.4.2 \u7ED3\u6784",slug:"_4-2-4-2-\u7ED3\u6784",children:[]},{level:4,title:"4.2.4.2 \u5B9E\u73B0",slug:"_4-2-4-2-\u5B9E\u73B0",children:[]},{level:4,title:"4.2.4.3 \u4F18\u7F3A\u70B9",slug:"_4-2-4-3-\u4F18\u7F3A\u70B9",children:[]},{level:4,title:"4.2.4.4 \u4F7F\u7528\u573A\u666F",slug:"_4-2-4-4-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:3,title:"4.2.5 \u6A21\u5F0F\u6269\u5C55",slug:"_4-2-5-\u6A21\u5F0F\u6269\u5C55",children:[]},{level:3,title:"4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5",slug:"_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5",children:[]}]},{level:2,title:"4.3 \u539F\u578B\u6A21\u5F0F",slug:"_4-3-\u539F\u578B\u6A21\u5F0F",children:[{level:3,title:"4.3.1 \u6982\u8FF0",slug:"_4-3-1-\u6982\u8FF0",children:[]},{level:3,title:"4.3.2 \u7ED3\u6784",slug:"_4-3-2-\u7ED3\u6784",children:[]},{level:3,title:"4.3.3 \u5B9E\u73B0",slug:"_4-3-3-\u5B9E\u73B0",children:[]},{level:3,title:"4.3.4 \u6848\u4F8B",slug:"_4-3-4-\u6848\u4F8B",children:[]},{level:3,title:"4.3.5 \u4F7F\u7528\u573A\u666F",slug:"_4-3-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09",slug:"_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686",children:[]}]},{level:2,title:"4.5 \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[{level:3,title:"4.4.1 \u6982\u8FF0",slug:"_4-4-1-\u6982\u8FF0",children:[]},{level:3,title:"4.4.2 \u7ED3\u6784",slug:"_4-4-2-\u7ED3\u6784",children:[]},{level:3,title:"4.4.3 \u5B9E\u4F8B",slug:"_4-4-3-\u5B9E\u4F8B",children:[]},{level:3,title:"4.4.4 \u4F18\u7F3A\u70B9",slug:"_4-4-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"4.4.5 \u4F7F\u7528\u573A\u666F",slug:"_4-4-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"4.4.6 \u6A21\u5F0F\u6269\u5C55",slug:"_4-4-6-\u6A21\u5F0F\u6269\u5C55",children:[]}]},{level:2,title:"4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4",slug:"_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4",children:[{level:3,title:"4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[]},{level:3,title:"4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F",slug:"_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F",children:[]}]}]},{level:1,title:"5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F",slug:"_5-\u7ED3\u6784\u578B\u6A21\u5F0F",children:[{level:2,title:"5.1 \u4EE3\u7406\u6A21\u5F0F",slug:"_5-1-\u4EE3\u7406\u6A21\u5F0F",children:[{level:3,title:"5.1.1 \u6982\u8FF0",slug:"_5-1-1-\u6982\u8FF0",children:[]},{level:3,title:"5.1.2 \u7ED3\u6784",slug:"_5-1-2-\u7ED3\u6784",children:[]},{level:3,title:"5.1.3 \u9759\u6001\u4EE3\u7406",slug:"_5-1-3-\u9759\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.4 JDK \u52A8\u6001\u4EE3\u7406",slug:"_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406",slug:"_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406",children:[]},{level:3,title:"5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4",slug:"_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4",children:[]},{level:3,title:"5.1.7 \u4F18\u7F3A\u70B9",slug:"_5-1-7-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"5.1.8 \u4F7F\u7528\u573A\u666F",slug:"_5-1-8-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.2 \u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-\u9002\u914D\u5668\u6A21\u5F0F",children:[{level:3,title:"5.2.1 \u6982\u8FF0",slug:"_5-2-1-\u6982\u8FF0",children:[]},{level:3,title:"5.2.2 \u7ED3\u6784",slug:"_5-2-2-\u7ED3\u6784",children:[]},{level:3,title:"5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F",children:[]},{level:3,title:"5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F",slug:"_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F",children:[]},{level:3,title:"5.2.5 \u5E94\u7528\u573A\u666F",slug:"_5-2-5-\u5E94\u7528\u573A\u666F",children:[]},{level:3,title:"5.2.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-2-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"5.3 \u88C5\u9970\u8005\u6A21\u5F0F",slug:"_5-3-\u88C5\u9970\u8005\u6A21\u5F0F",children:[{level:3,title:"5.3.1 \u6982\u8FF0",slug:"_5-3-1-\u6982\u8FF0",children:[]},{level:3,title:"5.3.2 \u7ED3\u6784",slug:"_5-3-2-\u7ED3\u6784",children:[]},{level:3,title:"5.3.3 \u6848\u4F8B",slug:"_5-3-3-\u6848\u4F8B",children:[]},{level:3,title:"5.3.4 \u4F7F\u7528\u573A\u666F",slug:"_5-3-4-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.3.5 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-3-5-jdk-\u6E90\u7801\u89E3\u6790",children:[]},{level:3,title:"5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B",slug:"_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B",children:[]}]},{level:2,title:"5.4 \u6865\u63A5\u6A21\u5F0F",slug:"_5-4-\u6865\u63A5\u6A21\u5F0F",children:[{level:3,title:"5.4.1 \u6982\u8FF0",slug:"_5-4-1-\u6982\u8FF0",children:[]},{level:3,title:"5.4.2 \u7ED3\u6784",slug:"_5-4-2-\u7ED3\u6784",children:[]},{level:3,title:"5.4.3 \u6848\u4F8B",slug:"_5-4-3-\u6848\u4F8B",children:[]},{level:3,title:"5.4.4 \u4F7F\u7528\u573A\u666F",slug:"_5-4-4-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.5 \u5916\u89C2\u6A21\u5F0F",slug:"_5-5-\u5916\u89C2\u6A21\u5F0F",children:[{level:3,title:"5.5.1 \u6982\u8FF0",slug:"_5-5-1-\u6982\u8FF0",children:[]},{level:3,title:"5.5.2 \u7ED3\u6784",slug:"_5-5-2-\u7ED3\u6784",children:[]},{level:3,title:"5.5.3 \u6848\u4F8B",slug:"_5-5-3-\u6848\u4F8B",children:[]},{level:3,title:"5.5.4 \u4F7F\u7528\u573A\u666F",slug:"_5-5-4-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.5.5 \u6E90\u7801\u89E3\u6790",slug:"_5-5-5-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"5.6 \u7EC4\u5408\u6A21\u5F0F",slug:"_5-6-\u7EC4\u5408\u6A21\u5F0F",children:[{level:3,title:"5.6.1 \u6982\u8FF0",slug:"_5-6-1-\u6982\u8FF0",children:[]},{level:3,title:"5.6.2 \u7ED3\u6784",slug:"_5-6-2-\u7ED3\u6784",children:[]},{level:3,title:"5.6.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_5-6-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B",slug:"_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B",children:[]},{level:3,title:"5.6.5 \u4F18\u70B9",slug:"_5-6-5-\u4F18\u70B9",children:[]},{level:3,title:"5.6.6 \u4F7F\u7528\u573A\u666F",slug:"_5-6-6-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"5.7 \u4EAB\u5143\u6A21\u5F0F",slug:"_5-7-\u4EAB\u5143\u6A21\u5F0F",children:[{level:3,title:"5.7.1 \u6982\u8FF0",slug:"_5-7-1-\u6982\u8FF0",children:[]},{level:3,title:"5.7.2 \u7ED3\u6784",slug:"_5-7-2-\u7ED3\u6784",children:[]},{level:3,title:"5.7.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_5-7-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F",slug:"_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"5.7.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_5-7-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]}]},{level:1,title:"6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F",slug:"_6-\u884C\u4E3A\u578B\u6A21\u5F0F",children:[{level:2,title:"6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F",slug:"_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F",children:[{level:3,title:"6.1.1 \u6982\u8FF0",slug:"_6-1-1-\u6982\u8FF0",children:[]},{level:3,title:"6.1.2 \u7ED3\u6784",slug:"_6-1-2-\u7ED3\u6784",children:[]},{level:3,title:"6.1.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-1-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.1.3 \u4F18\u7F3A\u70B9",slug:"_6-1-3-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.1.4 \u9002\u7528\u573A\u666F",slug:"_6-1-4-\u9002\u7528\u573A\u666F",children:[]},{level:3,title:"6.1.5 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-1-5-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.2 \u7B56\u7565\u6A21\u5F0F",slug:"_6-2-\u7B56\u7565\u6A21\u5F0F",children:[{level:3,title:"6.2.1 \u6982\u8FF0",slug:"_6-2-1-\u6982\u8FF0",children:[]},{level:3,title:"6.2.2 \u7ED3\u6784",slug:"_6-2-2-\u7ED3\u6784",children:[]},{level:3,title:"6.2.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-2-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.2.4 \u4F18\u7F3A\u70B9",slug:"_6-2-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.2.5 \u4F7F\u7528\u573A\u666F",slug:"_6-2-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.2.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-2-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.3 \u547D\u4EE4\u6A21\u5F0F",slug:"_6-3-\u547D\u4EE4\u6A21\u5F0F",children:[{level:3,title:"6.3.1 \u6982\u8FF0",slug:"_6-3-1-\u6982\u8FF0",children:[]},{level:3,title:"6.3.2 \u7ED3\u6784",slug:"_6-3-2-\u7ED3\u6784",children:[]},{level:3,title:"6.3.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-3-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.3.4 \u4F18\u7F3A\u70B9",slug:"_6-3-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.3.5 \u4F7F\u7528\u573A\u666F",slug:"_6-3-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.3.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-3-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F",slug:"_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F",children:[{level:3,title:"6.4.1 \u6982\u8FF0",slug:"_6-4-1-\u6982\u8FF0",children:[]},{level:3,title:"6.4.2 \u7ED3\u6784",slug:"_6-4-2-\u7ED3\u6784",children:[]},{level:3,title:"6.4.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-4-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.4.4 \u4F18\u7F3A\u70B9",slug:"_6-4-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.4.5 \u6E90\u7801\u89E3\u6790",slug:"_6-4-5-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.5 \u72B6\u6001\u6A21\u5F0F",slug:"_6-5-\u72B6\u6001\u6A21\u5F0F",children:[{level:3,title:"6.5.1 \u6982\u8FF0",slug:"_6-5-1-\u6982\u8FF0",children:[]},{level:3,title:"6.5.2 \u7ED3\u6784",slug:"_6-5-2-\u7ED3\u6784",children:[]},{level:3,title:"6.5.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-5-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.5.4 \u4F18\u7F3A\u70B9",slug:"_6-5-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.5.5 \u4F7F\u7528\u573A\u666F",slug:"_6-5-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F",slug:"_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F",children:[{level:3,title:"6.6.1 \u6982\u8FF0",slug:"_6-6-1-\u6982\u8FF0",children:[]},{level:3,title:"6.6.2 \u7ED3\u6784",slug:"_6-6-2-\u7ED3\u6784",children:[]},{level:3,title:"6.6.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-6-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.6.4 \u4F18\u7F3A\u70B9",slug:"_6-6-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.6.5 \u4F7F\u7528\u573A\u666F",slug:"_6-6-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0",slug:"_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0",children:[]}]},{level:2,title:"6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F",slug:"_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F",children:[{level:3,title:"6.7.1 \u6982\u8FF0",slug:"_6-7-1-\u6982\u8FF0",children:[]},{level:3,title:"6.7.2 \u7ED3\u6784",slug:"_6-7-2-\u7ED3\u6784",children:[]},{level:3,title:"6.7.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-7-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.7.4 \u4F18\u7F3A\u70B9",slug:"_6-7-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.7.5 \u4F7F\u7528\u573A\u666F",slug:"_6-7-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F",slug:"_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F",children:[{level:3,title:"6.8.1 \u6982\u8FF0",slug:"_6-8-1-\u6982\u8FF0",children:[]},{level:3,title:"6.8.2 \u7ED3\u6784",slug:"_6-8-2-\u7ED3\u6784",children:[]},{level:3,title:"6.8.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-8-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.8.4 \u4F18\u7F3A\u70B9",slug:"_6-8-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.8.5 \u4F7F\u7528\u573A\u666F",slug:"_6-8-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.8.6 JDK \u6E90\u7801\u89E3\u6790",slug:"_6-8-6-jdk-\u6E90\u7801\u89E3\u6790",children:[]}]},{level:2,title:"6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F",slug:"_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F",children:[{level:3,title:"6.9.1 \u6982\u8FF0",slug:"_6-9-1-\u6982\u8FF0",children:[]},{level:3,title:"6.9.2 \u7ED3\u6784",slug:"_6-9-2-\u7ED3\u6784",children:[]},{level:3,title:"6.9.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-9-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.9.4 \u4F18\u7F3A\u70B9",slug:"_6-9-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.9.5 \u4F7F\u7528\u573A\u666F",slug:"_6-9-5-\u4F7F\u7528\u573A\u666F",children:[]},{level:3,title:"6.9.6 \u6269\u5C55",slug:"_6-9-6-\u6269\u5C55",children:[]}]},{level:2,title:"6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[{level:3,title:"6.10.1 \u6982\u8FF0",slug:"_6-10-1-\u6982\u8FF0",children:[]},{level:3,title:"6.10.2 \u7ED3\u6784",slug:"_6-10-2-\u7ED3\u6784",children:[]},{level:3,title:"6.10.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-10-3-\u6848\u4F8B\u5B9E\u73B0",children:[{level:4,title:"6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[]},{level:4,title:"6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F",slug:"_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F",children:[]}]},{level:3,title:"6.10.4 \u4F18\u7F3A\u70B9",slug:"_6-10-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.10.5 \u4F7F\u7528\u573A\u666F",slug:"_6-10-5-\u4F7F\u7528\u573A\u666F",children:[]}]},{level:2,title:"6.11 \u89E3\u91CA\u5668\u6A21\u5F0F",slug:"_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F",children:[{level:3,title:"6.11.1 \u6982\u8FF0",slug:"_6-11-1-\u6982\u8FF0",children:[]},{level:3,title:"6.11.2 \u7ED3\u6784",slug:"_6-11-2-\u7ED3\u6784",children:[]},{level:3,title:"6.11.3 \u6848\u4F8B\u5B9E\u73B0",slug:"_6-11-3-\u6848\u4F8B\u5B9E\u73B0",children:[]},{level:3,title:"6.11.4 \u4F18\u7F3A\u70B9",slug:"_6-11-4-\u4F18\u7F3A\u70B9",children:[]},{level:3,title:"6.11.5 \u4F7F\u7528\u573A\u666F",slug:"_6-11-5-\u4F7F\u7528\u573A\u666F",children:[]}]}]},{level:1,title:"7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6",slug:"_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6",children:[{level:2,title:"7.1 spring \u4F7F\u7528\u56DE\u987E",slug:"_7-1-spring-\u4F7F\u7528\u56DE\u987E",children:[]},{level:2,title:"7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784",slug:"_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784",children:[{level:3,title:"7.1.1 bean \u6982\u8FF0",slug:"_7-1-1-bean-\u6982\u8FF0",children:[]}]},{level:2,title:"7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790",slug:"_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790",children:[{level:3,title:"7.3.1 BeanFactory \u89E3\u6790",slug:"_7-3-1-beanfactory-\u89E3\u6790",children:[]},{level:3,title:"7.3.2 BeanDefinition \u89E3\u6790",slug:"_7-3-2-beandefinition-\u89E3\u6790",children:[]},{level:3,title:"7.3.3 BeanDefinitionReader \u89E3\u6790",slug:"_7-3-3-beandefinitionreader-\u89E3\u6790",children:[]},{level:3,title:"7.3.4 BeanDefinitionRegistry \u89E3\u6790",slug:"_7-3-4-beandefinitionregistry-\u89E3\u6790",children:[]},{level:3,title:"7.3.5 \u521B\u5EFA\u5BB9\u5668",slug:"_7-3-5-\u521B\u5EFA\u5BB9\u5668",children:[]}]},{level:2,title:"7.4 \u81EA\u5B9A\u4E49 SpringIOC",slug:"_7-4-\u81EA\u5B9A\u4E49-springioc",children:[{level:3,title:"7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B",slug:"_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B",children:[{level:4,title:"7.4.1.1 PropertyValue \u7C7B",slug:"_7-4-1-1-propertyvalue-\u7C7B",children:[]},{level:4,title:"7.4.1.2 MutablePropertyValues \u7C7B",slug:"_7-4-1-2-mutablepropertyvalues-\u7C7B",children:[]},{level:4,title:"7.4.1.3 BeanDefinition \u7C7B",slug:"_7-4-1-3-beandefinition-\u7C7B",children:[]}]},{level:3,title:"7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B",slug:"_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3",slug:"_7-4-2-1-beandefinitionregistry-\u63A5\u53E3",children:[]},{level:4,title:"7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B",slug:"_7-4-2-2-simplebeandefinitionregistry-\u7C7B",children:[]}]},{level:3,title:"7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B",slug:"_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.3.1 BeanDefinitionReader \u63A5\u53E3",slug:"_7-4-3-1-beandefinitionreader-\u63A5\u53E3",children:[]},{level:4,title:"7.4.3.2 XmlBeanDefinitionReader \u7C7B",slug:"_7-4-3-2-xmlbeandefinitionreader-\u7C7B",children:[]}]},{level:3,title:"7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B",slug:"_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B",children:[{level:4,title:"7.4.4.1 BeanFactory \u63A5\u53E3",slug:"_7-4-4-1-beanfactory-\u63A5\u53E3",children:[]},{level:4,title:"7.4.4.2 ApplicationContext \u63A5\u53E3",slug:"_7-4-4-2-applicationcontext-\u63A5\u53E3",children:[]},{level:4,title:"7.4.4.3 AbstractApplicationContext \u7C7B",slug:"_7-4-4-3-abstractapplicationcontext-\u7C7B",children:[]},{level:4,title:"7.4.4.4 ClassPathXmlApplicationContext \u7C7B",slug:"_7-4-4-4-classpathxmlapplicationcontext-\u7C7B",children:[]}]},{level:3,title:"7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3",slug:"_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3",children:[{level:4,title:"7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F",slug:"_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F",children:[]},{level:4,title:"7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219",slug:"_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219",children:[]},{level:4,title:"7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165",slug:"_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165",children:[]}]}]}]}],content:`---
title: Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F
description: 'Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F,\u8BBE\u8BA1\u6A21\u5F0F\uFF0CJava'
date: 2022-8-19 21:55:00
sidebar: 'auto'
tag:
  - \u8BBE\u8BA1\u6A21\u5F0F
category:
  - java
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208242030437.jpg
---

\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002

<!-- more -->

# 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0

## 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F

"\u8BBE\u8BA1\u6A21\u5F0F"\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002

1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB\`\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09\`\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002

1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002

## 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5

\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002

## 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027

\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002

\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002

- \u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002
- \u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002
- \u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002

## 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B

- **\u521B\u5EFA\u578B\u6A21\u5F0F**

  \u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002

- **\u7ED3\u6784\u578B\u6A21\u5F0F**

  \u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002

- **\u884C\u4E3A\u578B\u6A21\u5F0F**

  \u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002

# 2\uFF0CUML \u56FE

\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002

UML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002

## 2.1 \u7C7B\u56FE\u6982\u8FF0

\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002

## 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528

- \u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B
- \u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002

## 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5

### 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002

![](\\img\\Employee.jpg)

\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A

- +\uFF1A\u8868\u793A public

- -\uFF1A\u8868\u793A private

- #\uFF1A\u8868\u793A protected

\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A **\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]**

\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A **\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]**

> \u6CE8\u610F\uFF1A
>
> \u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684
>
> \u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762

**\u4E3E\u4E2A\u6817\u5B50\uFF1A**

![](\\img\\demo.png)

\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A

- method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002
- method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002
- method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002

### 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F

#### 2.3.2.1 \u5173\u8054\u5173\u7CFB

\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002

\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002

**1\uFF0C\u5355\u5411\u5173\u8054**

![](\\img\\customer_address.png)

\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002

**2\uFF0C\u53CC\u5411\u5173\u8054**

![](\\img\\customer_product.png)

\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List\\<Product>\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002

**3\uFF0C\u81EA\u5173\u8054**

![](\\img\\node.png)

\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002

#### 2.3.2.2 \u805A\u5408\u5173\u7CFB

\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002

\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A

![](\\img\\image-20191229173422328.png)

#### 2.3.2.3 \u7EC4\u5408\u5173\u7CFB

\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002

\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A

![](\\img\\image-20191229173455149.png)

#### 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB

\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A

![](\\img\\image-20191229173518926.png)

#### 2.3.2.5 \u7EE7\u627F\u5173\u7CFB

\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A

![](\\img\\image-20191229173539838.png)

#### 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB

\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002

\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002

![](\\img\\image-20191229173554296.png)

# 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219

\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002

## 3.1 \u5F00\u95ED\u539F\u5219

**\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED**\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002

\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002

\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002

\u4E0B\u9762\u4EE5 \`\u641C\u72D7\u8F93\u5165\u6CD5\` \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002

\u3010\u4F8B\u3011\`\u641C\u72D7\u8F93\u5165\u6CD5\` \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002

\u5206\u6790\uFF1A\`\u641C\u72D7\u8F93\u5165\u6CD5\` \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002

![](\\img\\open-close.png)

## 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219

\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002

\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002

\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50

\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002

\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002

![](\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png)

\u4EE3\u7801\u5982\u4E0B\uFF1A

**\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A**

\`\`\`java
public class Rectangle {
    private double length;
    private double width;

    public double getLength() {
        return length;
    }

    public void setLength(double length) {
        this.length = length;
    }

    public double getWidth() {
        return width;
    }

    public void setWidth(double width) {
        this.width = width;
    }
}
\`\`\`

**\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A**

\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002

\`\`\`java
public class Square extends Rectangle {

    public void setWidth(double width) {
        super.setLength(width);
        super.setWidth(width);
    }

    public void setLength(double length) {
        super.setLength(length);
        super.setWidth(length);
    }
}
\`\`\`

\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002

\`\`\`java
public class RectangleDemo {

    public static void resize(Rectangle rectangle) {
        while (rectangle.getWidth() <= rectangle.getLength()) {
            rectangle.setWidth(rectangle.getWidth() + 1);
        }
    }

    //\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD
    public static void printLengthAndWidth(Rectangle rectangle) {
        System.out.println(rectangle.getLength());
        System.out.println(rectangle.getWidth());
    }

    public static void main(String[] args) {
        Rectangle rectangle = new Rectangle();
        rectangle.setLength(20);
        rectangle.setWidth(10);
        resize(rectangle);
        printLengthAndWidth(rectangle);

        System.out.println("============");

        Rectangle rectangle1 = new Square();
        rectangle1.setLength(10);
        resize(rectangle1);
        printLengthAndWidth(rectangle1);
    }
}
\`\`\`

\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002
\u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002

\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3

<img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png" style="zoom:80%;" />

## 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219

\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219

\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111

\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002

**\u7C7B\u56FE\u5982\u4E0B\uFF1A**

<img src="\\img\\\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

**\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:**

\`\`\`java
public class XiJieHardDisk implements HardDisk {

    public void save(String data) {
        System.out.println("\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E" + data);
    }

    public String get() {
        System.out.println("\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E");
        return "\u6570\u636E";
    }
}
\`\`\`

**Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A**

\`\`\`java
public class IntelCpu implements Cpu {

    public void run() {
        System.out.println("\u4F7F\u7528Intel\u5904\u7406\u5668");
    }
}
\`\`\`

**\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A**

\`\`\`java
public class KingstonMemory implements Memory {

    public void save() {
        System.out.println("\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761");
    }
}
\`\`\`

**\u7535\u8111\uFF08Computer\uFF09\uFF1A**

\`\`\`java
public class Computer {

    private XiJieHardDisk hardDisk;
    private IntelCpu cpu;
    private KingstonMemory memory;

    public IntelCpu getCpu() {
        return cpu;
    }

    public void setCpu(IntelCpu cpu) {
        this.cpu = cpu;
    }

    public KingstonMemory getMemory() {
        return memory;
    }

    public void setMemory(KingstonMemory memory) {
        this.memory = memory;
    }

    public XiJieHardDisk getHardDisk() {
        return hardDisk;
    }

    public void setHardDisk(XiJieHardDisk hardDisk) {
        this.hardDisk = hardDisk;
    }

    public void run() {
        System.out.println("\u8BA1\u7B97\u673A\u5DE5\u4F5C");
        cpu.run();
        memory.save();
        String data = hardDisk.get();
        System.out.println("\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A" + data);
    }
}
\`\`\`

**\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A**

\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002

\`\`\`java
public class TestComputer {
    public static void main(String[] args) {
        Computer computer = new Computer();
        computer.setHardDisk(new XiJieHardDisk());
        computer.setCpu(new IntelCpu());
        computer.setMemory(new KingstonMemory());

        computer.run();
    }
}
\`\`\`

\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002

\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A

\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002

**\u7C7B\u56FE\u5982\u4E0B\uFF1A**

<img src="/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png" alt="image-20191229173554296" style="zoom:70%;" />

**\u7535\u8111\uFF08Computer\uFF09\uFF1A**

\`\`\`java
public class Computer {

    private HardDisk hardDisk;
    private Cpu cpu;
    private Memory memory;

    public HardDisk getHardDisk() {
        return hardDisk;
    }

    public void setHardDisk(HardDisk hardDisk) {
        this.hardDisk = hardDisk;
    }

    public Cpu getCpu() {
        return cpu;
    }

    public void setCpu(Cpu cpu) {
        this.cpu = cpu;
    }

    public Memory getMemory() {
        return memory;
    }

    public void setMemory(Memory memory) {
        this.memory = memory;
    }

    public void run() {
        System.out.println("\u8BA1\u7B97\u673A\u5DE5\u4F5C");
    }
}
\`\`\`

\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002

## 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219

\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219

\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B

\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\`\u9ED1\u9A6C\`\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

![](\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u5219.png)

\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A

![](\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u52191.png)

\u4EE3\u7801\u5982\u4E0B\uFF1A

**AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A**

\`\`\`java
public interface AntiTheft {
    void antiTheft();
}
\`\`\`

**Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A**

\`\`\`java
public interface Fireproof {
    void fireproof();
}
\`\`\`

**Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A**

\`\`\`java
public interface Waterproof {
    void waterproof();
}
\`\`\`

**HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A**

\`\`\`java
public class HeiMaSafetyDoor implements AntiTheft,Fireproof,Waterproof {
    public void antiTheft() {
        System.out.println("\u9632\u76D7");
    }

    public void fireproof() {
        System.out.println("\u9632\u706B");
    }


    public void waterproof() {
        System.out.println("\u9632\u6C34");
    }
}
\`\`\`

**ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A**

\`\`\`java
public class ItcastSafetyDoor implements AntiTheft,Fireproof {
    public void antiTheft() {
        System.out.println("\u9632\u76D7");
    }

    public void fireproof() {
        System.out.println("\u9632\u706B");
    }
}
\`\`\`

## 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219

\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002

\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002

\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002

\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219

\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B

\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

**\u660E\u661F\u7C7B\uFF08Star\uFF09**

\`\`\`java
public class Star {
    private String name;

    public Star(String name) {
        this.name=name;
    }

    public String getName() {
        return name;
    }
}
\`\`\`

**\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09**

\`\`\`java
public class Fans {
    private String name;

    public Fans(String name) {
        this.name=name;
    }

    public String getName() {
        return name;
    }
}
\`\`\`

**\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09**

\`\`\`java
public class Company {
    private String name;

    public Company(String name) {
        this.name=name;
    }

    public String getName() {
        return name;
    }
}
\`\`\`

**\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09**

\`\`\`java
public class Agent {
    private Star star;
    private Fans fans;
    private Company company;

    public void setStar(Star star) {
        this.star = star;
    }

    public void setFans(Fans fans) {
        this.fans = fans;
    }

    public void setCompany(Company company) {
        this.company = company;
    }

    public void meeting() {
        System.out.println(fans.getName() + "\u4E0E\u660E\u661F" + star.getName() + "\u89C1\u9762\u4E86\u3002");
    }

    public void business() {
        System.out.println(company.getName() + "\u4E0E\u660E\u661F" + star.getName() + "\u6D3D\u6DE1\u4E1A\u52A1\u3002");
    }
}
\`\`\`

## 3.6 \u5408\u6210\u590D\u7528\u539F\u5219

\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002

\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002

\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A

1. \u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002
2. \u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002
3. \u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002

\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A

1. \u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002
2. \u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002
3. \u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002

\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219

\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F

\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5408\u6210\u590D\u7528\u539F\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />

\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002

<img src="/img/\u5408\u6210\u590D\u7528\u539F\u52191.png" alt="image-20191229173554296" style="zoom:80%;" />

# 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F

\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002

\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002

\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A

- \u5355\u4F8B\u6A21\u5F0F
- \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F
- \u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F
- \u539F\u578B\u6A21\u5F0F
- \u5EFA\u9020\u8005\u6A21\u5F0F

## 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F

\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002

\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002

### 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784

\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A

- \u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B
- \u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B

### 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0

> \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A
>
> \u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA
>
> \u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA

1. \u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09

   \`\`\`java
   /**
    * \u997F\u6C49\u5F0F
    *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61
    */
   public class Singleton {
       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61
       private static Singleton instance = new Singleton();

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
           return instance;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002

2. \u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09

   \`\`\`java
   /**
    * \u6076\u6C49\u5F0F
    *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61
    */
   public class Singleton {

       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61
       private static Singleton instance;

       static {
           instance = new Singleton();
       }

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
           return instance;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002

3. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09

   \`\`\`java
   /**
    * \u61D2\u6C49\u5F0F
    *  \u7EBF\u7A0B\u4E0D\u5B89\u5168
    */
   public class Singleton {
       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61
       private static Singleton instance;

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {

           if(instance == null) {
               instance = new Singleton();
           }
           return instance;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002

4. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09

   \`\`\`java
   /**
    * \u61D2\u6C49\u5F0F
    *  \u7EBF\u7A0B\u5B89\u5168
    */
   public class Singleton {
       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       //\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61
       private static Singleton instance;

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static synchronized Singleton getInstance() {

           if(instance == null) {
               instance = new Singleton();
           }
           return instance;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002

5. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09

   \u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E \`getInstance()\` \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F

   \`\`\`java
   /**
    * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
    */
   public class Singleton {

       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       private static Singleton instance;

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
   		//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B
           if(instance == null) {
               synchronized (Singleton.class) {
                   //\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull
                   if(instance == null) {
                       instance = new Singleton();
                   }
               }
           }
           return instance;
       }
   }
   \`\`\`

   \u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002

   \u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 \`volatile\` \u5173\u952E\u5B57, \`volatile\` \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002

   \`\`\`java
   /**
    * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
    */
   public class Singleton {

       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       private static volatile Singleton instance;

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
   		//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645
           if(instance == null) {
               synchronized (Singleton.class) {
                   //\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A
                   if(instance == null) {
                       instance = new Singleton();
                   }
               }
           }
           return instance;
       }
   }
   \`\`\`

   <div color="red">\u5C0F\u7ED3\uFF1A</div>

   \u6DFB\u52A0 \`volatile\` \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002

6. \u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09

   \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB \`static\` \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002

   \`\`\`java
   /**
    * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F
    */
   public class Singleton {

       //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
       private Singleton() {}

       private static class SingletonHolder {
           private static final Singleton INSTANCE = new Singleton();
       }

       //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
       public static Singleton getInstance() {
           return SingletonHolder.INSTANCE;
       }
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder

   \u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002

   <div color="red">\u5C0F\u7ED3\uFF1A</div>

   \u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002

7. \u679A\u4E3E\u65B9\u5F0F

   \u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002

   \`\`\`java
   /**
    * \u679A\u4E3E\u65B9\u5F0F
    */
   public enum Singleton {
       INSTANCE;
   }
   \`\`\`

   <div color='red'>\u8BF4\u660E\uFF1A</div>

   \u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002

### 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898

#### 4.1.3.1 \u95EE\u9898\u6F14\u793A

\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002

- \u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316

  **Singleton \u7C7B\uFF1A**

  \`\`\`java
  public class Singleton implements Serializable {

      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
      private Singleton() {}

      private static class SingletonHolder {
          private static final Singleton INSTANCE = new Singleton();
      }

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
      public static Singleton getInstance() {
          return SingletonHolder.INSTANCE;
      }
  }
  \`\`\`

  **Test \u7C7B\uFF1A**

  \`\`\`java
  public class Test {
      public static void main(String[] args) throws Exception {
          //\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61
          //writeObject2File();
          //\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61
          Singleton s1 = readObjectFromFile();
          Singleton s2 = readObjectFromFile();

          //\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61
          System.out.println(s1 == s2);
      }

      private static Singleton readObjectFromFile() throws Exception {
          //\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61
          ObjectInputStream ois = new ObjectInputStream(new FileInputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"));
          //\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61
          Singleton instance = (Singleton) ois.readObject();

          return instance;
      }

      public static void writeObject2File() throws Exception {
          //\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61
          Singleton instance = Singleton.getInstance();
          //\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41
          ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"));
          //\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D
          oos.writeObject(instance);
      }
  }
  \`\`\`

  > \u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F\`false\`\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002

- \u53CD\u5C04

  **Singleton \u7C7B\uFF1A**

  \`\`\`java
  public class Singleton {

      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
      private Singleton() {}

      private static volatile Singleton instance;

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
      public static Singleton getInstance() {

          if(instance != null) {
              return instance;
          }

          synchronized (Singleton.class) {
              if(instance != null) {
                  return instance;
              }
              instance = new Singleton();
              return instance;
          }
      }
  }
  \`\`\`

  **Test \u7C7B\uFF1A**

  \`\`\`java
  public class Test {
      public static void main(String[] args) throws Exception {
          //\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61
          Class clazz = Singleton.class;
          //\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61
          Constructor constructor = clazz.getDeclaredConstructor();
          //\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5
          constructor.setAccessible(true);

          //\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1
          Singleton s1 = (Singleton) constructor.newInstance();
          //\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2
          Singleton s2 = (Singleton) constructor.newInstance();

          //\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61
          System.out.println(s1 == s2);
      }
  }
  \`\`\`

  > \u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F\`false\`\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F

> <div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002

#### 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3

- \u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5

  \u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0\`readResolve()\`\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002

  **Singleton \u7C7B\uFF1A**

  \`\`\`java
  public class Singleton implements Serializable {

      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
      private Singleton() {}

      private static class SingletonHolder {
          private static final Singleton INSTANCE = new Singleton();
      }

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
      public static Singleton getInstance() {
          return SingletonHolder.INSTANCE;
      }

      /**
       * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F
       */
      private Object readResolve() {
          return SingletonHolder.INSTANCE;
      }
  }
  \`\`\`

  **\u6E90\u7801\u89E3\u6790\uFF1A**

  ObjectInputStream \u7C7B

  \`\`\`java
  public final Object readObject() throws IOException, ClassNotFoundException{
      ...
      // if nested read, passHandle contains handle of enclosing object
      int outerHandle = passHandle;
      try {
          Object obj = readObject0(false);//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5
      .....
  }

  private Object readObject0(boolean unshared) throws IOException {
  	...
      try {
  		switch (tc) {
  			...
  			case TC_OBJECT:
  				return checkResolve(readOrdinaryObject(unshared));//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5
  			...
          }
      } finally {
          depth--;
          bin.setBlockDataMode(oldMode);
      }
  }

  private Object readOrdinaryObject(boolean unshared) throws IOException {
  	...
  	//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C
      obj = desc.isInstantiable() ? desc.newInstance() : null;
      ...
      // \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue
      if (obj != null && handles.lookupException(passHandle) == null && desc.hasReadResolveMethod()) {
      	// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF
      	// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002
      	Object rep = desc.invokeReadResolve(obj);
       	...
      }
      return obj;
  }
  \`\`\`

- \u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5

  \`\`\`java
  public class Singleton {

      //\u79C1\u6709\u6784\u9020\u65B9\u6CD5
      private Singleton() {
          /*
             \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801
          */
          if(instance != null) {
              throw new RuntimeException();
          }
      }

      private static volatile Singleton instance;

      //\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61
      public static Singleton getInstance() {

          if(instance != null) {
              return instance;
          }

          synchronized (Singleton.class) {
              if(instance != null) {
                  return instance;
              }
              instance = new Singleton();
              return instance;
          }
      }
  }
  \`\`\`

  <div color="red">\u8BF4\u660E:</div>

  \u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002

### 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B

Runtime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002

1. \u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F

   \`\`\`java
   public class Runtime {
       private static Runtime currentRuntime = new Runtime();

       /**
        * Returns the runtime object associated with the current Java application.
        * Most of the methods of class <code>Runtime</code> are instance
        * methods and must be invoked with respect to the current runtime object.
        *
        * @return  the <code>Runtime</code> object associated with the current
        *          Java application.
        */
       public static Runtime getRuntime() {
           return currentRuntime;
       }

       /** Don't let anyone else instantiate this class */
       private Runtime() {}
       ...
   }
   \`\`\`

   \u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002

2. \u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5

   \`\`\`java
   public class RuntimeDemo {
       public static void main(String[] args) throws IOException {
           //\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61
           Runtime runtime = Runtime.getRuntime();

           //\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002
           System.out.println(runtime.totalMemory());
           //\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002
           System.out.println(runtime.maxMemory());

           //\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61
           Process process = runtime.exec("ipconfig");
           //\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6
           InputStream inputStream = process.getInputStream();
           byte[] arr = new byte[1024 * 1024* 100];
           int b = inputStream.read(arr);
           System.out.println(new String(arr,0,b,"gbk"));
       }
   }
   \`\`\`

## 4.2 \u5DE5\u5382\u6A21\u5F0F

### 4.2.1 \u6982\u8FF0

\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002

\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002

\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A

<img src="/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png" style="zoom:80%;" />

\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A**\u89E3\u8026**\u3002

\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528

- \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09
- \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F
- \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F

### 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F

\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002

#### 4.2.2.1 \u7ED3\u6784

\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002
- \u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B
- \u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002

#### 4.2.2.2 \u5B9E\u73B0

\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:70%;" />

\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class SimpleCoffeeFactory {

    public Coffee createCoffee(String type) {
        Coffee coffee = null;
        if("americano".equals(type)) {
            coffee = new AmericanoCoffee();
        } else if("latte".equals(type)) {
            coffee = new LatteCoffee();
        }
        return coffee;
    }
}
\`\`\`

\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002

\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002

#### 4.2.2.4 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002

**\u7F3A\u70B9\uFF1A**

\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002

#### 4.2.2.3 \u6269\u5C55

**\u9759\u6001\u5DE5\u5382**

\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class SimpleCoffeeFactory {

    public static Coffee createCoffee(String type) {
        Coffee coffee = null;
        if("americano".equals(type)) {
            coffee = new AmericanoCoffee();
        } else if("latte".equals(type)) {
            coffee = new LatteCoffee();
        }
        return coffe;
    }
}
\`\`\`

### 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F

\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002

#### 4.2.3.1 \u6982\u5FF5

\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002

#### 4.2.3.2 \u7ED3\u6784

\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002
- \u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002
- \u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002
- \u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002

#### 4.2.3.3 \u5B9E\u73B0

\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:70%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u62BD\u8C61\u5DE5\u5382\uFF1A

\`\`\`java
public interface CoffeeFactory {

    Coffee createCoffee();
}
\`\`\`

\u5177\u4F53\u5DE5\u5382\uFF1A

\`\`\`java
public class LatteCoffeeFactory implements CoffeeFactory {

    public Coffee createCoffee() {
        return new LatteCoffee();
    }
}

public class AmericanCoffeeFactory implements CoffeeFactory {

    public Coffee createCoffee() {
        return new AmericanCoffee();
    }
}
\`\`\`

\u5496\u5561\u5E97\u7C7B\uFF1A

\`\`\`java
public class CoffeeStore {

    private CoffeeFactory factory;

    public CoffeeStore(CoffeeFactory factory) {
        this.factory = factory;
    }

    public Coffee orderCoffee(String type) {
        Coffee coffee = factory.createCoffee();
        coffee.addMilk();
        coffee.addsugar();
        return coffee;
    }
}
\`\`\`

\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002

\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002

#### 4.2.3.4 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

- \u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B
- \u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B

**\u7F3A\u70B9\uFF1A**

- \u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002

### 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F

\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002

\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002

\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002

<img src="/img/image-20200401214509176.png" style="zoom:67%;" />

<img src="/img/image-20200401222951963.png" style="zoom:67%;" />

#### 4.2.4.1 \u6982\u5FF5

\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002

\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002

#### 4.2.4.2 \u7ED3\u6784

\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A

- \u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002
- \u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002
- \u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002
- \u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002

#### 4.2.4.2 \u5B9E\u73B0

\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:67%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u62BD\u8C61\u5DE5\u5382\uFF1A

\`\`\`java
public interface DessertFactory {

    Coffee createCoffee();

    Dessert createDessert();
}
\`\`\`

\u5177\u4F53\u5DE5\u5382\uFF1A

\`\`\`java
//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382
public class AmericanDessertFactory implements DessertFactory {

    public Coffee createCoffee() {
        return new AmericanCoffee();
    }

    public Dessert createDessert() {
        return new MatchaMousse();
    }
}
//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382
public class ItalyDessertFactory implements DessertFactory {

    public Coffee createCoffee() {
        return new LatteCoffee();
    }

    public Dessert createDessert() {
        return new Tiramisu();
    }
}
\`\`\`

\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002

#### 4.2.4.3 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002

**\u7F3A\u70B9\uFF1A**

\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002

#### 4.2.4.4 \u4F7F\u7528\u573A\u666F

- \u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002

- \u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002

- \u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002

\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002

### 4.2.5 \u6A21\u5F0F\u6269\u5C55

**\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408**

\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002

\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6

\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties

\`\`\`properties
american=com.itheima.pattern.factory.config_factory.AmericanCoffee
latte=com.itheima.pattern.factory.config_factory.LatteCoffee
\`\`\`

\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B

\`\`\`java
public class CoffeeFactory {

    private static Map<String,Coffee> map = new HashMap();

    static {
        Properties p = new Properties();
        InputStream is = CoffeeFactory.class.getClassLoader().getResourceAsStream("bean.properties");
        try {
            p.load(is);
            //\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61
            Set<Object> keys = p.keySet();
            for (Object key : keys) {
                //\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09
                String className = p.getProperty((String) key);
                //\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61
                Class clazz = Class.forName(className);
                Coffee obj = (Coffee) clazz.newInstance();
                map.put((String)key,obj);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static Coffee createCoffee(String name) {

        return map.get(name);
    }
}
\`\`\`

\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002

### 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5

\`\`\`java
public class Demo {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("\u4EE4\u72D0\u51B2");
        list.add("\u98CE\u6E05\u626C");
        list.add("\u4EFB\u6211\u884C");

        //\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61
        Iterator<String> it = list.iterator();
        //\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386
        while(it.hasNext()) {
            String ele = it.next();
            System.out.println(ele);
        }
    }
}
\`\`\`

\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A

<img src="/img/jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:75%;" />

Collection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002

> \u53E6\uFF1A
>
> \u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B
>
> \u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B

## 4.3 \u539F\u578B\u6A21\u5F0F

### 4.3.1 \u6982\u8FF0

\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002

### 4.3.2 \u7ED3\u6784

\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002
- \u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002
- \u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002

\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A

![](\\img\\\u539F\u578B\u6A21\u5F0F.png)

### 4.3.3 \u5B9E\u73B0

\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002

> \u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002
>
> \u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002

Java \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 \`clone()\` \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

**Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A**

\`\`\`java
public class Realizetype implements Cloneable {

    public Realizetype() {
        System.out.println("\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01");
    }

    @Override
    protected Realizetype clone() throws CloneNotSupportedException {
        System.out.println("\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01");
        return (Realizetype) super.clone();
    }
}
\`\`\`

**PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A**

\`\`\`java
public class PrototypeTest {
    public static void main(String[] args) throws CloneNotSupportedException {
        Realizetype r1 = new Realizetype();
        Realizetype r2 = r1.clone();

        System.out.println("\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (r1 == r2));
    }
}
\`\`\`

### 4.3.4 \u6848\u4F8B

**\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6**

\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="\\img\\\u539F\u578B\u6A21\u5F0F1.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5956\u72B6\u7C7B
public class Citation implements Cloneable {
    private String name;

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return (this.name);
    }

    public void show() {
        System.out.println(name + "\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01");
    }

    @Override
    public Citation clone() throws CloneNotSupportedException {
        return (Citation) super.clone();
    }
}

//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B
public class CitationTest {
    public static void main(String[] args) throws CloneNotSupportedException {
        Citation c1 = new Citation();
        c1.setName("\u5F20\u4E09");

        //\u590D\u5236\u5956\u72B6
        Citation c2 = c1.clone();
        //\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB
        c2.setName("\u674E\u56DB");

        c1.show();
        c2.show();
    }
}
\`\`\`

### 4.3.5 \u4F7F\u7528\u573A\u666F

- \u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002
- \u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002

### 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09

\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5956\u72B6\u7C7B
public class Citation implements Cloneable {
    private Student stu;

    public Student getStu() {
        return stu;
    }

    public void setStu(Student stu) {
        this.stu = stu;
    }

    void show() {
        System.out.println(stu.getName() + "\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01");
    }

    @Override
    public Citation clone() throws CloneNotSupportedException {
        return (Citation) super.clone();
    }
}

//\u5B66\u751F\u7C7B
public class Student {
    private String name;
    private String address;

    public Student(String name, String address) {
        this.name = name;
        this.address = address;
    }

    public Student() {
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }
}

//\u6D4B\u8BD5\u7C7B
public class CitationTest {
    public static void main(String[] args) throws CloneNotSupportedException {

        Citation c1 = new Citation();
        Student stu = new Student("\u5F20\u4E09", "\u897F\u5B89");
        c1.setStu(stu);

        //\u590D\u5236\u5956\u72B6
        Citation c2 = c1.clone();
        //\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61
        Student stu1 = c2.getStu();
        stu1.setName("\u674E\u56DB");

        //\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61
        System.out.println("stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (stu == stu1));

        c1.show();
        c2.show();
    }
}
\`\`\`

\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A

<img src="\\img\\\u539F\u578B\u6A21\u5F0F2.png" style="zoom:80%;" />

<div color="red">\u8BF4\u660E\uFF1A</div>

\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class CitationTest1 {
    public static void main(String[] args) throws Exception {
        Citation c1 = new Citation();
        Student stu = new Student("\u5F20\u4E09", "\u897F\u5B89");
        c1.setStu(stu);

        //\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"));
        //\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D
        oos.writeObject(c1);
        oos.close();

        //\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"));
        //\u8BFB\u53D6\u5BF9\u8C61
        Citation c2 = (Citation) ois.readObject();
        //\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61
        Student stu1 = c2.getStu();
        stu1.setName("\u674E\u56DB");

        //\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61
        System.out.println("stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (stu == stu1));

        c1.show();
        c2.show();
    }
}
\`\`\`

\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A

<img src="\\img\\\u539F\u578B\u6A21\u5F0F3.png" style="zoom:80%;" />

> \u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002

## 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F

### 4.4.1 \u6982\u8FF0

\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002

<img src="/img/image-20200413225341516.png" style="zoom:60%;" />

- \u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002
- \u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002
- \u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002

### 4.4.2 \u7ED3\u6784

\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002

- \u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002

- \u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002

- \u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png" style="zoom:80%;" />

### 4.4.3 \u5B9E\u4F8B

**\u521B\u5EFA\u5171\u4EAB\u5355\u8F66**

\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002

\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png" style="zoom:80%;" />

\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u81EA\u884C\u8F66\u7C7B
public class Bike {
    private String frame;
    private String seat;

    public String getFrame() {
        return frame;
    }

    public void setFrame(String frame) {
        this.frame = frame;
    }

    public String getSeat() {
        return seat;
    }

    public void setSeat(String seat) {
        this.seat = seat;
    }
}

// \u62BD\u8C61 builder \u7C7B
public abstract class Builder {

    protected Bike mBike = new Bike();

    public abstract void buildFrame();
    public abstract void buildSeat();
    public abstract Bike createBike();
}

//\u6469\u62DC\u5355\u8F66Builder\u7C7B
public class MobikeBuilder extends Builder {

    @Override
    public void buildFrame() {
        mBike.setFrame("\u94DD\u5408\u91D1\u8F66\u67B6");
    }

    @Override
    public void buildSeat() {
        mBike.setSeat("\u771F\u76AE\u8F66\u5EA7");
    }

    @Override
    public Bike createBike() {
        return mBike;
    }
}

//ofo\u5355\u8F66Builder\u7C7B
public class OfoBuilder extends Builder {

    @Override
    public void buildFrame() {
        mBike.setFrame("\u78B3\u7EA4\u7EF4\u8F66\u67B6");
    }

    @Override
    public void buildSeat() {
        mBike.setSeat("\u6A61\u80F6\u8F66\u5EA7");
    }

    @Override
    public Bike createBike() {
        return mBike;
    }
}

//\u6307\u6325\u8005\u7C7B
public class Director {
    private Builder mBuilder;

    public Director(Builder builder) {
        mBuilder = builder;
    }

    public Bike construct() {
        mBuilder.buildFrame();
        mBuilder.buildSeat();
        return mBuilder.createBike();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        showBike(new OfoBuilder());
        showBike(new MobikeBuilder());
    }
    private static void showBike(Builder builder) {
        Director director = new Director(builder);
        Bike bike = director.construct();
        System.out.println(bike.getFrame());
        System.out.println(bike.getSeat());
    }
}
\`\`\`

**\u6CE8\u610F\uFF1A**

\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408

\`\`\`java
// \u62BD\u8C61 builder \u7C7B
public abstract class Builder {

    protected Bike mBike = new Bike();

    public abstract void buildFrame();
    public abstract void buildSeat();
    public abstract Bike createBike();

    public Bike construct() {
        this.buildFrame();
        this.BuildSeat();
        return this.createBike();
    }
}
\`\`\`

**\u8BF4\u660E\uFF1A**

\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002

### 4.4.4 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

- \u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002
- \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002
- \u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002
- \u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002

**\u7F3A\u70B9\uFF1A**

\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002

### 4.4.5 \u4F7F\u7528\u573A\u666F

\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002

- \u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002
- \u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002

### 4.4.6 \u6A21\u5F0F\u6269\u5C55

\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002

\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class Phone {
    private String cpu;
    private String screen;
    private String memory;
    private String mainboard;

    public Phone(String cpu, String screen, String memory, String mainboard) {
        this.cpu = cpu;
        this.screen = screen;
        this.memory = memory;
        this.mainboard = mainboard;
    }

    public String getCpu() {
        return cpu;
    }

    public void setCpu(String cpu) {
        this.cpu = cpu;
    }

    public String getScreen() {
        return screen;
    }

    public void setScreen(String screen) {
        this.screen = screen;
    }

    public String getMemory() {
        return memory;
    }

    public void setMemory(String memory) {
        this.memory = memory;
    }

    public String getMainboard() {
        return mainboard;
    }

    public void setMainboard(String mainboard) {
        this.mainboard = mainboard;
    }

    @Override
    public String toString() {
        return "Phone{" +
                "cpu='" + cpu + '\\'' +
                ", screen='" + screen + '\\'' +
                ", memory='" + memory + '\\'' +
                ", mainboard='" + mainboard + '\\'' +
                '}';
    }
}

public class Client {
    public static void main(String[] args) {
        //\u6784\u5EFAPhone\u5BF9\u8C61
        Phone phone = new Phone("intel","\u4E09\u661F\u5C4F\u5E55","\u91D1\u58EB\u987F","\u534E\u7855");
        System.out.println(phone);
    }
}
\`\`\`

\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002

\u91CD\u6784\u540E\u4EE3\u7801\uFF1A

\`\`\`java
public class Phone {

    private String cpu;
    private String screen;
    private String memory;
    private String mainboard;

    private Phone(Builder builder) {
        cpu = builder.cpu;
        screen = builder.screen;
        memory = builder.memory;
        mainboard = builder.mainboard;
    }

    public static final class Builder {
        private String cpu;
        private String screen;
        private String memory;
        private String mainboard;

        public Builder() {}

        public Builder cpu(String val) {
            cpu = val;
            return this;
        }
        public Builder screen(String val) {
            screen = val;
            return this;
        }
        public Builder memory(String val) {
            memory = val;
            return this;
        }
        public Builder mainboard(String val) {
            mainboard = val;
            return this;
        }
        public Phone build() {
            return new Phone(this);}
    }
    @Override
    public String toString() {
        return "Phone{" +
                "cpu='" + cpu + '\\'' +
                ", screen='" + screen + '\\'' +
                ", memory='" + memory + '\\'' +
                ", mainboard='" + mainboard + '\\'' +
                '}';
    }
}

public class Client {
    public static void main(String[] args) {
        Phone phone = new Phone.Builder()
                .cpu("intel")
                .mainboard("\u534E\u7855")
                .memory("\u91D1\u58EB\u987F")
                .screen("\u4E09\u661F")
                .build();
        System.out.println(phone);
    }
}
\`\`\`

\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002

## 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4

### 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F

\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002

\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002

### 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F

\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002

\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002

\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002

# 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F

\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002

\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002

\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A

- \u4EE3\u7406\u6A21\u5F0F
- \u9002\u914D\u5668\u6A21\u5F0F
- \u88C5\u9970\u8005\u6A21\u5F0F
- \u6865\u63A5\u6A21\u5F0F
- \u5916\u89C2\u6A21\u5F0F
- \u7EC4\u5408\u6A21\u5F0F
- \u4EAB\u5143\u6A21\u5F0F

## 5.1 \u4EE3\u7406\u6A21\u5F0F

### 5.1.1 \u6982\u8FF0

\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002

Java \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002

### 5.1.2 \u7ED3\u6784

\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A

- \u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002
- \u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002
- \u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002

### 5.1.3 \u9759\u6001\u4EE3\u7406

\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002

\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968

\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="\\img\\\u9759\u6001\u4EE3\u7406.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5356\u7968\u63A5\u53E3
public interface SellTickets {
    void sell();
}

//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3
public class TrainStation implements SellTickets {

    public void sell() {
        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");
    }
}

//\u4EE3\u552E\u70B9
public class ProxyPoint implements SellTickets {

    private TrainStation station = new TrainStation();

    public void sell() {
        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528");
        station.sell();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        ProxyPoint pp = new ProxyPoint();
        pp.sell();
    }
}
\`\`\`

\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002

### 5.1.4 JDK \u52A8\u6001\u4EE3\u7406

\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5356\u7968\u63A5\u53E3
public interface SellTickets {
    void sell();
}

//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3
public class TrainStation implements SellTickets {

    public void sell() {
        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");
    }
}

//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61
public class ProxyFactory {

    private TrainStation station = new TrainStation();

    public SellTickets getProxyObject() {
        //\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61
        /*
            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF
                Class<?>[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3
                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F
         */
        SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),
                station.getClass().getInterfaces(),
                new InvocationHandler() {
                    /*
                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61
                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B
                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570
                     */
                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {

                        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");
                        //\u6267\u884C\u771F\u5B9E\u5BF9\u8C61
                        Object result = method.invoke(station, args);
                        return result;
                    }
                });
        return sellTickets;
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61
        ProxyFactory factory = new ProxyFactory();

        SellTickets proxyObject = factory.getProxyObject();
        proxyObject.sell();
    }
}
\`\`\`

<div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div>

- ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F

  ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A

  \`\`\`java
  package com.sun.proxy;

  import com.itheima.proxy.dynamic.jdk.SellTickets;
  import java.lang.reflect.InvocationHandler;
  import java.lang.reflect.Method;
  import java.lang.reflect.Proxy;
  import java.lang.reflect.UndeclaredThrowableException;

  public final class $Proxy0 extends Proxy implements SellTickets {
      private static Method m1;
      private static Method m2;
      private static Method m3;
      private static Method m0;

      public $Proxy0(InvocationHandler invocationHandler) {
          super(invocationHandler);
      }

      static {
          try {
              m1 = Class.forName("java.lang.Object").getMethod("equals", Class.forName("java.lang.Object"));
              m2 = Class.forName("java.lang.Object").getMethod("toString", new Class[0]);
              m3 = Class.forName("com.itheima.proxy.dynamic.jdk.SellTickets").getMethod("sell", new Class[0]);
              m0 = Class.forName("java.lang.Object").getMethod("hashCode", new Class[0]);
              return;
          }
          catch (NoSuchMethodException noSuchMethodException) {
              throw new NoSuchMethodError(noSuchMethodException.getMessage());
          }
          catch (ClassNotFoundException classNotFoundException) {
              throw new NoClassDefFoundError(classNotFoundException.getMessage());
          }
      }

      public final boolean equals(Object object) {
          try {
              return (Boolean)this.h.invoke(this, m1, new Object[]{object});
          }
          catch (Error | RuntimeException throwable) {
              throw throwable;
          }
          catch (Throwable throwable) {
              throw new UndeclaredThrowableException(throwable);
          }
      }

      public final String toString() {
          try {
              return (String)this.h.invoke(this, m2, null);
          }
          catch (Error | RuntimeException throwable) {
              throw throwable;
          }
          catch (Throwable throwable) {
              throw new UndeclaredThrowableException(throwable);
          }
      }

      public final int hashCode() {
          try {
              return (Integer)this.h.invoke(this, m0, null);
          }
          catch (Error | RuntimeException throwable) {
              throw throwable;
          }
          catch (Throwable throwable) {
              throw new UndeclaredThrowableException(throwable);
          }
      }

      public final void sell() {
          try {
              this.h.invoke(this, m3, null);
              return;
          }
          catch (Error | RuntimeException throwable) {
              throw throwable;
          }
          catch (Throwable throwable) {
              throw new UndeclaredThrowableException(throwable);
          }
      }
  }
  \`\`\`

  \u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A

  - \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002
  - \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002

- \u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F

  \u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A

  \`\`\`java
  //\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B
  public final class $Proxy0 extends Proxy implements SellTickets {
      private static Method m3;

      public $Proxy0(InvocationHandler invocationHandler) {
          super(invocationHandler);
      }

      static {
          m3 = Class.forName("com.itheima.proxy.dynamic.jdk.SellTickets").getMethod("sell", new Class[0]);
      }

      public final void sell() {
          this.h.invoke(this, m3, null);
      }
  }

  //Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B
  public class Proxy implements java.io.Serializable {
  	protected InvocationHandler h;

  	protected Proxy(InvocationHandler h) {
          this.h = h;
      }
  }

  //\u4EE3\u7406\u5DE5\u5382\u7C7B
  public class ProxyFactory {

      private TrainStation station = new TrainStation();

      public SellTickets getProxyObject() {
          SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),
                  station.getClass().getInterfaces(),
                  new InvocationHandler() {

                      public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {

                          System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");
                          Object result = method.invoke(station, args);
                          return result;
                      }
                  });
          return sellTickets;
      }
  }


  //\u6D4B\u8BD5\u8BBF\u95EE\u7C7B
  public class Client {
      public static void main(String[] args) {
          //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61
          ProxyFactory factory = new ProxyFactory();
          SellTickets proxyObject = factory.getProxyObject();
          proxyObject.sell();
      }
  }
  \`\`\`

\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A

    1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5
    2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5
    3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5
    4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5

### 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406

\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002

\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002

CGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002

CGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A

\`\`\`xml
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
</dependency>
\`\`\`

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u706B\u8F66\u7AD9
public class TrainStation {

    public void sell() {
        System.out.println("\u706B\u8F66\u7AD9\u5356\u7968");
    }
}

//\u4EE3\u7406\u5DE5\u5382
public class ProxyFactory implements MethodInterceptor {

    private TrainStation target = new TrainStation();

    public TrainStation getProxyObject() {
        //\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570
        Enhancer enhancer =new Enhancer();
        //\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61
        enhancer.setSuperclass(target.getClass());
        //\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570
        enhancer.setCallback(this);
        //\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61
        TrainStation obj = (TrainStation) enhancer.create();
        return obj;
    }

    /*
        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
            o \uFF1A \u4EE3\u7406\u5BF9\u8C61
            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B
            args \uFF1A \u5B9E\u9645\u53C2\u6570
            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B
     */
    public TrainStation intercept(Object o, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {
        System.out.println("\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)");
        TrainStation result = (TrainStation) methodProxy.invokeSuper(o, args);
        return result;
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61
        ProxyFactory factory = new ProxyFactory();
        //\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61
        TrainStation proxyObject = factory.getProxyObject();

        proxyObject.sell();
    }
}
\`\`\`

### 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4

- jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406

  \u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002

  \u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002

- \u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406

  \u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002

  \u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898

### 5.1.7 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

- \u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B
- \u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B
- \u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B

**\u7F3A\u70B9\uFF1A**

- \u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B

### 5.1.8 \u4F7F\u7528\u573A\u666F

- \u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406

  \u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002

- \u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406

  \u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002

- \u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406

  \u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002

## 5.2 \u9002\u914D\u5668\u6A21\u5F0F

### 5.2.1 \u6982\u8FF0

\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002

![](\\img\\\u8F6C\u63A5\u5934.png)

**\u5B9A\u4E49\uFF1A**

\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002

\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002

### 5.2.2 \u7ED3\u6784

\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002
- \u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002
- \u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002

### 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F

\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002

\u3010\u4F8B\u3011\u8BFB\u5361\u5668

\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//SD\u5361\u7684\u63A5\u53E3
public interface SDCard {
    //\u8BFB\u53D6SD\u5361\u65B9\u6CD5
    String readSD();
    //\u5199\u5165SD\u5361\u529F\u80FD
    void writeSD(String msg);
}

//SD\u5361\u5B9E\u73B0\u7C7B
public class SDCardImpl implements SDCard {
    public String readSD() {
        String msg = "sd card read a msg :hello word SD";
        return msg;
    }

    public void writeSD(String msg) {
        System.out.println("sd card write msg : " + msg);
    }
}

//\u7535\u8111\u7C7B
public class Computer {

    public String readSD(SDCard sdCard) {
        if(sdCard == null) {
            throw new NullPointerException("sd card null");
        }
        return sdCard.readSD();
    }
}

//TF\u5361\u63A5\u53E3
public interface TFCard {
    //\u8BFB\u53D6TF\u5361\u65B9\u6CD5
    String readTF();
    //\u5199\u5165TF\u5361\u529F\u80FD
    void writeTF(String msg);
}

//TF\u5361\u5B9E\u73B0\u7C7B
public class TFCardImpl implements TFCard {

    public String readTF() {
        String msg ="tf card read msg : hello word tf card";
        return msg;
    }

    public void writeTF(String msg) {
        System.out.println("tf card write a msg : " + msg);
    }
}

//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09
public class SDAdapterTF extends TFCardImpl implements SDCard {

    public String readSD() {
        System.out.println("adapter read tf card ");
        return readTF();
    }

    public void writeSD(String msg) {
        System.out.println("adapter write tf card");
        writeTF(msg);
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        Computer computer = new Computer();
        SDCard sdCard = new SDCardImpl();
        System.out.println(computer.readSD(sdCard));

        System.out.println("------------");

        SDAdapterTF adapter = new SDAdapterTF();
        System.out.println(computer.readSD(adapter));
    }
}
\`\`\`

\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002

### 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F

\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002

\u3010\u4F8B\u3011\u8BFB\u5361\u5668

\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="\\img\\\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002

\`\`\`java
//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09
public class SDAdapterTF  implements SDCard {

    private TFCard tfCard;

    public SDAdapterTF(TFCard tfCard) {
        this.tfCard = tfCard;
    }

    public String readSD() {
        System.out.println("adapter read tf card ");
        return tfCard.readTF();
    }

    public void writeSD(String msg) {
        System.out.println("adapter write tf card");
        tfCard.writeTF(msg);
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        Computer computer = new Computer();
        SDCard sdCard = new SDCardImpl();
        System.out.println(computer.readSD(sdCard));

        System.out.println("------------");

        TFCard tfCard = new TFCardImpl();
        SDAdapterTF adapter = new SDAdapterTF(tfCard);
        System.out.println(computer.readSD(adapter));
    }
}
\`\`\`

> \u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002

### 5.2.5 \u5E94\u7528\u573A\u666F

- \u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002
- \u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002

### 5.2.6 JDK \u6E90\u7801\u89E3\u6790

Reader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002

InputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A

\`\`\`java
public int read() throws IOException {
    return sd.read();
}

public int read(char cbuf[], int offset, int length) throws IOException {
    return sd.read(cbuf, offset, length);
}
\`\`\`

\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A

![](\\img\\\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png)

\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A

- InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002
- StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002

<div color="red">\u7ED3\u8BBA\uFF1A</div>

\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002

## 5.3 \u88C5\u9970\u8005\u6A21\u5F0F

### 5.3.1 \u6982\u8FF0

\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002

\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002

<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png" style="zoom:80%;" />

\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A

- \u6269\u5C55\u6027\u4E0D\u597D

  \u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002

- \u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B

**\u5B9A\u4E49\uFF1A**

\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002

### 5.3.2 \u7ED3\u6784

\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A

- \u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002
- \u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002
- \u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002
- \u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002

### 5.3.3 \u6848\u4F8B

\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F.png" style="zoom:75%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u5FEB\u9910\u63A5\u53E3
public abstract class FastFood {
    private float price;
    private String desc;

    public FastFood() {
    }

    public FastFood(float price, String desc) {
        this.price = price;
        this.desc = desc;
    }

    public void setPrice(float price) {
        this.price = price;
    }

    public float getPrice() {
        return price;
    }

    public String getDesc() {
        return desc;
    }

    public void setDesc(String desc) {
        this.desc = desc;
    }

    public abstract float cost();  //\u83B7\u53D6\u4EF7\u683C
}

//\u7092\u996D
public class FriedRice extends FastFood {

    public FriedRice() {
        super(10, "\u7092\u996D");
    }

    public float cost() {
        return getPrice();
    }
}

//\u7092\u9762
public class FriedNoodles extends FastFood {

    public FriedNoodles() {
        super(12, "\u7092\u9762");
    }

    public float cost() {
        return getPrice();
    }
}

//\u914D\u6599\u7C7B
public abstract class Garnish extends FastFood {

    private FastFood fastFood;

    public FastFood getFastFood() {
        return fastFood;
    }

    public void setFastFood(FastFood fastFood) {
        this.fastFood = fastFood;
    }

    public Garnish(FastFood fastFood, float price, String desc) {
        super(price,desc);
        this.fastFood = fastFood;
    }
}

//\u9E21\u86CB\u914D\u6599
public class Egg extends Garnish {

    public Egg(FastFood fastFood) {
        super(fastFood,1,"\u9E21\u86CB");
    }

    public float cost() {
        return getPrice() + getFastFood().getPrice();
    }

    @Override
    public String getDesc() {
        return super.getDesc() + getFastFood().getDesc();
    }
}

//\u57F9\u6839\u914D\u6599
public class Bacon extends Garnish {

    public Bacon(FastFood fastFood) {

        super(fastFood,2,"\u57F9\u6839");
    }

    @Override
    public float cost() {
        return getPrice() + getFastFood().getPrice();
    }

    @Override
    public String getDesc() {
        return super.getDesc() + getFastFood().getDesc();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u70B9\u4E00\u4EFD\u7092\u996D
        FastFood food = new FriedRice();
        //\u82B1\u8D39\u7684\u4EF7\u683C
        System.out.println(food.getDesc() + " " + food.cost() + "\u5143");

        System.out.println("========");
        //\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D
        FastFood food1 = new FriedRice();

        food1 = new Egg(food1);
        //\u82B1\u8D39\u7684\u4EF7\u683C
        System.out.println(food1.getDesc() + " " + food1.cost() + "\u5143");

        System.out.println("========");
        //\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762
        FastFood food2 = new FriedNoodles();
        food2 = new Bacon(food2);
        //\u82B1\u8D39\u7684\u4EF7\u683C
        System.out.println(food2.getDesc() + " " + food2.cost() + "\u5143");
    }
}
\`\`\`

**\u597D\u5904\uFF1A**

- \u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002

- \u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002

### 5.3.4 \u4F7F\u7528\u573A\u666F

- \u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002

  \u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A

  - \u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B
  - \u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09

- \u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002

- \u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002

### 5.3.5 JDK \u6E90\u7801\u89E3\u6790

IO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002

\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter

\`\`\`java
public class Demo {
    public static void main(String[] args) throws Exception{
        //\u521B\u5EFABufferedWriter\u5BF9\u8C61
        //\u521B\u5EFAFileWriter\u5BF9\u8C61
        FileWriter fw = new FileWriter("C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt");
        BufferedWriter bw = new BufferedWriter(fw);

        //\u5199\u6570\u636E
        bw.write("hello Buffered");

        bw.close();
    }
}
\`\`\`

\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A

<img src="\\img\\\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png" style="zoom:80%;" />

> <div color="red">\u5C0F\u7ED3\uFF1A</div>
>
> \u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002

### 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B

\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A

- \u76F8\u540C\u70B9\uFF1A
  - \u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3
  - \u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61
  - \u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5
- \u4E0D\u540C\u70B9\uFF1A
  - \u76EE\u7684\u4E0D\u540C
    \u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61
    \u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61
  - \u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C
    \u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012
    \u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61

## 5.4 \u6865\u63A5\u6A21\u5F0F

### 5.4.1 \u6982\u8FF0

\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A

![](\\img\\image-20200207194617620.png)

\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002

\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002

**\u5B9A\u4E49\uFF1A**

\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002

### 5.4.2 \u7ED3\u6784

\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002
- \u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002
- \u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002
- \u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002

### 5.4.3 \u6848\u4F8B

\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668

\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="\\img\\\u6865\u63A5\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u89C6\u9891\u6587\u4EF6
public interface VideoFile {
    void decode(String fileName);
}

//avi\u6587\u4EF6
public class AVIFile implements VideoFile {
    public void decode(String fileName) {
        System.out.println("avi\u89C6\u9891\u6587\u4EF6\uFF1A"+ fileName);
    }
}

//rmvb\u6587\u4EF6
public class REVBBFile implements VideoFile {

    public void decode(String fileName) {
        System.out.println("rmvb\u6587\u4EF6\uFF1A" + fileName);
    }
}

//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C
public abstract class OperatingSystemVersion {

    protected VideoFile videoFile;

    public OperatingSystemVersion(VideoFile videoFile) {
        this.videoFile = videoFile;
    }

    public abstract void play(String fileName);
}

//Windows\u7248\u672C
public class Windows extends OperatingSystem {

    public Windows(VideoFile videoFile) {
        super(videoFile);
    }

    public void play(String fileName) {
        videoFile.decode(fileName);
    }
}

//mac\u7248\u672C
public class Mac extends OperatingSystemVersion {

    public Mac(VideoFile videoFile) {
        super(videoFile);
    }

    public void play(String fileName) {
		videoFile.decode(fileName);
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        OperatingSystem os = new Windows(new AVIFile());
        os.play("\u6218\u72FC3");
    }
}
\`\`\`

**\u597D\u5904\uFF1A**

- \u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002

  \u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002

- \u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E

### 5.4.4 \u4F7F\u7528\u573A\u666F

- \u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002
- \u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002
- \u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002

## 5.5 \u5916\u89C2\u6A21\u5F0F

### 5.5.1 \u6982\u8FF0

\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002

**\u5B9A\u4E49\uFF1A**

\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002

\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528

![](\\img\\\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg)

### 5.5.2 \u7ED3\u6784

\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002
- \u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002

### 5.5.3 \u6848\u4F8B

\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236

\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u5916\u89C2\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u706F\u7C7B
public class Light {
    public void on() {
        System.out.println("\u6253\u5F00\u4E86\u706F....");
    }

    public void off() {
        System.out.println("\u5173\u95ED\u4E86\u706F....");
    }
}

//\u7535\u89C6\u7C7B
public class TV {
    public void on() {
        System.out.println("\u6253\u5F00\u4E86\u7535\u89C6....");
    }

    public void off() {
        System.out.println("\u5173\u95ED\u4E86\u7535\u89C6....");
    }
}

//\u63A7\u5236\u7C7B
public class AirCondition {
    public void on() {
        System.out.println("\u6253\u5F00\u4E86\u7A7A\u8C03....");
    }

    public void off() {
        System.out.println("\u5173\u95ED\u4E86\u7A7A\u8C03....");
    }
}

//\u667A\u80FD\u97F3\u7BB1
public class SmartAppliancesFacade {

    private Light light;
    private TV tv;
    private AirCondition airCondition;

    public SmartAppliancesFacade() {
        light = new Light();
        tv = new TV();
        airCondition = new AirCondition();
    }

    public void say(String message) {
        if(message.contains("\u6253\u5F00")) {
            on();
        } else if(message.contains("\u5173\u95ED")) {
            off();
        } else {
            System.out.println("\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01");
        }
    }

    //\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668
    private void on() {
        System.out.println("\u8D77\u5E8A\u4E86");
        light.on();
        tv.on();
        airCondition.on();
    }

    //\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668
    private void off() {
        System.out.println("\u7761\u89C9\u4E86");
        light.off();
        tv.off();
        airCondition.off();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61
        SmartAppliancesFacade facade = new SmartAppliancesFacade();
        //\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92
        facade.say("\u6253\u5F00\u5BB6\u7535");
        facade.say("\u5173\u95ED\u5BB6\u7535");
    }
}
\`\`\`

**\u597D\u5904\uFF1A**

- \u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002
- \u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002

**\u7F3A\u70B9\uFF1A**

- \u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6

### 5.5.4 \u4F7F\u7528\u573A\u666F

- \u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002
- \u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002
- \u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002

### 5.5.5 \u6E90\u7801\u89E3\u6790

\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002

<img src="/img/image-20200207234545691.png" style="zoom:60%;" />

RequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A

<img src="/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:70%;" />

**\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F**

\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002

## 5.6 \u7EC4\u5408\u6A21\u5F0F

### 5.6.1 \u6982\u8FF0

<img src="/img/image-20200208180417291.png" style="zoom:60%;" />

\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002

**\u5B9A\u4E49\uFF1A**

\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002

### 5.6.2 \u7ED3\u6784

\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A

- \u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002
- \u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002
- \u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002

### 5.6.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355

\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002

<img src="/img/image-20200208182322313.png" style="zoom:80%;" />

\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A

<img src="/img/\u7EC4\u5408\u6A21\u5F0F.png" style="zoom:80%;" />

**\u4EE3\u7801\u5B9E\u73B0\uFF1A**

\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002

\`\`\`java
//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B
public abstract class MenuComponent {

    protected String name;
    protected int level;

    //\u6DFB\u52A0\u83DC\u5355
    public void add(MenuComponent menuComponent){
        throw new UnsupportedOperationException();
    }

    //\u79FB\u9664\u83DC\u5355
    public void remove(MenuComponent menuComponent){
        throw new UnsupportedOperationException();
    }

    //\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355
    public MenuComponent getChild(int i){
        throw new UnsupportedOperationException();
    }

    //\u83B7\u53D6\u83DC\u5355\u540D\u79F0
    public String getName(){
        return name;
    }

    public void print(){
        throw new UnsupportedOperationException();
    }
}
\`\`\`

\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002

\`\`\`java
public class Menu extends MenuComponent {

    private List<MenuComponent> menuComponentList;

    public Menu(String name,int level){
        this.level = level;
        this.name = name;
        menuComponentList = new ArrayList<MenuComponent>();
    }

    @Override
    public void add(MenuComponent menuComponent) {
        menuComponentList.add(menuComponent);
    }

    @Override
    public void remove(MenuComponent menuComponent) {
        menuComponentList.remove(menuComponent);
    }

    @Override
    public MenuComponent getChild(int i) {
        return menuComponentList.get(i);
    }

    @Override
    public void print() {

        for (int i = 1; i < level; i++) {
            System.out.print("--");
        }
        System.out.println(name);
        for (MenuComponent menuComponent : menuComponentList) {
            menuComponent.print();
        }
    }
}
\`\`\`

Menu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002

\`\`\`java
public class MenuItem extends MenuComponent {

    public MenuItem(String name,int level) {
        this.name = name;
        this.level = level;
    }

    @Override
    public void print() {
        for (int i = 1; i < level; i++) {
            System.out.print("--");
        }
        System.out.println(name);
    }
}
\`\`\`

MenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002

### 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B

\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002

- \u900F\u660E\u7EC4\u5408\u6A21\u5F0F

  \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D \`MenuComponent\` \u58F0\u660E\u4E86 \`add\`\u3001\`remove\` \u3001\`getChild\` \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002

  \u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09

- \u5B89\u5168\u7EC4\u5408\u6A21\u5F0F

  \u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 \`Menu\` \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002

  <img src="/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png" style="zoom:80%;" />

### 5.6.5 \u4F18\u70B9

- \u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002
- \u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002
- \u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002
- \u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002

### 5.6.6 \u4F7F\u7528\u573A\u666F

\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002

## 5.7 \u4EAB\u5143\u6A21\u5F0F

### 5.7.1 \u6982\u8FF0

**\u5B9A\u4E49\uFF1A**

\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002

### 5.7.2 \u7ED3\u6784

\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A

1. \u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002
2. \u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002

\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002
- \u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002
- \u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002
- \u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002

### 5.7.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757

\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002

<img src="/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg" style="zoom:60%;" />

**\u5148\u6765\u770B\u7C7B\u56FE\uFF1A**

<img src="/img/\u4EAB\u5143\u6A21\u5F0F.png" style="zoom:80%;" />

**\u4EE3\u7801\u5982\u4E0B\uFF1A**

\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002

\`\`\`java
public abstract class AbstractBox {
    public abstract String getShape();

    public void display(String color) {
        System.out.println("\u65B9\u5757\u5F62\u72B6\uFF1A" + this.getShape() + " \u989C\u8272\uFF1A" + color);
    }
}
\`\`\`

\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002

\`\`\`java
public class IBox extends AbstractBox {

    @Override
    public String getShape() {
        return "I";
    }
}

public class LBox extends AbstractBox {

    @Override
    public String getShape() {
        return "L";
    }
}

public class OBox extends AbstractBox {

    @Override
    public String getShape() {
        return "O";
    }
}
\`\`\`

\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002

\`\`\`java
public class BoxFactory {

    private static HashMap<String, AbstractBox> map;

    private BoxFactory() {
        map = new HashMap<String, AbstractBox>();
        AbstractBox iBox = new IBox();
        AbstractBox lBox = new LBox();
        AbstractBox oBox = new OBox();
        map.put("I", iBox);
        map.put("L", lBox);
        map.put("O", oBox);
    }

    public static final BoxFactory getInstance() {
        return SingletonHolder.INSTANCE;
    }

    private static class SingletonHolder {
        private static final BoxFactory INSTANCE = new BoxFactory();
    }

    public AbstractBox getBox(String key) {
        return map.get(key);
    }
}
\`\`\`

### 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F

**1\uFF0C\u4F18\u70B9**

- \u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD
- \u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001

**2\uFF0C\u7F3A\u70B9\uFF1A**

\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742

**3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A**

- \u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002
- \u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002
- \u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002

### 5.7.6 JDK \u6E90\u7801\u89E3\u6790

Integer \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A

\`\`\`java
public class Demo {
    public static void main(String[] args) {
        Integer i1 = 127;
        Integer i2 = 127;

        System.out.println("i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (i1 == i2));

        Integer i3 = 128;
        Integer i4 = 128;

        System.out.println("i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F" + (i3 == i4));
    }
}
\`\`\`

\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A

<img src="/img/image-20200208212930857.png" style="zoom:80%;" />

\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public class Demo {
    public static void main(String[] args) {
        Integer i1 = Integer.valueOf((int)127);
        Integer i2 Integer.valueOf((int)127);
        System.out.println((String)new StringBuilder().append((String)"i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f").append((boolean)(i1 == i2)).toString());
        Integer i3 = Integer.valueOf((int)128);
        Integer i4 = Integer.valueOf((int)128);
        System.out.println((String)new StringBuilder().append((String)"i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f").append((boolean)(i3 == i4)).toString());
    }
}
\`\`\`

\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F \`valueOf()\` \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF

\`\`\`java
public final class Integer extends Number implements Comparable<Integer> {

	public static Integer valueOf(int i) {
        if (i >= IntegerCache.low && i <= IntegerCache.high)
            return IntegerCache.cache[i + (-IntegerCache.low)];
        return new Integer(i);
    }

    private static class IntegerCache {
        static final int low = -128;
        static final int high;
        static final Integer cache[];

        static {
            int h = 127;
            String integerCacheHighPropValue =
                sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");
            if (integerCacheHighPropValue != null) {
                try {
                    int i = parseInt(integerCacheHighPropValue);
                    i = Math.max(i, 127);
                    // Maximum array size is Integer.MAX_VALUE
                    h = Math.min(i, Integer.MAX_VALUE - (-low) -1);
                } catch( NumberFormatException nfe) {
                }
            }
            high = h;
            cache = new Integer[(high - low) + 1];
            int j = low;
            for(int k = 0; k < cache.length; k++)
                cache[k] = new Integer(j++);
            // range [-128, 127] must be interned (JLS7 5.1.7)
            assert IntegerCache.high >= 127;
        }

        private IntegerCache() {}
    }
}
\`\`\`

\u53EF\u4EE5\u770B\u5230 \`Integer\` \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 \`-128 ~ 127\` \u4E4B\u95F4\u6570\u7684 \`Integer\` \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 \`valueOf\` \u65F6\u5982\u679C\u53C2\u6570\u5728 \`-128 ~ 127\` \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 \`Integer\` \u5BF9\u8C61\u3002

# 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F

\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002

\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002

\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A

- \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F
- \u7B56\u7565\u6A21\u5F0F
- \u547D\u4EE4\u6A21\u5F0F
- \u804C\u8D23\u94FE\u6A21\u5F0F
- \u72B6\u6001\u6A21\u5F0F
- \u89C2\u5BDF\u8005\u6A21\u5F0F
- \u4E2D\u4ECB\u8005\u6A21\u5F0F
- \u8FED\u4EE3\u5668\u6A21\u5F0F
- \u8BBF\u95EE\u8005\u6A21\u5F0F
- \u5907\u5FD8\u5F55\u6A21\u5F0F
- \u89E3\u91CA\u5668\u6A21\u5F0F

\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002

## 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F

### 6.1.1 \u6982\u8FF0

\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002

\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002

**\u5B9A\u4E49\uFF1A**

\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002

### 6.1.2 \u7ED3\u6784

\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002

  - \u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002

  - \u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A

    - \u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002

    - \u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002

    - \u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002

      \u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002

- \u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002

### 6.1.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u7092\u83DC

\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public abstract class AbstractClass {

    public final void cookProcess() {
        //\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9
        this.pourOil();
        //\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9
        this.heatOil();
        //\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC
        this.pourVegetable();
        //\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599
        this.pourSauce();
        //\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092
        this.fry();
    }

    public void pourOil() {
        System.out.println("\u5012\u6CB9");
    }

    //\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0
    public void heatOil() {
        System.out.println("\u70ED\u6CB9");
    }

    //\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09
    public abstract void pourVegetable();

    //\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837
    public abstract void pourSauce();


    //\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0
    public void fry(){
        System.out.println("\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A");
    }
}

public class ConcreteClass_BaoCai extends AbstractClass {

    @Override
    public void pourVegetable() {
        System.out.println("\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC");
    }

    @Override
    public void pourSauce() {
        System.out.println("\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912");
    }
}

public class ConcreteClass_CaiXin extends AbstractClass {
    @Override
    public void pourVegetable() {
        System.out.println("\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3");
    }

    @Override
    public void pourSauce() {
        System.out.println("\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9");
    }
}

public class Client {
    public static void main(String[] args) {
        //\u7092\u624B\u6495\u5305\u83DC
        ConcreteClass_BaoCai baoCai = new ConcreteClass_BaoCai();
        baoCai.cookProcess();

        //\u7092\u849C\u84C9\u83DC\u5FC3
        ConcreteClass_CaiXin caiXin = new ConcreteClass_CaiXin();
        caiXin.cookProcess();
    }
}
\`\`\`

> \u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002

### 6.1.3 \u4F18\u7F3A\u70B9

**\u4F18\u70B9\uFF1A**

- \u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027

  \u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002

- \u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236

  \u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002

**\u7F3A\u70B9\uFF1A**

- \u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002
- \u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002

### 6.1.4 \u9002\u7528\u573A\u666F

- \u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002
- \u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002

### 6.1.5 JDK \u6E90\u7801\u89E3\u6790

InputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A \`read()\` \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A

\`\`\`java
public abstract class InputStream implements Closeable {
    //\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199
    public abstract int read() throws IOException;

    public int read(byte b[]) throws IOException {
        return read(b, 0, b.length);
    }

    public int read(byte b[], int off, int len) throws IOException {
        if (b == null) {
            throw new NullPointerException();
        } else if (off < 0 || len < 0 || len > b.length - off) {
            throw new IndexOutOfBoundsException();
        } else if (len == 0) {
            return 0;
        }

        int c = read(); //\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E
        if (c == -1) {
            return -1;
        }
        b[off] = (byte)c;

        int i = 1;
        try {
            for (; i < len ; i++) {
                c = read();
                if (c == -1) {
                    break;
                }
                b[off + i] = (byte)c;
            }
        } catch (IOException ee) {
        }
        return i;
    }
}
\`\`\`

\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 \`read()\` \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C \`read(byte b[])\` \u65B9\u6CD5\u8C03\u7528\u4E86 \`read(byte b[], int off, int len)\` \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002

\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 \`read()\` \u65B9\u6CD5\u3002

\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002

## 6.2 \u7B56\u7565\u6A21\u5F0F

### 6.2.1 \u6982\u8FF0

\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002

<img src="/img/image-20200210143039168.png" style="zoom:80%;" />

\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002

<img src="/img/image-20200210144457478.png" style="zoom:70%;" />

**\u5B9A\u4E49\uFF1A**

\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002

### 6.2.2 \u7ED3\u6784

\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A

- \u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002
- \u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002
- \u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002

### 6.2.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8

\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u7B56\u7565\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3

\`\`\`java
public interface Strategy {
    void show();
}
\`\`\`

\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8

\`\`\`java
//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A
public class StrategyA implements Strategy {

    public void show() {
        System.out.println("\u4E70\u4E00\u9001\u4E00");
    }
}

//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B
public class StrategyB implements Strategy {

    public void show() {
        System.out.println("\u6EE1200\u5143\u51CF50\u5143");
    }
}

//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C
public class StrategyC implements Strategy {

    public void show() {
        System.out.println("\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1");
    }
}
\`\`\`

\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458

\`\`\`java
public class SalesMan {
    //\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528
    private Strategy strategy;

    public SalesMan(Strategy strategy) {
        this.strategy = strategy;
    }

    //\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8
    public void salesManShow(){
        strategy.show();
    }
}
\`\`\`

### 6.2.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362

  \u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002

- \u6613\u4E8E\u6269\u5C55

  \u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C

- \u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002
- \u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002

### 6.2.5 \u4F7F\u7528\u573A\u666F

- \u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002
- \u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002
- \u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002
- \u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002
- \u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002

### 6.2.6 JDK \u6E90\u7801\u89E3\u6790

\`Comparator\` \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A \`sort()\` \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A

\`\`\`java
public class Arrays{
    public static <T> void sort(T[] a, Comparator<? super T> c) {
        if (c == null) {
            sort(a);
        } else {
            if (LegacyMergeSort.userRequested)
                legacyMergeSort(a, c);
            else
                TimSort.sort(a, 0, a.length, c, null, 0, 0);
        }
    }
}
\`\`\`

Arrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002

\`\`\`java
public class demo {
    public static void main(String[] args) {

        Integer[] data = {12, 2, 3, 2, 4, 5, 1};
        // \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F
        Arrays.sort(data, new Comparator<Integer>() {
            public int compare(Integer o1, Integer o2) {
                return o2 - o1;
            }
        });
        System.out.println(Arrays.toString(data)); //[12, 5, 4, 3, 2, 2, 1]
    }
}
\`\`\`

\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 \`compare()\` \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 \`sort()\` \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
class TimSort<T> {
    static <T> void sort(T[] a, int lo, int hi, Comparator<? super T> c,
                         T[] work, int workBase, int workLen) {
        assert c != null && a != null && lo >= 0 && lo <= hi && hi <= a.length;

        int nRemaining  = hi - lo;
        if (nRemaining < 2)
            return;  // Arrays of size 0 and 1 are always sorted

        // If array is small, do a "mini-TimSort" with no merges
        if (nRemaining < MIN_MERGE) {
            int initRunLen = countRunAndMakeAscending(a, lo, hi, c);
            binarySort(a, lo, hi, lo + initRunLen, c);
            return;
        }
        ...
    }

    private static <T> int countRunAndMakeAscending(T[] a, int lo, int hi,Comparator<? super T> c) {
        assert lo < hi;
        int runHi = lo + 1;
        if (runHi == hi)
            return 1;

        // Find end of run, and reverse range if descending
        if (c.compare(a[runHi++], a[lo]) < 0) { // Descending
            while (runHi < hi && c.compare(a[runHi], a[runHi - 1]) < 0)
                runHi++;
            reverseRange(a, lo, runHi);
        } else {                              // Ascending
            while (runHi < hi && c.compare(a[runHi], a[runHi - 1]) >= 0)
                runHi++;
        }

        return runHi - lo;
    }
}
\`\`\`

\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 \`countRunAndMakeAscending()\` \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002

## 6.3 \u547D\u4EE4\u6A21\u5F0F

### 6.3.1 \u6982\u8FF0

\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002

<img src="/img/image-20200211130313251.png" style="zoom:60%;" />

**\u5B9A\u4E49\uFF1A**

\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002

### 6.3.2 \u7ED3\u6784

\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002
- \u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002
- \u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002
- \u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002

### 6.3.3 \u6848\u4F8B\u5B9E\u73B0

\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002

\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002

\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002

\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u547D\u4EE4\u6A21\u5F0F.png" style="zoom:75%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public interface Command {
    void execute();//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5
}

public class OrderCommand implements Command {

    //\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61
    private SeniorChef receiver;
    private Order order;

    public OrderCommand(SeniorChef receiver, Order order){
        this.receiver = receiver;
        this.order = order;
    }

    public void execute()  {
        System.out.println(order.getDiningTable() + "\u684C\u7684\u8BA2\u5355\uFF1A");
        Set<String> keys = order.getFoodDic().keySet();
        for (String key : keys) {
            receiver.makeFood(order.getFoodDic().get(key),key);
        }

        try {
            Thread.sleep(100);//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B
        } catch (InterruptedException e) {
            e.printStackTrace();
        }


        System.out.println(order.getDiningTable() + "\u684C\u7684\u996D\u5F04\u597D\u4E86");
    }
}

public class Order {
    // \u9910\u684C\u53F7\u7801
    private int diningTable;

    // \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570
    private Map<String, Integer> foodDic = new HashMap<String, Integer>();

    public int getDiningTable() {
        return diningTable;
    }

    public void setDiningTable(int diningTable) {
        this.diningTable = diningTable;
    }

    public Map<String, Integer> getFoodDic() {
        return foodDic;
    }

    public void setFoodDic(String name, int num) {
        foodDic.put(name,num);
    }
}

// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver
public class SeniorChef {

    public void makeFood(int num,String foodName) {
        System.out.println(num + "\u4EFD" + foodName);
    }
}

public class Waitor {

    private ArrayList<Command> commands;//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61

    public Waitor() {
        commands = new ArrayList();
    }

    public void setCommand(Command cmd){
        commands.add(cmd);
    }

    // \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C
    public void orderUp() {
        System.out.println("\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86.......");
        for (int i = 0; i < commands.size(); i++) {
            Command cmd = commands.get(i);
            if (cmd != null) {
                cmd.execute();
            }
        }
    }
}

public class Client {
    public static void main(String[] args) {
        //\u521B\u5EFA2\u4E2Aorder
        Order order1 = new Order();
        order1.setDiningTable(1);
        order1.getFoodDic().put("\u897F\u7EA2\u67FF\u9E21\u86CB\u9762",1);
        order1.getFoodDic().put("\u5C0F\u676F\u53EF\u4E50",2);

        Order order2 = new Order();
        order2.setDiningTable(3);
        order2.getFoodDic().put("\u5C16\u6912\u8089\u4E1D\u76D6\u996D",1);
        order2.getFoodDic().put("\u5C0F\u676F\u96EA\u78A7",1);

        //\u521B\u5EFA\u63A5\u6536\u8005
        SeniorChef receiver=new SeniorChef();
        //\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61
        OrderCommand cmd1 = new OrderCommand(receiver, order1);
        OrderCommand cmd2 = new OrderCommand(receiver, order2);
        //\u521B\u5EFA\u8C03\u7528\u8005 waitor
        Waitor invoker = new Waitor();
        invoker.setCommand(cmd1);
        invoker.setCommand(cmd2);

        //\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86
        invoker.orderUp();
    }
}
\`\`\`

### 6.3.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002
- \u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002
- \u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002
- \u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002
- \u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002

### 6.3.5 \u4F7F\u7528\u573A\u666F

- \u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002
- \u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002
- \u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002

### 6.3.6 JDK \u6E90\u7801\u89E3\u6790

Runable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5

\`\`\`java
//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)
public interface Runnable {
	public abstract void run();
}

//\u8C03\u7528\u8005
public class Thread implements Runnable {
    private Runnable target;

    public synchronized void start() {
        if (threadStatus != 0)
            throw new IllegalThreadStateException();

        group.add(this);

        boolean started = false;
        try {
            start0();
            started = true;
        } finally {
            try {
                if (!started) {
                    group.threadStartFailed(this);
                }
            } catch (Throwable ignore) {
            }
        }
    }

    private native void start0();
}
\`\`\`

\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002

\`\`\`java
/**
 * jdk Runnable \u547D\u4EE4\u6A21\u5F0F
 *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53
 */
public class TurnOffThread implements Runnable{
     private Receiver receiver;

     public TurnOffThread(Receiver receiver) {
     	this.receiver = receiver;
     }
     public void run() {
     	receiver.turnOFF();
     }
}
\`\`\`

\`\`\`java
/**
 * \u6D4B\u8BD5\u7C7B
 */
public class Demo {
     public static void main(String[] args) {
         Receiver receiver = new Receiver();
         TurnOffThread turnOffThread = new TurnOffThread(receiver);
         Thread thread = new Thread(turnOffThread);
         thread.start();
     }
}
\`\`\`

## 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F

### 6.4.1 \u6982\u8FF0

\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002

**\u5B9A\u4E49\uFF1A**

\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002

### 6.4.2 \u7ED3\u6784

\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:

- \u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002
- \u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002
- \u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002

### 6.4.3 \u6848\u4F8B\u5B9E\u73B0

\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u8BF7\u5047\u6761
public class LeaveRequest {
    private String name;//\u59D3\u540D
    private int num;//\u8BF7\u5047\u5929\u6570
    private String content;//\u8BF7\u5047\u5185\u5BB9

    public LeaveRequest(String name, int num, String content) {
        this.name = name;
        this.num = num;
        this.content = content;
    }

    public String getName() {
        return name;
    }

    public int getNum() {
        return num;
    }

    public String getContent() {
        return content;
    }
}

//\u5904\u7406\u8005\u62BD\u8C61\u7C7B
public abstract class Handler {
    protected final static int NUM_ONE = 1;
    protected final static int NUM_THREE = 3;
    protected final static int NUM_SEVEN = 7;

    //\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4
    private int numStart;
    private int numEnd;

    //\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC
    private Handler nextHandler;

    //\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876
    public Handler(int numStart) {
        this.numStart = numStart;
    }

    //\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4
    public Handler(int numStart, int numEnd) {
        this.numStart = numStart;
        this.numEnd = numEnd;
    }

    //\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC
    public void setNextHandler(Handler nextHandler){
        this.nextHandler = nextHandler;
    }

    //\u63D0\u4EA4\u8BF7\u5047\u6761
    public final void submit(LeaveRequest leave){
        if(0 == this.numStart){
            return;
        }

        //\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42
        if(leave.getNum() >= this.numStart){
            this.handleLeave(leave);

            //\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4
            if(null != this.nextHandler && leave.getNum() > numEnd){
                this.nextHandler.submit(leave);//\u7EE7\u7EED\u63D0\u4EA4
            } else {
                System.out.println("\u6D41\u7A0B\u7ED3\u675F");
            }
        }
    }

    //\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5
    protected abstract void handleLeave(LeaveRequest leave);
}

//\u5C0F\u7EC4\u957F
public class GroupLeader extends Handler {
    public GroupLeader() {
        //\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047
        super(Handler.NUM_ONE, Handler.NUM_THREE);
    }

    @Override
    protected void handleLeave(LeaveRequest leave) {
        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");
        System.out.println("\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002");
    }
}

//\u90E8\u95E8\u7ECF\u7406
public class Manager extends Handler {
    public Manager() {
        //\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047
        super(Handler.NUM_THREE, Handler.NUM_SEVEN);
    }

    @Override
    protected void handleLeave(LeaveRequest leave) {
        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");
        System.out.println("\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002");
    }
}

//\u603B\u7ECF\u7406
public class GeneralManager extends Handler {
    public GeneralManager() {
        //\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047
        super(Handler.NUM_SEVEN);
    }

    @Override
    protected void handleLeave(LeaveRequest leave) {
        System.out.println(leave.getName() + "\u8BF7\u5047" + leave.getNum() + "\u5929," + leave.getContent() + "\u3002");
        System.out.println("\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002");
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u8BF7\u5047\u6761\u6765\u4E00\u5F20
        LeaveRequest leave = new LeaveRequest("\u5C0F\u82B1",5,"\u8EAB\u4F53\u4E0D\u9002");

        //\u5404\u4F4D\u9886\u5BFC
        GroupLeader groupLeader = new GroupLeader();
        Manager manager = new Manager();
        GeneralManager generalManager = new GeneralManager();

        groupLeader.setNextHandler(manager);//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406
        manager.setNextHandler(generalManager);//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406
        //\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002

        //\u63D0\u4EA4\u7533\u8BF7
        groupLeader.submit(leave);
    }
}
\`\`\`

### 6.4.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6

  \u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002

- \u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027

  \u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002

- \u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027

  \u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002

- \u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5

  \u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002

- \u8D23\u4EFB\u5206\u62C5

  \u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002
- \u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002
- \u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002

### 6.4.5 \u6E90\u7801\u89E3\u6790

\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:

- \u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response

  \`\`\`java
  public interface Request{

  }

  public interface Response{

  }
  \`\`\`

- \u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter

  \`\`\`java
   public interface Filter {
   	public void doFilter(Request req,Response res,FilterChain c);
   }
  \`\`\`

- \u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668

  \`\`\`java
  public class FirstFilter implements Filter {
      @Override
      public void doFilter(Request request, Response response, FilterChain chain) {

          System.out.println("\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406");

          // \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response
          chain.doFilter(request, response);

          System.out.println("\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406");
      }
  }

  public class SecondFilter  implements Filter {
      @Override
      public void doFilter(Request request, Response response, FilterChain chain) {

          System.out.println("\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406");

          // \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response
          chain.doFilter(request, response);

          System.out.println("\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406");
      }
  }
  \`\`\`

- \u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain

  \`\`\`java
  public class FilterChain {

      private List<Filter> filters = new ArrayList<Filter>();

      private int index = 0;

      // \u94FE\u5F0F\u8C03\u7528
      public FilterChain addFilter(Filter filter) {
          this.filters.add(filter);
          return this;
      }

      public void doFilter(Request request, Response response) {
          if (index == filters.size()) {
              return;
          }
          Filter filter = filters.get(index);
          index++;
          filter.doFilter(request, response, this);
      }
  }
  \`\`\`

- \u6D4B\u8BD5\u7C7B

  \`\`\`java
  public class Client {
      public static void main(String[] args) {
          Request  req = null;
          Response res = null ;

          FilterChain filterChain = new FilterChain();
          filterChain.addFilter(new FirstFilter()).addFilter(new SecondFilter());
          filterChain.doFilter(req,res);
      }
  }
  \`\`\`

## 6.5 \u72B6\u6001\u6A21\u5F0F

### 6.5.1 \u6982\u8FF0

\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u72B6\u6001\u6A21\u5F0F\u524D.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
public interface ILift {
    //\u7535\u68AF\u76844\u4E2A\u72B6\u6001
    //\u5F00\u95E8\u72B6\u6001
    public final static int OPENING_STATE = 1;
    //\u5173\u95E8\u72B6\u6001
    public final static int CLOSING_STATE = 2;
    //\u8FD0\u884C\u72B6\u6001
    public final static int RUNNING_STATE = 3;
    //\u505C\u6B62\u72B6\u6001
    public final static int STOPPING_STATE = 4;

    //\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001
    public void setState(int state);

    //\u7535\u68AF\u7684\u52A8\u4F5C
    public void open();
    public void close();
    public void run();
    public void stop();
}

public class Lift implements ILift {
    private int state;

    @Override
    public void setState(int state) {
        this.state = state;
    }

    //\u6267\u884C\u5173\u95E8\u52A8\u4F5C
    @Override
    public void close() {
        switch (this.state) {
            case OPENING_STATE:
                System.out.println("\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002");//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B
                this.setState(CLOSING_STATE);//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86
                break;
            case CLOSING_STATE:
                //do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8
                break;
            case RUNNING_STATE:
                //do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8
                break;
            case STOPPING_STATE:
                //do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8
                break;
        }
    }

    //\u6267\u884C\u5F00\u95E8\u52A8\u4F5C
    @Override
    public void open() {
        switch (this.state) {
            case OPENING_STATE://\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86
                //do nothing
                break;
            case CLOSING_STATE://\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00:
                System.out.println("\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002");
                this.setState(OPENING_STATE);
                break;
            case RUNNING_STATE:
                //do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8
                break;
            case STOPPING_STATE:
                System.out.println("\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002");//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86
                this.setState(OPENING_STATE);
                break;
        }
    }

    //\u6267\u884C\u8FD0\u884C\u52A8\u4F5C
    @Override
    public void run() {
        switch (this.state) {
            case OPENING_STATE://\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70
                //do nothing
                break;
            case CLOSING_STATE://\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86
                System.out.println("\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002");
                this.setState(RUNNING_STATE);//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001
                break;
            case RUNNING_STATE:
                //do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86
                break;
            case STOPPING_STATE:
                System.out.println("\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002");
                this.setState(RUNNING_STATE);
                break;
        }
    }

    //\u6267\u884C\u505C\u6B62\u52A8\u4F5C
    @Override
    public void stop() {
        switch (this.state) {
            case OPENING_STATE: //\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)
                //do nothing
                break;
            case CLOSING_STATE://\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62
                System.out.println("\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002");
                this.setState(STOPPING_STATE);
                break;
            case RUNNING_STATE://\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86
                System.out.println("\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002");
                this.setState(STOPPING_STATE);
                break;
            case STOPPING_STATE:
                //do nothing
                break;
        }
    }
}

public class Client {
    public static void main(String[] args) {
        Lift lift = new Lift();
        lift.setState(ILift.STOPPING_STATE);//\u7535\u68AF\u662F\u505C\u6B62\u7684
        lift.open();//\u5F00\u95E8
        lift.close();//\u5173\u95E8
        lift.run();//\u8FD0\u884C
        lift.stop();//\u505C\u6B62
    }
}
\`\`\`

\u95EE\u9898\u5206\u6790\uFF1A

- \u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002
- \u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91

**\u5B9A\u4E49\uFF1A**

\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002

### 6.5.2 \u7ED3\u6784

\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002

- \u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002
- \u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002
- \u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002

### 6.5.3 \u6848\u4F8B\u5B9E\u73B0

\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u72B6\u6001\u6A21\u5F0F.png" style="zoom:70%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u62BD\u8C61\u72B6\u6001\u7C7B
public abstract class LiftState {
    //\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316
    protected Context context;

    public void setContext(Context context) {
        this.context = context;
    }

    //\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C
    public abstract void open();

    //\u7535\u68AF\u5173\u95E8\u52A8\u4F5C
    public abstract void close();

    //\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C
    public abstract void run();

    //\u7535\u68AF\u505C\u6B62\u52A8\u4F5C
    public abstract void stop();
}

//\u5F00\u542F\u72B6\u6001
public class OpenningState extends LiftState {

    //\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD
    @Override
    public void open() {
        System.out.println("\u7535\u68AF\u95E8\u5F00\u542F...");
    }

    @Override
    public void close() {
        //\u72B6\u6001\u4FEE\u6539
        super.context.setLiftState(Context.closeingState);
        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C
        super.context.getLiftState().close();
    }

    //\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A
    @Override
    public void run() {
        //do nothing
    }

    //\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86
    @Override
    public void stop() {
        //do nothing
    }
}

//\u8FD0\u884C\u72B6\u6001
public class RunningState extends LiftState {

    //\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684
    @Override
    public void open() {
        //do nothing
    }

    //\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86
    @Override
    public void close() {//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C
        //do nothing
    }

    //\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5
    @Override
    public void run() {
        System.out.println("\u7535\u68AF\u6B63\u5728\u8FD0\u884C...");
    }

    //\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86
    @Override
    public void stop() {
        super.context.setLiftState(Context.stoppingState);
        super.context.stop();
    }
}

//\u505C\u6B62\u72B6\u6001
public class StoppingState extends LiftState {

    //\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01
    @Override
    public void open() {
        //\u72B6\u6001\u4FEE\u6539
        super.context.setLiftState(Context.openningState);
        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C
        super.context.getLiftState().open();
    }

    @Override
    public void close() {//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C
        //\u72B6\u6001\u4FEE\u6539
        super.context.setLiftState(Context.closeingState);
        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C
        super.context.getLiftState().close();
    }

    //\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88
    @Override
    public void run() {
        //\u72B6\u6001\u4FEE\u6539
        super.context.setLiftState(Context.runningState);
        //\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C
        super.context.getLiftState().run();
    }

    //\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86
    @Override
    public void stop() {
        System.out.println("\u7535\u68AF\u505C\u6B62\u4E86...");
    }
}

//\u5173\u95ED\u72B6\u6001
public class ClosingState extends LiftState {

    @Override
    //\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C
    public void close() {
        System.out.println("\u7535\u68AF\u95E8\u5173\u95ED...");
    }

    //\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440
    @Override
    public void open() {
        super.context.setLiftState(Context.openningState);
        super.context.open();
    }


    //\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86
    @Override
    public void run() {
        super.context.setLiftState(Context.runningState);
        super.context.run();
    }

    //\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42
    @Override
    public void stop() {
        super.context.setLiftState(Context.stoppingState);
        super.context.stop();
    }
}

//\u73AF\u5883\u89D2\u8272
public class Context {
    //\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001
    public final static OpenningState openningState = new OpenningState();//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED
    public final static ClosingState closeingState = new ClosingState();//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8
    public final static RunningState runningState = new RunningState();//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62
    public final static StoppingState stoppingState = new StoppingState();//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C


    //\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001
    private LiftState liftState;

    public LiftState getLiftState() {
        return this.liftState;
    }

    public void setLiftState(LiftState liftState) {
        //\u5F53\u524D\u73AF\u5883\u6539\u53D8
        this.liftState = liftState;
        //\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D
        this.liftState.setContext(this);
    }

    public void open() {
        this.liftState.open();
    }

    public void close() {
        this.liftState.close();
    }

    public void run() {
        this.liftState.run();
    }

    public void stop() {
        this.liftState.stop();
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        Context context = new Context();
        context.setLiftState(new ClosingState());

        context.open();
        context.close();
        context.run();
        context.stop();
    }
}
\`\`\`

### 6.5.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002
- \u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002
- \u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002
- \u72B6\u6001\u6A21\u5F0F\u5BF9"\u5F00\u95ED\u539F\u5219"\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002

### 6.5.5 \u4F7F\u7528\u573A\u666F

- \u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002
- \u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002

## 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F

### 6.6.1 \u6982\u8FF0

**\u5B9A\u4E49\uFF1A**

\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002

### 6.6.2 \u7ED3\u6784

\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A

- Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002
- ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002
- Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002
- ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002

### 6.6.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7

\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5

\`\`\`java
public interface Observer {
    void update(String message);
}
\`\`\`

\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5

\`\`\`java
public class WeixinUser implements Observer {
    // \u5FAE\u4FE1\u7528\u6237\u540D
    private String name;

    public WeixinUser(String name) {
        this.name = name;
    }
    @Override
    public void update(String message) {
        System.out.println(name + "-" + message);
    }
}
\`\`\`

\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5

\`\`\`java
public interface Subject {
    //\u589E\u52A0\u8BA2\u9605\u8005
    public void attach(Observer observer);

    //\u5220\u9664\u8BA2\u9605\u8005
    public void detach(Observer observer);

    //\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F
    public void notify(String message);
}

\`\`\`

\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5

\`\`\`java
public class SubscriptionSubject implements Subject {
    //\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237
    private List<Observer> weixinUserlist = new ArrayList<Observer>();

    @Override
    public void attach(Observer observer) {
        weixinUserlist.add(observer);
    }

    @Override
    public void detach(Observer observer) {
        weixinUserlist.remove(observer);
    }

    @Override
    public void notify(String message) {
        for (Observer observer : weixinUserlist) {
            observer.update(message);
        }
    }
}
\`\`\`

\u5BA2\u6237\u7AEF\u7A0B\u5E8F

\`\`\`java
public class Client {
    public static void main(String[] args) {
        SubscriptionSubject mSubscriptionSubject=new SubscriptionSubject();
        //\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237
        WeixinUser user1=new WeixinUser("\u5B59\u609F\u7A7A");
        WeixinUser user2=new WeixinUser("\u732A\u609F\u80FD");
        WeixinUser user3=new WeixinUser("\u6C99\u609F\u51C0");
        //\u8BA2\u9605\u516C\u4F17\u53F7
        mSubscriptionSubject.attach(user1);
        mSubscriptionSubject.attach(user2);
        mSubscriptionSubject.attach(user3);
        //\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237
        mSubscriptionSubject.notify("\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86");
    }
}

\`\`\`

### 6.6.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002
- \u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6
- \u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83

### 6.6.5 \u4F7F\u7528\u573A\u666F

- \u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002
- \u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002

### 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0

\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002

**1\uFF0CObservable \u7C7B**

Observable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002

- void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002

- void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002

- void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002

**2\uFF0CObserver \u63A5\u53E3**

Observer \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002

\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077

\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A

\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B

\`\`\`java
public class Thief extends Observable {

    private String name;

    public Thief(String name) {
        this.name = name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void steal() {
        System.out.println("\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01");
        super.setChanged(); //changed  = true
        super.notifyObservers();
    }
}

\`\`\`

\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3

\`\`\`java
public class Policemen implements Observer {

    private String name;

    public Policemen(String name) {
        this.name = name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    @Override
    public void update(Observable o, Object arg) {
        System.out.println("\u8B66\u5BDF\uFF1A" + ((Thief) o).getName() + "\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01");
    }
}
\`\`\`

\u5BA2\u6237\u7AEF\u4EE3\u7801

\`\`\`java
public class Client {
    public static void main(String[] args) {
        //\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61
        Thief t = new Thief("\u9694\u58C1\u8001\u738B");
        //\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61
        Policemen p = new Policemen("\u5C0F\u674E");
        //\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077
        t.addObserver(p);
        //\u5C0F\u5077\u5077\u4E1C\u897F
        t.steal();
    }
}
\`\`\`

## 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F

### 6.7.1 \u6982\u8FF0

\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002

\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002

<img src="/img/image-20200214110924010.png" style="zoom:60%;" />

**\u5B9A\u4E49\uFF1A**

\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002

### 6.7.2 \u7ED3\u6784

\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A

- \u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002

- \u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002
- \u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002
- \u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002

### 6.7.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u79DF\u623F

\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002

\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png" style="zoom:70%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u62BD\u8C61\u4E2D\u4ECB\u8005
public abstract class Mediator {
    //\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5
    public abstract void constact(String message,Person person);
}

//\u62BD\u8C61\u540C\u4E8B\u7C7B
public abstract class Person {
    protected String name;
    protected Mediator mediator;

    public Person(String name,Mediator mediator){
        this.name = name;
        this.mediator = mediator;
    }
}

//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005
public class HouseOwner extends Person {

    public HouseOwner(String name, Mediator mediator) {
        super(name, mediator);
    }

    //\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB
    public void constact(String message){
        mediator.constact(message, this);
    }

    //\u83B7\u53D6\u4FE1\u606F
    public void getMessage(String message){
        System.out.println("\u623F\u4E3B" + name +"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A" + message);
    }
}

//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA
public class Tenant extends Person {
    public Tenant(String name, Mediator mediator) {
        super(name, mediator);
    }

    //\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB
    public void constact(String message){
        mediator.constact(message, this);
    }

    //\u83B7\u53D6\u4FE1\u606F
    public void getMessage(String message){
        System.out.println("\u79DF\u623F\u8005" + name +"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A" + message);
    }
}

//\u4E2D\u4ECB\u673A\u6784
public class MediatorStructure extends Mediator {
    //\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F
    private HouseOwner houseOwner;
    private Tenant tenant;

    public HouseOwner getHouseOwner() {
        return houseOwner;
    }

    public void setHouseOwner(HouseOwner houseOwner) {
        this.houseOwner = houseOwner;
    }

    public Tenant getTenant() {
        return tenant;
    }

    public void setTenant(Tenant tenant) {
        this.tenant = tenant;
    }

    public void constact(String message, Person person) {
        if (person == houseOwner) {          //\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F
            tenant.getMessage(message);
        } else {       //\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F
            houseOwner.getMessage(message);
        }
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        //\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784
        MediatorStructure mediator = new MediatorStructure();

        //\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF
        HouseOwner houseOwner = new HouseOwner("\u5F20\u4E09", mediator);
        Tenant tenant = new Tenant("\u674E\u56DB", mediator);

        //\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005
        mediator.setHouseOwner(houseOwner);
        mediator.setTenant(tenant);

        tenant.constact("\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50");
        houseOwner.constact("\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F");
    }
}
\`\`\`

### 6.7.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u677E\u6563\u8026\u5408

  \u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002

- \u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92

  \u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002

- \u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054

  \u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002

### 6.7.5 \u4F7F\u7528\u573A\u666F

- \u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002
- \u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002

## 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F

### 6.8.1 \u6982\u8FF0

**\u5B9A\u4E49\uFF1A**

\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002

### 6.8.2 \u7ED3\u6784

\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A

- \u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002

- \u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002
- \u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002
- \u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002

### 6.8.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A

<img src="/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png" style="zoom:90%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5

\`\`\`java
public interface StudentIterator {
    boolean hasNext();
    Student next();
}
\`\`\`

\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5

\`\`\`java
public class StudentIteratorImpl implements StudentIterator {
    private List<Student> list;
    private int position = 0;

    public StudentIteratorImpl(List<Student> list) {
        this.list = list;
    }

    @Override
    public boolean hasNext() {
        return position < list.size();
    }

    @Override
    public Student next() {
        Student currentStudent = list.get(position);
        position ++;
        return currentStudent;
    }
}
\`\`\`

\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5

\`\`\`java
public interface StudentAggregate {
    void addStudent(Student student);

    void removeStudent(Student student);

    StudentIterator getStudentIterator();
}
\`\`\`

\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5

\`\`\`java
public class StudentAggregateImpl implements StudentAggregate {

    private List<Student> list = new ArrayList<Student>();  // \u5B66\u751F\u5217\u8868

    @Override
    public void addStudent(Student student) {
        this.list.add(student);
    }

    @Override
    public void removeStudent(Student student) {
        this.list.remove(student);
    }

    @Override
    public StudentIterator getStudentIterator() {
        return new StudentIteratorImpl(list);
    }
}
\`\`\`

### 6.8.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002
- \u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002
- \u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002

### 6.8.5 \u4F7F\u7528\u573A\u666F

- \u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002
- \u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002
- \u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002

### 6.8.6 JDK \u6E90\u7801\u89E3\u6790

\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002

\`\`\`java
List<String> list = new ArrayList<>();
Iterator<String> iterator = list.iterator(); //list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61
while (iterator.hasNext()) {
    System.out.println(iterator.next());
}
\`\`\`

\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E

- List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B
- ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B
- Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668
- list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 \`Iterator\` \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61

\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0

\`\`\`java
public class ArrayList<E> extends AbstractList<E>
        implements List<E>, RandomAccess, Cloneable, java.io.Serializable {

    public Iterator<E> iterator() {
        return new Itr();
    }

    private class Itr implements Iterator<E> {
        int cursor;       // \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15
        int lastRet = -1; // \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15
        int expectedModCount = modCount;

        Itr() {}

        //\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20
        public boolean hasNext() {
            return cursor != size;
        }

        //\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20
        public E next() {
            checkForComodification();
            int i = cursor;
            if (i >= size)
                throw new NoSuchElementException();
            Object[] elementData = ArrayList.this.elementData;
            if (i >= elementData.length)
                throw new ConcurrentModificationException();
            cursor = i + 1;
            return (E) elementData[lastRet = i];
        }
        ...
}
\`\`\`

\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 \`iterator\` \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 \`Iterator\` \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 \`Iterator\` \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002

> \u6CE8\u610F\uFF1A
>
> \u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0\`java.util.Iterable\`\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A \`java.util.Iterator\` \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002

## 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F

### 6.9.1 \u6982\u8FF0

**\u5B9A\u4E49\uFF1A**

\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002

### 6.9.2 \u7ED3\u6784

\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:

- \u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\`\uFF08Element\uFF09\`\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002
- \u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002
- \u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08\`accept\`\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002
- \u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002
- \u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08\`Element\`\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002

### 6.9.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF

\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002

- \u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA
- \u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA
- \u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B
- \u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B
- \u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6

\u7C7B\u56FE\u5982\u4E0B\uFF1A

![](\\img\\\u8BBF\u95EE\u8005\u6A21\u5F0F.png)

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3

\`\`\`java
public interface Person {
    void feed(Cat cat);

    void feed(Dog dog);
}
\`\`\`

\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 \`Person\`\u63A5\u53E3

\`\`\`java
public class Owner implements Person {

    @Override
    public void feed(Cat cat) {
        System.out.println("\u4E3B\u4EBA\u5582\u98DF\u732B");
    }

    @Override
    public void feed(Dog dog) {
        System.out.println("\u4E3B\u4EBA\u5582\u98DF\u72D7");
    }
}

public class Someone implements Person {
    @Override
    public void feed(Cat cat) {
        System.out.println("\u5176\u4ED6\u4EBA\u5582\u98DF\u732B");
    }

    @Override
    public void feed(Dog dog) {
        System.out.println("\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7");
    }
}
\`\`\`

\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269

\`\`\`java
public interface Animal {
    void accept(Person person);
}
\`\`\`

\u5B9A\u4E49\u5B9E\u73B0\`Animal\`\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09

\`\`\`java
public class Dog implements Animal {

    @Override
    public void accept(Person person) {
        person.feed(this);
        System.out.println("\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01");
    }
}

public class Cat implements Animal {

    @Override
    public void accept(Person person) {
        person.feed(this);
        System.out.println("\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01");
    }
}
\`\`\`

\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6

\`\`\`java
public class Home {
    private List<Animal> nodeList = new ArrayList<Animal>();

    public void action(Person person) {
        for (Animal node : nodeList) {
            node.accept(person);
        }
    }

    //\u6DFB\u52A0\u64CD\u4F5C
    public void add(Animal animal) {
        nodeList.add(animal);
    }
}

\`\`\`

\u6D4B\u8BD5\u7C7B

\`\`\`java
public class Client {
    public static void main(String[] args) {
        Home home = new Home();
        home.add(new Dog());
        home.add(new Cat());

        Owner owner = new Owner();
        home.action(owner);

        Someone someone = new Someone();
        home.action(someone);
    }
}
\`\`\`

### 6.9.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u6269\u5C55\u6027\u597D

  \u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002

- \u590D\u7528\u6027\u597D

  \u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002

- \u5206\u79BB\u65E0\u5173\u884C\u4E3A

  \u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE

  \u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002

- \u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219

  \u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002

### 6.9.5 \u4F7F\u7528\u573A\u666F

- \u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002

- \u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002

### 6.9.6 \u6269\u5C55

\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002

**1\uFF0C\u5206\u6D3E\uFF1A**

\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 \`Map map = new HashMap()\` \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F \`Map\` \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F \`HashMap\` \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002

**\u9759\u6001\u5206\u6D3E(Static Dispatch)** \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002

**\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)** \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002

**2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A**

\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002

\`\`\`java
public class Animal {
    public void execute() {
        System.out.println("Animal");
    }
}

public class Dog extends Animal {
    @Override
    public void execute() {
        System.out.println("dog");
    }
}

public class Cat extends Animal {
     @Override
    public void execute() {
        System.out.println("cat");
    }
}

public class Client {
   	public static void main(String[] args) {
        Animal a = new Dog();
        a.execute();

        Animal a1 = new Cat();
        a1.execute();
    }
}
\`\`\`

\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002

Java \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002

**3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A**

\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002

\`\`\`java
public class Animal {
}

public class Dog extends Animal {
}

public class Cat extends Animal {
}

public class Execute {
    public void execute(Animal a) {
        System.out.println("Animal");
    }

    public void execute(Dog d) {
        System.out.println("dog");
    }

    public void execute(Cat c) {
        System.out.println("cat");
    }
}

public class Client {
    public static void main(String[] args) {
        Animal a = new Animal();
        Animal a1 = new Dog();
        Animal a2 = new Cat();

        Execute exe = new Execute();
        exe.execute(a);
        exe.execute(a1);
        exe.execute(a2);
    }
}
\`\`\`

\u8FD0\u884C\u7ED3\u679C\uFF1A

<img src="/img/image-20200214215446638.png" style="zoom:70%;" />

\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F

**\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002**

**4\uFF0C\u53CC\u5206\u6D3E\uFF1A**

\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002

\`\`\`java
public class Animal {
    public void accept(Execute exe) {
        exe.execute(this);
    }
}

public class Dog extends Animal {
    public void accept(Execute exe) {
        exe.execute(this);
    }
}

public class Cat extends Animal {
    public void accept(Execute exe) {
        exe.execute(this);
    }
}

public class Execute {
    public void execute(Animal a) {
        System.out.println("animal");
    }

    public void execute(Dog d) {
        System.out.println("dog");
    }

    public void execute(Cat c) {
        System.out.println("cat");
    }
}

public class Client {
    public static void main(String[] args) {
        Animal a = new Animal();
        Animal d = new Dog();
        Animal c = new Cat();

        Execute exe = new Execute();
        a.accept(exe);
        d.accept(exe);
        c.accept(exe);
    }
}
\`\`\`

\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F\`\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E\`\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002

\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002

\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A

<img src="/img/image-20200426233931693.png" style="zoom:67%;" />

**\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002**

## 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F

### 6.10.1 \u6982\u8FF0

\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002

**\u5B9A\u4E49\uFF1A**

\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002

### 6.10.2 \u7ED3\u6784

\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A

- \u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002
- \u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002
- \u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002

> \u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A
>
> - **\u7A84\u63A5\u53E3**\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002
> - **\u5BBD\u63A5\u53E3**\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002

### 6.10.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS

\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002

\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A

- \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F
- \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F

#### 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F

\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u6E38\u620F\u89D2\u8272\u7C7B
public class GameRole {
    private int vit; //\u751F\u547D\u529B
    private int atk; //\u653B\u51FB\u529B
    private int def; //\u9632\u5FA1\u529B

    //\u521D\u59CB\u5316\u72B6\u6001
    public void initState() {
        this.vit = 100;
        this.atk = 100;
        this.def = 100;
    }

    //\u6218\u6597
    public void fight() {
        this.vit = 0;
        this.atk = 0;
        this.def = 0;
    }

    //\u4FDD\u5B58\u89D2\u8272\u72B6\u6001
    public RoleStateMemento saveState() {
        return new RoleStateMemento(vit, atk, def);
    }

    //\u56DE\u590D\u89D2\u8272\u72B6\u6001
    public void recoverState(RoleStateMemento roleStateMemento) {
        this.vit = roleStateMemento.getVit();
        this.atk = roleStateMemento.getAtk();
        this.def = roleStateMemento.getDef();
    }

    public void stateDisplay() {
        System.out.println("\u89D2\u8272\u751F\u547D\u529B\uFF1A" + vit);
        System.out.println("\u89D2\u8272\u653B\u51FB\u529B\uFF1A" + atk);
        System.out.println("\u89D2\u8272\u9632\u5FA1\u529B\uFF1A" + def);
    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }
}

//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)
public class RoleStateMemento {
    private int vit;
    private int atk;
    private int def;

    public RoleStateMemento(int vit, int atk, int def) {
        this.vit = vit;
        this.atk = atk;
        this.def = def;
    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }
}

//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B
public class RoleStateCaretaker {
    private RoleStateMemento roleStateMemento;

    public RoleStateMemento getRoleStateMemento() {
        return roleStateMemento;
    }

    public void setRoleStateMemento(RoleStateMemento roleStateMemento) {
        this.roleStateMemento = roleStateMemento;
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        System.out.println("------------\u5927\u6218Boss\u524D------------");
        //\u5927\u6218Boss\u524D
        GameRole gameRole = new GameRole();
        gameRole.initState();
        gameRole.stateDisplay();

        //\u4FDD\u5B58\u8FDB\u5EA6
        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();
        roleStateCaretaker.setRoleStateMemento(gameRole.saveState());

        System.out.println("------------\u5927\u6218Boss\u540E------------");
        //\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD
        gameRole.fight();
        gameRole.stateDisplay();
        System.out.println("------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------");
        //\u6062\u590D\u4E4B\u524D\u72B6\u6001
        gameRole.recoverState(roleStateCaretaker.getRoleStateMemento());
        gameRole.stateDisplay();

    }
}
\`\`\`

> \u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002

#### 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F

\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06**\u5907\u5FD8\u5F55\u7C7B**\u8BBE\u8BA1\u6210**\u53D1\u8D77\u4EBA\u7C7B**\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002

\u5C06 \`RoleStateMemento\` \u8BBE\u4E3A \`GameRole\` \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 \`RoleStateMemento\` \u5BF9\u8C61\u5C01\u88C5\u5728 \`GameRole\` \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 \`Memento\` \u7ED9 \`RoleStateCaretaker\` \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 \`GameRole\` \u7C7B\u770B\u5230\u7684\u662F \`RoleStateMemento\` \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C\`RoleStateCaretaker\` \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 \`Memento\` \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A

<img src="/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:70%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\u7A84\u63A5\u53E3\`Memento\`\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5

\`\`\`java
public interface Memento {
}
\`\`\`

\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B \`GameRole\`\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B \`RoleStateMemento\`\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09

\`\`\`java
/\u6E38\u620F\u89D2\u8272\u7C7B
public class GameRole {
    private int vit; //\u751F\u547D\u529B
    private int atk; //\u653B\u51FB\u529B
    private int def; //\u9632\u5FA1\u529B

    //\u521D\u59CB\u5316\u72B6\u6001
    public void initState() {
        this.vit = 100;
        this.atk = 100;
        this.def = 100;
    }

    //\u6218\u6597
    public void fight() {
        this.vit = 0;
        this.atk = 0;
        this.def = 0;
    }

    //\u4FDD\u5B58\u89D2\u8272\u72B6\u6001
    public Memento saveState() {
        return new RoleStateMemento(vit, atk, def);
    }

    //\u56DE\u590D\u89D2\u8272\u72B6\u6001
    public void recoverState(Memento memento) {
        RoleStateMemento roleStateMemento = (RoleStateMemento) memento;
        this.vit = roleStateMemento.getVit();
        this.atk = roleStateMemento.getAtk();
        this.def = roleStateMemento.getDef();
    }

    public void stateDisplay() {
        System.out.println("\u89D2\u8272\u751F\u547D\u529B\uFF1A" + vit);
        System.out.println("\u89D2\u8272\u653B\u51FB\u529B\uFF1A" + atk);
        System.out.println("\u89D2\u8272\u9632\u5FA1\u529B\uFF1A" + def);

    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }

    private class RoleStateMemento implements Memento {
        private int vit;
        private int atk;
        private int def;

        public RoleStateMemento(int vit, int atk, int def) {
            this.vit = vit;
            this.atk = atk;
            this.def = def;
        }

        public int getVit() {
            return vit;
        }

        public void setVit(int vit) {
            this.vit = vit;
        }

        public int getAtk() {
            return atk;
        }

        public void setAtk(int atk) {
            this.atk = atk;
        }

        public int getDef() {
            return def;
        }

        public void setDef(int def) {
            this.def = def;
        }
    }
}
\`\`\`

\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B \`RoleStateCaretaker\` \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 \`Memento\` \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9

\`\`\`java
//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B
public class RoleStateCaretaker {
    private Memento memento;

    public Memento getMemento() {
        return memento;
    }

    public void setMemento(Memento memento) {
        this.memento = memento;
    }
}
\`\`\`

\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B

\`\`\`java
public class Client {
    public static void main(String[] args) {
        System.out.println("------------\u5927\u6218Boss\u524D------------");
        //\u5927\u6218Boss\u524D
        GameRole gameRole = new GameRole();
        gameRole.initState();
        gameRole.stateDisplay();

        //\u4FDD\u5B58\u8FDB\u5EA6
        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();
        roleStateCaretaker.setMemento(gameRole.saveState());

        System.out.println("------------\u5927\u6218Boss\u540E------------");
        //\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD
        gameRole.fight();
        gameRole.stateDisplay();
        System.out.println("------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------");
        //\u6062\u590D\u4E4B\u524D\u72B6\u6001
        gameRole.recoverState(roleStateCaretaker.getMemento());
        gameRole.stateDisplay();
    }
}

\`\`\`

### 6.10.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002
- \u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002
- \u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002

### 6.10.5 \u4F7F\u7528\u573A\u666F

- \u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002

- \u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002

## 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F

### 6.11.1 \u6982\u8FF0

<img src="/img/image-20200215220322641.png" style="zoom:60%;" />

\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002

\`\`\`java
//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0
public static int add(int a,int b){
    return a + b;
}

//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0
public static int add(int a,int b,int c){
    return a + b + c;
}

//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0
public static int add(Integer ... arr) {
    int sum = 0;
    for (Integer i : arr) {
        sum += i;
    }
    return sum;
}
\`\`\`

\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002

\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002

**\u5B9A\u4E49\uFF1A**

> \u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002

\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002

\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F

**\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A**

\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002

\`\`\`
expression ::= value | plus | minus
plus ::= expression \u2018+\u2019 expression
minus ::= expression \u2018-\u2019 expression
value ::= integer
\`\`\`

> \u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002

\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A

\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002

**\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A**

\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002

\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002

<img src="/img/image-20200215225227616.png" style="zoom:50%;" />

### 6.11.2 \u7ED3\u6784

\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002

- \u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002

- \u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002
- \u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002
- \u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002
- \u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002

### 6.11.3 \u6848\u4F8B\u5B9E\u73B0

\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6

<img src="/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png" style="zoom:80%;" />

\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`java
//\u62BD\u8C61\u89D2\u8272AbstractExpression
public abstract class AbstractExpression {
    public abstract int interpret(Context context);
}

//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272
public class Value extends AbstractExpression {
    private int value;

    public Value(int value) {
        this.value = value;
    }

    @Override
    public int interpret(Context context) {
        return value;
    }

    @Override
    public String toString() {
        return new Integer(value).toString();
    }
}

//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F
public class Plus extends AbstractExpression {
    private AbstractExpression left;
    private AbstractExpression right;

    public Plus(AbstractExpression left, AbstractExpression right) {
        this.left = left;
        this.right = right;
    }

    @Override
    public int interpret(Context context) {
        return left.interpret(context) + right.interpret(context);
    }

    @Override
    public String toString() {
        return "(" + left.toString() + " + " + right.toString() + ")";
    }
}

///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F
public class Minus extends AbstractExpression {
    private AbstractExpression left;
    private AbstractExpression right;

    public Minus(AbstractExpression left, AbstractExpression right) {
        this.left = left;
        this.right = right;
    }

    @Override
    public int interpret(Context context) {
        return left.interpret(context) - right.interpret(context);
    }

    @Override
    public String toString() {
        return "(" + left.toString() + " - " + right.toString() + ")";
    }
}

//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F
public class Variable extends AbstractExpression {
    private String name;

    public Variable(String name) {
        this.name = name;
    }

    @Override
    public int interpret(Context ctx) {
        return ctx.getValue(this);
    }

    @Override
    public String toString() {
        return name;
    }
}

//\u73AF\u5883\u7C7B
public class Context {
    private Map<Variable, Integer> map = new HashMap<Variable, Integer>();

    public void assign(Variable var, Integer value) {
        map.put(var, value);
    }

    public int getValue(Variable var) {
        Integer value = map.get(var);
        return value;
    }
}

//\u6D4B\u8BD5\u7C7B
public class Client {
    public static void main(String[] args) {
        Context context = new Context();

        Variable a = new Variable("a");
        Variable b = new Variable("b");
        Variable c = new Variable("c");
        Variable d = new Variable("d");
        Variable e = new Variable("e");
        //Value v = new Value(1);

        context.assign(a, 1);
        context.assign(b, 2);
        context.assign(c, 3);
        context.assign(d, 4);
        context.assign(e, 5);

        AbstractExpression expression = new Minus(new Plus(new Plus(new Plus(a, b), c), d), e);

        System.out.println(expression + "= " + expression.interpret(context));
    }
}
\`\`\`

### 6.11.4 \u4F18\u7F3A\u70B9

**1\uFF0C\u4F18\u70B9\uFF1A**

- \u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002

  \u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002

- \u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002

  \u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002

- \u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002

  \u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 "\u5F00\u95ED\u539F\u5219"\u3002

**2\uFF0C\u7F3A\u70B9\uFF1A**

- \u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002

  \u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002

* \u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002

  \u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002

### 6.11.5 \u4F7F\u7528\u573A\u666F

- \u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002

- \u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002

- \u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002

# 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6

## 7.1 spring \u4F7F\u7528\u56DE\u987E

\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002

- \u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B

  \`\`\`java
  public interface UserDao {
      public void add();
  }

  public class UserDaoImpl implements UserDao {

      public void add() {
          System.out.println("userDaoImpl ....");
      }
  }
  \`\`\`

- \u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B

  \`\`\`java
  public interface UserService {
      public void add();
  }

  public class UserServiceImpl implements UserService {

      private UserDao userDao;

      public void setUserDao(UserDao userDao) {
          this.userDao = userDao;
      }

      public void add() {
          System.out.println("userServiceImpl ...");
          userDao.add();
      }
  }
  \`\`\`

- \u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42

  \`\`\`java
  public class UserController {
      public static void main(String[] args) {
          //\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61
          ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");
          //\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61
          UserService userService = applicationContext.getBean("userService", UserService.class);
          //\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5
          userService.add();
      }
  }
  \`\`\`

- \u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6

  \`\`\`java
  <?xml version="1.0" encoding="UTF-8"?>
  <beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://www.springframework.org/schema/beans"
         xmlns:context="http://www.springframework.org/schema/context"
         xsi:schemaLocation="http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans.xsd
          http://www.springframework.org/schema/context
          http://www.springframework.org/schema/context/spring-context.xsd">

      <bean id="userService" class="com.itheima.service.impl.UserServiceImpl">
          <property name="userDao" ref="userDao"></property>
      </bean>

      <bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>

  </beans>
  \`\`\`

  \u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A

  <img src="/img/image-20200429165544151.png" style="zoom:60%;" />

\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A

- userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002
- \u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002
- UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002

\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09

## 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784

Spring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:

\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A

<img src="/img/image-20200429111324770.png" style="zoom:40%;" />

\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002

- spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002
- spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002
- spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002
- spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002
- spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002

### 7.1.1 bean \u6982\u8FF0

Spring \u5C31\u662F\u9762\u5411 \`Bean\` \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002

spring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A

\`\`\`xml
<bean id="userService" class="com.itheima.service.impl.UserServiceImpl">
    <property name="userDao" ref="userDao"></property>
</bean>
<bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>
\`\`\`

\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F

- spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002
- bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002

## 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790

### 7.3.1 BeanFactory \u89E3\u6790

Spring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002

<img src="/img/image-20200429185050396.png" style="zoom:60%;" />

\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002

\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F

\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C

- ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002
- HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean
- AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002

\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A

\`\`\`java
public interface BeanFactory {

	String FACTORY_BEAN_PREFIX = "&";

	//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61
	Object getBean(String name) throws BeansException;
	//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86
	<T> T getBean(String name, Class<T> requiredType) throws BeansException;
	Object getBean(String name, Object... args) throws BeansException;
	<T> T getBean(Class<T> requiredType) throws BeansException;
	<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;

	<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);
	<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);

	//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61
	boolean containsBean(String name);
	//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B
	boolean isSingleton(String name) throws NoSuchBeanDefinitionException;
	boolean isPrototype(String name) throws NoSuchBeanDefinitionException;
	boolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;
	boolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;
	@Nullable
	Class<?> getType(String name) throws NoSuchBeanDefinitionException;
	String[] getAliases(String name);
}
\`\`\`

\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002

BeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002

<img src="/img/image-20200430220155371.png" style="zoom:60%;" />

\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A

- ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002
- FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002
- AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002

### 7.3.2 BeanDefinition \u89E3\u6790

Spring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6

\`\`\`xml
<bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>

bean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A
	scope\u3001init-method\u3001destory-method\u7B49\u3002
\`\`\`

\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002

<img src="/img/image-20200429204239868.png" style="zoom:60%;" />

### 7.3.3 BeanDefinitionReader \u89E3\u6790

Bean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002

<img src="/img/image-20200429204700956.png" style="zoom:60%;" />

\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A

\`\`\`java
public interface BeanDefinitionReader {

	//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61
	BeanDefinitionRegistry getRegistry();

	@Nullable
	ResourceLoader getResourceLoader();

	@Nullable
	ClassLoader getBeanClassLoader();

	BeanNameGenerator getBeanNameGenerator();

	/*
		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D
	*/
	int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException;
	int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException;
	int loadBeanDefinitions(String location) throws BeanDefinitionStoreException;
	int loadBeanDefinitions(String... locations) throws BeanDefinitionStoreException;
}
\`\`\`

### 7.3.4 BeanDefinitionRegistry \u89E3\u6790

BeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002

\`\`\`java
public interface BeanDefinitionRegistry extends AliasRegistry {

	//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean
	void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)
			throws BeanDefinitionStoreException;

	//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean
	void removeBeanDefinition(String beanName) throws NoSuchBeanDefinitionException;

	//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean
	BeanDefinition getBeanDefinition(String beanName) throws NoSuchBeanDefinitionException;

	//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean
	boolean containsBeanDefinition(String beanName);

	//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0
	String[] getBeanDefinitionNames();

	int getBeanDefinitionCount();
	boolean isBeanNameInUse(String beanName);
}
\`\`\`

\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A

<img src="/img/image-20200429211132185.png" style="zoom:60%;" />

\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A

- DefaultListableBeanFactory

  \u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean

  \`\`\`java
  private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(256);
  \`\`\`

- SimpleBeanDefinitionRegistry

  \u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean

  \`\`\`java
  private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(64);
  \`\`\`

### 7.3.5 \u521B\u5EFA\u5BB9\u5668

ClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002

## 7.4 \u81EA\u5B9A\u4E49 SpringIOC

\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002

\`\`\`xml
<?xml version="1.0" encoding="UTF-8"?>
<beans>
    <bean id="userService" class="com.itheima.service.impl.UserServiceImpl">
        <property name="userDao" ref="userDao"></property>
    </bean>
    <bean id="userDao" class="com.itheima.dao.impl.UserDaoImpl"></bean>
</beans>
\`\`\`

### 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B

#### 7.4.1.1 PropertyValue \u7C7B

\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002

\`\`\`java
public class PropertyValue {

  private String name;
  private String ref;
  private String value;

  public PropertyValue() {
  }

  public PropertyValue(String name, String ref,String value) {
    this.name = name;
    this.ref = ref;
    this.value = value;
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public String getRef() {
    return ref;
  }

  public void setRef(String ref) {
    this.ref = ref;
  }

  public String getValue() {
    return value;
  }

  public void setValue(String value) {
    this.value = value;
  }
}
\`\`\`

#### 7.4.1.2 MutablePropertyValues \u7C7B

\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002

\`\`\`java
public class MutablePropertyValues implements Iterable<PropertyValue> {

    private final List<PropertyValue> propertyValueList;

    public MutablePropertyValues() {
        this.propertyValueList = new ArrayList<PropertyValue>();
    }

    public MutablePropertyValues(List<PropertyValue> propertyValueList) {
        this.propertyValueList = (propertyValueList != null ? propertyValueList : new ArrayList<PropertyValue>());
    }

    public PropertyValue[] getPropertyValues() {
        return this.propertyValueList.toArray(new PropertyValue[0]);
    }

    public PropertyValue getPropertyValue(String propertyName) {
        for (PropertyValue pv : this.propertyValueList) {
            if (pv.getName().equals(propertyName)) {
                return pv;
            }
        }
        return null;
    }

    @Override
    public Iterator<PropertyValue> iterator() {
        return propertyValueList.iterator();
    }

    public boolean isEmpty() {
        return this.propertyValueList.isEmpty();
    }

    public MutablePropertyValues addPropertyValue(PropertyValue pv) {
        for (int i = 0; i < this.propertyValueList.size(); i++) {
            PropertyValue currentPv = this.propertyValueList.get(i);
            if (currentPv.getName().equals(pv.getName())) {
                this.propertyValueList.set(i, new PropertyValue(pv.getName(),pv.getRef(), pv.getValue()));
                return this;
            }
        }
        this.propertyValueList.add(pv);
        return this;
    }

    public boolean contains(String propertyName) {
        return getPropertyValue(propertyName) != null;
    }
}
\`\`\`

#### 7.4.1.3 BeanDefinition \u7C7B

BeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002

\`\`\`java
public class BeanDefinition {
    private String id;
    private String className;

    private MutablePropertyValues propertyValues;

    public BeanDefinition() {
        propertyValues = new MutablePropertyValues();
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getClassName() {
        return className;
    }

    public void setClassName(String className) {
        this.className = className;
    }

    public void setPropertyValues(MutablePropertyValues propertyValues) {
        this.propertyValues = propertyValues;
    }

    public MutablePropertyValues getPropertyValues() {
        return propertyValues;
    }
}
\`\`\`

### 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B

#### 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3

BeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A

- \u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D
- \u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61
- \u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61
- \u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61
- \u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570
- \u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0

\`\`\`java
public interface BeanDefinitionRegistry {

    //\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D
    void registerBeanDefinition(String beanName, BeanDefinition beanDefinition);

    //\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61
    void removeBeanDefinition(String beanName) throws Exception;

    //\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61
    BeanDefinition getBeanDefinition(String beanName) throws Exception;

    boolean containsBeanDefinition(String beanName);

    int getBeanDefinitionCount();

    String[] getBeanDefinitionNames();
}
\`\`\`

#### 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B

\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002

\`\`\`java
public class SimpleBeanDefinitionRegistry implements BeanDefinitionRegistry {

    private Map<String, BeanDefinition> beanDefinitionMap = new HashMap<String, BeanDefinition>();

    @Override
    public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) {
        beanDefinitionMap.put(beanName,beanDefinition);
    }

    @Override
    public void removeBeanDefinition(String beanName) throws Exception {
        beanDefinitionMap.remove(beanName);
    }

    @Override
    public BeanDefinition getBeanDefinition(String beanName) throws Exception {
        return beanDefinitionMap.get(beanName);
    }

    @Override
    public boolean containsBeanDefinition(String beanName) {
        return beanDefinitionMap.containsKey(beanName);
    }

    @Override
    public int getBeanDefinitionCount() {
        return beanDefinitionMap.size();
    }

    @Override
    public String[] getBeanDefinitionNames() {
        return beanDefinitionMap.keySet().toArray(new String[1]);
    }
}
\`\`\`

### 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B

#### 7.4.3.1 BeanDefinitionReader \u63A5\u53E3

BeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A

- \u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002
- \u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002

\`\`\`java
public interface BeanDefinitionReader {

	//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61
    BeanDefinitionRegistry getRegistry();
	//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C
    void loadBeanDefinitions(String configLocation) throws Exception;
}
\`\`\`

#### 7.4.3.2 XmlBeanDefinitionReader \u7C7B

XmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002

\`\`\`java
public class XmlBeanDefinitionReader implements BeanDefinitionReader {

    private BeanDefinitionRegistry registry;

    public XmlBeanDefinitionReader() {
        this.registry = new SimpleBeanDefinitionRegistry();
    }

    @Override
    public BeanDefinitionRegistry getRegistry() {
        return registry;
    }

    @Override
    public void loadBeanDefinitions(String configLocation) throws Exception {

        InputStream is = this.getClass().getClassLoader().getResourceAsStream(configLocation);
        SAXReader reader = new SAXReader();
        Document document = reader.read(is);
        Element rootElement = document.getRootElement();
        //\u89E3\u6790bean\u6807\u7B7E
        parseBean(rootElement);
    }

    private void parseBean(Element rootElement) {

        List<Element> elements = rootElement.elements();
        for (Element element : elements) {
            String id = element.attributeValue("id");
            String className = element.attributeValue("class");
            BeanDefinition beanDefinition = new BeanDefinition();
            beanDefinition.setId(id);
            beanDefinition.setClassName(className);
            List<Element> list = element.elements("property");
            MutablePropertyValues mutablePropertyValues = new MutablePropertyValues();
            for (Element element1 : list) {
                String name = element1.attributeValue("name");
                String ref = element1.attributeValue("ref");
                String value = element1.attributeValue("value");
                PropertyValue propertyValue = new PropertyValue(name,ref,value);
                mutablePropertyValues.addPropertyValue(propertyValue);
            }
            beanDefinition.setPropertyValues(mutablePropertyValues);

            registry.registerBeanDefinition(id,beanDefinition);
        }
    }
}
\`\`\`

### 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B

#### 7.4.4.1 BeanFactory \u63A5\u53E3

\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002

\`\`\`java
public interface BeanFactory {
	//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61
    Object getBean(String name) throws Exception;
	//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362
    <T> T getBean(String name, Class<? extends T> clazz) throws Exception;
}
\`\`\`

#### 7.4.4.2 ApplicationContext \u63A5\u53E3

\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 \`refresh()\` \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A

- \u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002
- \u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002

\`\`\`java
public interface ApplicationContext extends BeanFactory {
	//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA
    void refresh() throws IllegalStateException, Exception;
}
\`\`\`

#### 7.4.4.3 AbstractApplicationContext \u7C7B

- \u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002

- \u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002

  BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002

\`\`\`java
public abstract class AbstractApplicationContext implements ApplicationContext {

    protected BeanDefinitionReader beanDefinitionReader;
    //\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61
    protected Map<String, Object> singletonObjects = new HashMap<String, Object>();

    //\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84
    protected String configLocation;

    public void refresh() throws IllegalStateException, Exception {

        //\u52A0\u8F7DBeanDefinition
        beanDefinitionReader.loadBeanDefinitions(configLocation);

        //\u521D\u59CB\u5316bean
        finishBeanInitialization();
    }

    //bean\u7684\u521D\u59CB\u5316
    private void finishBeanInitialization() throws Exception {
        BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();
        String[] beanNames = registry.getBeanDefinitionNames();

        for (String beanName : beanNames) {
            BeanDefinition beanDefinition = registry.getBeanDefinition(beanName);
            getBean(beanName);
        }
    }
}
\`\`\`

> \u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002

#### 7.4.4.4 ClassPathXmlApplicationContext \u7C7B

\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A

- \u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002
- \u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002
- \u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002

\`\`\`java
public class ClassPathXmlApplicationContext extends AbstractApplicationContext{

    public ClassPathXmlApplicationContext(String configLocation) {
        this.configLocation = configLocation;
        //\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61
        beanDefinitionReader = new XmlBeanDefinitionReader();
        try {
            this.refresh();
        } catch (Exception e) {
        }
    }

    //\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61
    @Override
    public Object getBean(String name) throws Exception {

        //return singletonObjects.get(name);
        Object obj = singletonObjects.get(name);
        if(obj != null) {
            return obj;
        }

        BeanDefinitionRegistry registry = beanDefinitionReader.getRegistry();
        BeanDefinition beanDefinition = registry.getBeanDefinition(name);
        if(beanDefinition == null) {
            return null;
        }
        String className = beanDefinition.getClassName();
        Class<?> clazz = Class.forName(className);
        Object beanObj = clazz.newInstance();
        MutablePropertyValues propertyValues = beanDefinition.getPropertyValues();
        for (PropertyValue propertyValue : propertyValues) {
            String propertyName = propertyValue.getName();
            String value = propertyValue.getValue();
            String ref = propertyValue.getRef();
            if(ref != null && !"".equals(ref)) {

                Object bean = getBean(ref);
                String methodName = StringUtils.getSetterMethodNameByFieldName(propertyName);
                Method[] methods = clazz.getMethods();
                for (Method method : methods) {
                    if(method.getName().equals(methodName)) {
                        method.invoke(beanObj,bean);
                    }
                }
            }

            if(value != null && !"".equals(value)) {
                String methodName = StringUtils.getSetterMethodNameByFieldName(propertyName);
                Method method = clazz.getMethod(methodName, String.class);
                method.invoke(beanObj,value);
            }
        }
        singletonObjects.put(name,beanObj);
        return beanObj;
    }

    @Override
    public <T> T getBean(String name, Class<? extends T> clazz) throws Exception {

        Object bean = getBean(name);
        if(bean != null) {
            return clazz.cast(bean);
        }
        return null;
    }
}
\`\`\`

### 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3

#### 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F

- \u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002
- \u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002
- \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002
- \u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002

spring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002

#### 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219

#### 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165

spring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A

- \u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002
- \u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002
- \u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002
`,contentRendered:`<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
<!-- more -->
<h1 id="_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0" aria-hidden="true">#</a> 1\uFF0C\u8BBE\u8BA1\u6A21\u5F0F\u6982\u8FF0</h1>
<h2 id="_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#_1-1-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F" aria-hidden="true">#</a> 1.1 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u4EA7\u751F\u80CC\u666F</h2>
<p>&quot;\u8BBE\u8BA1\u6A21\u5F0F&quot;\u6700\u521D\u5E76\u4E0D\u662F\u51FA\u73B0\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\uFF0C\u800C\u662F\u88AB\u7528\u4E8E\u5EFA\u7B51\u9886\u57DF\u7684\u8BBE\u8BA1\u4E2D\u3002</p>
<p>1977 \u5E74\u7F8E\u56FD\u8457\u540D\u5EFA\u7B51\u5927\u5E08\u3001\u52A0\u5229\u798F\u5C3C\u4E9A\u5927\u5B66\u4F2F\u514B\u5229\u5206\u6821\u73AF\u5883\u7ED3\u6784\u4E2D\u5FC3\u4E3B\u4EFB<code v-pre>\u514B\u91CC\u65AF\u6258\u592B\xB7\u4E9A\u5386\u5C71\u5927\uFF08Christopher Alexander\uFF09</code>\u5728\u4ED6\u7684\u8457\u4F5C\u300A\u5EFA\u7B51\u6A21\u5F0F\u8BED\u8A00\uFF1A\u57CE\u9547\u3001\u5EFA\u7B51\u3001\u6784\u9020\u300B\u4E2D\u63CF\u8FF0\u4E86\u4E00\u4E9B\u5E38\u89C1\u7684\u5EFA\u7B51\u8BBE\u8BA1\u95EE\u9898\uFF0C\u5E76\u63D0\u51FA\u4E86 253 \u79CD\u5173\u4E8E\u5BF9\u57CE\u9547\u3001\u90BB\u91CC\u3001\u4F4F\u5B85\u3001\u82B1\u56ED\u548C\u623F\u95F4\u7B49\u8FDB\u884C\u8BBE\u8BA1\u7684\u57FA\u672C\u6A21\u5F0F\u3002</p>
<p>1990 \u5E74\u8F6F\u4EF6\u5DE5\u7A0B\u754C\u5F00\u59CB\u7814\u8BA8\u8BBE\u8BA1\u6A21\u5F0F\u7684\u8BDD\u9898\uFF0C\u540E\u6765\u53EC\u5F00\u4E86\u591A\u6B21\u5173\u4E8E\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7814\u8BA8\u4F1A\u3002\u76F4\u5230 1995 \u5E74\uFF0C\u827E\u745E\u514B\xB7\u4F3D\u9A6C\uFF08ErichGamma\uFF09\u3001\u7406\u67FB\u5FB7\xB7\u6D77\u5C14\u59C6\uFF08Richard Helm\uFF09\u3001\u62C9\u5C14\u592B\xB7\u7EA6\u7FF0\u68EE\uFF08Ralph Johnson\uFF09\u3001\u7EA6\u7FF0\xB7\u5A01\u5229\u65AF\u8FEA\u65AF\uFF08John Vlissides\uFF09\u7B49 4 \u4F4D\u4F5C\u8005\u5408\u4F5C\u51FA\u7248\u4E86\u300A\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u53EF\u590D\u7528\u9762\u5411\u5BF9\u8C61\u8F6F\u4EF6\u7684\u57FA\u7840\u300B\u4E00\u4E66\uFF0C\u5728\u6B64\u4E66\u4E2D\u6536\u5F55\u4E86 23 \u4E2A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u8FD9\u662F\u8BBE\u8BA1\u6A21\u5F0F\u9886\u57DF\u91CC\u7A0B\u7891\u7684\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u7A81\u7834\u3002\u8FD9 4 \u4F4D\u4F5C\u8005\u5728\u8F6F\u4EF6\u5F00\u53D1\u9886\u57DF\u91CC\u4E5F\u4EE5\u4ED6\u4EEC\u7684\u201C\u56DB\u4EBA\u7EC4\u201D\uFF08Gang of Four\uFF0CGoF\uFF09\u8457\u79F0\u3002</p>
<h2 id="_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_1-2-\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5" aria-hidden="true">#</a> 1.2 \u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\u7684\u6982\u5FF5</h2>
<p>\u8F6F\u4EF6\u8BBE\u8BA1\u6A21\u5F0F\uFF08Software Design Pattern\uFF09\uFF0C\u53C8\u79F0\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u662F\u4E00\u5957\u88AB\u53CD\u590D\u4F7F\u7528\u3001\u591A\u6570\u4EBA\u77E5\u6653\u7684\u3001\u7ECF\u8FC7\u5206\u7C7B\u7F16\u76EE\u7684\u3001\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\u3002\u5B83\u63CF\u8FF0\u4E86\u5728\u8F6F\u4EF6\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\u7684\u4E00\u4E9B\u4E0D\u65AD\u91CD\u590D\u53D1\u751F\u7684\u95EE\u9898\uFF0C\u4EE5\u53CA\u8BE5\u95EE\u9898\u7684\u89E3\u51B3\u65B9\u6848\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u662F\u89E3\u51B3\u7279\u5B9A\u95EE\u9898\u7684\u4E00\u7CFB\u5217\u5957\u8DEF\uFF0C\u662F\u524D\u8F88\u4EEC\u7684\u4EE3\u7801\u8BBE\u8BA1\u7ECF\u9A8C\u7684\u603B\u7ED3\uFF0C\u5177\u6709\u4E00\u5B9A\u7684\u666E\u904D\u6027\uFF0C\u53EF\u4EE5\u53CD\u590D\u4F7F\u7528\u3002</p>
<h2 id="_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" tabindex="-1"><a class="header-anchor" href="#_1-3-\u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027" aria-hidden="true">#</a> 1.3 \u5B66\u4E60\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5FC5\u8981\u6027</h2>
<p>\u8BBE\u8BA1\u6A21\u5F0F\u7684\u672C\u8D28\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u539F\u5219\u7684\u5B9E\u9645\u8FD0\u7528\uFF0C\u662F\u5BF9\u7C7B\u7684\u5C01\u88C5\u6027\u3001\u7EE7\u627F\u6027\u548C\u591A\u6001\u6027\u4EE5\u53CA\u7C7B\u7684\u5173\u8054\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u7684\u5145\u5206\u7406\u89E3\u3002</p>
<p>\u6B63\u786E\u4F7F\u7528\u8BBE\u8BA1\u6A21\u5F0F\u5177\u6709\u4EE5\u4E0B\u4F18\u70B9\u3002</p>
<ul>
<li>\u53EF\u4EE5\u63D0\u9AD8\u7A0B\u5E8F\u5458\u7684\u601D\u7EF4\u80FD\u529B\u3001\u7F16\u7A0B\u80FD\u529B\u548C\u8BBE\u8BA1\u80FD\u529B\u3002</li>
<li>\u4F7F\u7A0B\u5E8F\u8BBE\u8BA1\u66F4\u52A0\u6807\u51C6\u5316\u3001\u4EE3\u7801\u7F16\u5236\u66F4\u52A0\u5DE5\u7A0B\u5316\uFF0C\u4F7F\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u5927\u5927\u63D0\u9AD8\uFF0C\u4ECE\u800C\u7F29\u77ED\u8F6F\u4EF6\u7684\u5F00\u53D1\u5468\u671F\u3002</li>
<li>\u4F7F\u8BBE\u8BA1\u7684\u4EE3\u7801\u53EF\u91CD\u7528\u6027\u9AD8\u3001\u53EF\u8BFB\u6027\u5F3A\u3001\u53EF\u9760\u6027\u9AD8\u3001\u7075\u6D3B\u6027\u597D\u3001\u53EF\u7EF4\u62A4\u6027\u5F3A\u3002</li>
</ul>
<h2 id="_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1-4-\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B" aria-hidden="true">#</a> 1.4 \u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B</h2>
<ul>
<li>
<p><strong>\u521B\u5EFA\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u5355\u4F8B\u3001\u539F\u578B\u3001\u5DE5\u5382\u65B9\u6CD5\u3001\u62BD\u8C61\u5DE5\u5382\u3001\u5EFA\u9020\u8005\u7B49 5 \u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\u3002</p>
</li>
<li>
<p><strong>\u7ED3\u6784\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\uFF0CGoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u4EE3\u7406\u3001\u9002\u914D\u5668\u3001\u6865\u63A5\u3001\u88C5\u9970\u3001\u5916\u89C2\u3001\u4EAB\u5143\u3001\u7EC4\u5408\u7B49 7 \u79CD\u7ED3\u6784\u578B\u6A21\u5F0F\u3002</p>
</li>
<li>
<p><strong>\u884C\u4E3A\u578B\u6A21\u5F0F</strong></p>
<p>\u7528\u4E8E\u63CF\u8FF0\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u4EE5\u53CA\u600E\u6837\u5206\u914D\u804C\u8D23\u3002GoF\uFF08\u56DB\u4EBA\u7EC4\uFF09\u4E66\u4E2D\u63D0\u4F9B\u4E86\u6A21\u677F\u65B9\u6CD5\u3001\u7B56\u7565\u3001\u547D\u4EE4\u3001\u804C\u8D23\u94FE\u3001\u72B6\u6001\u3001\u89C2\u5BDF\u8005\u3001\u4E2D\u4ECB\u8005\u3001\u8FED\u4EE3\u5668\u3001\u8BBF\u95EE\u8005\u3001\u5907\u5FD8\u5F55\u3001\u89E3\u91CA\u5668\u7B49 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p>
</li>
</ul>
<h1 id="_2-uml-\u56FE" tabindex="-1"><a class="header-anchor" href="#_2-uml-\u56FE" aria-hidden="true">#</a> 2\uFF0CUML \u56FE</h1>
<p>\u7EDF\u4E00\u5EFA\u6A21\u8BED\u8A00\uFF08Unified Modeling Language\uFF0CUML\uFF09\u662F\u7528\u6765\u8BBE\u8BA1\u8F6F\u4EF6\u7684\u53EF\u89C6\u5316\u5EFA\u6A21\u8BED\u8A00\u3002\u5B83\u7684\u7279\u70B9\u662F\u7B80\u5355\u3001\u7EDF\u4E00\u3001\u56FE\u5F62\u5316\u3001\u80FD\u8868\u8FBE\u8F6F\u4EF6\u8BBE\u8BA1\u4E2D\u7684\u52A8\u6001\u4E0E\u9759\u6001\u4FE1\u606F\u3002</p>
<p>UML \u4ECE\u76EE\u6807\u7CFB\u7EDF\u7684\u4E0D\u540C\u89D2\u5EA6\u51FA\u53D1\uFF0C\u5B9A\u4E49\u4E86\u7528\u4F8B\u56FE\u3001\u7C7B\u56FE\u3001\u5BF9\u8C61\u56FE\u3001\u72B6\u6001\u56FE\u3001\u6D3B\u52A8\u56FE\u3001\u65F6\u5E8F\u56FE\u3001\u534F\u4F5C\u56FE\u3001\u6784\u4EF6\u56FE\u3001\u90E8\u7F72\u56FE\u7B49 9 \u79CD\u56FE\u3002</p>
<h2 id="_2-1-\u7C7B\u56FE\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_2-1-\u7C7B\u56FE\u6982\u8FF0" aria-hidden="true">#</a> 2.1 \u7C7B\u56FE\u6982\u8FF0</h2>
<p>\u7C7B\u56FE(Class diagram)\u662F\u663E\u793A\u4E86\u6A21\u578B\u7684\u9759\u6001\u7ED3\u6784\uFF0C\u7279\u522B\u662F\u6A21\u578B\u4E2D\u5B58\u5728\u7684\u7C7B\u3001\u7C7B\u7684\u5185\u90E8\u7ED3\u6784\u4EE5\u53CA\u5B83\u4EEC\u4E0E\u5176\u4ED6\u7C7B\u7684\u5173\u7CFB\u7B49\u3002\u7C7B\u56FE\u4E0D\u663E\u793A\u6682\u65F6\u6027\u7684\u4FE1\u606F\u3002\u7C7B\u56FE\u662F\u9762\u5411\u5BF9\u8C61\u5EFA\u6A21\u7684\u4E3B\u8981\u7EC4\u6210\u90E8\u5206\u3002</p>
<h2 id="_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_2-2-\u7C7B\u56FE\u7684\u4F5C\u7528" aria-hidden="true">#</a> 2.2 \u7C7B\u56FE\u7684\u4F5C\u7528</h2>
<ul>
<li>\u5728\u8F6F\u4EF6\u5DE5\u7A0B\u4E2D\uFF0C\u7C7B\u56FE\u662F\u4E00\u79CD\u9759\u6001\u7684\u7ED3\u6784\u56FE\uFF0C\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u7684\u7C7B\u7684\u96C6\u5408\uFF0C\u7C7B\u7684\u5C5E\u6027\u548C\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u53EF\u4EE5\u7B80\u5316\u4E86\u4EBA\u4EEC\u5BF9\u7CFB\u7EDF\u7684\u7406\u89E3\uFF1B</li>
<li>\u7C7B\u56FE\u662F\u7CFB\u7EDF\u5206\u6790\u548C\u8BBE\u8BA1\u9636\u6BB5\u7684\u91CD\u8981\u4EA7\u7269\uFF0C\u662F\u7CFB\u7EDF\u7F16\u7801\u548C\u6D4B\u8BD5\u7684\u91CD\u8981\u6A21\u578B\u3002</li>
</ul>
<h2 id="_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2-3-\u7C7B\u56FE\u8868\u793A\u6CD5" aria-hidden="true">#</a> 2.3 \u7C7B\u56FE\u8868\u793A\u6CD5</h2>
<h3 id="_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-1-\u7C7B\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.1 \u7C7B\u7684\u8868\u793A\u65B9\u5F0F</h3>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7C7B\u4F7F\u7528\u5305\u542B\u7C7B\u540D\u3001\u5C5E\u6027(field) \u548C\u65B9\u6CD5(method) \u4E14\u5E26\u6709\u5206\u5272\u7EBF\u7684\u77E9\u5F62\u6765\u8868\u793A\uFF0C\u6BD4\u5982\u4E0B\u56FE\u8868\u793A\u4E00\u4E2A Employee \u7C7B\uFF0C\u5B83\u5305\u542B name,age \u548C address \u8FD9 3 \u4E2A\u5C5E\u6027\uFF0C\u4EE5\u53CA work()\u65B9\u6CD5\u3002</p>
<p><img src="\\img\\Employee.jpg" alt=""></p>
<p>\u5C5E\u6027/\u65B9\u6CD5\u540D\u79F0\u524D\u52A0\u7684\u52A0\u53F7\u548C\u51CF\u53F7\u8868\u793A\u4E86\u8FD9\u4E2A\u5C5E\u6027/\u65B9\u6CD5\u7684\u53EF\u89C1\u6027\uFF0CUML \u7C7B\u56FE\u4E2D\u8868\u793A\u53EF\u89C1\u6027\u7684\u7B26\u53F7\u6709\u4E09\u79CD\uFF1A</p>
<ul>
<li>
<p>+\uFF1A\u8868\u793A public</p>
</li>
<li>
<p>-\uFF1A\u8868\u793A private</p>
</li>
<li>
<p>#\uFF1A\u8868\u793A protected</p>
</li>
</ul>
<p>\u5C5E\u6027\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0 \uFF1A\u7C7B\u578B [ = \u7F3A\u7701\u503C]</strong></p>
<p>\u65B9\u6CD5\u7684\u5B8C\u6574\u8868\u793A\u65B9\u5F0F\u662F\uFF1A <strong>\u53EF\u89C1\u6027 \u540D\u79F0(\u53C2\u6570\u5217\u8868) [ \uFF1A \u8FD4\u56DE\u7C7B\u578B]</strong></p>
<blockquote>
<p>\u6CE8\u610F\uFF1A</p>
<p>\u200B 1\uFF0C\u4E2D\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u8868\u793A\u662F\u53EF\u9009\u7684</p>
<p>\u200B 2\uFF0C\u4E5F\u6709\u5C06\u7C7B\u578B\u653E\u5728\u53D8\u91CF\u540D\u524D\u9762\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u653E\u5728\u65B9\u6CD5\u540D\u524D\u9762</p>
</blockquote>
<p><strong>\u4E3E\u4E2A\u6817\u5B50\uFF1A</strong></p>
<p><img src="\\img\\demo.png" alt=""></p>
<p>\u4E0A\u56FE Demo \u7C7B\u5B9A\u4E49\u4E86\u4E09\u4E2A\u65B9\u6CD5\uFF1A</p>
<ul>
<li>method()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A public\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u6CA1\u6709\u8FD4\u56DE\u503C\u3002</li>
<li>method1()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A private\uFF0C\u6CA1\u6709\u53C2\u6570\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A String\u3002</li>
<li>method2()\u65B9\u6CD5\uFF1A\u4FEE\u9970\u7B26\u4E3A protected\uFF0C\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A int\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7C7B\u578B\u4E3A String\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u662F int\u3002</li>
</ul>
<h3 id="_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-2-\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F" aria-hidden="true">#</a> 2.3.2 \u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u5173\u7CFB\u7684\u8868\u793A\u65B9\u5F0F</h3>
<h4 id="_2-3-2-1-\u5173\u8054\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-1-\u5173\u8054\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.1 \u5173\u8054\u5173\u7CFB</h4>
<p>\u5173\u8054\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E00\u79CD\u5F15\u7528\u5173\u7CFB\uFF0C\u7528\u4E8E\u8868\u793A\u4E00\u7C7B\u5BF9\u8C61\u4E0E\u53E6\u4E00\u7C7B\u5BF9\u8C61\u4E4B\u95F4\u7684\u8054\u7CFB\uFF0C\u5982\u8001\u5E08\u548C\u5B66\u751F\u3001\u5E08\u5085\u548C\u5F92\u5F1F\u3001\u4E08\u592B\u548C\u59BB\u5B50\u7B49\u3002\u5173\u8054\u5173\u7CFB\u662F\u7C7B\u4E0E\u7C7B\u4E4B\u95F4\u6700\u5E38\u7528\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u5206\u4E3A\u4E00\u822C\u5173\u8054\u5173\u7CFB\u3001\u805A\u5408\u5173\u7CFB\u548C\u7EC4\u5408\u5173\u7CFB\u3002\u6211\u4EEC\u5148\u4ECB\u7ECD\u4E00\u822C\u5173\u8054\u3002</p>
<p>\u5173\u8054\u53C8\u53EF\u4EE5\u5206\u4E3A\u5355\u5411\u5173\u8054\uFF0C\u53CC\u5411\u5173\u8054\uFF0C\u81EA\u5173\u8054\u3002</p>
<p><strong>1\uFF0C\u5355\u5411\u5173\u8054</strong></p>
<p><img src="\\img\\customer_address.png" alt=""></p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\u5355\u5411\u5173\u8054\u7528\u4E00\u4E2A\u5E26\u7BAD\u5934\u7684\u5B9E\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u8868\u793A\u6BCF\u4E2A\u987E\u5BA2\u90FD\u6709\u4E00\u4E2A\u5730\u5740\uFF0C\u8FD9\u901A\u8FC7\u8BA9 Customer \u7C7B\u6301\u6709\u4E00\u4E2A\u7C7B\u578B\u4E3A Address \u7684\u6210\u5458\u53D8\u91CF\u7C7B\u5B9E\u73B0\u3002</p>
<p><strong>2\uFF0C\u53CC\u5411\u5173\u8054</strong></p>
<p><img src="\\img\\customer_product.png" alt=""></p>
<p>\u4ECE\u4E0A\u56FE\u4E2D\u6211\u4EEC\u5F88\u5BB9\u6613\u770B\u51FA\uFF0C\u6240\u8C13\u7684\u53CC\u5411\u5173\u8054\u5C31\u662F\u53CC\u65B9\u5404\u81EA\u6301\u6709\u5BF9\u65B9\u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u53CC\u5411\u5173\u8054\u7528\u4E00\u4E2A\u4E0D\u5E26\u7BAD\u5934\u7684\u76F4\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u4E2D\u5728 Customer \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A List&lt;Product&gt;\uFF0C\u8868\u793A\u4E00\u4E2A\u987E\u5BA2\u53EF\u4EE5\u8D2D\u4E70\u591A\u4E2A\u5546\u54C1\uFF1B\u5728 Product \u7C7B\u4E2D\u7EF4\u62A4\u4E00\u4E2A Customer \u7C7B\u578B\u7684\u6210\u5458\u53D8\u91CF\u8868\u793A\u8FD9\u4E2A\u4EA7\u54C1\u88AB\u54EA\u4E2A\u987E\u5BA2\u6240\u8D2D\u4E70\u3002</p>
<p><strong>3\uFF0C\u81EA\u5173\u8054</strong></p>
<p><img src="\\img\\node.png" alt=""></p>
<p>\u81EA\u5173\u8054\u5728 UML \u7C7B\u56FE\u4E2D\u7528\u4E00\u4E2A\u5E26\u6709\u7BAD\u5934\u4E14\u6307\u5411\u81EA\u8EAB\u7684\u7EBF\u8868\u793A\u3002\u4E0A\u56FE\u7684\u610F\u601D\u5C31\u662F Node \u7C7B\u5305\u542B\u7C7B\u578B\u4E3A Node \u7684\u6210\u5458\u53D8\u91CF\uFF0C\u4E5F\u5C31\u662F\u201C\u81EA\u5DF1\u5305\u542B\u81EA\u5DF1\u201D\u3002</p>
<h4 id="_2-3-2-2-\u805A\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-2-\u805A\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.2 \u805A\u5408\u5173\u7CFB</h4>
<p>\u805A\u5408\u5173\u7CFB\u662F\u5173\u8054\u5173\u7CFB\u7684\u4E00\u79CD\uFF0C\u662F\u5F3A\u5173\u8054\u5173\u7CFB\uFF0C\u662F\u6574\u4F53\u548C\u90E8\u5206\u4E4B\u95F4\u7684\u5173\u7CFB\u3002</p>
<p>\u805A\u5408\u5173\u7CFB\u4E5F\u662F\u901A\u8FC7\u6210\u5458\u5BF9\u8C61\u6765\u5B9E\u73B0\u7684\uFF0C\u5176\u4E2D\u6210\u5458\u5BF9\u8C61\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u662F\u6210\u5458\u5BF9\u8C61\u53EF\u4EE5\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u72EC\u7ACB\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5B66\u6821\u4E0E\u8001\u5E08\u7684\u5173\u7CFB\uFF0C\u5B66\u6821\u5305\u542B\u8001\u5E08\uFF0C\u4F46\u5982\u679C\u5B66\u6821\u505C\u529E\u4E86\uFF0C\u8001\u5E08\u4F9D\u7136\u5B58\u5728\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u805A\u5408\u5173\u7CFB\u53EF\u4EE5\u7528\u5E26\u7A7A\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5927\u5B66\u548C\u6559\u5E08\u7684\u5173\u7CFB\u56FE\uFF1A</p>
<p><img src="\\img\\image-20191229173422328.png" alt=""></p>
<h4 id="_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-3-\u7EC4\u5408\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.3 \u7EC4\u5408\u5173\u7CFB</h4>
<p>\u7EC4\u5408\u8868\u793A\u7C7B\u4E4B\u95F4\u7684\u6574\u4F53\u4E0E\u90E8\u5206\u7684\u5173\u7CFB\uFF0C\u4F46\u5B83\u662F\u4E00\u79CD\u66F4\u5F3A\u70C8\u7684\u805A\u5408\u5173\u7CFB\u3002</p>
<p>\u5728\u7EC4\u5408\u5173\u7CFB\u4E2D\uFF0C\u6574\u4F53\u5BF9\u8C61\u53EF\u4EE5\u63A7\u5236\u90E8\u5206\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\uFF0C\u4E00\u65E6\u6574\u4F53\u5BF9\u8C61\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0C\u90E8\u5206\u5BF9\u8C61\u4E0D\u80FD\u8131\u79BB\u6574\u4F53\u5BF9\u8C61\u800C\u5B58\u5728\u3002\u4F8B\u5982\uFF0C\u5934\u548C\u5634\u7684\u5173\u7CFB\uFF0C\u6CA1\u6709\u4E86\u5934\uFF0C\u5634\u4E5F\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u7EC4\u5408\u5173\u7CFB\u7528\u5E26\u5B9E\u5FC3\u83F1\u5F62\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u83F1\u5F62\u6307\u5411\u6574\u4F53\u3002\u4E0B\u56FE\u6240\u793A\u662F\u5934\u548C\u5634\u7684\u5173\u7CFB\u56FE\uFF1A</p>
<p><img src="\\img\\image-20191229173455149.png" alt=""></p>
<h4 id="_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-4-\u4F9D\u8D56\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.4 \u4F9D\u8D56\u5173\u7CFB</h4>
<p>\u4F9D\u8D56\u5173\u7CFB\u662F\u4E00\u79CD\u4F7F\u7528\u5173\u7CFB\uFF0C\u5B83\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5F31\u7684\u4E00\u79CD\u5173\u8054\u65B9\u5F0F\uFF0C\u662F\u4E34\u65F6\u6027\u7684\u5173\u8054\u3002\u5728\u4EE3\u7801\u4E2D\uFF0C\u67D0\u4E2A\u7C7B\u7684\u65B9\u6CD5\u901A\u8FC7\u5C40\u90E8\u53D8\u91CF\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u6216\u8005\u5BF9\u9759\u6001\u65B9\u6CD5\u7684\u8C03\u7528\u6765\u8BBF\u95EE\u53E6\u4E00\u4E2A\u7C7B\uFF08\u88AB\u4F9D\u8D56\u7C7B\uFF09\u4E2D\u7684\u67D0\u4E9B\u65B9\u6CD5\u6765\u5B8C\u6210\u4E00\u4E9B\u804C\u8D23\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u4F9D\u8D56\u5173\u7CFB\u4F7F\u7528\u5E26\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u4F7F\u7528\u7C7B\u6307\u5411\u88AB\u4F9D\u8D56\u7684\u7C7B\u3002\u4E0B\u56FE\u6240\u793A\u662F\u53F8\u673A\u548C\u6C7D\u8F66\u7684\u5173\u7CFB\u56FE\uFF0C\u53F8\u673A\u9A7E\u9A76\u6C7D\u8F66\uFF1A</p>
<p><img src="\\img\\image-20191229173518926.png" alt=""></p>
<h4 id="_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-5-\u7EE7\u627F\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.5 \u7EE7\u627F\u5173\u7CFB</h4>
<p>\u7EE7\u627F\u5173\u7CFB\u662F\u5BF9\u8C61\u4E4B\u95F4\u8026\u5408\u5EA6\u6700\u5927\u7684\u4E00\u79CD\u5173\u7CFB\uFF0C\u8868\u793A\u4E00\u822C\u4E0E\u7279\u6B8A\u7684\u5173\u7CFB\uFF0C\u662F\u7236\u7C7B\u4E0E\u5B50\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u662F\u4E00\u79CD\u7EE7\u627F\u5173\u7CFB\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u6CDB\u5316\u5173\u7CFB\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u5B9E\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B50\u7C7B\u6307\u5411\u7236\u7C7B\u3002\u5728\u4EE3\u7801\u5B9E\u73B0\u65F6\uFF0C\u4F7F\u7528\u9762\u5411\u5BF9\u8C61\u7684\u7EE7\u627F\u673A\u5236\u6765\u5B9E\u73B0\u6CDB\u5316\u5173\u7CFB\u3002\u4F8B\u5982\uFF0CStudent \u7C7B\u548C Teacher \u7C7B\u90FD\u662F Person \u7C7B\u7684\u5B50\u7C7B\uFF0C\u5176\u7C7B\u56FE\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p>
<p><img src="\\img\\image-20191229173539838.png" alt=""></p>
<h4 id="_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_2-3-2-6-\u5B9E\u73B0\u5173\u7CFB" aria-hidden="true">#</a> 2.3.2.6 \u5B9E\u73B0\u5173\u7CFB</h4>
<p>\u5B9E\u73B0\u5173\u7CFB\u662F\u63A5\u53E3\u4E0E\u5B9E\u73B0\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u5728\u8FD9\u79CD\u5173\u7CFB\u4E2D\uFF0C\u7C7B\u5B9E\u73B0\u4E86\u63A5\u53E3\uFF0C\u7C7B\u4E2D\u7684\u64CD\u4F5C\u5B9E\u73B0\u4E86\u63A5\u53E3\u4E2D\u6240\u58F0\u660E\u7684\u6240\u6709\u7684\u62BD\u8C61\u64CD\u4F5C\u3002</p>
<p>\u5728 UML \u7C7B\u56FE\u4E2D\uFF0C\u5B9E\u73B0\u5173\u7CFB\u4F7F\u7528\u5E26\u7A7A\u5FC3\u4E09\u89D2\u7BAD\u5934\u7684\u865A\u7EBF\u6765\u8868\u793A\uFF0C\u7BAD\u5934\u4ECE\u5B9E\u73B0\u7C7B\u6307\u5411\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u6C7D\u8F66\u548C\u8239\u5B9E\u73B0\u4E86\u4EA4\u901A\u5DE5\u5177\uFF0C\u5176\u7C7B\u56FE\u5982\u56FE 9 \u6240\u793A\u3002</p>
<p><img src="\\img\\image-20191229173554296.png" alt=""></p>
<h1 id="_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 3\uFF0C\u8F6F\u4EF6\u8BBE\u8BA1\u539F\u5219</h1>
<p>\u5728\u8F6F\u4EF6\u5F00\u53D1\u4E2D\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u8F6F\u4EF6\u7CFB\u7EDF\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u53EF\u590D\u7528\u6027\uFF0C\u589E\u52A0\u8F6F\u4EF6\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF0C\u7A0B\u5E8F\u5458\u8981\u5C3D\u91CF\u6839\u636E 6 \u6761\u539F\u5219\u6765\u5F00\u53D1\u7A0B\u5E8F\uFF0C\u4ECE\u800C\u63D0\u9AD8\u8F6F\u4EF6\u5F00\u53D1\u6548\u7387\u3001\u8282\u7EA6\u8F6F\u4EF6\u5F00\u53D1\u6210\u672C\u548C\u7EF4\u62A4\u6210\u672C\u3002</p>
<h2 id="_3-1-\u5F00\u95ED\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-1-\u5F00\u95ED\u539F\u5219" aria-hidden="true">#</a> 3.1 \u5F00\u95ED\u539F\u5219</h2>
<p><strong>\u5BF9\u6269\u5C55\u5F00\u653E\uFF0C\u5BF9\u4FEE\u6539\u5173\u95ED</strong>\u3002\u5728\u7A0B\u5E8F\u9700\u8981\u8FDB\u884C\u62D3\u5C55\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u53BB\u4FEE\u6539\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u5B9E\u73B0\u4E00\u4E2A\u70ED\u63D2\u62D4\u7684\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u662F\u4E3A\u4E86\u4F7F\u7A0B\u5E8F\u7684\u6269\u5C55\u6027\u597D\uFF0C\u6613\u4E8E\u7EF4\u62A4\u548C\u5347\u7EA7\u3002</p>
<p>\u60F3\u8981\u8FBE\u5230\u8FD9\u6837\u7684\u6548\u679C\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u63A5\u53E3\u548C\u62BD\u8C61\u7C7B\u3002</p>
<p>\u56E0\u4E3A\u62BD\u8C61\u7075\u6D3B\u6027\u597D\uFF0C\u9002\u5E94\u6027\u5E7F\uFF0C\u53EA\u8981\u62BD\u8C61\u7684\u5408\u7406\uFF0C\u53EF\u4EE5\u57FA\u672C\u4FDD\u6301\u8F6F\u4EF6\u67B6\u6784\u7684\u7A33\u5B9A\u3002\u800C\u8F6F\u4EF6\u4E2D\u6613\u53D8\u7684\u7EC6\u8282\u53EF\u4EE5\u4ECE\u62BD\u8C61\u6D3E\u751F\u6765\u7684\u5B9E\u73B0\u7C7B\u6765\u8FDB\u884C\u6269\u5C55\uFF0C\u5F53\u8F6F\u4EF6\u9700\u8981\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u53EA\u9700\u8981\u6839\u636E\u9700\u6C42\u91CD\u65B0\u6D3E\u751F\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u6765\u6269\u5C55\u5C31\u53EF\u4EE5\u4E86\u3002</p>
<p>\u4E0B\u9762\u4EE5 <code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u4E3A\u4F8B\u4ECB\u7ECD\u5F00\u95ED\u539F\u5219\u7684\u5E94\u7528\u3002</p>
<p>\u3010\u4F8B\u3011<code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u8BBE\u8BA1\u3002</p>
<p>\u5206\u6790\uFF1A<code v-pre>\u641C\u72D7\u8F93\u5165\u6CD5</code> \u7684\u76AE\u80A4\u662F\u8F93\u5165\u6CD5\u80CC\u666F\u56FE\u7247\u3001\u7A97\u53E3\u989C\u8272\u548C\u58F0\u97F3\u7B49\u5143\u7D20\u7684\u7EC4\u5408\u3002\u7528\u6237\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u7231\u66F4\u6362\u81EA\u5DF1\u7684\u8F93\u5165\u6CD5\u7684\u76AE\u80A4\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u7F51\u4E0A\u4E0B\u8F7D\u65B0\u7684\u76AE\u80A4\u3002\u8FD9\u4E9B\u76AE\u80A4\u6709\u5171\u540C\u7684\u7279\u70B9\uFF0C\u53EF\u4EE5\u4E3A\u5176\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF08AbstractSkin\uFF09\uFF0C\u800C\u6BCF\u4E2A\u5177\u4F53\u7684\u76AE\u80A4\uFF08DefaultSpecificSkin \u548C HeimaSpecificSkin\uFF09\u662F\u5176\u5B50\u7C7B\u3002\u7528\u6237\u7A97\u4F53\u53EF\u4EE5\u6839\u636E\u9700\u8981\u9009\u62E9\u6216\u8005\u589E\u52A0\u65B0\u7684\u4E3B\u9898\uFF0C\u800C\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u4EE3\u7801\uFF0C\u6240\u4EE5\u5B83\u662F\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u7684\u3002</p>
<p><img src="\\img\\open-close.png" alt=""></p>
<h2 id="_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-2-\u91CC\u6C0F\u4EE3\u6362\u539F\u5219" aria-hidden="true">#</a> 3.2 \u91CC\u6C0F\u4EE3\u6362\u539F\u5219</h2>
<p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\u662F\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u7684\u57FA\u672C\u539F\u5219\u4E4B\u4E00\u3002</p>
<p>\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF1A\u4EFB\u4F55\u57FA\u7C7B\u53EF\u4EE5\u51FA\u73B0\u7684\u5730\u65B9\uFF0C\u5B50\u7C7B\u4E00\u5B9A\u53EF\u4EE5\u51FA\u73B0\u3002\u901A\u4FD7\u7406\u89E3\uFF1A\u5B50\u7C7B\u53EF\u4EE5\u6269\u5C55\u7236\u7C7B\u7684\u529F\u80FD\uFF0C\u4F46\u4E0D\u80FD\u6539\u53D8\u7236\u7C7B\u539F\u6709\u7684\u529F\u80FD\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B50\u7C7B\u7EE7\u627F\u7236\u7C7B\u65F6\uFF0C\u9664\u6DFB\u52A0\u65B0\u7684\u65B9\u6CD5\u5B8C\u6210\u65B0\u589E\u529F\u80FD\u5916\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u3002</p>
<p>\u5982\u679C\u901A\u8FC7\u91CD\u5199\u7236\u7C7B\u7684\u65B9\u6CD5\u6765\u5B8C\u6210\u65B0\u7684\u529F\u80FD\uFF0C\u8FD9\u6837\u5199\u8D77\u6765\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u6574\u4E2A\u7EE7\u627F\u4F53\u7CFB\u7684\u53EF\u590D\u7528\u6027\u4F1A\u6BD4\u8F83\u5DEE\uFF0C\u7279\u522B\u662F\u8FD0\u7528\u591A\u6001\u6BD4\u8F83\u9891\u7E41\u65F6\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u51FA\u9519\u7684\u6982\u7387\u4F1A\u975E\u5E38\u5927\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u91CC\u6C0F\u66FF\u6362\u539F\u5219\u4E2D\u7ECF\u5178\u7684\u4E00\u4E2A\u4F8B\u5B50</p>
<p>\u3010\u4F8B\u3011\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p>
<p>\u5728\u6570\u5B66\u9886\u57DF\u91CC\uFF0C\u6B63\u65B9\u5F62\u6BEB\u65E0\u7591\u95EE\u662F\u957F\u65B9\u5F62\uFF0C\u5B83\u662F\u4E00\u4E2A\u957F\u5BBD\u76F8\u7B49\u7684\u957F\u65B9\u5F62\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5F00\u53D1\u7684\u4E00\u4E2A\u4E0E\u51E0\u4F55\u56FE\u5F62\u76F8\u5173\u7684\u8F6F\u4EF6\u7CFB\u7EDF\uFF0C\u5C31\u53EF\u4EE5\u987A\u7406\u6210\u7AE0\u7684\u8BA9\u6B63\u65B9\u5F62\u7EE7\u627F\u81EA\u957F\u65B9\u5F62\u3002</p>
<p><img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u957F\u65B9\u5F62\u7C7B\uFF08Rectangle\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> length<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> width<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B63\u65B9\u5F62\uFF08Square\uFF09\uFF1A</strong></p>
<p>\u7531\u4E8E\u6B63\u65B9\u5F62\u7684\u957F\u548C\u5BBD\u76F8\u540C\uFF0C\u6240\u4EE5\u5728\u65B9\u6CD5 setLength \u548C setWidth \u4E2D\uFF0C\u5BF9\u957F\u5EA6\u548C\u5BBD\u5EA6\u90FD\u9700\u8981\u8D4B\u76F8\u540C\u503C\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B RectangleDemo \u662F\u6211\u4EEC\u7684\u8F6F\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u7EC4\u4EF6\uFF0C\u5B83\u6709\u4E00\u4E2A resize \u65B9\u6CD5\u4F9D\u8D56\u57FA\u7C7B Rectangle\uFF0Cresize \u65B9\u6CD5\u662F RectandleDemo \u7C7B\u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u5B9E\u73B0\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RectangleDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6253\u5370\u957F\u65B9\u5F62\u7684\u957F\u548C\u5BBD</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Rectangle</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"============"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Rectangle</span> rectangle1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle1<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u8FD0\u884C\u4E00\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u5C31\u4F1A\u53D1\u73B0\uFF0C\u5047\u5982\u6211\u4EEC\u628A\u4E00\u4E2A\u666E\u901A\u957F\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\uFF0C\u5C31\u4F1A\u770B\u5230\u957F\u65B9\u5F62\u5BBD\u5EA6\u9010\u6E10\u589E\u957F\u7684\u6548\u679C\uFF0C\u5F53\u5BBD\u5EA6\u5927\u4E8E\u957F\u5EA6,\u4EE3\u7801\u5C31\u4F1A\u505C\u6B62\uFF0C\u8FD9\u79CD\u884C\u4E3A\u7684\u7ED3\u679C\u7B26\u5408\u6211\u4EEC\u7684\u9884\u671F\uFF1B\u5047\u5982\u6211\u4EEC\u518D\u628A\u4E00\u4E2A\u6B63\u65B9\u5F62\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 resize \u65B9\u6CD5\u540E\uFF0C\u5C31\u4F1A\u770B\u5230\u6B63\u65B9\u5F62\u7684\u5BBD\u5EA6\u548C\u957F\u5EA6\u90FD\u5728\u4E0D\u65AD\u589E\u957F\uFF0C\u4EE3\u7801\u4F1A\u4E00\u76F4\u8FD0\u884C\u4E0B\u53BB\uFF0C\u76F4\u81F3\u7CFB\u7EDF\u4EA7\u751F\u6EA2\u51FA\u9519\u8BEF\u3002\u6240\u4EE5\uFF0C\u666E\u901A\u7684\u957F\u65B9\u5F62\u662F\u9002\u5408\u8FD9\u6BB5\u4EE3\u7801\u7684\uFF0C\u6B63\u65B9\u5F62\u4E0D\u9002\u5408\u3002
\u6211\u4EEC\u5F97\u51FA\u7ED3\u8BBA\uFF1A\u5728 resize \u65B9\u6CD5\u4E2D\uFF0CRectangle \u7C7B\u578B\u7684\u53C2\u6570\u662F\u4E0D\u80FD\u88AB Square \u7C7B\u578B\u7684\u53C2\u6570\u6240\u4EE3\u66FF\uFF0C\u5982\u679C\u8FDB\u884C\u4E86\u66FF\u6362\u5C31\u5F97\u4E0D\u5230\u9884\u671F\u7ED3\u679C\u3002\u56E0\u6B64\uFF0CSquare \u7C7B\u548C Rectangle \u7C7B\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u8FDD\u53CD\u4E86\u91CC\u6C0F\u4EE3\u6362\u539F\u5219\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EE7\u627F\u5173\u7CFB\u4E0D\u6210\u7ACB\uFF0C\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u3002</p>
<p>\u5982\u4F55\u6539\u8FDB\u5462\uFF1F\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u62BD\u8C61\u51FA\u6765\u4E00\u4E2A\u56DB\u8FB9\u5F62\u63A5\u53E3(Quadrilateral)\uFF0C\u8BA9 Rectangle \u7C7B\u548C Square \u7C7B\u5B9E\u73B0 Quadrilateral \u63A5\u53E3</p>
<img src="\\img\\\u6B63\u65B9\u5F62\u4E0D\u662F\u957F\u65B9\u5F62\u6539\u8FDB.png" style="zoom:80%;" />
<h2 id="_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4F9D\u8D56\u5012\u8F6C\u539F\u5219" aria-hidden="true">#</a> 3.3 \u4F9D\u8D56\u5012\u8F6C\u539F\u5219</h2>
<p>\u9AD8\u5C42\u6A21\u5757\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u4F4E\u5C42\u6A21\u5757\uFF0C\u4E24\u8005\u90FD\u5E94\u8BE5\u4F9D\u8D56\u5176\u62BD\u8C61\uFF1B\u62BD\u8C61\u4E0D\u5E94\u8BE5\u4F9D\u8D56\u7EC6\u8282\uFF0C\u7EC6\u8282\u5E94\u8BE5\u4F9D\u8D56\u62BD\u8C61\u3002\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u8981\u6C42\u5BF9\u62BD\u8C61\u8FDB\u884C\u7F16\u7A0B\uFF0C\u4E0D\u8981\u5BF9\u5B9E\u73B0\u8FDB\u884C\u7F16\u7A0B\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4E0E\u5B9E\u73B0\u6A21\u5757\u95F4\u7684\u8026\u5408\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u4F9D\u8D56\u5012\u8F6C\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u7EC4\u88C5\u7535\u8111</p>
<p>\u73B0\u8981\u7EC4\u88C5\u4E00\u53F0\u7535\u8111\uFF0C\u9700\u8981\u914D\u4EF6 cpu\uFF0C\u786C\u76D8\uFF0C\u5185\u5B58\u6761\u3002\u53EA\u6709\u8FD9\u4E9B\u914D\u7F6E\u90FD\u6709\u4E86\uFF0C\u8BA1\u7B97\u673A\u624D\u80FD\u6B63\u5E38\u7684\u8FD0\u884C\u3002\u9009\u62E9 cpu \u6709\u5F88\u591A\u9009\u62E9\uFF0C\u5982 Intel\uFF0CAMD \u7B49\uFF0C\u786C\u76D8\u53EF\u4EE5\u9009\u62E9\u5E0C\u6377\uFF0C\u897F\u6570\u7B49\uFF0C\u5185\u5B58\u6761\u53EF\u4EE5\u9009\u62E9\u91D1\u58EB\u987F\uFF0C\u6D77\u76D7\u8239\u7B49\u3002</p>
<p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p>
<img src="\\img\\\u4F9D\u8D56\u5012\u8F6C\u539F\u5219.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u5E0C\u6377\u786C\u76D8\u7C7B\uFF08XiJieHardDisk\uFF09:</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XiJieHardDisk</span> <span class="token keyword">implements</span> <span class="token class-name">HardDisk</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u5E0C\u6377\u786C\u76D8\u5B58\u50A8\u6570\u636E"</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u5E0C\u6377\u5E0C\u6377\u786C\u76D8\u53D6\u6570\u636E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"\u6570\u636E"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Intel \u5904\u7406\u5668\uFF08IntelCpu\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IntelCpu</span> <span class="token keyword">implements</span> <span class="token class-name">Cpu</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528Intel\u5904\u7406\u5668"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91D1\u58EB\u987F\u5185\u5B58\u6761\uFF08KingstonMemory\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KingstonMemory</span> <span class="token keyword">implements</span> <span class="token class-name">Memory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4F7F\u7528\u91D1\u58EB\u987F\u4F5C\u4E3A\u5185\u5B58\u6761"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">IntelCpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">IntelCpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">KingstonMemory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">KingstonMemory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">XiJieHardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">XiJieHardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8BA1\u7B97\u673A\u5DE5\u4F5C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cpu<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> hardDisk<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4ECE\u786C\u76D8\u4E2D\u83B7\u53D6\u7684\u6570\u636E\u4E3A\uFF1A"</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5\u7C7B\uFF08TestComputer\uFF09\uFF1A</strong></p>
<p>\u6D4B\u8BD5\u7C7B\u7528\u6765\u7EC4\u88C5\u7535\u8111\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestComputer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XiJieHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IntelCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KingstonMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        computer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u7EC4\u88C5\u4E86\u4E00\u53F0\u7535\u8111\uFF0C\u4F46\u662F\u4F3C\u4E4E\u7EC4\u88C5\u7684\u7535\u8111\u7684 cpu \u53EA\u80FD\u662F Intel \u7684\uFF0C\u5185\u5B58\u6761\u53EA\u80FD\u662F\u91D1\u58EB\u987F\u7684\uFF0C\u786C\u76D8\u53EA\u80FD\u662F\u5E0C\u6377\u7684\uFF0C\u8FD9\u5BF9\u7528\u6237\u80AF\u5B9A\u662F\u4E0D\u53CB\u597D\u7684\uFF0C\u7528\u6237\u6709\u4E86\u673A\u7BB1\u80AF\u5B9A\u662F\u60F3\u6309\u7167\u81EA\u5DF1\u7684\u559C\u597D\uFF0C\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684\u914D\u4EF6\u3002</p>
<p>\u6839\u636E\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u8FDB\u884C\u6539\u8FDB\uFF1A</p>
<p>\u4EE3\u7801\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 Computer \u7C7B\uFF0C\u8BA9 Computer \u7C7B\u4F9D\u8D56\u62BD\u8C61\uFF08\u5404\u4E2A\u914D\u4EF6\u7684\u63A5\u53E3\uFF09\uFF0C\u800C\u4E0D\u662F\u4F9D\u8D56\u4E8E\u5404\u4E2A\u7EC4\u4EF6\u5177\u4F53\u7684\u5B9E\u73B0\u7C7B\u3002</p>
<p><strong>\u7C7B\u56FE\u5982\u4E0B\uFF1A</strong></p>
<img src="/img/\u4F9D\u8D56\u5012\u8F6C\u539F\u5219\u6539\u8FDB.png" alt="image-20191229173554296" style="zoom:70%;" />
<p><strong>\u7535\u8111\uFF08Computer\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Cpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Memory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">Cpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Memory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">Memory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8BA1\u7B97\u673A\u5DE5\u4F5C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9762\u5411\u5BF9\u8C61\u7684\u5F00\u53D1\u5F88\u597D\u7684\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u62BD\u8C61\u7684\u53D8\u5316\u6982\u7387\u5F88\u5C0F\uFF0C\u8BA9\u7528\u6237\u7A0B\u5E8F\u4F9D\u8D56\u4E8E\u62BD\u8C61\uFF0C\u5B9E\u73B0\u7684\u7EC6\u8282\u4E5F\u4F9D\u8D56\u4E8E\u62BD\u8C61\u3002\u5373\u4F7F\u5B9E\u73B0\u7EC6\u8282\u4E0D\u65AD\u53D8\u52A8\uFF0C\u53EA\u8981\u62BD\u8C61\u4E0D\u53D8\uFF0C\u5BA2\u6237\u7A0B\u5E8F\u5C31\u4E0D\u9700\u8981\u53D8\u5316\u3002\u8FD9\u5927\u5927\u964D\u4F4E\u4E86\u5BA2\u6237\u7A0B\u5E8F\u4E0E\u5B9E\u73B0\u7EC6\u8282\u7684\u8026\u5408\u5EA6\u3002</p>
<h2 id="_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-4-\u63A5\u53E3\u9694\u79BB\u539F\u5219" aria-hidden="true">#</a> 3.4 \u63A5\u53E3\u9694\u79BB\u539F\u5219</h2>
<p>\u5BA2\u6237\u7AEF\u4E0D\u5E94\u8BE5\u88AB\u8FEB\u4F9D\u8D56\u4E8E\u5B83\u4E0D\u4F7F\u7528\u7684\u65B9\u6CD5\uFF1B\u4E00\u4E2A\u7C7B\u5BF9\u53E6\u4E00\u4E2A\u7C7B\u7684\u4F9D\u8D56\u5E94\u8BE5\u5EFA\u7ACB\u5728\u6700\u5C0F\u7684\u63A5\u53E3\u4E0A\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u63A5\u53E3\u9694\u79BB\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u5B89\u5168\u95E8\u6848\u4F8B</p>
<p>\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A<code v-pre>\u9ED1\u9A6C</code>\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u8BE5\u5B89\u5168\u95E8\u5177\u6709\u9632\u706B\u3001\u9632\u6C34\u3001\u9632\u76D7\u7684\u529F\u80FD\u3002\u53EF\u4EE5\u5C06\u9632\u706B\uFF0C\u9632\u6C34\uFF0C\u9632\u76D7\u529F\u80FD\u63D0\u53D6\u6210\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5F62\u6210\u4E00\u5957\u89C4\u8303\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u5219.png" alt=""></p>
<p>\u4E0A\u9762\u7684\u8BBE\u8BA1\u6211\u4EEC\u53D1\u73B0\u4E86\u5B83\u5B58\u5728\u7684\u95EE\u9898\uFF0C\u9ED1\u9A6C\u54C1\u724C\u7684\u5B89\u5168\u95E8\u5177\u6709\u9632\u76D7\uFF0C\u9632\u6C34\uFF0C\u9632\u706B\u7684\u529F\u80FD\u3002\u73B0\u5728\u5982\u679C\u6211\u4EEC\u8FD8\u9700\u8981\u518D\u521B\u5EFA\u4E00\u4E2A\u4F20\u667A\u54C1\u724C\u7684\u5B89\u5168\u95E8\uFF0C\u800C\u8BE5\u5B89\u5168\u95E8\u53EA\u5177\u6709\u9632\u76D7\u3001\u9632\u6C34\u529F\u80FD\u5462\uFF1F\u5F88\u663E\u7136\u5982\u679C\u5B9E\u73B0 SafetyDoor \u63A5\u53E3\u5C31\u8FDD\u80CC\u4E86\u63A5\u53E3\u9694\u79BB\u539F\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5982\u4F55\u8FDB\u884C\u4FEE\u6539\u5462\uFF1F\u770B\u5982\u4E0B\u7C7B\u56FE\uFF1A</p>
<p><img src="\\img\\\u63A5\u53E3\u9694\u79BB\u539F\u52191.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>AntiTheft\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AntiTheft</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fireproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Waterproof\uFF08\u63A5\u53E3\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>HeiMaSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeiMaSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span><span class="token punctuation">,</span><span class="token class-name">Waterproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u76D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u706B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u6C34"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ItcastSafetyDoor\uFF08\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItcastSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u76D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u9632\u706B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" tabindex="-1"><a class="header-anchor" href="#_3-5-\u8FEA\u7C73\u7279\u6CD5\u5219" aria-hidden="true">#</a> 3.5 \u8FEA\u7C73\u7279\u6CD5\u5219</h2>
<p>\u8FEA\u7C73\u7279\u6CD5\u5219\u53C8\u53EB\u6700\u5C11\u77E5\u8BC6\u539F\u5219\u3002</p>
<p>\u53EA\u548C\u4F60\u7684\u76F4\u63A5\u670B\u53CB\u4EA4\u8C08\uFF0C\u4E0D\u8DDF\u201C\u964C\u751F\u4EBA\u201D\u8BF4\u8BDD\uFF08Talk only to your immediate friends and not to strangers\uFF09\u3002</p>
<p>\u5176\u542B\u4E49\u662F\uFF1A\u5982\u679C\u4E24\u4E2A\u8F6F\u4EF6\u5B9E\u4F53\u65E0\u987B\u76F4\u63A5\u901A\u4FE1\uFF0C\u90A3\u4E48\u5C31\u4E0D\u5E94\u5F53\u53D1\u751F\u76F4\u63A5\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u8F6C\u53D1\u8BE5\u8C03\u7528\u3002\u5176\u76EE\u7684\u662F\u964D\u4F4E\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u63D0\u9AD8\u6A21\u5757\u7684\u76F8\u5BF9\u72EC\u7ACB\u6027\u3002</p>
<p>\u8FEA\u7C73\u7279\u6CD5\u5219\u4E2D\u7684\u201C\u670B\u53CB\u201D\u662F\u6307\uFF1A\u5F53\u524D\u5BF9\u8C61\u672C\u8EAB\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u6210\u5458\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u6240\u521B\u5EFA\u7684\u5BF9\u8C61\u3001\u5F53\u524D\u5BF9\u8C61\u7684\u65B9\u6CD5\u53C2\u6570\u7B49\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u540C\u5F53\u524D\u5BF9\u8C61\u5B58\u5728\u5173\u8054\u3001\u805A\u5408\u6216\u7EC4\u5408\u5173\u7CFB\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002</p>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u8FEA\u7C73\u7279\u6CD5\u5219</p>
<p>\u3010\u4F8B\u3011\u660E\u661F\u4E0E\u7ECF\u7EAA\u4EBA\u7684\u5173\u7CFB\u5B9E\u4F8B</p>
<p>\u660E\u661F\u7531\u4E8E\u5168\u8EAB\u5FC3\u6295\u5165\u827A\u672F\uFF0C\u6240\u4EE5\u8BB8\u591A\u65E5\u5E38\u4E8B\u52A1\u7531\u7ECF\u7EAA\u4EBA\u8D1F\u8D23\u5904\u7406\uFF0C\u5982\u548C\u7C89\u4E1D\u7684\u89C1\u9762\u4F1A\uFF0C\u548C\u5A92\u4F53\u516C\u53F8\u7684\u4E1A\u52A1\u6D3D\u6DE1\u7B49\u3002\u8FD9\u91CC\u7684\u7ECF\u7EAA\u4EBA\u662F\u660E\u661F\u7684\u670B\u53CB\uFF0C\u800C\u7C89\u4E1D\u548C\u5A92\u4F53\u516C\u53F8\u662F\u964C\u751F\u4EBA\uFF0C\u6240\u4EE5\u9002\u5408\u4F7F\u7528\u8FEA\u7C73\u7279\u6CD5\u5219\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8FEA\u7C73\u7279\u6CD5\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>\u660E\u661F\u7C7B\uFF08Star\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7C89\u4E1D\u7C7B\uFF08Fans\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fans</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Fans</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5A92\u4F53\u516C\u53F8\u7C7B\uFF08Company\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u7ECF\u7EAA\u4EBA\u7C7B\uFF08Agent\uFF09</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Agent</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Star</span> star<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Fans</span> fans<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Company</span> company<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStar</span><span class="token punctuation">(</span><span class="token class-name">Star</span> star<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>star <span class="token operator">=</span> star<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFans</span><span class="token punctuation">(</span><span class="token class-name">Fans</span> fans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fans <span class="token operator">=</span> fans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCompany</span><span class="token punctuation">(</span><span class="token class-name">Company</span> company<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">meeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fans<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u4E0E\u660E\u661F"</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u89C1\u9762\u4E86\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">business</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>company<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u4E0E\u660E\u661F"</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u6D3D\u6DE1\u4E1A\u52A1\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_3-6-\u5408\u6210\u590D\u7528\u539F\u5219" aria-hidden="true">#</a> 3.6 \u5408\u6210\u590D\u7528\u539F\u5219</h2>
<p>\u5408\u6210\u590D\u7528\u539F\u5219\u662F\u6307\uFF1A\u5C3D\u91CF\u5148\u4F7F\u7528\u7EC4\u5408\u6216\u8005\u805A\u5408\u7B49\u5173\u8054\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u5176\u6B21\u624D\u8003\u8651\u4F7F\u7528\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\u3002</p>
<p>\u901A\u5E38\u7C7B\u7684\u590D\u7528\u5206\u4E3A\u7EE7\u627F\u590D\u7528\u548C\u5408\u6210\u590D\u7528\u4E24\u79CD\u3002</p>
<p>\u7EE7\u627F\u590D\u7528\u867D\u7136\u6709\u7B80\u5355\u548C\u6613\u5B9E\u73B0\u7684\u4F18\u70B9\uFF0C\u4F46\u5B83\u4E5F\u5B58\u5728\u4EE5\u4E0B\u7F3A\u70B9\uFF1A</p>
<ol>
<li>\u7EE7\u627F\u590D\u7528\u7834\u574F\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u7EE7\u627F\u4F1A\u5C06\u7236\u7C7B\u7684\u5B9E\u73B0\u7EC6\u8282\u66B4\u9732\u7ED9\u5B50\u7C7B\uFF0C\u7236\u7C7B\u5BF9\u5B50\u7C7B\u662F\u900F\u660E\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u767D\u7BB1\u201D\u590D\u7528\u3002</li>
<li>\u5B50\u7C7B\u4E0E\u7236\u7C7B\u7684\u8026\u5408\u5EA6\u9AD8\u3002\u7236\u7C7B\u7684\u5B9E\u73B0\u7684\u4EFB\u4F55\u6539\u53D8\u90FD\u4F1A\u5BFC\u81F4\u5B50\u7C7B\u7684\u5B9E\u73B0\u53D1\u751F\u53D8\u5316\uFF0C\u8FD9\u4E0D\u5229\u4E8E\u7C7B\u7684\u6269\u5C55\u4E0E\u7EF4\u62A4\u3002</li>
<li>\u5B83\u9650\u5236\u4E86\u590D\u7528\u7684\u7075\u6D3B\u6027\u3002\u4ECE\u7236\u7C7B\u7EE7\u627F\u800C\u6765\u7684\u5B9E\u73B0\u662F\u9759\u6001\u7684\uFF0C\u5728\u7F16\u8BD1\u65F6\u5DF2\u7ECF\u5B9A\u4E49\uFF0C\u6240\u4EE5\u5728\u8FD0\u884C\u65F6\u4E0D\u53EF\u80FD\u53D1\u751F\u53D8\u5316\u3002</li>
</ol>
<p>\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u590D\u7528\u65F6\uFF0C\u53EF\u4EE5\u5C06\u5DF2\u6709\u5BF9\u8C61\u7EB3\u5165\u65B0\u5BF9\u8C61\u4E2D\uFF0C\u4F7F\u4E4B\u6210\u4E3A\u65B0\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u8C03\u7528\u5DF2\u6709\u5BF9\u8C61\u7684\u529F\u80FD\uFF0C\u5B83\u6709\u4EE5\u4E0B\u4F18\u70B9\uFF1A</p>
<ol>
<li>\u5B83\u7EF4\u6301\u4E86\u7C7B\u7684\u5C01\u88C5\u6027\u3002\u56E0\u4E3A\u6210\u5206\u5BF9\u8C61\u7684\u5185\u90E8\u7EC6\u8282\u662F\u65B0\u5BF9\u8C61\u770B\u4E0D\u89C1\u7684\uFF0C\u6240\u4EE5\u8FD9\u79CD\u590D\u7528\u53C8\u79F0\u4E3A\u201C\u9ED1\u7BB1\u201D\u590D\u7528\u3002</li>
<li>\u5BF9\u8C61\u95F4\u7684\u8026\u5408\u5EA6\u4F4E\u3002\u53EF\u4EE5\u5728\u7C7B\u7684\u6210\u5458\u4F4D\u7F6E\u58F0\u660E\u62BD\u8C61\u3002</li>
<li>\u590D\u7528\u7684\u7075\u6D3B\u6027\u9AD8\u3002\u8FD9\u79CD\u590D\u7528\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u8FDB\u884C\uFF0C\u65B0\u5BF9\u8C61\u53EF\u4EE5\u52A8\u6001\u5730\u5F15\u7528\u4E0E\u6210\u5206\u5BF9\u8C61\u7C7B\u578B\u76F8\u540C\u7684\u5BF9\u8C61\u3002</li>
</ol>
<p>\u4E0B\u9762\u770B\u4E00\u4E2A\u4F8B\u5B50\u6765\u7406\u89E3\u5408\u6210\u590D\u7528\u539F\u5219</p>
<p>\u3010\u4F8B\u3011\u6C7D\u8F66\u5206\u7C7B\u7BA1\u7406\u7A0B\u5E8F</p>
<p>\u6C7D\u8F66\u6309\u201C\u52A8\u529B\u6E90\u201D\u5212\u5206\u53EF\u5206\u4E3A\u6C7D\u6CB9\u6C7D\u8F66\u3001\u7535\u52A8\u6C7D\u8F66\u7B49\uFF1B\u6309\u201C\u989C\u8272\u201D\u5212\u5206\u53EF\u5206\u4E3A\u767D\u8272\u6C7D\u8F66\u3001\u9ED1\u8272\u6C7D\u8F66\u548C\u7EA2\u8272\u6C7D\u8F66\u7B49\u3002\u5982\u679C\u540C\u65F6\u8003\u8651\u8FD9\u4E24\u79CD\u5206\u7C7B\uFF0C\u5176\u7EC4\u5408\u5C31\u5F88\u591A\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5408\u6210\u590D\u7528\u539F\u5219.png" alt="image-20191229173554296" style="zoom:80%;" />
<p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4F7F\u7528\u7EE7\u627F\u590D\u7528\u4EA7\u751F\u4E86\u5F88\u591A\u5B50\u7C7B\uFF0C\u5982\u679C\u73B0\u5728\u53C8\u6709\u65B0\u7684\u52A8\u529B\u6E90\u6216\u8005\u65B0\u7684\u989C\u8272\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u518D\u5B9A\u4E49\u65B0\u7684\u7C7B\u3002\u6211\u4EEC\u8BD5\u7740\u5C06\u7EE7\u627F\u590D\u7528\u6539\u4E3A\u805A\u5408\u590D\u7528\u770B\u4E00\u4E0B\u3002</p>
<img src="/img/\u5408\u6210\u590D\u7528\u539F\u52191.png" alt="image-20191229173554296" style="zoom:80%;" />
<h1 id="_4-\u521B\u5EFA\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-\u521B\u5EFA\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4\uFF0C\u521B\u5EFA\u8005\u6A21\u5F0F</h1>
<p>\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E3B\u8981\u5173\u6CE8\u70B9\u662F\u201C\u600E\u6837\u521B\u5EFA\u5BF9\u8C61\uFF1F\u201D\uFF0C\u5B83\u7684\u4E3B\u8981\u7279\u70B9\u662F\u201C\u5C06\u5BF9\u8C61\u7684\u521B\u5EFA\u4E0E\u4F7F\u7528\u5206\u79BB\u201D\u3002</p>
<p>\u8FD9\u6837\u53EF\u4EE5\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u7528\u8005\u4E0D\u9700\u8981\u5173\u6CE8\u5BF9\u8C61\u7684\u521B\u5EFA\u7EC6\u8282\u3002</p>
<p>\u521B\u5EFA\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p>
<ul>
<li>\u5355\u4F8B\u6A21\u5F0F</li>
<li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u62BD\u8C61\u5DE5\u7A0B\u6A21\u5F0F</li>
<li>\u539F\u578B\u6A21\u5F0F</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F</li>
</ul>
<h2 id="_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 4.1 \u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</h2>
<p>\u5355\u4F8B\u6A21\u5F0F\uFF08Singleton Pattern\uFF09\u662F Java \u4E2D\u6700\u7B80\u5355\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E4B\u4E00\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u521B\u5EFA\u5BF9\u8C61\u7684\u6700\u4F73\u65B9\u5F0F\u3002</p>
<p>\u8FD9\u79CD\u6A21\u5F0F\u6D89\u53CA\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u7C7B\uFF0C\u8BE5\u7C7B\u8D1F\u8D23\u521B\u5EFA\u81EA\u5DF1\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u786E\u4FDD\u53EA\u6709\u5355\u4E2A\u5BF9\u8C61\u88AB\u521B\u5EFA\u3002\u8FD9\u4E2A\u7C7B\u63D0\u4F9B\u4E86\u4E00\u79CD\u8BBF\u95EE\u5176\u552F\u4E00\u7684\u5BF9\u8C61\u7684\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4E0D\u9700\u8981\u5B9E\u4F8B\u5316\u8BE5\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<h3 id="_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-1-1-\u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784" aria-hidden="true">#</a> 4.1.1 \u5355\u4F8B\u6A21\u5F0F\u7684\u7ED3\u6784</h3>
<p>\u5355\u4F8B\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u5355\u4F8B\u7C7B\u3002\u53EA\u80FD\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\u7684\u7C7B</li>
<li>\u8BBF\u95EE\u7C7B\u3002\u4F7F\u7528\u5355\u4F8B\u7C7B</li>
</ul>
<h3 id="_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-1-2-\u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 4.1.2 \u5355\u4F8B\u6A21\u5F0F\u7684\u5B9E\u73B0</h3>
<blockquote>
<p>\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u5206\u7C7B\u4E24\u79CD\uFF1A</p>
<p>\u200B \u997F\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u5C31\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA</p>
<p>\u200B \u61D2\u6C49\u5F0F\uFF1A\u7C7B\u52A0\u8F7D\u4E0D\u4F1A\u5BFC\u81F4\u8BE5\u5355\u5B9E\u4F8B\u5BF9\u8C61\u88AB\u521B\u5EFA\uFF0C\u800C\u662F\u9996\u6B21\u4F7F\u7528\u8BE5\u5BF9\u8C61\u65F6\u624D\u4F1A\u521B\u5EFA</p>
</blockquote>
<ol>
<li>
<p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u9759\u6001\u53D8\u91CF\u65B9\u5F0F\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u997F\u6C49\u5F0F
 *      \u9759\u6001\u53D8\u91CF\u521B\u5EFA\u7C7B\u7684\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61 instance\u3002instance \u5BF9\u8C61\u662F\u968F\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u7684\u3002\u5982\u679C\u8BE5\u5BF9\u8C61\u8DB3\u591F\u5927\u7684\u8BDD\uFF0C\u800C\u4E00\u76F4\u6CA1\u6709\u4F7F\u7528\u5C31\u4F1A\u9020\u6210\u5185\u5B58\u7684\u6D6A\u8D39\u3002</p>
</li>
<li>
<p>\u997F\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u9759\u6001\u4EE3\u7801\u5757\u65B9\u5F0F\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6076\u6C49\u5F0F
 *      \u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\u521B\u5EFA\u8BE5\u7C7B\u5BF9\u8C61
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u800C\u5BF9\u8C61\u7684\u521B\u5EFA\u662F\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u4E5F\u662F\u5BF9\u7740\u7C7B\u7684\u52A0\u8F7D\u800C\u521B\u5EFA\u3002\u6240\u4EE5\u548C\u997F\u6C49\u5F0F\u7684\u65B9\u5F0F 1 \u57FA\u672C\u4E0A\u4E00\u6837\uFF0C\u5F53\u7136\u8BE5\u65B9\u5F0F\u4E5F\u5B58\u5728\u5185\u5B58\u6D6A\u8D39\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 1\uFF08\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u4E0D\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\u8BE5\u65B9\u5F0F\u5728\u6210\u5458\u4F4D\u7F6E\u58F0\u660E Singleton \u7C7B\u578B\u7684\u9759\u6001\u53D8\u91CF\uFF0C\u5E76\u6CA1\u6709\u8FDB\u884C\u5BF9\u8C61\u7684\u8D4B\u503C\u64CD\u4F5C\uFF0C\u90A3\u4E48\u4EC0\u4E48\u65F6\u5019\u8D4B\u503C\u7684\u5462\uFF1F\u5F53\u8C03\u7528 getInstance()\u65B9\u6CD5\u83B7\u53D6 Singleton \u7C7B\u7684\u5BF9\u8C61\u7684\u65F6\u5019\u624D\u521B\u5EFA Singleton \u7C7B\u7684\u5BF9\u8C61\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u7684\u6548\u679C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 2\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u61D2\u6C49\u5F0F
 *  \u7EBF\u7A0B\u5B89\u5168
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//\u5728\u6210\u5458\u4F4D\u7F6E\u521B\u5EFA\u8BE5\u7C7B\u7684\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u8BE5\u65B9\u5F0F\u4E5F\u5B9E\u73B0\u4E86\u61D2\u52A0\u8F7D\u6548\u679C\uFF0C\u540C\u65F6\u53C8\u89E3\u51B3\u4E86\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u4F46\u662F\u5728 getInstance()\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u4E86 synchronized \u5173\u952E\u5B57\uFF0C\u5BFC\u81F4\u8BE5\u65B9\u6CD5\u7684\u6267\u884C\u6548\u679C\u7279\u522B\u4F4E\u3002\u4ECE\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u770B\u51FA\uFF0C\u5176\u5B9E\u5C31\u662F\u5728\u521D\u59CB\u5316 instance \u7684\u65F6\u5019\u624D\u4F1A\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E00\u65E6\u521D\u59CB\u5316\u5B8C\u6210\u5C31\u4E0D\u5B58\u5728\u4E86\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 3\uFF08\u53CC\u91CD\u68C0\u67E5\u9501\uFF09</p>
<p>\u518D\u6765\u8BA8\u8BBA\u4E00\u4E0B\u61D2\u6C49\u6A21\u5F0F\u4E2D\u52A0\u9501\u7684\u95EE\u9898\uFF0C\u5BF9\u4E8E <code v-pre>getInstance()</code> \u65B9\u6CD5\u6765\u8BF4\uFF0C\u7EDD\u5927\u90E8\u5206\u7684\u64CD\u4F5C\u90FD\u662F\u8BFB\u64CD\u4F5C\uFF0C\u8BFB\u64CD\u4F5C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u6CA1\u5FC5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u5FC5\u987B\u6301\u6709\u9501\u624D\u80FD\u8C03\u7528\u8BE5\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u8C03\u6574\u52A0\u9501\u7684\u65F6\u673A\u3002\u7531\u6B64\u4E5F\u4EA7\u751F\u4E86\u4E00\u79CD\u65B0\u7684\u5B9E\u73B0\u6A21\u5F0F\uFF1A\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u4F8B</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3Anull</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u975E\u5E38\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u89E3\u51B3\u4E86\u5355\u4F8B\u3001\u6027\u80FD\u3001\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\uFF0C\u4E0A\u9762\u7684\u53CC\u91CD\u68C0\u6D4B\u9501\u6A21\u5F0F\u770B\u4E0A\u53BB\u5B8C\u7F8E\u65E0\u7F3A\uFF0C\u5176\u5B9E\u662F\u5B58\u5728\u95EE\u9898\uFF0C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7A7A\u6307\u9488\u95EE\u9898\uFF0C\u51FA\u73B0\u95EE\u9898\u7684\u539F\u56E0\u662F JVM \u5728\u5B9E\u4F8B\u5316\u5BF9\u8C61\u7684\u65F6\u5019\u4F1A\u8FDB\u884C\u4F18\u5316\u548C\u6307\u4EE4\u91CD\u6392\u5E8F\u64CD\u4F5C\u3002</p>
<p>\u8981\u89E3\u51B3\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u5E26\u6765\u7A7A\u6307\u9488\u5F02\u5E38\u7684\u95EE\u9898\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 <code v-pre>volatile</code> \u5173\u952E\u5B57, <code v-pre>volatile</code> \u5173\u952E\u5B57\u53EF\u4EE5\u4FDD\u8BC1\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u53CC\u91CD\u68C0\u67E5\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//\u7B2C\u4E00\u6B21\u5224\u65AD\uFF0C\u5982\u679Cinstance\u4E0D\u4E3Anull\uFF0C\u4E0D\u8FDB\u5165\u62A2\u9501\u9636\u6BB5\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B9E\u9645</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u62A2\u5230\u9501\u4E4B\u540E\u518D\u6B21\u5224\u65AD\u662F\u5426\u4E3A\u7A7A</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u6DFB\u52A0 <code v-pre>volatile</code> \u5173\u952E\u5B57\u4E4B\u540E\u7684\u53CC\u91CD\u68C0\u67E5\u9501\u6A21\u5F0F\u662F\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u80FD\u591F\u4FDD\u8BC1\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\u7EBF\u7A0B\u5B89\u5168\u4E5F\u4E0D\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u3002</p>
</li>
<li>
<p>\u61D2\u6C49\u5F0F-\u65B9\u5F0F 4\uFF08\u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F\uFF09</p>
<p>\u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u4E2D\u5B9E\u4F8B\u7531\u5185\u90E8\u7C7B\u521B\u5EFA\uFF0C\u7531\u4E8E JVM \u5728\u52A0\u8F7D\u5916\u90E8\u7C7B\u7684\u8FC7\u7A0B\u4E2D, \u662F\u4E0D\u4F1A\u52A0\u8F7D\u9759\u6001\u5185\u90E8\u7C7B\u7684, \u53EA\u6709\u5185\u90E8\u7C7B\u7684\u5C5E\u6027/\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u624D\u4F1A\u88AB\u52A0\u8F7D, \u5E76\u521D\u59CB\u5316\u5176\u9759\u6001\u5C5E\u6027\u3002\u9759\u6001\u5C5E\u6027\u7531\u4E8E\u88AB <code v-pre>static</code> \u4FEE\u9970\uFF0C\u4FDD\u8BC1\u53EA\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\uFF0C\u5E76\u4E14\u4E25\u683C\u4FDD\u8BC1\u5B9E\u4F8B\u5316\u987A\u5E8F\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u9759\u6001\u5185\u90E8\u7C7B\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u7B2C\u4E00\u6B21\u52A0\u8F7D Singleton \u7C7B\u65F6\u4E0D\u4F1A\u53BB\u521D\u59CB\u5316 INSTANCE\uFF0C\u53EA\u6709\u7B2C\u4E00\u6B21\u8C03\u7528 getInstance\uFF0C\u865A\u62DF\u673A\u52A0\u8F7D SingletonHolder</p>
<p>\u5E76\u521D\u59CB\u5316 INSTANCE\uFF0C\u8FD9\u6837\u4E0D\u4EC5\u80FD\u786E\u4FDD\u7EBF\u7A0B\u5B89\u5168\uFF0C\u4E5F\u80FD\u4FDD\u8BC1 Singleton \u7C7B\u7684\u552F\u4E00\u6027\u3002</p>
<div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u200B \u9759\u6001\u5185\u90E8\u7C7B\u5355\u4F8B\u6A21\u5F0F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u5355\u4F8B\u6A21\u5F0F\uFF0C\u662F\u5F00\u6E90\u9879\u76EE\u4E2D\u6BD4\u8F83\u5E38\u7528\u7684\u4E00\u79CD\u5355\u4F8B\u6A21\u5F0F\u3002\u5728\u6CA1\u6709\u52A0\u4EFB\u4F55\u9501\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u4E86\u591A\u7EBF\u7A0B\u4E0B\u7684\u5B89\u5168\uFF0C\u5E76\u4E14\u6CA1\u6709\u4EFB\u4F55\u6027\u80FD\u5F71\u54CD\u548C\u7A7A\u95F4\u7684\u6D6A\u8D39\u3002</p>
</li>
<li>
<p>\u679A\u4E3E\u65B9\u5F0F</p>
<p>\u679A\u4E3E\u7C7B\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u662F\u6781\u529B\u63A8\u8350\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u679A\u4E3E\u7C7B\u578B\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u5E76\u4E14\u53EA\u4F1A\u88C5\u8F7D\u4E00\u6B21\uFF0C\u8BBE\u8BA1\u8005\u5145\u5206\u7684\u5229\u7528\u4E86\u679A\u4E3E\u7684\u8FD9\u4E2A\u7279\u6027\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\uFF0C\u679A\u4E3E\u7684\u5199\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u800C\u4E14\u679A\u4E3E\u7C7B\u578B\u662F\u6240\u7528\u5355\u4F8B\u5B9E\u73B0\u4E2D\u552F\u4E00\u4E00\u79CD\u4E0D\u4F1A\u88AB\u7834\u574F\u7684\u5355\u4F8B\u5B9E\u73B0\u6A21\u5F0F\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u679A\u4E3E\u65B9\u5F0F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color='red'>\u8BF4\u660E\uFF1A</div>
<p>\u200B \u679A\u4E3E\u65B9\u5F0F\u5C5E\u4E8E\u6076\u6C49\u5F0F\u65B9\u5F0F\u3002</p>
</li>
</ol>
<h3 id="_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_4-1-3-\u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898" aria-hidden="true">#</a> 4.1.3 \u5355\u4F8B\u6A21\u5F0F\u5B58\u5728\u7684\u95EE\u9898</h3>
<h4 id="_4-1-3-1-\u95EE\u9898\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#_4-1-3-1-\u95EE\u9898\u6F14\u793A" aria-hidden="true">#</a> 4.1.3.1 \u95EE\u9898\u6F14\u793A</h4>
<p>\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\uFF1A\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u5355\u4F8B\u7C7B\uFF08Singleton\uFF09\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u5BF9\u8C61\uFF0C\u679A\u4E3E\u65B9\u5F0F\u9664\u5916\u3002\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u5206\u522B\u662F\u5E8F\u5217\u5316\u548C\u53CD\u5C04\u3002</p>
<ul>
<li>
<p>\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F80\u6587\u4EF6\u4E2D\u5199\u5BF9\u8C61</span>
        <span class="token comment">//writeObject2File();</span>
        <span class="token comment">//\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u4E24\u4E2A\u53CD\u5E8F\u5217\u5316\u540E\u7684\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E00\u4E2A\u8BFB\u53D6Singleton\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeObject2File</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5BF9\u8C61</span>
        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06instance\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code v-pre>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p>
</blockquote>
</li>
<li>
<p>\u53CD\u5C04</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Test \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6Singleton\u7C7B\u7684\u79C1\u6709\u65E0\u53C2\u6784\u9020\u65B9\u6CD5\u5BF9\u8C61</span>
        <span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u53D6\u6D88\u8BBF\u95EE\u68C0\u67E5</span>
        constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s1</span>
        <span class="token class-name">Singleton</span> s1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFASingleton\u7C7B\u7684\u5BF9\u8C61s2</span>
        <span class="token class-name">Singleton</span> s2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65AD\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u7684\u4E24\u4E2ASingleton\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u4E0A\u9762\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u662F<code v-pre>false</code>\uFF0C\u8868\u660E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u5DF2\u7ECF\u7834\u574F\u4E86\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F</p>
</blockquote>
</li>
</ul>
<blockquote>
<div color="red">\u6CE8\u610F\uFF1A</div>\u679A\u4E3E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u8FD9\u4E24\u4E2A\u95EE\u9898\u3002
</blockquote>
<h4 id="_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#_4-1-3-2-\u95EE\u9898\u7684\u89E3\u51B3" aria-hidden="true">#</a> 4.1.3.2 \u95EE\u9898\u7684\u89E3\u51B3</h4>
<ul>
<li>
<p>\u5E8F\u5217\u5316\u3001\u53CD\u5E8F\u5217\u65B9\u5F0F\u7834\u574F\u5355\u4F8B\u6A21\u5F0F\u7684\u89E3\u51B3\u65B9\u6CD5</p>
<p>\u5728 Singleton \u7C7B\u4E2D\u6DFB\u52A0<code v-pre>readResolve()</code>\u65B9\u6CD5\uFF0C\u5728\u53CD\u5E8F\u5217\u5316\u65F6\u88AB\u53CD\u5C04\u8C03\u7528\uFF0C\u5982\u679C\u5B9A\u4E49\u4E86\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u5C31\u8FD4\u56DE\u8FD9\u4E2A\u65B9\u6CD5\u7684\u503C\uFF0C\u5982\u679C\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5219\u8FD4\u56DE\u65B0 new \u51FA\u6765\u7684\u5BF9\u8C61\u3002</p>
<p><strong>Singleton \u7C7B\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u4E0B\u9762\u662F\u4E3A\u4E86\u89E3\u51B3\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6E90\u7801\u89E3\u6790\uFF1A</strong></p>
<p>ObjectInputStream \u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// if nested read, passHandle contains handle of enclosing object</span>
    <span class="token keyword">int</span> outerHandle <span class="token operator">=</span> passHandle<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadObject0\u65B9\u6CD5</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>tc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
			<span class="token keyword">case</span> <span class="token constant">TC_OBJECT</span><span class="token operator">:</span>
				<span class="token keyword">return</span> <span class="token function">checkResolve</span><span class="token punctuation">(</span><span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span>unshared<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u91CD\u70B9\u67E5\u770BreadOrdinaryObject\u65B9\u6CD5</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        depth<span class="token operator">--</span><span class="token punctuation">;</span>
        bin<span class="token punctuation">.</span><span class="token function">setBlockDataMode</span><span class="token punctuation">(</span>oldMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//isInstantiable \u8FD4\u56DEtrue\uFF0C\u6267\u884C desc.newInstance()\uFF0C\u901A\u8FC7\u53CD\u5C04\u521B\u5EFA\u65B0\u7684\u5355\u4F8B\u7C7B\uFF0C</span>
    obj <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">isInstantiable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> desc<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// \u5728Singleton\u7C7B\u4E2D\u6DFB\u52A0 readResolve \u65B9\u6CD5\u540E desc.hasReadResolveMethod() \u65B9\u6CD5\u6267\u884C\u7ED3\u679C\u4E3Atrue</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> handles<span class="token punctuation">.</span><span class="token function">lookupException</span><span class="token punctuation">(</span>passHandle<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> desc<span class="token punctuation">.</span><span class="token function">hasReadResolveMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// \u901A\u8FC7\u53CD\u5C04\u8C03\u7528 Singleton \u7C7B\u4E2D\u7684 readResolve \u65B9\u6CD5\uFF0C\u5C06\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9rep\u53D8\u91CF</span>
    	<span class="token comment">// \u8FD9\u6837\u591A\u6B21\u8C03\u7528ObjectInputStream\u7C7B\u4E2D\u7684readObject\u65B9\u6CD5\uFF0C\u7EE7\u800C\u5C31\u4F1A\u8C03\u7528\u6211\u4EEC\u5B9A\u4E49\u7684readResolve\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8FD4\u56DE\u7684\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002</span>
    	<span class="token class-name">Object</span> rep <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">invokeReadResolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u53CD\u5C04\u65B9\u5F0F\u7834\u89E3\u5355\u4F8B\u7684\u89E3\u51B3\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u79C1\u6709\u6784\u9020\u65B9\u6CD5</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/*
           \u53CD\u5C04\u7834\u89E3\u5355\u4F8B\u6A21\u5F0F\u9700\u8981\u6DFB\u52A0\u7684\u4EE3\u7801
        */</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//\u5BF9\u5916\u63D0\u4F9B\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u8BE5\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u8BF4\u660E:</div>
<p>\u200B \u8FD9\u79CD\u65B9\u5F0F\u6BD4\u8F83\u597D\u7406\u89E3\u3002\u5F53\u901A\u8FC7\u53CD\u5C04\u65B9\u5F0F\u8C03\u7528\u6784\u9020\u65B9\u6CD5\u8FDB\u884C\u521B\u5EFA\u521B\u5EFA\u65F6\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\u3002\u4E0D\u8FD0\u884C\u6B64\u4E2D\u64CD\u4F5C\u3002</p>
</li>
</ul>
<h3 id="_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-1-4-jdk-\u6E90\u7801\u89E3\u6790-runtime-\u7C7B" aria-hidden="true">#</a> 4.1.4 JDK \u6E90\u7801\u89E3\u6790-Runtime \u7C7B</h3>
<p>Runtime \u7C7B\u5C31\u662F\u4F7F\u7528\u7684\u5355\u4F8B\u8BBE\u8BA1\u6A21\u5F0F\u3002</p>
<ol>
<li>
<p>\u901A\u8FC7\u6E90\u4EE3\u7801\u67E5\u770B\u4F7F\u7528\u7684\u662F\u54EA\u513F\u79CD\u5355\u4F8B\u6A21\u5F0F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> currentRuntime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Returns the runtime object associated with the current Java application.
     * Most of the methods of class <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span> are instance
     * methods and must be invoked with respect to the current runtime object.
     *
     * <span class="token keyword">@return</span>  the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token class-name">Runtime</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span> object associated with the current
     *          Java application.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> <span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> currentRuntime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/** Don't let anyone else instantiate this class */</span>
    <span class="token keyword">private</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u6E90\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA Runtime \u7C7B\u4F7F\u7528\u7684\u662F\u6076\u6C49\u5F0F\uFF08\u9759\u6001\u5C5E\u6027\uFF09\u65B9\u5F0F\u6765\u5B9E\u73B0\u5355\u4F8B\u6A21\u5F0F\u7684\u3002</p>
</li>
<li>
<p>\u4F7F\u7528 Runtime \u7C7B\u4E2D\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuntimeDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6Runtime\u7C7B\u5BF9\u8C61</span>
        <span class="token class-name">Runtime</span> runtime <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u4E2D\u7684\u5185\u5B58\u603B\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">totalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DE Java \u865A\u62DF\u673A\u8BD5\u56FE\u4F7F\u7528\u7684\u6700\u5927\u5185\u5B58\u91CF\u3002</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">maxMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u8FDB\u7A0B\u6267\u884C\u6307\u5B9A\u7684\u5B57\u7B26\u4E32\u547D\u4EE4\uFF0C\u8FD4\u56DE\u8FDB\u7A0B\u5BF9\u8C61</span>
        <span class="token class-name">Process</span> process <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">"ipconfig"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u547D\u4EE4\u6267\u884C\u540E\u7684\u7ED3\u679C\uFF0C\u901A\u8FC7\u8F93\u5165\u6D41\u83B7\u53D6</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ol>
<h2 id="_4-2-\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2 \u5DE5\u5382\u6A21\u5F0F</h2>
<h3 id="_4-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.2.1 \u6982\u8FF0</h3>
<p>\u9700\u6C42\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u70B9\u9910\u7CFB\u7EDF\u3002</p>
<p>\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u7C7B\uFF08Coffee\uFF09\uFF0C\u5E76\u5B9A\u4E49\u5176\u4E24\u4E2A\u5B50\u7C7B\uFF08\u7F8E\u5F0F\u5496\u5561\u3010AmericanCoffee\u3011\u548C\u62FF\u94C1\u5496\u5561\u3010LatteCoffee\u3011\uFF09\uFF1B\u518D\u8BBE\u8BA1\u4E00\u4E2A\u5496\u5561\u5E97\u7C7B\uFF08CoffeeStore\uFF09\uFF0C\u5496\u5561\u5E97\u5177\u6709\u70B9\u5496\u5561\u7684\u529F\u80FD\u3002</p>
<p>\u5177\u4F53\u7C7B\u7684\u8BBE\u8BA1\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u5F15\u5165.png" style="zoom:80%;" />
<p>\u5728 java \u4E2D\uFF0C\u4E07\u7269\u7686\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u90FD\u9700\u8981\u521B\u5EFA\uFF0C\u5982\u679C\u521B\u5EFA\u7684\u65F6\u5019\u76F4\u63A5 new \u8BE5\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u5BF9\u8BE5\u5BF9\u8C61\u8026\u5408\u4E25\u91CD\uFF0C\u5047\u5982\u6211\u4EEC\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u6240\u6709 new \u5BF9\u8C61\u7684\u5730\u65B9\u90FD\u9700\u8981\u4FEE\u6539\u4E00\u904D\uFF0C\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u8F6F\u4EF6\u8BBE\u8BA1\u7684\u5F00\u95ED\u539F\u5219\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5DE5\u5382\u6765\u751F\u4EA7\u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u53EA\u548C\u5DE5\u5382\u6253\u4EA4\u9053\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F7B\u5E95\u548C\u5BF9\u8C61\u89E3\u8026\uFF0C\u5982\u679C\u8981\u66F4\u6362\u5BF9\u8C61\uFF0C\u76F4\u63A5\u5728\u5DE5\u5382\u91CC\u66F4\u6362\u8BE5\u5BF9\u8C61\u5373\u53EF\uFF0C\u8FBE\u5230\u4E86\u4E0E\u5BF9\u8C61\u89E3\u8026\u7684\u76EE\u7684\uFF1B\u6240\u4EE5\u8BF4\uFF0C\u5DE5\u5382\u6A21\u5F0F\u6700\u5927\u7684\u4F18\u70B9\u5C31\u662F\uFF1A<strong>\u89E3\u8026</strong>\u3002</p>
<p>\u5728\u672C\u6559\u7A0B\u4E2D\u4F1A\u4ECB\u7ECD\u4E09\u79CD\u5DE5\u5382\u7684\u4F7F\u7528</p>
<ul>
<li>\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\uFF08\u4E0D\u5C5E\u4E8E GOF \u7684 23 \u79CD\u7ECF\u5178\u8BBE\u8BA1\u6A21\u5F0F\uFF09</li>
<li>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</li>
</ul>
<h3 id="_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F</h3>
<p>\u7B80\u5355\u5DE5\u5382\u4E0D\u662F\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u53CD\u800C\u6BD4\u8F83\u50CF\u662F\u4E00\u79CD\u7F16\u7A0B\u4E60\u60EF\u3002</p>
<h4 id="_4-2-2-1-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-2-1-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.2.1 \u7ED3\u6784</h4>
<p>\u7B80\u5355\u5DE5\u5382\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4EA7\u54C1 \uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1 \uFF1A\u5B9E\u73B0\u6216\u8005\u7EE7\u627F\u62BD\u8C61\u4EA7\u54C1\u7684\u5B50\u7C7B</li>
<li>\u5177\u4F53\u5DE5\u5382 \uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u8BE5\u65B9\u6CD5\u6765\u83B7\u53D6\u4EA7\u54C1\u3002</li>
</ul>
<h4 id="_4-2-2-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-2-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.2.2 \u5B9E\u73B0</h4>
<p>\u73B0\u5728\u4F7F\u7528\u7B80\u5355\u5DE5\u5382\u5BF9\u4E0A\u9762\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u5DE5\u5382\u7C7B\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"americano"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5DE5\u5382\uFF08factory\uFF09\u5904\u7406\u521B\u5EFA\u5BF9\u8C61\u7684\u7EC6\u8282\uFF0C\u4E00\u65E6\u6709\u4E86 SimpleCoffeeFactory\uFF0CCoffeeStore \u7C7B\u4E2D\u7684 orderCoffee()\u5C31\u53D8\u6210\u6B64\u5BF9\u8C61\u7684\u5BA2\u6237\uFF0C\u540E\u671F\u5982\u679C\u9700\u8981 Coffee \u5BF9\u8C61\u76F4\u63A5\u4ECE\u5DE5\u5382\u4E2D\u83B7\u53D6\u5373\u53EF\u3002\u8FD9\u6837\u4E5F\u5C31\u89E3\u9664\u4E86\u548C Coffee \u5B9E\u73B0\u7C7B\u7684\u8026\u5408\uFF0C\u540C\u65F6\u53C8\u4EA7\u751F\u4E86\u65B0\u7684\u8026\u5408\uFF0CCoffeeStore \u5BF9\u8C61\u548C SimpleCoffeeFactory \u5DE5\u5382\u5BF9\u8C61\u7684\u8026\u5408\uFF0C\u5DE5\u5382\u5BF9\u8C61\u548C\u5546\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002</p>
<p>\u540E\u671F\u5982\u679C\u518D\u52A0\u65B0\u54C1\u79CD\u7684\u5496\u5561\uFF0C\u6211\u4EEC\u52BF\u5FC5\u8981\u9700\u6C42\u4FEE\u6539 SimpleCoffeeFactory \u7684\u4EE3\u7801\uFF0C\u8FDD\u53CD\u4E86\u5F00\u95ED\u539F\u5219\u3002\u5DE5\u5382\u7C7B\u7684\u5BA2\u6237\u7AEF\u53EF\u80FD\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u521B\u5EFA\u7F8E\u56E2\u5916\u5356\u7B49\uFF0C\u8FD9\u6837\u53EA\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u7701\u53BB\u5176\u4ED6\u7684\u4FEE\u6539\u64CD\u4F5C\u3002</p>
<h4 id="_4-2-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.2.4 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<p>\u5C01\u88C5\u4E86\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u76F4\u63A5\u83B7\u53D6\u5BF9\u8C61\u3002\u628A\u5BF9\u8C61\u7684\u521B\u5EFA\u548C\u4E1A\u52A1\u903B\u8F91\u5C42\u5206\u5F00\uFF0C\u8FD9\u6837\u4EE5\u540E\u5C31\u907F\u514D\u4E86\u4FEE\u6539\u5BA2\u6237\u4EE3\u7801\uFF0C\u5982\u679C\u8981\u5B9E\u73B0\u65B0\u4EA7\u54C1\u76F4\u63A5\u4FEE\u6539\u5DE5\u5382\u7C7B\uFF0C\u800C\u4E0D\u9700\u8981\u5728\u539F\u4EE3\u7801\u4E2D\u4FEE\u6539\uFF0C\u8FD9\u6837\u5C31\u964D\u4F4E\u4E86\u5BA2\u6237\u4EE3\u7801\u4FEE\u6539\u7684\u53EF\u80FD\u6027\uFF0C\u66F4\u52A0\u5BB9\u6613\u6269\u5C55\u3002</p>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u589E\u52A0\u65B0\u4EA7\u54C1\u65F6\u8FD8\u662F\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\uFF0C\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
<h4 id="_4-2-2-3-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-2-3-\u6269\u5C55" aria-hidden="true">#</a> 4.2.2.3 \u6269\u5C55</h4>
<p><strong>\u9759\u6001\u5DE5\u5382</strong></p>
<p>\u5728\u5F00\u53D1\u4E2D\u4E5F\u6709\u4E00\u90E8\u5206\u4EBA\u5C06\u5DE5\u5382\u7C7B\u4E2D\u7684\u521B\u5EFA\u5BF9\u8C61\u7684\u529F\u80FD\u5B9A\u4E49\u4E3A\u9759\u6001\u7684\uFF0C\u8FD9\u4E2A\u5C31\u662F\u9759\u6001\u5DE5\u5382\u6A21\u5F0F\uFF0C\u5B83\u4E5F\u4E0D\u662F 23 \u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E2D\u7684\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleCoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"americano"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmericanoCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"latte"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            coffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffe<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</h3>
<p>\u9488\u5BF9\u4E0A\u4F8B\u4E2D\u7684\u7F3A\u70B9\uFF0C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5C31\u53EF\u4EE5\u5B8C\u7F8E\u7684\u89E3\u51B3\uFF0C\u5B8C\u5168\u9075\u5FAA\u5F00\u95ED\u539F\u5219\u3002</p>
<h4 id="_4-2-3-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-3-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.3.1 \u6982\u5FF5</h4>
<p>\u5B9A\u4E49\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u8BA9\u5B50\u7C7B\u51B3\u5B9A\u5B9E\u4F8B\u5316\u54EA\u4E2A\u4EA7\u54C1\u7C7B\u5BF9\u8C61\u3002\u5DE5\u5382\u65B9\u6CD5\u4F7F\u4E00\u4E2A\u4EA7\u54C1\u7C7B\u7684\u5B9E\u4F8B\u5316\u5EF6\u8FDF\u5230\u5176\u5DE5\u5382\u7684\u5B50\u7C7B\u3002</p>
<h4 id="_4-2-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.3.2 \u7ED3\u6784</h4>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u8C03\u7528\u8005\u901A\u8FC7\u5B83\u8BBF\u95EE\u5177\u4F53\u5DE5\u5382\u7684\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u5DE5\u5382\uFF08ConcreteFactory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li>
<li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83\u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u4E00\u4E00\u5BF9\u5E94\u3002</li>
</ul>
<h4 id="_4-2-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.3.3 \u5B9E\u73B0</h4>
<p>\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u5BF9\u4E0A\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5496\u5561\u5E97\u7C7B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeStore</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CoffeeStore</span><span class="token punctuation">(</span><span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addsugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4EE5\u4E0A\u7684\u7F16\u5199\u7684\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8981\u589E\u52A0\u4EA7\u54C1\u7C7B\u65F6\u4E5F\u8981\u76F8\u5E94\u5730\u589E\u52A0\u5DE5\u5382\u7C7B\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5DE5\u5382\u7C7B\u7684\u4EE3\u7801\u4E86\uFF0C\u8FD9\u6837\u5C31\u89E3\u51B3\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u7F3A\u70B9\u3002</p>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u662F\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u8FDB\u4E00\u6B65\u62BD\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86\u591A\u6001\u6027\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4FDD\u6301\u4E86\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u7684\u4F18\u70B9\uFF0C\u800C\u4E14\u514B\u670D\u4E86\u5B83\u7684\u7F3A\u70B9\u3002</p>
<h4 id="_4-2-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.3.4 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u7528\u6237\u53EA\u9700\u8981\u77E5\u9053\u5177\u4F53\u5DE5\u5382\u7684\u540D\u79F0\u5C31\u53EF\u5F97\u5230\u6240\u8981\u7684\u4EA7\u54C1\uFF0C\u65E0\u987B\u77E5\u9053\u4EA7\u54C1\u7684\u5177\u4F53\u521B\u5EFA\u8FC7\u7A0B\uFF1B</li>
<li>\u5728\u7CFB\u7EDF\u589E\u52A0\u65B0\u7684\u4EA7\u54C1\u65F6\u53EA\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u65E0\u987B\u5BF9\u539F\u5DE5\u5382\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\uFF1B</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u6BCF\u589E\u52A0\u4E00\u4E2A\u4EA7\u54C1\u5C31\u8981\u589E\u52A0\u4E00\u4E2A\u5177\u4F53\u4EA7\u54C1\u7C7B\u548C\u4E00\u4E2A\u5BF9\u5E94\u7684\u5177\u4F53\u5DE5\u5382\u7C7B\uFF0C\u8FD9\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3002</li>
</ul>
<h3 id="_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 4.2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</h3>
<p>\u524D\u9762\u4ECB\u7ECD\u7684\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u4E2D\u8003\u8651\u7684\u662F\u4E00\u7C7B\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5982\u755C\u7267\u573A\u53EA\u517B\u52A8\u7269\u3001\u7535\u89C6\u673A\u5382\u53EA\u751F\u4EA7\u7535\u89C6\u673A\u3001\u4F20\u667A\u64AD\u5BA2\u53EA\u57F9\u517B\u8BA1\u7B97\u673A\u8F6F\u4EF6\u4E13\u4E1A\u7684\u5B66\u751F\u7B49\u3002</p>
<p>\u8FD9\u4E9B\u5DE5\u5382\u53EA\u751F\u4EA7\u540C\u79CD\u7C7B\u4EA7\u54C1\uFF0C\u540C\u79CD\u7C7B\u4EA7\u54C1\u79F0\u4E3A\u540C\u7B49\u7EA7\u4EA7\u54C1\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF1A\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u8003\u8651\u751F\u4EA7\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u4F46\u662F\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\u8BB8\u591A\u5DE5\u5382\u662F\u7EFC\u5408\u578B\u7684\u5DE5\u5382\uFF0C\u80FD\u751F\u4EA7\u591A\u7B49\u7EA7\uFF08\u79CD\u7C7B\uFF09 \u7684\u4EA7\u54C1\uFF0C\u5982\u7535\u5668\u5382\u65E2\u751F\u4EA7\u7535\u89C6\u673A\u53C8\u751F\u4EA7\u6D17\u8863\u673A\u6216\u7A7A\u8C03\uFF0C\u5927\u5B66\u65E2\u6709\u8F6F\u4EF6\u4E13\u4E1A\u53C8\u6709\u751F\u7269\u4E13\u4E1A\u7B49\u3002</p>
<p>\u672C\u8282\u8981\u4ECB\u7ECD\u7684\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5C06\u8003\u8651\u591A\u7B49\u7EA7\u4EA7\u54C1\u7684\u751F\u4EA7\uFF0C\u5C06\u540C\u4E00\u4E2A\u5177\u4F53\u5DE5\u5382\u6240\u751F\u4EA7\u7684\u4F4D\u4E8E\u4E0D\u540C\u7B49\u7EA7\u7684\u4E00\u7EC4\u4EA7\u54C1\u79F0\u4E3A\u4E00\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4E0B\u56FE\u6240\u793A\u6A2A\u8F74\u662F\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u7C7B\u4EA7\u54C1\uFF1B\u7EB5\u8F74\u662F\u4EA7\u54C1\u65CF\uFF0C\u4E5F\u5C31\u662F\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\uFF0C\u540C\u4E00\u54C1\u724C\u7684\u4EA7\u54C1\u4EA7\u81EA\u540C\u4E00\u4E2A\u5DE5\u5382\u3002</p>
<img src="/img/image-20200401214509176.png" style="zoom:67%;" />
<img src="/img/image-20200401222951963.png" style="zoom:67%;" />
<h4 id="_4-2-4-1-\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-2-4-1-\u6982\u5FF5" aria-hidden="true">#</a> 4.2.4.1 \u6982\u5FF5</h4>
<p>\u662F\u4E00\u79CD\u4E3A\u8BBF\u95EE\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u521B\u5EFA\u4E00\u7EC4\u76F8\u5173\u6216\u76F8\u4E92\u4F9D\u8D56\u5BF9\u8C61\u7684\u63A5\u53E3\uFF0C\u4E14\u8BBF\u95EE\u7C7B\u65E0\u987B\u6307\u5B9A\u6240\u8981\u4EA7\u54C1\u7684\u5177\u4F53\u7C7B\u5C31\u80FD\u5F97\u5230\u540C\u65CF\u7684\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u7684\u6A21\u5F0F\u7ED3\u6784\u3002</p>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u662F\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u7684\u5347\u7EA7\u7248\u672C\uFF0C\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u53EA\u751F\u4EA7\u4E00\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\uFF0C\u800C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u53EF\u751F\u4EA7\u591A\u4E2A\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</p>
<h4 id="_4-2-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.2.4.2 \u7ED3\u6784</h4>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5DE5\u5382\uFF08Abstract Factory\uFF09\uFF1A\u63D0\u4F9B\u4E86\u521B\u5EFA\u4EA7\u54C1\u7684\u63A5\u53E3\uFF0C\u5B83\u5305\u542B\u591A\u4E2A\u521B\u5EFA\u4EA7\u54C1\u7684\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u521B\u5EFA\u591A\u4E2A\u4E0D\u540C\u7B49\u7EA7\u7684\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u5DE5\u5382\uFF08Concrete Factory\uFF09\uFF1A\u4E3B\u8981\u662F\u5B9E\u73B0\u62BD\u8C61\u5DE5\u5382\u4E2D\u7684\u591A\u4E2A\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5177\u4F53\u4EA7\u54C1\u7684\u521B\u5EFA\u3002</li>
<li>\u62BD\u8C61\u4EA7\u54C1\uFF08Product\uFF09\uFF1A\u5B9A\u4E49\u4E86\u4EA7\u54C1\u7684\u89C4\u8303\uFF0C\u63CF\u8FF0\u4E86\u4EA7\u54C1\u7684\u4E3B\u8981\u7279\u6027\u548C\u529F\u80FD\uFF0C\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u6709\u591A\u4E2A\u62BD\u8C61\u4EA7\u54C1\u3002</li>
<li>\u5177\u4F53\u4EA7\u54C1\uFF08ConcreteProduct\uFF09\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EA7\u54C1\u89D2\u8272\u6240\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u7531\u5177\u4F53\u5DE5\u5382\u6765\u521B\u5EFA\uFF0C\u5B83 \u540C\u5177\u4F53\u5DE5\u5382\u4E4B\u95F4\u662F\u591A\u5BF9\u4E00\u7684\u5173\u7CFB\u3002</li>
</ul>
<h4 id="_4-2-4-2-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-2-4-2-\u5B9E\u73B0" aria-hidden="true">#</a> 4.2.4.2 \u5B9E\u73B0</h4>
<p>\u73B0\u5496\u5561\u5E97\u4E1A\u52A1\u53D1\u751F\u6539\u53D8\uFF0C\u4E0D\u4EC5\u8981\u751F\u4EA7\u5496\u5561\u8FD8\u8981\u751F\u4EA7\u751C\u70B9\uFF0C\u5982\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u7B49\uFF0C\u8981\u662F\u6309\u7167\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u9700\u8981\u5B9A\u4E49\u63D0\u62C9\u7C73\u82CF\u7C7B\u3001\u62B9\u8336\u6155\u65AF\u7C7B\u3001\u63D0\u62C9\u7C73\u82CF\u5DE5\u5382\u3001\u62B9\u8336\u6155\u65AF\u5DE5\u5382\u3001\u751C\u70B9\u5DE5\u5382\u7C7B\uFF0C\u5F88\u5BB9\u6613\u53D1\u751F\u7C7B\u7206\u70B8\u60C5\u51B5\u3002\u5176\u4E2D\u62FF\u94C1\u5496\u5561\u3001\u7F8E\u5F0F\u5496\u5561\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF0C\u90FD\u662F\u5496\u5561\uFF1B\u63D0\u62C9\u7C73\u82CF\u3001\u62B9\u8336\u6155\u65AF\u4E5F\u662F\u4E00\u4E2A\u4EA7\u54C1\u7B49\u7EA7\uFF1B\u62FF\u94C1\u5496\u5561\u548C\u63D0\u62C9\u7C73\u82CF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u610F\u5927\u5229\u98CE\u5473\uFF09\uFF0C\u7F8E\u5F0F\u5496\u5561\u548C\u62B9\u8336\u6155\u65AF\u662F\u540C\u4E00\u4EA7\u54C1\u65CF\uFF08\u4E5F\u5C31\u662F\u90FD\u5C5E\u4E8E\u7F8E\u5F0F\u98CE\u5473\uFF09\u3002\u6240\u4EE5\u8FD9\u4E2A\u6848\u4F8B\u53EF\u4EE5\u4F7F\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F.png" style="zoom:67%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u62BD\u8C61\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u4F53\u5DE5\u5382\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7F8E\u5F0F\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MatchaMousse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u610F\u5927\u5229\u98CE\u5473\u751C\u70B9\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItalyDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tiramisu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u8981\u52A0\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u8BDD\uFF0C\u53EA\u9700\u8981\u518D\u52A0\u4E00\u4E2A\u5BF9\u5E94\u7684\u5DE5\u5382\u7C7B\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u4FEE\u6539\u5176\u4ED6\u7684\u7C7B\u3002</p>
<h4 id="_4-2-4-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-2-4-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.2.4.3 \u4F18\u7F3A\u70B9</h4>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<p>\u5F53\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u591A\u4E2A\u5BF9\u8C61\u88AB\u8BBE\u8BA1\u6210\u4E00\u8D77\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u59CB\u7EC8\u53EA\u4F7F\u7528\u540C\u4E00\u4E2A\u4EA7\u54C1\u65CF\u4E2D\u7684\u5BF9\u8C61\u3002</p>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u5F53\u4EA7\u54C1\u65CF\u4E2D\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u4EA7\u54C1\u65F6\uFF0C\u6240\u6709\u7684\u5DE5\u5382\u7C7B\u90FD\u9700\u8981\u8FDB\u884C\u4FEE\u6539\u3002</p>
<h4 id="_4-2-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-2-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.2.4.4 \u4F7F\u7528\u573A\u666F</h4>
<ul>
<li>
<p>\u5F53\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u662F\u4E00\u7CFB\u5217\u76F8\u4E92\u5173\u8054\u6216\u76F8\u4E92\u4F9D\u8D56\u7684\u4EA7\u54C1\u65CF\u65F6\uFF0C\u5982\u7535\u5668\u5DE5\u5382\u4E2D\u7684\u7535\u89C6\u673A\u3001\u6D17\u8863\u673A\u3001\u7A7A\u8C03\u7B49\u3002</p>
</li>
<li>
<p>\u7CFB\u7EDF\u4E2D\u6709\u591A\u4E2A\u4EA7\u54C1\u65CF\uFF0C\u4F46\u6BCF\u6B21\u53EA\u4F7F\u7528\u5176\u4E2D\u7684\u67D0\u4E00\u65CF\u4EA7\u54C1\u3002\u5982\u6709\u4EBA\u53EA\u559C\u6B22\u7A7F\u67D0\u4E00\u4E2A\u54C1\u724C\u7684\u8863\u670D\u548C\u978B\u3002</p>
</li>
<li>
<p>\u7CFB\u7EDF\u4E2D\u63D0\u4F9B\u4E86\u4EA7\u54C1\u7684\u7C7B\u5E93\uFF0C\u4E14\u6240\u6709\u4EA7\u54C1\u7684\u63A5\u53E3\u76F8\u540C\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u4F9D\u8D56\u4EA7\u54C1\u5B9E\u4F8B\u7684\u521B\u5EFA\u7EC6\u8282\u548C\u5185\u90E8\u7ED3\u6784\u3002</p>
</li>
</ul>
<p>\u5982\uFF1A\u8F93\u5165\u6CD5\u6362\u76AE\u80A4\uFF0C\u4E00\u6574\u5957\u4E00\u8D77\u6362\u3002\u751F\u6210\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u7A0B\u5E8F\u3002</p>
<h3 id="_4-2-5-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-2-5-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.2.5 \u6A21\u5F0F\u6269\u5C55</h3>
<p><strong>\u7B80\u5355\u5DE5\u5382+\u914D\u7F6E\u6587\u4EF6\u89E3\u9664\u8026\u5408</strong></p>
<p>\u53EF\u4EE5\u901A\u8FC7\u5DE5\u5382\u6A21\u5F0F+\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u89E3\u9664\u5DE5\u5382\u5BF9\u8C61\u548C\u4EA7\u54C1\u5BF9\u8C61\u7684\u8026\u5408\u3002\u5728\u5DE5\u5382\u7C7B\u4E2D\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5168\u7C7B\u540D\uFF0C\u5E76\u521B\u5EFA\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\uFF0C\u5BA2\u6237\u7AEF\u5982\u679C\u9700\u8981\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FDB\u884C\u83B7\u53D6\u5373\u53EF\u3002</p>
<p>\u7B2C\u4E00\u6B65\uFF1A\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6</p>
<p>\u4E3A\u4E86\u6F14\u793A\u65B9\u4FBF\uFF0C\u6211\u4EEC\u4F7F\u7528 properties \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\uFF0C\u540D\u79F0\u4E3A bean.properties</p>
<div class="language-properties ext-properties line-numbers-mode"><pre v-pre class="language-properties"><code><span class="token key attr-name">american</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.AmericanCoffee</span>
<span class="token key attr-name">latte</span><span class="token punctuation">=</span><span class="token value attr-value">com.itheima.pattern.factory.config_factory.LatteCoffee</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u6B65\uFF1A\u6539\u8FDB\u5DE5\u5382\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Coffee</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">CoffeeFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"bean.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            p<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u904D\u5386Properties\u96C6\u5408\u5BF9\u8C61</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> keys <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u6839\u636E\u952E\u83B7\u53D6\u503C\uFF08\u5168\u7C7B\u540D\uFF09</span>
                <span class="token class-name">String</span> className <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u83B7\u53D6\u5B57\u8282\u7801\u5BF9\u8C61</span>
                <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Coffee</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Coffee</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9759\u6001\u6210\u5458\u53D8\u91CF\u7528\u6765\u5B58\u50A8\u521B\u5EFA\u7684\u5BF9\u8C61\uFF08\u952E\u5B58\u50A8\u7684\u662F\u540D\u79F0\uFF0C\u503C\u5B58\u50A8\u7684\u662F\u5BF9\u5E94\u7684\u5BF9\u8C61\uFF09\uFF0C\u800C\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4EE5\u53CA\u521B\u5EFA\u5BF9\u8C61\u5199\u5728\u9759\u6001\u4EE3\u7801\u5757\u4E2D\uFF0C\u76EE\u7684\u5C31\u662F\u53EA\u9700\u8981\u6267\u884C\u4E00\u6B21\u3002</p>
<h3 id="_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_4-2-6-jdk-\u6E90\u7801\u89E3\u6790-collection-iterator-\u65B9\u6CD5" aria-hidden="true">#</a> 4.2.6 JDK \u6E90\u7801\u89E3\u6790-Collection.iterator \u65B9\u6CD5</h3>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u4EE4\u72D0\u51B2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u98CE\u6E05\u626C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"\u4EFB\u6211\u884C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> ele <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E0A\u9762\u7684\u4EE3\u7801\u5927\u5BB6\u5E94\u8BE5\u5F88\u719F\uFF0C\u4F7F\u7528\u8FED\u4EE3\u5668\u904D\u5386\u96C6\u5408\uFF0C\u83B7\u53D6\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002\u800C\u5355\u5217\u96C6\u5408\u83B7\u53D6\u8FED\u4EE3\u5668\u7684\u65B9\u6CD5\u5C31\u4F7F\u7528\u5230\u4E86\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3002\u6211\u4EEC\u770B\u901A\u8FC7\u7C7B\u56FE\u770B\u770B\u7ED3\u6784\uFF1A</p>
<img src="/img/jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:75%;" />
<p>Collection \u63A5\u53E3\u662F\u62BD\u8C61\u5DE5\u5382\u7C7B\uFF0CArrayList \u662F\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\uFF1BIterator \u63A5\u53E3\u662F\u62BD\u8C61\u5546\u54C1\u7C7B\uFF0CArrayList \u7C7B\u4E2D\u7684 Iter \u5185\u90E8\u7C7B\u662F\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u3002\u5728\u5177\u4F53\u7684\u5DE5\u5382\u7C7B\u4E2D iterator()\u65B9\u6CD5\u521B\u5EFA\u5177\u4F53\u7684\u5546\u54C1\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<blockquote>
<p>\u53E6\uFF1A</p>
<p>\u200B 1,DateForamt \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p>
<p>\u200B 2,Calendar \u7C7B\u4E2D\u7684 getInstance()\u65B9\u6CD5\u4F7F\u7528\u7684\u662F\u5DE5\u5382\u6A21\u5F0F\uFF1B</p>
</blockquote>
<h2 id="_4-3-\u539F\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-3-\u539F\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 4.3 \u539F\u578B\u6A21\u5F0F</h2>
<h3 id="_4-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.3.1 \u6982\u8FF0</h3>
<p>\u7528\u4E00\u4E2A\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u539F\u578B\uFF0C\u901A\u8FC7\u590D\u5236\u8BE5\u539F\u578B\u5BF9\u8C61\u6765\u521B\u5EFA\u4E00\u4E2A\u548C\u539F\u578B\u5BF9\u8C61\u76F8\u540C\u7684\u65B0\u5BF9\u8C61\u3002</p>
<h3 id="_4-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.3.2 \u7ED3\u6784</h3>
<p>\u539F\u578B\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u539F\u578B\u7C7B\uFF1A\u89C4\u5B9A\u4E86\u5177\u4F53\u539F\u578B\u5BF9\u8C61\u5FC5\u987B\u5B9E\u73B0\u7684\u7684 clone() \u65B9\u6CD5\u3002</li>
<li>\u5177\u4F53\u539F\u578B\u7C7B\uFF1A\u5B9E\u73B0\u62BD\u8C61\u539F\u578B\u7C7B\u7684 clone() \u65B9\u6CD5\uFF0C\u5B83\u662F\u53EF\u88AB\u590D\u5236\u7684\u5BF9\u8C61\u3002</li>
<li>\u8BBF\u95EE\u7C7B\uFF1A\u4F7F\u7528\u5177\u4F53\u539F\u578B\u7C7B\u4E2D\u7684 clone() \u65B9\u6CD5\u6765\u590D\u5236\u65B0\u7684\u5BF9\u8C61\u3002</li>
</ul>
<p>\u63A5\u53E3\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u539F\u578B\u6A21\u5F0F.png" alt=""></p>
<h3 id="_4-3-3-\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_4-3-3-\u5B9E\u73B0" aria-hidden="true">#</a> 4.3.3 \u5B9E\u73B0</h3>
<p>\u539F\u578B\u6A21\u5F0F\u7684\u514B\u9686\u5206\u4E3A\u6D45\u514B\u9686\u548C\u6DF1\u514B\u9686\u3002</p>
<blockquote>
<p>\u6D45\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u7684\u5C5E\u6027\u548C\u539F\u6765\u5BF9\u8C61\u5B8C\u5168\u76F8\u540C\uFF0C\u5BF9\u4E8E\u975E\u57FA\u672C\u7C7B\u578B\u5C5E\u6027\uFF0C\u4ECD\u6307\u5411\u539F\u6709\u5C5E\u6027\u6240\u6307\u5411\u7684\u5BF9\u8C61\u7684\u5185\u5B58\u5730\u5740\u3002</p>
<p>\u6DF1\u514B\u9686\uFF1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u5C5E\u6027\u4E2D\u5F15\u7528\u7684\u5176\u4ED6\u5BF9\u8C61\u4E5F\u4F1A\u88AB\u514B\u9686\uFF0C\u4E0D\u518D\u6307\u5411\u539F\u6709\u5BF9\u8C61\u5730\u5740\u3002</p>
</blockquote>
<p>Java \u4E2D\u7684 Object \u7C7B\u4E2D\u63D0\u4F9B\u4E86 <code v-pre>clone()</code> \u65B9\u6CD5\u6765\u5B9E\u73B0\u6D45\u514B\u9686\u3002 Cloneable \u63A5\u53E3\u662F\u4E0A\u9762\u7684\u7C7B\u56FE\u4E2D\u7684\u62BD\u8C61\u539F\u578B\u7C7B\uFF0C\u800C\u5B9E\u73B0\u4E86 Cloneable \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5C31\u662F\u5177\u4F53\u7684\u539F\u578B\u7C7B\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p><strong>Realizetype\uFF08\u5177\u4F53\u7684\u539F\u578B\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Realizetype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5177\u4F53\u7684\u539F\u578B\u5BF9\u8C61\u521B\u5EFA\u5B8C\u6210\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Realizetype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5177\u4F53\u539F\u578B\u590D\u5236\u6210\u529F\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Realizetype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>PrototypeTest\uFF08\u6D4B\u8BD5\u8BBF\u95EE\u7C7B\uFF09\uFF1A</strong></p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypeTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Realizetype</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Realizetype</span> r2 <span class="token operator">=</span> r1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5BF9\u8C61r1\u548Cr2\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>r1 <span class="token operator">==</span> r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-4-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-3-4-\u6848\u4F8B" aria-hidden="true">#</a> 4.3.4 \u6848\u4F8B</h3>
<p><strong>\u7528\u539F\u578B\u6A21\u5F0F\u751F\u6210\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6</strong></p>
<p>\u540C\u4E00\u5B66\u6821\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u9664\u4E86\u83B7\u5956\u4EBA\u59D3\u540D\u4E0D\u540C\uFF0C\u5176\u4ED6\u90FD\u76F8\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u590D\u5236\u591A\u4E2A\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u51FA\u6765\uFF0C\u7136\u540E\u5728\u4FEE\u6539\u5956\u72B6\u4E0A\u7684\u540D\u5B57\u5373\u53EF\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F1.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u5956\u72B6\u7684\u540D\u5B57\u4FEE\u6539\u674E\u56DB</span>
        c2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.3.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u8C61\u7684\u521B\u5EFA\u975E\u5E38\u590D\u6742\uFF0C\u53EF\u4EE5\u4F7F\u7528\u539F\u578B\u6A21\u5F0F\u5FEB\u6377\u7684\u521B\u5EFA\u5BF9\u8C61\u3002</li>
<li>\u6027\u80FD\u548C\u5B89\u5168\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</li>
</ul>
<h3 id="_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" tabindex="-1"><a class="header-anchor" href="#_4-3-6-\u6269\u5C55-\u6DF1\u514B\u9686" aria-hidden="true">#</a> 4.3.6 \u6269\u5C55\uFF08\u6DF1\u514B\u9686\uFF09</h3>
<p>\u5C06\u4E0A\u9762\u7684\u201C\u4E09\u597D\u5B66\u751F\u201D\u5956\u72B6\u7684\u6848\u4F8B\u4E2D Citation \u7C7B\u7684 name \u5C5E\u6027\u4FEE\u6539\u4E3A Student \u7C7B\u578B\u7684\u5C5E\u6027\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5956\u72B6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Student</span> stu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStu</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stu <span class="token operator">=</span> stu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u540C\u5B66\uFF1A\u57282020\u5B66\u5E74\u7B2C\u4E00\u5B66\u671F\u4E2D\u8868\u73B0\u4F18\u79C0\uFF0C\u88AB\u8BC4\u4E3A\u4E09\u597D\u5B66\u751F\u3002\u7279\u53D1\u6B64\u72B6\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B66\u751F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>

        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> <span class="token string">"\u897F\u5B89"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u590D\u5236\u5956\u72B6</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F2.png" style="zoom:80%;" />
<div color="red">\u8BF4\u660E\uFF1A</div>
<p>\u200B stu \u5BF9\u8C61\u548C stu1 \u5BF9\u8C61\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5C06 stu1 \u5BF9\u8C61\u4E2D name \u5C5E\u6027\u503C\u6539\u4E3A\u201C\u674E\u56DB\u201D\uFF0C\u4E24\u4E2A Citation\uFF08\u5956\u72B6\uFF09\u5BF9\u8C61\u4E2D\u663E\u793A\u7684\u90FD\u662F\u674E\u56DB\u3002\u8FD9\u5C31\u662F\u6D45\u514B\u9686\u7684\u6548\u679C\uFF0C\u5BF9\u5177\u4F53\u539F\u578B\u7C7B\uFF08Citation\uFF09\u4E2D\u7684\u5F15\u7528\u7C7B\u578B\u7684\u5C5E\u6027\u8FDB\u884C\u5F15\u7528\u7684\u590D\u5236\u3002\u8FD9\u79CD\u60C5\u51B5\u9700\u8981\u4F7F\u7528\u6DF1\u514B\u9686\uFF0C\u800C\u8FDB\u884C\u6DF1\u514B\u9686\u9700\u8981\u4F7F\u7528\u5BF9\u8C61\u6D41\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> <span class="token string">"\u897F\u5B89"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u8F93\u51FA\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06c1\u5BF9\u8C61\u5199\u51FA\u5230\u6587\u4EF6\u4E2D</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u5BF9\u8C61\u51FA\u5165\u6D41\u5BF9\u8C61</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BFB\u53D6\u5BF9\u8C61</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6c2\u5956\u72B6\u6240\u5C5E\u5B66\u751F\u5BF9\u8C61</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5224\u65ADstu\u5BF9\u8C61\u548Cstu1\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stu\u548Cstu1\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>stu <span class="token operator">==</span> stu1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\u4E3A\uFF1A</p>
<img src="\\img\\\u539F\u578B\u6A21\u5F0F3.png" style="zoom:80%;" />
<blockquote>
<p>\u6CE8\u610F\uFF1ACitation \u7C7B\u548C Student \u7C7B\u5FC5\u987B\u5B9E\u73B0 Serializable \u63A5\u53E3\uFF0C\u5426\u5219\u4F1A\u629B NotSerializableException \u5F02\u5E38\u3002</p>
</blockquote>
<h2 id="_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-5-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.5 \u5EFA\u9020\u8005\u6A21\u5F0F</h2>
<h3 id="_4-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 4.4.1 \u6982\u8FF0</h3>
<p>\u5C06\u4E00\u4E2A\u590D\u6742\u5BF9\u8C61\u7684\u6784\u5EFA\u4E0E\u8868\u793A\u5206\u79BB\uFF0C\u4F7F\u5F97\u540C\u6837\u7684\u6784\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u8868\u793A\u3002</p>
<img src="/img/image-20200413225341516.png" style="zoom:60%;" />
<ul>
<li>\u5206\u79BB\u4E86\u90E8\u4EF6\u7684\u6784\u9020(\u7531 Builder \u6765\u8D1F\u8D23)\u548C\u88C5\u914D(\u7531 Director \u8D1F\u8D23)\u3002 \u4ECE\u800C\u53EF\u4EE5\u6784\u9020\u51FA\u590D\u6742\u7684\u5BF9\u8C61\u3002\u8FD9\u4E2A\u6A21\u5F0F\u9002\u7528\u4E8E\uFF1A\u67D0\u4E2A\u5BF9\u8C61\u7684\u6784\u5EFA\u8FC7\u7A0B\u590D\u6742\u7684\u60C5\u51B5\u3002</li>
<li>\u7531\u4E8E\u5B9E\u73B0\u4E86\u6784\u5EFA\u548C\u88C5\u914D\u7684\u89E3\u8026\u3002\u4E0D\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u76F8\u540C\u7684\u88C5\u914D\uFF0C\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\uFF1B\u76F8\u540C\u7684\u6784\u5EFA\u5668\uFF0C\u4E0D\u540C\u7684\u88C5\u914D\u987A\u5E8F\u4E5F\u53EF\u4EE5\u505A\u51FA\u4E0D\u540C\u7684\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u5B9E\u73B0\u4E86\u6784\u5EFA\u7B97\u6CD5\u3001\u88C5\u914D\u7B97\u6CD5\u7684\u89E3\u8026\uFF0C\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\u3002</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u5C06\u90E8\u4EF6\u548C\u5176\u7EC4\u88C5\u8FC7\u7A0B\u5206\u5F00\uFF0C\u4E00\u6B65\u4E00\u6B65\u521B\u5EFA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002\u7528\u6237\u53EA\u9700\u8981\u6307\u5B9A\u590D\u6742\u5BF9\u8C61\u7684\u7C7B\u578B\u5C31\u53EF\u4EE5\u5F97\u5230\u8BE5\u5BF9\u8C61\uFF0C\u800C\u65E0\u987B\u77E5\u9053\u5176\u5185\u90E8\u7684\u5177\u4F53\u6784\u9020\u7EC6\u8282\u3002</li>
</ul>
<h3 id="_4-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_4-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 4.4.2 \u7ED3\u6784</h3>
<p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u5305\u542B\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\uFF08Builder\uFF09\uFF1A\u8FD9\u4E2A\u63A5\u53E3\u89C4\u5B9A\u8981\u5B9E\u73B0\u590D\u6742\u5BF9\u8C61\u7684\u90A3\u4E9B\u90E8\u5206\u7684\u521B\u5EFA\uFF0C\u5E76\u4E0D\u6D89\u53CA\u5177\u4F53\u7684\u90E8\u4EF6\u5BF9\u8C61\u7684\u521B\u5EFA\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u5EFA\u9020\u8005\u7C7B\uFF08ConcreteBuilder\uFF09\uFF1A\u5B9E\u73B0 Builder \u63A5\u53E3\uFF0C\u5B8C\u6210\u590D\u6742\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u4EF6\u7684\u5177\u4F53\u521B\u5EFA\u65B9\u6CD5\u3002\u5728\u6784\u9020\u8FC7\u7A0B\u5B8C\u6210\u540E\uFF0C\u63D0\u4F9B\u4EA7\u54C1\u7684\u5B9E\u4F8B\u3002</p>
</li>
<li>
<p>\u4EA7\u54C1\u7C7B\uFF08Product\uFF09\uFF1A\u8981\u521B\u5EFA\u7684\u590D\u6742\u5BF9\u8C61\u3002</p>
</li>
<li>
<p>\u6307\u6325\u8005\u7C7B\uFF08Director\uFF09\uFF1A\u8C03\u7528\u5177\u4F53\u5EFA\u9020\u8005\u6765\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u5404\u4E2A\u90E8\u5206\uFF0C\u5728\u6307\u5BFC\u8005\u4E2D\u4E0D\u6D89\u53CA\u5177\u4F53\u4EA7\u54C1\u7684\u4FE1\u606F\uFF0C\u53EA\u8D1F\u8D23\u4FDD\u8BC1\u5BF9\u8C61\u5404\u90E8\u5206\u5B8C\u6574\u521B\u5EFA\u6216\u6309\u67D0\u79CD\u987A\u5E8F\u521B\u5EFA\u3002</p>
</li>
</ul>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F.png" style="zoom:80%;" />
<h3 id="_4-4-3-\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-4-3-\u5B9E\u4F8B" aria-hidden="true">#</a> 4.4.3 \u5B9E\u4F8B</h3>
<p><strong>\u521B\u5EFA\u5171\u4EAB\u5355\u8F66</strong></p>
<p>\u751F\u4EA7\u81EA\u884C\u8F66\u662F\u4E00\u4E2A\u590D\u6742\u7684\u8FC7\u7A0B\uFF0C\u5B83\u5305\u542B\u4E86\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\u7684\u751F\u4EA7\u3002\u800C\u8F66\u67B6\u53C8\u6709\u78B3\u7EA4\u7EF4\uFF0C\u94DD\u5408\u91D1\u7B49\u6750\u8D28\u7684\uFF0C\u8F66\u5EA7\u6709\u6A61\u80F6\uFF0C\u771F\u76AE\u7B49\u6750\u8D28\u3002\u5BF9\u4E8E\u81EA\u884C\u8F66\u7684\u751F\u4EA7\u5C31\u53EF\u4EE5\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u3002</p>
<p>\u8FD9\u91CC Bike \u662F\u4EA7\u54C1\uFF0C\u5305\u542B\u8F66\u67B6\uFF0C\u8F66\u5EA7\u7B49\u7EC4\u4EF6\uFF1BBuilder \u662F\u62BD\u8C61\u5EFA\u9020\u8005\uFF0CMobikeBuilder \u548C OfoBuilder \u662F\u5177\u4F53\u7684\u5EFA\u9020\u8005\uFF1BDirector \u662F\u6307\u6325\u8005\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5EFA\u9020\u8005\u6A21\u5F0F1.png" style="zoom:80%;" />
<p>\u5177\u4F53\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u81EA\u884C\u8F66\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bike</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> frame<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> seat<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token class-name">String</span> frame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frame <span class="token operator">=</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token class-name">String</span> seat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seat <span class="token operator">=</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6469\u62DC\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobikeBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"\u94DD\u5408\u91D1\u8F66\u67B6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"\u771F\u76AE\u8F66\u5EA7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ofo\u5355\u8F66Builder\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OfoBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">"\u78B3\u7EA4\u7EF4\u8F66\u67B6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">"\u6A61\u80F6\u8F66\u5EA7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6307\u6325\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Builder</span> mBuilder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder <span class="token operator">=</span> builder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mBuilder<span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MobikeBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Director</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bike</span> bike <span class="token operator">=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F\uFF1A</strong></p>
<p>\u4E0A\u9762\u793A\u4F8B\u662F Builder \u6A21\u5F0F\u7684\u5E38\u89C4\u7528\u6CD5\uFF0C\u6307\u6325\u8005\u7C7B Director \u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\u5177\u6709\u5F88\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u5B83\u7528\u4E8E\u6307\u5BFC\u5177\u4F53\u6784\u5EFA\u8005\u5982\u4F55\u6784\u5EFA\u4EA7\u54C1\uFF0C\u63A7\u5236\u8C03\u7528\u5148\u540E\u6B21\u5E8F\uFF0C\u5E76\u5411\u8C03\u7528\u8005\u8FD4\u56DE\u5B8C\u6574\u7684\u4EA7\u54C1\u7C7B\uFF0C\u4F46\u662F\u6709\u4E9B\u60C5\u51B5\u4E0B\u9700\u8981\u7B80\u5316\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u53EF\u4EE5\u628A\u6307\u6325\u8005\u7C7B\u548C\u62BD\u8C61\u5EFA\u9020\u8005\u8FDB\u884C\u7ED3\u5408</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">// \u62BD\u8C61 builder \u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>BuildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u8BF4\u660E\uFF1A</strong></p>
<p>\u8FD9\u6837\u505A\u786E\u5B9E\u7B80\u5316\u4E86\u7CFB\u7EDF\u7ED3\u6784\uFF0C\u4F46\u540C\u65F6\u4E5F\u52A0\u91CD\u4E86\u62BD\u8C61\u5EFA\u9020\u8005\u7C7B\u7684\u804C\u8D23\uFF0C\u4E5F\u4E0D\u662F\u592A\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\uFF0C\u5982\u679C construct() \u8FC7\u4E8E\u590D\u6742\uFF0C\u5EFA\u8BAE\u8FD8\u662F\u5C01\u88C5\u5230 Director \u4E2D\u3002</p>
<h3 id="_4-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_4-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 4.4.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u5C01\u88C5\u6027\u5F88\u597D\u3002\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u53EF\u4EE5\u6709\u6548\u7684\u5C01\u88C5\u53D8\u5316\uFF0C\u5728\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u7684\u573A\u666F\u4E2D\uFF0C\u4E00\u822C\u4EA7\u54C1\u7C7B\u548C\u5EFA\u9020\u8005\u7C7B\u662F\u6BD4\u8F83\u7A33\u5B9A\u7684\uFF0C\u56E0\u6B64\uFF0C\u5C06\u4E3B\u8981\u7684\u4E1A\u52A1\u903B\u8F91\u5C01\u88C5\u5728\u6307\u6325\u8005\u7C7B\u4E2D\u5BF9\u6574\u4F53\u800C\u8A00\u53EF\u4EE5\u53D6\u5F97\u6BD4\u8F83\u597D\u7684\u7A33\u5B9A\u6027\u3002</li>
<li>\u5728\u5EFA\u9020\u8005\u6A21\u5F0F\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4E0D\u5FC5\u77E5\u9053\u4EA7\u54C1\u5185\u90E8\u7EC4\u6210\u7684\u7EC6\u8282\uFF0C\u5C06\u4EA7\u54C1\u672C\u8EAB\u4E0E\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B\u89E3\u8026\uFF0C\u4F7F\u5F97\u76F8\u540C\u7684\u521B\u5EFA\u8FC7\u7A0B\u53EF\u4EE5\u521B\u5EFA\u4E0D\u540C\u7684\u4EA7\u54C1\u5BF9\u8C61\u3002</li>
<li>\u53EF\u4EE5\u66F4\u52A0\u7CBE\u7EC6\u5730\u63A7\u5236\u4EA7\u54C1\u7684\u521B\u5EFA\u8FC7\u7A0B \u3002\u5C06\u590D\u6742\u4EA7\u54C1\u7684\u521B\u5EFA\u6B65\u9AA4\u5206\u89E3\u5728\u4E0D\u540C\u7684\u65B9\u6CD5\u4E2D\uFF0C\u4F7F\u5F97\u521B\u5EFA\u8FC7\u7A0B\u66F4\u52A0\u6E05\u6670\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4F7F\u7528\u7A0B\u5E8F\u6765\u63A7\u5236\u521B\u5EFA\u8FC7\u7A0B\u3002</li>
<li>\u5EFA\u9020\u8005\u6A21\u5F0F\u5F88\u5BB9\u6613\u8FDB\u884C\u6269\u5C55\u3002\u5982\u679C\u6709\u65B0\u7684\u9700\u6C42\uFF0C\u901A\u8FC7\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u5EFA\u9020\u8005\u7C7B\u5C31\u53EF\u4EE5\u5B8C\u6210\uFF0C\u57FA\u672C\u4E0A\u4E0D\u7528\u4FEE\u6539\u4E4B\u524D\u5DF2\u7ECF\u6D4B\u8BD5\u901A\u8FC7\u7684\u4EE3\u7801\uFF0C\u56E0\u6B64\u4E5F\u5C31\u4E0D\u4F1A\u5BF9\u539F\u6709\u529F\u80FD\u5F15\u5165\u98CE\u9669\u3002\u7B26\u5408\u5F00\u95ED\u539F\u5219\u3002</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<p>\u9020\u8005\u6A21\u5F0F\u6240\u521B\u5EFA\u7684\u4EA7\u54C1\u4E00\u822C\u5177\u6709\u8F83\u591A\u7684\u5171\u540C\u70B9\uFF0C\u5176\u7EC4\u6210\u90E8\u5206\u76F8\u4F3C\uFF0C\u5982\u679C\u4EA7\u54C1\u4E4B\u95F4\u7684\u5DEE\u5F02\u6027\u5F88\u5927\uFF0C\u5219\u4E0D\u9002\u5408\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u56E0\u6B64\u5176\u4F7F\u7528\u8303\u56F4\u53D7\u5230\u4E00\u5B9A\u7684\u9650\u5236\u3002</p>
<h3 id="_4-4-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_4-4-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 4.4.5 \u4F7F\u7528\u573A\u666F</h3>
<p>\u5EFA\u9020\u8005\uFF08Builder\uFF09\u6A21\u5F0F\u521B\u5EFA\u7684\u662F\u590D\u6742\u5BF9\u8C61\uFF0C\u5176\u4EA7\u54C1\u7684\u5404\u4E2A\u90E8\u5206\u7ECF\u5E38\u9762\u4E34\u7740\u5267\u70C8\u7684\u53D8\u5316\uFF0C\u4F46\u5C06\u5B83\u4EEC\u7EC4\u5408\u5728\u4E00\u8D77\u7684\u7B97\u6CD5\u5374\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u6240\u4EE5\u5B83\u901A\u5E38\u5728\u4EE5\u4E0B\u573A\u5408\u4F7F\u7528\u3002</p>
<ul>
<li>\u521B\u5EFA\u7684\u5BF9\u8C61\u8F83\u590D\u6742\uFF0C\u7531\u591A\u4E2A\u90E8\u4EF6\u6784\u6210\uFF0C\u5404\u90E8\u4EF6\u9762\u4E34\u7740\u590D\u6742\u7684\u53D8\u5316\uFF0C\u4F46\u6784\u4EF6\u95F4\u7684\u5EFA\u9020\u987A\u5E8F\u662F\u7A33\u5B9A\u7684\u3002</li>
<li>\u521B\u5EFA\u590D\u6742\u5BF9\u8C61\u7684\u7B97\u6CD5\u72EC\u7ACB\u4E8E\u8BE5\u5BF9\u8C61\u7684\u7EC4\u6210\u90E8\u5206\u4EE5\u53CA\u5B83\u4EEC\u7684\u88C5\u914D\u65B9\u5F0F\uFF0C\u5373\u4EA7\u54C1\u7684\u6784\u5EFA\u8FC7\u7A0B\u548C\u6700\u7EC8\u7684\u8868\u793A\u662F\u72EC\u7ACB\u7684\u3002</li>
</ul>
<h3 id="_4-4-6-\u6A21\u5F0F\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_4-4-6-\u6A21\u5F0F\u6269\u5C55" aria-hidden="true">#</a> 4.4.6 \u6A21\u5F0F\u6269\u5C55</h3>
<p>\u5EFA\u9020\u8005\u6A21\u5F0F\u9664\u4E86\u4E0A\u9762\u7684\u7528\u9014\u5916\uFF0C\u5728\u5F00\u53D1\u4E2D\u8FD8\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u4F7F\u7528\u65B9\u5F0F\uFF0C\u5C31\u662F\u5F53\u4E00\u4E2A\u7C7B\u6784\u9020\u5668\u9700\u8981\u4F20\u5165\u5F88\u591A\u53C2\u6570\u65F6\uFF0C\u5982\u679C\u521B\u5EFA\u8FD9\u4E2A\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4EE3\u7801\u53EF\u8BFB\u6027\u4F1A\u975E\u5E38\u5DEE\uFF0C\u800C\u4E14\u5F88\u5BB9\u6613\u5F15\u5165\u9519\u8BEF\uFF0C\u6B64\u65F6\u5C31\u53EF\u4EE5\u5229\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\u8FDB\u884C\u91CD\u6784\u3002</p>
<p>\u91CD\u6784\u524D\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">,</span> <span class="token class-name">String</span> screen<span class="token punctuation">,</span> <span class="token class-name">String</span> memory<span class="token punctuation">,</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setScreen</span><span class="token punctuation">(</span><span class="token class-name">String</span> screen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screen <span class="token operator">=</span> screen<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">String</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMainboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> mainboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mainboard <span class="token operator">=</span> mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u6784\u5EFAPhone\u5BF9\u8C61</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">"intel"</span><span class="token punctuation">,</span><span class="token string">"\u4E09\u661F\u5C4F\u5E55"</span><span class="token punctuation">,</span><span class="token string">"\u91D1\u58EB\u987F"</span><span class="token punctuation">,</span><span class="token string">"\u534E\u7855"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u5728\u5BA2\u6237\u7AEF\u4EE3\u7801\u4E2D\u6784\u5EFA Phone \u5BF9\u8C61\uFF0C\u4F20\u9012\u4E86\u56DB\u4E2A\u53C2\u6570\uFF0C\u5982\u679C\u53C2\u6570\u66F4\u591A\u5462\uFF1F\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\u53CA\u4F7F\u7528\u7684\u6210\u672C\u5C31\u662F\u6BD4\u8F83\u9AD8\u3002</p>
<p>\u91CD\u6784\u540E\u4EE3\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cpu <span class="token operator">=</span> builder<span class="token punctuation">.</span>cpu<span class="token punctuation">;</span>
        screen <span class="token operator">=</span> builder<span class="token punctuation">.</span>screen<span class="token punctuation">;</span>
        memory <span class="token operator">=</span> builder<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
        mainboard <span class="token operator">=</span> builder<span class="token punctuation">.</span>mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cpu <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">screen</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            screen <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">memory</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            memory <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mainboard <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Phone{"</span> <span class="token operator">+</span>
                <span class="token string">"cpu='"</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", screen='"</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", memory='"</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token string">", mainboard='"</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">cpu</span><span class="token punctuation">(</span><span class="token string">"intel"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token string">"\u534E\u7855"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token string">"\u91D1\u58EB\u987F"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">screen</span><span class="token punctuation">(</span><span class="token string">"\u4E09\u661F"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u6784\u540E\u7684\u4EE3\u7801\u5728\u4F7F\u7528\u8D77\u6765\u66F4\u65B9\u4FBF\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u4E5F\u53EF\u4EE5\u63D0\u9AD8\u5F00\u53D1\u6548\u7387\u3002\u4ECE\u8F6F\u4EF6\u8BBE\u8BA1\u4E0A\uFF0C\u5BF9\u7A0B\u5E8F\u5458\u7684\u8981\u6C42\u6BD4\u8F83\u9AD8\u3002</p>
<h2 id="_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_4-6-\u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4" aria-hidden="true">#</a> 4.6 \u521B\u5EFA\u8005\u6A21\u5F0F\u5BF9\u6BD4</h2>
<h3 id="_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-1-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.1 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3>
<p>\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u6574\u4F53\u5BF9\u8C61\u7684\u521B\u5EFA\u65B9\u5F0F\uFF1B\u800C\u5EFA\u9020\u8005\u6A21\u5F0F\u6CE8\u91CD\u7684\u662F\u90E8\u4EF6\u6784\u5EFA\u7684\u8FC7\u7A0B\uFF0C\u610F\u5728\u901A\u8FC7\u4E00\u6B65\u4E00\u6B65\u5730\u7CBE\u786E\u6784\u9020\u521B\u5EFA\u51FA\u4E00\u4E2A\u590D\u6742\u7684\u5BF9\u8C61\u3002</p>
<p>\u6211\u4EEC\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\u6765\u8BF4\u660E\u4E24\u8005\u7684\u5DEE\u5F02\uFF0C\u5982\u8981\u5236\u9020\u4E00\u4E2A\u8D85\u4EBA\uFF0C\u5982\u679C\u4F7F\u7528\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u76F4\u63A5\u4EA7\u751F\u51FA\u6765\u7684\u5C31\u662F\u4E00\u4E2A\u529B\u5927\u65E0\u7A77\u3001\u80FD\u591F\u98DE\u7FD4\u3001\u5185\u88E4\u5916\u7A7F\u7684\u8D85\u4EBA\uFF1B\u800C\u5982\u679C\u4F7F\u7528\u5EFA\u9020\u8005\u6A21\u5F0F\uFF0C\u5219\u9700\u8981\u7EC4\u88C5\u624B\u3001\u5934\u3001\u811A\u3001\u8EAF\u5E72\u7B49\u90E8\u5206\uFF0C\u7136\u540E\u518D\u628A\u5185\u88E4\u5916\u7A7F\uFF0C\u4E8E\u662F\u4E00\u4E2A\u8D85\u4EBA\u5C31\u8BDE\u751F\u4E86\u3002</p>
<h3 id="_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-2-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F-vs-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6.2 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F VS \u5EFA\u9020\u8005\u6A21\u5F0F</h3>
<p>\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5B9E\u73B0\u5BF9\u4EA7\u54C1\u5BB6\u65CF\u7684\u521B\u5EFA\uFF0C\u4E00\u4E2A\u4EA7\u54C1\u5BB6\u65CF\u662F\u8FD9\u6837\u7684\u4E00\u7CFB\u5217\u4EA7\u54C1\uFF1A\u5177\u6709\u4E0D\u540C\u5206\u7C7B\u7EF4\u5EA6\u7684\u4EA7\u54C1\u7EC4\u5408\uFF0C\u91C7\u7528\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u5219\u662F\u4E0D\u9700\u8981\u5173\u5FC3\u6784\u5EFA\u8FC7\u7A0B\uFF0C\u53EA\u5173\u5FC3\u4EC0\u4E48\u4EA7\u54C1\u7531\u4EC0\u4E48\u5DE5\u5382\u751F\u4EA7\u5373\u53EF\u3002</p>
<p>\u5EFA\u9020\u8005\u6A21\u5F0F\u5219\u662F\u8981\u6C42\u6309\u7167\u6307\u5B9A\u7684\u84DD\u56FE\u5EFA\u9020\u4EA7\u54C1\uFF0C\u5B83\u7684\u4E3B\u8981\u76EE\u7684\u662F\u901A\u8FC7\u7EC4\u88C5\u96F6\u914D\u4EF6\u800C\u4EA7\u751F\u4E00\u4E2A\u65B0\u4EA7\u54C1\u3002</p>
<p>\u5982\u679C\u5C06\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u770B\u6210\u6C7D\u8F66\u914D\u4EF6\u751F\u4EA7\u5DE5\u5382\uFF0C\u751F\u4EA7\u4E00\u4E2A\u4EA7\u54C1\u65CF\u7684\u4EA7\u54C1\uFF0C\u90A3\u4E48\u5EFA\u9020\u8005\u6A21\u5F0F\u5C31\u662F\u4E00\u4E2A\u6C7D\u8F66\u7EC4\u88C5\u5DE5\u5382\uFF0C\u901A\u8FC7\u5BF9\u90E8\u4EF6\u7684\u7EC4\u88C5\u53EF\u4EE5\u8FD4\u56DE\u4E00\u8F86\u5B8C\u6574\u7684\u6C7D\u8F66\u3002</p>
<h1 id="_5-\u7ED3\u6784\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-\u7ED3\u6784\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 5\uFF0C\u7ED3\u6784\u578B\u6A21\u5F0F</h1>
<p>\u7ED3\u6784\u578B\u6A21\u5F0F\u63CF\u8FF0\u5982\u4F55\u5C06\u7C7B\u6216\u5BF9\u8C61\u6309\u67D0\u79CD\u5E03\u5C40\u7EC4\u6210\u66F4\u5927\u7684\u7ED3\u6784\u3002\u5B83\u5206\u4E3A\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u548C\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u7EC4\u7EC7\u63A5\u53E3\u548C\u7C7B\uFF0C\u540E\u8005\u91C6\u7528\u7EC4\u5408\u6216\u805A\u5408\u6765\u7EC4\u5408\u5BF9\u8C61\u3002</p>
<p>\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u7ED3\u6784\u578B\u6A21\u5F0F\u6BD4\u7C7B\u7ED3\u6784\u578B\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p>
<p>\u7ED3\u6784\u578B\u6A21\u5F0F\u5206\u4E3A\u4EE5\u4E0B 7 \u79CD\uFF1A</p>
<ul>
<li>\u4EE3\u7406\u6A21\u5F0F</li>
<li>\u9002\u914D\u5668\u6A21\u5F0F</li>
<li>\u88C5\u9970\u8005\u6A21\u5F0F</li>
<li>\u6865\u63A5\u6A21\u5F0F</li>
<li>\u5916\u89C2\u6A21\u5F0F</li>
<li>\u7EC4\u5408\u6A21\u5F0F</li>
<li>\u4EAB\u5143\u6A21\u5F0F</li>
</ul>
<h2 id="_5-1-\u4EE3\u7406\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-1-\u4EE3\u7406\u6A21\u5F0F" aria-hidden="true">#</a> 5.1 \u4EE3\u7406\u6A21\u5F0F</h2>
<h3 id="_5-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.1.1 \u6982\u8FF0</h3>
<p>\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u9700\u8981\u7ED9\u67D0\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u4EE3\u7406\u4EE5\u63A7\u5236\u5BF9\u8BE5\u5BF9\u8C61\u7684\u8BBF\u95EE\u3002\u8FD9\u65F6\uFF0C\u8BBF\u95EE\u5BF9\u8C61\u4E0D\u9002\u5408\u6216\u8005\u4E0D\u80FD\u76F4\u63A5\u5F15\u7528\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u7406\u5BF9\u8C61\u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u7684\u4E2D\u4ECB\u3002</p>
<p>Java \u4E2D\u7684\u4EE3\u7406\u6309\u7167\u4EE3\u7406\u7C7B\u751F\u6210\u65F6\u673A\u4E0D\u540C\u53C8\u5206\u4E3A\u9759\u6001\u4EE3\u7406\u548C\u52A8\u6001\u4EE3\u7406\u3002\u9759\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5728\u7F16\u8BD1\u671F\u5C31\u751F\u6210\uFF0C\u800C\u52A8\u6001\u4EE3\u7406\u4EE3\u7406\u7C7B\u5219\u662F\u5728 Java \u8FD0\u884C\u65F6\u52A8\u6001\u751F\u6210\u3002\u52A8\u6001\u4EE3\u7406\u53C8\u6709 JDK \u4EE3\u7406\u548C CGLib \u4EE3\u7406\u4E24\u79CD\u3002</p>
<h3 id="_5-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.1.2 \u7ED3\u6784</h3>
<p>\u4EE3\u7406\uFF08Proxy\uFF09\u6A21\u5F0F\u5206\u4E3A\u4E09\u79CD\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4E3B\u9898\uFF08Subject\uFF09\u7C7B\uFF1A \u901A\u8FC7\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u58F0\u660E\u771F\u5B9E\u4E3B\u9898\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li>
<li>\u771F\u5B9E\u4E3B\u9898\uFF08Real Subject\uFF09\u7C7B\uFF1A \u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u5177\u4F53\u4E1A\u52A1\uFF0C\u662F\u4EE3\u7406\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u771F\u5B9E\u5BF9\u8C61\uFF0C\u662F\u6700\u7EC8\u8981\u5F15\u7528\u7684\u5BF9\u8C61\u3002</li>
<li>\u4EE3\u7406\uFF08Proxy\uFF09\u7C7B \uFF1A \u63D0\u4F9B\u4E86\u4E0E\u771F\u5B9E\u4E3B\u9898\u76F8\u540C\u7684\u63A5\u53E3\uFF0C\u5176\u5185\u90E8\u542B\u6709\u5BF9\u771F\u5B9E\u4E3B\u9898\u7684\u5F15\u7528\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u3001\u63A7\u5236\u6216\u6269\u5C55\u771F\u5B9E\u4E3B\u9898\u7684\u529F\u80FD\u3002</li>
</ul>
<h3 id="_5-1-3-\u9759\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-3-\u9759\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.3 \u9759\u6001\u4EE3\u7406</h3>
<p>\u6211\u4EEC\u901A\u8FC7\u6848\u4F8B\u6765\u611F\u53D7\u4E00\u4E0B\u9759\u6001\u4EE3\u7406\u3002</p>
<p>\u3010\u4F8B\u3011\u706B\u8F66\u7AD9\u5356\u7968</p>
<p>\u5982\u679C\u8981\u4E70\u706B\u8F66\u7968\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u706B\u8F66\u7AD9\u4E70\u7968\uFF0C\u5750\u8F66\u5230\u706B\u8F66\u7AD9\uFF0C\u6392\u961F\u7B49\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\uFF0C\u663E\u7136\u6BD4\u8F83\u9EBB\u70E6\u3002\u800C\u706B\u8F66\u7AD9\u5728\u591A\u4E2A\u5730\u65B9\u90FD\u6709\u4EE3\u552E\u70B9\uFF0C\u6211\u4EEC\u53BB\u4EE3\u552E\u70B9\u4E70\u7968\u5C31\u65B9\u4FBF\u5F88\u591A\u4E86\u3002\u8FD9\u4E2A\u4F8B\u5B50\u5176\u5B9E\u5C31\u662F\u5178\u578B\u7684\u4EE3\u7406\u6A21\u5F0F\uFF0C\u706B\u8F66\u7AD9\u662F\u76EE\u6807\u5BF9\u8C61\uFF0C\u4EE3\u552E\u70B9\u662F\u4EE3\u7406\u5BF9\u8C61\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u9759\u6001\u4EE3\u7406.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u552E\u70B9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyPoint</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        station<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProxyPoint</span> pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pp<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u51FA\u6D4B\u8BD5\u7C7B\u76F4\u63A5\u8BBF\u95EE\u7684\u662F ProxyPoint \u7C7B\u5BF9\u8C61\uFF0C\u4E5F\u5C31\u662F\u8BF4 ProxyPoint \u4F5C\u4E3A\u8BBF\u95EE\u5BF9\u8C61\u548C\u76EE\u6807\u5BF9\u8C61\u7684\u4E2D\u4ECB\u3002\u540C\u65F6\u4E5F\u5BF9 sell \u65B9\u6CD5\u8FDB\u884C\u4E86\u589E\u5F3A\uFF08\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528\uFF09\u3002</p>
<h3 id="_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-4-jdk-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.4 JDK \u52A8\u6001\u4EE3\u7406</h3>
<p>\u63A5\u4E0B\u6765\u6211\u4EEC\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u5B9E\u73B0\u4E0A\u9762\u6848\u4F8B\uFF0C\u5148\u8BF4\u8BF4 JDK \u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u3002Java \u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2A\u52A8\u6001\u4EE3\u7406\u7C7B Proxy\uFF0CProxy \u5E76\u4E0D\u662F\u6211\u4EEC\u4E0A\u8FF0\u6240\u8BF4\u7684\u4EE3\u7406\u5BF9\u8C61\u7684\u7C7B\uFF0C\u800C\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\u7684\u9759\u6001\u65B9\u6CD5\uFF08newProxyInstance \u65B9\u6CD5\uFF09\u6765\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61\u3002</p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5356\u7968\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u706B\u8F66\u7AD9  \u706B\u8F66\u7AD9\u5177\u6709\u5356\u7968\u529F\u80FD\uFF0C\u6240\u4EE5\u9700\u8981\u5B9E\u73B0SellTickets\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\uFF0C\u7528\u6765\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4F7F\u7528Proxy\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token comment">/*
            newProxyInstance()\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                ClassLoader loader \uFF1A \u7C7B\u52A0\u8F7D\u5668\uFF0C\u7528\u4E8E\u52A0\u8F7D\u4EE3\u7406\u7C7B\uFF0C\u4F7F\u7528\u771F\u5B9E\u5BF9\u8C61\u7684\u7C7B\u52A0\u8F7D\u5668\u5373\u53EF
                Class&lt;?>[] interfaces \uFF1A \u771F\u5B9E\u5BF9\u8C61\u6240\u5B9E\u73B0\u7684\u63A5\u53E3\uFF0C\u4EE3\u7406\u6A21\u5F0F\u771F\u5B9E\u5BF9\u8C61\u548C\u4EE3\u7406\u5BF9\u8C61\u5B9E\u73B0\u76F8\u540C\u7684\u63A5\u53E3
                InvocationHandler h \uFF1A \u4EE3\u7406\u5BF9\u8C61\u7684\u8C03\u7528\u5904\u7406\u7A0B\u5E8F
         */</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">/*
                        InvocationHandler\u4E2Dinvoke\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
                            proxy \uFF1A \u4EE3\u7406\u5BF9\u8C61
                            method \uFF1A \u5BF9\u5E94\u4E8E\u5728\u4EE3\u7406\u5BF9\u8C61\u4E0A\u8C03\u7528\u7684\u63A5\u53E3\u65B9\u6CD5\u7684 Method \u5B9E\u4F8B
                            args \uFF1A \u4EE3\u7406\u5BF9\u8C61\u8C03\u7528\u63A5\u53E3\u65B9\u6CD5\u65F6\u4F20\u9012\u7684\u5B9E\u9645\u53C2\u6570
                     */</span>
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//\u6267\u884C\u771F\u5B9E\u5BF9\u8C61</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div color="red">\u4F7F\u7528\u4E86\u52A8\u6001\u4EE3\u7406\uFF0C\u6211\u4EEC\u601D\u8003\u4E0B\u9762\u95EE\u9898\uFF1A</div>
<ul>
<li>
<p>ProxyFactory \u662F\u4EE3\u7406\u7C7B\u5417\uFF1F</p>
<p>ProxyFactory \u4E0D\u662F\u4EE3\u7406\u6A21\u5F0F\u4E2D\u6240\u8BF4\u7684\u4EE3\u7406\u7C7B\uFF0C\u800C\u4EE3\u7406\u7C7B\u662F\u7A0B\u5E8F\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u7684\u5728\u5185\u5B58\u4E2D\u751F\u6210\u7684\u7C7B\u3002\u901A\u8FC7\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684 Java \u8BCA\u65AD\u5DE5\u5177\uFF08Arthas\u3010\u963F\u5C14\u8428\u65AF\u3011\uFF09\u67E5\u770B\u4EE3\u7406\u7C7B\u7684\u7ED3\u6784\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>jdk<span class="token punctuation">.</span></span><span class="token class-name">SellTickets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">UndeclaredThrowableException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m1<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m2<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m0<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            m1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"equals"</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"toString"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.proxy.dynamic.jdk.SellTickets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"sell"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m0 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"hashCode"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMethodException</span> noSuchMethodException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchMethodError</span><span class="token punctuation">(</span>noSuchMethodException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> classNotFoundException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoClassDefFoundError</span><span class="token punctuation">(</span>classNotFoundException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m1<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>object<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m0<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> <span class="token operator">|</span> <span class="token class-name">RuntimeException</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>throwable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u7684\u7C7B\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u4EE5\u4E0B\u51E0\u4E2A\u4FE1\u606F\uFF1A</p>
<ul>
<li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5B9E\u73B0\u4E86 SellTickets\u3002\u8FD9\u4E5F\u5C31\u5370\u8BC1\u4E86\u6211\u4EEC\u4E4B\u524D\u8BF4\u7684\u771F\u5B9E\u7C7B\u548C\u4EE3\u7406\u7C7B\u5B9E\u73B0\u540C\u6837\u7684\u63A5\u53E3\u3002</li>
<li>\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u5C06\u6211\u4EEC\u63D0\u4F9B\u4E86\u7684\u533F\u540D\u5185\u90E8\u7C7B\u5BF9\u8C61\u4F20\u9012\u7ED9\u4E86\u7236\u7C7B\u3002</li>
</ul>
</li>
<li>
<p>\u52A8\u6001\u4EE3\u7406\u7684\u6267\u884C\u6D41\u7A0B\u662F\u4EC0\u4E48\u6837\uFF1F</p>
<p>\u4E0B\u9762\u662F\u6458\u53D6\u7684\u91CD\u70B9\u4EE3\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7A0B\u5E8F\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u52A8\u6001\u751F\u6210\u7684\u4EE3\u7406\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.proxy.dynamic.jdk.SellTickets"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"sell"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Java\u63D0\u4F9B\u7684\u52A8\u6001\u4EE3\u7406\u76F8\u5173\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">;</span>

	<span class="token keyword">protected</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> h<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(JDK\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//\u6D4B\u8BD5\u8BBF\u95EE\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<p>\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\uFF1A</p>
<pre><code>1. \u5728\u6D4B\u8BD5\u7C7B\u4E2D\u901A\u8FC7\u4EE3\u7406\u5BF9\u8C61\u8C03\u7528sell()\u65B9\u6CD5
2. \u6839\u636E\u591A\u6001\u7684\u7279\u6027\uFF0C\u6267\u884C\u7684\u662F\u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5
3. \u4EE3\u7406\u7C7B\uFF08$Proxy0\uFF09\u4E2D\u7684sell()\u65B9\u6CD5\u4E2D\u53C8\u8C03\u7528\u4E86InvocationHandler\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u7684invoke\u65B9\u6CD5
4. invoke\u65B9\u6CD5\u901A\u8FC7\u53CD\u5C04\u6267\u884C\u4E86\u771F\u5B9E\u5BF9\u8C61\u6240\u5C5E\u7C7B(TrainStation)\u4E2D\u7684sell()\u65B9\u6CD5
</code></pre>
<h3 id="_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1-5-cglib-\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 5.1.5 CGLIB \u52A8\u6001\u4EE3\u7406</h3>
<p>\u540C\u6837\u662F\u4E0A\u9762\u7684\u6848\u4F8B\uFF0C\u6211\u4EEC\u518D\u6B21\u4F7F\u7528 CGLIB \u4EE3\u7406\u5B9E\u73B0\u3002</p>
<p>\u5982\u679C\u6CA1\u6709\u5B9A\u4E49 SellTickets \u63A5\u53E3\uFF0C\u53EA\u5B9A\u4E49\u4E86 TrainStation(\u706B\u8F66\u7AD9\u7C7B)\u3002\u5F88\u663E\u7136 JDK \u4EE3\u7406\u662F\u65E0\u6CD5\u4F7F\u7528\u4E86\uFF0C\u56E0\u4E3A JDK \u52A8\u6001\u4EE3\u7406\u8981\u6C42\u5FC5\u987B\u5B9A\u4E49\u63A5\u53E3\uFF0C\u5BF9\u63A5\u53E3\u8FDB\u884C\u4EE3\u7406\u3002</p>
<p>CGLIB \u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\uFF0C\u9AD8\u6027\u80FD\u7684\u4EE3\u7801\u751F\u6210\u5305\u3002\u5B83\u4E3A\u6CA1\u6709\u5B9E\u73B0\u63A5\u53E3\u7684\u7C7B\u63D0\u4F9B\u4EE3\u7406\uFF0C\u4E3A JDK \u7684\u52A8\u6001\u4EE3\u7406\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u8865\u5145\u3002</p>
<p>CGLIB \u662F\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u5305\uFF0C\u6240\u4EE5\u9700\u8981\u5F15\u5165 jar \u5305\u7684\u5750\u6807\uFF1A</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u706B\u8F66\u7AD9</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u706B\u8F66\u7AD9\u5356\u7968"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4EE3\u7406\u5DE5\u5382</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAEnhancer\u5BF9\u8C61\uFF0C\u7C7B\u4F3C\u4E8EJDK\u52A8\u6001\u4EE3\u7406\u7684Proxy\u7C7B\uFF0C\u4E0B\u4E00\u6B65\u5C31\u662F\u8BBE\u7F6E\u51E0\u4E2A\u53C2\u6570</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u7236\u7C7B\u7684\u5B57\u8282\u7801\u5BF9\u8C61</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
        intercept\u65B9\u6CD5\u53C2\u6570\u8BF4\u660E\uFF1A
            o \uFF1A \u4EE3\u7406\u5BF9\u8C61
            method \uFF1A \u771F\u5B9E\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684Method\u5B9E\u4F8B
            args \uFF1A \u5B9E\u9645\u53C2\u6570
            methodProxy \uFF1A\u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u7684method\u5B9E\u4F8B
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4EE3\u7406\u70B9\u6536\u53D6\u4E00\u4E9B\u670D\u52A1\u8D39\u7528(CGLIB\u52A8\u6001\u4EE3\u7406\u65B9\u5F0F)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrainStation</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u4EE3\u7406\u5DE5\u5382\u5BF9\u8C61</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61</span>
        <span class="token class-name">TrainStation</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_5-1-6-\u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4" aria-hidden="true">#</a> 5.1.6 \u4E09\u79CD\u4EE3\u7406\u7684\u5BF9\u6BD4</h3>
<ul>
<li>
<p>jdk \u4EE3\u7406\u548C CGLIB \u4EE3\u7406</p>
<p>\u4F7F\u7528 CGLib \u5B9E\u73B0\u52A8\u6001\u4EE3\u7406\uFF0CCGLib \u5E95\u5C42\u91C7\u7528 ASM \u5B57\u8282\u7801\u751F\u6210\u6846\u67B6\uFF0C\u4F7F\u7528\u5B57\u8282\u7801\u6280\u672F\u751F\u6210\u4EE3\u7406\u7C7B\uFF0C\u5728 JDK1.6 \u4E4B\u524D\u6BD4\u4F7F\u7528 Java \u53CD\u5C04\u6548\u7387\u8981\u9AD8\u3002\u552F\u4E00\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0CCGLib \u4E0D\u80FD\u5BF9\u58F0\u660E\u4E3A final \u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u8FDB\u884C\u4EE3\u7406\uFF0C\u56E0\u4E3A CGLib \u539F\u7406\u662F\u52A8\u6001\u751F\u6210\u88AB\u4EE3\u7406\u7C7B\u7684\u5B50\u7C7B\u3002</p>
<p>\u5728 JDK1.6\u3001JDK1.7\u3001JDK1.8 \u9010\u6B65\u5BF9 JDK \u52A8\u6001\u4EE3\u7406\u4F18\u5316\u4E4B\u540E\uFF0C\u5728\u8C03\u7528\u6B21\u6570\u8F83\u5C11\u7684\u60C5\u51B5\u4E0B\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u6548\u7387\uFF0C\u53EA\u6709\u5F53\u8FDB\u884C\u5927\u91CF\u8C03\u7528\u7684\u65F6\u5019\uFF0CJDK1.6 \u548C JDK1.7 \u6BD4 CGLib \u4EE3\u7406\u6548\u7387\u4F4E\u4E00\u70B9\uFF0C\u4F46\u662F\u5230 JDK1.8 \u7684\u65F6\u5019\uFF0CJDK \u4EE3\u7406\u6548\u7387\u9AD8\u4E8E CGLib \u4EE3\u7406\u3002\u6240\u4EE5\u5982\u679C\u6709\u63A5\u53E3\u4F7F\u7528 JDK \u52A8\u6001\u4EE3\u7406\uFF0C\u5982\u679C\u6CA1\u6709\u63A5\u53E3\u4F7F\u7528 CGLIB \u4EE3\u7406\u3002</p>
</li>
<li>
<p>\u52A8\u6001\u4EE3\u7406\u548C\u9759\u6001\u4EE3\u7406</p>
<p>\u52A8\u6001\u4EE3\u7406\u4E0E\u9759\u6001\u4EE3\u7406\u76F8\u6BD4\u8F83\uFF0C\u6700\u5927\u7684\u597D\u5904\u662F\u63A5\u53E3\u4E2D\u58F0\u660E\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u88AB\u8F6C\u79FB\u5230\u8C03\u7528\u5904\u7406\u5668\u4E00\u4E2A\u96C6\u4E2D\u7684\u65B9\u6CD5\u4E2D\u5904\u7406\uFF08InvocationHandler.invoke\uFF09\u3002\u8FD9\u6837\uFF0C\u5728\u63A5\u53E3\u65B9\u6CD5\u6570\u91CF\u6BD4\u8F83\u591A\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u7075\u6D3B\u5904\u7406\uFF0C\u800C\u4E0D\u9700\u8981\u50CF\u9759\u6001\u4EE3\u7406\u90A3\u6837\u6BCF\u4E00\u4E2A\u65B9\u6CD5\u8FDB\u884C\u4E2D\u8F6C\u3002</p>
<p>\u5982\u679C\u63A5\u53E3\u589E\u52A0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u9759\u6001\u4EE3\u7406\u6A21\u5F0F\u9664\u4E86\u6240\u6709\u5B9E\u73B0\u7C7B\u9700\u8981\u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5916\uFF0C\u6240\u6709\u4EE3\u7406\u7C7B\u4E5F\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5\u3002\u589E\u52A0\u4E86\u4EE3\u7801\u7EF4\u62A4\u7684\u590D\u6742\u5EA6\u3002\u800C\u52A8\u6001\u4EE3\u7406\u4E0D\u4F1A\u51FA\u73B0\u8BE5\u95EE\u9898</p>
</li>
</ul>
<h3 id="_5-1-7-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-1-7-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 5.1.7 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u4EE3\u7406\u6A21\u5F0F\u5728\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u4E4B\u95F4\u8D77\u5230\u4E00\u4E2A\u4E2D\u4ECB\u4F5C\u7528\u548C\u4FDD\u62A4\u76EE\u6807\u5BF9\u8C61\u7684\u4F5C\u7528\uFF1B</li>
<li>\u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u6269\u5C55\u76EE\u6807\u5BF9\u8C61\u7684\u529F\u80FD\uFF1B</li>
<li>\u4EE3\u7406\u6A21\u5F0F\u80FD\u5C06\u5BA2\u6237\u7AEF\u4E0E\u76EE\u6807\u5BF9\u8C61\u5206\u79BB\uFF0C\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u964D\u4F4E\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\uFF1B</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\uFF1B</li>
</ul>
<h3 id="_5-1-8-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-1-8-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.1.8 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u8FDC\u7A0B\uFF08Remote\uFF09\u4EE3\u7406</p>
<p>\u672C\u5730\u670D\u52A1\u901A\u8FC7\u7F51\u7EDC\u8BF7\u6C42\u8FDC\u7A0B\u670D\u52A1\u3002\u4E3A\u4E86\u5B9E\u73B0\u672C\u5730\u5230\u8FDC\u7A0B\u7684\u901A\u4FE1\uFF0C\u6211\u4EEC\u9700\u8981\u5B9E\u73B0\u7F51\u7EDC\u901A\u4FE1\uFF0C\u5904\u7406\u5176\u4E2D\u53EF\u80FD\u7684\u5F02\u5E38\u3002\u4E3A\u826F\u597D\u7684\u4EE3\u7801\u8BBE\u8BA1\u548C\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u5C06\u7F51\u7EDC\u901A\u4FE1\u90E8\u5206\u9690\u85CF\u8D77\u6765\uFF0C\u53EA\u66B4\u9732\u7ED9\u672C\u5730\u670D\u52A1\u4E00\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u5373\u53EF\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u800C\u4E0D\u5FC5\u8FC7\u591A\u5173\u5FC3\u901A\u4FE1\u90E8\u5206\u7684\u7EC6\u8282\u3002</p>
</li>
<li>
<p>\u9632\u706B\u5899\uFF08Firewall\uFF09\u4EE3\u7406</p>
<p>\u5F53\u4F60\u5C06\u6D4F\u89C8\u5668\u914D\u7F6E\u6210\u4F7F\u7528\u4EE3\u7406\u529F\u80FD\u65F6\uFF0C\u9632\u706B\u5899\u5C31\u5C06\u4F60\u7684\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\u8F6C\u7ED9\u4E92\u8054\u7F51\uFF1B\u5F53\u4E92\u8054\u7F51\u8FD4\u56DE\u54CD\u5E94\u65F6\uFF0C\u4EE3\u7406\u670D\u52A1\u5668\u518D\u628A\u5B83\u8F6C\u7ED9\u4F60\u7684\u6D4F\u89C8\u5668\u3002</p>
</li>
<li>
<p>\u4FDD\u62A4\uFF08Protect or Access\uFF09\u4EE3\u7406</p>
<p>\u63A7\u5236\u5BF9\u4E00\u4E2A\u5BF9\u8C61\u7684\u8BBF\u95EE\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u7ED9\u4E0D\u540C\u7684\u7528\u6237\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u4F7F\u7528\u6743\u9650\u3002</p>
</li>
</ul>
<h2 id="_5-2-\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2 \u9002\u914D\u5668\u6A21\u5F0F</h2>
<h3 id="_5-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.2.1 \u6982\u8FF0</h3>
<p>\u5982\u679C\u53BB\u6B27\u6D32\u56FD\u5BB6\u53BB\u65C5\u6E38\u7684\u8BDD\uFF0C\u4ED6\u4EEC\u7684\u63D2\u5EA7\u5982\u4E0B\u56FE\u6700\u5DE6\u8FB9\uFF0C\u662F\u6B27\u6D32\u6807\u51C6\u3002\u800C\u6211\u4EEC\u4F7F\u7528\u7684\u63D2\u5934\u5982\u4E0B\u56FE\u6700\u53F3\u8FB9\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u7684\u7B14\u8BB0\u672C\u7535\u8111\uFF0C\u624B\u673A\u5728\u5F53\u5730\u4E0D\u80FD\u76F4\u63A5\u5145\u7535\u3002\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u63D2\u5EA7\u8F6C\u6362\u5668\uFF0C\u8F6C\u6362\u5668\u7B2C 1 \u9762\u63D2\u5165\u5F53\u5730\u7684\u63D2\u5EA7\uFF0C\u7B2C 2 \u9762\u4F9B\u6211\u4EEC\u5145\u7535\uFF0C\u8FD9\u6837\u4F7F\u5F97\u6211\u4EEC\u7684\u63D2\u5934\u5728\u5F53\u5730\u80FD\u4F7F\u7528\u3002\u751F\u6D3B\u4E2D\u8FD9\u6837\u7684\u4F8B\u5B50\u5F88\u591A\uFF0C\u624B\u673A\u5145\u7535\u5668\uFF08\u5C06 220v \u8F6C\u6362\u4E3A 5v \u7684\u7535\u538B\uFF09\uFF0C\u8BFB\u5361\u5668\u7B49\uFF0C\u5176\u5B9E\u5C31\u662F\u4F7F\u7528\u5230\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p>
<p><img src="\\img\\\u8F6C\u63A5\u5934.png" alt=""></p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u5C06\u4E00\u4E2A\u7C7B\u7684\u63A5\u53E3\u8F6C\u6362\u6210\u5BA2\u6237\u5E0C\u671B\u7684\u53E6\u5916\u4E00\u4E2A\u63A5\u53E3\uFF0C\u4F7F\u5F97\u539F\u672C\u7531\u4E8E\u63A5\u53E3\u4E0D\u517C\u5BB9\u800C\u4E0D\u80FD\u4E00\u8D77\u5DE5\u4F5C\u7684\u90A3\u4E9B\u7C7B\u80FD\u4E00\u8D77\u5DE5\u4F5C\u3002</p>
<p>\u200B \u9002\u914D\u5668\u6A21\u5F0F\u5206\u4E3A\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u548C\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u524D\u8005\u7C7B\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\u6BD4\u540E\u8005\u9AD8\uFF0C\u4E14\u8981\u6C42\u7A0B\u5E8F\u5458\u4E86\u89E3\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u5185\u90E8\u7ED3\u6784\uFF0C\u6240\u4EE5\u5E94\u7528\u76F8\u5BF9\u8F83\u5C11\u4E9B\u3002</p>
<h3 id="_5-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.2.2 \u7ED3\u6784</h3>
<p>\u9002\u914D\u5668\u6A21\u5F0F\uFF08Adapter\uFF09\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u76EE\u6807\uFF08Target\uFF09\u63A5\u53E3\uFF1A\u5F53\u524D\u7CFB\u7EDF\u4E1A\u52A1\u6240\u671F\u5F85\u7684\u63A5\u53E3\uFF0C\u5B83\u53EF\u4EE5\u662F\u62BD\u8C61\u7C7B\u6216\u63A5\u53E3\u3002</li>
<li>\u9002\u914D\u8005\uFF08Adaptee\uFF09\u7C7B\uFF1A\u5B83\u662F\u88AB\u8BBF\u95EE\u548C\u9002\u914D\u7684\u73B0\u5B58\u7EC4\u4EF6\u5E93\u4E2D\u7684\u7EC4\u4EF6\u63A5\u53E3\u3002</li>
<li>\u9002\u914D\u5668\uFF08Adapter\uFF09\u7C7B\uFF1A\u5B83\u662F\u4E00\u4E2A\u8F6C\u6362\u5668\uFF0C\u901A\u8FC7\u7EE7\u627F\u6216\u5F15\u7528\u9002\u914D\u8005\u7684\u5BF9\u8C61\uFF0C\u628A\u9002\u914D\u8005\u63A5\u53E3\u8F6C\u6362\u6210\u76EE\u6807\u63A5\u53E3\uFF0C\u8BA9\u5BA2\u6237\u6309\u76EE\u6807\u63A5\u53E3\u7684\u683C\u5F0F\u8BBF\u95EE\u9002\u914D\u8005\u3002</li>
</ul>
<h3 id="_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-3-\u7C7B\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.3 \u7C7B\u9002\u914D\u5668\u6A21\u5F0F</h3>
<p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u9002\u914D\u5668\u7C7B\u6765\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\uFF0C\u540C\u65F6\u53C8\u7EE7\u627F\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B58\u5728\u7684\u7EC4\u4EF6\u3002</p>
<p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p>
<p>\u73B0\u6709\u4E00\u53F0\u7535\u8111\u53EA\u80FD\u8BFB\u53D6 SD \u5361\uFF0C\u800C\u8981\u8BFB\u53D6 TF \u5361\u4E2D\u7684\u5185\u5BB9\u7684\u8BDD\u5C31\u9700\u8981\u4F7F\u7528\u5230\u9002\u914D\u5668\u6A21\u5F0F\u3002\u521B\u5EFA\u4E00\u4E2A\u8BFB\u5361\u5668\uFF0C\u5C06 TF \u5361\u4E2D\u7684\u5185\u5BB9\u8BFB\u53D6\u51FA\u6765\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//SD\u5361\u7684\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6SD\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165SD\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//SD\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">"sd card read a msg :hello word SD"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sd card write msg : "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u8111\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token class-name">SDCard</span> sdCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sdCard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">"sd card null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sdCard<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8BFB\u53D6TF\u5361\u65B9\u6CD5</span>
    <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5199\u5165TF\u5361\u529F\u80FD</span>
    <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//TF\u5361\u5B9E\u73B0\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span><span class="token string">"tf card read msg : hello word tf card"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"tf card write a msg : "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5B9A\u4E49\u9002\u914D\u5668\u7C7B\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span> <span class="token keyword">extends</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter read tf card "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter write tf card"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u8FDD\u80CC\u4E86\u5408\u6210\u590D\u7528\u539F\u5219\u3002\u7C7B\u9002\u914D\u5668\u662F\u5BA2\u6237\u7C7B\u6709\u4E00\u4E2A\u63A5\u53E3\u89C4\u8303\u7684\u60C5\u51B5\u4E0B\u53EF\u7528\uFF0C\u53CD\u4E4B\u4E0D\u53EF\u7528\u3002</p>
<h3 id="_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-2-4-\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 5.2.4 \u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F</h3>
<p>\u5B9E\u73B0\u65B9\u5F0F\uFF1A\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u53EF\u91C6\u7528\u5C06\u73B0\u6709\u7EC4\u4EF6\u5E93\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\u7684\u7EC4\u4EF6\u5F15\u5165\u9002\u914D\u5668\u7C7B\u4E2D\uFF0C\u8BE5\u7C7B\u540C\u65F6\u5B9E\u73B0\u5F53\u524D\u7CFB\u7EDF\u7684\u4E1A\u52A1\u63A5\u53E3\u3002</p>
<p>\u3010\u4F8B\u3011\u8BFB\u5361\u5668</p>
<p>\u6211\u4EEC\u4F7F\u7528\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F\u5C06\u8BFB\u5361\u5668\u7684\u6848\u4F8B\u8FDB\u884C\u6539\u5199\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u5BF9\u8C61\u9002\u914D\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u7C7B\u9002\u914D\u5668\u6A21\u5F0F\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539\u9002\u914D\u5668\u7C7B\uFF08SDAdapterTF\uFF09\u548C\u6D4B\u8BD5\u7C7B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u521B\u5EFA\u9002\u914D\u5668\u5BF9\u8C61\uFF08SD\u517C\u5BB9TF\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span>  <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TFCard</span> tfCard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token class-name">TFCard</span> tfCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tfCard <span class="token operator">=</span> tfCard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter read tf card "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tfCard<span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"adapter write tf card"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tfCard<span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TFCard</span> tfCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TFCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span>tfCard<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u8FD8\u6709\u4E00\u4E2A\u9002\u914D\u5668\u6A21\u5F0F\u662F\u63A5\u53E3\u9002\u914D\u5668\u6A21\u5F0F\u3002\u5F53\u4E0D\u5E0C\u671B\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3\u4E2D\u6240\u6709\u7684\u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u62BD\u8C61\u7C7B Adapter \uFF0C\u5B9E\u73B0\u6240\u6709\u65B9\u6CD5\u3002\u800C\u6B64\u65F6\u6211\u4EEC\u53EA\u9700\u8981\u7EE7\u627F\u8BE5\u62BD\u8C61\u7C7B\u5373\u53EF\u3002</p>
</blockquote>
<h3 id="_5-2-5-\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-2-5-\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> 5.2.5 \u5E94\u7528\u573A\u666F</h3>
<ul>
<li>\u4EE5\u524D\u5F00\u53D1\u7684\u7CFB\u7EDF\u5B58\u5728\u6EE1\u8DB3\u65B0\u7CFB\u7EDF\u529F\u80FD\u9700\u6C42\u7684\u7C7B\uFF0C\u4F46\u5176\u63A5\u53E3\u540C\u65B0\u7CFB\u7EDF\u7684\u63A5\u53E3\u4E0D\u4E00\u81F4\u3002</li>
<li>\u4F7F\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0C\u4F46\u7EC4\u4EF6\u63A5\u53E3\u5B9A\u4E49\u548C\u81EA\u5DF1\u8981\u6C42\u7684\u63A5\u53E3\u5B9A\u4E49\u4E0D\u540C\u3002</li>
</ul>
<h3 id="_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.2.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Reader\uFF08\u5B57\u7B26\u6D41\uFF09\u3001InputStream\uFF08\u5B57\u8282\u6D41\uFF09\u7684\u9002\u914D\u4F7F\u7528\u7684\u662F InputStreamReader\u3002</p>
<p>InputStreamReader \u7EE7\u627F\u81EA java.io \u5305\u4E2D\u7684 Reader\uFF0C\u5BF9\u4ED6\u4E2D\u7684\u62BD\u8C61\u7684\u672A\u5B9E\u73B0\u7684\u65B9\u6CD5\u7ED9\u51FA\u5B9E\u73B0\u3002\u5982\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">char</span> cbuf<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sd<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4E0A\u4EE3\u7801\u4E2D\u7684 sd\uFF08StreamDecoder \u7C7B\u5BF9\u8C61\uFF09\uFF0C\u5728 Sun \u7684 JDK \u5B9E\u73B0\u4E2D\uFF0C\u5B9E\u9645\u7684\u65B9\u6CD5\u5B9E\u73B0\u662F\u5BF9 sun.nio.cs.StreamDecoder \u7C7B\u7684\u540C\u540D\u65B9\u6CD5\u7684\u8C03\u7528\u5C01\u88C5\u3002\u7C7B\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u9002\u914D\u5668\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" alt=""></p>
<p>\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF1A</p>
<ul>
<li>InputStreamReader \u662F\u5BF9\u540C\u6837\u5B9E\u73B0\u4E86 Reader \u7684 StreamDecoder \u7684\u5C01\u88C5\u3002</li>
<li>StreamDecoder \u4E0D\u662F Java SE API \u4E2D\u7684\u5185\u5BB9\uFF0C\u662F Sun JDK \u7ED9\u51FA\u7684\u81EA\u8EAB\u5B9E\u73B0\u3002\u4F46\u6211\u4EEC\u77E5\u9053\u4ED6\u4EEC\u5BF9\u6784\u9020\u65B9\u6CD5\u4E2D\u7684\u5B57\u8282\u6D41\u7C7B\uFF08InputStream\uFF09\u8FDB\u884C\u5C01\u88C5\uFF0C\u5E76\u901A\u8FC7\u8BE5\u7C7B\u8FDB\u884C\u4E86\u5B57\u8282\u6D41\u548C\u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u89E3\u7801\u8F6C\u6362\u3002</li>
</ul>
<div color="red">\u7ED3\u8BBA\uFF1A</div>
<p>\u200B \u4ECE\u8868\u5C42\u6765\u770B\uFF0CInputStreamReader \u505A\u4E86 InputStream \u5B57\u8282\u6D41\u7C7B\u5230 Reader \u5B57\u7B26\u6D41\u4E4B\u95F4\u7684\u8F6C\u6362\u3002\u800C\u4ECE\u5982\u4E0A Sun JDK \u4E2D\u7684\u5B9E\u73B0\u7C7B\u5173\u7CFB\u7ED3\u6784\u4E2D\u53EF\u4EE5\u770B\u51FA\uFF0C\u662F StreamDecoder \u7684\u8BBE\u8BA1\u5B9E\u73B0\u5728\u5B9E\u9645\u4E0A\u91C7\u7528\u4E86\u9002\u914D\u5668\u6A21\u5F0F\u3002</p>
<h2 id="_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-3-\u88C5\u9970\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 5.3 \u88C5\u9970\u8005\u6A21\u5F0F</h2>
<h3 id="_5-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.3.1 \u6982\u8FF0</h3>
<p>\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E2A\u5FEB\u9910\u5E97\u7684\u4F8B\u5B50\u3002</p>
<p>\u5FEB\u9910\u5E97\u6709\u7092\u9762\u3001\u7092\u996D\u8FD9\u4E9B\u5FEB\u9910\uFF0C\u53EF\u4EE5\u989D\u5916\u9644\u52A0\u9E21\u86CB\u3001\u706B\u817F\u3001\u57F9\u6839\u8FD9\u4E9B\u914D\u83DC\uFF0C\u5F53\u7136\u52A0\u914D\u83DC\u9700\u8981\u989D\u5916\u52A0\u94B1\uFF0C\u6BCF\u4E2A\u914D\u83DC\u7684\u4EF7\u94B1\u901A\u5E38\u4E0D\u592A\u4E00\u6837\uFF0C\u90A3\u4E48\u8BA1\u7B97\u603B\u4EF7\u5C31\u4F1A\u663E\u5F97\u6BD4\u8F83\u9EBB\u70E6\u3002</p>
<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F-\u4F7F\u7528\u524D.png" style="zoom:80%;" />
<p>\u4F7F\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5B58\u5728\u7684\u95EE\u9898\uFF1A</p>
<ul>
<li>
<p>\u6269\u5C55\u6027\u4E0D\u597D</p>
<p>\u5982\u679C\u8981\u518D\u52A0\u4E00\u79CD\u914D\u6599\uFF08\u706B\u817F\u80A0\uFF09\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u9700\u8981\u7ED9 FriedRice \u548C FriedNoodles \u5206\u522B\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\u3002\u5982\u679C\u8981\u65B0\u589E\u4E00\u4E2A\u5FEB\u9910\u54C1\u7C7B\uFF08\u7092\u6CB3\u7C89\uFF09\u7684\u8BDD\uFF0C\u5C31\u9700\u8981\u5B9A\u4E49\u66F4\u591A\u7684\u5B50\u7C7B\u3002</p>
</li>
<li>
<p>\u4EA7\u751F\u8FC7\u591A\u7684\u5B50\u7C7B</p>
</li>
</ul>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u6307\u5728\u4E0D\u6539\u53D8\u73B0\u6709\u5BF9\u8C61\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\uFF0C\u52A8\u6001\u5730\u7ED9\u8BE5\u5BF9\u8C61\u589E\u52A0\u4E00\u4E9B\u804C\u8D23\uFF08\u5373\u589E\u52A0\u5176\u989D\u5916\u529F\u80FD\uFF09\u7684\u6A21\u5F0F\u3002</p>
<h3 id="_5-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.3.2 \u7ED3\u6784</h3>
<p>\u88C5\u9970\uFF08Decorator\uFF09\u6A21\u5F0F\u4E2D\u7684\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u6784\u4EF6\uFF08Component\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u63A5\u53E3\u4EE5\u89C4\u8303\u51C6\u5907\u63A5\u6536\u9644\u52A0\u8D23\u4EFB\u7684\u5BF9\u8C61\u3002</li>
<li>\u5177\u4F53\u6784\u4EF6\uFF08Concrete Component\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u901A\u8FC7\u88C5\u9970\u89D2\u8272\u4E3A\u5176\u6DFB\u52A0\u4E00\u4E9B\u804C\u8D23\u3002</li>
<li>\u62BD\u8C61\u88C5\u9970\uFF08Decorator\uFF09\u89D2\u8272 \uFF1A \u7EE7\u627F\u6216\u5B9E\u73B0\u62BD\u8C61\u6784\u4EF6\uFF0C\u5E76\u5305\u542B\u5177\u4F53\u6784\u4EF6\u7684\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5176\u5B50\u7C7B\u6269\u5C55\u5177\u4F53\u6784\u4EF6\u7684\u529F\u80FD\u3002</li>
<li>\u5177\u4F53\u88C5\u9970\uFF08ConcreteDecorator\uFF09\u89D2\u8272 \uFF1A\u5B9E\u73B0\u62BD\u8C61\u88C5\u9970\u7684\u76F8\u5173\u65B9\u6CD5\uFF0C\u5E76\u7ED9\u5177\u4F53\u6784\u4EF6\u5BF9\u8C61\u6DFB\u52A0\u9644\u52A0\u7684\u8D23\u4EFB\u3002</li>
</ul>
<h3 id="_5-3-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-3-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.3.3 \u6848\u4F8B</h3>
<p>\u6211\u4EEC\u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9\u5FEB\u9910\u5E97\u6848\u4F8B\u8FDB\u884C\u6539\u8FDB\uFF0C\u4F53\u4F1A\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u7CBE\u9AD3\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u88C5\u9970\u8005\u6A21\u5F0F.png" style="zoom:75%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u5FEB\u9910\u63A5\u53E3</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDesc</span><span class="token punctuation">(</span><span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u83B7\u53D6\u4EF7\u683C</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u996D</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedRice</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"\u7092\u996D"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7092\u9762</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedNoodles</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"\u7092\u9762"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u914D\u6599\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Garnish</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">FastFood</span> fastFood<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFastFood</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Garnish</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">,</span> <span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u9E21\u86CB\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Egg</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"\u9E21\u86CB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u57F9\u6839\u914D\u6599</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bacon</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"\u57F9\u6839"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u9E21\u86CB\u7684\u7092\u996D</span>
        <span class="token class-name">FastFood</span> food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span>food1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food1<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food1<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u70B9\u4E00\u4EFD\u52A0\u57F9\u6839\u7684\u7092\u9762</span>
        <span class="token class-name">FastFood</span> food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span>food2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u82B1\u8D39\u7684\u4EF7\u683C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food2<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> food2<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>
<p>\u9970\u8005\u6A21\u5F0F\u53EF\u4EE5\u5E26\u6765\u6BD4\u7EE7\u627F\u66F4\u52A0\u7075\u6D3B\u6027\u7684\u6269\u5C55\u529F\u80FD\uFF0C\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7EC4\u5408\u4E0D\u540C\u7684\u88C5\u9970\u8005\u5BF9\u8C61\u6765\u83B7\u53D6\u5177\u6709\u4E0D\u540C\u884C\u4E3A\u72B6\u6001\u7684\u591A\u6837\u5316\u7684\u7ED3\u679C\u3002\u88C5\u9970\u8005\u6A21\u5F0F\u6BD4\u7EE7\u627F\u66F4\u5177\u826F\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5B8C\u7F8E\u7684\u9075\u5FAA\u5F00\u95ED\u539F\u5219\uFF0C\u7EE7\u627F\u662F\u9759\u6001\u7684\u9644\u52A0\u8D23\u4EFB\uFF0C\u88C5\u9970\u8005\u5219\u662F\u52A8\u6001\u7684\u9644\u52A0\u8D23\u4EFB\u3002</p>
</li>
<li>
<p>\u88C5\u9970\u7C7B\u548C\u88AB\u88C5\u9970\u7C7B\u53EF\u4EE5\u72EC\u7ACB\u53D1\u5C55\uFF0C\u4E0D\u4F1A\u76F8\u4E92\u8026\u5408\uFF0C\u88C5\u9970\u6A21\u5F0F\u662F\u7EE7\u627F\u7684\u4E00\u4E2A\u66FF\u4EE3\u6A21\u5F0F\uFF0C\u88C5\u9970\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u6269\u5C55\u4E00\u4E2A\u5B9E\u73B0\u7C7B\u7684\u529F\u80FD\u3002</p>
</li>
</ul>
<h3 id="_5-3-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-3-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.3.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5F53\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u5BF9\u7CFB\u7EDF\u8FDB\u884C\u6269\u5145\u6216\u8005\u91C7\u7528\u7EE7\u627F\u4E0D\u5229\u4E8E\u7CFB\u7EDF\u6269\u5C55\u548C\u7EF4\u62A4\u65F6\u3002</p>
<p>\u4E0D\u80FD\u91C7\u7528\u7EE7\u627F\u7684\u60C5\u51B5\u4E3B\u8981\u6709\u4E24\u7C7B\uFF1A</p>
<ul>
<li>\u7B2C\u4E00\u7C7B\u662F\u7CFB\u7EDF\u4E2D\u5B58\u5728\u5927\u91CF\u72EC\u7ACB\u7684\u6269\u5C55\uFF0C\u4E3A\u652F\u6301\u6BCF\u4E00\u79CD\u7EC4\u5408\u5C06\u4EA7\u751F\u5927\u91CF\u7684\u5B50\u7C7B\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u6570\u76EE\u5448\u7206\u70B8\u6027\u589E\u957F\uFF1B</li>
<li>\u7B2C\u4E8C\u7C7B\u662F\u56E0\u4E3A\u7C7B\u5B9A\u4E49\u4E0D\u80FD\u7EE7\u627F\uFF08\u5982 final \u7C7B\uFF09</li>
</ul>
</li>
<li>
<p>\u5728\u4E0D\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EE5\u52A8\u6001\u3001\u900F\u660E\u7684\u65B9\u5F0F\u7ED9\u5355\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u804C\u8D23\u3002</p>
</li>
<li>
<p>\u5F53\u5BF9\u8C61\u7684\u529F\u80FD\u8981\u6C42\u53EF\u4EE5\u52A8\u6001\u5730\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u518D\u52A8\u6001\u5730\u64A4\u9500\u65F6\u3002</p>
</li>
</ul>
<h3 id="_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-3-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.3.5 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>IO \u6D41\u4E2D\u7684\u5305\u88C5\u7C7B\u4F7F\u7528\u5230\u4E86\u88C5\u9970\u8005\u6A21\u5F0F\u3002BufferedInputStream\uFF0CBufferedOutputStream\uFF0CBufferedReader\uFF0CBufferedWriter\u3002</p>
<p>\u6211\u4EEC\u4EE5 BufferedWriter \u4E3E\u4F8B\u6765\u8BF4\u660E\uFF0C\u5148\u770B\u770B\u5982\u4F55\u4F7F\u7528 BufferedWriter</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFABufferedWriter\u5BF9\u8C61</span>
        <span class="token comment">//\u521B\u5EFAFileWriter\u5BF9\u8C61</span>
        <span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Users\\\\Think\\\\Desktop\\\\a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>fw<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5199\u6570\u636E</span>
        bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"hello Buffered"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u8D77\u6765\u611F\u89C9\u786E\u5B9E\u50CF\u662F\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u63A5\u4E0B\u6765\u770B\u5B83\u4EEC\u7684\u7ED3\u6784\uFF1A</p>
<img src="\\img\\\u88C5\u9970\u8005\u6A21\u5F0F-jdk\u6E90\u7801.png" style="zoom:80%;" />
<blockquote>
<div color="red">\u5C0F\u7ED3\uFF1A</div>
<p>\u200B BufferedWriter \u4F7F\u7528\u88C5\u9970\u8005\u6A21\u5F0F\u5BF9 Writer \u5B50\u5B9E\u73B0\u7C7B\u8FDB\u884C\u4E86\u589E\u5F3A\uFF0C\u6DFB\u52A0\u4E86\u7F13\u51B2\u533A\uFF0C\u63D0\u9AD8\u4E86\u5199\u6570\u636E\u7684\u6548\u7387\u3002</p>
</blockquote>
<h3 id="_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_5-3-6-\u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B" aria-hidden="true">#</a> 5.3.6 \u4EE3\u7406\u548C\u88C5\u9970\u8005\u7684\u533A\u522B</h3>
<p>\u9759\u6001\u4EE3\u7406\u548C\u88C5\u9970\u8005\u6A21\u5F0F\u7684\u533A\u522B\uFF1A</p>
<ul>
<li>\u76F8\u540C\u70B9\uFF1A
<ul>
<li>\u90FD\u8981\u5B9E\u73B0\u4E0E\u76EE\u6807\u7C7B\u76F8\u540C\u7684\u4E1A\u52A1\u63A5\u53E3</li>
<li>\u5728\u4E24\u4E2A\u7C7B\u4E2D\u90FD\u8981\u58F0\u660E\u76EE\u6807\u5BF9\u8C61</li>
<li>\u90FD\u53EF\u4EE5\u5728\u4E0D\u4FEE\u6539\u76EE\u6807\u7C7B\u7684\u524D\u63D0\u4E0B\u589E\u5F3A\u76EE\u6807\u65B9\u6CD5</li>
</ul>
</li>
<li>\u4E0D\u540C\u70B9\uFF1A
<ul>
<li>\u76EE\u7684\u4E0D\u540C
\u88C5\u9970\u8005\u662F\u4E3A\u4E86\u589E\u5F3A\u76EE\u6807\u5BF9\u8C61
\u9759\u6001\u4EE3\u7406\u662F\u4E3A\u4E86\u4FDD\u62A4\u548C\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li>
<li>\u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6784\u5EFA\u7684\u5730\u65B9\u4E0D\u540C
\u88C5\u9970\u8005\u662F\u7531\u5916\u754C\u4F20\u9012\u8FDB\u6765\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u4F20\u9012
\u9759\u6001\u4EE3\u7406\u662F\u5728\u4EE3\u7406\u7C7B\u5185\u90E8\u521B\u5EFA\uFF0C\u4EE5\u6B64\u6765\u9690\u85CF\u76EE\u6807\u5BF9\u8C61</li>
</ul>
</li>
</ul>
<h2 id="_5-4-\u6865\u63A5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-4-\u6865\u63A5\u6A21\u5F0F" aria-hidden="true">#</a> 5.4 \u6865\u63A5\u6A21\u5F0F</h2>
<h3 id="_5-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.4.1 \u6982\u8FF0</h3>
<p>\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u521B\u5EFA\u4E0D\u540C\u7684\u56FE\u5F62\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u56FE\u5F62\u90FD\u6709\u53EF\u80FD\u4F1A\u6709\u4E0D\u540C\u7684\u989C\u8272\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528\u7EE7\u627F\u7684\u65B9\u5F0F\u6765\u8BBE\u8BA1\u7C7B\u7684\u5173\u7CFB\uFF1A</p>
<p><img src="\\img\\image-20200207194617620.png" alt=""></p>
<p>\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6709\u5F88\u591A\u7684\u7C7B\uFF0C\u5047\u5982\u6211\u4EEC\u518D\u589E\u52A0\u4E00\u4E2A\u5F62\u72B6\u6216\u518D\u589E\u52A0\u4E00\u79CD\u989C\u8272\uFF0C\u5C31\u9700\u8981\u521B\u5EFA\u66F4\u591A\u7684\u7C7B\u3002</p>
<p>\u8BD5\u60F3\uFF0C\u5728\u4E00\u4E2A\u6709\u591A\u79CD\u53EF\u80FD\u4F1A\u53D8\u5316\u7684\u7EF4\u5EA6\u7684\u7CFB\u7EDF\u4E2D\uFF0C\u7528\u7EE7\u627F\u65B9\u5F0F\u4F1A\u9020\u6210\u7C7B\u7206\u70B8\uFF0C\u6269\u5C55\u8D77\u6765\u4E0D\u7075\u6D3B\u3002\u6BCF\u6B21\u5728\u4E00\u4E2A\u7EF4\u5EA6\u4E0A\u65B0\u589E\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u90FD\u8981\u589E\u52A0\u591A\u4E2A\u5B50\u7C7B\u3002\u4E3A\u4E86\u66F4\u52A0\u7075\u6D3B\u7684\u8BBE\u8BA1\u7CFB\u7EDF\uFF0C\u6211\u4EEC\u6B64\u65F6\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u5C06\u62BD\u8C61\u4E0E\u5B9E\u73B0\u5206\u79BB\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u72EC\u7ACB\u53D8\u5316\u3002\u5B83\u662F\u7528\u7EC4\u5408\u5173\u7CFB\u4EE3\u66FF\u7EE7\u627F\u5173\u7CFB\u6765\u5B9E\u73B0\uFF0C\u4ECE\u800C\u964D\u4F4E\u4E86\u62BD\u8C61\u548C\u5B9E\u73B0\u8FD9\u4E24\u4E2A\u53EF\u53D8\u7EF4\u5EA6\u7684\u8026\u5408\u5EA6\u3002</p>
<h3 id="_5-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.4.2 \u7ED3\u6784</h3>
<p>\u6865\u63A5\uFF08Bridge\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u5316\uFF08Abstraction\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u62BD\u8C61\u7C7B\uFF0C\u5E76\u5305\u542B\u4E00\u4E2A\u5BF9\u5B9E\u73B0\u5316\u5BF9\u8C61\u7684\u5F15\u7528\u3002</li>
<li>\u6269\u5C55\u62BD\u8C61\u5316\uFF08Refined Abstraction\uFF09\u89D2\u8272 \uFF1A\u662F\u62BD\u8C61\u5316\u89D2\u8272\u7684\u5B50\u7C7B\uFF0C\u5B9E\u73B0\u7236\u7C7B\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u5E76\u901A\u8FC7\u7EC4\u5408\u5173\u7CFB\u8C03\u7528\u5B9E\u73B0\u5316\u89D2\u8272\u4E2D\u7684\u4E1A\u52A1\u65B9\u6CD5\u3002</li>
<li>\u5B9E\u73B0\u5316\uFF08Implementor\uFF09\u89D2\u8272 \uFF1A\u5B9A\u4E49\u5B9E\u73B0\u5316\u89D2\u8272\u7684\u63A5\u53E3\uFF0C\u4F9B\u6269\u5C55\u62BD\u8C61\u5316\u89D2\u8272\u8C03\u7528\u3002</li>
<li>\u5177\u4F53\u5B9E\u73B0\u5316\uFF08Concrete Implementor\uFF09\u89D2\u8272 \uFF1A\u7ED9\u51FA\u5B9E\u73B0\u5316\u89D2\u8272\u63A5\u53E3\u7684\u5177\u4F53\u5B9E\u73B0\u3002</li>
</ul>
<h3 id="_5-4-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-4-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.4.3 \u6848\u4F8B</h3>
<p>\u3010\u4F8B\u3011\u89C6\u9891\u64AD\u653E\u5668</p>
<p>\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8DE8\u5E73\u53F0\u89C6\u9891\u64AD\u653E\u5668\uFF0C\u53EF\u4EE5\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u5E73\u53F0\uFF08\u5982 Windows\u3001Mac\u3001Linux \u7B49\uFF09\u4E0A\u64AD\u653E\u591A\u79CD\u683C\u5F0F\u7684\u89C6\u9891\u6587\u4EF6\uFF0C\u5E38\u89C1\u7684\u89C6\u9891\u683C\u5F0F\u5305\u62EC RMVB\u3001AVI\u3001WMV \u7B49\u3002\u8BE5\u64AD\u653E\u5668\u5305\u542B\u4E86\u4E24\u4E2A\u7EF4\u5EA6\uFF0C\u9002\u5408\u4F7F\u7528\u6865\u63A5\u6A21\u5F0F\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="\\img\\\u6865\u63A5\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u89C6\u9891\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//avi\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AVIFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"avi\u89C6\u9891\u6587\u4EF6\uFF1A"</span><span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//rmvb\u6587\u4EF6</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">REVBBFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"rmvb\u6587\u4EF6\uFF1A"</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OperatingSystemVersion</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoFile <span class="token operator">=</span> videoFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Windows\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Windows</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystem</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//mac\u7248\u672C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mac</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Mac</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OperatingSystem</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AVIFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">"\u6218\u72FC3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>
<p>\u6865\u63A5\u6A21\u5F0F\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5145\u6027\uFF0C\u5728\u4E24\u4E2A\u53D8\u5316\u7EF4\u5EA6\u4E2D\u4EFB\u610F\u6269\u5C55\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u90FD\u4E0D\u9700\u8981\u4FEE\u6539\u539F\u6709\u7CFB\u7EDF\u3002</p>
<p>\u5982\uFF1A\u5982\u679C\u73B0\u5728\u8FD8\u6709\u4E00\u79CD\u89C6\u9891\u6587\u4EF6\u7C7B\u578B wmv\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u518D\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u5B9E\u73B0 VideoFile \u63A5\u53E3\u5373\u53EF\uFF0C\u5176\u4ED6\u7C7B\u4E0D\u9700\u8981\u53D1\u751F\u53D8\u5316\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u7EC6\u8282\u5BF9\u5BA2\u6237\u900F\u660E</p>
</li>
</ul>
<h3 id="_5-4-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-4-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.4.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u4E00\u4E2A\u7C7B\u5B58\u5728\u4E24\u4E2A\u72EC\u7ACB\u53D8\u5316\u7684\u7EF4\u5EA6\uFF0C\u4E14\u8FD9\u4E24\u4E2A\u7EF4\u5EA6\u90FD\u9700\u8981\u8FDB\u884C\u6269\u5C55\u65F6\u3002</li>
<li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u4E0D\u5E0C\u671B\u4F7F\u7528\u7EE7\u627F\u6216\u56E0\u4E3A\u591A\u5C42\u6B21\u7EE7\u627F\u5BFC\u81F4\u7CFB\u7EDF\u7C7B\u7684\u4E2A\u6570\u6025\u5267\u589E\u52A0\u65F6\u3002</li>
<li>\u5F53\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u5728\u6784\u4EF6\u7684\u62BD\u8C61\u5316\u89D2\u8272\u548C\u5177\u4F53\u5316\u89D2\u8272\u4E4B\u95F4\u589E\u52A0\u66F4\u591A\u7684\u7075\u6D3B\u6027\u65F6\u3002\u907F\u514D\u5728\u4E24\u4E2A\u5C42\u6B21\u4E4B\u95F4\u5EFA\u7ACB\u9759\u6001\u7684\u7EE7\u627F\u8054\u7CFB\uFF0C\u901A\u8FC7\u6865\u63A5\u6A21\u5F0F\u53EF\u4EE5\u4F7F\u5B83\u4EEC\u5728\u62BD\u8C61\u5C42\u5EFA\u7ACB\u4E00\u4E2A\u5173\u8054\u5173\u7CFB\u3002</li>
</ul>
<h2 id="_5-5-\u5916\u89C2\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-5-\u5916\u89C2\u6A21\u5F0F" aria-hidden="true">#</a> 5.5 \u5916\u89C2\u6A21\u5F0F</h2>
<h3 id="_5-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.5.1 \u6982\u8FF0</h3>
<p>\u6709\u4E9B\u4EBA\u53EF\u80FD\u7092\u8FC7\u80A1\u7968\uFF0C\u4F46\u5176\u5B9E\u5927\u90E8\u5206\u4EBA\u90FD\u4E0D\u592A\u61C2\uFF0C\u8FD9\u79CD\u6CA1\u6709\u8DB3\u591F\u4E86\u89E3\u8BC1\u5238\u77E5\u8BC6\u7684\u60C5\u51B5\u4E0B\u505A\u80A1\u7968\u662F\u5F88\u5BB9\u6613\u4E8F\u94B1\u7684\uFF0C\u521A\u5F00\u59CB\u7092\u80A1\u80AF\u5B9A\u90FD\u4F1A\u60F3\uFF0C\u5982\u679C\u6709\u4E2A\u61C2\u884C\u7684\u5E2E\u5E2E\u624B\u5C31\u597D\uFF0C\u5176\u5B9E\u57FA\u91D1\u5C31\u662F\u4E2A\u597D\u5E2E\u624B\uFF0C\u652F\u4ED8\u5B9D\u91CC\u5C31\u6709\u8BB8\u591A\u7684\u57FA\u91D1\uFF0C\u5B83\u5C06\u6295\u8D44\u8005\u5206\u6563\u7684\u8D44\u91D1\u96C6\u4E2D\u8D77\u6765\uFF0C\u4EA4\u7531\u4E13\u4E1A\u7684\u7ECF\u7406\u4EBA\u8FDB\u884C\u7BA1\u7406\uFF0C\u6295\u8D44\u4E8E\u80A1\u7968\u3001\u503A\u5238\u3001\u5916\u6C47\u7B49\u9886\u57DF\uFF0C\u800C\u57FA\u91D1\u6295\u8D44\u7684\u6536\u76CA\u5F52\u6301\u6709\u8005\u6240\u6709\uFF0C\u7BA1\u7406\u673A\u6784\u6536\u53D6\u4E00\u5B9A\u6BD4\u4F8B\u7684\u6258\u7BA1\u7BA1\u7406\u8D39\u7528\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u53C8\u540D\u95E8\u9762\u6A21\u5F0F\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7\u4E3A\u591A\u4E2A\u590D\u6742\u7684\u5B50\u7CFB\u7EDF\u63D0\u4F9B\u4E00\u4E2A\u4E00\u81F4\u7684\u63A5\u53E3\uFF0C\u800C\u4F7F\u8FD9\u4E9B\u5B50\u7CFB\u7EDF\u66F4\u52A0\u5BB9\u6613\u88AB\u8BBF\u95EE\u7684\u6A21\u5F0F\u3002\u8BE5\u6A21\u5F0F\u5BF9\u5916\u6709\u4E00\u4E2A\u7EDF\u4E00\u63A5\u53E3\uFF0C\u5916\u90E8\u5E94\u7528\u7A0B\u5E8F\u4E0D\u7528\u5173\u5FC3\u5185\u90E8\u5B50\u7CFB\u7EDF\u7684\u5177\u4F53\u7684\u7EC6\u8282\uFF0C\u8FD9\u6837\u4F1A\u5927\u5927\u964D\u4F4E\u5E94\u7528\u7A0B\u5E8F\u7684\u590D\u6742\u5EA6\uFF0C\u63D0\u9AD8\u4E86\u7A0B\u5E8F\u7684\u53EF\u7EF4\u62A4\u6027\u3002</p>
<p>\u200B \u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u662F\u201C\u8FEA\u7C73\u7279\u6CD5\u5219\u201D\u7684\u5178\u578B\u5E94\u7528</p>
<p><img src="\\img\\\u5916\u89C2\u6A21\u5F0F\u5F15\u5165.jpg" alt=""></p>
<h3 id="_5-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.5.2 \u7ED3\u6784</h3>
<p>\u5916\u89C2\uFF08Facade\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u5916\u89C2\uFF08Facade\uFF09\u89D2\u8272\uFF1A\u4E3A\u591A\u4E2A\u5B50\u7CFB\u7EDF\u5BF9\u5916\u63D0\u4F9B\u4E00\u4E2A\u5171\u540C\u7684\u63A5\u53E3\u3002</li>
<li>\u5B50\u7CFB\u7EDF\uFF08Sub System\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u7CFB\u7EDF\u7684\u90E8\u5206\u529F\u80FD\uFF0C\u5BA2\u6237\u53EF\u4EE5\u901A\u8FC7\u5916\u89C2\u89D2\u8272\u8BBF\u95EE\u5B83\u3002</li>
</ul>
<h3 id="_5-5-3-\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_5-5-3-\u6848\u4F8B" aria-hidden="true">#</a> 5.5.3 \u6848\u4F8B</h3>
<p>\u3010\u4F8B\u3011\u667A\u80FD\u5BB6\u7535\u63A7\u5236</p>
<p>\u5C0F\u660E\u7684\u7237\u7237\u5DF2\u7ECF 60 \u5C81\u4E86\uFF0C\u4E00\u4E2A\u4EBA\u5728\u5BB6\u751F\u6D3B\uFF1A\u6BCF\u6B21\u90FD\u9700\u8981\u6253\u5F00\u706F\u3001\u6253\u5F00\u7535\u89C6\u3001\u6253\u5F00\u7A7A\u8C03\uFF1B\u7761\u89C9\u65F6\u5173\u95ED\u706F\u3001\u5173\u95ED\u7535\u89C6\u3001\u5173\u95ED\u7A7A\u8C03\uFF1B\u64CD\u4F5C\u8D77\u6765\u90FD\u6BD4\u8F83\u9EBB\u70E6\u3002\u6240\u4EE5\u5C0F\u660E\u7ED9\u7237\u7237\u4E70\u4E86\u667A\u80FD\u97F3\u7BB1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BED\u97F3\u76F4\u63A5\u63A7\u5236\u8FD9\u4E9B\u667A\u80FD\u5BB6\u7535\u7684\u5F00\u542F\u548C\u5173\u95ED\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u5916\u89C2\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u706F\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Light</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u706F...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u706F...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7535\u89C6\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u7535\u89C6...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u7535\u89C6...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u63A7\u5236\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AirCondition</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u4E86\u7A7A\u8C03...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u4E86\u7A7A\u8C03...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u667A\u80FD\u97F3\u7BB1</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAppliancesFacade</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Light</span> light<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">TV</span> tv<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AirCondition</span> airCondition<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AirCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6211\u8FD8\u542C\u4E0D\u61C2\u4F60\u8BF4\u7684\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8D77\u5E8A\u540E\u4E00\u952E\u5F00\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8D77\u5E8A\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7761\u89C9\u4E00\u952E\u5173\u7535\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7761\u89C9\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5916\u89C2\u5BF9\u8C61</span>
        <span class="token class-name">SmartAppliancesFacade</span> facade <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5BA2\u6237\u7AEF\u76F4\u63A5\u4E0E\u5916\u89C2\u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"\u6253\u5F00\u5BB6\u7535"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"\u5173\u95ED\u5BB6\u7535"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u597D\u5904\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u4E86\u5B50\u7CFB\u7EDF\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u8026\u5408\u5EA6\uFF0C\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u8C03\u7528\u5B83\u7684\u5BA2\u6237\u7C7B\u3002</li>
<li>\u5BF9\u5BA2\u6237\u5C4F\u853D\u4E86\u5B50\u7CFB\u7EDF\u7EC4\u4EF6\uFF0C\u51CF\u5C11\u4E86\u5BA2\u6237\u5904\u7406\u7684\u5BF9\u8C61\u6570\u76EE\uFF0C\u5E76\u4F7F\u5F97\u5B50\u7CFB\u7EDF\u4F7F\u7528\u8D77\u6765\u66F4\u52A0\u5BB9\u6613\u3002</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4E0D\u7B26\u5408\u5F00\u95ED\u539F\u5219\uFF0C\u4FEE\u6539\u5F88\u9EBB\u70E6</li>
</ul>
<h3 id="_5-5-4-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-5-4-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.5.4 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u5206\u5C42\u7ED3\u6784\u7CFB\u7EDF\u6784\u5EFA\u65F6\uFF0C\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5B9A\u4E49\u5B50\u7CFB\u7EDF\u4E2D\u6BCF\u5C42\u7684\u5165\u53E3\u70B9\u53EF\u4EE5\u7B80\u5316\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</li>
<li>\u5F53\u4E00\u4E2A\u590D\u6742\u7CFB\u7EDF\u7684\u5B50\u7CFB\u7EDF\u5F88\u591A\u65F6\uFF0C\u5916\u89C2\u6A21\u5F0F\u53EF\u4EE5\u4E3A\u7CFB\u7EDF\u8BBE\u8BA1\u4E00\u4E2A\u7B80\u5355\u7684\u63A5\u53E3\u4F9B\u5916\u754C\u8BBF\u95EE\u3002</li>
<li>\u5F53\u5BA2\u6237\u7AEF\u4E0E\u591A\u4E2A\u5B50\u7CFB\u7EDF\u4E4B\u95F4\u5B58\u5728\u5F88\u5927\u7684\u8054\u7CFB\u65F6\uFF0C\u5F15\u5165\u5916\u89C2\u6A21\u5F0F\u53EF\u5C06\u5B83\u4EEC\u5206\u79BB\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5B50\u7CFB\u7EDF\u7684\u72EC\u7ACB\u6027\u548C\u53EF\u79FB\u690D\u6027\u3002</li>
</ul>
<h3 id="_5-5-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-5-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.5.5 \u6E90\u7801\u89E3\u6790</h3>
<p>\u4F7F\u7528 tomcat \u4F5C\u4E3A web \u5BB9\u5668\u65F6\uFF0C\u63A5\u6536\u6D4F\u89C8\u5668\u53D1\u9001\u8FC7\u6765\u7684\u8BF7\u6C42\uFF0Ctomcat \u4F1A\u5C06\u8BF7\u6C42\u4FE1\u606F\u5C01\u88C5\u6210 ServletRequest \u5BF9\u8C61\uFF0C\u5982\u4E0B\u56FE \u2460 \u5904\u5BF9\u8C61\u3002\u4F46\u662F\u5927\u5BB6\u60F3\u60F3 ServletRequest \u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B83\u8FD8\u6709\u4E00\u4E2A\u5B50\u63A5\u53E3 HttpServletRequest\uFF0C\u800C\u6211\u4EEC\u77E5\u9053\u8BE5 request \u5BF9\u8C61\u80AF\u5B9A\u662F\u4E00\u4E2A HttpServletRequest \u5BF9\u8C61\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\uFF0C\u5230\u5E95\u662F\u54EA\u4E2A\u7C7B\u7684\u5BF9\u8C61\u5462\uFF1F\u53EF\u4EE5\u901A\u8FC7\u8F93\u51FA request \u5BF9\u8C61\uFF0C\u6211\u4EEC\u5C31\u4F1A\u53D1\u73B0\u662F\u4E00\u4E2A\u540D\u4E3A RequestFacade \u7684\u7C7B\u7684\u5BF9\u8C61\u3002</p>
<img src="/img/image-20200207234545691.png" style="zoom:60%;" />
<p>RequestFacade \u7C7B\u5C31\u4F7F\u7528\u4E86\u5916\u89C2\u6A21\u5F0F\u3002\u5148\u770B\u7ED3\u6784\u56FE\uFF1A</p>
<img src="/img/\u5916\u89C2\u6A21\u5F0F-jdk\u6E90\u7801\u89E3\u6790.png" style="zoom:70%;" />
<p><strong>\u4E3A\u4EC0\u4E48\u5728\u6B64\u5904\u4F7F\u7528\u5916\u89C2\u6A21\u5F0F\u5462\uFF1F</strong></p>
<p>\u200B \u5B9A\u4E49 RequestFacade \u7C7B\uFF0C\u5206\u522B\u5B9E\u73B0 ServletRequest \uFF0C\u540C\u65F6\u5B9A\u4E49\u79C1\u6709\u6210\u5458\u53D8\u91CF Request \uFF0C\u5E76\u4E14\u65B9\u6CD5\u7684\u5B9E\u73B0\u8C03\u7528 Request \u7684\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u5C06 RequestFacade \u4E0A\u8F6C\u4E3A ServletRequest \u4F20\u7ED9 servlet \u7684 service \u65B9\u6CD5\uFF0C\u8FD9\u6837\u5373\u4F7F\u5728 servlet \u4E2D\u88AB\u4E0B\u8F6C\u4E3A RequestFacade \uFF0C\u4E5F\u4E0D\u80FD\u8BBF\u95EE\u79C1\u6709\u6210\u5458\u53D8\u91CF\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5\u3002\u65E2\u7528\u4E86 Request \uFF0C\u53C8\u80FD\u9632\u6B62\u5176\u4E2D\u65B9\u6CD5\u88AB\u4E0D\u5408\u7406\u7684\u8BBF\u95EE\u3002</p>
<h2 id="_5-6-\u7EC4\u5408\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-6-\u7EC4\u5408\u6A21\u5F0F" aria-hidden="true">#</a> 5.6 \u7EC4\u5408\u6A21\u5F0F</h2>
<h3 id="_5-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.6.1 \u6982\u8FF0</h3>
<img src="/img/image-20200208180417291.png" style="zoom:60%;" />
<p>\u200B \u5BF9\u4E8E\u8FD9\u4E2A\u56FE\u7247\u80AF\u5B9A\u4F1A\u975E\u5E38\u719F\u6089\uFF0C\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u505A\u662F\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5BF9\u4E8E\u8FD9\u6837\u7684\u7ED3\u6784\u6211\u4EEC\u79F0\u4E4B\u4E3A\u6811\u5F62\u7ED3\u6784\u3002\u5728\u6811\u5F62\u7ED3\u6784\u4E2D\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528\u67D0\u4E2A\u65B9\u6CD5\u6765\u904D\u5386\u6574\u4E2A\u6811\uFF0C\u5F53\u6211\u4EEC\u627E\u5230\u67D0\u4E2A\u53F6\u5B50\u8282\u70B9\u540E\uFF0C\u5C31\u53EF\u4EE5\u5BF9\u53F6\u5B50\u8282\u70B9\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u53EF\u4EE5\u5C06\u8FD9\u9897\u6811\u7406\u89E3\u6210\u4E00\u4E2A\u5927\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u91CC\u9762\u5305\u542B\u5F88\u591A\u7684\u6210\u5458\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u6210\u5458\u5BF9\u8C61\u5373\u53EF\u662F\u5BB9\u5668\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u662F\u53F6\u5B50\u5BF9\u8C61\u3002\u4F46\u662F\u7531\u4E8E\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u5728\u529F\u80FD\u4E0A\u9762\u7684\u533A\u522B\uFF0C\u4F7F\u5F97\u6211\u4EEC\u5728\u4F7F\u7528\u7684\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u8981\u533A\u5206\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\uFF0C\u4F46\u662F\u8FD9\u6837\u5C31\u4F1A\u7ED9\u5BA2\u6237\u5E26\u6765\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u800C\u5DF2\uFF0C\u5B83\u59CB\u7EC8\u5E0C\u671B\u80FD\u591F\u4E00\u81F4\u7684\u5BF9\u5F85\u5BB9\u5668\u5BF9\u8C61\u548C\u53F6\u5B50\u5BF9\u8C61\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u53C8\u540D\u90E8\u5206\u6574\u4F53\u6A21\u5F0F\uFF0C\u662F\u7528\u4E8E\u628A\u4E00\u7EC4\u76F8\u4F3C\u7684\u5BF9\u8C61\u5F53\u4F5C\u4E00\u4E2A\u5355\u4E00\u7684\u5BF9\u8C61\u3002\u7EC4\u5408\u6A21\u5F0F\u4F9D\u636E\u6811\u5F62\u7ED3\u6784\u6765\u7EC4\u5408\u5BF9\u8C61\uFF0C\u7528\u6765\u8868\u793A\u90E8\u5206\u4EE5\u53CA\u6574\u4F53\u5C42\u6B21\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u8BBE\u8BA1\u6A21\u5F0F\u5C5E\u4E8E\u7ED3\u6784\u578B\u6A21\u5F0F\uFF0C\u5B83\u521B\u5EFA\u4E86\u5BF9\u8C61\u7EC4\u7684\u6811\u5F62\u7ED3\u6784\u3002</p>
<h3 id="_5-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.6.2 \u7ED3\u6784</h3>
<p>\u7EC4\u5408\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4E09\u79CD\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u6839\u8282\u70B9\uFF08Component\uFF09\uFF1A\u5B9A\u4E49\u7CFB\u7EDF\u5404\u5C42\u6B21\u5BF9\u8C61\u7684\u5171\u6709\u65B9\u6CD5\u548C\u5C5E\u6027\uFF0C\u53EF\u4EE5\u9884\u5148\u5B9A\u4E49\u4E00\u4E9B\u9ED8\u8BA4\u884C\u4E3A\u548C\u5C5E\u6027\u3002</li>
<li>\u6811\u679D\u8282\u70B9\uFF08Composite\uFF09\uFF1A\u5B9A\u4E49\u6811\u679D\u8282\u70B9\u7684\u884C\u4E3A\uFF0C\u5B58\u50A8\u5B50\u8282\u70B9\uFF0C\u7EC4\u5408\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E00\u4E2A\u6811\u5F62\u7ED3\u6784\u3002</li>
<li>\u53F6\u5B50\u8282\u70B9\uFF08Leaf\uFF09\uFF1A\u53F6\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u5176\u4E0B\u518D\u65E0\u5206\u652F\uFF0C\u662F\u7CFB\u7EDF\u5C42\u6B21\u904D\u5386\u7684\u6700\u5C0F\u5355\u4F4D\u3002</li>
</ul>
<h3 id="_5-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.6.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u8F6F\u4EF6\u83DC\u5355</p>
<p>\u5982\u4E0B\u56FE\uFF0C\u6211\u4EEC\u5728\u8BBF\u95EE\u522B\u7684\u4E00\u4E9B\u7BA1\u7406\u7CFB\u7EDF\u65F6\uFF0C\u7ECF\u5E38\u53EF\u4EE5\u770B\u5230\u7C7B\u4F3C\u7684\u83DC\u5355\u3002\u4E00\u4E2A\u83DC\u5355\u53EF\u4EE5\u5305\u542B\u83DC\u5355\u9879\uFF08\u83DC\u5355\u9879\u662F\u6307\u4E0D\u518D\u5305\u542B\u5176\u4ED6\u5185\u5BB9\u7684\u83DC\u5355\u6761\u76EE\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u5305\u542B\u5E26\u6709\u5176\u4ED6\u83DC\u5355\u9879\u7684\u83DC\u5355\uFF0C\u56E0\u6B64\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u63CF\u8FF0\u83DC\u5355\u5C31\u5F88\u6070\u5F53\uFF0C\u6211\u4EEC\u7684\u9700\u6C42\u662F\u9488\u5BF9\u4E00\u4E2A\u83DC\u5355\uFF0C\u6253\u5370\u51FA\u5176\u5305\u542B\u7684\u6240\u6709\u83DC\u5355\u4EE5\u53CA\u83DC\u5355\u9879\u7684\u540D\u79F0\u3002</p>
<img src="/img/image-20200208182322313.png" style="zoom:80%;" />
<p>\u8981\u5B9E\u73B0\u8BE5\u6848\u4F8B\uFF0C\u6211\u4EEC\u5148\u753B\u51FA\u7C7B\u56FE\uFF1A</p>
<img src="/img/\u7EC4\u5408\u6A21\u5F0F.png" style="zoom:80%;" />
<p><strong>\u4EE3\u7801\u5B9E\u73B0\uFF1A</strong></p>
<p>\u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u81EA\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u8FD9\u91CC\u59D1\u4E14\u5C06\u8FD9\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u79F0\u4E3A\u83DC\u5355\u7EC4\u4EF6\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u83DC\u5355\u7EC4\u4EF6  \u4E0D\u7BA1\u662F\u83DC\u5355\u8FD8\u662F\u83DC\u5355\u9879\uFF0C\u90FD\u5E94\u8BE5\u7EE7\u627F\u8BE5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>

    <span class="token comment">//\u6DFB\u52A0\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u79FB\u9664\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u6307\u5B9A\u7684\u5B50\u83DC\u5355</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u83DC\u5355\u540D\u79F0</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u7684 MenuComponent \u5B9A\u4E49\u4E3A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u4E3A\u6709\u4E00\u4E9B\u5171\u6709\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9E\u73B0\uFF0CMenu \u548C MenuItem \u7C7B\u5C31\u53EF\u4EE5\u53EA\u8986\u76D6\u81EA\u5DF1\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u800C\u4E0D\u7528\u642D\u7406\u4E0D\u9700\u8981\u6216\u8005\u4E0D\u611F\u5174\u8DA3\u7684\u65B9\u6CD5\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0CMenu \u7C7B\u53EF\u4EE5\u5305\u542B\u5B50\u83DC\u5355\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6 add()\u3001remove()\u3001getChild()\u65B9\u6CD5\uFF0C\u4F46\u662F MenuItem \u5C31\u4E0D\u5E94\u8BE5\u6709\u8FD9\u4E9B\u65B9\u6CD5\u3002\u8FD9\u91CC\u7ED9\u51FA\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u629B\u51FA\u5F02\u5E38\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\u6539\u5199\u9ED8\u8BA4\u5B9E\u73B0\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">></span></span> menuComponentList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        menuComponentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> menuComponentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent <span class="token operator">:</span> menuComponentList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            menuComponent<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Menu \u7C7B\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u9664\u4E86 getName \u65B9\u6CD5\u7684\u5176\u4ED6\u6240\u6709\u65B9\u6CD5\uFF0C\u56E0\u4E3A Menu \u7C7B\u5177\u6709\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuItem</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"--"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MenuItem \u662F\u83DC\u5355\u9879\uFF0C\u4E0D\u80FD\u518D\u6709\u5B50\u83DC\u5355\uFF0C\u6240\u4EE5\u6DFB\u52A0\u83DC\u5355\uFF0C\u79FB\u9664\u83DC\u5355\u548C\u83B7\u53D6\u5B50\u83DC\u5355\u7684\u529F\u80FD\u5E76\u4E0D\u80FD\u5B9E\u73B0\u3002</p>
<h3 id="_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5-6-4-\u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B" aria-hidden="true">#</a> 5.6.4 \u7EC4\u5408\u6A21\u5F0F\u7684\u5206\u7C7B</h3>
<p>\u5728\u4F7F\u7528\u7EC4\u5408\u6A21\u5F0F\u65F6\uFF0C\u6839\u636E\u62BD\u8C61\u6784\u4EF6\u7C7B\u7684\u5B9A\u4E49\u5F62\u5F0F\uFF0C\u6211\u4EEC\u53EF\u5C06\u7EC4\u5408\u6A21\u5F0F\u5206\u4E3A\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u548C\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E24\u79CD\u5F62\u5F0F\u3002</p>
<ul>
<li>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F</p>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u62BD\u8C61\u6839\u8282\u70B9\u89D2\u8272\u4E2D\u58F0\u660E\u4E86\u6240\u6709\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u5728\u793A\u4F8B\u4E2D <code v-pre>MenuComponent</code> \u58F0\u660E\u4E86 <code v-pre>add</code>\u3001<code v-pre>remove</code> \u3001<code v-pre>getChild</code> \u65B9\u6CD5\uFF0C\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u786E\u4FDD\u6240\u6709\u7684\u6784\u4EF6\u7C7B\u90FD\u6709\u76F8\u540C\u7684\u63A5\u53E3\u3002\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u4E5F\u662F\u7EC4\u5408\u6A21\u5F0F\u7684\u6807\u51C6\u5F62\u5F0F\u3002</p>
<p>\u900F\u660E\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u5B89\u5168\uFF0C\u56E0\u4E3A\u53F6\u5B50\u5BF9\u8C61\u548C\u5BB9\u5668\u5BF9\u8C61\u5728\u672C\u8D28\u4E0A\u662F\u6709\u533A\u522B\u7684\uFF0C\u53F6\u5B50\u5BF9\u8C61\u4E0D\u53EF\u80FD\u6709\u4E0B\u4E00\u4E2A\u5C42\u6B21\u7684\u5BF9\u8C61\uFF0C\u5373\u4E0D\u53EF\u80FD\u5305\u542B\u6210\u5458\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E3A\u5176\u63D0\u4F9B add()\u3001remove() \u7B49\u65B9\u6CD5\u662F\u6CA1\u6709\u610F\u4E49\u7684\uFF0C\u8FD9\u5728\u7F16\u8BD1\u9636\u6BB5\u4E0D\u4F1A\u51FA\u9519\uFF0C\u4F46\u5728\u8FD0\u884C\u9636\u6BB5\u5982\u679C\u8C03\u7528\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u80FD\u4F1A\u51FA\u9519\uFF08\u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u76F8\u5E94\u7684\u9519\u8BEF\u5904\u7406\u4EE3\u7801\uFF09</p>
</li>
<li>
<p>\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F</p>
<p>\u5728\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u4E2D\uFF0C\u5728\u62BD\u8C61\u6784\u4EF6\u89D2\u8272\u4E2D\u6CA1\u6709\u58F0\u660E\u4EFB\u4F55\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u800C\u662F\u5728\u6811\u679D\u8282\u70B9 <code v-pre>Menu</code> \u7C7B\u4E2D\u58F0\u660E\u5E76\u5B9E\u73B0\u8FD9\u4E9B\u65B9\u6CD5\u3002\u5B89\u5168\u7EC4\u5408\u6A21\u5F0F\u7684\u7F3A\u70B9\u662F\u4E0D\u591F\u900F\u660E\uFF0C\u56E0\u4E3A\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u5177\u6709\u4E0D\u540C\u7684\u65B9\u6CD5\uFF0C\u4E14\u5BB9\u5668\u6784\u4EF6\u4E2D\u90A3\u4E9B\u7528\u4E8E\u7BA1\u7406\u6210\u5458\u5BF9\u8C61\u7684\u65B9\u6CD5\u6CA1\u6709\u5728\u62BD\u8C61\u6784\u4EF6\u7C7B\u4E2D\u5B9A\u4E49\uFF0C\u56E0\u6B64\u5BA2\u6237\u7AEF\u4E0D\u80FD\u5B8C\u5168\u9488\u5BF9\u62BD\u8C61\u7F16\u7A0B\uFF0C\u5FC5\u987B\u6709\u533A\u522B\u5730\u5BF9\u5F85\u53F6\u5B50\u6784\u4EF6\u548C\u5BB9\u5668\u6784\u4EF6\u3002</p>
<img src="/img/\u7EC4\u5408\u6A21\u5F0F-\u5B89\u5168\u6027.png" style="zoom:80%;" />
</li>
</ul>
<h3 id="_5-6-5-\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-6-5-\u4F18\u70B9" aria-hidden="true">#</a> 5.6.5 \u4F18\u70B9</h3>
<ul>
<li>\u7EC4\u5408\u6A21\u5F0F\u53EF\u4EE5\u6E05\u695A\u5730\u5B9A\u4E49\u5206\u5C42\u6B21\u7684\u590D\u6742\u5BF9\u8C61\uFF0C\u8868\u793A\u5BF9\u8C61\u7684\u5168\u90E8\u6216\u90E8\u5206\u5C42\u6B21\uFF0C\u5B83\u8BA9\u5BA2\u6237\u7AEF\u5FFD\u7565\u4E86\u5C42\u6B21\u7684\u5DEE\u5F02\uFF0C\u65B9\u4FBF\u5BF9\u6574\u4E2A\u5C42\u6B21\u7ED3\u6784\u8FDB\u884C\u63A7\u5236\u3002</li>
<li>\u5BA2\u6237\u7AEF\u53EF\u4EE5\u4E00\u81F4\u5730\u4F7F\u7528\u4E00\u4E2A\u7EC4\u5408\u7ED3\u6784\u6216\u5176\u4E2D\u5355\u4E2A\u5BF9\u8C61\uFF0C\u4E0D\u5FC5\u5173\u5FC3\u5904\u7406\u7684\u662F\u5355\u4E2A\u5BF9\u8C61\u8FD8\u662F\u6574\u4E2A\u7EC4\u5408\u7ED3\u6784\uFF0C\u7B80\u5316\u4E86\u5BA2\u6237\u7AEF\u4EE3\u7801\u3002</li>
<li>\u5728\u7EC4\u5408\u6A21\u5F0F\u4E2D\u589E\u52A0\u65B0\u7684\u6811\u679D\u8282\u70B9\u548C\u53F6\u5B50\u8282\u70B9\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u5BF9\u73B0\u6709\u7C7B\u5E93\u8FDB\u884C\u4EFB\u4F55\u4FEE\u6539\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</li>
<li>\u7EC4\u5408\u6A21\u5F0F\u4E3A\u6811\u5F62\u7ED3\u6784\u7684\u9762\u5411\u5BF9\u8C61\u5B9E\u73B0\u63D0\u4F9B\u4E86\u4E00\u79CD\u7075\u6D3B\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u901A\u8FC7\u53F6\u5B50\u8282\u70B9\u548C\u6811\u679D\u8282\u70B9\u7684\u9012\u5F52\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5F62\u6210\u590D\u6742\u7684\u6811\u5F62\u7ED3\u6784\uFF0C\u4F46\u5BF9\u6811\u5F62\u7ED3\u6784\u7684\u63A7\u5236\u5374\u975E\u5E38\u7B80\u5355\u3002</li>
</ul>
<h3 id="_5-6-6-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-6-6-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.6.6 \u4F7F\u7528\u573A\u666F</h3>
<p>\u7EC4\u5408\u6A21\u5F0F\u6B63\u662F\u5E94\u6811\u5F62\u7ED3\u6784\u800C\u751F\uFF0C\u6240\u4EE5\u7EC4\u5408\u6A21\u5F0F\u7684\u4F7F\u7528\u573A\u666F\u5C31\u662F\u51FA\u73B0\u6811\u5F62\u7ED3\u6784\u7684\u5730\u65B9\u3002\u6BD4\u5982\uFF1A\u6587\u4EF6\u76EE\u5F55\u663E\u793A\uFF0C\u591A\u7EA7\u76EE\u5F55\u5448\u73B0\u7B49\u6811\u5F62\u7ED3\u6784\u6570\u636E\u7684\u64CD\u4F5C\u3002</p>
<h2 id="_5-7-\u4EAB\u5143\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_5-7-\u4EAB\u5143\u6A21\u5F0F" aria-hidden="true">#</a> 5.7 \u4EAB\u5143\u6A21\u5F0F</h2>
<h3 id="_5-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_5-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 5.7.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u8FD0\u7528\u5171\u4EAB\u6280\u672F\u6765\u6709\u6548\u5730\u652F\u6301\u5927\u91CF\u7EC6\u7C92\u5EA6\u5BF9\u8C61\u7684\u590D\u7528\u3002\u5B83\u901A\u8FC7\u5171\u4EAB\u5DF2\u7ECF\u5B58\u5728\u7684\u5BF9\u8C61\u6765\u5927\u5E45\u5EA6\u51CF\u5C11\u9700\u8981\u521B\u5EFA\u7684\u5BF9\u8C61\u6570\u91CF\u3001\u907F\u514D\u5927\u91CF\u76F8\u4F3C\u5BF9\u8C61\u7684\u5F00\u9500\uFF0C\u4ECE\u800C\u63D0\u9AD8\u7CFB\u7EDF\u8D44\u6E90\u7684\u5229\u7528\u7387\u3002</p>
<h3 id="_5-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_5-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 5.7.2 \u7ED3\u6784</h3>
<p>\u4EAB\u5143\uFF08Flyweight \uFF09\u6A21\u5F0F\u4E2D\u5B58\u5728\u4EE5\u4E0B\u4E24\u79CD\u72B6\u6001\uFF1A</p>
<ol>
<li>\u5185\u90E8\u72B6\u6001\uFF0C\u5373\u4E0D\u4F1A\u968F\u7740\u73AF\u5883\u7684\u6539\u53D8\u800C\u6539\u53D8\u7684\u53EF\u5171\u4EAB\u90E8\u5206\u3002</li>
<li>\u5916\u90E8\u72B6\u6001\uFF0C\u6307\u968F\u73AF\u5883\u6539\u53D8\u800C\u6539\u53D8\u7684\u4E0D\u53EF\u4EE5\u5171\u4EAB\u7684\u90E8\u5206\u3002\u4EAB\u5143\u6A21\u5F0F\u7684\u5B9E\u73B0\u8981\u9886\u5C31\u662F\u533A\u5206\u5E94\u7528\u4E2D\u7684\u8FD9\u4E24\u79CD\u72B6\u6001\uFF0C\u5E76\u5C06\u5916\u90E8\u72B6\u6001\u5916\u90E8\u5316\u3002</li>
</ol>
<p>\u4EAB\u5143\u6A21\u5F0F\u7684\u4E3B\u8981\u6709\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u4EAB\u5143\u89D2\u8272\uFF08Flyweight\uFF09\uFF1A\u901A\u5E38\u662F\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\uFF0C\u5728\u62BD\u8C61\u4EAB\u5143\u7C7B\u4E2D\u58F0\u660E\u4E86\u5177\u4F53\u4EAB\u5143\u7C7B\u516C\u5171\u7684\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u53EF\u4EE5\u5411\u5916\u754C\u63D0\u4F9B\u4EAB\u5143\u5BF9\u8C61\u7684\u5185\u90E8\u6570\u636E\uFF08\u5185\u90E8\u72B6\u6001\uFF09\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E9B\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5916\u90E8\u6570\u636E\uFF08\u5916\u90E8\u72B6\u6001\uFF09\u3002</li>
<li>\u5177\u4F53\u4EAB\u5143\uFF08Concrete Flyweight\uFF09\u89D2\u8272 \uFF1A\u5B83\u5B9E\u73B0\u4E86\u62BD\u8C61\u4EAB\u5143\u7C7B\uFF0C\u79F0\u4E3A\u4EAB\u5143\u5BF9\u8C61\uFF1B\u5728\u5177\u4F53\u4EAB\u5143\u7C7B\u4E2D\u4E3A\u5185\u90E8\u72B6\u6001\u63D0\u4F9B\u4E86\u5B58\u50A8\u7A7A\u95F4\u3002\u901A\u5E38\u6211\u4EEC\u53EF\u4EE5\u7ED3\u5408\u5355\u4F8B\u6A21\u5F0F\u6765\u8BBE\u8BA1\u5177\u4F53\u4EAB\u5143\u7C7B\uFF0C\u4E3A\u6BCF\u4E00\u4E2A\u5177\u4F53\u4EAB\u5143\u7C7B\u63D0\u4F9B\u552F\u4E00\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li>
<li>\u975E\u4EAB\u5143\uFF08Unsharable Flyweight)\u89D2\u8272 \uFF1A\u5E76\u4E0D\u662F\u6240\u6709\u7684\u62BD\u8C61\u4EAB\u5143\u7C7B\u7684\u5B50\u7C7B\u90FD\u9700\u8981\u88AB\u5171\u4EAB\uFF0C\u4E0D\u80FD\u88AB\u5171\u4EAB\u7684\u5B50\u7C7B\u53EF\u8BBE\u8BA1\u4E3A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\uFF1B\u5F53\u9700\u8981\u4E00\u4E2A\u975E\u5171\u4EAB\u5177\u4F53\u4EAB\u5143\u7C7B\u7684\u5BF9\u8C61\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u5316\u521B\u5EFA\u3002</li>
<li>\u4EAB\u5143\u5DE5\u5382\uFF08Flyweight Factory\uFF09\u89D2\u8272 \uFF1A\u8D1F\u8D23\u521B\u5EFA\u548C\u7BA1\u7406\u4EAB\u5143\u89D2\u8272\u3002\u5F53\u5BA2\u6237\u5BF9\u8C61\u8BF7\u6C42\u4E00\u4E2A\u4EAB\u5143\u5BF9\u8C61\u65F6\uFF0C\u4EAB\u5143\u5DE5\u5382\u68C0\u67FB\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728\u7B26\u5408\u8981\u6C42\u7684\u4EAB\u5143\u5BF9\u8C61\uFF0C\u5982\u679C\u5B58\u5728\u5219\u63D0\u4F9B\u7ED9\u5BA2\u6237\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\u7684\u8BDD\uFF0C\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4EAB\u5143\u5BF9\u8C61\u3002</li>
</ul>
<h3 id="_5-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_5-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 5.7.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u4FC4\u7F57\u65AF\u65B9\u5757</p>
<p>\u4E0B\u9762\u7684\u56FE\u7247\u662F\u4F17\u6240\u5468\u77E5\u7684\u4FC4\u7F57\u65AF\u65B9\u5757\u4E2D\u7684\u4E00\u4E2A\u4E2A\u65B9\u5757\uFF0C\u5982\u679C\u5728\u4FC4\u7F57\u65AF\u65B9\u5757\u8FD9\u4E2A\u6E38\u620F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u65B9\u5757\u90FD\u662F\u4E00\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u8FD9\u4E9B\u5BF9\u8C61\u5C31\u8981\u5360\u7528\u5F88\u591A\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E0B\u9762\u5229\u7528\u4EAB\u5143\u6A21\u5F0F\u8FDB\u884C\u5B9E\u73B0\u3002</p>
<img src="/img/\u4FC4\u7F57\u65AF\u65B9\u5757.jpeg" style="zoom:60%;" />
<p><strong>\u5148\u6765\u770B\u7C7B\u56FE\uFF1A</strong></p>
<img src="/img/\u4EAB\u5143\u6A21\u5F0F.png" style="zoom:80%;" />
<p><strong>\u4EE3\u7801\u5982\u4E0B\uFF1A</strong></p>
<p>\u4FC4\u7F57\u65AF\u65B9\u5757\u6709\u4E0D\u540C\u7684\u5F62\u72B6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u8FD9\u4E9B\u5F62\u72B6\u5411\u4E0A\u62BD\u53D6\u51FA AbstractBox\uFF0C\u7528\u6765\u5B9A\u4E49\u5171\u6027\u7684\u5C5E\u6027\u548C\u884C\u4E3A\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u65B9\u5757\u5F62\u72B6\uFF1A"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" \u989C\u8272\uFF1A"</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u4E0B\u6765\u5C31\u662F\u5B9A\u4E49\u4E0D\u540C\u7684\u5F62\u72B6\u4E86\uFF0CIBox \u7C7B\u3001LBox \u7C7B\u3001OBox \u7C7B\u7B49\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"I"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"L"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"O"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5DE5\u5382\u7C7B\uFF08BoxFactory\uFF09\uFF0C\u7528\u6765\u7BA1\u7406\u4EAB\u5143\u5BF9\u8C61\uFF08\u4E5F\u5C31\u662F AbstractBox \u5B50\u7C7B\u5BF9\u8C61\uFF09\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5BF9\u8C61\u53EA\u9700\u8981\u4E00\u4E2A\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5355\u4F8B\u6A21\u5F0F\u3002\u5E76\u7ED9\u5DE5\u5382\u7C7B\u63D0\u4F9B\u4E00\u4E2A\u83B7\u53D6\u5F62\u72B6\u7684\u65B9\u6CD5\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoxFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">></span></span> map<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> iBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> lBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> oBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"I"</span><span class="token punctuation">,</span> iBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"L"</span><span class="token punctuation">,</span> lBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"O"</span><span class="token punctuation">,</span> oBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">AbstractBox</span> <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_5-7-5-\u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 5.7.5 \u4F18\u7F3A\u70B9\u548C\u4F7F\u7528\u573A\u666F</h3>
<p><strong>1\uFF0C\u4F18\u70B9</strong></p>
<ul>
<li>\u6781\u5927\u51CF\u5C11\u5185\u5B58\u4E2D\u76F8\u4F3C\u6216\u76F8\u540C\u5BF9\u8C61\u6570\u91CF\uFF0C\u8282\u7EA6\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u6027\u80FD</li>
<li>\u4EAB\u5143\u6A21\u5F0F\u4E2D\u7684\u5916\u90E8\u72B6\u6001\u76F8\u5BF9\u72EC\u7ACB\uFF0C\u4E14\u4E0D\u5F71\u54CD\u5185\u90E8\u72B6\u6001</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u4E3A\u4E86\u4F7F\u5BF9\u8C61\u53EF\u4EE5\u5171\u4EAB\uFF0C\u9700\u8981\u5C06\u4EAB\u5143\u5BF9\u8C61\u7684\u90E8\u5206\u72B6\u6001\u5916\u90E8\u5316\uFF0C\u5206\u79BB\u5185\u90E8\u72B6\u6001\u548C\u5916\u90E8\u72B6\u6001\uFF0C\u4F7F\u7A0B\u5E8F\u903B\u8F91\u590D\u6742</p>
<p><strong>3\uFF0C\u4F7F\u7528\u573A\u666F\uFF1A</strong></p>
<ul>
<li>\u4E00\u4E2A\u7CFB\u7EDF\u6709\u5927\u91CF\u76F8\u540C\u6216\u8005\u76F8\u4F3C\u7684\u5BF9\u8C61\uFF0C\u9020\u6210\u5185\u5B58\u7684\u5927\u91CF\u8017\u8D39\u3002</li>
<li>\u5BF9\u8C61\u7684\u5927\u90E8\u5206\u72B6\u6001\u90FD\u53EF\u4EE5\u5916\u90E8\u5316\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u72B6\u6001\u4F20\u5165\u5BF9\u8C61\u4E2D\u3002</li>
<li>\u5728\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u65F6\u9700\u8981\u7EF4\u62A4\u4E00\u4E2A\u5B58\u50A8\u4EAB\u5143\u5BF9\u8C61\u7684\u4EAB\u5143\u6C60\uFF0C\u800C\u8FD9\u9700\u8981\u8017\u8D39\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u56E0\u6B64\uFF0C\u5E94\u5F53\u5728\u9700\u8981\u591A\u6B21\u91CD\u590D\u4F7F\u7528\u4EAB\u5143\u5BF9\u8C61\u65F6\u624D\u503C\u5F97\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u3002</li>
</ul>
<h3 id="_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_5-7-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 5.7.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Integer \u7C7B\u4F7F\u7528\u4E86\u4EAB\u5143\u6A21\u5F0F\u3002\u6211\u4EEC\u5148\u770B\u4E0B\u9762\u7684\u4F8B\u5B50\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i1\u548Ci2\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i3\u548Ci4\u5BF9\u8C61\u662F\u5426\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61\uFF1F"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u4E0A\u9762\u4EE3\u7801\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200208212930857.png" style="zoom:80%;" />
<p>\u4E3A\u4EC0\u4E48\u7B2C\u4E00\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F true\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u51FA\u8BED\u53E5\u8F93\u51FA\u7684\u662F false\uFF1F\u901A\u8FC7\u53CD\u7F16\u8BD1\u8F6F\u4EF6\u8FDB\u884C\u53CD\u7F16\u8BD1\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i2 <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">"i1\\u548ci2\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token string">"i3\\u548ci4\\u5bf9\\u8c61\\u662f\\u5426\\u662f\\u540c\\u4e00\\u4e2a\\u5bf9\\u8c61\\uff1f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u76F4\u63A5\u7ED9 Integer \u7C7B\u578B\u7684\u53D8\u91CF\u8D4B\u503C\u57FA\u672C\u6570\u636E\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\u5E95\u5C42\u4F7F\u7528\u7684\u662F <code v-pre>valueOf()</code> \uFF0C\u6240\u4EE5\u53EA\u9700\u8981\u770B\u8BE5\u65B9\u6CD5\u5373\u53EF</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Integer</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntegerCache</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> high<span class="token punctuation">;</span>
        <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">static</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> integerCacheHighPropValue <span class="token operator">=</span>
                sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span><span class="token constant">VM</span><span class="token punctuation">.</span><span class="token function">getSavedProperty</span><span class="token punctuation">(</span><span class="token string">"java.lang.Integer.IntegerCache.high"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>integerCacheHighPropValue <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>integerCacheHighPropValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    i <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// Maximum array size is Integer.MAX_VALUE</span>
                    h <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">NumberFormatException</span> nfe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            high <span class="token operator">=</span> h<span class="token punctuation">;</span>
            cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> low<span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
                cache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>
            <span class="token keyword">assert</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high <span class="token operator">>=</span> <span class="token number">127</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230 <code v-pre>Integer</code> \u9ED8\u8BA4\u5148\u521B\u5EFA\u5E76\u7F13\u5B58 <code v-pre>-128 ~ 127</code> \u4E4B\u95F4\u6570\u7684 <code v-pre>Integer</code> \u5BF9\u8C61\uFF0C\u5F53\u8C03\u7528 <code v-pre>valueOf</code> \u65F6\u5982\u679C\u53C2\u6570\u5728 <code v-pre>-128 ~ 127</code> \u4E4B\u95F4\u5219\u8BA1\u7B97\u4E0B\u6807\u5E76\u4ECE\u7F13\u5B58\u4E2D\u8FD4\u56DE\uFF0C\u5426\u5219\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 <code v-pre>Integer</code> \u5BF9\u8C61\u3002</p>
<h1 id="_6-\u884C\u4E3A\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-\u884C\u4E3A\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 6\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F</h1>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u7528\u4E8E\u63CF\u8FF0\u7A0B\u5E8F\u5728\u8FD0\u884C\u65F6\u590D\u6742\u7684\u6D41\u7A0B\u63A7\u5236\uFF0C\u5373\u63CF\u8FF0\u591A\u4E2A\u7C7B\u6216\u5BF9\u8C61\u4E4B\u95F4\u600E\u6837\u76F8\u4E92\u534F\u4F5C\u5171\u540C\u5B8C\u6210\u5355\u4E2A\u5BF9\u8C61\u90FD\u65E0\u6CD5\u5355\u72EC\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u5B83\u6D89\u53CA\u7B97\u6CD5\u4E0E\u5BF9\u8C61\u95F4\u804C\u8D23\u7684\u5206\u914D\u3002</p>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\u7C7B\u884C\u4E3A\u6A21\u5F0F\u548C\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u524D\u8005\u91C7\u7528\u7EE7\u627F\u673A\u5236\u6765\u5728\u7C7B\u95F4\u5206\u6D3E\u884C\u4E3A\uFF0C\u540E\u8005\u91C7\u7528\u7EC4\u5408\u6216\u805A\u5408\u5728\u5BF9\u8C61\u95F4\u5206\u914D\u884C\u4E3A\u3002\u7531\u4E8E\u7EC4\u5408\u5173\u7CFB\u6216\u805A\u5408\u5173\u7CFB\u6BD4\u7EE7\u627F\u5173\u7CFB\u8026\u5408\u5EA6\u4F4E\uFF0C\u6EE1\u8DB3\u201C\u5408\u6210\u590D\u7528\u539F\u5219\u201D\uFF0C\u6240\u4EE5\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\u6BD4\u7C7B\u884C\u4E3A\u6A21\u5F0F\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002</p>
<p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5206\u4E3A\uFF1A</p>
<ul>
<li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</li>
<li>\u7B56\u7565\u6A21\u5F0F</li>
<li>\u547D\u4EE4\u6A21\u5F0F</li>
<li>\u804C\u8D23\u94FE\u6A21\u5F0F</li>
<li>\u72B6\u6001\u6A21\u5F0F</li>
<li>\u89C2\u5BDF\u8005\u6A21\u5F0F</li>
<li>\u4E2D\u4ECB\u8005\u6A21\u5F0F</li>
<li>\u8FED\u4EE3\u5668\u6A21\u5F0F</li>
<li>\u8BBF\u95EE\u8005\u6A21\u5F0F</li>
<li>\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
<li>\u89E3\u91CA\u5668\u6A21\u5F0F</li>
</ul>
<p>\u4EE5\u4E0A 11 \u79CD\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u9664\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u548C\u89E3\u91CA\u5668\u6A21\u5F0F\u662F\u7C7B\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u578B\u6A21\u5F0F\u3002</p>
<h2 id="_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 6.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</h2>
<h3 id="_6-1-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-1-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.1.1 \u6982\u8FF0</h3>
<p>\u5728\u9762\u5411\u5BF9\u8C61\u7A0B\u5E8F\u8BBE\u8BA1\u8FC7\u7A0B\u4E2D\uFF0C\u7A0B\u5E8F\u5458\u5E38\u5E38\u4F1A\u9047\u5230\u8FD9\u79CD\u60C5\u51B5\uFF1A\u8BBE\u8BA1\u4E00\u4E2A\u7CFB\u7EDF\u65F6\u77E5\u9053\u4E86\u7B97\u6CD5\u6240\u9700\u7684\u5173\u952E\u6B65\u9AA4\uFF0C\u800C\u4E14\u786E\u5B9A\u4E86\u8FD9\u4E9B\u6B65\u9AA4\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4F46\u67D0\u4E9B\u6B65\u9AA4\u7684\u5177\u4F53\u5B9E\u73B0\u8FD8\u672A\u77E5\uFF0C\u6216\u8005\u8BF4\u67D0\u4E9B\u6B65\u9AA4\u7684\u5B9E\u73B0\u4E0E\u5177\u4F53\u7684\u73AF\u5883\u76F8\u5173\u3002</p>
<p>\u4F8B\u5982\uFF0C\u53BB\u94F6\u884C\u529E\u7406\u4E1A\u52A1\u4E00\u822C\u8981\u7ECF\u8FC7\u4EE5\u4E0B 4 \u4E2A\u6D41\u7A0B\uFF1A\u53D6\u53F7\u3001\u6392\u961F\u3001\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u3001\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7B49\uFF0C\u5176\u4E2D\u53D6\u53F7\u3001\u6392\u961F\u548C\u5BF9\u94F6\u884C\u5DE5\u4F5C\u4EBA\u5458\u8FDB\u884C\u8BC4\u5206\u7684\u4E1A\u52A1\u5BF9\u6BCF\u4E2A\u5BA2\u6237\u662F\u4E00\u6837\u7684\uFF0C\u53EF\u4EE5\u5728\u7236\u7C7B\u4E2D\u5B9E\u73B0\uFF0C\u4F46\u662F\u529E\u7406\u5177\u4F53\u4E1A\u52A1\u5374\u56E0\u4EBA\u800C\u5F02\uFF0C\u5B83\u53EF\u80FD\u662F\u5B58\u6B3E\u3001\u53D6\u6B3E\u6216\u8005\u8F6C\u8D26\u7B49\uFF0C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\u5B9E\u73B0\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5B9A\u4E49\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u7684\u7B97\u6CD5\u9AA8\u67B6\uFF0C\u800C\u5C06\u7B97\u6CD5\u7684\u4E00\u4E9B\u6B65\u9AA4\u5EF6\u8FDF\u5230\u5B50\u7C7B\u4E2D\uFF0C\u4F7F\u5F97\u5B50\u7C7B\u53EF\u4EE5\u4E0D\u6539\u53D8\u8BE5\u7B97\u6CD5\u7ED3\u6784\u7684\u60C5\u51B5\u4E0B\u91CD\u5B9A\u4E49\u8BE5\u7B97\u6CD5\u7684\u67D0\u4E9B\u7279\u5B9A\u6B65\u9AA4\u3002</p>
<h3 id="_6-1-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-1-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.1.2 \u7ED3\u6784</h3>
<p>\u6A21\u677F\u65B9\u6CD5\uFF08Template Method\uFF09\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u7C7B\uFF08Abstract Class\uFF09\uFF1A\u8D1F\u8D23\u7ED9\u51FA\u4E00\u4E2A\u7B97\u6CD5\u7684\u8F6E\u5ED3\u548C\u9AA8\u67B6\u3002\u5B83\u7531\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\u548C\u82E5\u5E72\u4E2A\u57FA\u672C\u65B9\u6CD5\u6784\u6210\u3002</p>
<ul>
<li>
<p>\u6A21\u677F\u65B9\u6CD5\uFF1A\u5B9A\u4E49\u4E86\u7B97\u6CD5\u7684\u9AA8\u67B6\uFF0C\u6309\u67D0\u79CD\u987A\u5E8F\u8C03\u7528\u5176\u5305\u542B\u7684\u57FA\u672C\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u57FA\u672C\u65B9\u6CD5\uFF1A\u662F\u5B9E\u73B0\u7B97\u6CD5\u5404\u4E2A\u6B65\u9AA4\u7684\u65B9\u6CD5\uFF0C\u662F\u6A21\u677F\u65B9\u6CD5\u7684\u7EC4\u6210\u90E8\u5206\u3002\u57FA\u672C\u65B9\u6CD5\u53C8\u53EF\u4EE5\u5206\u4E3A\u4E09\u79CD\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u65B9\u6CD5(Abstract Method) \uFF1A\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5\u7531\u62BD\u8C61\u7C7B\u58F0\u660E\u3001\u7531\u5176\u5177\u4F53\u5B50\u7C7B\u5B9E\u73B0\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u65B9\u6CD5(Concrete Method) \uFF1A\u4E00\u4E2A\u5177\u4F53\u65B9\u6CD5\u7531\u4E00\u4E2A\u62BD\u8C61\u7C7B\u6216\u5177\u4F53\u7C7B\u58F0\u660E\u5E76\u5B9E\u73B0\uFF0C\u5176\u5B50\u7C7B\u53EF\u4EE5\u8FDB\u884C\u8986\u76D6\u4E5F\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u3002</p>
</li>
<li>
<p>\u94A9\u5B50\u65B9\u6CD5(Hook Method) \uFF1A\u5728\u62BD\u8C61\u7C7B\u4E2D\u5DF2\u7ECF\u5B9E\u73B0\uFF0C\u5305\u62EC\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\u548C\u9700\u8981\u5B50\u7C7B\u91CD\u5199\u7684\u7A7A\u65B9\u6CD5\u4E24\u79CD\u3002</p>
<p>\u4E00\u822C\u94A9\u5B50\u65B9\u6CD5\u662F\u7528\u4E8E\u5224\u65AD\u7684\u903B\u8F91\u65B9\u6CD5\uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u540D\u4E00\u822C\u4E3A isXxx\uFF0C\u8FD4\u56DE\u503C\u7C7B\u578B\u4E3A boolean \u7C7B\u578B\u3002</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>\u5177\u4F53\u5B50\u7C7B\uFF08Concrete Class\uFF09\uFF1A\u5B9E\u73B0\u62BD\u8C61\u7C7B\u4E2D\u6240\u5B9A\u4E49\u7684\u62BD\u8C61\u65B9\u6CD5\u548C\u94A9\u5B50\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u662F\u4E00\u4E2A\u9876\u7EA7\u903B\u8F91\u7684\u7EC4\u6210\u6B65\u9AA4\u3002</p>
</li>
</ul>
<h3 id="_6-1-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.1.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u7092\u83DC</p>
<p>\u7092\u83DC\u7684\u6B65\u9AA4\u662F\u56FA\u5B9A\u7684\uFF0C\u5206\u4E3A\u5012\u6CB9\u3001\u70ED\u6CB9\u3001\u5012\u852C\u83DC\u3001\u5012\u8C03\u6599\u54C1\u3001\u7FFB\u7092\u7B49\u6B65\u9AA4\u3002\u73B0\u901A\u8FC7\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u6765\u7528\u4EE3\u7801\u6A21\u62DF\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7B2C\u4E00\u6B65\uFF1A\u5012\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5012\u6CB9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF1A\u70ED\u6CB9\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u70ED\u6CB9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7B2C\u4E09\u6B65\uFF1A\u5012\u852C\u83DC\u662F\u4E0D\u4E00\u6837\u7684\uFF08\u4E00\u4E2A\u4E0B\u5305\u83DC\uFF0C\u4E00\u4E2A\u662F\u4E0B\u83DC\u5FC3\uFF09</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7B2C\u56DB\u6B65\uFF1A\u5012\u8C03\u5473\u6599\u662F\u4E0D\u4E00\u6837</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//\u7B2C\u4E94\u6B65\uFF1A\u7FFB\u7092\u662F\u4E00\u6837\u7684\uFF0C\u6240\u4EE5\u76F4\u63A5\u5B9E\u73B0</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7092\u554A\u7092\u554A\u7092\u5230\u719F\u554A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_BaoCai</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u852C\u83DC\u662F\u5305\u83DC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u9171\u6599\u662F\u8FA3\u6912"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_CaiXin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u852C\u83DC\u662F\u83DC\u5FC3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E0B\u9505\u7684\u9171\u6599\u662F\u849C\u84C9"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7092\u624B\u6495\u5305\u83DC</span>
        <span class="token class-name">ConcreteClass_BaoCai</span> baoCai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_BaoCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        baoCai<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u7092\u849C\u84C9\u83DC\u5FC3</span>
        <span class="token class-name">ConcreteClass_CaiXin</span> caiXin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_CaiXin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        caiXin<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u4E3A\u9632\u6B62\u6076\u610F\u64CD\u4F5C\uFF0C\u4E00\u822C\u6A21\u677F\u65B9\u6CD5\u90FD\u52A0\u4E0A final \u5173\u952E\u8BCD\u3002</p>
</blockquote>
<h3 id="_6-1-3-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-1-3-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.1.3 \u4F18\u7F3A\u70B9</h3>
<p><strong>\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027</p>
<p>\u5C06\u76F8\u540C\u90E8\u5206\u7684\u4EE3\u7801\u653E\u5728\u62BD\u8C61\u7684\u7236\u7C7B\u4E2D\uFF0C\u800C\u5C06\u4E0D\u540C\u7684\u4EE3\u7801\u653E\u5165\u4E0D\u540C\u7684\u5B50\u7C7B\u4E2D\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236</p>
<p>\u901A\u8FC7\u4E00\u4E2A\u7236\u7C7B\u8C03\u7528\u5176\u5B50\u7C7B\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u5BF9\u5B50\u7C7B\u7684\u5177\u4F53\u5B9E\u73B0\u6269\u5C55\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u5B9E\u73B0\u4E86\u53CD\u5411\u63A7\u5236 \uFF0C\u5E76\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
</li>
</ul>
<p><strong>\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5BF9\u6BCF\u4E2A\u4E0D\u540C\u7684\u5B9E\u73B0\u90FD\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u5B50\u7C7B\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u7C7B\u7684\u4E2A\u6570\u589E\u52A0\uFF0C\u7CFB\u7EDF\u66F4\u52A0\u5E9E\u5927\uFF0C\u8BBE\u8BA1\u4E5F\u66F4\u52A0\u62BD\u8C61\u3002</li>
<li>\u7236\u7C7B\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u5B50\u7C7B\u6267\u884C\u7684\u7ED3\u679C\u4F1A\u5F71\u54CD\u7236\u7C7B\u7684\u7ED3\u679C\uFF0C\u8FD9\u5BFC\u81F4\u4E00\u79CD\u53CD\u5411\u7684\u63A7\u5236\u7ED3\u6784\uFF0C\u5B83\u63D0\u9AD8\u4E86\u4EE3\u7801\u9605\u8BFB\u7684\u96BE\u5EA6\u3002</li>
</ul>
<h3 id="_6-1-4-\u9002\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-1-4-\u9002\u7528\u573A\u666F" aria-hidden="true">#</a> 6.1.4 \u9002\u7528\u573A\u666F</h3>
<ul>
<li>\u7B97\u6CD5\u7684\u6574\u4F53\u6B65\u9AA4\u5F88\u56FA\u5B9A\uFF0C\u4F46\u5176\u4E2D\u4E2A\u522B\u90E8\u5206\u6613\u53D8\u65F6\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u4F7F\u7528\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\uFF0C\u5C06\u5BB9\u6613\u53D8\u7684\u90E8\u5206\u62BD\u8C61\u51FA\u6765\uFF0C\u4F9B\u5B50\u7C7B\u5B9E\u73B0\u3002</li>
<li>\u9700\u8981\u901A\u8FC7\u5B50\u7C7B\u6765\u51B3\u5B9A\u7236\u7C7B\u7B97\u6CD5\u4E2D\u67D0\u4E2A\u6B65\u9AA4\u662F\u5426\u6267\u884C\uFF0C\u5B9E\u73B0\u5B50\u7C7B\u5BF9\u7236\u7C7B\u7684\u53CD\u5411\u63A7\u5236\u3002</li>
</ul>
<h3 id="_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-1-5-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.1.5 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>InputStream \u7C7B\u5C31\u4F7F\u7528\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002\u5728 InputStream \u7C7B\u4E2D\u5B9A\u4E49\u4E86\u591A\u4E2A <code v-pre>read()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">InputStream</span> <span class="token keyword">implements</span> <span class="token class-name">Closeable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u91CD\u5199</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> off<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>off <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> len <span class="token operator">></span> b<span class="token punctuation">.</span>length <span class="token operator">-</span> off<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8C03\u7528\u4E86\u65E0\u53C2\u7684read\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        b<span class="token punctuation">[</span>off<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>

        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                c <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                b<span class="token punctuation">[</span>off <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE\u4E0A\u9762\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u65E0\u53C2\u7684 <code v-pre>read()</code> \u65B9\u6CD5\u662F\u62BD\u8C61\u65B9\u6CD5\uFF0C\u8981\u6C42\u5B50\u7C7B\u5FC5\u987B\u5B9E\u73B0\u3002\u800C <code v-pre>read(byte b[])</code> \u65B9\u6CD5\u8C03\u7528\u4E86 <code v-pre>read(byte b[], int off, int len)</code> \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u6B64\u5904\u91CD\u70B9\u770B\u7684\u65B9\u6CD5\u662F\u5E26\u4E09\u4E2A\u53C2\u6570\u7684\u65B9\u6CD5\u3002</p>
<p>\u5728\u8BE5\u65B9\u6CD5\u4E2D\u7B2C 18 \u884C\u300127 \u884C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86\u65E0\u53C2\u7684\u62BD\u8C61\u7684 <code v-pre>read()</code> \u65B9\u6CD5\u3002</p>
<p>\u603B\u7ED3\u5982\u4E0B\uFF1A \u5728 InputStream \u7236\u7C7B\u4E2D\u5DF2\u7ECF\u5B9A\u4E49\u597D\u4E86\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u7EC4\u6570\u636E\u7684\u65B9\u6CD5\u662F\u6BCF\u6B21\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u7D22\u5F15\u4F4D\u7F6E\uFF0C\u8BFB\u53D6 len \u4E2A\u5B57\u8282\u6570\u636E\u3002\u5177\u4F53\u5982\u4F55\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6570\u636E\u5462\uFF1F\u7531\u5B50\u7C7B\u5B9E\u73B0\u3002</p>
<h2 id="_6-2-\u7B56\u7565\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-2-\u7B56\u7565\u6A21\u5F0F" aria-hidden="true">#</a> 6.2 \u7B56\u7565\u6A21\u5F0F</h2>
<h3 id="_6-2-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-2-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.2.1 \u6982\u8FF0</h3>
<p>\u5148\u770B\u4E0B\u9762\u7684\u56FE\u7247\uFF0C\u6211\u4EEC\u53BB\u65C5\u6E38\u9009\u62E9\u51FA\u884C\u6A21\u5F0F\u6709\u5F88\u591A\u79CD\uFF0C\u53EF\u4EE5\u9A91\u81EA\u884C\u8F66\u3001\u53EF\u4EE5\u5750\u6C7D\u8F66\u3001\u53EF\u4EE5\u5750\u706B\u8F66\u3001\u53EF\u4EE5\u5750\u98DE\u673A\u3002</p>
<img src="/img/image-20200210143039168.png" style="zoom:80%;" />
<p>\u4F5C\u4E3A\u4E00\u4E2A\u7A0B\u5E8F\u733F\uFF0C\u5F00\u53D1\u9700\u8981\u9009\u62E9\u4E00\u6B3E\u5F00\u53D1\u5DE5\u5177\uFF0C\u5F53\u7136\u53EF\u4EE5\u8FDB\u884C\u4EE3\u7801\u5F00\u53D1\u7684\u5DE5\u5177\u6709\u5F88\u591A\uFF0C\u53EF\u4EE5\u9009\u62E9 Idea \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 eclipse \u8FDB\u884C\u5F00\u53D1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u7684\u4E00\u4E9B\u5F00\u53D1\u5DE5\u5177\u3002</p>
<img src="/img/image-20200210144457478.png" style="zoom:70%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u200B \u8BE5\u6A21\u5F0F\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u7B97\u6CD5\uFF0C\u5E76\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u8D77\u6765\uFF0C\u4F7F\u5B83\u4EEC\u53EF\u4EE5\u76F8\u4E92\u66FF\u6362\uFF0C\u4E14\u7B97\u6CD5\u7684\u53D8\u5316\u4E0D\u4F1A\u5F71\u54CD\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u3002\u7B56\u7565\u6A21\u5F0F\u5C5E\u4E8E\u5BF9\u8C61\u884C\u4E3A\u6A21\u5F0F\uFF0C\u5B83\u901A\u8FC7\u5BF9\u7B97\u6CD5\u8FDB\u884C\u5C01\u88C5\uFF0C\u628A\u4F7F\u7528\u7B97\u6CD5\u7684\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u5B9E\u73B0\u5206\u5272\u5F00\u6765\uFF0C\u5E76\u59D4\u6D3E\u7ED9\u4E0D\u540C\u7684\u5BF9\u8C61\u5BF9\u8FD9\u4E9B\u7B97\u6CD5\u8FDB\u884C\u7BA1\u7406\u3002</p>
<h3 id="_6-2-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-2-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.2.2 \u7ED3\u6784</h3>
<p>\u7B56\u7565\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u7B56\u7565\uFF08Strategy\uFF09\u7C7B\uFF1A\u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u89D2\u8272\uFF0C\u901A\u5E38\u7531\u4E00\u4E2A\u63A5\u53E3\u6216\u62BD\u8C61\u7C7B\u5B9E\u73B0\u3002\u6B64\u89D2\u8272\u7ED9\u51FA\u6240\u6709\u7684\u5177\u4F53\u7B56\u7565\u7C7B\u6240\u9700\u7684\u63A5\u53E3\u3002</li>
<li>\u5177\u4F53\u7B56\u7565\uFF08Concrete Strategy\uFF09\u7C7B\uFF1A\u5B9E\u73B0\u4E86\u62BD\u8C61\u7B56\u7565\u5B9A\u4E49\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u5177\u4F53\u7684\u7B97\u6CD5\u5B9E\u73B0\u6216\u884C\u4E3A\u3002</li>
<li>\u73AF\u5883\uFF08Context\uFF09\u7C7B\uFF1A\u6301\u6709\u4E00\u4E2A\u7B56\u7565\u7C7B\u7684\u5F15\u7528\uFF0C\u6700\u7EC8\u7ED9\u5BA2\u6237\u7AEF\u8C03\u7528\u3002</li>
</ul>
<h3 id="_6-2-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-2-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.2.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u4FC3\u9500\u6D3B\u52A8</p>
<p>\u4E00\u5BB6\u767E\u8D27\u516C\u53F8\u5728\u5B9A\u5E74\u5EA6\u7684\u4FC3\u9500\u6D3B\u52A8\u3002\u9488\u5BF9\u4E0D\u540C\u7684\u8282\u65E5\uFF08\u6625\u8282\u3001\u4E2D\u79CB\u8282\u3001\u5723\u8BDE\u8282\uFF09\u63A8\u51FA\u4E0D\u540C\u7684\u4FC3\u9500\u6D3B\u52A8\uFF0C\u7531\u4FC3\u9500\u5458\u5C06\u4FC3\u9500\u6D3B\u52A8\u5C55\u793A\u7ED9\u5BA2\u6237\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u7B56\u7565\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u767E\u8D27\u516C\u53F8\u6240\u6709\u4FC3\u9500\u6D3B\u52A8\u7684\u5171\u540C\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7B56\u7565\u89D2\u8272\uFF08Concrete Strategy\uFF09\uFF1A\u6BCF\u4E2A\u8282\u65E5\u5177\u4F53\u7684\u4FC3\u9500\u6D3B\u52A8</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u4E3A\u6625\u8282\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8A</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyA</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E70\u4E00\u9001\u4E00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u4E2D\u79CB\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyB</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6EE1200\u5143\u51CF50\u5143"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E3A\u5723\u8BDE\u51C6\u5907\u7684\u4FC3\u9500\u6D3B\u52A8C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyC</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6EE11000\u5143\u52A0\u4E00\u5143\u6362\u8D2D\u4EFB\u610F200\u5143\u4EE5\u4E0B\u5546\u54C1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u73AF\u5883\u89D2\u8272\uFF08Context\uFF09\uFF1A\u7528\u4E8E\u8FDE\u63A5\u4E0A\u4E0B\u6587\uFF0C\u5373\u628A\u4FC3\u9500\u6D3B\u52A8\u63A8\u9500\u7ED9\u5BA2\u6237\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3A\u9500\u552E\u5458</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SalesMan</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6301\u6709\u62BD\u8C61\u7B56\u7565\u89D2\u8272\u7684\u5F15\u7528</span>
    <span class="token keyword">private</span> <span class="token class-name">Strategy</span> strategy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5411\u5BA2\u6237\u5C55\u793A\u4FC3\u9500\u6D3B\u52A8</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">salesManShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        strategy<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-2-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.2.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u7B56\u7565\u7C7B\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362</p>
<p>\u7531\u4E8E\u7B56\u7565\u7C7B\u90FD\u5B9E\u73B0\u540C\u4E00\u4E2A\u63A5\u53E3\uFF0C\u6240\u4EE5\u4F7F\u5B83\u4EEC\u4E4B\u95F4\u53EF\u4EE5\u81EA\u7531\u5207\u6362\u3002</p>
</li>
<li>
<p>\u6613\u4E8E\u6269\u5C55</p>
<p>\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7B56\u7565\u53EA\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u7B56\u7565\u7C7B\u5373\u53EF\uFF0C\u57FA\u672C\u4E0D\u9700\u8981\u6539\u53D8\u539F\u6709\u7684\u4EE3\u7801\uFF0C\u7B26\u5408\u201C\u5F00\u95ED\u539F\u5219\u201C</p>
</li>
<li>
<p>\u907F\u514D\u4F7F\u7528\u591A\u91CD\u6761\u4EF6\u9009\u62E9\u8BED\u53E5\uFF08if else\uFF09\uFF0C\u5145\u5206\u4F53\u73B0\u9762\u5411\u5BF9\u8C61\u8BBE\u8BA1\u601D\u60F3\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5BA2\u6237\u7AEF\u5FC5\u987B\u77E5\u9053\u6240\u6709\u7684\u7B56\u7565\u7C7B\uFF0C\u5E76\u81EA\u884C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E00\u4E2A\u7B56\u7565\u7C7B\u3002</li>
<li>\u7B56\u7565\u6A21\u5F0F\u5C06\u9020\u6210\u4EA7\u751F\u5F88\u591A\u7B56\u7565\u7C7B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4EAB\u5143\u6A21\u5F0F\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u51CF\u5C11\u5BF9\u8C61\u7684\u6570\u91CF\u3002</li>
</ul>
<h3 id="_6-2-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-2-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.2.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u4E00\u4E2A\u7CFB\u7EDF\u9700\u8981\u52A8\u6001\u5730\u5728\u51E0\u79CD\u7B97\u6CD5\u4E2D\u9009\u62E9\u4E00\u79CD\u65F6\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u7B97\u6CD5\u5C01\u88C5\u5230\u7B56\u7565\u7C7B\u4E2D\u3002</li>
<li>\u4E00\u4E2A\u7C7B\u5B9A\u4E49\u4E86\u591A\u79CD\u884C\u4E3A\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u884C\u4E3A\u5728\u8FD9\u4E2A\u7C7B\u7684\u64CD\u4F5C\u4E2D\u4EE5\u591A\u4E2A\u6761\u4EF6\u8BED\u53E5\u7684\u5F62\u5F0F\u51FA\u73B0\uFF0C\u53EF\u5C06\u6BCF\u4E2A\u6761\u4EF6\u5206\u652F\u79FB\u5165\u5B83\u4EEC\u5404\u81EA\u7684\u7B56\u7565\u7C7B\u4E2D\u4EE5\u4EE3\u66FF\u8FD9\u4E9B\u6761\u4EF6\u8BED\u53E5\u3002</li>
<li>\u7CFB\u7EDF\u4E2D\u5404\u7B97\u6CD5\u5F7C\u6B64\u5B8C\u5168\u72EC\u7ACB\uFF0C\u4E14\u8981\u6C42\u5BF9\u5BA2\u6237\u9690\u85CF\u5177\u4F53\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u65F6\u3002</li>
<li>\u7CFB\u7EDF\u8981\u6C42\u4F7F\u7528\u7B97\u6CD5\u7684\u5BA2\u6237\u4E0D\u5E94\u8BE5\u77E5\u9053\u5176\u64CD\u4F5C\u7684\u6570\u636E\u65F6\uFF0C\u53EF\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\u6765\u9690\u85CF\u4E0E\u7B97\u6CD5\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\u3002</li>
<li>\u591A\u4E2A\u7C7B\u53EA\u533A\u522B\u5728\u8868\u73B0\u884C\u4E3A\u4E0D\u540C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7B56\u7565\u6A21\u5F0F\uFF0C\u5728\u8FD0\u884C\u65F6\u52A8\u6001\u9009\u62E9\u5177\u4F53\u8981\u6267\u884C\u7684\u884C\u4E3A\u3002</li>
</ul>
<h3 id="_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-2-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.2.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p><code v-pre>Comparator</code> \u4E2D\u7684\u7B56\u7565\u6A21\u5F0F\u3002\u5728 Arrays \u7C7B\u4E2D\u6709\u4E00\u4E2A <code v-pre>sort()</code> \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">LegacyMergeSort</span><span class="token punctuation">.</span>userRequested<span class="token punctuation">)</span>
                <span class="token function">legacyMergeSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token class-name">TimSort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Arrays \u5C31\u662F\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\u7C7B\uFF0C\u8FD9\u4E2A sort \u65B9\u6CD5\u53EF\u4EE5\u4F20\u4E00\u4E2A\u65B0\u7B56\u7565\u8BA9 Arrays \u6839\u636E\u8FD9\u4E2A\u7B56\u7565\u6765\u8FDB\u884C\u6392\u5E8F\u3002\u5C31\u6BD4\u5982\u4E0B\u9762\u7684\u6D4B\u8BD5\u7C7B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> demo <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5B9E\u73B0\u964D\u5E8F\u6392\u5E8F</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> o2 <span class="token operator">-</span> o1<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[12, 5, 4, 3, 2, 2, 1]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u6211\u4EEC\u5728\u8C03\u7528 Arrays \u7684 sort \u65B9\u6CD5\u65F6\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4F20\u9012\u7684\u662F Comparator \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002\u6240\u4EE5 Comparator \u5145\u5F53\u7684\u662F\u62BD\u8C61\u7B56\u7565\u89D2\u8272\uFF0C\u800C\u5177\u4F53\u7684\u5B50\u5B9E\u73B0\u7C7B\u5145\u5F53\u7684\u662F\u5177\u4F53\u7B56\u7565\u89D2\u8272\u3002\u73AF\u5883\u89D2\u8272\u7C7B\uFF08Arrays\uFF09\u5E94\u8BE5\u6301\u6709\u62BD\u8C61\u7B56\u7565\u7684\u5F15\u7528\u6765\u8C03\u7528\u3002\u90A3\u4E48\uFF0CArrays \u7C7B\u7684 sort \u65B9\u6CD5\u5230\u5E95\u6709\u6CA1\u6709\u4F7F\u7528 Comparator \u5B50\u5B9E\u73B0\u7C7B\u4E2D\u7684 <code v-pre>compare()</code> \u65B9\u6CD5\u5417\uFF1F\u8BA9\u6211\u4EEC\u7EE7\u7EED\u67E5\u770B TimSort \u7C7B\u7684 <code v-pre>sort()</code> \u65B9\u6CD5\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">TimSort</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">,</span>
                         <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> work<span class="token punctuation">,</span> <span class="token keyword">int</span> workBase<span class="token punctuation">,</span> <span class="token keyword">int</span> workLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> c <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lo <span class="token operator">&lt;=</span> hi <span class="token operator">&amp;&amp;</span> hi <span class="token operator">&lt;=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

        <span class="token keyword">int</span> nRemaining  <span class="token operator">=</span> hi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// Arrays of size 0 and 1 are always sorted</span>

        <span class="token comment">// If array is small, do a "mini-TimSort" with no merges</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nRemaining <span class="token operator">&lt;</span> <span class="token constant">MIN_MERGE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> initRunLen <span class="token operator">=</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">binarySort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> lo <span class="token operator">+</span> initRunLen<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">int</span> <span class="token function">countRunAndMakeAscending</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">,</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">assert</span> lo <span class="token operator">&lt;</span> hi<span class="token punctuation">;</span>
        <span class="token keyword">int</span> runHi <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>runHi <span class="token operator">==</span> hi<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>

        <span class="token comment">// Find end of run, and reverse range if descending</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Descending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">reverseRange</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> runHi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                              <span class="token comment">// Ascending</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>runHi <span class="token operator">&lt;</span> hi <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>runHi<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>runHi <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                runHi<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> runHi <span class="token operator">-</span> lo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\u6700\u7EC8\u4F1A\u8DD1\u5230 <code v-pre>countRunAndMakeAscending()</code> \u8FD9\u4E2A\u65B9\u6CD5\u4E2D\u3002\u6211\u4EEC\u53EF\u4EE5\u770B\u89C1\uFF0C\u53EA\u7528\u4E86 compare \u65B9\u6CD5\uFF0C\u6240\u4EE5\u5728\u8C03\u7528 Arrays.sort \u65B9\u6CD5\u53EA\u4F20\u5177\u4F53 compare \u91CD\u5199\u65B9\u6CD5\u7684\u7C7B\u5BF9\u8C61\u5C31\u884C\uFF0C\u8FD9\u4E5F\u662F Comparator \u63A5\u53E3\u4E2D\u5FC5\u987B\u8981\u5B50\u7C7B\u5B9E\u73B0\u7684\u4E00\u4E2A\u65B9\u6CD5\u3002</p>
<h2 id="_6-3-\u547D\u4EE4\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-3-\u547D\u4EE4\u6A21\u5F0F" aria-hidden="true">#</a> 6.3 \u547D\u4EE4\u6A21\u5F0F</h2>
<h3 id="_6-3-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-3-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.3.1 \u6982\u8FF0</h3>
<p>\u65E5\u5E38\u751F\u6D3B\u4E2D\uFF0C\u6211\u4EEC\u51FA\u53BB\u5403\u996D\u90FD\u4F1A\u9047\u5230\u4E0B\u9762\u7684\u573A\u666F\u3002</p>
<img src="/img/image-20200211130313251.png" style="zoom:60%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5C06\u4E00\u4E2A\u8BF7\u6C42\u5C01\u88C5\u4E3A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F7F\u53D1\u51FA\u8BF7\u6C42\u7684\u8D23\u4EFB\u548C\u6267\u884C\u8BF7\u6C42\u7684\u8D23\u4EFB\u5206\u5272\u5F00\u3002\u8FD9\u6837\u4E24\u8005\u4E4B\u95F4\u901A\u8FC7\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u6C9F\u901A\uFF0C\u8FD9\u6837\u65B9\u4FBF\u5C06\u547D\u4EE4\u5BF9\u8C61\u8FDB\u884C\u5B58\u50A8\u3001\u4F20\u9012\u3001\u8C03\u7528\u3001\u589E\u52A0\u4E0E\u7BA1\u7406\u3002</p>
<h3 id="_6-3-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-3-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.3.2 \u7ED3\u6784</h3>
<p>\u547D\u4EE4\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>\u62BD\u8C61\u547D\u4EE4\u7C7B\uFF08Command\uFF09\u89D2\u8272\uFF1A \u5B9A\u4E49\u547D\u4EE4\u7684\u63A5\u53E3\uFF0C\u58F0\u660E\u6267\u884C\u7684\u65B9\u6CD5\u3002</li>
<li>\u5177\u4F53\u547D\u4EE4\uFF08Concrete Command\uFF09\u89D2\u8272\uFF1A\u5177\u4F53\u7684\u547D\u4EE4\uFF0C\u5B9E\u73B0\u547D\u4EE4\u63A5\u53E3\uFF1B\u901A\u5E38\u4F1A\u6301\u6709\u63A5\u6536\u8005\uFF0C\u5E76\u8C03\u7528\u63A5\u6536\u8005\u7684\u529F\u80FD\u6765\u5B8C\u6210\u547D\u4EE4\u8981\u6267\u884C\u7684\u64CD\u4F5C\u3002</li>
<li>\u5B9E\u73B0\u8005/\u63A5\u6536\u8005\uFF08Receiver\uFF09\u89D2\u8272\uFF1A \u63A5\u6536\u8005\uFF0C\u771F\u6B63\u6267\u884C\u547D\u4EE4\u7684\u5BF9\u8C61\u3002\u4EFB\u4F55\u7C7B\u90FD\u53EF\u80FD\u6210\u4E3A\u4E00\u4E2A\u63A5\u6536\u8005\uFF0C\u53EA\u8981\u5B83\u80FD\u591F\u5B9E\u73B0\u547D\u4EE4\u8981\u6C42\u5B9E\u73B0\u7684\u76F8\u5E94\u529F\u80FD\u3002</li>
<li>\u8C03\u7528\u8005/\u8BF7\u6C42\u8005\uFF08Invoker\uFF09\u89D2\u8272\uFF1A \u8981\u6C42\u547D\u4EE4\u5BF9\u8C61\u6267\u884C\u8BF7\u6C42\uFF0C\u901A\u5E38\u4F1A\u6301\u6709\u547D\u4EE4\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u3002\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u771F\u6B63\u89E6\u53D1\u547D\u4EE4\u5E76\u8981\u6C42\u547D\u4EE4\u6267\u884C\u76F8\u5E94\u64CD\u4F5C\u7684\u5730\u65B9\uFF0C\u4E5F\u5C31\u662F\u8BF4\u76F8\u5F53\u4E8E\u4F7F\u7528\u547D\u4EE4\u5BF9\u8C61\u7684\u5165\u53E3\u3002</li>
</ul>
<h3 id="_6-3-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-3-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.3.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u5C06\u4E0A\u9762\u7684\u6848\u4F8B\u7528\u4EE3\u7801\u5B9E\u73B0\uFF0C\u90A3\u6211\u4EEC\u5C31\u9700\u8981\u5206\u6790\u547D\u4EE4\u6A21\u5F0F\u7684\u89D2\u8272\u5728\u8BE5\u6848\u4F8B\u4E2D\u7531\u8C01\u6765\u5145\u5F53\u3002</p>
<p>\u670D\u52A1\u5458\uFF1A \u5C31\u662F\u8C03\u7528\u8005\u89D2\u8272\uFF0C\u7531\u5979\u6765\u53D1\u8D77\u547D\u4EE4\u3002</p>
<p>\u8D44\u6DF1\u5927\u53A8\uFF1A \u5C31\u662F\u63A5\u6536\u8005\u89D2\u8272\uFF0C\u771F\u6B63\u547D\u4EE4\u6267\u884C\u7684\u5BF9\u8C61\u3002</p>
<p>\u8BA2\u5355\uFF1A \u547D\u4EE4\u4E2D\u5305\u542B\u8BA2\u5355\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u547D\u4EE4\u6A21\u5F0F.png" style="zoom:75%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7EDF\u4E00\u7684\u6267\u884C\u65B9\u6CD5</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6301\u6709\u63A5\u53D7\u8005\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Order</span> order<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span><span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">,</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u684C\u7684\u8BA2\u5355\uFF1A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> keys <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            receiver<span class="token punctuation">.</span><span class="token function">makeFood</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u987F\u4E00\u4E0B \u6A21\u62DF\u505A\u996D\u7684\u8FC7\u7A0B</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u684C\u7684\u996D\u5F04\u597D\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u9910\u684C\u53F7\u7801</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> diningTable<span class="token punctuation">;</span>

    <span class="token comment">// \u7528\u6765\u5B58\u50A8\u9910\u540D\u5E76\u8BB0\u5F55\u4EFD\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> foodDic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token keyword">int</span> diningTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>diningTable <span class="token operator">=</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> foodDic<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFoodDic</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        foodDic<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8D44\u6DF1\u5927\u53A8\u7C7B \u662F\u547D\u4EE4\u7684Receiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeniorChef</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">makeFood</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token class-name">String</span> foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">"\u4EFD"</span> <span class="token operator">+</span> foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">></span></span> commands<span class="token punctuation">;</span><span class="token comment">//\u53EF\u4EE5\u6301\u6709\u5F88\u591A\u7684\u547D\u4EE4\u5BF9\u8C61</span>

    <span class="token keyword">public</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        commands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u53D1\u51FA\u547D\u4EE4 \u558A \u8BA2\u5355\u6765\u4E86\uFF0C\u53A8\u5E08\u5F00\u59CB\u6267\u884C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7F8E\u5973\u670D\u52A1\u5458\uFF1A\u53EE\u549A\uFF0C\u5927\u53A8\uFF0C\u65B0\u8BA2\u5355\u6765\u4E86......."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> commands<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Command</span> cmd <span class="token operator">=</span> commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmd<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA2\u4E2Aorder</span>
        <span class="token class-name">Order</span> order1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u897F\u7EA2\u67FF\u9E21\u86CB\u9762"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u676F\u53EF\u4E50"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Order</span> order2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C16\u6912\u8089\u4E1D\u76D6\u996D"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u676F\u96EA\u78A7"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521B\u5EFA\u63A5\u6536\u8005</span>
        <span class="token class-name">SeniorChef</span> receiver<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SeniorChef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u8BA2\u5355\u548C\u63A5\u6536\u8005\u5C01\u88C5\u6210\u547D\u4EE4\u5BF9\u8C61</span>
        <span class="token class-name">OrderCommand</span> cmd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OrderCommand</span> cmd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8C03\u7528\u8005 waitor</span>
        <span class="token class-name">Waitor</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5C06\u8BA2\u5355\u5E26\u5230\u67DC\u53F0 \u5E76\u5411\u53A8\u5E08\u558A \u8BA2\u5355\u6765\u4E86</span>
        invoker<span class="token punctuation">.</span><span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-3-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.3.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u7CFB\u7EDF\u7684\u8026\u5408\u5EA6\u3002\u547D\u4EE4\u6A21\u5F0F\u80FD\u5C06\u8C03\u7528\u64CD\u4F5C\u7684\u5BF9\u8C61\u4E0E\u5B9E\u73B0\u8BE5\u64CD\u4F5C\u7684\u5BF9\u8C61\u89E3\u8026\u3002</li>
<li>\u589E\u52A0\u6216\u5220\u9664\u547D\u4EE4\u975E\u5E38\u65B9\u4FBF\u3002\u91C7\u7528\u547D\u4EE4\u6A21\u5F0F\u589E\u52A0\u4E0E\u5220\u9664\u547D\u4EE4\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7C7B\uFF0C\u5B83\u6EE1\u8DB3\u201C\u5F00\u95ED\u539F\u5219\u201D\uFF0C\u5BF9\u6269\u5C55\u6BD4\u8F83\u7075\u6D3B\u3002</li>
<li>\u53EF\u4EE5\u5B9E\u73B0\u5B8F\u547D\u4EE4\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u7EC4\u5408\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5C06\u591A\u4E2A\u547D\u4EE4\u88C5\u914D\u6210\u4E00\u4E2A\u7EC4\u5408\u547D\u4EE4\uFF0C\u5373\u5B8F\u547D\u4EE4\u3002</li>
<li>\u65B9\u4FBF\u5B9E\u73B0 Undo \u548C Redo \u64CD\u4F5C\u3002\u547D\u4EE4\u6A21\u5F0F\u53EF\u4EE5\u4E0E\u540E\u9762\u4ECB\u7ECD\u7684\u5907\u5FD8\u5F55\u6A21\u5F0F\u7ED3\u5408\uFF0C\u5B9E\u73B0\u547D\u4EE4\u7684\u64A4\u9500\u4E0E\u6062\u590D\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4F7F\u7528\u547D\u4EE4\u6A21\u5F0F\u53EF\u80FD\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u7CFB\u7EDF\u6709\u8FC7\u591A\u7684\u5177\u4F53\u547D\u4EE4\u7C7B\u3002</li>
<li>\u7CFB\u7EDF\u7ED3\u6784\u66F4\u52A0\u590D\u6742\u3002</li>
</ul>
<h3 id="_6-3-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-3-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.3.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u7CFB\u7EDF\u9700\u8981\u5C06\u8BF7\u6C42\u8C03\u7528\u8005\u548C\u8BF7\u6C42\u63A5\u6536\u8005\u89E3\u8026\uFF0C\u4F7F\u5F97\u8C03\u7528\u8005\u548C\u63A5\u6536\u8005\u4E0D\u76F4\u63A5\u4EA4\u4E92\u3002</li>
<li>\u7CFB\u7EDF\u9700\u8981\u5728\u4E0D\u540C\u7684\u65F6\u95F4\u6307\u5B9A\u8BF7\u6C42\u3001\u5C06\u8BF7\u6C42\u6392\u961F\u548C\u6267\u884C\u8BF7\u6C42\u3002</li>
<li>\u7CFB\u7EDF\u9700\u8981\u652F\u6301\u547D\u4EE4\u7684\u64A4\u9500(Undo)\u64CD\u4F5C\u548C\u6062\u590D(Redo)\u64CD\u4F5C\u3002</li>
</ul>
<h3 id="_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-3-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.3.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>Runable \u662F\u4E00\u4E2A\u5178\u578B\u547D\u4EE4\u6A21\u5F0F\uFF0CRunnable \u62C5\u5F53\u547D\u4EE4\u7684\u89D2\u8272\uFF0CThread \u5145\u5F53\u7684\u662F\u8C03\u7528\u8005\uFF0Cstart \u65B9\u6CD5\u5C31\u662F\u5176\u6267\u884C\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u547D\u4EE4\u63A5\u53E3(\u62BD\u8C61\u547D\u4EE4\u89D2\u8272)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8C03\u7528\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Runnable</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>threadStatus <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> started <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            started <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>started<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    group<span class="token punctuation">.</span><span class="token function">threadStartFailed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F1A\u8C03\u7528\u4E00\u4E2A native \u65B9\u6CD5 start0(),\u8C03\u7528\u7CFB\u7EDF\u65B9\u6CD5\uFF0C\u5F00\u542F\u4E00\u4E2A\u7EBF\u7A0B\u3002\u800C\u63A5\u6536\u8005\u662F\u5BF9\u7A0B\u5E8F\u5458\u5F00\u653E\u7684\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u63A5\u6536\u8005\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * jdk Runnable \u547D\u4EE4\u6A21\u5F0F
 *		TurnOffThread \uFF1A \u5C5E\u4E8E\u5177\u4F53
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TurnOffThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
     <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span>

     <span class="token keyword">public</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	receiver<span class="token punctuation">.</span><span class="token function">turnOFF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5\u7C7B
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">TurnOffThread</span> turnOffThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>turnOffThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-4-\u8D23\u4EFB\u94FE\u6A21\u5F0F" aria-hidden="true">#</a> 6.4 \u8D23\u4EFB\u94FE\u6A21\u5F0F</h2>
<h3 id="_6-4-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-4-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.4.1 \u6982\u8FF0</h3>
<p>\u5728\u73B0\u5B9E\u751F\u6D3B\u4E2D\uFF0C\u5E38\u5E38\u4F1A\u51FA\u73B0\u8FD9\u6837\u7684\u4E8B\u4F8B\uFF1A\u4E00\u4E2A\u8BF7\u6C42\u6709\u591A\u4E2A\u5BF9\u8C61\u53EF\u4EE5\u5904\u7406\uFF0C\u4F46\u6BCF\u4E2A\u5BF9\u8C61\u7684\u5904\u7406\u6761\u4EF6\u6216\u6743\u9650\u4E0D\u540C\u3002\u4F8B\u5982\uFF0C\u516C\u53F8\u5458\u5DE5\u8BF7\u5047\uFF0C\u53EF\u6279\u5047\u7684\u9886\u5BFC\u6709\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u526F\u603B\u7ECF\u7406\u3001\u603B\u7ECF\u7406\u7B49\uFF0C\u4F46\u6BCF\u4E2A\u9886\u5BFC\u80FD\u6279\u51C6\u7684\u5929\u6570\u4E0D\u540C\uFF0C\u5458\u5DE5\u5FC5\u987B\u6839\u636E\u81EA\u5DF1\u8981\u8BF7\u5047\u7684\u5929\u6570\u53BB\u627E\u4E0D\u540C\u7684\u9886\u5BFC\u7B7E\u540D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5458\u5DE5\u5FC5\u987B\u8BB0\u4F4F\u6BCF\u4E2A\u9886\u5BFC\u7684\u59D3\u540D\u3001\u7535\u8BDD\u548C\u5730\u5740\u7B49\u4FE1\u606F\uFF0C\u8FD9\u589E\u52A0\u4E86\u96BE\u5EA6\u3002\u8FD9\u6837\u7684\u4F8B\u5B50\u8FD8\u6709\u5F88\u591A\uFF0C\u5982\u627E\u9886\u5BFC\u51FA\u5DEE\u62A5\u9500\u3001\u751F\u6D3B\u4E2D\u7684\u201C\u51FB\u9F13\u4F20\u82B1\u201D\u6E38\u620F\u7B49\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u540D\u804C\u8D23\u94FE\u6A21\u5F0F\uFF0C\u4E3A\u4E86\u907F\u514D\u8BF7\u6C42\u53D1\u9001\u8005\u4E0E\u591A\u4E2A\u8BF7\u6C42\u5904\u7406\u8005\u8026\u5408\u5728\u4E00\u8D77\uFF0C\u5C06\u6240\u6709\u8BF7\u6C42\u7684\u5904\u7406\u8005\u901A\u8FC7\u524D\u4E00\u5BF9\u8C61\u8BB0\u4F4F\u5176\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u800C\u8FDE\u6210\u4E00\u6761\u94FE\uFF1B\u5F53\u6709\u8BF7\u6C42\u53D1\u751F\u65F6\uFF0C\u53EF\u5C06\u8BF7\u6C42\u6CBF\u7740\u8FD9\u6761\u94FE\u4F20\u9012\uFF0C\u76F4\u5230\u6709\u5BF9\u8C61\u5904\u7406\u5B83\u4E3A\u6B62\u3002</p>
<h3 id="_6-4-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-4-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.4.2 \u7ED3\u6784</h3>
<p>\u804C\u8D23\u94FE\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272:</p>
<ul>
<li>\u62BD\u8C61\u5904\u7406\u8005\uFF08Handler\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u5904\u7406\u8BF7\u6C42\u7684\u63A5\u53E3\uFF0C\u5305\u542B\u62BD\u8C61\u5904\u7406\u65B9\u6CD5\u548C\u4E00\u4E2A\u540E\u7EE7\u8FDE\u63A5\u3002</li>
<li>\u5177\u4F53\u5904\u7406\u8005\uFF08Concrete Handler\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u5904\u7406\u8005\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u5224\u65AD\u80FD\u5426\u5904\u7406\u672C\u6B21\u8BF7\u6C42\uFF0C\u5982\u679C\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u5219\u5904\u7406\uFF0C\u5426\u5219\u5C06\u8BE5\u8BF7\u6C42\u8F6C\u7ED9\u5B83\u7684\u540E\u7EE7\u8005\u3002</li>
<li>\u5BA2\u6237\u7C7B\uFF08Client\uFF09\u89D2\u8272\uFF1A\u521B\u5EFA\u5904\u7406\u94FE\uFF0C\u5E76\u5411\u94FE\u5934\u7684\u5177\u4F53\u5904\u7406\u8005\u5BF9\u8C61\u63D0\u4EA4\u8BF7\u6C42\uFF0C\u5B83\u4E0D\u5173\u5FC3\u5904\u7406\u7EC6\u8282\u548C\u8BF7\u6C42\u7684\u4F20\u9012\u8FC7\u7A0B\u3002</li>
</ul>
<h3 id="_6-4-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-4-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.4.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u73B0\u9700\u8981\u5F00\u53D1\u4E00\u4E2A\u8BF7\u5047\u6D41\u7A0B\u63A7\u5236\u7CFB\u7EDF\u3002\u8BF7\u5047\u4E00\u5929\u4EE5\u4E0B\u7684\u5047\u53EA\u9700\u8981\u5C0F\u7EC4\u957F\u540C\u610F\u5373\u53EF\uFF1B\u8BF7\u5047 1 \u5929\u5230 3 \u5929\u7684\u5047\u8FD8\u9700\u8981\u90E8\u95E8\u7ECF\u7406\u540C\u610F\uFF1B\u8BF7\u6C42 3 \u5929\u5230 7 \u5929\u8FD8\u9700\u8981\u603B\u7ECF\u7406\u540C\u610F\u624D\u884C\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8D23\u4EFB\u94FE\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u8BF7\u5047\u6761</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeaveRequest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//\u59D3\u540D</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5929\u6570</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//\u8BF7\u5047\u5185\u5BB9</span>

    <span class="token keyword">public</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5904\u7406\u8005\u62BD\u8C61\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">NUM_ONE</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">NUM_THREE</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">NUM_SEVEN</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BE5\u9886\u5BFC\u5904\u7406\u7684\u8BF7\u5047\u5929\u6570\u533A\u95F4</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numStart<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">;</span>

    <span class="token comment">//\u9886\u5BFC\u4E0A\u9762\u8FD8\u6709\u9886\u5BFC</span>
    <span class="token keyword">private</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4 \u4E0A\u4E0D\u5C01\u9876</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u8BF7\u5047\u5929\u6570\u8303\u56F4</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">,</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numEnd <span class="token operator">=</span> numEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u63D0\u4EA4\u8BF7\u5047\u6761</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u5982\u679C\u8BF7\u5047\u5929\u6570\u8FBE\u5230\u8BE5\u9886\u5BFC\u8005\u7684\u5904\u7406\u8981\u6C42</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleLeave</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//\u5982\u679C\u8FD8\u6709\u4E0A\u7EA7 \u5E76\u4E14\u8BF7\u5047\u5929\u6570\u8D85\u8FC7\u4E86\u5F53\u524D\u9886\u5BFC\u7684\u5904\u7406\u8303\u56F4</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> numEnd<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7EE7\u7EED\u63D0\u4EA4</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u6D41\u7A0B\u7ED3\u675F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5404\u7EA7\u9886\u5BFC\u5904\u7406\u8BF7\u5047\u6761\u65B9\u6CD5</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5C0F\u7EC4\u957F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeader</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5C0F\u7EC4\u957F\u5904\u74061-3\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_ONE</span><span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_THREE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u7EC4\u957F\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u90E8\u95E8\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74063-7\u5929\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_THREE</span><span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_SEVEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u90E8\u95E8\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u603B\u7ECF\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u5904\u74067\u5929\u4EE5\u4E0A\u7684\u8BF7\u5047</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span><span class="token constant">NUM_SEVEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u8BF7\u5047"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u5929,"</span> <span class="token operator">+</span> leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u603B\u7ECF\u7406\u5BA1\u6279\uFF1A\u540C\u610F\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u8BF7\u5047\u6761\u6765\u4E00\u5F20</span>
        <span class="token class-name">LeaveRequest</span> leave <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u82B1"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"\u8EAB\u4F53\u4E0D\u9002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5404\u4F4D\u9886\u5BFC</span>
        <span class="token class-name">GroupLeader</span> groupLeader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeneralManager</span> generalManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        groupLeader<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5C0F\u7EC4\u957F\u7684\u9886\u5BFC\u662F\u90E8\u95E8\u7ECF\u7406</span>
        manager<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>generalManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u90E8\u95E8\u7ECF\u7406\u7684\u9886\u5BFC\u662F\u603B\u7ECF\u7406</span>
        <span class="token comment">//\u4E4B\u6240\u4EE5\u5728\u8FD9\u91CC\u8BBE\u7F6E\u4E0A\u7EA7\u9886\u5BFC\uFF0C\u662F\u56E0\u4E3A\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u6765\u66F4\u6539\u8BBE\u7F6E\uFF0C\u5982\u679C\u5B9E\u6218\u4E2D\u4E0A\u7EA7\u9886\u5BFC\u4EBA\u90FD\u662F\u56FA\u5B9A\u7684\uFF0C\u5219\u53EF\u4EE5\u79FB\u5230\u9886\u5BFC\u5B9E\u73B0\u7C7B\u4E2D\u3002</span>

        <span class="token comment">//\u63D0\u4EA4\u7533\u8BF7</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-4-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.4.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u964D\u4F4E\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u5EA6</p>
<p>\u8BE5\u6A21\u5F0F\u964D\u4F4E\u4E86\u8BF7\u6C42\u53D1\u9001\u8005\u548C\u63A5\u6536\u8005\u7684\u8026\u5408\u5EA6\u3002</p>
</li>
<li>
<p>\u589E\u5F3A\u4E86\u7CFB\u7EDF\u7684\u53EF\u6269\u5C55\u6027</p>
<p>\u53EF\u4EE5\u6839\u636E\u9700\u8981\u589E\u52A0\u65B0\u7684\u8BF7\u6C42\u5904\u7406\u7C7B\uFF0C\u6EE1\u8DB3\u5F00\u95ED\u539F\u5219\u3002</p>
</li>
<li>
<p>\u589E\u5F3A\u4E86\u7ED9\u5BF9\u8C61\u6307\u6D3E\u804C\u8D23\u7684\u7075\u6D3B\u6027</p>
<p>\u5F53\u5DE5\u4F5C\u6D41\u7A0B\u53D1\u751F\u53D8\u5316\uFF0C\u53EF\u4EE5\u52A8\u6001\u5730\u6539\u53D8\u94FE\u5185\u7684\u6210\u5458\u6216\u8005\u4FEE\u6539\u5B83\u4EEC\u7684\u6B21\u5E8F\uFF0C\u4E5F\u53EF\u52A8\u6001\u5730\u65B0\u589E\u6216\u8005\u5220\u9664\u8D23\u4EFB\u3002</p>
</li>
<li>
<p>\u8D23\u4EFB\u94FE\u7B80\u5316\u4E86\u5BF9\u8C61\u4E4B\u95F4\u7684\u8FDE\u63A5</p>
<p>\u4E00\u4E2A\u5BF9\u8C61\u53EA\u9700\u4FDD\u6301\u4E00\u4E2A\u6307\u5411\u5176\u540E\u7EE7\u8005\u7684\u5F15\u7528\uFF0C\u4E0D\u9700\u4FDD\u6301\u5176\u4ED6\u6240\u6709\u5904\u7406\u8005\u7684\u5F15\u7528\uFF0C\u8FD9\u907F\u514D\u4E86\u4F7F\u7528\u4F17\u591A\u7684 if \u6216\u8005 if\xB7\xB7\xB7else \u8BED\u53E5\u3002</p>
</li>
<li>
<p>\u8D23\u4EFB\u5206\u62C5</p>
<p>\u6BCF\u4E2A\u7C7B\u53EA\u9700\u8981\u5904\u7406\u81EA\u5DF1\u8BE5\u5904\u7406\u7684\u5DE5\u4F5C\uFF0C\u4E0D\u80FD\u5904\u7406\u7684\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u5BF9\u8C61\u5B8C\u6210\uFF0C\u660E\u786E\u5404\u7C7B\u7684\u8D23\u4EFB\u8303\u56F4\uFF0C\u7B26\u5408\u7C7B\u7684\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u4E0D\u80FD\u4FDD\u8BC1\u6BCF\u4E2A\u8BF7\u6C42\u4E00\u5B9A\u88AB\u5904\u7406\u3002\u7531\u4E8E\u4E00\u4E2A\u8BF7\u6C42\u6CA1\u6709\u660E\u786E\u7684\u63A5\u6536\u8005\uFF0C\u6240\u4EE5\u4E0D\u80FD\u4FDD\u8BC1\u5B83\u4E00\u5B9A\u4F1A\u88AB\u5904\u7406\uFF0C\u8BE5\u8BF7\u6C42\u53EF\u80FD\u4E00\u76F4\u4F20\u5230\u94FE\u7684\u672B\u7AEF\u90FD\u5F97\u4E0D\u5230\u5904\u7406\u3002</li>
<li>\u5BF9\u6BD4\u8F83\u957F\u7684\u804C\u8D23\u94FE\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u53EF\u80FD\u6D89\u53CA\u591A\u4E2A\u5904\u7406\u5BF9\u8C61\uFF0C\u7CFB\u7EDF\u6027\u80FD\u5C06\u53D7\u5230\u4E00\u5B9A\u5F71\u54CD\u3002</li>
<li>\u804C\u8D23\u94FE\u5EFA\u7ACB\u7684\u5408\u7406\u6027\u8981\u9760\u5BA2\u6237\u7AEF\u6765\u4FDD\u8BC1\uFF0C\u589E\u52A0\u4E86\u5BA2\u6237\u7AEF\u7684\u590D\u6742\u6027\uFF0C\u53EF\u80FD\u4F1A\u7531\u4E8E\u804C\u8D23\u94FE\u7684\u9519\u8BEF\u8BBE\u7F6E\u800C\u5BFC\u81F4\u7CFB\u7EDF\u51FA\u9519\uFF0C\u5982\u53EF\u80FD\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u3002</li>
</ul>
<h3 id="_6-4-5-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-4-5-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.4.5 \u6E90\u7801\u89E3\u6790</h3>
<p>\u5728 javaWeb \u5E94\u7528\u5F00\u53D1\u4E2D\uFF0CFilterChain \u662F\u804C\u8D23\u94FE\uFF08\u8FC7\u6EE4\u5668\uFF09\u6A21\u5F0F\u7684\u5178\u578B\u5E94\u7528\uFF0C\u4EE5\u4E0B\u662F Filter \u7684\u6A21\u62DF\u5B9E\u73B0\u5206\u6790:</p>
<ul>
<li>
<p>\u6A21\u62DF web \u8BF7\u6C42 Request \u4EE5\u53CA web \u54CD\u5E94 Response</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Request</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Response</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF web \u8FC7\u6EE4\u5668 Filter</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">,</span><span class="token class-name">Response</span> res<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF\u5B9E\u73B0\u5177\u4F53\u8FC7\u6EE4\u5668</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56681 \u524D\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56681 \u540E\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondFilter</span>  <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56682 \u524D\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5148\u6267\u884C\u6240\u6709request\u518D\u5012\u5E8F\u6267\u884C\u6240\u6709response</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8FC7\u6EE4\u56682 \u540E\u7F6E\u5904\u7406"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6A21\u62DF\u5B9E\u73B0\u8FC7\u6EE4\u5668\u94FE FilterChain</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterChain</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// \u94FE\u5F0F\u8C03\u7528</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterChain</span> <span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token class-name">Filter</span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> filters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Filter</span> filter <span class="token operator">=</span> filters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        index<span class="token operator">++</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Request</span>  req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Response</span> res <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token punctuation">;</span>

        <span class="token class-name">FilterChain</span> filterChain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FirstFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecondFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h2 id="_6-5-\u72B6\u6001\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-5-\u72B6\u6001\u6A21\u5F0F" aria-hidden="true">#</a> 6.5 \u72B6\u6001\u6A21\u5F0F</h2>
<h3 id="_6-5-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-5-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.5.1 \u6982\u8FF0</h3>
<p>\u3010\u4F8B\u3011\u901A\u8FC7\u6309\u94AE\u6765\u63A7\u5236\u4E00\u4E2A\u7535\u68AF\u7684\u72B6\u6001\uFF0C\u4E00\u4E2A\u7535\u68AF\u6709\u5F00\u95E8\u72B6\u6001\uFF0C\u5173\u95E8\u72B6\u6001\uFF0C\u505C\u6B62\u72B6\u6001\uFF0C\u8FD0\u884C\u72B6\u6001\u3002\u6BCF\u4E00\u79CD\u72B6\u6001\u6539\u53D8\uFF0C\u90FD\u6709\u53EF\u80FD\u8981\u6839\u636E\u5176\u4ED6\u72B6\u6001\u6765\u66F4\u65B0\u5904\u7406\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u7535\u68AF\u95E8\u73B0\u5728\u5904\u4E8E\u8FD0\u884C\u65F6\u72B6\u6001\uFF0C\u5C31\u4E0D\u80FD\u8FDB\u884C\u5F00\u95E8\u64CD\u4F5C\uFF0C\u800C\u5982\u679C\u7535\u68AF\u95E8\u662F\u505C\u6B62\u72B6\u6001\uFF0C\u5C31\u53EF\u4EE5\u6267\u884C\u5F00\u95E8\u64CD\u4F5C\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u72B6\u6001\u6A21\u5F0F\u524D.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7535\u68AF\u76844\u4E2A\u72B6\u6001</span>
    <span class="token comment">//\u5F00\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">OPENING_STATE</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5173\u95E8\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">CLOSING_STATE</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">RUNNING_STATE</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">STOPPING_STATE</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8BBE\u7F6E\u7535\u68AF\u7684\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lift</span> <span class="token keyword">implements</span> <span class="token class-name">ILift</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> state<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">OPENING_STATE</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5173\u95E8\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53EA\u6709\u5F00\u95E8\u72B6\u6001\u53EF\u4EE5\u5173\u95ED\u7535\u68AF\u95E8\uFF0C\u53EF\u4EE5\u5BF9\u5E94\u7535\u68AF\u72B6\u6001\u8868\u6765\u770B</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">CLOSING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8\u4E4B\u540E\u7535\u68AF\u5C31\u662F\u5173\u95ED\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">CLOSING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing //\u5DF2\u7ECF\u662F\u5173\u95E8\u72B6\u6001\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">RUNNING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing //\u8FD0\u884C\u65F6\u7535\u68AF\u95E8\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">STOPPING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing //\u505C\u6B62\u65F6\u7535\u68AF\u4E5F\u662F\u5173\u7740\u7684\uFF0C\u4E0D\u80FD\u5173\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">OPENING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5DF2\u7ECF\u5F00\u4E86\uFF0C\u4E0D\u80FD\u518D\u5F00\u95E8\u4E86
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">CLOSING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u72B6\u6001\uFF0C\u95E8\u6253\u5F00<span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u6253\u5F00\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">OPENING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">RUNNING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing \u8FD0\u884C\u65F6\u7535\u68AF\u4E0D\u80FD\u5F00\u95E8</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">STOPPING_STATE</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5F00\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u505C\u4E86\uFF0C\u53EF\u4EE5\u5F00\u95E8\u4E86</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">OPENING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">OPENING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u7535\u68AF\u4E0D\u80FD\u5F00\u7740\u95E8\u5C31\u8D70
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">CLOSING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u95E8\u5173\u4E86\uFF0C\u53EF\u4EE5\u8FD0\u884C\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">RUNNING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u73B0\u5728\u662F\u8FD0\u884C\u72B6\u6001</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">RUNNING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing \u5DF2\u7ECF\u662F\u8FD0\u884C\u72B6\u6001\u4E86</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">STOPPING_STATE</span><span class="token operator">:</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u5F00\u59CB\u8FD0\u884C\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">RUNNING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6267\u884C\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">OPENING_STATE</span><span class="token operator">:</span> <span class="token comment">//\u5F00\u95E8\u7684\u7535\u68AF\u5DF2\u7ECF\u662F\u662F\u505C\u6B62\u7684\u4E86(\u6B63\u5E38\u60C5\u51B5\u4E0B)</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">CLOSING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u5173\u95E8\u65F6\u624D\u53EF\u4EE5\u505C\u6B62
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">STOPPING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">RUNNING_STATE</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>\u8FD0\u884C\u65F6\u5F53\u7136\u53EF\u4EE5\u505C\u6B62\u4E86
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86\u3002\u3002\u3002"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token constant">STOPPING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">STOPPING_STATE</span><span class="token operator">:</span>
                <span class="token comment">//do nothing</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Lift</span> lift <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lift<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">ILift</span><span class="token punctuation">.</span><span class="token constant">STOPPING_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7535\u68AF\u662F\u505C\u6B62\u7684</span>
        lift<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95E8</span>
        lift<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C</span>
        lift<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u95EE\u9898\u5206\u6790\uFF1A</p>
<ul>
<li>\u4F7F\u7528\u4E86\u5927\u91CF\u7684 switch\u2026case \u8FD9\u6837\u7684\u5224\u65AD\uFF08if\u2026else \u4E5F\u662F\u4E00\u6837)\uFF0C\u4F7F\u7A0B\u5E8F\u7684\u53EF\u9605\u8BFB\u6027\u53D8\u5DEE\u3002</li>
<li>\u6269\u5C55\u6027\u5F88\u5DEE\u3002\u5982\u679C\u65B0\u52A0\u4E86\u65AD\u7535\u7684\u72B6\u6001\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E0A\u9762\u5224\u65AD\u903B\u8F91</li>
</ul>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5BF9\u6709\u72B6\u6001\u7684\u5BF9\u8C61\uFF0C\u628A\u590D\u6742\u7684\u201C\u5224\u65AD\u903B\u8F91\u201D\u63D0\u53D6\u5230\u4E0D\u540C\u7684\u72B6\u6001\u5BF9\u8C61\u4E2D\uFF0C\u5141\u8BB8\u72B6\u6001\u5BF9\u8C61\u5728\u5176\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u6539\u53D8\u5176\u884C\u4E3A\u3002</p>
<h3 id="_6-5-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-5-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.5.2 \u7ED3\u6784</h3>
<p>\u72B6\u6001\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p>
<ul>
<li>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u4E5F\u79F0\u4E3A\u4E0A\u4E0B\u6587\uFF0C\u5B83\u5B9A\u4E49\u4E86\u5BA2\u6237\u7A0B\u5E8F\u9700\u8981\u7684\u63A5\u53E3\uFF0C\u7EF4\u62A4\u4E00\u4E2A\u5F53\u524D\u72B6\u6001\uFF0C\u5E76\u5C06\u4E0E\u72B6\u6001\u76F8\u5173\u7684\u64CD\u4F5C\u59D4\u6258\u7ED9\u5F53\u524D\u72B6\u6001\u5BF9\u8C61\u6765\u5904\u7406\u3002</li>
<li>\u62BD\u8C61\u72B6\u6001\uFF08State\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E00\u4E2A\u63A5\u53E3\uFF0C\u7528\u4EE5\u5C01\u88C5\u73AF\u5883\u5BF9\u8C61\u4E2D\u7684\u7279\u5B9A\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li>
<li>\u5177\u4F53\u72B6\u6001\uFF08Concrete State\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u72B6\u6001\u6240\u5BF9\u5E94\u7684\u884C\u4E3A\u3002</li>
</ul>
<h3 id="_6-5-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-5-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.5.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u5BF9\u4E0A\u8FF0\u7535\u68AF\u7684\u6848\u4F8B\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u8FDB\u884C\u6539\u8FDB\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u72B6\u6001\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u72B6\u6001\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u73AF\u5883\u89D2\u8272\uFF0C\u4E5F\u5C31\u662F\u5C01\u88C5\u72B6\u6001\u7684\u53D8\u5316\u5F15\u8D77\u7684\u529F\u80FD\u53D8\u5316</span>
    <span class="token keyword">protected</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u5F00\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u5173\u95E8\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u8FD0\u884C\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u7535\u68AF\u505C\u6B62\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5F00\u542F\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u5F00\u542F\u5F53\u7136\u53EF\u4EE5\u5173\u95ED\u4E86\uFF0C\u6211\u5C31\u60F3\u6D4B\u8BD5\u4E00\u4E0B\u7535\u68AF\u95E8\u5F00\u5173\u529F\u80FD</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5F00\u542F..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u4E0D\u80FD\u5F00\u7740\u5C31\u8DD1\uFF0C\u8FD9\u91CC\u4EC0\u4E48\u4E5F\u4E0D\u505A</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F00\u95E8\u72B6\u6001\u5DF2\u7ECF\u662F\u505C\u6B62\u7684\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u8FD0\u884C\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u8FD0\u884C\u7684\u65F6\u5019\u5F00\u7535\u68AF\u95E8\uFF1F\u4F60\u75AF\u4E86\uFF01\u7535\u68AF\u4E0D\u4F1A\u7ED9\u4F60\u5F00\u7684</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF1F\u8FD9\u662F\u80AF\u5B9A\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u662F\u5728\u8FD0\u884C\u72B6\u6001\u4E0B\u8981\u5B9E\u73B0\u7684\u65B9\u6CD5</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u6B63\u5728\u8FD0\u884C..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FD9\u4E2A\u4E8B\u7EDD\u5BF9\u662F\u5408\u7406\u7684\uFF0C\u5149\u8FD0\u884C\u4E0D\u505C\u6B62\u8FD8\u6709\u8C01\u6562\u505A\u8FD9\u4E2A\u7535\u68AF\uFF1F\uFF01\u4F30\u8BA1\u53EA\u6709\u4E0A\u5E1D\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u505C\u6B62\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoppingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u5F00\u95E8\uFF0C\u90A3\u662F\u8981\u7684\uFF01</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u867D\u7136\u53EF\u4EE5\u5173\u95E8\uFF0C\u4F46\u8FD9\u4E2A\u52A8\u4F5C\u4E0D\u5F52\u6211\u6267\u884C</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u518D\u8DD1\u8D77\u6765\uFF0C\u6B63\u5E38\u7684\u5F88</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u72B6\u6001\u4FEE\u6539</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u52A8\u4F5C\u59D4\u6258\u4E3ACloseState\u6765\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u59D4\u6258\u7ED9\u4E86ClosingState\u5B50\u7C7B\u6267\u884C\u8FD9\u4E2A\u52A8\u4F5C</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u505C\u6B62\u72B6\u6001\u662F\u600E\u4E48\u53D1\u751F\u7684\u5462\uFF1F\u5F53\u7136\u662F\u505C\u6B62\u65B9\u6CD5\u6267\u884C\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u505C\u6B62\u4E86..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5173\u95ED\u72B6\u6001</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClosingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u95ED\uFF0C\u8FD9\u662F\u5173\u95ED\u72B6\u6001\u8981\u5B9E\u73B0\u7684\u52A8\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u7535\u68AF\u95E8\u5173\u95ED..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u518D\u6253\u5F00\uFF0C\u9017\u4F60\u73A9\u5462\uFF0C\u90A3\u8FD9\u4E2A\u5141\u8BB8\u5440</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u4E86\u5C31\u8DD1\uFF0C\u8FD9\u662F\u518D\u6B63\u5E38\u4E0D\u8FC7\u4E86</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u7535\u68AF\u95E8\u5173\u7740\uFF0C\u6211\u5C31\u4E0D\u6309\u697C\u5C42</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u51FA\u6240\u6709\u7684\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">OpenningState</span> openningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5F00\u95E8\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u5173\u95ED</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">ClosingState</span> closeingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5173\u95ED\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u8FD0\u884C\u3001\u505C\u6B62\u548C\u5F00\u95E8</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">RunningState</span> runningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EA\u80FD\u505C\u6B62</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">StoppingState</span> stoppingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u505C\u6B62\u72B6\u6001\uFF0C\u8FD9\u65F6\u5019\u7535\u68AF\u53EF\u4EE5\u5F00\u95E8\u3001\u8FD0\u884C</span>


    <span class="token comment">//\u5B9A\u4E49\u4E00\u4E2A\u5F53\u524D\u7535\u68AF\u72B6\u6001</span>
    <span class="token keyword">private</span> <span class="token class-name">LiftState</span> liftState<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LiftState</span> <span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5F53\u524D\u73AF\u5883\u6539\u53D8</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState <span class="token operator">=</span> liftState<span class="token punctuation">;</span>
        <span class="token comment">//\u628A\u5F53\u524D\u7684\u73AF\u5883\u901A\u77E5\u5230\u5404\u4E2A\u5B9E\u73B0\u7C7B\u4E2D</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-5-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.5.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5C06\u6240\u6709\u4E0E\u67D0\u4E2A\u72B6\u6001\u6709\u5173\u7684\u884C\u4E3A\u653E\u5230\u4E00\u4E2A\u7C7B\u4E2D\uFF0C\u5E76\u4E14\u53EF\u4EE5\u65B9\u4FBF\u5730\u589E\u52A0\u65B0\u7684\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6539\u53D8\u5BF9\u8C61\u72B6\u6001\u5373\u53EF\u6539\u53D8\u5BF9\u8C61\u7684\u884C\u4E3A\u3002</li>
<li>\u5141\u8BB8\u72B6\u6001\u8F6C\u6362\u903B\u8F91\u4E0E\u72B6\u6001\u5BF9\u8C61\u5408\u6210\u4E00\u4F53\uFF0C\u800C\u4E0D\u662F\u67D0\u4E00\u4E2A\u5DE8\u5927\u7684\u6761\u4EF6\u8BED\u53E5\u5757\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u72B6\u6001\u6A21\u5F0F\u7684\u4F7F\u7528\u5FC5\u7136\u4F1A\u589E\u52A0\u7CFB\u7EDF\u7C7B\u548C\u5BF9\u8C61\u7684\u4E2A\u6570\u3002</li>
<li>\u72B6\u6001\u6A21\u5F0F\u7684\u7ED3\u6784\u4E0E\u5B9E\u73B0\u90FD\u8F83\u4E3A\u590D\u6742\uFF0C\u5982\u679C\u4F7F\u7528\u4E0D\u5F53\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u7ED3\u6784\u548C\u4EE3\u7801\u7684\u6DF7\u4E71\u3002</li>
<li>\u72B6\u6001\u6A21\u5F0F\u5BF9&quot;\u5F00\u95ED\u539F\u5219&quot;\u7684\u652F\u6301\u5E76\u4E0D\u592A\u597D\u3002</li>
</ul>
<h3 id="_6-5-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-5-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.5.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u884C\u4E3A\u53D6\u51B3\u4E8E\u5B83\u7684\u72B6\u6001\uFF0C\u5E76\u4E14\u5B83\u5FC5\u987B\u5728\u8FD0\u884C\u65F6\u6839\u636E\u72B6\u6001\u6539\u53D8\u5B83\u7684\u884C\u4E3A\u65F6\uFF0C\u5C31\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u72B6\u6001\u6A21\u5F0F\u3002</li>
<li>\u4E00\u4E2A\u64CD\u4F5C\u4E2D\u542B\u6709\u5E9E\u5927\u7684\u5206\u652F\u7ED3\u6784\uFF0C\u5E76\u4E14\u8FD9\u4E9B\u5206\u652F\u51B3\u5B9A\u4E8E\u5BF9\u8C61\u7684\u72B6\u6001\u65F6\u3002</li>
</ul>
<h2 id="_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-6-\u89C2\u5BDF\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.6 \u89C2\u5BDF\u8005\u6A21\u5F0F</h2>
<h3 id="_6-6-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-6-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.6.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u88AB\u79F0\u4E3A\u53D1\u5E03-\u8BA2\u9605\uFF08Publish/Subscribe\uFF09\u6A21\u5F0F\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u79CD\u4E00\u5BF9\u591A\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u8BA9\u591A\u4E2A\u89C2\u5BDF\u8005\u5BF9\u8C61\u540C\u65F6\u76D1\u542C\u67D0\u4E00\u4E2A\u4E3B\u9898\u5BF9\u8C61\u3002\u8FD9\u4E2A\u4E3B\u9898\u5BF9\u8C61\u5728\u72B6\u6001\u53D8\u5316\u65F6\uFF0C\u4F1A\u901A\u77E5\u6240\u6709\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4F7F\u4ED6\u4EEC\u80FD\u591F\u81EA\u52A8\u66F4\u65B0\u81EA\u5DF1\u3002</p>
<h3 id="_6-6-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-6-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.6.2 \u7ED3\u6784</h3>
<p>\u5728\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\u6709\u5982\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>Subject\uFF1A\u62BD\u8C61\u4E3B\u9898\uFF08\u62BD\u8C61\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u62BD\u8C61\u4E3B\u9898\u89D2\u8272\u628A\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u4FDD\u5B58\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\uFF0C\u6BCF\u4E2A\u4E3B\u9898\u90FD\u53EF\u4EE5\u6709\u4EFB\u610F\u6570\u91CF\u7684\u89C2\u5BDF\u8005\uFF0C\u62BD\u8C61\u4E3B\u9898\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u53EF\u4EE5\u589E\u52A0\u548C\u5220\u9664\u89C2\u5BDF\u8005\u5BF9\u8C61\u3002</li>
<li>ConcreteSubject\uFF1A\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u8BE5\u89D2\u8272\u5C06\u6709\u5173\u72B6\u6001\u5B58\u5165\u5177\u4F53\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u5728\u5177\u4F53\u4E3B\u9898\u7684\u5185\u90E8\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u7ED9\u6240\u6709\u6CE8\u518C\u8FC7\u7684\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u3002</li>
<li>Observer\uFF1A\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u662F\u89C2\u5BDF\u8005\u7684\u62BD\u8C61\u7C7B\uFF0C\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u66F4\u65B0\u63A5\u53E3\uFF0C\u4F7F\u5F97\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u5DF1\u3002</li>
<li>ConcrereObserver\uFF1A\u5177\u4F53\u89C2\u5BDF\u8005\uFF0C\u5B9E\u73B0\u62BD\u8C61\u89C2\u5BDF\u8005\u5B9A\u4E49\u7684\u66F4\u65B0\u63A5\u53E3\uFF0C\u4EE5\u4FBF\u5728\u5F97\u5230\u4E3B\u9898\u66F4\u6539\u901A\u77E5\u65F6\u66F4\u65B0\u81EA\u8EAB\u7684\u72B6\u6001\u3002</li>
</ul>
<h3 id="_6-6-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u5FAE\u4FE1\u516C\u4F17\u53F7</p>
<p>\u5728\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u65F6\uFF0C\u5927\u5BB6\u90FD\u4F1A\u6709\u8FD9\u6837\u7684\u4F53\u9A8C\uFF0C\u5F53\u4F60\u5173\u6CE8\u7684\u516C\u4F17\u53F7\u4E2D\u6709\u65B0\u5185\u5BB9\u66F4\u65B0\u7684\u8BDD\uFF0C\u5B83\u5C31\u4F1A\u63A8\u9001\u7ED9\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u7AEF\u3002\u6211\u4EEC\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u6A21\u62DF\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5FAE\u4FE1\u7528\u6237\u5C31\u662F\u89C2\u5BDF\u8005\uFF0C\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u88AB\u89C2\u5BDF\u8005\uFF0C\u6709\u591A\u4E2A\u7684\u5FAE\u4FE1\u7528\u6237\u5173\u6CE8\u4E86\u7A0B\u5E8F\u733F\u8FD9\u4E2A\u516C\u4F17\u53F7\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u89C2\u5BDF\u8005\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u62BD\u8C61\u89C2\u5BDF\u8005\u7C7B\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E00\u4E2A\u66F4\u65B0\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u89C2\u5BDF\u8005\u7C7B\uFF0C\u5FAE\u4FE1\u7528\u6237\u662F\u89C2\u5BDF\u8005\uFF0C\u91CC\u9762\u5B9E\u73B0\u4E86\u66F4\u65B0\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeixinUser</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5FAE\u4FE1\u7528\u6237\u540D</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u4E3B\u9898\u7C7B\uFF0C\u63D0\u4F9B\u4E86 attach\u3001detach\u3001notify \u4E09\u4E2A\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u589E\u52A0\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5220\u9664\u8BA2\u9605\u8005</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u901A\u77E5\u8BA2\u9605\u8005\u66F4\u65B0\u6D88\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5FAE\u4FE1\u516C\u4F17\u53F7\u662F\u5177\u4F53\u4E3B\u9898\uFF08\u5177\u4F53\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u91CC\u9762\u5B58\u50A8\u4E86\u8BA2\u9605\u8BE5\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\uFF0C\u5E76\u5B9E\u73B0\u4E86\u62BD\u8C61\u4E3B\u9898\u4E2D\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u50A8\u5B58\u8BA2\u9605\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span> weixinUserlist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer <span class="token operator">:</span> weixinUserlist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u7A0B\u5E8F</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SubscriptionSubject</span> mSubscriptionSubject<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u5FAE\u4FE1\u7528\u6237</span>
        <span class="token class-name">WeixinUser</span> user1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u5B59\u609F\u7A7A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u732A\u609F\u80FD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">"\u6C99\u609F\u51C0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA2\u9605\u516C\u4F17\u53F7</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u516C\u4F17\u53F7\u66F4\u65B0\u53D1\u51FA\u6D88\u606F\u7ED9\u8BA2\u9605\u7684\u5FAE\u4FE1\u7528\u6237</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">"\u4F20\u667A\u9ED1\u9A6C\u7684\u4E13\u680F\u66F4\u65B0\u4E86"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-6-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.6.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u964D\u4F4E\u4E86\u76EE\u6807\u4E0E\u89C2\u5BDF\u8005\u4E4B\u95F4\u7684\u8026\u5408\u5173\u7CFB\uFF0C\u4E24\u8005\u4E4B\u95F4\u662F\u62BD\u8C61\u8026\u5408\u5173\u7CFB\u3002</li>
<li>\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\uFF0C\u6240\u6709\u6CE8\u518C\u7684\u89C2\u5BDF\u8005\u90FD\u4F1A\u6536\u5230\u4FE1\u606F\u3010\u53EF\u4EE5\u5B9E\u73B0\u5E7F\u64AD\u673A\u5236\u3011</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u5982\u679C\u89C2\u5BDF\u8005\u975E\u5E38\u591A\u7684\u8BDD\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u89C2\u5BDF\u8005\u6536\u5230\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u7684\u901A\u77E5\u4F1A\u8017\u65F6</li>
<li>\u5982\u679C\u88AB\u89C2\u5BDF\u8005\u6709\u5FAA\u73AF\u4F9D\u8D56\u7684\u8BDD\uFF0C\u90A3\u4E48\u88AB\u89C2\u5BDF\u8005\u53D1\u9001\u901A\u77E5\u4F1A\u4F7F\u89C2\u5BDF\u8005\u5FAA\u73AF\u8C03\u7528\uFF0C\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u5D29\u6E83</li>
</ul>
<h3 id="_6-6-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-6-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.6.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5BF9\u8C61\u95F4\u5B58\u5728\u4E00\u5BF9\u591A\u5173\u7CFB\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u7684\u72B6\u6001\u53D1\u751F\u6539\u53D8\u4F1A\u5F71\u54CD\u5176\u4ED6\u5BF9\u8C61\u3002</li>
<li>\u5F53\u4E00\u4E2A\u62BD\u8C61\u6A21\u578B\u6709\u4E24\u4E2A\u65B9\u9762\uFF0C\u5176\u4E2D\u4E00\u4E2A\u65B9\u9762\u4F9D\u8D56\u4E8E\u53E6\u4E00\u65B9\u9762\u65F6\u3002</li>
</ul>
<h3 id="_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-6-6-jdk-\u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0" aria-hidden="true">#</a> 6.6.6 JDK \u4E2D\u63D0\u4F9B\u7684\u5B9E\u73B0</h3>
<p>\u5728 Java \u4E2D\uFF0C\u901A\u8FC7 java.util.Observable \u7C7B\u548C java.util.Observer \u63A5\u53E3\u5B9A\u4E49\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0C\u53EA\u8981\u5B9E\u73B0\u5B83\u4EEC\u7684\u5B50\u7C7B\u5C31\u53EF\u4EE5\u7F16\u5199\u89C2\u5BDF\u8005\u6A21\u5F0F\u5B9E\u4F8B\u3002</p>
<p><strong>1\uFF0CObservable \u7C7B</strong></p>
<p>Observable \u7C7B\u662F\u62BD\u8C61\u76EE\u6807\u7C7B\uFF08\u88AB\u89C2\u5BDF\u8005\uFF09\uFF0C\u5B83\u6709\u4E00\u4E2A Vector \u96C6\u5408\u6210\u5458\u53D8\u91CF\uFF0C\u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u8981\u901A\u77E5\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\uFF0C\u4E0B\u9762\u6765\u4ECB\u7ECD\u5B83\u6700\u91CD\u8981\u7684 3 \u4E2A\u65B9\u6CD5\u3002</p>
<ul>
<li>
<p>void addObserver(Observer o) \u65B9\u6CD5\uFF1A\u7528\u4E8E\u5C06\u65B0\u7684\u89C2\u5BDF\u8005\u5BF9\u8C61\u6DFB\u52A0\u5230\u96C6\u5408\u4E2D\u3002</p>
</li>
<li>
<p>void notifyObservers(Object arg) \u65B9\u6CD5\uFF1A\u8C03\u7528\u96C6\u5408\u4E2D\u7684\u6240\u6709\u89C2\u5BDF\u8005\u5BF9\u8C61\u7684 update \u65B9\u6CD5\uFF0C\u901A\u77E5\u5B83\u4EEC\u6570\u636E\u53D1\u751F\u6539\u53D8\u3002\u901A\u5E38\u8D8A\u665A\u52A0\u5165\u96C6\u5408\u7684\u89C2\u5BDF\u8005\u8D8A\u5148\u5F97\u5230\u901A\u77E5\u3002</p>
</li>
<li>
<p>void setChange() \u65B9\u6CD5\uFF1A\u7528\u6765\u8BBE\u7F6E\u4E00\u4E2A boolean \u7C7B\u578B\u7684\u5185\u90E8\u6807\u5FD7\uFF0C\u6CE8\u660E\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u4E86\u53D8\u5316\u3002\u5F53\u5B83\u4E3A true \u65F6\uFF0CnotifyObservers() \u624D\u4F1A\u901A\u77E5\u89C2\u5BDF\u8005\u3002</p>
</li>
</ul>
<p><strong>2\uFF0CObserver \u63A5\u53E3</strong></p>
<p>Observer \u63A5\u53E3\u662F\u62BD\u8C61\u89C2\u5BDF\u8005\uFF0C\u5B83\u76D1\u89C6\u76EE\u6807\u5BF9\u8C61\u7684\u53D8\u5316\uFF0C\u5F53\u76EE\u6807\u5BF9\u8C61\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u89C2\u5BDF\u8005\u5F97\u5230\u901A\u77E5\uFF0C\u5E76\u8C03\u7528 update \u65B9\u6CD5\uFF0C\u8FDB\u884C\u76F8\u5E94\u7684\u5DE5\u4F5C\u3002</p>
<p>\u3010\u4F8B\u3011\u8B66\u5BDF\u6293\u5C0F\u5077</p>
<p>\u8B66\u5BDF\u6293\u5C0F\u5077\u4E5F\u53EF\u4EE5\u4F7F\u7528\u89C2\u5BDF\u8005\u6A21\u5F0F\u6765\u5B9E\u73B0\uFF0C\u8B66\u5BDF\u662F\u89C2\u5BDF\u8005\uFF0C\u5C0F\u5077\u662F\u88AB\u89C2\u5BDF\u8005\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5C0F\u5077\u662F\u4E00\u4E2A\u88AB\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u7EE7\u627F Observable \u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thief</span> <span class="token keyword">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u5077\uFF1A\u6211\u5077\u4E1C\u897F\u4E86\uFF0C\u6709\u6CA1\u6709\u4EBA\u6765\u6293\u6211\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//changed  = true</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8B66\u5BDF\u662F\u4E00\u4E2A\u89C2\u5BDF\u8005\uFF0C\u6240\u4EE5\u9700\u8981\u8BA9\u5176\u5B9E\u73B0 Observer \u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Policemen</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Observable</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u8B66\u5BDF\uFF1A"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Thief</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\uFF0C\u6211\u5DF2\u7ECF\u76EF\u4F60\u5F88\u4E45\u4E86\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u6301\u6C89\u9ED8\uFF0C\u4F46\u4F60\u6240\u8BF4\u7684\u5C06\u6210\u4E3A\u5448\u5802\u8BC1\u4F9B\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u4EE3\u7801</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u5C0F\u5077\u5BF9\u8C61</span>
        <span class="token class-name">Thief</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token string">"\u9694\u58C1\u8001\u738B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u521B\u5EFA\u8B66\u5BDF\u5BF9\u8C61</span>
        <span class="token class-name">Policemen</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token string">"\u5C0F\u674E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA9\u8B66\u5BDF\u76EF\u7740\u5C0F\u5077</span>
        t<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C0F\u5077\u5077\u4E1C\u897F</span>
        t<span class="token punctuation">.</span><span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-7-\u4E2D\u4ECB\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.7 \u4E2D\u4ECB\u8005\u6A21\u5F0F</h2>
<h3 id="_6-7-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-7-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.7.1 \u6982\u8FF0</h3>
<p>\u4E00\u822C\u6765\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u662F\u6BD4\u8F83\u590D\u6742\u7684\uFF0C\u591A\u4E2A\u540C\u4E8B\u7C7B\u4E4B\u95F4\u4E92\u76F8\u5173\u8054\u65F6\uFF0C\u4ED6\u4EEC\u4E4B\u95F4\u7684\u5173\u7CFB\u4F1A\u5448\u73B0\u4E3A\u590D\u6742\u7684\u7F51\u72B6\u7ED3\u6784\uFF0C\u8FD9\u662F\u4E00\u79CD\u8FC7\u5EA6\u8026\u5408\u7684\u67B6\u6784\uFF0C\u5373\u4E0D\u5229\u4E8E\u7C7B\u7684\u590D\u7528\uFF0C\u4E5F\u4E0D\u7A33\u5B9A\u3002\u4F8B\u5982\u5728\u4E0B\u5DE6\u56FE\u4E2D\uFF0C\u6709\u516D\u4E2A\u540C\u4E8B\u7C7B\u5BF9\u8C61\uFF0C\u5047\u5982\u5BF9\u8C61 1 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 4 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u5982\u679C\u5BF9\u8C61 2 \u53D1\u751F\u53D8\u5316\uFF0C\u90A3\u4E48\u5C06\u4F1A\u6709 5 \u4E2A\u5BF9\u8C61\u53D7\u5230\u5F71\u54CD\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u540C\u4E8B\u7C7B\u4E4B\u95F4\u76F4\u63A5\u5173\u8054\u7684\u8BBE\u8BA1\u662F\u4E0D\u597D\u7684\u3002</p>
<p>\u5982\u679C\u5F15\u5165\u4E2D\u4ECB\u8005\u6A21\u5F0F\uFF0C\u90A3\u4E48\u540C\u4E8B\u7C7B\u4E4B\u95F4\u7684\u5173\u7CFB\u5C06\u53D8\u4E3A\u661F\u578B\u7ED3\u6784\uFF0C\u4ECE\u4E0B\u53F3\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7C7B\u7684\u53D8\u52A8\uFF0C\u53EA\u4F1A\u5F71\u54CD\u7684\u7C7B\u672C\u8EAB\uFF0C\u4EE5\u53CA\u4E2D\u4ECB\u8005\uFF0C\u8FD9\u6837\u5C31\u51CF\u5C0F\u4E86\u7CFB\u7EDF\u7684\u8026\u5408\u3002\u4E00\u4E2A\u597D\u7684\u8BBE\u8BA1\uFF0C\u5FC5\u5B9A\u4E0D\u4F1A\u628A\u6240\u6709\u7684\u5BF9\u8C61\u5173\u7CFB\u5904\u7406\u903B\u8F91\u5C01\u88C5\u5728\u672C\u7C7B\u4E2D\uFF0C\u800C\u662F\u4F7F\u7528\u4E00\u4E2A\u4E13\u95E8\u7684\u7C7B\u6765\u7BA1\u7406\u90A3\u4E9B\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u7684\u884C\u4E3A\u3002</p>
<img src="/img/image-20200214110924010.png" style="zoom:60%;" />
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u53EB\u8C03\u505C\u6A21\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u4E2D\u4ECB\u89D2\u8272\u6765\u5C01\u88C5\u4E00\u7CFB\u5217\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\uFF0C\u4F7F\u539F\u6709\u5BF9\u8C61\u4E4B\u95F4\u7684\u8026\u5408\u677E\u6563\uFF0C\u4E14\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u5B83\u4EEC\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002</p>
<h3 id="_6-7-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-7-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.7.2 \u7ED3\u6784</h3>
<p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u4E2D\u4ECB\u8005\uFF08Mediator\uFF09\u89D2\u8272\uFF1A\u5B83\u662F\u4E2D\u4ECB\u8005\u7684\u63A5\u53E3\uFF0C\u63D0\u4F9B\u4E86\u540C\u4E8B\u5BF9\u8C61\u6CE8\u518C\u4E0E\u8F6C\u53D1\u540C\u4E8B\u5BF9\u8C61\u4FE1\u606F\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u4E2D\u4ECB\u8005\uFF08ConcreteMediator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u4E2D\u4ECB\u8005\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E00\u4E2A List \u6765\u7BA1\u7406\u540C\u4E8B\u5BF9\u8C61\uFF0C\u534F\u8C03\u5404\u4E2A\u540C\u4E8B\u89D2\u8272\u4E4B\u95F4\u7684\u4EA4\u4E92\u5173\u7CFB\uFF0C\u56E0\u6B64\u5B83\u4F9D\u8D56\u4E8E\u540C\u4E8B\u89D2\u8272\u3002</p>
</li>
<li>
<p>\u62BD\u8C61\u540C\u4E8B\u7C7B\uFF08Colleague\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u540C\u4E8B\u7C7B\u7684\u63A5\u53E3\uFF0C\u4FDD\u5B58\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u63D0\u4F9B\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u7684\u62BD\u8C61\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6240\u6709\u76F8\u4E92\u5F71\u54CD\u7684\u540C\u4E8B\u7C7B\u7684\u516C\u5171\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u540C\u4E8B\u7C7B\uFF08Concrete Colleague\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u540C\u4E8B\u7C7B\u7684\u5B9E\u73B0\u8005\uFF0C\u5F53\u9700\u8981\u4E0E\u5176\u4ED6\u540C\u4E8B\u5BF9\u8C61\u4EA4\u4E92\u65F6\uFF0C\u7531\u4E2D\u4ECB\u8005\u5BF9\u8C61\u8D1F\u8D23\u540E\u7EED\u7684\u4EA4\u4E92\u3002</p>
</li>
</ul>
<h3 id="_6-7-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-7-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.7.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u79DF\u623F</p>
<p>\u73B0\u5728\u79DF\u623F\u57FA\u672C\u90FD\u662F\u901A\u8FC7\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u623F\u4E3B\u5C06\u623F\u5C4B\u6258\u7BA1\u7ED9\u623F\u5C4B\u4E2D\u4ECB\uFF0C\u800C\u79DF\u623F\u8005\u4ECE\u623F\u5C4B\u4E2D\u4ECB\u83B7\u53D6\u623F\u5C4B\u4FE1\u606F\u3002\u623F\u5C4B\u4E2D\u4ECB\u5145\u5F53\u79DF\u623F\u8005\u4E0E\u623F\u5C4B\u6240\u6709\u8005\u4E4B\u95F4\u7684\u4E2D\u4ECB\u8005\u3002</p>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u4E2D\u4ECB\u8005\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u4E2D\u4ECB\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7533\u660E\u4E00\u4E2A\u8054\u7EDC\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u62BD\u8C61\u540C\u4E8B\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u623F\u5C4B\u62E5\u6709\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HouseOwner</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u623F\u4E3B"</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u5177\u4F53\u540C\u4E8B\u7C7B \u627F\u79DF\u4EBA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tenant</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4E0E\u4E2D\u4ECB\u8005\u8054\u7CFB</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u4FE1\u606F</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u79DF\u623F\u8005"</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">"\u83B7\u53D6\u5230\u7684\u4FE1\u606F\uFF1A"</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u4E2D\u4ECB\u673A\u6784</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorStructure</span> <span class="token keyword">extends</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u9996\u5148\u4E2D\u4ECB\u7ED3\u6784\u5FC5\u987B\u77E5\u9053\u6240\u6709\u623F\u4E3B\u548C\u79DF\u623F\u8005\u7684\u4FE1\u606F</span>
    <span class="token keyword">private</span> <span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tenant</span> tenant<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span> <span class="token function">getHouseOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHouseOwner</span><span class="token punctuation">(</span><span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>houseOwner <span class="token operator">=</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Tenant</span> <span class="token function">getTenant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTenant</span><span class="token punctuation">(</span><span class="token class-name">Tenant</span> tenant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tenant <span class="token operator">=</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>person <span class="token operator">==</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">//\u5982\u679C\u662F\u623F\u4E3B\uFF0C\u5219\u79DF\u623F\u8005\u83B7\u5F97\u4FE1\u606F</span>
            tenant<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>       <span class="token comment">//\u53CD\u6B63\u5219\u662F\u623F\u4E3B\u83B7\u5F97\u4FE1\u606F</span>
            houseOwner<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4E00\u4E2A\u623F\u4E3B\u3001\u4E00\u4E2A\u79DF\u623F\u8005\u3001\u4E00\u4E2A\u4E2D\u4ECB\u673A\u6784</span>
        <span class="token class-name">MediatorStructure</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediatorStructure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u623F\u4E3B\u548C\u79DF\u623F\u8005\u53EA\u9700\u8981\u77E5\u9053\u4E2D\u4ECB\u673A\u6784\u5373\u53EF</span>
        <span class="token class-name">HouseOwner</span> houseOwner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token string">"\u5F20\u4E09"</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Tenant</span> tenant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token string">"\u674E\u56DB"</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4E2D\u4ECB\u7ED3\u6784\u8981\u77E5\u9053\u623F\u4E3B\u548C\u79DF\u623F\u8005</span>
        mediator<span class="token punctuation">.</span><span class="token function">setHouseOwner</span><span class="token punctuation">(</span>houseOwner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediator<span class="token punctuation">.</span><span class="token function">setTenant</span><span class="token punctuation">(</span>tenant<span class="token punctuation">)</span><span class="token punctuation">;</span>

        tenant<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">"\u9700\u8981\u79DF\u4E09\u5BA4\u7684\u623F\u5B50"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        houseOwner<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">"\u6211\u8FD9\u6709\u4E09\u5BA4\u7684\u623F\u5B50\uFF0C\u4F60\u9700\u8981\u79DF\u5417\uFF1F"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-7-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-7-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.7.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u677E\u6563\u8026\u5408</p>
<p>\u4E2D\u4ECB\u8005\u6A21\u5F0F\u901A\u8FC7\u628A\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u5C01\u88C5\u5230\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\uFF0C\u4ECE\u800C\u4F7F\u5F97\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u677E\u6563\u8026\u5408\uFF0C\u57FA\u672C\u4E0A\u53EF\u4EE5\u505A\u5230\u4E92\u8865\u4F9D\u8D56\u3002\u8FD9\u6837\u4E00\u6765\uFF0C\u540C\u4E8B\u5BF9\u8C61\u5C31\u53EF\u4EE5\u72EC\u7ACB\u5730\u53D8\u5316\u548C\u590D\u7528\uFF0C\u800C\u4E0D\u518D\u50CF\u4EE5\u524D\u90A3\u6837\u201C\u7275\u4E00\u5904\u800C\u52A8\u5168\u8EAB\u201D\u4E86\u3002</p>
</li>
<li>
<p>\u96C6\u4E2D\u63A7\u5236\u4EA4\u4E92</p>
<p>\u591A\u4E2A\u540C\u4E8B\u5BF9\u8C61\u7684\u4EA4\u4E92\uFF0C\u88AB\u5C01\u88C5\u5728\u4E2D\u4ECB\u8005\u5BF9\u8C61\u91CC\u9762\u96C6\u4E2D\u7BA1\u7406\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u4EA4\u4E92\u884C\u4E3A\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4FEE\u6539\u4E2D\u4ECB\u8005\u5BF9\u8C61\u5C31\u53EF\u4EE5\u4E86\uFF0C\u5F53\u7136\u5982\u679C\u662F\u5DF2\u7ECF\u505A\u597D\u7684\u7CFB\u7EDF\uFF0C\u90A3\u4E48\u5C31\u6269\u5C55\u4E2D\u4ECB\u8005\u5BF9\u8C61\uFF0C\u800C\u5404\u4E2A\u540C\u4E8B\u7C7B\u4E0D\u9700\u8981\u505A\u4FEE\u6539\u3002</p>
</li>
<li>
<p>\u4E00\u5BF9\u591A\u5173\u8054\u8F6C\u53D8\u4E3A\u4E00\u5BF9\u4E00\u7684\u5173\u8054</p>
<p>\u6CA1\u6709\u4F7F\u7528\u4E2D\u4ECB\u8005\u6A21\u5F0F\u7684\u65F6\u5019\uFF0C\u540C\u4E8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u5173\u7CFB\u901A\u5E38\u662F\u4E00\u5BF9\u591A\u7684\uFF0C\u5F15\u5165\u4E2D\u4ECB\u8005\u5BF9\u8C61\u4EE5\u540E\uFF0C\u4E2D\u4ECB\u8005\u5BF9\u8C61\u548C\u540C\u4E8B\u5BF9\u8C61\u7684\u5173\u7CFB\u901A\u5E38\u53D8\u6210\u53CC\u5411\u7684\u4E00\u5BF9\u4E00\uFF0C\u8FD9\u4F1A\u8BA9\u5BF9\u8C61\u7684\u5173\u7CFB\u66F4\u5BB9\u6613\u7406\u89E3\u548C\u5B9E\u73B0\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u5F53\u540C\u4E8B\u7C7B\u592A\u591A\u65F6\uFF0C\u4E2D\u4ECB\u8005\u7684\u804C\u8D23\u5C06\u5F88\u5927\uFF0C\u5B83\u4F1A\u53D8\u5F97\u590D\u6742\u800C\u5E9E\u5927\uFF0C\u4EE5\u81F3\u4E8E\u7CFB\u7EDF\u96BE\u4EE5\u7EF4\u62A4\u3002</p>
<h3 id="_6-7-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-7-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.7.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u7CFB\u7EDF\u4E2D\u5BF9\u8C61\u4E4B\u95F4\u5B58\u5728\u590D\u6742\u7684\u5F15\u7528\u5173\u7CFB\uFF0C\u7CFB\u7EDF\u7ED3\u6784\u6DF7\u4E71\u4E14\u96BE\u4EE5\u7406\u89E3\u3002</li>
<li>\u5F53\u60F3\u521B\u5EFA\u4E00\u4E2A\u8FD0\u884C\u4E8E\u591A\u4E2A\u7C7B\u4E4B\u95F4\u7684\u5BF9\u8C61\uFF0C\u53C8\u4E0D\u60F3\u751F\u6210\u65B0\u7684\u5B50\u7C7B\u65F6\u3002</li>
</ul>
<h2 id="_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-8-\u8FED\u4EE3\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.8 \u8FED\u4EE3\u5668\u6A21\u5F0F</h2>
<h3 id="_6-8-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-8-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.8.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u63D0\u4F9B\u4E00\u4E2A\u5BF9\u8C61\u6765\u987A\u5E8F\u8BBF\u95EE\u805A\u5408\u5BF9\u8C61\u4E2D\u7684\u4E00\u7CFB\u5217\u6570\u636E\uFF0C\u800C\u4E0D\u66B4\u9732\u805A\u5408\u5BF9\u8C61\u7684\u5185\u90E8\u8868\u793A\u3002</p>
<h3 id="_6-8-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-8-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.8.2 \u7ED3\u6784</h3>
<p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E3B\u8981\u5305\u542B\u4EE5\u4E0B\u89D2\u8272\uFF1A</p>
<ul>
<li>
<p>\u62BD\u8C61\u805A\u5408\uFF08Aggregate\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5B58\u50A8\u3001\u6DFB\u52A0\u3001\u5220\u9664\u805A\u5408\u5143\u7D20\u4EE5\u53CA\u521B\u5EFA\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u63A5\u53E3\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u805A\u5408\uFF08ConcreteAggregate\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u805A\u5408\u7C7B\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u8FED\u4EE3\u5668\u7684\u5B9E\u4F8B\u3002</p>
</li>
<li>
<p>\u62BD\u8C61\u8FED\u4EE3\u5668\uFF08Iterator\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u8BBF\u95EE\u548C\u904D\u5386\u805A\u5408\u5143\u7D20\u7684\u63A5\u53E3\uFF0C\u901A\u5E38\u5305\u542B hasNext()\u3001next() \u7B49\u65B9\u6CD5\u3002</p>
</li>
<li>
<p>\u5177\u4F53\u8FED\u4EE3\u5668\uFF08Concretelterator\uFF09\u89D2\u8272\uFF1A\u5B9E\u73B0\u62BD\u8C61\u8FED\u4EE3\u5668\u63A5\u53E3\u4E2D\u6240\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0C\u5B8C\u6210\u5BF9\u805A\u5408\u5BF9\u8C61\u7684\u904D\u5386\uFF0C\u8BB0\u5F55\u904D\u5386\u7684\u5F53\u524D\u4F4D\u7F6E\u3002</p>
</li>
</ul>
<h3 id="_6-8-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-8-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.8.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u5B9A\u4E49\u4E00\u4E2A\u53EF\u4EE5\u5B58\u50A8\u5B66\u751F\u5BF9\u8C61\u7684\u5BB9\u5668\u5BF9\u8C61\uFF0C\u5C06\u904D\u5386\u8BE5\u5BB9\u5668\u7684\u529F\u80FD\u4EA4\u7531\u8FED\u4EE3\u5668\u5B9E\u73B0\uFF0C\u6D89\u53CA\u5230\u7684\u7C7B\u5982\u4E0B\uFF1A</p>
<img src="/img/\u8FED\u4EE3\u5668\u6A21\u5F0F.png" style="zoom:90%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u5B9A\u4E49\u8FED\u4EE3\u5668\u63A5\u53E3\uFF0C\u58F0\u660E hasNext\u3001next \u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u8FED\u4EE3\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u62BD\u8C61\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentIteratorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> position <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Student</span> currentStudent <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position <span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> currentStudent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u5BB9\u5668\u7C7B\uFF0C\u5305\u542B\u6DFB\u52A0\u5143\u7D20\uFF0C\u5220\u9664\u5143\u7D20\uFF0C\u83B7\u53D6\u8FED\u4EE3\u5668\u5BF9\u8C61\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5177\u4F53\u7684\u5BB9\u5668\u7C7B\uFF0C\u91CD\u5199\u6240\u6709\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAggregateImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u5B66\u751F\u5217\u8868</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-8-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-8-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.8.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u5B83\u652F\u6301\u4EE5\u4E0D\u540C\u7684\u65B9\u5F0F\u904D\u5386\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\uFF0C\u5728\u540C\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u4E0A\u53EF\u4EE5\u5B9A\u4E49\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u3002\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\u53EA\u9700\u8981\u7528\u4E00\u4E2A\u4E0D\u540C\u7684\u8FED\u4EE3\u5668\u6765\u66FF\u6362\u539F\u6709\u8FED\u4EE3\u5668\u5373\u53EF\u6539\u53D8\u904D\u5386\u7B97\u6CD5\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49\u8FED\u4EE3\u5668\u7684\u5B50\u7C7B\u4EE5\u652F\u6301\u65B0\u7684\u904D\u5386\u65B9\u5F0F\u3002</li>
<li>\u8FED\u4EE3\u5668\u7B80\u5316\u4E86\u805A\u5408\u7C7B\u3002\u7531\u4E8E\u5F15\u5165\u4E86\u8FED\u4EE3\u5668\uFF0C\u5728\u539F\u6709\u7684\u805A\u5408\u5BF9\u8C61\u4E2D\u4E0D\u9700\u8981\u518D\u81EA\u884C\u63D0\u4F9B\u6570\u636E\u904D\u5386\u7B49\u65B9\u6CD5\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7B80\u5316\u805A\u5408\u7C7B\u7684\u8BBE\u8BA1\u3002</li>
<li>\u5728\u8FED\u4EE3\u5668\u6A21\u5F0F\u4E2D\uFF0C\u7531\u4E8E\u5F15\u5165\u4E86\u62BD\u8C61\u5C42\uFF0C\u589E\u52A0\u65B0\u7684\u805A\u5408\u7C7B\u548C\u8FED\u4EE3\u5668\u7C7B\u90FD\u5F88\u65B9\u4FBF\uFF0C\u65E0\u987B\u4FEE\u6539\u539F\u6709\u4EE3\u7801\uFF0C\u6EE1\u8DB3 \u201C\u5F00\u95ED\u539F\u5219\u201D \u7684\u8981\u6C42\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<p>\u589E\u52A0\u4E86\u7C7B\u7684\u4E2A\u6570\uFF0C\u8FD9\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u589E\u52A0\u4E86\u7CFB\u7EDF\u7684\u590D\u6742\u6027\u3002</p>
<h3 id="_6-8-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-8-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.8.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>\u5F53\u9700\u8981\u4E3A\u805A\u5408\u5BF9\u8C61\u63D0\u4F9B\u591A\u79CD\u904D\u5386\u65B9\u5F0F\u65F6\u3002</li>
<li>\u5F53\u9700\u8981\u4E3A\u904D\u5386\u4E0D\u540C\u7684\u805A\u5408\u7ED3\u6784\u63D0\u4F9B\u4E00\u4E2A\u7EDF\u4E00\u7684\u63A5\u53E3\u65F6\u3002</li>
<li>\u5F53\u8BBF\u95EE\u4E00\u4E2A\u805A\u5408\u5BF9\u8C61\u7684\u5185\u5BB9\u800C\u65E0\u987B\u66B4\u9732\u5176\u5185\u90E8\u7EC6\u8282\u7684\u8868\u793A\u65F6\u3002</li>
</ul>
<h3 id="_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-8-6-jdk-\u6E90\u7801\u89E3\u6790" aria-hidden="true">#</a> 6.8.6 JDK \u6E90\u7801\u89E3\u6790</h3>
<p>\u8FED\u4EE3\u5668\u6A21\u5F0F\u5728 JAVA \u7684\u5F88\u591A\u96C6\u5408\u7C7B\u4E2D\u88AB\u5E7F\u6CDB\u5E94\u7528\uFF0C\u63A5\u4E0B\u6765\u770B\u770B JAVA \u6E90\u7801\u4E2D\u662F\u5982\u4F55\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//list.iterator()\u65B9\u6CD5\u8FD4\u56DE\u7684\u80AF\u5B9A\u662FIterator\u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u770B\u5B8C\u8FD9\u6BB5\u4EE3\u7801\u662F\u4E0D\u662F\u5F88\u719F\u6089\uFF0C\u4E0E\u6211\u4EEC\u4E0A\u9762\u4EE3\u7801\u57FA\u672C\u7C7B\u4F3C\u3002\u5355\u5217\u96C6\u5408\u90FD\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\uFF0C\u6211\u4EEC\u4EE5 ArrayList \u4E3E\u4F8B\u6765\u8BF4\u660E</p>
<ul>
<li>List\uFF1A\u62BD\u8C61\u805A\u5408\u7C7B</li>
<li>ArrayList\uFF1A\u5177\u4F53\u7684\u805A\u5408\u7C7B</li>
<li>Iterator\uFF1A\u62BD\u8C61\u8FED\u4EE3\u5668</li>
<li>list.iterator()\uFF1A\u8FD4\u56DE\u7684\u662F\u5B9E\u73B0\u4E86 <code v-pre>Iterator</code> \u63A5\u53E3\u7684\u5177\u4F53\u8FED\u4EE3\u5668\u5BF9\u8C61</li>
</ul>
<p>\u5177\u4F53\u7684\u6765\u770B\u770B ArrayList \u7684\u4EE3\u7801\u5B9E\u73B0</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span>
        <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>       <span class="token comment">// \u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// \u4E0A\u4E00\u4E2A\u8FD4\u56DE\u5143\u7D20\u7684\u7D22\u5F15</span>
        <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>

        <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token comment">//\u5224\u65AD\u662F\u5426\u8FD8\u6709\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> cursor <span class="token operator">!=</span> size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20</span>
        <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> size<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cursor <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u90E8\u5206\u4EE3\u7801\u8FD8\u662F\u6BD4\u8F83\u7B80\u5355\uFF0C\u5927\u81F4\u5C31\u662F\u5728 <code v-pre>iterator</code> \u65B9\u6CD5\u4E2D\u8FD4\u56DE\u4E86\u4E00\u4E2A\u5B9E\u4F8B\u5316\u7684 <code v-pre>Iterator</code> \u5BF9\u8C61\u3002Itr \u662F\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u5B83\u5B9E\u73B0\u4E86 <code v-pre>Iterator</code> \u63A5\u53E3\u5E76\u91CD\u5199\u4E86\u5176\u4E2D\u7684\u62BD\u8C61\u65B9\u6CD5\u3002</p>
<blockquote>
<p>\u6CE8\u610F\uFF1A</p>
<p>\u200B \u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JAVA \u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u60F3\u4F7F\u7528\u8FED\u4EE3\u5668\u6A21\u5F0F\u7684\u8BDD\uFF0C\u53EA\u8981\u8BA9\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684\u5BB9\u5668\u7C7B\u5B9E\u73B0<code v-pre>java.util.Iterable</code>\u5E76\u5B9E\u73B0\u5176\u4E2D\u7684 iterator()\u65B9\u6CD5\u4F7F\u5176\u8FD4\u56DE\u4E00\u4E2A <code v-pre>java.util.Iterator</code> \u7684\u5B9E\u73B0\u7C7B\u5C31\u53EF\u4EE5\u4E86\u3002</p>
</blockquote>
<h2 id="_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-9-\u8BBF\u95EE\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 6.9 \u8BBF\u95EE\u8005\u6A21\u5F0F</h2>
<h3 id="_6-9-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-9-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.9.1 \u6982\u8FF0</h3>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u5C01\u88C5\u4E00\u4E9B\u4F5C\u7528\u4E8E\u67D0\u79CD\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u5404\u5143\u7D20\u7684\u64CD\u4F5C\uFF0C\u5B83\u53EF\u4EE5\u5728\u4E0D\u6539\u53D8\u8FD9\u4E2A\u6570\u636E\u7ED3\u6784\u7684\u524D\u63D0\u4E0B\u5B9A\u4E49\u4F5C\u7528\u4E8E\u8FD9\u4E9B\u5143\u7D20\u7684\u65B0\u7684\u64CD\u4F5C\u3002</p>
<h3 id="_6-9-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-9-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.9.2 \u7ED3\u6784</h3>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272:</p>
<ul>
<li>\u62BD\u8C61\u8BBF\u95EE\u8005\uFF08Visitor\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20<code v-pre>\uFF08Element\uFF09</code>\u8BBF\u95EE\u7684\u884C\u4E3A\uFF0C\u5B83\u7684\u53C2\u6570\u5C31\u662F\u53EF\u4EE5\u8BBF\u95EE\u7684\u5143\u7D20\uFF0C\u5B83\u7684\u65B9\u6CD5\u4E2A\u6570\u7406\u8BBA\u4E0A\u6765\u8BB2\u4E0E\u5143\u7D20\u7C7B\u4E2A\u6570\uFF08Element \u7684\u5B9E\u73B0\u7C7B\u4E2A\u6570\uFF09\u662F\u4E00\u6837\u7684\uFF0C\u4ECE\u8FD9\u70B9\u4E0D\u96BE\u770B\u51FA\uFF0C\u8BBF\u95EE\u8005\u6A21\u5F0F\u8981\u6C42\u5143\u7D20\u7C7B\u7684\u4E2A\u6570\u4E0D\u80FD\u6539\u53D8\u3002</li>
<li>\u5177\u4F53\u8BBF\u95EE\u8005\uFF08ConcreteVisitor\uFF09\u89D2\u8272\uFF1A\u7ED9\u51FA\u5BF9\u6BCF\u4E00\u4E2A\u5143\u7D20\u7C7B\u8BBF\u95EE\u65F6\u6240\u4EA7\u751F\u7684\u5177\u4F53\u884C\u4E3A\u3002</li>
<li>\u62BD\u8C61\u5143\u7D20\uFF08Element\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u4E86\u4E00\u4E2A\u63A5\u53D7\u8BBF\u95EE\u8005\u7684\u65B9\u6CD5\uFF08<code v-pre>accept</code>\uFF09\uFF0C\u5176\u610F\u4E49\u662F\u6307\uFF0C\u6BCF\u4E00\u4E2A\u5143\u7D20\u90FD\u8981\u53EF\u4EE5\u88AB\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li>
<li>\u5177\u4F53\u5143\u7D20\uFF08ConcreteElement\uFF09\u89D2\u8272\uFF1A \u63D0\u4F9B\u63A5\u53D7\u8BBF\u95EE\u65B9\u6CD5\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u800C\u8FD9\u4E2A\u5177\u4F53\u7684\u5B9E\u73B0\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528\u8BBF\u95EE\u8005\u63D0\u4F9B\u7684\u8BBF\u95EE\u8BE5\u5143\u7D20\u7C7B\u7684\u65B9\u6CD5\u3002</li>
<li>\u5BF9\u8C61\u7ED3\u6784\uFF08Object Structure\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u5F53\u4E2D\u6240\u63D0\u5230\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u5BF9\u8C61\u7ED3\u6784\u662F\u4E00\u4E2A\u62BD\u8C61\u8868\u8FF0\uFF0C\u5177\u4F53\u70B9\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u5177\u6709\u5BB9\u5668\u6027\u8D28\u6216\u8005\u590D\u5408\u5BF9\u8C61\u7279\u6027\u7684\u7C7B\uFF0C\u5B83\u4F1A\u542B\u6709\u4E00\u7EC4\u5143\u7D20\uFF08<code v-pre>Element</code>\uFF09\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8FED\u4EE3\u8FD9\u4E9B\u5143\u7D20\uFF0C\u4F9B\u8BBF\u95EE\u8005\u8BBF\u95EE\u3002</li>
</ul>
<h3 id="_6-9-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-9-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.9.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u7ED9\u5BA0\u7269\u5582\u98DF</p>
<p>\u73B0\u5728\u517B\u5BA0\u7269\u7684\u4EBA\u7279\u522B\u591A\uFF0C\u6211\u4EEC\u5C31\u4EE5\u8FD9\u4E2A\u4E3A\u4F8B\uFF0C\u5F53\u7136\u5BA0\u7269\u8FD8\u5206\u4E3A\u72D7\uFF0C\u732B\u7B49\uFF0C\u8981\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u8BDD\uFF0C\u4E3B\u4EBA\u53EF\u4EE5\u5582\uFF0C\u5176\u4ED6\u4EBA\u4E5F\u53EF\u4EE5\u5582\u98DF\u3002</p>
<ul>
<li>\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u7ED9\u5BA0\u7269\u5582\u98DF\u7684\u4EBA</li>
<li>\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF1A\u4E3B\u4EBA\u3001\u5176\u4ED6\u4EBA</li>
<li>\u62BD\u8C61\u5143\u7D20\u89D2\u8272\uFF1A\u52A8\u7269\u62BD\u8C61\u7C7B</li>
<li>\u5177\u4F53\u5143\u7D20\u89D2\u8272\uFF1A\u5BA0\u7269\u72D7\u3001\u5BA0\u7269\u732B</li>
<li>\u7ED3\u6784\u5BF9\u8C61\u89D2\u8272\uFF1A\u4E3B\u4EBA\u5BB6</li>
</ul>
<p>\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<p><img src="\\img\\\u8BBF\u95EE\u8005\u6A21\u5F0F.png" alt=""></p>
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u521B\u5EFA\u62BD\u8C61\u8BBF\u95EE\u8005\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E0D\u540C\u7684\u5177\u4F53\u8BBF\u95EE\u8005\u89D2\u8272\uFF08\u4E3B\u4EBA\u548C\u5176\u4ED6\u4EBA\uFF09\uFF0C\u90FD\u9700\u8981\u5B9E\u73B0 <code v-pre>Person</code>\u63A5\u53E3</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Owner</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E3B\u4EBA\u5582\u98DF\u732B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u4E3B\u4EBA\u5582\u98DF\u72D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Someone</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5176\u4ED6\u4EBA\u5582\u98DF\u732B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u5176\u4ED6\u4EBA\u5582\u98DF\u72D7"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u62BD\u8C61\u8282\u70B9 -- \u5BA0\u7269</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5B9E\u73B0<code v-pre>Animal</code>\u63A5\u53E3\u7684 \u5177\u4F53\u8282\u70B9\uFF08\u5143\u7D20\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u597D\u597D\u5403\uFF0C\u6C6A\u6C6A\u6C6A\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u597D\u597D\u5403\uFF0C\u55B5\u55B5\u55B5\uFF01\uFF01\uFF01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u5BF9\u8C61\u7ED3\u6784\uFF0C\u6B64\u6848\u4F8B\u4E2D\u5C31\u662F\u4E3B\u4EBA\u7684\u5BB6</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">></span></span> nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span> node <span class="token operator">:</span> nodeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6DFB\u52A0\u64CD\u4F5C</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nodeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Home</span> home <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Owner</span> owner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Someone</span> someone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Someone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-9-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-9-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.9.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u6269\u5C55\u6027\u597D</p>
<p>\u5728\u4E0D\u4FEE\u6539\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5143\u7D20\u6DFB\u52A0\u65B0\u7684\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u590D\u7528\u6027\u597D</p>
<p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5B9A\u4E49\u6574\u4E2A\u5BF9\u8C61\u7ED3\u6784\u901A\u7528\u7684\u529F\u80FD\uFF0C\u4ECE\u800C\u63D0\u9AD8\u590D\u7528\u7A0B\u5EA6\u3002</p>
</li>
<li>
<p>\u5206\u79BB\u65E0\u5173\u884C\u4E3A</p>
<p>\u901A\u8FC7\u8BBF\u95EE\u8005\u6765\u5206\u79BB\u65E0\u5173\u7684\u884C\u4E3A\uFF0C\u628A\u76F8\u5173\u7684\u884C\u4E3A\u5C01\u88C5\u5728\u4E00\u8D77\uFF0C\u6784\u6210\u4E00\u4E2A\u8BBF\u95EE\u8005\uFF0C\u8FD9\u6837\u6BCF\u4E00\u4E2A\u8BBF\u95EE\u8005\u7684\u529F\u80FD\u90FD\u6BD4\u8F83\u5355\u4E00\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u53D8\u5316\u5F88\u56F0\u96BE</p>
<p>\u5728\u8BBF\u95EE\u8005\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u5143\u7D20\u7C7B\uFF0C\u90FD\u8981\u5728\u6BCF\u4E00\u4E2A\u5177\u4F53\u8BBF\u95EE\u8005\u7C7B\u4E2D\u589E\u52A0\u76F8\u5E94\u7684\u5177\u4F53\u64CD\u4F5C\uFF0C\u8FD9\u8FDD\u80CC\u4E86\u201C\u5F00\u95ED\u539F\u5219\u201D\u3002</p>
</li>
<li>
<p>\u8FDD\u53CD\u4E86\u4F9D\u8D56\u5012\u7F6E\u539F\u5219</p>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u4F9D\u8D56\u4E86\u5177\u4F53\u7C7B\uFF0C\u800C\u6CA1\u6709\u4F9D\u8D56\u62BD\u8C61\u7C7B\u3002</p>
</li>
</ul>
<h3 id="_6-9-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-9-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.9.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u5176\u64CD\u4F5C\u7B97\u6CD5\u7ECF\u5E38\u53D8\u5316\u7684\u7A0B\u5E8F\u3002</p>
</li>
<li>
<p>\u5BF9\u8C61\u7ED3\u6784\u4E2D\u7684\u5BF9\u8C61\u9700\u8981\u63D0\u4F9B\u591A\u79CD\u4E0D\u540C\u4E14\u4E0D\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8981\u907F\u514D\u8BA9\u8FD9\u4E9B\u64CD\u4F5C\u7684\u53D8\u5316\u5F71\u54CD\u5BF9\u8C61\u7684\u7ED3\u6784\u3002</p>
</li>
</ul>
<h3 id="_6-9-6-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#_6-9-6-\u6269\u5C55" aria-hidden="true">#</a> 6.9.6 \u6269\u5C55</h3>
<p>\u8BBF\u95EE\u8005\u6A21\u5F0F\u7528\u5230\u4E86\u4E00\u79CD\u53CC\u5206\u6D3E\u7684\u6280\u672F\u3002</p>
<p><strong>1\uFF0C\u5206\u6D3E\uFF1A</strong></p>
<p>\u53D8\u91CF\u88AB\u58F0\u660E\u65F6\u7684\u7C7B\u578B\u53EB\u505A\u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u6709\u4E9B\u4EBA\u53C8\u628A\u9759\u6001\u7C7B\u578B\u53EB\u505A\u660E\u663E\u7C7B\u578B\uFF1B\u800C\u53D8\u91CF\u6240\u5F15\u7528\u7684\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\u53C8\u53EB\u505A\u53D8\u91CF\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u6BD4\u5982 <code v-pre>Map map = new HashMap()</code> \uFF0Cmap \u53D8\u91CF\u7684\u9759\u6001\u7C7B\u578B\u662F <code v-pre>Map</code> \uFF0C\u5B9E\u9645\u7C7B\u578B\u662F <code v-pre>HashMap</code> \u3002\u6839\u636E\u5BF9\u8C61\u7684\u7C7B\u578B\u800C\u5BF9\u65B9\u6CD5\u8FDB\u884C\u7684\u9009\u62E9\uFF0C\u5C31\u662F\u5206\u6D3E(Dispatch)\uFF0C\u5206\u6D3E(Dispatch)\u53C8\u5206\u4E3A\u4E24\u79CD\uFF0C\u5373\u9759\u6001\u5206\u6D3E\u548C\u52A8\u6001\u5206\u6D3E\u3002</p>
<p><strong>\u9759\u6001\u5206\u6D3E(Static Dispatch)</strong> \u53D1\u751F\u5728\u7F16\u8BD1\u65F6\u671F\uFF0C\u5206\u6D3E\u6839\u636E\u9759\u6001\u7C7B\u578B\u4FE1\u606F\u53D1\u751F\u3002\u9759\u6001\u5206\u6D3E\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\u5E76\u4E0D\u964C\u751F\uFF0C\u65B9\u6CD5\u91CD\u8F7D\u5C31\u662F\u9759\u6001\u5206\u6D3E\u3002</p>
<p><strong>\u52A8\u6001\u5206\u6D3E(Dynamic Dispatch)</strong> \u53D1\u751F\u5728\u8FD0\u884C\u65F6\u671F\uFF0C\u52A8\u6001\u5206\u6D3E\u52A8\u6001\u5730\u7F6E\u6362\u6389\u67D0\u4E2A\u65B9\u6CD5\u3002Java \u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p>
<p><strong>2\uFF0C\u52A8\u6001\u5206\u6D3E\uFF1A</strong></p>
<p>\u901A\u8FC7\u65B9\u6CD5\u7684\u91CD\u5199\u652F\u6301\u52A8\u6001\u5206\u6D3E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
   	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u7684\u7ED3\u679C\u5927\u5BB6\u5E94\u8BE5\u76F4\u63A5\u53EF\u4EE5\u8BF4\u51FA\u6765\uFF0C\u8FD9\u4E0D\u5C31\u662F\u591A\u6001\u5417\uFF01\u8FD0\u884C\u6267\u884C\u7684\u662F\u5B50\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002</p>
<p>Java \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u65F6\u671F\u5E76\u4E0D\u603B\u662F\u77E5\u9053\u54EA\u4E9B\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u4EC5\u4EC5\u77E5\u9053\u5BF9\u8C61\u7684\u9759\u6001\u7C7B\u578B\uFF0C\u800C\u4E0D\u77E5\u9053\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF1B\u800C\u65B9\u6CD5\u7684\u8C03\u7528\u5219\u662F\u6839\u636E\u5BF9\u8C61\u7684\u771F\u5B9E\u7C7B\u578B\uFF0C\u800C\u4E0D\u662F\u9759\u6001\u7C7B\u578B\u3002</p>
<p><strong>3\uFF0C\u9759\u6001\u5206\u6D3E\uFF1A</strong></p>
<p>\u901A\u8FC7\u65B9\u6CD5\u91CD\u8F7D\u652F\u6301\u9759\u6001\u5206\u6D3E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u7ED3\u679C\uFF1A</p>
<img src="/img/image-20200214215446638.png" style="zoom:70%;" />
<p>\u8FD9\u4E2A\u7ED3\u679C\u53EF\u80FD\u51FA\u4E4E\u4E00\u4E9B\u4EBA\u7684\u610F\u6599\u4E86\uFF0C\u4E3A\u4EC0\u4E48\u5462\uFF1F</p>
<p><strong>\u91CD\u8F7D\u65B9\u6CD5\u7684\u5206\u6D3E\u662F\u6839\u636E\u9759\u6001\u7C7B\u578B\u8FDB\u884C\u7684\uFF0C\u8FD9\u4E2A\u5206\u6D3E\u8FC7\u7A0B\u5728\u7F16\u8BD1\u65F6\u671F\u5C31\u5B8C\u6210\u4E86\u3002</strong></p>
<p><strong>4\uFF0C\u53CC\u5206\u6D3E\uFF1A</strong></p>
<p>\u6240\u8C13\u53CC\u5206\u6D3E\u6280\u672F\u5C31\u662F\u5728\u9009\u62E9\u4E00\u4E2A\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u4E0D\u4EC5\u4EC5\u8981\u6839\u636E\u6D88\u606F\u63A5\u6536\u8005\uFF08receiver\uFF09\u7684\u8FD0\u884C\u65F6\u533A\u522B\uFF0C\u8FD8\u8981\u6839\u636E\u53C2\u6570\u7684\u8FD0\u884C\u65F6\u533A\u522B\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u5C06 Execute \u5BF9\u8C61\u505A\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9 Animal \u7C7B\u578B\u7684\u53D8\u91CF\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u8FD9\u91CC\u5B8C\u6210\u7B2C\u4E00\u6B21\u5206\u6D3E\uFF0C\u8FD9\u91CC\u662F\u65B9\u6CD5\u91CD\u5199\uFF0C\u6240\u4EE5\u662F\u52A8\u6001\u5206\u6D3E\uFF0C\u4E5F\u5C31\u662F\u6267\u884C\u5B9E\u9645\u7C7B\u578B\u4E2D\u7684\u65B9\u6CD5\uFF0C\u540C\u65F6\u4E5F<code v-pre>\u5C06\u81EA\u5DF1this\u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF0C\u8FD9\u91CC\u5C31\u5B8C\u6210\u4E86\u7B2C\u4E8C\u6B21\u5206\u6D3E</code>\uFF0C\u8FD9\u91CC\u7684 Execute \u7C7B\u4E2D\u6709\u591A\u4E2A\u91CD\u8F7D\u7684\u65B9\u6CD5\uFF0C\u800C\u4F20\u9012\u8FDB\u884C\u7684\u662F this\uFF0C\u5C31\u662F\u5177\u4F53\u7684\u5B9E\u9645\u7C7B\u578B\u7684\u5BF9\u8C61\u3002</p>
<p>\u8BF4\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u660E\u767D\u53CC\u5206\u6D3E\u662F\u600E\u4E48\u56DE\u4E8B\u4E86\uFF0C\u4F46\u662F\u5B83\u6709\u4EC0\u4E48\u6548\u679C\u5462\uFF1F\u5C31\u662F\u53EF\u4EE5\u5B9E\u73B0\u65B9\u6CD5\u7684\u52A8\u6001\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u4E0A\u9762\u7684\u7A0B\u5E8F\u8FDB\u884C\u4FEE\u6539\u3002</p>
<p>\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200426233931693.png" style="zoom:67%;" />
<p><strong>\u53CC\u5206\u6D3E\u5B9E\u73B0\u52A8\u6001\u7ED1\u5B9A\u7684\u672C\u8D28\uFF0C\u5C31\u662F\u5728\u91CD\u8F7D\u65B9\u6CD5\u59D4\u6D3E\u7684\u524D\u9762\u52A0\u4E0A\u4E86\u7EE7\u627F\u4F53\u7CFB\u4E2D\u8986\u76D6\u7684\u73AF\u8282\uFF0C\u7531\u4E8E\u8986\u76D6\u662F\u52A8\u6001\u7684\uFF0C\u6240\u4EE5\u91CD\u8F7D\u5C31\u662F\u52A8\u6001\u7684\u4E86\u3002</strong></p>
<h2 id="_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10 \u5907\u5FD8\u5F55\u6A21\u5F0F</h2>
<h3 id="_6-10-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-10-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.10.1 \u6982\u8FF0</h3>
<p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u63D0\u4F9B\u4E86\u4E00\u79CD\u72B6\u6001\u6062\u590D\u7684\u5B9E\u73B0\u673A\u5236\uFF0C\u4F7F\u5F97\u7528\u6237\u53EF\u4EE5\u65B9\u4FBF\u5730\u56DE\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u5386\u53F2\u6B65\u9AA4\uFF0C\u5F53\u65B0\u7684\u72B6\u6001\u65E0\u6548\u6216\u8005\u5B58\u5728\u95EE\u9898\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6682\u65F6\u5B58\u50A8\u8D77\u6765\u7684\u5907\u5FD8\u5F55\u5C06\u72B6\u6001\u590D\u539F\uFF0C\u5F88\u591A\u8F6F\u4EF6\u90FD\u63D0\u4F9B\u4E86\u64A4\u9500\uFF08Undo\uFF09\u64CD\u4F5C\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\u3001IDEA \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\u65F6\u80FD\u64A4\u9500\u5F53\u524D\u64CD\u4F5C\uFF0C\u4F7F\u6587\u6863\u6062\u590D\u5230\u4E4B\u524D\u7684\u72B6\u6001\uFF1B\u8FD8\u6709\u5728 \u6D4F\u89C8\u5668 \u4E2D\u7684\u540E\u9000\u952E\u3001\u6570\u636E\u5E93\u4E8B\u52A1\u7BA1\u7406\u4E2D\u7684\u56DE\u6EDA\u64CD\u4F5C\u3001\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u5B58\u6863\u529F\u80FD\u3001\u6570\u636E\u5E93\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u5907\u4EFD\u64CD\u4F5C\u3001\u68CB\u7C7B\u6E38\u620F\u4E2D\u7684\u6094\u68CB\u529F\u80FD\u7B49\u90FD\u5C5E\u4E8E\u8FD9\u7C7B\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<p>\u53C8\u53EB\u5FEB\u7167\u6A21\u5F0F\uFF0C\u5728\u4E0D\u7834\u574F\u5C01\u88C5\u6027\u7684\u524D\u63D0\u4E0B\uFF0C\u6355\u83B7\u4E00\u4E2A\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u5BF9\u8C61\u4E4B\u5916\u4FDD\u5B58\u8FD9\u4E2A\u72B6\u6001\uFF0C\u4EE5\u4FBF\u4EE5\u540E\u5F53\u9700\u8981\u65F6\u80FD\u5C06\u8BE5\u5BF9\u8C61\u6062\u590D\u5230\u539F\u5148\u4FDD\u5B58\u7684\u72B6\u6001\u3002</p>
<h3 id="_6-10-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-10-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.10.2 \u7ED3\u6784</h3>
<p>\u5907\u5FD8\u5F55\u6A21\u5F0F\u7684\u4E3B\u8981\u89D2\u8272\u5982\u4E0B\uFF1A</p>
<ul>
<li>\u53D1\u8D77\u4EBA\uFF08Originator\uFF09\u89D2\u8272\uFF1A\u8BB0\u5F55\u5F53\u524D\u65F6\u523B\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\uFF0C\u63D0\u4F9B\u521B\u5EFA\u5907\u5FD8\u5F55\u548C\u6062\u590D\u5907\u5FD8\u5F55\u6570\u636E\u7684\u529F\u80FD\uFF0C\u5B9E\u73B0\u5176\u4ED6\u4E1A\u52A1\u529F\u80FD\uFF0C\u5B83\u53EF\u4EE5\u8BBF\u95EE\u5907\u5FD8\u5F55\u91CC\u7684\u6240\u6709\u4FE1\u606F\u3002</li>
<li>\u5907\u5FD8\u5F55\uFF08Memento\uFF09\u89D2\u8272\uFF1A\u8D1F\u8D23\u5B58\u50A8\u53D1\u8D77\u4EBA\u7684\u5185\u90E8\u72B6\u6001\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u63D0\u4F9B\u8FD9\u4E9B\u5185\u90E8\u72B6\u6001\u7ED9\u53D1\u8D77\u4EBA\u3002</li>
<li>\u7BA1\u7406\u8005\uFF08Caretaker\uFF09\u89D2\u8272\uFF1A\u5BF9\u5907\u5FD8\u5F55\u8FDB\u884C\u7BA1\u7406\uFF0C\u63D0\u4F9B\u4FDD\u5B58\u4E0E\u83B7\u53D6\u5907\u5FD8\u5F55\u7684\u529F\u80FD\uFF0C\u4F46\u5176\u4E0D\u80FD\u5BF9\u5907\u5FD8\u5F55\u7684\u5185\u5BB9\u8FDB\u884C\u8BBF\u95EE\u4E0E\u4FEE\u6539\u3002</li>
</ul>
<blockquote>
<p>\u5907\u5FD8\u5F55\u6709\u4E24\u4E2A\u7B49\u6548\u7684\u63A5\u53E3\uFF1A</p>
<ul>
<li><strong>\u7A84\u63A5\u53E3</strong>\uFF1A\u7BA1\u7406\u8005(Caretaker)\u5BF9\u8C61\uFF08\u548C\u5176\u4ED6\u53D1\u8D77\u4EBA\u5BF9\u8C61\u4E4B\u5916\u7684\u4EFB\u4F55\u5BF9\u8C61\uFF09\u770B\u5230\u7684\u662F\u5907\u5FD8\u5F55\u7684\u7A84\u63A5\u53E3(narror Interface)\uFF0C\u8FD9\u4E2A\u7A84\u63A5\u53E3\u53EA\u5141\u8BB8\u4ED6\u628A\u5907\u5FD8\u5F55\u5BF9\u8C61\u4F20\u7ED9\u5176\u4ED6\u7684\u5BF9\u8C61\u3002</li>
<li><strong>\u5BBD\u63A5\u53E3</strong>\uFF1A\u4E0E\u7BA1\u7406\u8005\u770B\u5230\u7684\u7A84\u63A5\u53E3\u76F8\u53CD\uFF0C\u53D1\u8D77\u4EBA\u5BF9\u8C61\u53EF\u4EE5\u770B\u5230\u4E00\u4E2A\u5BBD\u63A5\u53E3(wide Interface)\uFF0C\u8FD9\u4E2A\u5BBD\u63A5\u53E3\u5141\u8BB8\u5B83\u8BFB\u53D6\u6240\u6709\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u6839\u636E\u8FD9\u4E9B\u6570\u636E\u6062\u590D\u8FD9\u4E2A\u53D1\u8D77\u4EBA\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u3002</li>
</ul>
</blockquote>
<h3 id="_6-10-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-10-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.10.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u6E38\u620F\u6311\u6218 BOSS</p>
<p>\u6E38\u620F\u4E2D\u7684\u67D0\u4E2A\u573A\u666F\uFF0C\u4E00\u6E38\u620F\u89D2\u8272\u6709\u751F\u547D\u529B\u3001\u653B\u51FB\u529B\u3001\u9632\u5FA1\u529B\u7B49\u6570\u636E\uFF0C\u5728\u6253 Boss \u524D\u548C\u540E\u4E00\u5B9A\u4F1A\u4E0D\u4E00\u6837\u7684\uFF0C\u6211\u4EEC\u5141\u8BB8\u73A9\u5BB6\u5982\u679C\u611F\u89C9\u4E0E Boss \u51B3\u6597\u7684\u6548\u679C\u4E0D\u7406\u60F3\u53EF\u4EE5\u8BA9\u6E38\u620F\u6062\u590D\u5230\u51B3\u6597\u4E4B\u524D\u7684\u72B6\u6001\u3002</p>
<p>\u8981\u5B9E\u73B0\u4E0A\u8FF0\u6848\u4F8B\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A</p>
<ul>
<li>\u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
<li>\u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</li>
</ul>
<h4 id="_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-1-\u767D\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.1 \u201C\u767D\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4>
<p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u4EFB\u4F55\u5BF9\u8C61\u90FD\u63D0\u4F9B\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5373\u5BBD\u63A5\u53E3\uFF0C\u5907\u5FD8\u5F55\u89D2\u8272\u7684\u5185\u90E8\u6240\u5B58\u50A8\u7684\u72B6\u6001\u5C31\u5BF9\u6240\u6709\u5BF9\u8C61\u516C\u5F00\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u6E38\u620F\u89D2\u8272\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u751F\u547D\u529B\uFF1A"</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u653B\u51FB\u529B\uFF1A"</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u9632\u5FA1\u529B\uFF1A"</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6E38\u620F\u72B6\u6001\u5B58\u50A8\u7C7B(\u5907\u5FD8\u5F55\u7C7B)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u524D------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u540E------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u5206\u6790\uFF1A\u767D\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F\u662F\u7834\u574F\u5C01\u88C5\u6027\u7684\u3002\u4F46\u662F\u901A\u8FC7\u7A0B\u5E8F\u5458\u81EA\u5F8B\uFF0C\u540C\u6837\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u5B9E\u73B0\u6A21\u5F0F\u7684\u5927\u90E8\u5206\u7528\u610F\u3002</p>
</blockquote>
<h4 id="_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-10-3-2-\u9ED1\u7BB1-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 6.10.3.2 \u201C\u9ED1\u7BB1\u201D\u5907\u5FD8\u5F55\u6A21\u5F0F</h4>
<p>\u5907\u5FD8\u5F55\u89D2\u8272\u5BF9\u53D1\u8D77\u4EBA\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u5BBD\u63A5\u53E3\uFF0C\u800C\u4E3A\u5176\u4ED6\u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u7A84\u63A5\u53E3\u3002\u5728 Java \u8BED\u8A00\u4E2D\uFF0C\u5B9E\u73B0\u53CC\u91CD\u63A5\u53E3\u7684\u529E\u6CD5\u5C31\u662F\u5C06<strong>\u5907\u5FD8\u5F55\u7C7B</strong>\u8BBE\u8BA1\u6210<strong>\u53D1\u8D77\u4EBA\u7C7B</strong>\u7684\u5185\u90E8\u6210\u5458\u7C7B\u3002</p>
<p>\u5C06 <code v-pre>RoleStateMemento</code> \u8BBE\u4E3A <code v-pre>GameRole</code> \u7684\u5185\u90E8\u7C7B\uFF0C\u4ECE\u800C\u5C06 <code v-pre>RoleStateMemento</code> \u5BF9\u8C61\u5C01\u88C5\u5728 <code v-pre>GameRole</code> \u91CC\u9762\uFF1B\u5728\u5916\u9762\u63D0\u4F9B\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3 <code v-pre>Memento</code> \u7ED9 <code v-pre>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u4F7F\u7528\u3002\u8FD9\u6837 <code v-pre>GameRole</code> \u7C7B\u770B\u5230\u7684\u662F <code v-pre>RoleStateMemento</code> \u6240\u6709\u7684\u63A5\u53E3\uFF0C\u800C<code v-pre>RoleStateCaretaker</code> \u53CA\u5176\u4ED6\u5BF9\u8C61\u770B\u5230\u7684\u4EC5\u4EC5\u662F\u6807\u8BC6\u63A5\u53E3 <code v-pre>Memento</code> \u6240\u66B4\u9732\u51FA\u6765\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u7EF4\u62A4\u4E86\u5C01\u88C5\u578B\u3002\u7C7B\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/\u9ED1\u7BB1\u5907\u5FD8\u5F55\u6A21\u5F0F.png" style="zoom:70%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<p>\u7A84\u63A5\u53E3<code v-pre>Memento</code>\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u6CA1\u6709\u5B9A\u4E49\u51FA\u4EFB\u4F55\u7684\u65B9\u6CD5</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9A\u4E49\u53D1\u8D77\u4EBA\u7C7B <code v-pre>GameRole</code>\uFF0C\u5E76\u5728\u5185\u90E8\u5B9A\u4E49\u5907\u5FD8\u5F55\u5185\u90E8\u7C7B <code v-pre>RoleStateMemento</code>\uFF08\u8BE5\u5185\u90E8\u7C7B\u8BBE\u7F6E\u4E3A\u79C1\u6709\u7684\uFF09</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token operator">/</span>\u6E38\u620F\u89D2\u8272\u7C7B
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//\u751F\u547D\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//\u653B\u51FB\u529B</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//\u9632\u5FA1\u529B</span>

    <span class="token comment">//\u521D\u59CB\u5316\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6218\u6597</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FDD\u5B58\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u56DE\u590D\u89D2\u8272\u72B6\u6001</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RoleStateMemento</span> roleStateMemento <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span><span class="token punctuation">)</span> memento<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u751F\u547D\u529B\uFF1A"</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u653B\u51FB\u529B\uFF1A"</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"\u89D2\u8272\u9632\u5FA1\u529B\uFF1A"</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token keyword">implements</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8D1F\u8D23\u4EBA\u89D2\u8272\u7C7B <code v-pre>RoleStateCaretaker</code> \u80FD\u591F\u5F97\u5230\u7684\u5907\u5FD8\u5F55\u5BF9\u8C61\u662F\u4EE5 <code v-pre>Memento</code> \u4E3A\u63A5\u53E3\u7684\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u63A5\u53E3\u4EC5\u4EC5\u662F\u4E00\u4E2A\u6807\u8BC6\u63A5\u53E3\uFF0C\u56E0\u6B64\u8D1F\u8D23\u4EBA\u89D2\u8272\u4E0D\u53EF\u80FD\u6539\u53D8\u8FD9\u4E2A\u5907\u5FD8\u5F55\u5BF9\u8C61\u7684\u5185\u5BB9</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u89D2\u8272\u72B6\u6001\u7BA1\u7406\u8005\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u6D4B\u8BD5\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u524D------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u524D</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u4FDD\u5B58\u8FDB\u5EA6</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u5927\u6218Boss\u540E------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5927\u6218Boss\u65F6\uFF0C\u635F\u8017\u4E25\u91CD</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------\u6062\u590D\u4E4B\u524D\u72B6\u6001------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6062\u590D\u4E4B\u524D\u72B6\u6001</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-10-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-10-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.10.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>\u63D0\u4F9B\u4E86\u4E00\u79CD\u53EF\u4EE5\u6062\u590D\u72B6\u6001\u7684\u673A\u5236\u3002\u5F53\u7528\u6237\u9700\u8981\u65F6\u80FD\u591F\u6BD4\u8F83\u65B9\u4FBF\u5730\u5C06\u6570\u636E\u6062\u590D\u5230\u67D0\u4E2A\u5386\u53F2\u7684\u72B6\u6001\u3002</li>
<li>\u5B9E\u73B0\u4E86\u5185\u90E8\u72B6\u6001\u7684\u5C01\u88C5\u3002\u9664\u4E86\u521B\u5EFA\u5B83\u7684\u53D1\u8D77\u4EBA\u4E4B\u5916\uFF0C\u5176\u4ED6\u5BF9\u8C61\u90FD\u4E0D\u80FD\u591F\u8BBF\u95EE\u8FD9\u4E9B\u72B6\u6001\u4FE1\u606F\u3002</li>
<li>\u7B80\u5316\u4E86\u53D1\u8D77\u4EBA\u7C7B\u3002\u53D1\u8D77\u4EBA\u4E0D\u9700\u8981\u7BA1\u7406\u548C\u4FDD\u5B58\u5176\u5185\u90E8\u72B6\u6001\u7684\u5404\u4E2A\u5907\u4EFD\uFF0C\u6240\u6709\u72B6\u6001\u4FE1\u606F\u90FD\u4FDD\u5B58\u5728\u5907\u5FD8\u5F55\u4E2D\uFF0C\u5E76\u7531\u7BA1\u7406\u8005\u8FDB\u884C\u7BA1\u7406\uFF0C\u8FD9\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>\u8D44\u6E90\u6D88\u8017\u5927\u3002\u5982\u679C\u8981\u4FDD\u5B58\u7684\u5185\u90E8\u72B6\u6001\u4FE1\u606F\u8FC7\u591A\u6216\u8005\u7279\u522B\u9891\u7E41\uFF0C\u5C06\u4F1A\u5360\u7528\u6BD4\u8F83\u5927\u7684\u5185\u5B58\u8D44\u6E90\u3002</li>
</ul>
<h3 id="_6-10-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-10-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.10.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u9700\u8981\u4FDD\u5B58\u4E0E\u6062\u590D\u6570\u636E\u7684\u573A\u666F\uFF0C\u5982\u73A9\u6E38\u620F\u65F6\u7684\u4E2D\u95F4\u7ED3\u679C\u7684\u5B58\u6863\u529F\u80FD\u3002</p>
</li>
<li>
<p>\u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u53EF\u56DE\u6EDA\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u5982 Word\u3001\u8BB0\u4E8B\u672C\u3001Photoshop\uFF0Cidea \u7B49\u8F6F\u4EF6\u5728\u7F16\u8F91\u65F6\u6309 Ctrl+Z \u7EC4\u5408\u952E\uFF0C\u8FD8\u6709\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u64CD\u4F5C\u3002</p>
</li>
</ul>
<h2 id="_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_6-11-\u89E3\u91CA\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 6.11 \u89E3\u91CA\u5668\u6A21\u5F0F</h2>
<h3 id="_6-11-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-11-1-\u6982\u8FF0" aria-hidden="true">#</a> 6.11.1 \u6982\u8FF0</h3>
<img src="/img/image-20200215220322641.png" style="zoom:60%;" />
<p>\u5982\u4E0A\u56FE\uFF0C\u8BBE\u8BA1\u4E00\u4E2A\u8F6F\u4EF6\u7528\u6765\u8FDB\u884C\u52A0\u51CF\u8BA1\u7B97\u3002\u6211\u4EEC\u7B2C\u4E00\u60F3\u6CD5\u5C31\u662F\u4F7F\u7528\u5DE5\u5177\u7C7B\uFF0C\u63D0\u4F9B\u5BF9\u5E94\u7684\u52A0\u6CD5\u548C\u51CF\u6CD5\u7684\u5DE5\u5177\u65B9\u6CD5\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8E\u4E24\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7528\u4E8En\u4E2A\u6574\u6570\u76F8\u52A0</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> i <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u5F62\u5F0F\u6BD4\u8F83\u5355\u4E00\u3001\u6709\u9650\uFF0C\u5982\u679C\u5F62\u5F0F\u53D8\u5316\u975E\u5E38\u591A\uFF0C\u8FD9\u5C31\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u56E0\u4E3A\u52A0\u6CD5\u548C\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u4E24\u4E2A\u8FD0\u7B97\u7B26\u4E0E\u6570\u503C\u53EF\u4EE5\u6709\u65E0\u9650\u79CD\u7EC4\u5408\u65B9\u5F0F\u3002\u6BD4\u5982 1+2+3+4+5\u30011+2+3-4 \u7B49\u7B49\u3002</p>
<p>\u663E\u7136\uFF0C\u73B0\u5728\u9700\u8981\u4E00\u79CD\u7FFB\u8BD1\u8BC6\u522B\u673A\u5668\uFF0C\u80FD\u591F\u89E3\u6790\u7531\u6570\u5B57\u4EE5\u53CA + - \u7B26\u53F7\u6784\u6210\u7684\u5408\u6CD5\u7684\u8FD0\u7B97\u5E8F\u5217\u3002\u5982\u679C\u628A\u8FD0\u7B97\u7B26\u548C\u6570\u5B57\u90FD\u770B\u4F5C\u8282\u70B9\u7684\u8BDD\uFF0C\u80FD\u591F\u9010\u4E2A\u8282\u70B9\u7684\u8FDB\u884C\u8BFB\u53D6\u89E3\u6790\u8FD0\u7B97\uFF0C\u8FD9\u5C31\u662F\u89E3\u91CA\u5668\u6A21\u5F0F\u7684\u601D\u7EF4\u3002</p>
<p><strong>\u5B9A\u4E49\uFF1A</strong></p>
<blockquote>
<p>\u7ED9\u5B9A\u4E00\u4E2A\u8BED\u8A00\uFF0C\u5B9A\u4E49\u5B83\u7684\u6587\u6CD5\u8868\u793A\uFF0C\u5E76\u5B9A\u4E49\u4E00\u4E2A\u89E3\u91CA\u5668\uFF0C\u8FD9\u4E2A\u89E3\u91CA\u5668\u4F7F\u7528\u8BE5\u6807\u8BC6\u6765\u89E3\u91CA\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u3002</p>
</blockquote>
<p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06\u5F85\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u63D0\u53D6\u51FA\u89C4\u5219\uFF0C\u62BD\u8C61\u4E3A\u4E00\u79CD\u201C\u8BED\u8A00\u201D\u3002\u6BD4\u5982\u52A0\u51CF\u6CD5\u8FD0\u7B97\uFF0C\u89C4\u5219\u4E3A\uFF1A\u7531\u6570\u503C\u548C+-\u7B26\u53F7\u7EC4\u6210\u7684\u5408\u6CD5\u5E8F\u5217\uFF0C\u201C1+3-2\u201D \u5C31\u662F\u8FD9\u79CD\u8BED\u8A00\u7684\u53E5\u5B50\u3002</p>
<p>\u89E3\u91CA\u5668\u5C31\u662F\u8981\u89E3\u6790\u51FA\u6765\u8BED\u53E5\u7684\u542B\u4E49\u3002\u4F46\u662F\u5982\u4F55\u63CF\u8FF0\u89C4\u5219\u5462\uFF1F</p>
<p><strong>\u6587\u6CD5\uFF08\u8BED\u6CD5\uFF09\u89C4\u5219\uFF1A</strong></p>
<p>\u6587\u6CD5\u662F\u7528\u4E8E\u63CF\u8FF0\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\u7684\u5F62\u5F0F\u89C4\u5219\u3002</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>expression ::= value | plus | minus
plus ::= expression \u2018+\u2019 expression
minus ::= expression \u2018-\u2019 expression
value ::= integer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A \u8FD9\u91CC\u7684\u7B26\u53F7\u201C::=\u201D\u8868\u793A\u201C\u5B9A\u4E49\u4E3A\u201D\u7684\u610F\u601D\uFF0C\u7AD6\u7EBF | \u8868\u793A\u6216\uFF0C\u5DE6\u53F3\u7684\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5F15\u53F7\u5185\u4E3A\u5B57\u7B26\u672C\u8EAB\uFF0C\u5F15\u53F7\u5916\u4E3A\u8BED\u6CD5\u3002</p>
</blockquote>
<p>\u4E0A\u9762\u89C4\u5219\u63CF\u8FF0\u4E3A \uFF1A</p>
<p>\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F plus \u6216\u8005 minus \u8FD0\u7B97\uFF0C\u800C plus \u548C minus \u53C8\u662F\u7531\u8868\u8FBE\u5F0F\u7ED3\u5408\u8FD0\u7B97\u7B26\u6784\u6210\uFF0C\u503C\u7684\u7C7B\u578B\u4E3A\u6574\u578B\u6570\u3002</p>
<p><strong>\u62BD\u8C61\u8BED\u6CD5\u6811\uFF1A</strong></p>
<p>\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AbstractSyntaxTree\uFF0CAST\uFF09\uFF0C\u6216\u7B80\u79F0\u8BED\u6CD5\u6811\uFF08Syntax tree\uFF09\uFF0C\u662F\u6E90\u4EE3\u7801\u8BED\u6CD5\u7ED3\u6784\u7684\u4E00\u79CD\u62BD\u8C61\u8868\u793A\u3002\u5B83\u4EE5\u6811\u72B6\u7684\u5F62\u5F0F\u8868\u73B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BED\u6CD5\u7ED3\u6784\uFF0C\u6811\u4E0A\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u8868\u793A\u6E90\u4EE3\u7801\u4E2D\u7684\u4E00\u79CD\u7ED3\u6784\u3002</p>
<p>\u7528\u6811\u5F62\u6765\u8868\u793A\u7B26\u5408\u6587\u6CD5\u89C4\u5219\u7684\u53E5\u5B50\u3002</p>
<img src="/img/image-20200215225227616.png" style="zoom:50%;" />
<h3 id="_6-11-2-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_6-11-2-\u7ED3\u6784" aria-hidden="true">#</a> 6.11.2 \u7ED3\u6784</h3>
<p>\u89E3\u91CA\u5668\u6A21\u5F0F\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u89D2\u8272\u3002</p>
<ul>
<li>
<p>\u62BD\u8C61\u8868\u8FBE\u5F0F\uFF08Abstract Expression\uFF09\u89D2\u8272\uFF1A\u5B9A\u4E49\u89E3\u91CA\u5668\u7684\u63A5\u53E3\uFF0C\u7EA6\u5B9A\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u64CD\u4F5C\uFF0C\u4E3B\u8981\u5305\u542B\u89E3\u91CA\u65B9\u6CD5 interpret()\u3002</p>
</li>
<li>
<p>\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Terminal Expression\uFF09\u89D2\u8272\uFF1A\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u4E00\u4E2A\u7EC8\u7ED3\u7B26\u90FD\u6709\u4E00\u4E2A\u5177\u4F53\u7EC8\u7ED3\u8868\u8FBE\u5F0F\u4E0E\u4E4B\u76F8\u5BF9\u5E94\u3002</p>
</li>
<li>
<p>\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\uFF08Nonterminal Expression\uFF09\u89D2\u8272\uFF1A\u4E5F\u662F\u62BD\u8C61\u8868\u8FBE\u5F0F\u7684\u5B50\u7C7B\uFF0C\u7528\u6765\u5B9E\u73B0\u6587\u6CD5\u4E2D\u4E0E\u975E\u7EC8\u7ED3\u7B26\u76F8\u5173\u7684\u64CD\u4F5C\uFF0C\u6587\u6CD5\u4E2D\u7684\u6BCF\u6761\u89C4\u5219\u90FD\u5BF9\u5E94\u4E8E\u4E00\u4E2A\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u3002</p>
</li>
<li>
<p>\u73AF\u5883\uFF08Context\uFF09\u89D2\u8272\uFF1A\u901A\u5E38\u5305\u542B\u5404\u4E2A\u89E3\u91CA\u5668\u9700\u8981\u7684\u6570\u636E\u6216\u662F\u516C\u5171\u7684\u529F\u80FD\uFF0C\u4E00\u822C\u7528\u6765\u4F20\u9012\u88AB\u6240\u6709\u89E3\u91CA\u5668\u5171\u4EAB\u7684\u6570\u636E\uFF0C\u540E\u9762\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u4ECE\u8FD9\u91CC\u83B7\u53D6\u8FD9\u4E9B\u503C\u3002</p>
</li>
<li>
<p>\u5BA2\u6237\u7AEF\uFF08Client\uFF09\uFF1A\u4E3B\u8981\u4EFB\u52A1\u662F\u5C06\u9700\u8981\u5206\u6790\u7684\u53E5\u5B50\u6216\u8868\u8FBE\u5F0F\u8F6C\u6362\u6210\u4F7F\u7528\u89E3\u91CA\u5668\u5BF9\u8C61\u63CF\u8FF0\u7684\u62BD\u8C61\u8BED\u6CD5\u6811\uFF0C\u7136\u540E\u8C03\u7528\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7\u73AF\u5883\u89D2\u8272\u95F4\u63A5\u8BBF\u95EE\u89E3\u91CA\u5668\u7684\u89E3\u91CA\u65B9\u6CD5\u3002</p>
</li>
</ul>
<h3 id="_6-11-3-\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_6-11-3-\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 6.11.3 \u6848\u4F8B\u5B9E\u73B0</h3>
<p>\u3010\u4F8B\u3011\u8BBE\u8BA1\u5B9E\u73B0\u52A0\u51CF\u6CD5\u7684\u8F6F\u4EF6</p>
<img src="/img/\u89E3\u91CA\u5668\u6A21\u5F0F.png" style="zoom:80%;" />
<p>\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token comment">//\u62BD\u8C61\u89D2\u8272AbstractExpression</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272  \u52A0\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"("</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" + "</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">///\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u51CF\u6CD5\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Minus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"("</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" - "</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u89D2\u8272 \u53D8\u91CF\u8868\u8FBE\u5F0F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Variable</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u73AF\u5883\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> value <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u6D4B\u8BD5\u7C7B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Variable</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Value v = new Value(1);</span>

        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AbstractExpression</span> expression <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>expression <span class="token operator">+</span> <span class="token string">"= "</span> <span class="token operator">+</span> expression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-11-4-\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_6-11-4-\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 6.11.4 \u4F18\u7F3A\u70B9</h3>
<p><strong>1\uFF0C\u4F18\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u6613\u4E8E\u6539\u53D8\u548C\u6269\u5C55\u6587\u6CD5\u3002</p>
<p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u7C7B\u6765\u8868\u793A\u8BED\u8A00\u7684\u6587\u6CD5\u89C4\u5219\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u7EE7\u627F\u7B49\u673A\u5236\u6765\u6539\u53D8\u6216\u6269\u5C55\u6587\u6CD5\u3002\u6BCF\u4E00\u6761\u6587\u6CD5\u89C4\u5219\u90FD\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u53EF\u4EE5\u65B9\u4FBF\u5730\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684\u8BED\u8A00\u3002</p>
</li>
<li>
<p>\u5B9E\u73B0\u6587\u6CD5\u8F83\u4E3A\u5BB9\u6613\u3002</p>
<p>\u5728\u62BD\u8C61\u8BED\u6CD5\u6811\u4E2D\u6BCF\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8282\u70B9\u7C7B\u7684\u5B9E\u73B0\u65B9\u5F0F\u90FD\u662F\u76F8\u4F3C\u7684\uFF0C\u8FD9\u4E9B\u7C7B\u7684\u4EE3\u7801\u7F16\u5199\u90FD\u4E0D\u4F1A\u7279\u522B\u590D\u6742\u3002</p>
</li>
<li>
<p>\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u8F83\u4E3A\u65B9\u4FBF\u3002</p>
<p>\u5982\u679C\u7528\u6237\u9700\u8981\u589E\u52A0\u65B0\u7684\u89E3\u91CA\u8868\u8FBE\u5F0F\u53EA\u9700\u8981\u5BF9\u5E94\u589E\u52A0\u4E00\u4E2A\u65B0\u7684\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u6216\u975E\u7EC8\u7ED3\u7B26\u8868\u8FBE\u5F0F\u7C7B\uFF0C\u539F\u6709\u8868\u8FBE\u5F0F\u7C7B\u4EE3\u7801\u65E0\u987B\u4FEE\u6539\uFF0C\u7B26\u5408 &quot;\u5F00\u95ED\u539F\u5219&quot;\u3002</p>
</li>
</ul>
<p><strong>2\uFF0C\u7F3A\u70B9\uFF1A</strong></p>
<ul>
<li>
<p>\u5BF9\u4E8E\u590D\u6742\u6587\u6CD5\u96BE\u4EE5\u7EF4\u62A4\u3002</p>
<p>\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\uFF0C\u6BCF\u4E00\u6761\u89C4\u5219\u81F3\u5C11\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A\u7C7B\uFF0C\u56E0\u6B64\u5982\u679C\u4E00\u4E2A\u8BED\u8A00\u5305\u542B\u592A\u591A\u6587\u6CD5\u89C4\u5219\uFF0C\u7C7B\u7684\u4E2A\u6570\u5C06\u4F1A\u6025\u5267\u589E\u52A0\uFF0C\u5BFC\u81F4\u7CFB\u7EDF\u96BE\u4EE5\u7BA1\u7406\u548C\u7EF4\u62A4\u3002</p>
</li>
</ul>
<ul>
<li>
<p>\u6267\u884C\u6548\u7387\u8F83\u4F4E\u3002</p>
<p>\u7531\u4E8E\u5728\u89E3\u91CA\u5668\u6A21\u5F0F\u4E2D\u4F7F\u7528\u4E86\u5927\u91CF\u7684\u5FAA\u73AF\u548C\u9012\u5F52\u8C03\u7528\uFF0C\u56E0\u6B64\u5728\u89E3\u91CA\u8F83\u4E3A\u590D\u6742\u7684\u53E5\u5B50\u65F6\u5176\u901F\u5EA6\u5F88\u6162\uFF0C\u800C\u4E14\u4EE3\u7801\u7684\u8C03\u8BD5\u8FC7\u7A0B\u4E5F\u6BD4\u8F83\u9EBB\u70E6\u3002</p>
</li>
</ul>
<h3 id="_6-11-5-\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_6-11-5-\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> 6.11.5 \u4F7F\u7528\u573A\u666F</h3>
<ul>
<li>
<p>\u5F53\u8BED\u8A00\u7684\u6587\u6CD5\u8F83\u4E3A\u7B80\u5355\uFF0C\u4E14\u6267\u884C\u6548\u7387\u4E0D\u662F\u5173\u952E\u95EE\u9898\u65F6\u3002</p>
</li>
<li>
<p>\u5F53\u95EE\u9898\u91CD\u590D\u51FA\u73B0\uFF0C\u4E14\u53EF\u4EE5\u7528\u4E00\u79CD\u7B80\u5355\u7684\u8BED\u8A00\u6765\u8FDB\u884C\u8868\u8FBE\u65F6\u3002</p>
</li>
<li>
<p>\u5F53\u4E00\u4E2A\u8BED\u8A00\u9700\u8981\u89E3\u91CA\u6267\u884C\uFF0C\u5E76\u4E14\u8BED\u8A00\u4E2D\u7684\u53E5\u5B50\u53EF\u4EE5\u8868\u793A\u4E3A\u4E00\u4E2A\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u65F6\u5019\u3002</p>
</li>
</ul>
<h1 id="_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" tabindex="-1"><a class="header-anchor" href="#_7-\u81EA\u5B9A\u4E49-spring-\u6846\u67B6" aria-hidden="true">#</a> 7\uFF0C\u81EA\u5B9A\u4E49 Spring \u6846\u67B6</h1>
<h2 id="_7-1-spring-\u4F7F\u7528\u56DE\u987E" tabindex="-1"><a class="header-anchor" href="#_7-1-spring-\u4F7F\u7528\u56DE\u987E" aria-hidden="true">#</a> 7.1 spring \u4F7F\u7528\u56DE\u987E</h2>
<p>\u81EA\u5B9A\u4E49 spring \u6846\u67B6\u524D\uFF0C\u5148\u56DE\u987E\u4E00\u4E0B spring \u6846\u67B6\u7684\u4F7F\u7528\uFF0C\u4ECE\u800C\u5206\u6790 spring \u7684\u6838\u5FC3\uFF0C\u5E76\u5BF9\u6838\u5FC3\u529F\u80FD\u8FDB\u884C\u6A21\u62DF\u3002</p>
<ul>
<li>
<p>\u6570\u636E\u8BBF\u95EE\u5C42\u3002\u5B9A\u4E49 UserDao \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"userDaoImpl ...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u4E1A\u52A1\u903B\u8F91\u5C42\u3002\u5B9A\u4E49 UserService \u63A5\u53E3\u53CA\u5176\u5B50\u5B9E\u73B0\u7C7B</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"userServiceImpl ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u5B9A\u4E49 UserController \u7C7B\uFF0C\u4F7F\u7528 main \u65B9\u6CD5\u6A21\u62DF controller \u5C42</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFAspring\u5BB9\u5668\u5BF9\u8C61</span>
        <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECEIOC\u5BB9\u5668\u4E2D\u83B7\u53D6UserService\u5BF9\u8C61</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">,</span> <span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528UserService\u5BF9\u8C61\u7684add\u65B9\u6CD5</span>
        userService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u3002\u5728\u7C7B\u8DEF\u5F84\u4E0B\u7F16\u5199\u4E00\u4E2A\u540D\u4E3A ApplicationContext.xml \u7684\u914D\u7F6E\u6587\u4EF6</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">></span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd"<span class="token operator">></span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userService"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.itheima.service.impl.UserServiceImpl"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"userDao"</span> ref<span class="token operator">=</span><span class="token string">"userDao"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userDao"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.itheima.dao.impl.UserDaoImpl"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u8FD0\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200429165544151.png" style="zoom:60%;" />
</li>
</ul>
<p>\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u53CA\u7ED3\u679C\u53EF\u4EE5\u770B\u51FA\uFF1A</p>
<ul>
<li>userService \u5BF9\u8C61\u662F\u4ECE applicationContext \u5BB9\u5668\u5BF9\u8C61\u83B7\u53D6\u5230\u7684\uFF0C\u4E5F\u5C31\u662F userService \u5BF9\u8C61\u4EA4\u7531 spring \u8FDB\u884C\u7BA1\u7406\u3002</li>
<li>\u4E0A\u9762\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\u8C03\u7528\u4E86 UserDao \u5BF9\u8C61\u4E2D\u7684 add \u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u8BF4 UserDao \u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u4E5F\u4EA4\u7531 spring \u7BA1\u7406\u4E86\u3002</li>
<li>UserService \u4E2D\u7684 userDao \u53D8\u91CF\u6211\u4EEC\u5E76\u6CA1\u6709\u8FDB\u884C\u8D4B\u503C\uFF0C\u4F46\u662F\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\uFF0C\u8BF4\u660E spring \u5DF2\u7ECF\u5C06 UserDao \u5BF9\u8C61\u8D4B\u503C\u7ED9\u4E86 userDao \u53D8\u91CF\u3002</li>
</ul>
<p>\u4E0A\u9762\u4E09\u70B9\u4F53\u73B0\u4E86 Spring \u6846\u67B6\u7684 IOC\uFF08Inversion of Control\uFF09\u548C DI\uFF08Dependency Injection, DI\uFF09</p>
<h2 id="_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_7-2-spring-\u6838\u5FC3\u529F\u80FD\u7ED3\u6784" aria-hidden="true">#</a> 7.2 spring \u6838\u5FC3\u529F\u80FD\u7ED3\u6784</h2>
<p>Spring \u5927\u7EA6\u6709 20 \u4E2A\u6A21\u5757\uFF0C\u7531 1300 \u591A\u4E2A\u4E0D\u540C\u7684\u6587\u4EF6\u6784\u6210\u3002\u8FD9\u4E9B\u6A21\u5757\u53EF\u4EE5\u5206\u4E3A:</p>
<p>\u6838\u5FC3\u5BB9\u5668\u3001AOP \u548C\u8BBE\u5907\u652F\u6301\u3001\u6570\u636E\u8BBF\u95EE\u4E0E\u96C6\u6210\u3001Web \u7EC4\u4EF6\u3001\u901A\u4FE1\u62A5\u6587\u548C\u96C6\u6210\u6D4B\u8BD5\u7B49\uFF0C\u4E0B\u9762\u662F Spring \u6846\u67B6\u7684\u603B\u4F53\u67B6\u6784\u56FE\uFF1A</p>
<img src="/img/image-20200429111324770.png" style="zoom:40%;" />
<p>\u6838\u5FC3\u5BB9\u5668\u7531 beans\u3001core\u3001context \u548C expression\uFF08Spring Expression Language\uFF0CSpEL\uFF094 \u4E2A\u6A21\u5757\u7EC4\u6210\u3002</p>
<ul>
<li>spring-beans \u548C spring-core \u6A21\u5757\u662F Spring \u6846\u67B6\u7684\u6838\u5FC3\u6A21\u5757\uFF0C\u5305\u542B\u4E86\u63A7\u5236\u53CD\u8F6C\uFF08Inversion of Control\uFF0CIOC\uFF09\u548C\u4F9D\u8D56\u6CE8\u5165\uFF08Dependency Injection\uFF0CDI\uFF09\u3002BeanFactory \u4F7F\u7528\u63A7\u5236\u53CD\u8F6C\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u548C\u4F9D\u8D56\u6027\u89C4\u8303\u4E0E\u5B9E\u9645\u7684\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u8FDB\u884C\u4E86\u5206\u79BB\u3002BeanFactory \u5C5E\u4E8E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5728\u5B9E\u4F8B\u5316\u5BB9\u5668\u5BF9\u8C61\u540E\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5B9E\u4F8B\u5316 Bean\uFF0C\u53EA\u6709\u5F53 Bean \u88AB\u4F7F\u7528\u65F6\uFF0CBeanFactory \u624D\u4F1A\u5BF9\u8BE5 Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\u3002</li>
<li>spring-context \u6A21\u5757\u6784\u67B6\u4E8E\u6838\u5FC3\u6A21\u5757\u4E4B\u4E0A\uFF0C\u6269\u5C55\u4E86 BeanFactory\uFF0C\u4E3A\u5B83\u6DFB\u52A0\u4E86 Bean \u751F\u547D\u5468\u671F\u63A7\u5236\u3001\u6846\u67B6\u4E8B\u4EF6\u4F53\u7CFB\u53CA\u8D44\u6E90\u52A0\u8F7D\u900F\u660E\u5316\u7B49\u529F\u80FD\u3002\u6B64\u5916\uFF0C\u8BE5\u6A21\u5757\u8FD8\u63D0\u4F9B\u4E86\u8BB8\u591A\u4F01\u4E1A\u7EA7\u652F\u6301\uFF0C\u5982\u90AE\u4EF6\u8BBF\u95EE\u3001\u8FDC\u7A0B\u8BBF\u95EE\u3001\u4EFB\u52A1\u8C03\u5EA6\u7B49\uFF0CApplicationContext \u662F\u8BE5\u6A21\u5757\u7684\u6838\u5FC3\u63A5\u53E3\uFF0C\u5B83\u7684\u8D85\u7C7B\u662F BeanFactory\u3002\u4E0E BeanFactory \u4E0D\u540C\uFF0CApplicationContext \u5B9E\u4F8B\u5316\u540E\u4F1A\u81EA\u52A8\u5BF9\u6240\u6709\u7684\u5355\u5B9E\u4F8B Bean \u8FDB\u884C\u5B9E\u4F8B\u5316\u4E0E\u4F9D\u8D56\u5173\u7CFB\u7684\u88C5\u914D\uFF0C\u4F7F\u4E4B\u5904\u4E8E\u5F85\u7528\u72B6\u6001\u3002</li>
<li>spring-context-support \u6A21\u5757\u662F\u5BF9 Spring IoC \u5BB9\u5668\u53CA IoC \u5B50\u5BB9\u5668\u7684\u6269\u5C55\u652F\u6301\u3002</li>
<li>spring-context-indexer \u6A21\u5757\u662F Spring \u7684\u7C7B\u7BA1\u7406\u7EC4\u4EF6\u548C Classpath \u626B\u63CF\u7EC4\u4EF6\u3002</li>
<li>spring-expression \u6A21\u5757\u662F\u7EDF\u4E00\u8868\u8FBE\u5F0F\u8BED\u8A00\uFF08EL\uFF09\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u3001\u7BA1\u7406\u8FD0\u884C\u4E2D\u7684\u5BF9\u8C61\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u65B9\u4FBF\u5730\u8C03\u7528\u5BF9\u8C61\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u64CD\u4F5C\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u3002\u5B83\u7684\u8BED\u6CD5\u7C7B\u4F3C\u4E8E\u4F20\u7EDF EL\uFF0C\u4F46\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u529F\u80FD\uFF0C\u6700\u51FA\u8272\u7684\u8981\u6570\u51FD\u6570\u8C03\u7528\u548C\u7B80\u5355\u5B57\u7B26\u4E32\u7684\u6A21\u677F\u51FD\u6570\u3002EL \u7684\u7279\u6027\u662F\u57FA\u4E8E Spring \u4EA7\u54C1\u7684\u9700\u6C42\u800C\u8BBE\u8BA1\u7684\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u540C Spring IoC \u8FDB\u884C\u4EA4\u4E92\u3002</li>
</ul>
<h3 id="_7-1-1-bean-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_7-1-1-bean-\u6982\u8FF0" aria-hidden="true">#</a> 7.1.1 bean \u6982\u8FF0</h3>
<p>Spring \u5C31\u662F\u9762\u5411 <code v-pre>Bean</code> \u7684\u7F16\u7A0B\uFF08BOP,Bean Oriented Programming\uFF09\uFF0CBean \u5728 Spring \u4E2D\u5904\u4E8E\u6838\u5FC3\u5730\u4F4D\u3002Bean \u5BF9\u4E8E Spring \u7684\u610F\u4E49\u5C31\u50CF Object \u5BF9\u4E8E OOP \u7684\u610F\u4E49\u4E00\u6837\uFF0CSpring \u4E2D\u6CA1\u6709 Bean \u4E5F\u5C31\u6CA1\u6709 Spring \u5B58\u5728\u7684\u610F\u4E49\u3002Spring IoC \u5BB9\u5668\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u6216\u8005\u6CE8\u89E3\u7684\u65B9\u5F0F\u6765\u7BA1\u7406 bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</p>
<p>spring \u4E2D bean \u7528\u4E8E\u5BF9\u4E00\u4E2A\u7C7B\u8FDB\u884C\u5C01\u88C5\u3002\u5982\u4E0B\u9762\u7684\u914D\u7F6E\uFF1A</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4EC0\u4E48 Bean \u5982\u6B64\u91CD\u8981\u5462\uFF1F</p>
<ul>
<li>spring \u5C06 bean \u5BF9\u8C61\u4EA4\u7531\u4E00\u4E2A\u53EB IOC \u5BB9\u5668\u8FDB\u884C\u7BA1\u7406\u3002</li>
<li>bean \u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F53\u73B0\uFF0C\u5E76\u7531 spring \u5B8C\u6210\u3002</li>
</ul>
<h2 id="_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-spring-ioc-\u76F8\u5173\u63A5\u53E3\u5206\u6790" aria-hidden="true">#</a> 7.3 Spring IOC \u76F8\u5173\u63A5\u53E3\u5206\u6790</h2>
<h3 id="_7-3-1-beanfactory-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-1-beanfactory-\u89E3\u6790" aria-hidden="true">#</a> 7.3.1 BeanFactory \u89E3\u6790</h3>
<p>Spring \u4E2D Bean \u7684\u521B\u5EFA\u662F\u5178\u578B\u7684\u5DE5\u5382\u6A21\u5F0F\uFF0C\u8FD9\u4E00\u7CFB\u5217\u7684 Bean \u5DE5\u5382\uFF0C\u5373 IoC \u5BB9\u5668\uFF0C\u4E3A\u5F00\u53D1\u8005\u7BA1\u7406\u5BF9\u8C61\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\u63D0\u4F9B\u4E86\u5F88\u591A\u4FBF\u5229\u548C\u57FA\u7840\u670D\u52A1\uFF0C\u5728 Spring \u4E2D\u6709\u8BB8\u591A IoC \u5BB9\u5668\u7684\u5B9E\u73B0\u4F9B\u7528\u6237\u9009\u62E9\uFF0C\u5176\u76F8\u4E92\u5173\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429185050396.png" style="zoom:60%;" />
<p>\u5176\u4E2D\uFF0CBeanFactory \u4F5C\u4E3A\u6700\u9876\u5C42\u7684\u4E00\u4E2A\u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 IoC \u5BB9\u5668\u7684\u57FA\u672C\u529F\u80FD\u89C4\u8303\uFF0CBeanFactory \u6709\u4E09\u4E2A\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF1AListableBeanFactory\u3001HierarchicalBeanFactory \u548C AutowireCapableBeanFactory\u3002\u4F46\u662F\u4ECE\u7C7B\u56FE\u4E2D\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6700\u7EC8\u7684\u9ED8\u8BA4\u5B9E\u73B0\u7C7B\u662F DefaultListableBeanFactory\uFF0C\u5B83\u5B9E\u73B0\u4E86\u6240\u6709\u7684\u63A5\u53E3\u3002</p>
<p>\u90A3\u4E48\u4E3A\u4F55\u8981\u5B9A\u4E49\u8FD9\u4E48\u591A\u5C42\u6B21\u7684\u63A5\u53E3\u5462\uFF1F</p>
<p>\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6709\u5B83\u7684\u4F7F\u7528\u573A\u5408\uFF0C\u4E3B\u8981\u662F\u4E3A\u4E86\u533A\u5206\u5728 Spring \u5185\u90E8\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5BF9\u8C61\u7684\u4F20\u9012\u548C\u8F6C\u5316\uFF0C\u5BF9\u5BF9\u8C61\u7684\u6570\u636E\u8BBF\u95EE\u6240\u505A\u7684\u9650\u5236\u3002\u4F8B\u5982\uFF0C</p>
<ul>
<li>ListableBeanFactory \u63A5\u53E3\u8868\u793A\u8FD9\u4E9B Bean \u53EF\u5217\u8868\u5316\u3002</li>
<li>HierarchicalBeanFactory \u8868\u793A\u8FD9\u4E9B Bean \u662F\u6709\u7EE7\u627F\u5173\u7CFB\u7684\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A Bean \u53EF\u80FD\u6709\u7236 Bean</li>
<li>AutowireCapableBeanFactory \u63A5\u53E3\u5B9A\u4E49 Bean \u7684\u81EA\u52A8\u88C5\u914D\u89C4\u5219\u3002</li>
</ul>
<p>\u8FD9\u4E09\u4E2A\u63A5\u53E3\u5171\u540C\u5B9A\u4E49\u4E86 Bean \u7684\u96C6\u5408\u3001Bean \u4E4B\u95F4\u7684\u5173\u7CFB\u53CA Bean \u884C\u4E3A\u3002\u6700\u57FA\u672C\u7684 IoC \u5BB9\u5668\u63A5\u53E3\u662F BeanFactory\uFF0C\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u6E90\u7801\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>

	<span class="token class-name">String</span> <span class="token constant">FACTORY_BEAN_PREFIX</span> <span class="token operator">=</span> <span class="token string">"&amp;"</span><span class="token punctuation">;</span>

	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u83B7\u53D6IOC\u5BB9\u5668\u4E2D\u7684\u7684bean\u5BF9\u8C61\uFF0C\u5E76\u6307\u5B9A\u83B7\u53D6\u5230\u7684bean\u5BF9\u8C61\u7684\u7C7B\u578B\uFF0C\u8FD9\u6837\u6211\u4EEC\u4F7F\u7528\u65F6\u5C31\u4E0D\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5F3A\u8F6C\u4E86</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>

	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">ResolvableType</span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u5BB9\u5668\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684bean\u5BF9\u8C61</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u7684\u540D\u79F0\u5224\u65AD\u662F\u5426\u662F\u5355\u4F8B</span>
	<span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isPrototype</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">ResolvableType</span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAliases</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 BeanFactory \u91CC\u53EA\u5BF9 IoC \u5BB9\u5668\u7684\u57FA\u672C\u884C\u4E3A\u505A\u4E86\u5B9A\u4E49\uFF0C\u6839\u672C\u4E0D\u5173\u5FC3\u4F60\u7684 Bean \u662F\u5982\u4F55\u5B9A\u4E49\u53CA\u600E\u6837\u52A0\u8F7D\u7684\u3002\u6B63\u5982\u6211\u4EEC\u53EA\u5173\u5FC3\u80FD\u4ECE\u5DE5\u5382\u91CC\u5F97\u5230\u4EC0\u4E48\u4EA7\u54C1\uFF0C\u4E0D\u5173\u5FC3\u5DE5\u5382\u662F\u600E\u4E48\u751F\u4EA7\u8FD9\u4E9B\u4EA7\u54C1\u7684\u3002</p>
<p>BeanFactory \u6709\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u5B50\u63A5\u53E3\uFF0C\u5C31\u662F ApplicationContext \u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u4E3B\u8981\u6765\u89C4\u8303\u5BB9\u5668\u4E2D\u7684 bean \u5BF9\u8C61\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u5373\u5728\u521B\u5EFA\u5BB9\u5668\u5BF9\u8C61\u7684\u65F6\u5019\u5C31\u5BF9\u8C61 bean \u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u5E76\u5B58\u50A8\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D\u3002</p>
<img src="/img/image-20200430220155371.png" style="zoom:60%;" />
<p>\u8981\u77E5\u9053\u5DE5\u5382\u662F\u5982\u4F55\u4EA7\u751F\u5BF9\u8C61\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u770B\u5177\u4F53\u7684 IoC \u5BB9\u5668\u5B9E\u73B0\uFF0CSpring \u63D0\u4F9B\u4E86\u8BB8\u591A IoC \u5BB9\u5668\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF1A</p>
<ul>
<li>ClasspathXmlApplicationContext : \u6839\u636E\u7C7B\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li>
<li>FileSystemXmlApplicationContext \uFF1A\u6839\u636E\u7CFB\u7EDF\u8DEF\u5F84\u52A0\u8F7D xml \u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u5BF9\u8C61\u3002</li>
<li>AnnotationConfigApplicationContext \uFF1A\u52A0\u8F7D\u6CE8\u89E3\u7C7B\u914D\u7F6E\uFF0C\u5E76\u521B\u5EFA IOC \u5BB9\u5668\u3002</li>
</ul>
<h3 id="_7-3-2-beandefinition-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-2-beandefinition-\u89E3\u6790" aria-hidden="true">#</a> 7.3.2 BeanDefinition \u89E3\u6790</h3>
<p>Spring IoC \u5BB9\u5668\u7BA1\u7406\u6211\u4EEC\u5B9A\u4E49\u7684\u5404\u79CD Bean \u5BF9\u8C61\u53CA\u5176\u76F8\u4E92\u5173\u7CFB\uFF0C\u800C Bean \u5BF9\u8C61\u5728 Spring \u5B9E\u73B0\u4E2D\u662F\u4EE5 BeanDefinition \u6765\u63CF\u8FF0\u7684\uFF0C\u5982\u4E0B\u9762\u914D\u7F6E\u6587\u4EF6</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>

bean\u6807\u7B7E\u8FD8\u6709\u5F88\u591A\u5C5E\u6027\uFF1A
	scope\u3001init-method\u3001destory-method\u7B49\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u7EE7\u627F\u4F53\u7CFB\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429204239868.png" style="zoom:60%;" />
<h3 id="_7-3-3-beandefinitionreader-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-3-beandefinitionreader-\u89E3\u6790" aria-hidden="true">#</a> 7.3.3 BeanDefinitionReader \u89E3\u6790</h3>
<p>Bean \u7684\u89E3\u6790\u8FC7\u7A0B\u975E\u5E38\u590D\u6742\uFF0C\u529F\u80FD\u88AB\u5206\u5F97\u5F88\u7EC6\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u9700\u8981\u88AB\u6269\u5C55\u7684\u5730\u65B9\u5F88\u591A\uFF0C\u5FC5\u987B\u4FDD\u8BC1\u8DB3\u591F\u7684\u7075\u6D3B\u6027\uFF0C\u4EE5\u5E94\u5BF9\u53EF\u80FD\u7684\u53D8\u5316\u3002Bean \u7684\u89E3\u6790\u4E3B\u8981\u5C31\u662F\u5BF9 Spring \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\u3002\u8FD9\u4E2A\u89E3\u6790\u8FC7\u7A0B\u4E3B\u8981\u901A\u8FC7 BeanDefinitionReader \u6765\u5B8C\u6210\uFF0C\u770B\u770B Spring \u4E2D BeanDefinitionReader \u7684\u7C7B\u7ED3\u6784\u56FE\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\u3002</p>
<img src="/img/image-20200429204700956.png" style="zoom:60%;" />
<p>\u770B\u770B BeanDefinitionReader \u63A5\u53E3\u5B9A\u4E49\u7684\u529F\u80FD\u6765\u7406\u89E3\u5B83\u5177\u4F53\u7684\u4F5C\u7528\uFF1A</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6BeanDefinitionRegistry\u6CE8\u518C\u5668\u5BF9\u8C61</span>
	<span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ResourceLoader</span> <span class="token function">getResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ClassLoader</span> <span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token class-name">BeanNameGenerator</span> <span class="token function">getBeanNameGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*
		\u4E0B\u9762\u7684loadBeanDefinitions\u90FD\u662F\u52A0\u8F7Dbean\u5B9A\u4E49\uFF0C\u4ECE\u6307\u5B9A\u7684\u8D44\u6E90\u4E2D
	*/</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span> resource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> resources<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> locations<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-4-beandefinitionregistry-\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_7-3-4-beandefinitionregistry-\u89E3\u6790" aria-hidden="true">#</a> 7.3.4 BeanDefinitionRegistry \u89E3\u6790</h3>
<p>BeanDefinitionReader \u7528\u6765\u89E3\u6790 bean \u5B9A\u4E49\uFF0C\u5E76\u5C01\u88C5 BeanDefinition \u5BF9\u8C61\uFF0C\u800C\u6211\u4EEC\u5B9A\u4E49\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9A\u4E49\u4E86\u5F88\u591A bean \u6807\u7B7E\uFF0C\u6240\u4EE5\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u89E3\u6790\u7684 BeanDefinition \u5BF9\u8C61\u5B58\u50A8\u5230\u54EA\u513F\uFF1F\u7B54\u6848\u5C31\u662F BeanDefinition \u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u800C\u8BE5\u6CE8\u518C\u4E2D\u5FC3\u9876\u5C42\u63A5\u53E3\u5C31\u662F BeanDefinitionRegistry\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token keyword">extends</span> <span class="token class-name">AliasRegistry</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u5F80\u6CE8\u518C\u8868\u4E2D\u6CE8\u518Cbean</span>
	<span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u4E86\u6307\u5B9A\u540D\u79F0\u7684bean</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684bean\u7684\u540D\u79F0</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EE7\u627F\u7ED3\u6784\u56FE\u5982\u4E0B\uFF1A</p>
<img src="/img/image-20200429211132185.png" style="zoom:60%;" />
<p>\u4ECE\u4E0A\u9762\u7C7B\u56FE\u53EF\u4EE5\u770B\u5230 BeanDefinitionRegistry \u63A5\u53E3\u7684\u5B50\u5B9E\u73B0\u7C7B\u4E3B\u8981\u6709\u4EE5\u4E0B\u51E0\u4E2A\uFF1A</p>
<ul>
<li>
<p>DefaultListableBeanFactory</p>
<p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
<li>
<p>SimpleBeanDefinitionRegistry</p>
<p>\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E86\u5982\u4E0B\u4EE3\u7801\uFF0C\u5C31\u662F\u7528\u6765\u6CE8\u518C bean</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
</ul>
<h3 id="_7-3-5-\u521B\u5EFA\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_7-3-5-\u521B\u5EFA\u5BB9\u5668" aria-hidden="true">#</a> 7.3.5 \u521B\u5EFA\u5BB9\u5668</h3>
<p>ClassPathXmlApplicationContext \u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u7684\u8F7D\u5165\u662F\u4ECE refresh\uFF08\uFF09\u65B9\u6CD5\u5F00\u59CB\u7684\u3002refresh\uFF08\uFF09\u65B9\u6CD5\u662F\u4E00\u4E2A\u6A21\u677F\u65B9\u6CD5\uFF0C\u89C4\u5B9A\u4E86 IoC \u5BB9\u5668\u7684\u542F\u52A8\u6D41\u7A0B\uFF0C\u6709\u4E9B\u903B\u8F91\u8981\u4EA4\u7ED9\u5176\u5B50\u7C7B\u5B9E\u73B0\u3002\u5B83\u5BF9 Bean \u914D\u7F6E\u8D44\u6E90\u8FDB\u884C\u8F7D\u5165\uFF0CClassPathXmlApplicationContext \u901A\u8FC7\u8C03\u7528\u5176\u7236\u7C7B AbstractApplicationContext \u7684 refresh\uFF08\uFF09\u65B9\u6CD5\u542F\u52A8\u6574\u4E2A IoC \u5BB9\u5668\u5BF9 Bean \u5B9A\u4E49\u7684\u8F7D\u5165\u8FC7\u7A0B\u3002</p>
<h2 id="_7-4-\u81EA\u5B9A\u4E49-springioc" tabindex="-1"><a class="header-anchor" href="#_7-4-\u81EA\u5B9A\u4E49-springioc" aria-hidden="true">#</a> 7.4 \u81EA\u5B9A\u4E49 SpringIOC</h2>
<p>\u73B0\u8981\u5BF9\u4E0B\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u89E3\u6790\uFF0C\u5E76\u81EA\u5B9A\u4E49 Spring \u6846\u67B6\u7684 IOC \u5BF9\u6D89\u53CA\u5230\u7684\u5BF9\u8C61\u8FDB\u884C\u7BA1\u7406\u3002</p>
<div class="language-xml ext-xml line-numbers-mode"><pre v-pre class="language-xml"><code><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.service.impl.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.dao.impl.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-\u5B9A\u4E49-bean-\u76F8\u5173\u7684-pojo-\u7C7B" aria-hidden="true">#</a> 7.4.1 \u5B9A\u4E49 bean \u76F8\u5173\u7684 pojo \u7C7B</h3>
<h4 id="_7-4-1-1-propertyvalue-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-1-propertyvalue-\u7C7B" aria-hidden="true">#</a> 7.4.1.1 PropertyValue \u7C7B</h4>
<p>\u7528\u4E8E\u5C01\u88C5 bean \u7684\u5C5E\u6027\uFF0C\u4F53\u73B0\u5230\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u662F\u5C01\u88C5 bean \u6807\u7B7E\u7684\u5B50\u6807\u7B7E property \u6807\u7B7E\u6570\u636E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertyValue</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> ref<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> ref<span class="token punctuation">,</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRef</span><span class="token punctuation">(</span><span class="token class-name">String</span> ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-2-mutablepropertyvalues-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-2-mutablepropertyvalues-\u7C7B" aria-hidden="true">#</a> 7.4.1.2 MutablePropertyValues \u7C7B</h4>
<p>\u4E00\u4E2A bean \u6807\u7B7E\u53EF\u4EE5\u6709\u591A\u4E2A property \u5B50\u6807\u7B7E\uFF0C\u6240\u4EE5\u518D\u5B9A\u4E49\u4E00\u4E2A MutablePropertyValues \u7C7B\uFF0C\u7528\u6765\u5B58\u50A8\u5E76\u7BA1\u7406\u591A\u4E2A PropertyValue \u5BF9\u8C61\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MutablePropertyValues</span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> propertyValueList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token punctuation">(</span>propertyValueList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> propertyValueList <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> pv<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValueList<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">PropertyValue</span> currentPv <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pv<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pv<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-1-3-beandefinition-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-1-3-beandefinition-\u7C7B" aria-hidden="true">#</a> 7.4.1.3 BeanDefinition \u7C7B</h4>
<p>BeanDefinition \u7C7B\u7528\u6765\u5C01\u88C5 bean \u4FE1\u606F\u7684\uFF0C\u4E3B\u8981\u5305\u542B id\uFF08\u5373 bean \u5BF9\u8C61\u7684\u540D\u79F0\uFF09\u3001class\uFF08\u9700\u8981\u4EA4\u7531 spring \u7BA1\u7406\u7684\u7C7B\u7684\u5168\u7C7B\u540D\uFF09\u53CA\u5B50\u6807\u7B7E property \u6570\u636E\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDefinition</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> className<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setClassName</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPropertyValues</span><span class="token punctuation">(</span><span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValues <span class="token operator">=</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-\u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.2 \u5B9A\u4E49\u6CE8\u518C\u8868\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-2-1-beandefinitionregistry-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.2.1 BeanDefinitionRegistry \u63A5\u53E3</h4>
<p>BeanDefinitionRegistry \u63A5\u53E3\u5B9A\u4E49\u4E86\u6CE8\u518C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5982\u4E0B\u529F\u80FD\uFF1A</p>
<ul>
<li>\u6CE8\u518C BeanDefinition \u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</li>
<li>\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li>
<li>\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6 BeanDefinition \u5BF9\u8C61</li>
<li>\u5224\u65AD\u6CE8\u518C\u8868\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u540D\u79F0\u7684 BeanDefinition \u5BF9\u8C61</li>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D BeanDefinition \u5BF9\u8C61\u7684\u4E2A\u6570</li>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u4E2D\u6240\u6709\u7684 BeanDefinition \u7684\u540D\u79F0</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u6CE8\u518CBeanDefinition\u5BF9\u8C61\u5230\u6CE8\u518C\u8868\u4E2D</span>
    <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u4ECE\u6CE8\u518C\u8868\u4E2D\u5220\u9664\u6307\u5B9A\u540D\u79F0\u7684BeanDefinition\u5BF9\u8C61</span>
    <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token comment">//\u6839\u636E\u540D\u79F0\u4ECE\u6CE8\u518C\u8868\u4E2D\u83B7\u53D6BeanDefinition\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-2-2-simplebeandefinitionregistry-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-2-2-simplebeandefinitionregistry-\u7C7B" aria-hidden="true">#</a> 7.4.2.2 SimpleBeanDefinitionRegistry \u7C7B</h4>
<p>\u8BE5\u7C7B\u5B9E\u73B0\u4E86 BeanDefinitionRegistry \u63A5\u53E3\uFF0C\u5B9A\u4E49\u4E86 Map \u96C6\u5408\u4F5C\u4E3A\u6CE8\u518C\u8868\u5BB9\u5668\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-\u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.3 \u5B9A\u4E49\u89E3\u6790\u5668\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-3-1-beandefinitionreader-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-3-1-beandefinitionreader-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.3.1 BeanDefinitionReader \u63A5\u53E3</h4>
<p>BeanDefinitionReader \u662F\u7528\u6765\u89E3\u6790\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u6CE8\u518C bean \u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u4E86\u4E24\u4E2A\u89C4\u8303\uFF1A</p>
<ul>
<li>\u83B7\u53D6\u6CE8\u518C\u8868\u7684\u529F\u80FD\uFF0C\u8BA9\u5916\u754C\u53EF\u4EE5\u901A\u8FC7\u8BE5\u5BF9\u8C61\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61\u3002</li>
<li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6CE8\u518C bean \u6570\u636E\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//\u83B7\u53D6\u6CE8\u518C\u8868\u5BF9\u8C61</span>
    <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5E76\u5728\u6CE8\u518C\u8868\u4E2D\u8FDB\u884C\u6CE8\u518C</span>
    <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-3-2-xmlbeandefinitionreader-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-3-2-xmlbeandefinitionreader-\u7C7B" aria-hidden="true">#</a> 7.4.3.2 XmlBeanDefinitionReader \u7C7B</h4>
<p>XmlBeanDefinitionReader \u7C7B\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790 xml \u914D\u7F6E\u6587\u4EF6\u7684\u3002\u8BE5\u7C7B\u5B9E\u73B0 BeanDefinitionReader \u63A5\u53E3\u5E76\u5B9E\u73B0\u63A5\u53E3\u4E2D\u7684\u4E24\u4E2A\u529F\u80FD\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlBeanDefinitionReader</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SAXReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> document <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Element</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u89E3\u6790bean\u6807\u7B7E</span>
        <span class="token function">parseBean</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">parseBean</span><span class="token punctuation">(</span><span class="token class-name">Element</span> rootElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> elements <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">"property"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MutablePropertyValues</span> mutablePropertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element1 <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> ref <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"ref"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> value <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>ref<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                mutablePropertyValues<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setPropertyValues</span><span class="token punctuation">(</span>mutablePropertyValues<span class="token punctuation">)</span><span class="token punctuation">;</span>

            registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-ioc-\u5BB9\u5668\u76F8\u5173\u7C7B" aria-hidden="true">#</a> 7.4.4 IOC \u5BB9\u5668\u76F8\u5173\u7C7B</h3>
<h4 id="_7-4-4-1-beanfactory-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-1-beanfactory-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.1 BeanFactory \u63A5\u53E3</h4>
<p>\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 IOC \u5BB9\u5668\u7684\u7EDF\u4E00\u89C4\u8303\u5373\u83B7\u53D6 bean \u5BF9\u8C61\u3002</p>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
	<span class="token comment">//\u6839\u636Ebean\u5BF9\u8C61\u7684\u540D\u79F0\u83B7\u53D6bean\u5BF9\u8C61\uFF0C\u5E76\u8FDB\u884C\u7C7B\u578B\u8F6C\u6362</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-2-applicationcontext-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_7-4-4-2-applicationcontext-\u63A5\u53E3" aria-hidden="true">#</a> 7.4.4.2 ApplicationContext \u63A5\u53E3</h4>
<p>\u8BE5\u63A5\u53E3\u7684\u6240\u4EE5\u7684\u5B50\u5B9E\u73B0\u7C7B\u5BF9 bean \u5BF9\u8C61\u7684\u521B\u5EFA\u90FD\u662F\u975E\u5EF6\u65F6\u7684\uFF0C\u6240\u4EE5\u5728\u8BE5\u63A5\u53E3\u4E2D\u5B9A\u4E49 <code v-pre>refresh()</code> \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u4E24\u4E2A\u529F\u80FD\uFF1A</p>
<ul>
<li>\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u3002</li>
<li>\u6839\u636E\u6CE8\u518C\u8868\u4E2D\u7684 BeanDefinition \u5BF9\u8C61\u5C01\u88C5\u7684\u6570\u636E\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u5E76\u8FDB\u884C\u5BF9\u8C61\u521B\u5EFA</span>
    <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-4-4-3-abstractapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-3-abstractapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.3 AbstractApplicationContext \u7C7B</h4>
<ul>
<li>
<p>\u4F5C\u4E3A ApplicationContext \u63A5\u53E3\u7684\u5B50\u7C7B\uFF0C\u6240\u4EE5\u8BE5\u7C7B\u4E5F\u662F\u975E\u5EF6\u65F6\u52A0\u8F7D\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u8BE5\u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A Map \u96C6\u5408\uFF0C\u4F5C\u4E3A bean \u5BF9\u8C61\u5B58\u50A8\u7684\u5BB9\u5668\u3002</p>
</li>
<li>
<p>\u58F0\u660E BeanDefinitionReader \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u7528\u6765\u8FDB\u884C xml \u914D\u7F6E\u6587\u4EF6\u7684\u89E3\u6790\uFF0C\u7B26\u5408\u5355\u4E00\u804C\u8D23\u539F\u5219\u3002</p>
<p>BeanDefinitionReader \u7C7B\u578B\u7684\u5BF9\u8C61\u521B\u5EFA\u4EA4\u7531\u5B50\u7C7B\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u53EA\u6709\u5B50\u7C7B\u660E\u786E\u5230\u5E95\u521B\u5EFA BeanDefinitionReader \u54EA\u513F\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u5BF9\u8C61\u3002</p>
</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractApplicationContext</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContext</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">BeanDefinitionReader</span> beanDefinitionReader<span class="token punctuation">;</span>
    <span class="token comment">//\u7528\u6765\u5B58\u50A8bean\u5BF9\u8C61\u7684\u5BB9\u5668   key\u5B58\u50A8\u7684\u662Fbean\u7684id\u503C\uFF0Cvalue\u5B58\u50A8\u7684\u662Fbean\u5BF9\u8C61</span>
    <span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> singletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u5B58\u50A8\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> configLocation<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//\u52A0\u8F7DBeanDefinition</span>
        beanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u521D\u59CB\u5316bean</span>
        <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//bean\u7684\u521D\u59CB\u5316</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanNames <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>\u6CE8\u610F\uFF1A\u8BE5\u7C7B finishBeanInitialization()\u65B9\u6CD5\u4E2D\u8C03\u7528 getBean()\u65B9\u6CD5\u4F7F\u7528\u5230\u4E86\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002</p>
</blockquote>
<h4 id="_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-4-4-classpathxmlapplicationcontext-\u7C7B" aria-hidden="true">#</a> 7.4.4.4 ClassPathXmlApplicationContext \u7C7B</h4>
<p>\u8BE5\u7C7B\u4E3B\u8981\u662F\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u8FDB\u884C bean \u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u4E3B\u8981\u5B8C\u6210\u4EE5\u4E0B\u529F\u80FD\uFF1A</p>
<ul>
<li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u521B\u5EFA BeanDefinitionReader \u5BF9\u8C61\u3002</li>
<li>\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\uFF0C\u8C03\u7528 refresh()\u65B9\u6CD5\uFF0C\u7528\u4E8E\u8FDB\u884C\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u3001\u521B\u5EFA bean \u5BF9\u8C61\u5E76\u5B58\u50A8\u5230\u5BB9\u5668\u4E2D\u3002</li>
<li>\u91CD\u5199\u7236\u63A5\u53E3\u4E2D\u7684 getBean()\u65B9\u6CD5\uFF0C\u5E76\u5B9E\u73B0\u4F9D\u8D56\u6CE8\u5165\u64CD\u4F5C\u3002</li>
</ul>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathXmlApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">String</span> configLocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configLocation <span class="token operator">=</span> configLocation<span class="token punctuation">;</span>
        <span class="token comment">//\u6784\u5EFAXmlBeanDefinitionReader\u5BF9\u8C61</span>
        beanDefinitionReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6839\u636Ebean\u7684id\u5C5E\u6027\u503C\u83B7\u53D6bean\u5BF9\u8C61</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//return singletonObjects.get(name);</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> singletonObjects<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>beanDefinition <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> beanObj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MutablePropertyValues</span> propertyValues <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> propertyName <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> ref <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>ref <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        singletonObjects<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>beanObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> beanObj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>bean <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#_7-4-5-\u81EA\u5B9A\u4E49-spring-ioc-\u603B\u7ED3" aria-hidden="true">#</a> 7.4.5 \u81EA\u5B9A\u4E49 Spring IOC \u603B\u7ED3</h3>
<h4 id="_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_7-4-5-1-\u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F" aria-hidden="true">#</a> 7.4.5.1 \u4F7F\u7528\u5230\u7684\u8BBE\u8BA1\u6A21\u5F0F</h4>
<ul>
<li>\u5DE5\u5382\u6A21\u5F0F\u3002\u8FD9\u4E2A\u4F7F\u7528\u5DE5\u5382\u6A21\u5F0F + \u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u3002</li>
<li>\u5355\u4F8B\u6A21\u5F0F\u3002Spring IOC \u7BA1\u7406\u7684 bean \u5BF9\u8C61\u90FD\u662F\u5355\u4F8B\u7684\uFF0C\u6B64\u5904\u7684\u5355\u4F8B\u4E0D\u662F\u901A\u8FC7\u6784\u9020\u5668\u8FDB\u884C\u5355\u4F8B\u7684\u63A7\u5236\u7684\uFF0C\u800C\u662F spring \u6846\u67B6\u5BF9\u6BCF\u4E00\u4E2A bean \u53EA\u521B\u5EFA\u4E86\u4E00\u4E2A\u5BF9\u8C61\u3002</li>
<li>\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3002AbstractApplicationContext \u7C7B\u4E2D\u7684 finishBeanInitialization()\u65B9\u6CD5\u8C03\u7528\u4E86\u5B50\u7C7B\u7684 getBean()\u65B9\u6CD5\uFF0C\u56E0\u4E3A getBean()\u7684\u5B9E\u73B0\u548C\u73AF\u5883\u606F\u606F\u76F8\u5173\u3002</li>
<li>\u8FED\u4EE3\u5668\u6A21\u5F0F\u3002\u5BF9\u4E8E MutablePropertyValues \u7C7B\u5B9A\u4E49\u4F7F\u7528\u5230\u4E86\u8FED\u4EE3\u5668\u6A21\u5F0F\uFF0C\u56E0\u4E3A\u6B64\u7C7B\u5B58\u50A8\u5E76\u7BA1\u7406 PropertyValue \u5BF9\u8C61\uFF0C\u4E5F\u5C5E\u4E8E\u4E00\u4E2A\u5BB9\u5668\uFF0C\u6240\u4EE5\u7ED9\u8BE5\u5BB9\u5668\u63D0\u4F9B\u4E00\u4E2A\u904D\u5386\u65B9\u5F0F\u3002</li>
</ul>
<p>spring \u6846\u67B6\u5176\u5B9E\u4F7F\u7528\u5230\u4E86\u5F88\u591A\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5982 AOP \u4F7F\u7528\u5230\u4E86\u4EE3\u7406\u6A21\u5F0F\uFF0C\u9009\u62E9 JDK \u4EE3\u7406\u6216\u8005 CGLIB \u4EE3\u7406\u4F7F\u7528\u5230\u4E86\u7B56\u7565\u6A21\u5F0F\uFF0C\u8FD8\u6709\u9002\u914D\u5668\u6A21\u5F0F\uFF0C\u88C5\u9970\u8005\u6A21\u5F0F\uFF0C\u89C2\u5BDF\u8005\u6A21\u5F0F\u7B49\u3002</p>
<h4 id="_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_7-4-5-2-\u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219" aria-hidden="true">#</a> 7.4.5.2 \u7B26\u5408\u5927\u90E8\u5206\u8BBE\u8BA1\u539F\u5219</h4>
<h4 id="_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" tabindex="-1"><a class="header-anchor" href="#_7-4-5-3-\u6574\u4E2A\u8BBE\u8BA1\u548C-spring-\u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165" aria-hidden="true">#</a> 7.4.5.3 \u6574\u4E2A\u8BBE\u8BA1\u548C Spring \u7684\u8BBE\u8BA1\u8FD8\u662F\u6709\u4E00\u5B9A\u7684\u51FA\u5165</h4>
<p>spring \u6846\u67B6\u5E95\u5C42\u662F\u5F88\u590D\u6742\u7684\uFF0C\u8FDB\u884C\u4E86\u5F88\u6DF1\u5165\u7684\u5C01\u88C5\uFF0C\u5E76\u5BF9\u5916\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u6269\u5C55\u6027\u3002\u800C\u6211\u4EEC\u81EA\u5B9A\u4E49 SpringIOC \u6709\u4EE5\u4E0B\u51E0\u4E2A\u76EE\u7684\uFF1A</p>
<ul>
<li>\u4E86\u89E3 Spring \u5E95\u5C42\u5BF9\u5BF9\u8C61\u7684\u5927\u4F53\u7BA1\u7406\u673A\u5236\u3002</li>
<li>\u4E86\u89E3\u8BBE\u8BA1\u6A21\u5F0F\u5728\u5177\u4F53\u7684\u5F00\u53D1\u4E2D\u7684\u4F7F\u7528\u3002</li>
<li>\u4EE5\u540E\u5B66\u4E60 spring \u6E90\u7801\uFF0C\u901A\u8FC7\u8BE5\u6848\u4F8B\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u964D\u4F4E spring \u5B66\u4E60\u7684\u5165\u95E8\u6210\u672C\u3002</li>
</ul>
`,date:"2022-08-19",deps:[],links:[],pathInferred:"/posts/design-pattern/",pathLocale:"/",permalink:null,routeMeta:{title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"},sfcBlocks:[],slug:"README",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/design-pattern/README.md",filePathRelative:"posts/design-pattern/README.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/design-pattern/index.html.vue",componentFilePathRelative:"pages/posts/design-pattern/index.html.vue",componentFileChunkName:"v-db9b3b8e",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/design-pattern/index.html.js",dataFilePathRelative:"pages/posts/design-pattern/index.html.js",dataFileChunkName:"v-db9b3b8e",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/design-pattern/index.html",htmlFilePathRelative:"posts/design-pattern/index.html"},title:"Java 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F"},["/posts/design-pattern/index.html","/posts/design-pattern/README.md"]],["v-1390655e","/posts/linux/command.html",{_blog:{data:{key:"v-1390655e",path:"/posts/linux/command.html",title:"linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4",lang:"zh-CN",frontmatter:{title:"linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4",date:"2022-03-10T10:48:07.000Z",tag:["linux"],category:["linux"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207241420511.jpg",summary:`\u2003Linux\u7CFB\u7EDF\u547D\u4EE4\u6BD4\u8F83\u7E41\u6742\uFF0C\u867D\u7136\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u5728\u4F7F\u7528\u65F6\u5BB9\u6613\u9057\u5FD8\u5177\u4F53\u53C2\u6570\u7684\u542B\u4E49\uFF0C\u5F88\u662F\u8BA9\u4EBA\u82E6\u607C\uFF0C\u56E0\u6B64\u672C\u7BC7\u6587\u7AE0\u6536\u96C6\u4E00\u4E9B\u5E38\u7528\u7684Limux\u547D\u4EE4\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u67E5\u9605\u548C\u590D\u4E60\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/linux/command.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"linux"}],["meta",{property:"article:published_time",content:"2022-03-10T10:48:07.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Linux\u7CFB\u7EDF\u547D\u4EE4\u6BD4\u8F83\u7E41\u6742\uFF0C\u867D\u7136\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u5728\u4F7F\u7528\u65F6\u5BB9\u6613\u9057\u5FD8\u5177\u4F53\u53C2\u6570\u7684\u542B\u4E49\uFF0C\u5F88\u662F\u8BA9\u4EBA\u82E6\u607C\uFF0C\u56E0\u6B64\u672C\u7BC7\u6587\u7AE0\u6536\u96C6\u4E00\u4E9B\u5E38\u7528\u7684Limux\u547D\u4EE4\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u67E5\u9605\u548C\u590D\u4E60\u3002</p>
`,headers:[{level:1,title:"\u4E00\u3001\u5E38\u7528\u547D\u4EE4",slug:"\u4E00\u3001\u5E38\u7528\u547D\u4EE4",children:[{level:2,title:"1 cpu,\u5185\u5B58,\u786C\u76D8,\u7CFB\u7EDF\u7B49\u4FE1\u606F",slug:"_1-cpu-\u5185\u5B58-\u786C\u76D8-\u7CFB\u7EDF\u7B49\u4FE1\u606F",children:[]},{level:2,title:"2 \u6587\u4EF6\u641C\u7D22\u547D\u4EE4",slug:"_2-\u6587\u4EF6\u641C\u7D22\u547D\u4EE4",children:[]},{level:2,title:"3 \u8FDB\u7A0B\u547D\u4EE4",slug:"_3-\u8FDB\u7A0B\u547D\u4EE4",children:[]},{level:2,title:"4 \u67E5\u770B\u6307\u5B9A\u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528",slug:"_4-\u67E5\u770B\u6307\u5B9A\u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528",children:[]},{level:2,title:"5 \u6587\u4EF6\u4E0A\u4F20\u548C\u4E0B\u8F7D",slug:"_5-\u6587\u4EF6\u4E0A\u4F20\u548C\u4E0B\u8F7D",children:[]},{level:2,title:"6 \u7AEF\u53E3\u547D\u4EE4",slug:"_6-\u7AEF\u53E3\u547D\u4EE4",children:[]},{level:2,title:"7 Docker\u5BB9\u5668\u8FD0\u884C\u65E5\u5FD7\u547D\u4EE4",slug:"_7-docker\u5BB9\u5668\u8FD0\u884C\u65E5\u5FD7\u547D\u4EE4",children:[]},{level:2,title:"8\u6587\u4EF6\u5927\u5C0F\u67E5\u770B\u547D\u4EE4",slug:"_8\u6587\u4EF6\u5927\u5C0F\u67E5\u770B\u547D\u4EE4",children:[]}]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/linux/command.md",readingTime:{minutes:5.74,words:1723},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/linux/command.html`},key:"v-1390655e",path:"/posts/linux/command.html",title:"linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4",lang:"zh-CN",frontmatter:{title:"linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4",date:"2022-03-10T10:48:07.000Z",tag:["linux"],category:["linux"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207241420511.jpg",summary:`\u2003Linux\u7CFB\u7EDF\u547D\u4EE4\u6BD4\u8F83\u7E41\u6742\uFF0C\u867D\u7136\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u5728\u4F7F\u7528\u65F6\u5BB9\u6613\u9057\u5FD8\u5177\u4F53\u53C2\u6570\u7684\u542B\u4E49\uFF0C\u5F88\u662F\u8BA9\u4EBA\u82E6\u607C\uFF0C\u56E0\u6B64\u672C\u7BC7\u6587\u7AE0\u6536\u96C6\u4E00\u4E9B\u5E38\u7528\u7684Limux\u547D\u4EE4\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u67E5\u9605\u548C\u590D\u4E60\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/linux/command.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"linux"}],["meta",{property:"article:published_time",content:"2022-03-10T10:48:07.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Linux\u7CFB\u7EDF\u547D\u4EE4\u6BD4\u8F83\u7E41\u6742\uFF0C\u867D\u7136\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u5728\u4F7F\u7528\u65F6\u5BB9\u6613\u9057\u5FD8\u5177\u4F53\u53C2\u6570\u7684\u542B\u4E49\uFF0C\u5F88\u662F\u8BA9\u4EBA\u82E6\u607C\uFF0C\u56E0\u6B64\u672C\u7BC7\u6587\u7AE0\u6536\u96C6\u4E00\u4E9B\u5E38\u7528\u7684Limux\u547D\u4EE4\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u67E5\u9605\u548C\u590D\u4E60\u3002</p>
`,headers:[{level:1,title:"\u4E00\u3001\u5E38\u7528\u547D\u4EE4",slug:"\u4E00\u3001\u5E38\u7528\u547D\u4EE4",children:[{level:2,title:"1 cpu,\u5185\u5B58,\u786C\u76D8,\u7CFB\u7EDF\u7B49\u4FE1\u606F",slug:"_1-cpu-\u5185\u5B58-\u786C\u76D8-\u7CFB\u7EDF\u7B49\u4FE1\u606F",children:[]},{level:2,title:"2 \u6587\u4EF6\u641C\u7D22\u547D\u4EE4",slug:"_2-\u6587\u4EF6\u641C\u7D22\u547D\u4EE4",children:[]},{level:2,title:"3 \u8FDB\u7A0B\u547D\u4EE4",slug:"_3-\u8FDB\u7A0B\u547D\u4EE4",children:[]},{level:2,title:"4 \u67E5\u770B\u6307\u5B9A\u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528",slug:"_4-\u67E5\u770B\u6307\u5B9A\u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528",children:[]},{level:2,title:"5 \u6587\u4EF6\u4E0A\u4F20\u548C\u4E0B\u8F7D",slug:"_5-\u6587\u4EF6\u4E0A\u4F20\u548C\u4E0B\u8F7D",children:[]},{level:2,title:"6 \u7AEF\u53E3\u547D\u4EE4",slug:"_6-\u7AEF\u53E3\u547D\u4EE4",children:[]},{level:2,title:"7 Docker\u5BB9\u5668\u8FD0\u884C\u65E5\u5FD7\u547D\u4EE4",slug:"_7-docker\u5BB9\u5668\u8FD0\u884C\u65E5\u5FD7\u547D\u4EE4",children:[]},{level:2,title:"8\u6587\u4EF6\u5927\u5C0F\u67E5\u770B\u547D\u4EE4",slug:"_8\u6587\u4EF6\u5927\u5C0F\u67E5\u770B\u547D\u4EE4",children:[]}]}],content:`---
title: linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4
date: 2022-03-10 10:48:07
tag:
  - linux
category:
  - linux
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207241420511.jpg
---

&emsp;Linux\u7CFB\u7EDF\u547D\u4EE4\u6BD4\u8F83\u7E41\u6742\uFF0C\u867D\u7136\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u5728\u4F7F\u7528\u65F6\u5BB9\u6613\u9057\u5FD8\u5177\u4F53\u53C2\u6570\u7684\u542B\u4E49\uFF0C\u5F88\u662F\u8BA9\u4EBA\u82E6\u607C\uFF0C\u56E0\u6B64\u672C\u7BC7\u6587\u7AE0\u6536\u96C6\u4E00\u4E9B\u5E38\u7528\u7684Limux\u547D\u4EE4\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u67E5\u9605\u548C\u590D\u4E60\u3002
<!-- more -->

# \u4E00\u3001\u5E38\u7528\u547D\u4EE4

## 1 cpu,\u5185\u5B58,\u786C\u76D8,\u7CFB\u7EDF\u7B49\u4FE1\u606F

\`\`\`bash
#\u903B\u8F91CPU\u4E2A\u6570
cat /proc/cpuinfo | grep "processor" | wc -l
#\u903B\u8F91cpu\u4E2A\u6570
cat /proc/cpuinfo | grep "physical id" | sort | uniq | wc -l
#cpu\u5168\u90E8\u4FE1\u606F
cat /proc/cpuinfo
#cpu\u578B\u53F7\u4FE1\u606F
cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c
#\u5185\u5B58\u4FE1\u606F
cat /proc/meminfo
#\u786C\u76D8\u4FE1\u606F
fdisk -l    # \u7B2C\u4E00\u79CD
free -h    # \u4EE5g\u5355\u4F4D
free -m    # \u4EE5M\u5355\u4F4D
#\u7CFB\u7EDF\u5185\u6838\u4FE1\u606F
uname -a
#\u673A\u5668\u578B\u53F7
dmidecode | grep "Product Name"
\`\`\`

## 2 \u6587\u4EF6\u641C\u7D22\u547D\u4EE4

**\u6839\u636E\u6587\u4EF6\u6216\u76EE\u5F55\u540D\u79F0\u641C\u7D22\uFF1A find \u3010\u641C\u7D22\u76EE\u5F55\u3011\u3010-name \u6216\u8005-iname\u3011\u3010\u641C\u7D22\u5B57\u7B26\u3011\uFF1A-name \u548C-iname \u7684\u533A\u522B\u4E00\u4E2A\u533A\u5206\u5927\u5C0F\u5199\uFF0C\u4E00\u4E2A\u4E0D\u533A\u5206\u5927\u5C0F\u5199**

\`\`\`bash
#\u7CBE\u51C6\u641C\u7D22\uFF0C\u540D\u5B57\u5FC5\u987B\u4E3A init \u624D\u80FD\u641C\u7D22\u7684\u5230
find /etc -name init
#\u7CBE\u51C6\u641C\u7D22\uFF0C\u540D\u5B57\u5FC5\u987B\u4E3A init\u6216\u8005\u6709\u5B57\u6BCD\u5927\u5199\u4E5F\u80FD\u641C\u7D22\u7684\u5230
find /etc -iname init
#\u6A21\u7CCA\u641C\u7D22\uFF0C\u4EE5 init \u7ED3\u5C3E\u7684\u6587\u4EF6\u6216\u76EE\u5F55\u540D
find /etc -name *init
#\u6A21\u7CCA\u641C\u7D22\uFF0C\uFF1F \u8868\u793A\u5355\u4E2A\u5B57\u7B26\uFF0C\u5373\u641C\u7D22\u5230 init___
find /etc -name init???
\`\`\`

**\u6839\u636E\u6587\u4EF6\u5927\u5C0F\u8FDB\u884C\u641C\u7D22\uFF1A\`find [\u641C\u7D22\u8303\u56F4] [-size] [n]\`**

\`\`\`bash
#\u5728\u6839\u76EE\u5F55\u4E0B\u67E5\u627E\u5927\u4E8E 100M \u7684\u6587\u4EF6,\u8FD9\u91CC +n \u8868\u793A\u5927\u4E8E\uFF0C-n \u8868\u793A\u5C0F\u4E8E\uFF0Cn \u8868\u793A\u7B49\u4E8E
find / -size +204800\u3000\u3000
\`\`\`

**\u6839\u636E\u6587\u4EF6\u7C7B\u578B\u8FDB\u884C\u641C\u7D22\uFF1A\`find [\u641C\u7D22\u8303\u56F4] [-type]\`**

\`\`\`bash
#\u67E5\u627E/home\u76EE\u5F55\u4E0B\u6587\u4EF6\u7C7B\u578B\u662F\u76EE\u5F55\u7684\u6587\u4EF6\uFF0C-type \u6839\u636E\u6587\u4EF6\u7C7B\u578B\u67E5\u627E\uFF1Af\u8868\u793A\u6587\u4EF6\uFF0Cd\u8868\u793A\u76EE\u5F55\uFF0Cl\u8868\u793A\u8F6F\u94FE\u63A5
find /home -type l\u3000\u3000
\`\`\`

**\u6839\u636E\u7EC4\u5408\u547D\u4EE4\u8FDB\u884C\u641C\u7D22**

\`\`\`bash
#\u8FD9\u91CC\u6709\u4E24\u4E2A\u53C2\u6570\uFF1A\u2460\u3001-a  \u8868\u793A\u4E24\u4E2A\u6761\u4EF6\u540C\u65F6\u6EE1\u8DB3\uFF08and\uFF09\u2461\u3001-o  \u8868\u793A\u4E24\u4E2A\u6761\u4EF6\u6EE1\u8DB3\u4EFB\u610F\u4E00\u4E2A\u5373\u53EF\uFF08or\uFF09
#\u8303\u4F8B\uFF1A\u67E5\u627E/etc\u76EE\u5F55\u4E0B\u5927\u4E8E80MB\u540C\u65F6\u5C0F\u4E8E100MB\u7684\u6587\u4EF6
find /etc -size +163840 -a -size -204800\u3000
\`\`\`

## 3 \u8FDB\u7A0B\u547D\u4EE4

**ps \u547D\u4EE4**

\`\`\`bash
#\u67E5\u627Enginx\u5E94\u7528\u7684\u8FDB\u7A0B\u4FE1\u606F
ps -ef | grep nginx
#\u6216
ps aux | grep nginx
#\u4E24\u8005\u7684\u8F93\u51FA\u7ED3\u679C\u5DEE\u522B\u4E0D\u5927\uFF0C\u4F46\u5C55\u793A\u98CE\u683C\u4E0D\u540C\u3002aux\u662FBSD\u98CE\u683C\uFF0C-ef\u662FSystem V\u98CE\u683C\u3002\u8FD9\u662F\u6B21\u8981\u7684\u533A\u522B\uFF0C\u4E00\u4E2A\u5F71\u54CD\u4F7F\u7528\u7684\u533A\u522B\u662Faux\u4F1A\u622A\u65ADcommand\u5217\uFF0C\u800C-ef\u4E0D\u4F1A
#\u67E5\u770B\u8FDB\u7A0B\u5E94\u7528\u542F\u52A8\u8DEF\u5F84
cd /proc/pid
ls -l
#cwd\u7B26\u53F7\u94FE\u63A5\u7684\u662F\u8FDB\u7A0B\u8FD0\u884C\u76EE\u5F55\uFF1Bexe\u7B26\u53F7\u8FDE\u63A5\u5C31\u662F\u6267\u884C\u7A0B\u5E8F\u7684\u7EDD\u5BF9\u8DEF\u5F84\uFF1Bcmdline\u5C31\u662F\u7A0B\u5E8F\u8FD0\u884C\u65F6\u8F93\u5165\u7684\u547D\u4EE4\u884C\u547D\u4EE4\uFF1Benviron\u8BB0\u5F55\u4E86\u8FDB\u7A0B\u8FD0\u884C\u65F6\u7684\u73AF\u5883\u53D8\u91CF\uFF1Bfd\u76EE\u5F55\u4E0B\u662F\u8FDB\u7A0B\u6253\u5F00\u6216\u4F7F\u7528\u7684\u6587\u4EF6\u7684\u7B26\u53F7\u8FDE\u63A5\u3002
#\u6740\u6389\u8FDB\u7A0B
kill pid
\`\`\`

## 4 \u67E5\u770B\u6307\u5B9A\u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528

**netstat \u547D\u4EE4**

\`\`\`bash
netstat -tunlp | grep 8080
#\u5982\u679C\u547D\u4EE4\u4E0D\u5B58\u5728\uFF0C\u8BF7\u5B89\u88C5\uFF1A
yum install net-tools
\`\`\`

**losf \u547D\u4EE4**

\`\`\`bash
losf -i:8080
#\u5982\u679C\u547D\u4EE4\u4E0D\u5B58\u5728\uFF0C\u8BF7\u5B89\u88C5\uFF1A
yum install losf
\`\`\`

## 5 \u6587\u4EF6\u4E0A\u4F20\u548C\u4E0B\u8F7D

**\u6B65\u9AA4\u4E00\uFF1Aroot \u6743\u9650\u4E0B\uFF0C\u5B89\u88C5 lrzsz \u8F6F\u4EF6**

\`\`\`bash
#Centos\u7CFB\u7EDF
yum -y install lrzsz
\`\`\`

**\u6B65\u9AA4\u4E8C\uFF1A\u4E0A\u4F20\u6587\u4EF6\u3002\u8FDB\u5EA6\u9700\u8981\u4E0A\u4F20\u6587\u4EF6\u76EE\u5F55\uFF0C\u4F7F\u7528 rz \u547D\u4EE4\uFF0C\u628A\u6587\u4EF6\u4ECE windows \u7CFB\u7EDF\u4E0A\u4F20\u5230 linux \u7CFB\u7EDF\u4E2D**

\`\`\`bash
cd \`\u6587\u4EF6\u4E0A\u4F20\u76EE\u5F55\`
rz
\`\`\`

**\u6B65\u9AA4\u4E09\uFF1A\u4E0B\u8F7D\u6587\u4EF6\u3002\u4F7F\u7528 sz \u547D\u4EE4\uFF0C\u628A\u6587\u4EF6\u4ECE linux \u7CFB\u7EDF\u4E0B\u8F7D\u5230 windows \u7CFB\u7EDF\u4E2D**

\`\`\`bash
cd \`\u6587\u4EF6\u76EE\u5F55\`
sz \`filename\`
\`\`\`

## 6 \u7AEF\u53E3\u547D\u4EE4

**1 \u5F00\u653E\u7AEF\u53E3**

\`\`\`bash
#\u6C38\u4E45\u5F00\u653E5672\u7AEF\u53E3
firewall-cmd --zone=public --add-port=5672/tcp --permanent
#\u5173\u95ED5672\u7AEF\u53E3
firewall-cmd --zone=public --remove-port=5672/tcp --permanent
#\u914D\u7F6E\u7ACB\u5373\u751F\u6548
firewall-cmd --reload
\`\`\`

**2 \u67E5\u770B\u9632\u706B\u5899\u6240\u6709\u5F00\u653E\u7684\u7AEF\u53E3**

\`\`\`bash
firewall-cmd --zone=public --list-ports
\`\`\`

**3 \u67E5\u770B\u9632\u706B\u5899\u6240\u6709\u5F00\u653E\u7684\u7AEF\u53E3**
\u5982\u679C\u8981\u5F00\u653E\u7684\u7AEF\u53E3\u592A\u591A\uFF0C\u5ACC\u9EBB\u70E6\uFF0C\u53EF\u4EE5\u5173\u95ED\u9632\u706B\u5899\uFF0C\u5B89\u5168\u6027\u81EA\u884C\u8BC4\u4F30

\`\`\`bash
systemctl stop firewalld.service
\`\`\`

**4 \u67E5\u770B\u9632\u706B\u5899\u72B6\u6001**

\`\`\`bash
systemctl status firewalld.service
#\u6216
firewall-cmd --state
\`\`\`

**5 \u67E5\u770B\u76D1\u542C\u7684\u7AEF\u53E3**

\`\`\`bash
netstat -lnpt
\`\`\`

PS:centos7 \u9ED8\u8BA4\u6CA1\u6709 netstat \u547D\u4EE4\uFF0C\u9700\u8981\u5B89\u88C5 net-tools \u5DE5\u5177\uFF0Cyum install -y net-tools
**6 \u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528\u547D\u4EE4**

\`\`\`bash
netstat -lnpt | grep 5672
\`\`\`

**7 \u67E5\u770B\u8FDB\u7A0B\u7684\u8BE6\u7EC6\u4FE1\u606F**

\`\`\`bash
ps 6832
\`\`\`

**8 \u4E2D\u6B62\u8FDB\u7A0B**

\`\`\`bash
kill -9 6832
\`\`\`
## 7 Docker\u5BB9\u5668\u8FD0\u884C\u65E5\u5FD7\u547D\u4EE4

\u901A\u8FC7docker logs\u547D\u4EE4\u53EF\u4EE5\u67E5\u770B\u5BB9\u5668\u7684\u65E5\u5FD7\uFF1A\`docker logs -f -t --tail 100 datacenter\`

\`\`\`bash
# \u8BED\u6CD5\u683C\u5F0F
$ docker logs [OPTIONS] CONTAINER
  Options:
        --details        \u663E\u793A\u66F4\u591A\u7684\u4FE1\u606F
    -f, --follow         \u8DDF\u8E2A\u5B9E\u65F6\u65E5\u5FD7
        --since string   \u663E\u793A\u81EA\u67D0\u4E2Atimestamp\u4E4B\u540E\u7684\u65E5\u5FD7\uFF0C\u6216\u76F8\u5BF9\u65F6\u95F4\uFF0C\u598242m\uFF08\u537342\u5206\u949F\uFF09
        --tail string    \u4ECE\u65E5\u5FD7\u672B\u5C3E\u663E\u793A\u591A\u5C11\u884C\u65E5\u5FD7\uFF0C \u9ED8\u8BA4\u662Fall
    -t, --timestamps     \u663E\u793A\u65F6\u95F4\u6233
        --until string   \u663E\u793A\u81EA\u67D0\u4E2Atimestamp\u4E4B\u524D\u7684\u65E5\u5FD7\uFF0C\u6216\u76F8\u5BF9\u65F6\u95F4\uFF0C\u598242m\uFF08\u537342\u5206\u949F\uFF09
\`\`\`
\u4E3E\u4F8B\u8BF4\u660E\uFF1A
\`\`\`bash
#\u67E5\u770B\u6307\u5B9A\u65F6\u95F4\u540E\u7684\u65E5\u5FD7\uFF0C\u53EA\u663E\u793A\u6700\u540E100\u884C
docker logs -f -t --since="2018-02-08" --tail=100 CONTAINER_ID
#\u67E5\u770B\u6700\u8FD130\u5206\u949F\u7684\u65E5\u5FD7:
docker logs --since 30m CONTAINER_ID
#\u67E5\u770B\u67D0\u65F6\u95F4\u4E4B\u540E\u7684\u65E5\u5FD7\uFF1A
docker logs -t --since="2018-02-08T13:23:37" CONTAINER_ID
#\u67E5\u770B\u67D0\u65F6\u95F4\u6BB5\u65E5\u5FD7\uFF1A
docker logs -t --since="2018-02-08T13:23:37" --until "2018-02-09T12:23:37" CONTAINER_ID
\`\`\`
## 8\u6587\u4EF6\u5927\u5C0F\u67E5\u770B\u547D\u4EE4

1\u3001\u67E5\u770B\u5F53\u524D\u6587\u4EF6\u5939\u53CA\u6587\u4EF6\u5939\u4E0B\u5927\u5C0F\uFF0Ch:\u4EE5K,M,G\u4E3A\u5355\u4F4D\u663E\u793A\uFF0Cmax-depth\u6807\u8BC6\u76EE\u5F55\u7684\u6DF1\u5EA6
\`\`\`bash
du -ah --max-depth=1
\`\`\`
2\u3001\u67E5\u770B\u5F53\u524D\u6587\u4EF6\u5939\u603B\u5927\u5C0F
\`\`\`bash
du -sh
\`\`\`
3\u3001\u67E5\u770B\u6307\u5B9A\u6587\u4EF6\u5939\u603B\u5927\u5C0F
\`\`\`bash
du -sh ./data
\`\`\`
4\u3001\u663E\u793A\u76EE\u5F55\u6216\u6240\u6709\u6587\u4EF6\u6240\u5360\u7A7A\u95F4
\`\`\`bash
du 
\`\`\`
5\u3001\u6587\u4EF6\u4ECE\u5927\u5230\u5C0F\u6392\u5E8F
\`\`\`bash
du -sh  * | sort -rh
\`\`\`
6\u3001\u53C2\u6570\u8BF4\u660E

- -a\u6216-all \u663E\u793A\u76EE\u5F55\u4E2D\u4E2A\u522B\u6587\u4EF6\u7684\u5927\u5C0F\u3002
- -b\u6216-bytes \u663E\u793A\u76EE\u5F55\u6216\u6587\u4EF6\u5927\u5C0F\u65F6\uFF0C\u4EE5byte\u4E3A\u5355\u4F4D\u3002
- -c\u6216--total \u9664\u4E86\u663E\u793A\u4E2A\u522B\u76EE\u5F55\u6216\u6587\u4EF6\u7684\u5927\u5C0F\u5916\uFF0C\u540C\u65F6\u4E5F\u663E\u793A\u6240\u6709\u76EE\u5F55\u6216\u6587\u4EF6\u7684\u603B\u548C\u3002
- -D\u6216--dereference-args \u663E\u793A\u6307\u5B9A\u7B26\u53F7\u8FDE\u63A5\u7684\u6E90\u6587\u4EF6\u5927\u5C0F\u3002
- -h\u6216--human-readable \u4EE5K\uFF0CM\uFF0CG\u4E3A\u5355\u4F4D\uFF0C\u63D0\u9AD8\u4FE1\u606F\u7684\u53EF\u8BFB\u6027\u3002
- -H\u6216--si \u4E0E-h\u53C2\u6570\u76F8\u540C\uFF0C\u4F46\u662FK\uFF0CM\uFF0CG\u662F\u4EE51000\u4E3A\u6362\u7B97\u5355\u4F4D\u3002
- -k\u6216--kilobytes \u4EE51024 bytes\u4E3A\u5355\u4F4D\u3002
- -l\u6216--count-links \u91CD\u590D\u8BA1\u7B97\u786C\u4EF6\u8FDE\u63A5\u7684\u6587\u4EF6\u3002
- -L<\u7B26\u53F7\u8FDE\u63A5>\u6216--dereference<\u7B26\u53F7\u8FDE\u63A5> \u663E\u793A\u9009\u9879\u4E2D\u6240\u6307\u5B9A\u7B26\u53F7\u8FDE\u63A5\u7684\u6E90\u6587\u4EF6\u5927\u5C0F\u3002
- -m\u6216--megabytes \u4EE51MB\u4E3A\u5355\u4F4D\u3002
- -s\u6216--summarize \u4EC5\u663E\u793A\u603B\u8BA1\u3002
- -S\u6216--separate-dirs \u663E\u793A\u4E2A\u522B\u76EE\u5F55\u7684\u5927\u5C0F\u65F6\uFF0C\u5E76\u4E0D\u542B\u5176\u5B50\u76EE\u5F55\u7684\u5927\u5C0F\u3002
- -x\u6216--one-file-xystem \u4EE5\u4E00\u5F00\u59CB\u5904\u7406\u65F6\u7684\u6587\u4EF6\u7CFB\u7EDF\u4E3A\u51C6\uFF0C\u82E5\u9047\u4E0A\u5176\u5B83\u4E0D\u540C\u7684\u6587\u4EF6\u7CFB\u7EDF\u76EE\u5F55\u5219\u7565\u8FC7\u3002
- -X<\u6587\u4EF6>\u6216--exclude-from=<\u6587\u4EF6> \u5728<\u6587\u4EF6>\u6307\u5B9A\u76EE\u5F55\u6216\u6587\u4EF6\u3002
- --exclude=<\u76EE\u5F55\u6216\u6587\u4EF6> \u7565\u8FC7\u6307\u5B9A\u7684\u76EE\u5F55\u6216\u6587\u4EF6\u3002
- --max-depth=<\u76EE\u5F55\u5C42\u6570> \u8D85\u8FC7\u6307\u5B9A\u5C42\u6570\u7684\u76EE\u5F55\u540E\uFF0C\u4E88\u4EE5\u5FFD\u7565\u3002
`,contentRendered:`<p>\u2003Linux\u7CFB\u7EDF\u547D\u4EE4\u6BD4\u8F83\u7E41\u6742\uFF0C\u867D\u7136\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u5728\u4F7F\u7528\u65F6\u5BB9\u6613\u9057\u5FD8\u5177\u4F53\u53C2\u6570\u7684\u542B\u4E49\uFF0C\u5F88\u662F\u8BA9\u4EBA\u82E6\u607C\uFF0C\u56E0\u6B64\u672C\u7BC7\u6587\u7AE0\u6536\u96C6\u4E00\u4E9B\u5E38\u7528\u7684Limux\u547D\u4EE4\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u67E5\u9605\u548C\u590D\u4E60\u3002</p>
<!-- more -->
<h1 id="\u4E00\u3001\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> \u4E00\u3001\u5E38\u7528\u547D\u4EE4</h1>
<h2 id="_1-cpu-\u5185\u5B58-\u786C\u76D8-\u7CFB\u7EDF\u7B49\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_1-cpu-\u5185\u5B58-\u786C\u76D8-\u7CFB\u7EDF\u7B49\u4FE1\u606F" aria-hidden="true">#</a> 1 cpu,\u5185\u5B58,\u786C\u76D8,\u7CFB\u7EDF\u7B49\u4FE1\u606F</h2>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u903B\u8F91CPU\u4E2A\u6570</span>
<span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"processor"</span> <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span>
<span class="token comment">#\u903B\u8F91cpu\u4E2A\u6570</span>
<span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"physical id"</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span>
<span class="token comment">#cpu\u5168\u90E8\u4FE1\u606F</span>
<span class="token function">cat</span> /proc/cpuinfo
<span class="token comment">#cpu\u578B\u53F7\u4FE1\u606F</span>
<span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> name <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-f2</span> -d: <span class="token operator">|</span> <span class="token function">uniq</span> <span class="token parameter variable">-c</span>
<span class="token comment">#\u5185\u5B58\u4FE1\u606F</span>
<span class="token function">cat</span> /proc/meminfo
<span class="token comment">#\u786C\u76D8\u4FE1\u606F</span>
<span class="token function">fdisk</span> <span class="token parameter variable">-l</span>    <span class="token comment"># \u7B2C\u4E00\u79CD</span>
<span class="token function">free</span> <span class="token parameter variable">-h</span>    <span class="token comment"># \u4EE5g\u5355\u4F4D</span>
<span class="token function">free</span> <span class="token parameter variable">-m</span>    <span class="token comment"># \u4EE5M\u5355\u4F4D</span>
<span class="token comment">#\u7CFB\u7EDF\u5185\u6838\u4FE1\u606F</span>
<span class="token function">uname</span> <span class="token parameter variable">-a</span>
<span class="token comment">#\u673A\u5668\u578B\u53F7</span>
dmidecode <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"Product Name"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u6587\u4EF6\u641C\u7D22\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_2-\u6587\u4EF6\u641C\u7D22\u547D\u4EE4" aria-hidden="true">#</a> 2 \u6587\u4EF6\u641C\u7D22\u547D\u4EE4</h2>
<p><strong>\u6839\u636E\u6587\u4EF6\u6216\u76EE\u5F55\u540D\u79F0\u641C\u7D22\uFF1A find \u3010\u641C\u7D22\u76EE\u5F55\u3011\u3010-name \u6216\u8005-iname\u3011\u3010\u641C\u7D22\u5B57\u7B26\u3011\uFF1A-name \u548C-iname \u7684\u533A\u522B\u4E00\u4E2A\u533A\u5206\u5927\u5C0F\u5199\uFF0C\u4E00\u4E2A\u4E0D\u533A\u5206\u5927\u5C0F\u5199</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u7CBE\u51C6\u641C\u7D22\uFF0C\u540D\u5B57\u5FC5\u987B\u4E3A init \u624D\u80FD\u641C\u7D22\u7684\u5230</span>
<span class="token function">find</span> /etc <span class="token parameter variable">-name</span> init
<span class="token comment">#\u7CBE\u51C6\u641C\u7D22\uFF0C\u540D\u5B57\u5FC5\u987B\u4E3A init\u6216\u8005\u6709\u5B57\u6BCD\u5927\u5199\u4E5F\u80FD\u641C\u7D22\u7684\u5230</span>
<span class="token function">find</span> /etc <span class="token parameter variable">-iname</span> init
<span class="token comment">#\u6A21\u7CCA\u641C\u7D22\uFF0C\u4EE5 init \u7ED3\u5C3E\u7684\u6587\u4EF6\u6216\u76EE\u5F55\u540D</span>
<span class="token function">find</span> /etc <span class="token parameter variable">-name</span> *init
<span class="token comment">#\u6A21\u7CCA\u641C\u7D22\uFF0C\uFF1F \u8868\u793A\u5355\u4E2A\u5B57\u7B26\uFF0C\u5373\u641C\u7D22\u5230 init___</span>
<span class="token function">find</span> /etc <span class="token parameter variable">-name</span> init???
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6839\u636E\u6587\u4EF6\u5927\u5C0F\u8FDB\u884C\u641C\u7D22\uFF1A<code v-pre>find [\u641C\u7D22\u8303\u56F4] [-size] [n]</code></strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u5728\u6839\u76EE\u5F55\u4E0B\u67E5\u627E\u5927\u4E8E 100M \u7684\u6587\u4EF6,\u8FD9\u91CC +n \u8868\u793A\u5927\u4E8E\uFF0C-n \u8868\u793A\u5C0F\u4E8E\uFF0Cn \u8868\u793A\u7B49\u4E8E</span>
<span class="token function">find</span> / <span class="token parameter variable">-size</span> +204800\u3000\u3000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6839\u636E\u6587\u4EF6\u7C7B\u578B\u8FDB\u884C\u641C\u7D22\uFF1A<code v-pre>find [\u641C\u7D22\u8303\u56F4] [-type]</code></strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u627E/home\u76EE\u5F55\u4E0B\u6587\u4EF6\u7C7B\u578B\u662F\u76EE\u5F55\u7684\u6587\u4EF6\uFF0C-type \u6839\u636E\u6587\u4EF6\u7C7B\u578B\u67E5\u627E\uFF1Af\u8868\u793A\u6587\u4EF6\uFF0Cd\u8868\u793A\u76EE\u5F55\uFF0Cl\u8868\u793A\u8F6F\u94FE\u63A5</span>
<span class="token function">find</span> /home <span class="token parameter variable">-type</span> l\u3000\u3000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6839\u636E\u7EC4\u5408\u547D\u4EE4\u8FDB\u884C\u641C\u7D22</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u8FD9\u91CC\u6709\u4E24\u4E2A\u53C2\u6570\uFF1A\u2460\u3001-a  \u8868\u793A\u4E24\u4E2A\u6761\u4EF6\u540C\u65F6\u6EE1\u8DB3\uFF08and\uFF09\u2461\u3001-o  \u8868\u793A\u4E24\u4E2A\u6761\u4EF6\u6EE1\u8DB3\u4EFB\u610F\u4E00\u4E2A\u5373\u53EF\uFF08or\uFF09</span>
<span class="token comment">#\u8303\u4F8B\uFF1A\u67E5\u627E/etc\u76EE\u5F55\u4E0B\u5927\u4E8E80MB\u540C\u65F6\u5C0F\u4E8E100MB\u7684\u6587\u4EF6</span>
<span class="token function">find</span> /etc <span class="token parameter variable">-size</span> +163840 <span class="token parameter variable">-a</span> <span class="token parameter variable">-size</span> <span class="token parameter variable">-204800</span>\u3000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-\u8FDB\u7A0B\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_3-\u8FDB\u7A0B\u547D\u4EE4" aria-hidden="true">#</a> 3 \u8FDB\u7A0B\u547D\u4EE4</h2>
<p><strong>ps \u547D\u4EE4</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u627Enginx\u5E94\u7528\u7684\u8FDB\u7A0B\u4FE1\u606F</span>
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> nginx
<span class="token comment">#\u6216</span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> nginx
<span class="token comment">#\u4E24\u8005\u7684\u8F93\u51FA\u7ED3\u679C\u5DEE\u522B\u4E0D\u5927\uFF0C\u4F46\u5C55\u793A\u98CE\u683C\u4E0D\u540C\u3002aux\u662FBSD\u98CE\u683C\uFF0C-ef\u662FSystem V\u98CE\u683C\u3002\u8FD9\u662F\u6B21\u8981\u7684\u533A\u522B\uFF0C\u4E00\u4E2A\u5F71\u54CD\u4F7F\u7528\u7684\u533A\u522B\u662Faux\u4F1A\u622A\u65ADcommand\u5217\uFF0C\u800C-ef\u4E0D\u4F1A</span>
<span class="token comment">#\u67E5\u770B\u8FDB\u7A0B\u5E94\u7528\u542F\u52A8\u8DEF\u5F84</span>
<span class="token builtin class-name">cd</span> /proc/pid
<span class="token function">ls</span> <span class="token parameter variable">-l</span>
<span class="token comment">#cwd\u7B26\u53F7\u94FE\u63A5\u7684\u662F\u8FDB\u7A0B\u8FD0\u884C\u76EE\u5F55\uFF1Bexe\u7B26\u53F7\u8FDE\u63A5\u5C31\u662F\u6267\u884C\u7A0B\u5E8F\u7684\u7EDD\u5BF9\u8DEF\u5F84\uFF1Bcmdline\u5C31\u662F\u7A0B\u5E8F\u8FD0\u884C\u65F6\u8F93\u5165\u7684\u547D\u4EE4\u884C\u547D\u4EE4\uFF1Benviron\u8BB0\u5F55\u4E86\u8FDB\u7A0B\u8FD0\u884C\u65F6\u7684\u73AF\u5883\u53D8\u91CF\uFF1Bfd\u76EE\u5F55\u4E0B\u662F\u8FDB\u7A0B\u6253\u5F00\u6216\u4F7F\u7528\u7684\u6587\u4EF6\u7684\u7B26\u53F7\u8FDE\u63A5\u3002</span>
<span class="token comment">#\u6740\u6389\u8FDB\u7A0B</span>
<span class="token function">kill</span> pid
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-\u67E5\u770B\u6307\u5B9A\u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528" tabindex="-1"><a class="header-anchor" href="#_4-\u67E5\u770B\u6307\u5B9A\u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528" aria-hidden="true">#</a> 4 \u67E5\u770B\u6307\u5B9A\u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528</h2>
<p><strong>netstat \u547D\u4EE4</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">netstat</span> <span class="token parameter variable">-tunlp</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">8080</span>
<span class="token comment">#\u5982\u679C\u547D\u4EE4\u4E0D\u5B58\u5728\uFF0C\u8BF7\u5B89\u88C5\uFF1A</span>
yum <span class="token function">install</span> net-tools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>losf \u547D\u4EE4</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>losf <span class="token parameter variable">-i:8080</span>
<span class="token comment">#\u5982\u679C\u547D\u4EE4\u4E0D\u5B58\u5728\uFF0C\u8BF7\u5B89\u88C5\uFF1A</span>
yum <span class="token function">install</span> losf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-\u6587\u4EF6\u4E0A\u4F20\u548C\u4E0B\u8F7D" tabindex="-1"><a class="header-anchor" href="#_5-\u6587\u4EF6\u4E0A\u4F20\u548C\u4E0B\u8F7D" aria-hidden="true">#</a> 5 \u6587\u4EF6\u4E0A\u4F20\u548C\u4E0B\u8F7D</h2>
<p><strong>\u6B65\u9AA4\u4E00\uFF1Aroot \u6743\u9650\u4E0B\uFF0C\u5B89\u88C5 lrzsz \u8F6F\u4EF6</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#Centos\u7CFB\u7EDF</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> lrzsz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA4\u4E8C\uFF1A\u4E0A\u4F20\u6587\u4EF6\u3002\u8FDB\u5EA6\u9700\u8981\u4E0A\u4F20\u6587\u4EF6\u76EE\u5F55\uFF0C\u4F7F\u7528 rz \u547D\u4EE4\uFF0C\u628A\u6587\u4EF6\u4ECE windows \u7CFB\u7EDF\u4E0A\u4F20\u5230 linux \u7CFB\u7EDF\u4E2D</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable"><span class="token variable">\`</span>\u6587\u4EF6\u4E0A\u4F20\u76EE\u5F55<span class="token variable">\`</span></span>
rz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B65\u9AA4\u4E09\uFF1A\u4E0B\u8F7D\u6587\u4EF6\u3002\u4F7F\u7528 sz \u547D\u4EE4\uFF0C\u628A\u6587\u4EF6\u4ECE linux \u7CFB\u7EDF\u4E0B\u8F7D\u5230 windows \u7CFB\u7EDF\u4E2D</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable"><span class="token variable">\`</span>\u6587\u4EF6\u76EE\u5F55<span class="token variable">\`</span></span>
sz <span class="token variable"><span class="token variable">\`</span>filename<span class="token variable">\`</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-\u7AEF\u53E3\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_6-\u7AEF\u53E3\u547D\u4EE4" aria-hidden="true">#</a> 6 \u7AEF\u53E3\u547D\u4EE4</h2>
<p><strong>1 \u5F00\u653E\u7AEF\u53E3</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u6C38\u4E45\u5F00\u653E5672\u7AEF\u53E3</span>
firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">5672</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment">#\u5173\u95ED5672\u7AEF\u53E3</span>
firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --remove-port<span class="token operator">=</span><span class="token number">5672</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment">#\u914D\u7F6E\u7ACB\u5373\u751F\u6548</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2 \u67E5\u770B\u9632\u706B\u5899\u6240\u6709\u5F00\u653E\u7684\u7AEF\u53E3</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --list-ports
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3 \u67E5\u770B\u9632\u706B\u5899\u6240\u6709\u5F00\u653E\u7684\u7AEF\u53E3</strong>
\u5982\u679C\u8981\u5F00\u653E\u7684\u7AEF\u53E3\u592A\u591A\uFF0C\u5ACC\u9EBB\u70E6\uFF0C\u53EF\u4EE5\u5173\u95ED\u9632\u706B\u5899\uFF0C\u5B89\u5168\u6027\u81EA\u884C\u8BC4\u4F30</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>systemctl stop firewalld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>4 \u67E5\u770B\u9632\u706B\u5899\u72B6\u6001</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>systemctl status firewalld.service
<span class="token comment">#\u6216</span>
firewall-cmd <span class="token parameter variable">--state</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5 \u67E5\u770B\u76D1\u542C\u7684\u7AEF\u53E3</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">netstat</span> <span class="token parameter variable">-lnpt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>PS:centos7 \u9ED8\u8BA4\u6CA1\u6709 netstat \u547D\u4EE4\uFF0C\u9700\u8981\u5B89\u88C5 net-tools \u5DE5\u5177\uFF0Cyum install -y net-tools
<strong>6 \u7AEF\u53E3\u8FDB\u7A0B\u5360\u7528\u547D\u4EE4</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">netstat</span> <span class="token parameter variable">-lnpt</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">5672</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>7 \u67E5\u770B\u8FDB\u7A0B\u7684\u8BE6\u7EC6\u4FE1\u606F</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">ps</span> <span class="token number">6832</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>8 \u4E2D\u6B62\u8FDB\u7A0B</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token number">6832</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_7-docker\u5BB9\u5668\u8FD0\u884C\u65E5\u5FD7\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_7-docker\u5BB9\u5668\u8FD0\u884C\u65E5\u5FD7\u547D\u4EE4" aria-hidden="true">#</a> 7 Docker\u5BB9\u5668\u8FD0\u884C\u65E5\u5FD7\u547D\u4EE4</h2>
<p>\u901A\u8FC7docker logs\u547D\u4EE4\u53EF\u4EE5\u67E5\u770B\u5BB9\u5668\u7684\u65E5\u5FD7\uFF1A<code v-pre>docker logs -f -t --tail 100 datacenter</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u8BED\u6CD5\u683C\u5F0F</span>
$ <span class="token function">docker</span> logs <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER
  Options:
        <span class="token parameter variable">--details</span>        \u663E\u793A\u66F4\u591A\u7684\u4FE1\u606F
    -f, <span class="token parameter variable">--follow</span>         \u8DDF\u8E2A\u5B9E\u65F6\u65E5\u5FD7
        <span class="token parameter variable">--since</span> string   \u663E\u793A\u81EA\u67D0\u4E2Atimestamp\u4E4B\u540E\u7684\u65E5\u5FD7\uFF0C\u6216\u76F8\u5BF9\u65F6\u95F4\uFF0C\u598242m\uFF08\u537342\u5206\u949F\uFF09
        <span class="token parameter variable">--tail</span> string    \u4ECE\u65E5\u5FD7\u672B\u5C3E\u663E\u793A\u591A\u5C11\u884C\u65E5\u5FD7\uFF0C \u9ED8\u8BA4\u662Fall
    -t, <span class="token parameter variable">--timestamps</span>     \u663E\u793A\u65F6\u95F4\u6233
        <span class="token parameter variable">--until</span> string   \u663E\u793A\u81EA\u67D0\u4E2Atimestamp\u4E4B\u524D\u7684\u65E5\u5FD7\uFF0C\u6216\u76F8\u5BF9\u65F6\u95F4\uFF0C\u598242m\uFF08\u537342\u5206\u949F\uFF09
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3E\u4F8B\u8BF4\u660E\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u770B\u6307\u5B9A\u65F6\u95F4\u540E\u7684\u65E5\u5FD7\uFF0C\u53EA\u663E\u793A\u6700\u540E100\u884C</span>
<span class="token function">docker</span> logs <span class="token parameter variable">-f</span> <span class="token parameter variable">-t</span> <span class="token parameter variable">--since</span><span class="token operator">=</span><span class="token string">"2018-02-08"</span> <span class="token parameter variable">--tail</span><span class="token operator">=</span><span class="token number">100</span> CONTAINER_ID
<span class="token comment">#\u67E5\u770B\u6700\u8FD130\u5206\u949F\u7684\u65E5\u5FD7:</span>
<span class="token function">docker</span> logs <span class="token parameter variable">--since</span> 30m CONTAINER_ID
<span class="token comment">#\u67E5\u770B\u67D0\u65F6\u95F4\u4E4B\u540E\u7684\u65E5\u5FD7\uFF1A</span>
<span class="token function">docker</span> logs <span class="token parameter variable">-t</span> <span class="token parameter variable">--since</span><span class="token operator">=</span><span class="token string">"2018-02-08T13:23:37"</span> CONTAINER_ID
<span class="token comment">#\u67E5\u770B\u67D0\u65F6\u95F4\u6BB5\u65E5\u5FD7\uFF1A</span>
<span class="token function">docker</span> logs <span class="token parameter variable">-t</span> <span class="token parameter variable">--since</span><span class="token operator">=</span><span class="token string">"2018-02-08T13:23:37"</span> <span class="token parameter variable">--until</span> <span class="token string">"2018-02-09T12:23:37"</span> CONTAINER_ID
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8\u6587\u4EF6\u5927\u5C0F\u67E5\u770B\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_8\u6587\u4EF6\u5927\u5C0F\u67E5\u770B\u547D\u4EE4" aria-hidden="true">#</a> 8\u6587\u4EF6\u5927\u5C0F\u67E5\u770B\u547D\u4EE4</h2>
<p>1\u3001\u67E5\u770B\u5F53\u524D\u6587\u4EF6\u5939\u53CA\u6587\u4EF6\u5939\u4E0B\u5927\u5C0F\uFF0Ch:\u4EE5K,M,G\u4E3A\u5355\u4F4D\u663E\u793A\uFF0Cmax-depth\u6807\u8BC6\u76EE\u5F55\u7684\u6DF1\u5EA6</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">du</span> <span class="token parameter variable">-ah</span> --max-depth<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2\u3001\u67E5\u770B\u5F53\u524D\u6587\u4EF6\u5939\u603B\u5927\u5C0F</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">du</span> <span class="token parameter variable">-sh</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3\u3001\u67E5\u770B\u6307\u5B9A\u6587\u4EF6\u5939\u603B\u5927\u5C0F</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">du</span> <span class="token parameter variable">-sh</span> ./data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>4\u3001\u663E\u793A\u76EE\u5F55\u6216\u6240\u6709\u6587\u4EF6\u6240\u5360\u7A7A\u95F4</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">du</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>5\u3001\u6587\u4EF6\u4ECE\u5927\u5230\u5C0F\u6392\u5E8F</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">du</span> <span class="token parameter variable">-sh</span>  * <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-rh</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6\u3001\u53C2\u6570\u8BF4\u660E</p>
<ul>
<li>-a\u6216-all \u663E\u793A\u76EE\u5F55\u4E2D\u4E2A\u522B\u6587\u4EF6\u7684\u5927\u5C0F\u3002</li>
<li>-b\u6216-bytes \u663E\u793A\u76EE\u5F55\u6216\u6587\u4EF6\u5927\u5C0F\u65F6\uFF0C\u4EE5byte\u4E3A\u5355\u4F4D\u3002</li>
<li>-c\u6216--total \u9664\u4E86\u663E\u793A\u4E2A\u522B\u76EE\u5F55\u6216\u6587\u4EF6\u7684\u5927\u5C0F\u5916\uFF0C\u540C\u65F6\u4E5F\u663E\u793A\u6240\u6709\u76EE\u5F55\u6216\u6587\u4EF6\u7684\u603B\u548C\u3002</li>
<li>-D\u6216--dereference-args \u663E\u793A\u6307\u5B9A\u7B26\u53F7\u8FDE\u63A5\u7684\u6E90\u6587\u4EF6\u5927\u5C0F\u3002</li>
<li>-h\u6216--human-readable \u4EE5K\uFF0CM\uFF0CG\u4E3A\u5355\u4F4D\uFF0C\u63D0\u9AD8\u4FE1\u606F\u7684\u53EF\u8BFB\u6027\u3002</li>
<li>-H\u6216--si \u4E0E-h\u53C2\u6570\u76F8\u540C\uFF0C\u4F46\u662FK\uFF0CM\uFF0CG\u662F\u4EE51000\u4E3A\u6362\u7B97\u5355\u4F4D\u3002</li>
<li>-k\u6216--kilobytes \u4EE51024 bytes\u4E3A\u5355\u4F4D\u3002</li>
<li>-l\u6216--count-links \u91CD\u590D\u8BA1\u7B97\u786C\u4EF6\u8FDE\u63A5\u7684\u6587\u4EF6\u3002</li>
<li>-L&lt;\u7B26\u53F7\u8FDE\u63A5&gt;\u6216--dereference&lt;\u7B26\u53F7\u8FDE\u63A5&gt; \u663E\u793A\u9009\u9879\u4E2D\u6240\u6307\u5B9A\u7B26\u53F7\u8FDE\u63A5\u7684\u6E90\u6587\u4EF6\u5927\u5C0F\u3002</li>
<li>-m\u6216--megabytes \u4EE51MB\u4E3A\u5355\u4F4D\u3002</li>
<li>-s\u6216--summarize \u4EC5\u663E\u793A\u603B\u8BA1\u3002</li>
<li>-S\u6216--separate-dirs \u663E\u793A\u4E2A\u522B\u76EE\u5F55\u7684\u5927\u5C0F\u65F6\uFF0C\u5E76\u4E0D\u542B\u5176\u5B50\u76EE\u5F55\u7684\u5927\u5C0F\u3002</li>
<li>-x\u6216--one-file-xystem \u4EE5\u4E00\u5F00\u59CB\u5904\u7406\u65F6\u7684\u6587\u4EF6\u7CFB\u7EDF\u4E3A\u51C6\uFF0C\u82E5\u9047\u4E0A\u5176\u5B83\u4E0D\u540C\u7684\u6587\u4EF6\u7CFB\u7EDF\u76EE\u5F55\u5219\u7565\u8FC7\u3002</li>
<li>-X&lt;\u6587\u4EF6&gt;\u6216--exclude-from=&lt;\u6587\u4EF6&gt; \u5728&lt;\u6587\u4EF6&gt;\u6307\u5B9A\u76EE\u5F55\u6216\u6587\u4EF6\u3002</li>
<li>--exclude=&lt;\u76EE\u5F55\u6216\u6587\u4EF6&gt; \u7565\u8FC7\u6307\u5B9A\u7684\u76EE\u5F55\u6216\u6587\u4EF6\u3002</li>
<li>--max-depth=&lt;\u76EE\u5F55\u5C42\u6570&gt; \u8D85\u8FC7\u6307\u5B9A\u5C42\u6570\u7684\u76EE\u5F55\u540E\uFF0C\u4E88\u4EE5\u5FFD\u7565\u3002</li>
</ul>
`,date:"2022-03-10",deps:[],links:[],pathInferred:"/posts/linux/command.html",pathLocale:"/",permalink:null,routeMeta:{title:"linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4"},sfcBlocks:[],slug:"command",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/linux/command.md",filePathRelative:"posts/linux/command.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/linux/command.html.vue",componentFilePathRelative:"pages/posts/linux/command.html.vue",componentFileChunkName:"v-1390655e",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/linux/command.html.js",dataFilePathRelative:"pages/posts/linux/command.html.js",dataFileChunkName:"v-1390655e",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/linux/command.html",htmlFilePathRelative:"posts/linux/command.html"},title:"linux\u7CFB\u7EDF\u5E38\u7528\u547D\u4EE4"},["/posts/linux/command","/posts/linux/command.md"]],["v-3ffabb67","/posts/linux/nohup.html",{_blog:{data:{key:"v-3ffabb67",path:"/posts/linux/nohup.html",title:"nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6",lang:"zh-CN",frontmatter:{title:"nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6",date:"2022-04-07T17:08:16.000Z",tag:["linux"],category:["linux"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201006898.jpg",summary:`\u2003nohup \u662F\u4E0D\u6302\u65AD\u7684\u610F\u601D( no hang up)\u3002\u5982\u679C\u4F60\u6B63\u5728\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C\u4E14\u4F60\u89C9\u5F97\u5728\u9000\u51FA\u5E10\u6237\u65F6\u8BE5\u8FDB\u7A0B\u8FD8\u4E0D\u4F1A\u7ED3\u675F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 nohup \u547D\u4EE4\u3002\u8BE5\u547D\u4EE4\u5FFD\u7565\u6240\u6709\u6302\uFF08SIGHUP\uFF09\u4FE1\u53F7\uFF0C\u53EF\u4EE5\u5728\u4F60\u9000\u51FA\u5E10\u6237/\u5173\u95ED\u7EC8\u7AEF\u4E4B\u540E\u7EE7\u7EED\u8FD0\u884C\u76F8\u5E94\u7684\u8FDB\u7A0B\u3002\u2003 \u662F\u6307\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u5F53\u7528\u6237\u63A8\u51FA(\u6302\u8D77)\u7684\u65F6\u5019\uFF0C\u547D\u4EE4\u81EA\u52A8\u4E5F\u8DDF\u7740\u9000\u51FA. nohup \u4E0E \u2003 \u7ED3\u5408\u8D77\u6765\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E0D\u6302\u65AD\u7684\u540E\u53F0\u8FD0\u884C\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/linux/nohup.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"linux"}],["meta",{property:"article:published_time",content:"2022-04-07T17:08:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003nohup \u662F\u4E0D\u6302\u65AD\u7684\u610F\u601D( no hang up)\u3002\u5982\u679C\u4F60\u6B63\u5728\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C\u4E14\u4F60\u89C9\u5F97\u5728\u9000\u51FA\u5E10\u6237\u65F6\u8BE5\u8FDB\u7A0B\u8FD8\u4E0D\u4F1A\u7ED3\u675F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 nohup \u547D\u4EE4\u3002\u8BE5\u547D\u4EE4\u5FFD\u7565\u6240\u6709\u6302\uFF08SIGHUP\uFF09\u4FE1\u53F7\uFF0C\u53EF\u4EE5\u5728\u4F60\u9000\u51FA\u5E10\u6237/\u5173\u95ED\u7EC8\u7AEF\u4E4B\u540E\u7EE7\u7EED\u8FD0\u884C\u76F8\u5E94\u7684\u8FDB\u7A0B\u3002\u2003 \u662F\u6307\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u5F53\u7528\u6237\u63A8\u51FA(\u6302\u8D77)\u7684\u65F6\u5019\uFF0C\u547D\u4EE4\u81EA\u52A8\u4E5F\u8DDF\u7740\u9000\u51FA. nohup \u4E0E \u2003 \u7ED3\u5408\u8D77\u6765\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E0D\u6302\u65AD\u7684\u540E\u53F0\u8FD0\u884C\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001nohup \u547D\u4EE4",slug:"\u4E00\u3001nohup-\u547D\u4EE4",children:[]},{level:2,title:"\u4E8C\u3001\u5B9E\u4F8B\u5C55\u793A",slug:"\u4E8C\u3001\u5B9E\u4F8B\u5C55\u793A",children:[]},{level:2,title:"\u4E09\u3001Tomcat \u6E05\u9664 catalina.out \u65E5\u5FD7",slug:"\u4E09\u3001tomcat-\u6E05\u9664-catalina-out-\u65E5\u5FD7",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/linux/nohup.md",readingTime:{minutes:6.02,words:1807},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/linux/nohup.html`},key:"v-3ffabb67",path:"/posts/linux/nohup.html",title:"nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6",lang:"zh-CN",frontmatter:{title:"nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6",date:"2022-04-07T17:08:16.000Z",tag:["linux"],category:["linux"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201006898.jpg",summary:`\u2003nohup \u662F\u4E0D\u6302\u65AD\u7684\u610F\u601D( no hang up)\u3002\u5982\u679C\u4F60\u6B63\u5728\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C\u4E14\u4F60\u89C9\u5F97\u5728\u9000\u51FA\u5E10\u6237\u65F6\u8BE5\u8FDB\u7A0B\u8FD8\u4E0D\u4F1A\u7ED3\u675F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 nohup \u547D\u4EE4\u3002\u8BE5\u547D\u4EE4\u5FFD\u7565\u6240\u6709\u6302\uFF08SIGHUP\uFF09\u4FE1\u53F7\uFF0C\u53EF\u4EE5\u5728\u4F60\u9000\u51FA\u5E10\u6237/\u5173\u95ED\u7EC8\u7AEF\u4E4B\u540E\u7EE7\u7EED\u8FD0\u884C\u76F8\u5E94\u7684\u8FDB\u7A0B\u3002\u2003 \u662F\u6307\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u5F53\u7528\u6237\u63A8\u51FA(\u6302\u8D77)\u7684\u65F6\u5019\uFF0C\u547D\u4EE4\u81EA\u52A8\u4E5F\u8DDF\u7740\u9000\u51FA. nohup \u4E0E \u2003 \u7ED3\u5408\u8D77\u6765\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E0D\u6302\u65AD\u7684\u540E\u53F0\u8FD0\u884C\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/linux/nohup.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"linux"}],["meta",{property:"article:published_time",content:"2022-04-07T17:08:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003nohup \u662F\u4E0D\u6302\u65AD\u7684\u610F\u601D( no hang up)\u3002\u5982\u679C\u4F60\u6B63\u5728\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C\u4E14\u4F60\u89C9\u5F97\u5728\u9000\u51FA\u5E10\u6237\u65F6\u8BE5\u8FDB\u7A0B\u8FD8\u4E0D\u4F1A\u7ED3\u675F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 nohup \u547D\u4EE4\u3002\u8BE5\u547D\u4EE4\u5FFD\u7565\u6240\u6709\u6302\uFF08SIGHUP\uFF09\u4FE1\u53F7\uFF0C\u53EF\u4EE5\u5728\u4F60\u9000\u51FA\u5E10\u6237/\u5173\u95ED\u7EC8\u7AEF\u4E4B\u540E\u7EE7\u7EED\u8FD0\u884C\u76F8\u5E94\u7684\u8FDB\u7A0B\u3002\u2003 \u662F\u6307\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u5F53\u7528\u6237\u63A8\u51FA(\u6302\u8D77)\u7684\u65F6\u5019\uFF0C\u547D\u4EE4\u81EA\u52A8\u4E5F\u8DDF\u7740\u9000\u51FA. nohup \u4E0E \u2003 \u7ED3\u5408\u8D77\u6765\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E0D\u6302\u65AD\u7684\u540E\u53F0\u8FD0\u884C\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001nohup \u547D\u4EE4",slug:"\u4E00\u3001nohup-\u547D\u4EE4",children:[]},{level:2,title:"\u4E8C\u3001\u5B9E\u4F8B\u5C55\u793A",slug:"\u4E8C\u3001\u5B9E\u4F8B\u5C55\u793A",children:[]},{level:2,title:"\u4E09\u3001Tomcat \u6E05\u9664 catalina.out \u65E5\u5FD7",slug:"\u4E09\u3001tomcat-\u6E05\u9664-catalina-out-\u65E5\u5FD7",children:[]}],content:`---
title: nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6
date: 2022-04-07 17:08:16
tag:
  - linux
category:
  - linux
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201006898.jpg
---

&emsp;nohup \u662F\u4E0D\u6302\u65AD\u7684\u610F\u601D( no hang up)\u3002\u5982\u679C\u4F60\u6B63\u5728\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C\u4E14\u4F60\u89C9\u5F97\u5728\u9000\u51FA\u5E10\u6237\u65F6\u8BE5\u8FDB\u7A0B\u8FD8\u4E0D\u4F1A\u7ED3\u675F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 nohup \u547D\u4EE4\u3002\u8BE5\u547D\u4EE4\u5FFD\u7565\u6240\u6709\u6302\uFF08SIGHUP\uFF09\u4FE1\u53F7\uFF0C\u53EF\u4EE5\u5728\u4F60\u9000\u51FA\u5E10\u6237/\u5173\u95ED\u7EC8\u7AEF\u4E4B\u540E\u7EE7\u7EED\u8FD0\u884C\u76F8\u5E94\u7684\u8FDB\u7A0B\u3002\u2003 \u662F\u6307\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u5F53\u7528\u6237\u63A8\u51FA(\u6302\u8D77)\u7684\u65F6\u5019\uFF0C\u547D\u4EE4\u81EA\u52A8\u4E5F\u8DDF\u7740\u9000\u51FA. nohup \u4E0E \u2003 \u7ED3\u5408\u8D77\u6765\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E0D\u6302\u65AD\u7684\u540E\u53F0\u8FD0\u884C\u3002

<!-- more -->

## \u4E00\u3001nohup \u547D\u4EE4

**1\u3001nohup \u547D\u4EE4\u683C\u5F0F\uFF1A\`nohup Command [ Arg \u2026 ] [ & ]\`, Command\uFF1A\u542F\u52A8\u5BF9\u8C61\u547D\u4EE4,\u53EF\u4EE5\u8DDF\u8BE5\u547D\u4EE4\u9700\u8981\u7684\u5404\u79CD\u53C2\u6570\u3002**

&emsp;nohup \u547D\u4EE4\u8FD0\u884C\u7531 Command \u53C2\u6570\u548C\u4EFB\u4F55\u76F8\u5173\u7684 Arg \u53C2\u6570\u6307\u5B9A\u7684\u547D\u4EE4\uFF0C\u5FFD\u7565\u6240\u6709\u6302\u65AD\uFF08SIGHUP\uFF09\u4FE1\u53F7\u3002\u5728\u6CE8\u9500\u540E\u4F7F\u7528 nohup \u547D\u4EE4\u8FD0\u884C\u540E\u53F0\u4E2D\u7684\u7A0B\u5E8F\u3002\u8981\u8FD0\u884C\u540E\u53F0\u4E2D\u7684 nohup \u547D\u4EE4\uFF0C\u6DFB\u52A0 & \uFF08 \u8868\u793A\u201Cand\u201D\u7684\u7B26\u53F7\uFF09\u5230\u547D\u4EE4\u7684\u5C3E\u90E8\u3002\u5E26 \u2003 \u7684\u547D\u4EE4\u884C\uFF0C\u5373\u4F7F terminal \u5173\u95ED\uFF0C\u6216\u8005\u7535\u8111\u6B7B\u673A\u7A0B\u5E8F\u4F9D\u7136\u8FD0\u884C\uFF08\u524D\u63D0\u662F\u4F60\u628A\u7A0B\u5E8F\u9012\u4EA4\u5230\u670D\u52A1\u5668\u4E0A)\u3002  
**2\u3001\u5B9E\u73B0\u5C4F\u5E55\u8F93\u51FA\u8BB0\u5F55\u5230\u65E5\u5FD7\u6587\u4EF6**

\`\`\`bash
nohup yourcommand 2>&1 &
\`\`\`

\u5982\u679C\u4E0D\u6307\u5B9A\u91CD\u5B9A\u5411\uFF0C\u5219\u65E5\u5FD7\u9ED8\u8BA4\u8F93\u51FA\u5230\u5F53\u524D\u76EE\u5F55\u4E0B nohup.out \u6587\u4EF6\u4E2D\u3002  
\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u6709\u4E09\u4E2A\u5E38\u7528\u7684\u6D41\uFF1A

- 0\uFF1Astdin \u6807\u51C6\u8F93\u5165, 1\uFF1A\u4EE3\u8868 stdout \u6807\u51C6\u8F93\u51FA, 2\uFF1A\u4EE3\u8868 stderr \u6807\u51C6\u9519\u8BEF\u3002

<div color="red">\u4E00\u822C\u5F53\u6211\u4EEC\u7528 > console.txt\uFF0C\u5B9E\u9645\u662F 1>console.txt \u7684\u7701\u7565\u7528\u6CD5\uFF1B&lt; console.txt \uFF0C\u5B9E\u9645\u662F 0 &lt; console.txt \u7684\u7701\u7565\u7528\u6CD5\u3002</div>

- 2>&1 \u4F5C\u7528\uFF1A

<div color="red">\u628A\u6807\u51C6\u9519\u8BEF\uFF082\uFF09\u91CD\u5B9A\u5411\u5230\u6807\u51C6\u8F93\u51FA\u4E2D\uFF081\uFF09\uFF0C\u800C\u6807\u51C6\u8F93\u51FA\u53C8\u5BFC\u5165\u6587\u4EF6 output \u91CC\u9762\uFF0C\u6240\u4EE5\u7ED3\u679C\u662F\u6807\u51C6\u9519\u8BEF\u548C\u6807\u51C6\u8F93\u51FA\u90FD\u5BFC\u5165\u6587\u4EF6 output \u91CC\u9762\u4E86\u3002 \u81F3\u4E8E\u4E3A\u4EC0\u4E48\u9700\u8981\u5C06\u6807\u51C6\u9519\u8BEF\u91CD\u5B9A\u5411\u5230\u6807\u51C6\u8F93\u51FA\u7684\u539F\u56E0\uFF0C\u90A3\u5C31\u5F52\u7ED3\u4E3A\u6807\u51C6\u9519\u8BEF\u6CA1\u6709\u7F13\u51B2\u533A\uFF0C\u800C stdout \u6709\u3002</div>

\u6700\u540E\u8C08\u4E00\u4E0B/dev/null \u6587\u4EF6\u7684\u4F5C\u7528\uFF0C\u8FD9\u662F\u4E00\u4E2A\u65E0\u5E95\u6D1E\uFF0C\u4EFB\u4F55\u4E1C\u897F\u90FD\u53EF\u4EE5\u5B9A\u5411\u5230\u8FD9\u91CC\uFF0C\u4F46\u662F\u5374\u65E0\u6CD5\u6253\u5F00\u3002 \u6240\u4EE5\u4E00\u822C\u5F88\u5927\u7684 stdou \u548C stderr \u5F53\u4F60\u4E0D\u5173\u5FC3\u7684\u65F6\u5019\u53EF\u4EE5\u5229\u7528 stdout \u548C stderr \u5B9A\u5411\u5230\u8FD9\u91CC>./command.sh >/dev/null 2>&1\uFF0C\u4EE3\u8868\u4E0D\u8F93\u51FA\u65E5\u5FD7\u3002

**3\u3001\u5982\u679C\u5E0C\u671B\u5C06\u65E5\u5FD7\u8F93\u51FA\u5230\u522B\u7684\u6587\u4EF6\u4E2D\uFF0C\u53EF\u4EE5\u589E\u52A0\u4E00\u4E2A\u6587\u4EF6\u8DEF\u5F84\u53C2\u6570\u3002\u5982\u4E0B\uFF1A**

\`\`\`bash
nohup yourcommand > myout.log 2>&1 &
\`\`\`

\u5176\u4E2D myout.log \u662F\u4FDD\u5B58\u8F93\u51FA\u7684\u6587\u4EF6\u540D\u79F0\u3002  
**4\u3001\u5B9E\u65F6\u76D1\u6D4B\u65E5\u5FD7\u8F93\u51FA\u5185\u5BB9\u547D\u4EE4**  
&emsp;tail \u547D\u4EE4\u662F nohup \u547D\u4EE4\u7684\u597D\u642D\u6863\u3002\u914D\u5408-f \u53C2\u6570\uFF0C\u53EF\u4EE5\u5B9E\u65F6\u76D1\u89C6\u5411\u65E5\u5FD7\u6587\u4EF6\u589E\u52A0\u7684\u4FE1\u606F\u3002tail -f \u7B49\u540C\u4E8E\u2013follow=descriptor\uFF0C\u6839\u636E\u6587\u4EF6\u63CF\u8FF0\u7B26\u8FDB\u884C\u8FFD\u8E2A\uFF0C\u5F53\u6587\u4EF6\u6539\u540D\u6216\u88AB\u5220\u9664\uFF0C\u8FFD\u8E2A\u505C\u6B62\u3002tail -F \u7B49\u540C\u4E8E\u2013follow=name --retry\uFF0C\u6839\u636E\u6587\u4EF6\u540D\u8FDB\u884C\u8FFD\u8E2A\uFF0C\u5E76\u4FDD\u6301\u91CD\u8BD5\uFF0C\u5373\u8BE5\u6587\u4EF6\u88AB\u5220\u9664\u6216\u6539\u540D\u540E\uFF0C\u5982\u679C\u518D\u6B21\u521B\u5EFA\u76F8\u540C\u7684\u6587\u4EF6\u540D\uFF0C\u4F1A\u7EE7\u7EED\u8FFD\u8E2A\u3002  
&emsp;tailf \u7B49\u540C\u4E8E tail -f -n 10\uFF0C\u4E0E tail -f \u4E0D\u540C\u7684\u662F\uFF0C\u5982\u679C\u6587\u4EF6\u4E0D\u589E\u957F\uFF0C\u5B83\u4E0D\u4F1A\u53BB\u8BBF\u95EE\u78C1\u76D8\u6587\u4EF6\uFF0C\u6240\u4EE5 tailf \u7279\u522B\u9002\u5408\u90A3\u4E9B\u4FBF\u643A\u673A\u4E0A\u8DDF\u8E2A\u65E5\u5FD7\u6587\u4EF6\uFF0C\u56E0\u4E3A\u5B83\u51CF\u5C11\u4E86\u78C1\u76D8\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u7701\u7535\u3002

**5\u3001\u6807\u51C6\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8986\u76D6**

\`\`\`bash
command > output.txt
command 1> output.txt
\`\`\`

\u4EE5\u4E0A\u4E24\u53E5\u7B49\u4EF7\u3002\u5C06\u547D\u4EE4\u7684 stdout \u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0Cstdout \u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u7EC8\u7AEF\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u5C06\u4F1A\u8986\u76D6\u3002

**6\u3001\u6807\u51C6\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8FFD\u52A0**

\`\`\`bash
command >> output.txt
command 1>> output.txt
\`\`\`

\u4EE5\u4E0A\u4E24\u53E5\u7B49\u4EF7\u3002\u5C06\u547D\u4EE4\u7684 stdout \u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0Cstdout \u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u7EC8\u7AEF\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u65B0\u6570\u636E\u5C06\u4F1A\u6DFB\u52A0\u81F3\u6587\u4EF6\u672B\u5C3E\u3002

**7\u3001\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8986\u76D6**

\`\`\`bash
command 2> output.txt
\`\`\`

\u5C06\u547D\u4EE4\u7684 stderr \u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0Cstderr \u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u7EC8\u7AEF\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u5C06\u4F1A\u8986\u76D6\u3002

**8\u3001\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8FFD\u52A0**

\`\`\`bash
command 2>> output.txt
\`\`\`

\u5C06\u547D\u4EE4\u7684 stderr \u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0Cstderr \u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u7EC8\u7AEF\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u65B0\u6570\u636E\u5C06\u4F1A\u6DFB\u52A0\u81F3\u6587\u4EF6\u672B\u5C3E\u3002

**9\u3001\u6807\u51C6\u8F93\u51FA+\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8986\u76D6**

\`\`\`bash
command &> output.txt
command >output.txt 2>&1
\`\`\`

\u4EE5\u4E0A\u4E24\u53E5\u7B49\u4EF7\u3002\u5C06\u547D\u4EE4\u7684 stdout \u4E0E stderr \u90FD\u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0C\u6B64\u65F6\u7EC8\u7AEF\u5C06\u6CA1\u6709\u4EFB\u4F55\u8F93\u51FA\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u5C06\u4F1A\u8986\u76D6\u3002

**10\u3001\u6807\u51C6\u8F93\u51FA+\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8FFD\u52A0**

\`\`\`bash
command &>> output.txt
command >>output.txt 2>&1
\`\`\`

\u5C06\u547D\u4EE4\u7684 stdout \u4E0E stderr \u90FD\u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0C\u6B64\u65F6\u7EC8\u7AEF\u5C06\u6CA1\u6709\u4EFB\u4F55\u8F93\u51FA\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u65B0\u6570\u636E\u5C06\u4F1A\u6DFB\u52A0\u81F3\u6587\u4EF6\u672B\u5C3E\u3002

## \u4E8C\u3001\u5B9E\u4F8B\u5C55\u793A

\`\`\`bash
#\u4EE3\u8868\u4E0D\u8F93\u51FA,/dev/null\u50CF\u662F\u4E2A\u9ED1\u6D1E\uFF0C\u5438\u7EB3\u6240\u6709
nohup sh test.sh > /dev/null &

#\u6807\u51C6\u8F93\u51FA,\u4EE5\u4E0B\u4E24\u53E5\u7B49\u4EF7
nohup sh test.sh > /home/dir1/dir2/my1.log &
nohup sh test.sh 1> /home/dir1/dir2/my1.log &

#\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u8FD9\u4E2A\u5728\u5F53\u524D\u76EE\u5F55\u4E0B\u4F1A\u4EA7\u751Fnohup.out\uFF08\u6807\u51C6\u8F93\u51FA\uFF09\uFF0C\u7136\u540E\u5728/home/dir1/dir2\u4E0B\u4EA7\u751Fmy1.log\uFF08\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF09
nohup sh test.sh 2> /home/dir1/dir2/my1.log &

# \u6807\u51C6\u8F93\u51FA+\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u5C06\u6807\u51C6\u9519\u8BEF 2 \u91CD\u5B9A\u5411\u5230\u6807\u51C6\u8F93\u51FA &1 \uFF0C\u6807\u51C6\u8F93\u51FA &1 \u518D\u88AB\u91CD\u5B9A\u5411\u8F93\u5165\u5230 my1.log \u6587\u4EF6\u4E2D
nohup sh test.sh > /home/dir1/dir2/my1.log 2>&1 &
nohup sh test.sh &> /home/dir1/dir2/my1.log &
\`\`\`

## \u4E09\u3001Tomcat \u6E05\u9664 catalina.out \u65E5\u5FD7

**\u4E00\u3001\u91CD\u5B9A\u5411\u65B9\u6CD5\u6E05\u7A7A\u6587\u4EF6\uFF1A**

- \u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B:
- \u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out
- \u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Acatalina.out
- \u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out

**\u4E8C\u3001\u4F7F\u7528 true \u547D\u4EE4\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1A**

- \u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B:
- \u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out
- \u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Atrue>catalina.out
- \u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out

**\u4E09\u3001\u4F7F\u7528 cat/cp/dd \u547D\u4EE4\u53CA/dev/null \u8BBE\u5907\u6765\u6E05\u7A7A\u6587\u4EF6**

\u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B: 1.\u4F7F\u7528 cat /dev/null \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A

- \u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out
- \u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Acat /dev/null>catalina.out
- \u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out

  2.\u4F7F\u7528 cp /dev/null \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A

- \u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out
- \u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Acp /dev/null catalina.out
- \u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out

  3.\u4F7F\u7528 dd if=/dev/null of=catalina.out \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A

- \u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out
- \u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Add if=/dev/null of=catalina.out
- \u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out

**\u56DB\u3001\u4F7F\u7528 echo \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A**

\u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B:

- echo -n "">catalina.out \u2014\u2014>\u52A0\u4E0A\u201C-n\u201D\u53C2\u6570\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4F1A\u201C\\n",
- \u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out
- \u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Aecho -n "\u53C2\u6570">catalina.out
- \u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out

**\u4E94\u3001\u4F7F\u7528 truecate \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A**

\`\`\`bash
# -s\u53C2\u6570\u662F\u8BBE\u7F6E\u6587\u4EF6\u7684\u5927\u5C0F\uFF0C\u6E05\u7A7A\u6587\u4EF6\u7684\u8BDD\uFF0C\u5C31\u8BBE\u5B9A\u4E3A0
truncate -s 0 catalina.out
\`\`\`

\u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B:
- \u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out
- \u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Atruncate -s 0 catalina.out
- \u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out
`,contentRendered:`<p>\u2003nohup \u662F\u4E0D\u6302\u65AD\u7684\u610F\u601D( no hang up)\u3002\u5982\u679C\u4F60\u6B63\u5728\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C\u4E14\u4F60\u89C9\u5F97\u5728\u9000\u51FA\u5E10\u6237\u65F6\u8BE5\u8FDB\u7A0B\u8FD8\u4E0D\u4F1A\u7ED3\u675F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 nohup \u547D\u4EE4\u3002\u8BE5\u547D\u4EE4\u5FFD\u7565\u6240\u6709\u6302\uFF08SIGHUP\uFF09\u4FE1\u53F7\uFF0C\u53EF\u4EE5\u5728\u4F60\u9000\u51FA\u5E10\u6237/\u5173\u95ED\u7EC8\u7AEF\u4E4B\u540E\u7EE7\u7EED\u8FD0\u884C\u76F8\u5E94\u7684\u8FDB\u7A0B\u3002\u2003 \u662F\u6307\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u5F53\u7528\u6237\u63A8\u51FA(\u6302\u8D77)\u7684\u65F6\u5019\uFF0C\u547D\u4EE4\u81EA\u52A8\u4E5F\u8DDF\u7740\u9000\u51FA. nohup \u4E0E \u2003 \u7ED3\u5408\u8D77\u6765\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E0D\u6302\u65AD\u7684\u540E\u53F0\u8FD0\u884C\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001nohup-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001nohup-\u547D\u4EE4" aria-hidden="true">#</a> \u4E00\u3001nohup \u547D\u4EE4</h2>
<p><strong>1\u3001nohup \u547D\u4EE4\u683C\u5F0F\uFF1A<code v-pre>nohup Command [ Arg \u2026 ] [ &amp; ]</code>, Command\uFF1A\u542F\u52A8\u5BF9\u8C61\u547D\u4EE4,\u53EF\u4EE5\u8DDF\u8BE5\u547D\u4EE4\u9700\u8981\u7684\u5404\u79CD\u53C2\u6570\u3002</strong></p>
<p>\u2003nohup \u547D\u4EE4\u8FD0\u884C\u7531 Command \u53C2\u6570\u548C\u4EFB\u4F55\u76F8\u5173\u7684 Arg \u53C2\u6570\u6307\u5B9A\u7684\u547D\u4EE4\uFF0C\u5FFD\u7565\u6240\u6709\u6302\u65AD\uFF08SIGHUP\uFF09\u4FE1\u53F7\u3002\u5728\u6CE8\u9500\u540E\u4F7F\u7528 nohup \u547D\u4EE4\u8FD0\u884C\u540E\u53F0\u4E2D\u7684\u7A0B\u5E8F\u3002\u8981\u8FD0\u884C\u540E\u53F0\u4E2D\u7684 nohup \u547D\u4EE4\uFF0C\u6DFB\u52A0 &amp; \uFF08 \u8868\u793A\u201Cand\u201D\u7684\u7B26\u53F7\uFF09\u5230\u547D\u4EE4\u7684\u5C3E\u90E8\u3002\u5E26 \u2003 \u7684\u547D\u4EE4\u884C\uFF0C\u5373\u4F7F terminal \u5173\u95ED\uFF0C\u6216\u8005\u7535\u8111\u6B7B\u673A\u7A0B\u5E8F\u4F9D\u7136\u8FD0\u884C\uFF08\u524D\u63D0\u662F\u4F60\u628A\u7A0B\u5E8F\u9012\u4EA4\u5230\u670D\u52A1\u5668\u4E0A)\u3002<br>
<strong>2\u3001\u5B9E\u73B0\u5C4F\u5E55\u8F93\u51FA\u8BB0\u5F55\u5230\u65E5\u5FD7\u6587\u4EF6</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">nohup</span> yourcommand <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u4E0D\u6307\u5B9A\u91CD\u5B9A\u5411\uFF0C\u5219\u65E5\u5FD7\u9ED8\u8BA4\u8F93\u51FA\u5230\u5F53\u524D\u76EE\u5F55\u4E0B nohup.out \u6587\u4EF6\u4E2D\u3002<br>
\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\u6709\u4E09\u4E2A\u5E38\u7528\u7684\u6D41\uFF1A</p>
<ul>
<li>0\uFF1Astdin \u6807\u51C6\u8F93\u5165, 1\uFF1A\u4EE3\u8868 stdout \u6807\u51C6\u8F93\u51FA, 2\uFF1A\u4EE3\u8868 stderr \u6807\u51C6\u9519\u8BEF\u3002</li>
</ul>
<div color="red">\u4E00\u822C\u5F53\u6211\u4EEC\u7528 > console.txt\uFF0C\u5B9E\u9645\u662F 1>console.txt \u7684\u7701\u7565\u7528\u6CD5\uFF1B&lt; console.txt \uFF0C\u5B9E\u9645\u662F 0 &lt; console.txt \u7684\u7701\u7565\u7528\u6CD5\u3002</div>
<ul>
<li>2&gt;&amp;1 \u4F5C\u7528\uFF1A</li>
</ul>
<div color="red">\u628A\u6807\u51C6\u9519\u8BEF\uFF082\uFF09\u91CD\u5B9A\u5411\u5230\u6807\u51C6\u8F93\u51FA\u4E2D\uFF081\uFF09\uFF0C\u800C\u6807\u51C6\u8F93\u51FA\u53C8\u5BFC\u5165\u6587\u4EF6 output \u91CC\u9762\uFF0C\u6240\u4EE5\u7ED3\u679C\u662F\u6807\u51C6\u9519\u8BEF\u548C\u6807\u51C6\u8F93\u51FA\u90FD\u5BFC\u5165\u6587\u4EF6 output \u91CC\u9762\u4E86\u3002 \u81F3\u4E8E\u4E3A\u4EC0\u4E48\u9700\u8981\u5C06\u6807\u51C6\u9519\u8BEF\u91CD\u5B9A\u5411\u5230\u6807\u51C6\u8F93\u51FA\u7684\u539F\u56E0\uFF0C\u90A3\u5C31\u5F52\u7ED3\u4E3A\u6807\u51C6\u9519\u8BEF\u6CA1\u6709\u7F13\u51B2\u533A\uFF0C\u800C stdout \u6709\u3002</div>
<p>\u6700\u540E\u8C08\u4E00\u4E0B/dev/null \u6587\u4EF6\u7684\u4F5C\u7528\uFF0C\u8FD9\u662F\u4E00\u4E2A\u65E0\u5E95\u6D1E\uFF0C\u4EFB\u4F55\u4E1C\u897F\u90FD\u53EF\u4EE5\u5B9A\u5411\u5230\u8FD9\u91CC\uFF0C\u4F46\u662F\u5374\u65E0\u6CD5\u6253\u5F00\u3002 \u6240\u4EE5\u4E00\u822C\u5F88\u5927\u7684 stdou \u548C stderr \u5F53\u4F60\u4E0D\u5173\u5FC3\u7684\u65F6\u5019\u53EF\u4EE5\u5229\u7528 stdout \u548C stderr \u5B9A\u5411\u5230\u8FD9\u91CC&gt;./command.sh &gt;/dev/null 2&gt;&amp;1\uFF0C\u4EE3\u8868\u4E0D\u8F93\u51FA\u65E5\u5FD7\u3002</p>
<p><strong>3\u3001\u5982\u679C\u5E0C\u671B\u5C06\u65E5\u5FD7\u8F93\u51FA\u5230\u522B\u7684\u6587\u4EF6\u4E2D\uFF0C\u53EF\u4EE5\u589E\u52A0\u4E00\u4E2A\u6587\u4EF6\u8DEF\u5F84\u53C2\u6570\u3002\u5982\u4E0B\uFF1A</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">nohup</span> yourcommand <span class="token operator">></span> myout.log <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5176\u4E2D myout.log \u662F\u4FDD\u5B58\u8F93\u51FA\u7684\u6587\u4EF6\u540D\u79F0\u3002<br>
<strong>4\u3001\u5B9E\u65F6\u76D1\u6D4B\u65E5\u5FD7\u8F93\u51FA\u5185\u5BB9\u547D\u4EE4</strong><br>
\u2003tail \u547D\u4EE4\u662F nohup \u547D\u4EE4\u7684\u597D\u642D\u6863\u3002\u914D\u5408-f \u53C2\u6570\uFF0C\u53EF\u4EE5\u5B9E\u65F6\u76D1\u89C6\u5411\u65E5\u5FD7\u6587\u4EF6\u589E\u52A0\u7684\u4FE1\u606F\u3002tail -f \u7B49\u540C\u4E8E\u2013follow=descriptor\uFF0C\u6839\u636E\u6587\u4EF6\u63CF\u8FF0\u7B26\u8FDB\u884C\u8FFD\u8E2A\uFF0C\u5F53\u6587\u4EF6\u6539\u540D\u6216\u88AB\u5220\u9664\uFF0C\u8FFD\u8E2A\u505C\u6B62\u3002tail -F \u7B49\u540C\u4E8E\u2013follow=name --retry\uFF0C\u6839\u636E\u6587\u4EF6\u540D\u8FDB\u884C\u8FFD\u8E2A\uFF0C\u5E76\u4FDD\u6301\u91CD\u8BD5\uFF0C\u5373\u8BE5\u6587\u4EF6\u88AB\u5220\u9664\u6216\u6539\u540D\u540E\uFF0C\u5982\u679C\u518D\u6B21\u521B\u5EFA\u76F8\u540C\u7684\u6587\u4EF6\u540D\uFF0C\u4F1A\u7EE7\u7EED\u8FFD\u8E2A\u3002<br>
\u2003tailf \u7B49\u540C\u4E8E tail -f -n 10\uFF0C\u4E0E tail -f \u4E0D\u540C\u7684\u662F\uFF0C\u5982\u679C\u6587\u4EF6\u4E0D\u589E\u957F\uFF0C\u5B83\u4E0D\u4F1A\u53BB\u8BBF\u95EE\u78C1\u76D8\u6587\u4EF6\uFF0C\u6240\u4EE5 tailf \u7279\u522B\u9002\u5408\u90A3\u4E9B\u4FBF\u643A\u673A\u4E0A\u8DDF\u8E2A\u65E5\u5FD7\u6587\u4EF6\uFF0C\u56E0\u4E3A\u5B83\u51CF\u5C11\u4E86\u78C1\u76D8\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u7701\u7535\u3002</p>
<p><strong>5\u3001\u6807\u51C6\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8986\u76D6</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator">></span> output.txt
<span class="token builtin class-name">command</span> <span class="token operator"><span class="token file-descriptor important">1</span>></span> output.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u4E24\u53E5\u7B49\u4EF7\u3002\u5C06\u547D\u4EE4\u7684 stdout \u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0Cstdout \u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u7EC8\u7AEF\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u5C06\u4F1A\u8986\u76D6\u3002</p>
<p><strong>6\u3001\u6807\u51C6\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8FFD\u52A0</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator">>></span> output.txt
<span class="token builtin class-name">command</span> <span class="token operator"><span class="token file-descriptor important">1</span>>></span> output.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u4E24\u53E5\u7B49\u4EF7\u3002\u5C06\u547D\u4EE4\u7684 stdout \u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0Cstdout \u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u7EC8\u7AEF\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u65B0\u6570\u636E\u5C06\u4F1A\u6DFB\u52A0\u81F3\u6587\u4EF6\u672B\u5C3E\u3002</p>
<p><strong>7\u3001\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8986\u76D6</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span> output.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5C06\u547D\u4EE4\u7684 stderr \u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0Cstderr \u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u7EC8\u7AEF\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u5C06\u4F1A\u8986\u76D6\u3002</p>
<p><strong>8\u3001\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8FFD\u52A0</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator"><span class="token file-descriptor important">2</span>>></span> output.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5C06\u547D\u4EE4\u7684 stderr \u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0Cstderr \u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u7EC8\u7AEF\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u65B0\u6570\u636E\u5C06\u4F1A\u6DFB\u52A0\u81F3\u6587\u4EF6\u672B\u5C3E\u3002</p>
<p><strong>9\u3001\u6807\u51C6\u8F93\u51FA+\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8986\u76D6</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator">&amp;></span> output.txt
<span class="token builtin class-name">command</span> <span class="token operator">></span>output.txt <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u4E24\u53E5\u7B49\u4EF7\u3002\u5C06\u547D\u4EE4\u7684 stdout \u4E0E stderr \u90FD\u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0C\u6B64\u65F6\u7EC8\u7AEF\u5C06\u6CA1\u6709\u4EFB\u4F55\u8F93\u51FA\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u5C06\u4F1A\u8986\u76D6\u3002</p>
<p><strong>10\u3001\u6807\u51C6\u8F93\u51FA+\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u65E5\u5FD7\u6587\u4EF6\u8FFD\u52A0</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator">&amp;>></span> output.txt
<span class="token builtin class-name">command</span> <span class="token operator">>></span>output.txt <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C06\u547D\u4EE4\u7684 stdout \u4E0E stderr \u90FD\u91CD\u5B9A\u5411\u81F3\u6587\u4EF6\uFF0C\u6B64\u65F6\u7EC8\u7AEF\u5C06\u6CA1\u6709\u4EFB\u4F55\u8F93\u51FA\u3002\u5982\u679C\u6587\u4EF6\u5DF2\u7ECF\u5B58\u5728\uFF0C\u65B0\u6570\u636E\u5C06\u4F1A\u6DFB\u52A0\u81F3\u6587\u4EF6\u672B\u5C3E\u3002</p>
<h2 id="\u4E8C\u3001\u5B9E\u4F8B\u5C55\u793A" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u5B9E\u4F8B\u5C55\u793A" aria-hidden="true">#</a> \u4E8C\u3001\u5B9E\u4F8B\u5C55\u793A</h2>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u4EE3\u8868\u4E0D\u8F93\u51FA,/dev/null\u50CF\u662F\u4E2A\u9ED1\u6D1E\uFF0C\u5438\u7EB3\u6240\u6709</span>
<span class="token function">nohup</span> <span class="token function">sh</span> test.sh <span class="token operator">></span> /dev/null <span class="token operator">&amp;</span>

<span class="token comment">#\u6807\u51C6\u8F93\u51FA,\u4EE5\u4E0B\u4E24\u53E5\u7B49\u4EF7</span>
<span class="token function">nohup</span> <span class="token function">sh</span> test.sh <span class="token operator">></span> /home/dir1/dir2/my1.log <span class="token operator">&amp;</span>
<span class="token function">nohup</span> <span class="token function">sh</span> test.sh <span class="token operator"><span class="token file-descriptor important">1</span>></span> /home/dir1/dir2/my1.log <span class="token operator">&amp;</span>

<span class="token comment">#\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u8FD9\u4E2A\u5728\u5F53\u524D\u76EE\u5F55\u4E0B\u4F1A\u4EA7\u751Fnohup.out\uFF08\u6807\u51C6\u8F93\u51FA\uFF09\uFF0C\u7136\u540E\u5728/home/dir1/dir2\u4E0B\u4EA7\u751Fmy1.log\uFF08\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF09</span>
<span class="token function">nohup</span> <span class="token function">sh</span> test.sh <span class="token operator"><span class="token file-descriptor important">2</span>></span> /home/dir1/dir2/my1.log <span class="token operator">&amp;</span>

<span class="token comment"># \u6807\u51C6\u8F93\u51FA+\u6807\u51C6\u9519\u8BEF\u8F93\u51FA\uFF0C\u5C06\u6807\u51C6\u9519\u8BEF 2 \u91CD\u5B9A\u5411\u5230\u6807\u51C6\u8F93\u51FA &amp;1 \uFF0C\u6807\u51C6\u8F93\u51FA &amp;1 \u518D\u88AB\u91CD\u5B9A\u5411\u8F93\u5165\u5230 my1.log \u6587\u4EF6\u4E2D</span>
<span class="token function">nohup</span> <span class="token function">sh</span> test.sh <span class="token operator">></span> /home/dir1/dir2/my1.log <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token function">nohup</span> <span class="token function">sh</span> test.sh <span class="token operator">&amp;></span> /home/dir1/dir2/my1.log <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E09\u3001tomcat-\u6E05\u9664-catalina-out-\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001tomcat-\u6E05\u9664-catalina-out-\u65E5\u5FD7" aria-hidden="true">#</a> \u4E09\u3001Tomcat \u6E05\u9664 catalina.out \u65E5\u5FD7</h2>
<p><strong>\u4E00\u3001\u91CD\u5B9A\u5411\u65B9\u6CD5\u6E05\u7A7A\u6587\u4EF6\uFF1A</strong></p>
<ul>
<li>\u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B:</li>
<li>\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</li>
<li>\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Acatalina.out</li>
<li>\u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</li>
</ul>
<p><strong>\u4E8C\u3001\u4F7F\u7528 true \u547D\u4EE4\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1A</strong></p>
<ul>
<li>\u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B:</li>
<li>\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</li>
<li>\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Atrue&gt;catalina.out</li>
<li>\u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</li>
</ul>
<p><strong>\u4E09\u3001\u4F7F\u7528 cat/cp/dd \u547D\u4EE4\u53CA/dev/null \u8BBE\u5907\u6765\u6E05\u7A7A\u6587\u4EF6</strong></p>
<p>\u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B: 1.\u4F7F\u7528 cat /dev/null \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A</p>
<ul>
<li>
<p>\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</p>
</li>
<li>
<p>\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Acat /dev/null&gt;catalina.out</p>
</li>
<li>
<p>\u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</p>
<p>2.\u4F7F\u7528 cp /dev/null \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A</p>
</li>
<li>
<p>\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</p>
</li>
<li>
<p>\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Acp /dev/null catalina.out</p>
</li>
<li>
<p>\u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</p>
<p>3.\u4F7F\u7528 dd if=/dev/null of=catalina.out \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A</p>
</li>
<li>
<p>\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</p>
</li>
<li>
<p>\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Add if=/dev/null of=catalina.out</p>
</li>
<li>
<p>\u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</p>
</li>
</ul>
<p><strong>\u56DB\u3001\u4F7F\u7528 echo \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A</strong></p>
<p>\u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B:</p>
<ul>
<li>echo -n &quot;&quot;&gt;catalina.out \u2014\u2014&gt;\u52A0\u4E0A\u201C-n\u201D\u53C2\u6570\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4F1A\u201C\\n&quot;,</li>
<li>\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</li>
<li>\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Aecho -n &quot;\u53C2\u6570&quot;&gt;catalina.out</li>
<li>\u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</li>
</ul>
<p><strong>\u4E94\u3001\u4F7F\u7528 truecate \u547D\u4EE4\u6E05\u7A7A\u6587\u4EF6\uFF1A</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># -s\u53C2\u6570\u662F\u8BBE\u7F6E\u6587\u4EF6\u7684\u5927\u5C0F\uFF0C\u6E05\u7A7A\u6587\u4EF6\u7684\u8BDD\uFF0C\u5C31\u8BBE\u5B9A\u4E3A0</span>
truncate <span class="token parameter variable">-s</span> <span class="token number">0</span> catalina.out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FDB\u5165 tomcat \u7684 logs \u6587\u4EF6\u5939\u4E0B:</p>
<ul>
<li>\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</li>
<li>\u91CD\u5B9A\u5411\u6E05\u7A7A\u6587\u4EF6\uFF1Atruncate -s 0 catalina.out</li>
<li>\u518D\u6B21\u67E5\u770B\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\uFF1Adu -h catalina.out</li>
</ul>
`,date:"2022-04-07",deps:[],links:[],pathInferred:"/posts/linux/nohup.html",pathLocale:"/",permalink:null,routeMeta:{title:"nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6"},sfcBlocks:[],slug:"nohup",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/linux/nohup.md",filePathRelative:"posts/linux/nohup.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/linux/nohup.html.vue",componentFilePathRelative:"pages/posts/linux/nohup.html.vue",componentFileChunkName:"v-3ffabb67",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/linux/nohup.html.js",dataFilePathRelative:"pages/posts/linux/nohup.html.js",dataFileChunkName:"v-3ffabb67",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/linux/nohup.html",htmlFilePathRelative:"posts/linux/nohup.html"},title:"nohup\u540E\u53F0\u8FD0\u884C\u5E76\u8F93\u51FA\u65E5\u5FD7\u5230\u6307\u5B9A\u6587\u4EF6"},["/posts/linux/nohup","/posts/linux/nohup.md"]],["v-517d8c20","/posts/mysql/install.html",{_blog:{data:{key:"v-517d8c20",path:"/posts/mysql/install.html",title:"MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",lang:"zh-CN",frontmatter:{title:"MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",date:"2022-03-14T15:34:59.000Z",tag:["MySql"],category:["\u6570\u636E\u5E93"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203141729266.gif",summary:`\u2003MySQL \u662F\u6700\u6D41\u884C\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u5728 WEB \u5E94\u7528\u65B9\u9762 MySQL \u662F\u6700\u597D\u7684 RDBMS(Relational Database Management System\uFF1A\u5173\u7CFB\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF)\u5E94\u7528\u8F6F\u4EF6\u4E4B\u4E00\u3002
\u5728\u672C\u4E13\u9898\u4E2D\uFF0C\u4F1A\u8BA9\u5927\u5BB6\u5FEB\u901F\u638C\u63E1 MySQL \u7684\u57FA\u672C\u77E5\u8BC6\uFF0C\u5E76\u8F7B\u677E\u4F7F\u7528 MySQL \u6570\u636E\u5E93\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/mysql/install.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"MySql"}],["meta",{property:"article:published_time",content:"2022-03-14T15:34:59.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003MySQL \u662F\u6700\u6D41\u884C\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u5728 WEB \u5E94\u7528\u65B9\u9762 MySQL \u662F\u6700\u597D\u7684 RDBMS(Relational Database Management System\uFF1A\u5173\u7CFB\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF)\u5E94\u7528\u8F6F\u4EF6\u4E4B\u4E00\u3002
\u5728\u672C\u4E13\u9898\u4E2D\uFF0C\u4F1A\u8BA9\u5927\u5BB6\u5FEB\u901F\u638C\u63E1 MySQL \u7684\u57FA\u672C\u77E5\u8BC6\uFF0C\u5E76\u8F7B\u677E\u4F7F\u7528 MySQL \u6570\u636E\u5E93\u3002</p>
`,headers:[{level:2,title:"1 docker \u5B89\u88C5 MySql8.x \u7248\u672C",slug:"_1-docker-\u5B89\u88C5-mysql8-x-\u7248\u672C",children:[{level:3,title:"\u62C9\u53D6\u6700\u65B0\u955C\u50CF",slug:"\u62C9\u53D6\u6700\u65B0\u955C\u50CF",children:[]},{level:3,title:"\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55",slug:"\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55",children:[]},{level:3,title:"\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6",slug:"\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6",children:[]},{level:3,title:"\u521B\u5EFA\u5BB9\u5668",slug:"\u521B\u5EFA\u5BB9\u5668",children:[]},{level:3,title:"\u914D\u7F6E\u8FDC\u7A0B\u8BBF\u95EE",slug:"\u914D\u7F6E\u8FDC\u7A0B\u8BBF\u95EE",children:[]},{level:3,title:"\u7AEF\u53E3\u5F00\u653E",slug:"\u7AEF\u53E3\u5F00\u653E",children:[]}]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/mysql/install.md",readingTime:{minutes:1.79,words:538},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/mysql/install.html`},key:"v-517d8c20",path:"/posts/mysql/install.html",title:"MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",lang:"zh-CN",frontmatter:{title:"MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",date:"2022-03-14T15:34:59.000Z",tag:["MySql"],category:["\u6570\u636E\u5E93"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203141729266.gif",summary:`\u2003MySQL \u662F\u6700\u6D41\u884C\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u5728 WEB \u5E94\u7528\u65B9\u9762 MySQL \u662F\u6700\u597D\u7684 RDBMS(Relational Database Management System\uFF1A\u5173\u7CFB\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF)\u5E94\u7528\u8F6F\u4EF6\u4E4B\u4E00\u3002
\u5728\u672C\u4E13\u9898\u4E2D\uFF0C\u4F1A\u8BA9\u5927\u5BB6\u5FEB\u901F\u638C\u63E1 MySQL \u7684\u57FA\u672C\u77E5\u8BC6\uFF0C\u5E76\u8F7B\u677E\u4F7F\u7528 MySQL \u6570\u636E\u5E93\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/mysql/install.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"MySql"}],["meta",{property:"article:published_time",content:"2022-03-14T15:34:59.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003MySQL \u662F\u6700\u6D41\u884C\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u5728 WEB \u5E94\u7528\u65B9\u9762 MySQL \u662F\u6700\u597D\u7684 RDBMS(Relational Database Management System\uFF1A\u5173\u7CFB\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF)\u5E94\u7528\u8F6F\u4EF6\u4E4B\u4E00\u3002
\u5728\u672C\u4E13\u9898\u4E2D\uFF0C\u4F1A\u8BA9\u5927\u5BB6\u5FEB\u901F\u638C\u63E1 MySQL \u7684\u57FA\u672C\u77E5\u8BC6\uFF0C\u5E76\u8F7B\u677E\u4F7F\u7528 MySQL \u6570\u636E\u5E93\u3002</p>
`,headers:[{level:2,title:"1 docker \u5B89\u88C5 MySql8.x \u7248\u672C",slug:"_1-docker-\u5B89\u88C5-mysql8-x-\u7248\u672C",children:[{level:3,title:"\u62C9\u53D6\u6700\u65B0\u955C\u50CF",slug:"\u62C9\u53D6\u6700\u65B0\u955C\u50CF",children:[]},{level:3,title:"\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55",slug:"\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55",children:[]},{level:3,title:"\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6",slug:"\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6",children:[]},{level:3,title:"\u521B\u5EFA\u5BB9\u5668",slug:"\u521B\u5EFA\u5BB9\u5668",children:[]},{level:3,title:"\u914D\u7F6E\u8FDC\u7A0B\u8BBF\u95EE",slug:"\u914D\u7F6E\u8FDC\u7A0B\u8BBF\u95EE",children:[]},{level:3,title:"\u7AEF\u53E3\u5F00\u653E",slug:"\u7AEF\u53E3\u5F00\u653E",children:[]}]}],content:`---
title: MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F
date: 2022-03-14 15:34:59
tag:
  - MySql
category:
  - \u6570\u636E\u5E93
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203141729266.gif
---

&emsp;MySQL \u662F\u6700\u6D41\u884C\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u5728 WEB \u5E94\u7528\u65B9\u9762 MySQL \u662F\u6700\u597D\u7684 RDBMS(Relational Database Management System\uFF1A\u5173\u7CFB\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF)\u5E94\u7528\u8F6F\u4EF6\u4E4B\u4E00\u3002
\u5728\u672C\u4E13\u9898\u4E2D\uFF0C\u4F1A\u8BA9\u5927\u5BB6\u5FEB\u901F\u638C\u63E1 MySQL \u7684\u57FA\u672C\u77E5\u8BC6\uFF0C\u5E76\u8F7B\u677E\u4F7F\u7528 MySQL \u6570\u636E\u5E93\u3002

<!-- more -->

## 1 docker \u5B89\u88C5 MySql8.x \u7248\u672C

### \u62C9\u53D6\u6700\u65B0\u955C\u50CF

\`\`\`bash
#\u67E5\u8BE2\u955C\u50CF\u4FE1\u606F
docker search mysql
#\u62C9\u53D6\u955C\u50CF
docker pull mysql:latest
#\u6216\u62C9\u53D6\u6307\u5B9A\u7248\u672C
docker pull mysql:8.0.28
\`\`\`

### \u521B\u5EFA\u6302\u8F7D\u76EE\u5F55

\`\`\`bash
# \u521B\u5EFA\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\uFF1A/opt/mysql/conf\uFF0C\u6570\u636E\u6302\u8F7D\u76EE\u5F55\uFF1A/opt/mysql/data\uFF0C\u65E5\u5FD7\u76EE\u5F55\uFF1A/var/log/mysql
mkdir -p /opt/mysql/conf /opt/mysql/data /opt/mysql/log
# \u6587\u4EF6\u76EE\u5F55\u6388\u6743
chmod -R 755 /opt/mysql/
\`\`\`

### \u521B\u5EFA\u914D\u7F6E\u6587\u4EF6

\`\`\`bash
# \u65B9\u5F0F\u4E00\uFF1A\u521B\u5EFAmysql\u4E34\u65F6\u5BB9\u5668\uFF0C\u901A\u8FC7\u547D\u4EE4\u590D\u5236\u5BB9\u5668\u539F\u59CB\u914D\u7F6E\u6587\u4EF6\uFF0C\u8FDB\u884C\u4FEE\u6539
docker run -p 3306:3306 --name mysql -d mysql
docker cp mysql:/etc/mysql/my.cnf /opt/mysql/conf
# \u65B9\u5F0F\u4E8C\uFF1A\u81EA\u5DF1\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6
vim /opt/mysql/conf/my.cnf
#\u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9\u5230\u4E0A\u8FF0\u521B\u5EFA\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D
[mysqld]
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
#\u6570\u636E\u5B58\u50A8\u76EE\u5F55
datadir         = /var/lib/mysql
pid-file = /usr/mysql/mysqld.pid
#\u65E5\u5FD7\u8DEF\u5F84
general_log = 1
general_log_file = /var/log/mysql/access.log
log-error = /var/log/mysql/error.log

character_set_server = utf8mb4
collation_server = utf8mb4_bin
secure-file-priv= NULL
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
# Custom config should go here
!includedir /etc/mysql/conf.d/
\`\`\`

### \u521B\u5EFA\u5BB9\u5668

\`\`\`bash
docker run -p 3306:3306 --name mysql8 -v /opt/mysql/conf/my.cnf:/etc/mysql/my.cnf  -v /opt/mysql/data:/var/lib/mysql \\
-v /opt/mysql/log:/var/log/mysql -e MYSQL_ROOT_PASSWORD=123456 -e TZ=Asia/Shanghai  --restart=always -d mysql
\`\`\`

### \u914D\u7F6E\u8FDC\u7A0B\u8BBF\u95EE

\`\`\`bash
#\u8FDB\u5165mysql\u5BB9\u5668
docker exec -it mysql8 /bin/bash
#\u767B\u5F55mysql
mysql -uroot -p123456
#\u5F00\u653E\u8FDC\u7A0B\u767B\u5F55\u8BBF\u95EE
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';
#\u5237\u65B0\u6743\u9650
flush privileges;
\`\`\`

\u81F3\u6B64\u53EF\u4EE5\u6D4B\u8BD5\u8FDC\u7A0B\u8FDE\u63A5\u662F\u5426\u6B63\u5E38\u8BBF\u95EE

### \u7AEF\u53E3\u5F00\u653E

\u5982\u679C\u9632\u706B\u5899\u5DF2\u5173\u95ED\uFF0C\u65E0\u9700\u5F00\u653E\u6570\u636E\u5BF9\u5916\u7AEF\u53E3\uFF0C\u5982\u679C\u9632\u706B\u5899\u5F00\u542F\uFF0C\u9700\u8981\u5F00\u653E\u7AEF\u53E3\uFF0C\u547D\u4EE4\u5982\u4E0B\uFF1A

\`\`\`bash
#\u6C38\u4E45\u5F00\u653E3306\u7AEF\u53E3
firewall-cmd --zone=public --add-port=3306/tcp --permanent
#\u914D\u7F6E\u7ACB\u5373\u751F\u6548
firewall-cmd --reload
\`\`\`
`,contentRendered:`<p>\u2003MySQL \u662F\u6700\u6D41\u884C\u7684\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF0C\u5728 WEB \u5E94\u7528\u65B9\u9762 MySQL \u662F\u6700\u597D\u7684 RDBMS(Relational Database Management System\uFF1A\u5173\u7CFB\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF)\u5E94\u7528\u8F6F\u4EF6\u4E4B\u4E00\u3002
\u5728\u672C\u4E13\u9898\u4E2D\uFF0C\u4F1A\u8BA9\u5927\u5BB6\u5FEB\u901F\u638C\u63E1 MySQL \u7684\u57FA\u672C\u77E5\u8BC6\uFF0C\u5E76\u8F7B\u677E\u4F7F\u7528 MySQL \u6570\u636E\u5E93\u3002</p>
<!-- more -->
<h2 id="_1-docker-\u5B89\u88C5-mysql8-x-\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#_1-docker-\u5B89\u88C5-mysql8-x-\u7248\u672C" aria-hidden="true">#</a> 1 docker \u5B89\u88C5 MySql8.x \u7248\u672C</h2>
<h3 id="\u62C9\u53D6\u6700\u65B0\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u62C9\u53D6\u6700\u65B0\u955C\u50CF" aria-hidden="true">#</a> \u62C9\u53D6\u6700\u65B0\u955C\u50CF</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u8BE2\u955C\u50CF\u4FE1\u606F</span>
<span class="token function">docker</span> search mysql
<span class="token comment">#\u62C9\u53D6\u955C\u50CF</span>
<span class="token function">docker</span> pull mysql:latest
<span class="token comment">#\u6216\u62C9\u53D6\u6307\u5B9A\u7248\u672C</span>
<span class="token function">docker</span> pull mysql:8.0.28
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55" aria-hidden="true">#</a> \u521B\u5EFA\u6302\u8F7D\u76EE\u5F55</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u521B\u5EFA\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\uFF1A/opt/mysql/conf\uFF0C\u6570\u636E\u6302\u8F7D\u76EE\u5F55\uFF1A/opt/mysql/data\uFF0C\u65E5\u5FD7\u76EE\u5F55\uFF1A/var/log/mysql</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/mysql/conf /opt/mysql/data /opt/mysql/log
<span class="token comment"># \u6587\u4EF6\u76EE\u5F55\u6388\u6743</span>
<span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">755</span> /opt/mysql/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u521B\u5EFA\u914D\u7F6E\u6587\u4EF6</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u65B9\u5F0F\u4E00\uFF1A\u521B\u5EFAmysql\u4E34\u65F6\u5BB9\u5668\uFF0C\u901A\u8FC7\u547D\u4EE4\u590D\u5236\u5BB9\u5668\u539F\u59CB\u914D\u7F6E\u6587\u4EF6\uFF0C\u8FDB\u884C\u4FEE\u6539</span>
<span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-d</span> mysql
<span class="token function">docker</span> <span class="token function">cp</span> mysql:/etc/mysql/my.cnf /opt/mysql/conf
<span class="token comment"># \u65B9\u5F0F\u4E8C\uFF1A\u81EA\u5DF1\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6</span>
<span class="token function">vim</span> /opt/mysql/conf/my.cnf
<span class="token comment">#\u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9\u5230\u4E0A\u8FF0\u521B\u5EFA\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D</span>
<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
pid-file        <span class="token operator">=</span> /var/run/mysqld/mysqld.pid
socket          <span class="token operator">=</span> /var/run/mysqld/mysqld.sock
<span class="token comment">#\u6570\u636E\u5B58\u50A8\u76EE\u5F55</span>
datadir         <span class="token operator">=</span> /var/lib/mysql
pid-file <span class="token operator">=</span> /usr/mysql/mysqld.pid
<span class="token comment">#\u65E5\u5FD7\u8DEF\u5F84</span>
general_log <span class="token operator">=</span> <span class="token number">1</span>
general_log_file <span class="token operator">=</span> /var/log/mysql/access.log
log-error <span class="token operator">=</span> /var/log/mysql/error.log

character_set_server <span class="token operator">=</span> utf8mb4
collation_server <span class="token operator">=</span> utf8mb4_bin
secure-file-priv<span class="token operator">=</span> NULL
<span class="token comment"># Disabling symbolic-links is recommended to prevent assorted security risks</span>
symbolic-links<span class="token operator">=</span><span class="token number">0</span>
<span class="token comment"># Custom config should go here</span>
<span class="token operator">!</span>includedir /etc/mysql/conf.d/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u521B\u5EFA\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u5BB9\u5668" aria-hidden="true">#</a> \u521B\u5EFA\u5BB9\u5668</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql8 <span class="token parameter variable">-v</span> /opt/mysql/conf/my.cnf:/etc/mysql/my.cnf  <span class="token parameter variable">-v</span> /opt/mysql/data:/var/lib/mysql <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /opt/mysql/log:/var/log/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai  <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-d</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u914D\u7F6E\u8FDC\u7A0B\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u8FDC\u7A0B\u8BBF\u95EE" aria-hidden="true">#</a> \u914D\u7F6E\u8FDC\u7A0B\u8BBF\u95EE</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u8FDB\u5165mysql\u5BB9\u5668</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql8 /bin/bash
<span class="token comment">#\u767B\u5F55mysql</span>
mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p123456</span>
<span class="token comment">#\u5F00\u653E\u8FDC\u7A0B\u767B\u5F55\u8BBF\u95EE</span>
ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'%'</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token comment">#\u5237\u65B0\u6743\u9650</span>
flush privileges<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u81F3\u6B64\u53EF\u4EE5\u6D4B\u8BD5\u8FDC\u7A0B\u8FDE\u63A5\u662F\u5426\u6B63\u5E38\u8BBF\u95EE</p>
<h3 id="\u7AEF\u53E3\u5F00\u653E" tabindex="-1"><a class="header-anchor" href="#\u7AEF\u53E3\u5F00\u653E" aria-hidden="true">#</a> \u7AEF\u53E3\u5F00\u653E</h3>
<p>\u5982\u679C\u9632\u706B\u5899\u5DF2\u5173\u95ED\uFF0C\u65E0\u9700\u5F00\u653E\u6570\u636E\u5BF9\u5916\u7AEF\u53E3\uFF0C\u5982\u679C\u9632\u706B\u5899\u5F00\u542F\uFF0C\u9700\u8981\u5F00\u653E\u7AEF\u53E3\uFF0C\u547D\u4EE4\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u6C38\u4E45\u5F00\u653E3306\u7AEF\u53E3</span>
firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment">#\u914D\u7F6E\u7ACB\u5373\u751F\u6548</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-03-14",deps:[],links:[],pathInferred:"/posts/mysql/install.html",pathLocale:"/",permalink:null,routeMeta:{title:"MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"},sfcBlocks:[],slug:"install",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/mysql/install.md",filePathRelative:"posts/mysql/install.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/mysql/install.html.vue",componentFilePathRelative:"pages/posts/mysql/install.html.vue",componentFileChunkName:"v-517d8c20",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/mysql/install.html.js",dataFilePathRelative:"pages/posts/mysql/install.html.js",dataFileChunkName:"v-517d8c20",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/mysql/install.html",htmlFilePathRelative:"posts/mysql/install.html"},title:"MySql\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"},["/posts/mysql/install","/posts/mysql/install.md"]],["v-09429098","/posts/node/",{_blog:{data:{key:"v-09429098",path:"/posts/node/",title:"Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",lang:"zh-CN",frontmatter:{title:"Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",date:"2022-04-07T11:56:16.000Z",tag:["Node"],category:["Node"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204071154296.jpg",sticky:5,summary:`\u2003Node.js \u53D1\u5E03\u4E8E 2009 \u5E74 5 \u6708\uFF0C\u7531 Ryan Dahl \u5F00\u53D1\uFF0C\u662F\u4E00\u4E2A\u57FA\u4E8E Chrome V8 \u5F15\u64CE\u7684 JavaScript \u8FD0\u884C\u73AF\u5883\uFF0C\u4F7F\u7528\u4E86\u4E00\u4E2A\u4E8B\u4EF6\u9A71\u52A8\u3001\u975E\u963B\u585E\u5F0F I/O \u6A21\u578B\uFF0C\u8BA9 JavaScript \u8FD0\u884C\u5728\u670D\u52A1\u7AEF\u7684\u5F00\u53D1\u5E73\u53F0\uFF0CJavaScript \u6210\u4E3A\u4E0E PHP\u3001Python\u3001Perl\u3001Ruby \u7B49\u670D\u52A1\u7AEF\u8BED\u8A00\u5E73\u8D77\u5E73\u5750\u7684\u811A\u672C\u8BED\u8A00\u3002Node.js \u5BF9\u4E00\u4E9B\u7279\u6B8A\u7528\u4F8B\u8FDB\u884C\u4F18\u5316\uFF0C\u63D0\u4F9B\u66FF\u4EE3\u7684 API\uFF0C\u4F7F\u5F97 V8 \u5728\u975E\u6D4F\u89C8\u5668\u73AF\u5883\u4E0B\u8FD0\u884C\u5F97\u66F4\u597D\uFF0CV8 \u5F15\u64CE\u6267\u884C Javascript \u7684\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u6027\u80FD\u975E\u5E38\u597D\uFF0C\u57FA\u4E8E Chrome JavaScript \u8FD0\u884C\u65F6\u5EFA\u7ACB\u7684\u5E73\u53F0\uFF0C \u7528\u4E8E\u65B9\u4FBF\u5730\u642D\u5EFA\u54CD\u5E94\u901F\u5EA6\u5FEB\u3001\u6613\u4E8E\u6269\u5C55\u7684\u7F51\u7EDC\u5E94\u7528\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/node/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Node"}],["meta",{property:"article:published_time",content:"2022-04-07T11:56:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Node.js \u53D1\u5E03\u4E8E 2009 \u5E74 5 \u6708\uFF0C\u7531 Ryan Dahl \u5F00\u53D1\uFF0C\u662F\u4E00\u4E2A\u57FA\u4E8E Chrome V8 \u5F15\u64CE\u7684 JavaScript \u8FD0\u884C\u73AF\u5883\uFF0C\u4F7F\u7528\u4E86\u4E00\u4E2A\u4E8B\u4EF6\u9A71\u52A8\u3001\u975E\u963B\u585E\u5F0F I/O \u6A21\u578B\uFF0C\u8BA9 JavaScript \u8FD0\u884C\u5728\u670D\u52A1\u7AEF\u7684\u5F00\u53D1\u5E73\u53F0\uFF0CJavaScript \u6210\u4E3A\u4E0E PHP\u3001Python\u3001Perl\u3001Ruby \u7B49\u670D\u52A1\u7AEF\u8BED\u8A00\u5E73\u8D77\u5E73\u5750\u7684\u811A\u672C\u8BED\u8A00\u3002Node.js \u5BF9\u4E00\u4E9B\u7279\u6B8A\u7528\u4F8B\u8FDB\u884C\u4F18\u5316\uFF0C\u63D0\u4F9B\u66FF\u4EE3\u7684 API\uFF0C\u4F7F\u5F97 V8 \u5728\u975E\u6D4F\u89C8\u5668\u73AF\u5883\u4E0B\u8FD0\u884C\u5F97\u66F4\u597D\uFF0CV8 \u5F15\u64CE\u6267\u884C Javascript \u7684\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u6027\u80FD\u975E\u5E38\u597D\uFF0C\u57FA\u4E8E Chrome JavaScript \u8FD0\u884C\u65F6\u5EFA\u7ACB\u7684\u5E73\u53F0\uFF0C \u7528\u4E8E\u65B9\u4FBF\u5730\u642D\u5EFA\u54CD\u5E94\u901F\u5EA6\u5FEB\u3001\u6613\u4E8E\u6269\u5C55\u7684\u7F51\u7EDC\u5E94\u7528\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001Node.js \u5B98\u7F51\u5730\u5740",slug:"\u4E00\u3001node-js-\u5B98\u7F51\u5730\u5740",children:[]},{level:2,title:"\u4E8C\u3001\u5B89\u88C5\u5305\u5B89\u88C5 Node.js",slug:"\u4E8C\u3001\u5B89\u88C5\u5305\u5B89\u88C5-node-js",children:[]},{level:2,title:"\u4E09\u3001Nvm \u5B89\u88C5 Node",slug:"\u4E09\u3001nvm-\u5B89\u88C5-node",children:[]},{level:2,title:"\u56DB\u3001Npm \u76F8\u5173\u64CD\u4F5C\u547D\u4EE4\u53CA\u5176\u6CE8\u610F\u4E8B\u9879",slug:"\u56DB\u3001npm-\u76F8\u5173\u64CD\u4F5C\u547D\u4EE4\u53CA\u5176\u6CE8\u610F\u4E8B\u9879",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/node/README.md",readingTime:{minutes:5.96,words:1789},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/node/`},key:"v-09429098",path:"/posts/node/",title:"Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",lang:"zh-CN",frontmatter:{title:"Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",date:"2022-04-07T11:56:16.000Z",tag:["Node"],category:["Node"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204071154296.jpg",sticky:5,summary:`\u2003Node.js \u53D1\u5E03\u4E8E 2009 \u5E74 5 \u6708\uFF0C\u7531 Ryan Dahl \u5F00\u53D1\uFF0C\u662F\u4E00\u4E2A\u57FA\u4E8E Chrome V8 \u5F15\u64CE\u7684 JavaScript \u8FD0\u884C\u73AF\u5883\uFF0C\u4F7F\u7528\u4E86\u4E00\u4E2A\u4E8B\u4EF6\u9A71\u52A8\u3001\u975E\u963B\u585E\u5F0F I/O \u6A21\u578B\uFF0C\u8BA9 JavaScript \u8FD0\u884C\u5728\u670D\u52A1\u7AEF\u7684\u5F00\u53D1\u5E73\u53F0\uFF0CJavaScript \u6210\u4E3A\u4E0E PHP\u3001Python\u3001Perl\u3001Ruby \u7B49\u670D\u52A1\u7AEF\u8BED\u8A00\u5E73\u8D77\u5E73\u5750\u7684\u811A\u672C\u8BED\u8A00\u3002Node.js \u5BF9\u4E00\u4E9B\u7279\u6B8A\u7528\u4F8B\u8FDB\u884C\u4F18\u5316\uFF0C\u63D0\u4F9B\u66FF\u4EE3\u7684 API\uFF0C\u4F7F\u5F97 V8 \u5728\u975E\u6D4F\u89C8\u5668\u73AF\u5883\u4E0B\u8FD0\u884C\u5F97\u66F4\u597D\uFF0CV8 \u5F15\u64CE\u6267\u884C Javascript \u7684\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u6027\u80FD\u975E\u5E38\u597D\uFF0C\u57FA\u4E8E Chrome JavaScript \u8FD0\u884C\u65F6\u5EFA\u7ACB\u7684\u5E73\u53F0\uFF0C \u7528\u4E8E\u65B9\u4FBF\u5730\u642D\u5EFA\u54CD\u5E94\u901F\u5EA6\u5FEB\u3001\u6613\u4E8E\u6269\u5C55\u7684\u7F51\u7EDC\u5E94\u7528\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/node/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Node"}],["meta",{property:"article:published_time",content:"2022-04-07T11:56:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Node.js \u53D1\u5E03\u4E8E 2009 \u5E74 5 \u6708\uFF0C\u7531 Ryan Dahl \u5F00\u53D1\uFF0C\u662F\u4E00\u4E2A\u57FA\u4E8E Chrome V8 \u5F15\u64CE\u7684 JavaScript \u8FD0\u884C\u73AF\u5883\uFF0C\u4F7F\u7528\u4E86\u4E00\u4E2A\u4E8B\u4EF6\u9A71\u52A8\u3001\u975E\u963B\u585E\u5F0F I/O \u6A21\u578B\uFF0C\u8BA9 JavaScript \u8FD0\u884C\u5728\u670D\u52A1\u7AEF\u7684\u5F00\u53D1\u5E73\u53F0\uFF0CJavaScript \u6210\u4E3A\u4E0E PHP\u3001Python\u3001Perl\u3001Ruby \u7B49\u670D\u52A1\u7AEF\u8BED\u8A00\u5E73\u8D77\u5E73\u5750\u7684\u811A\u672C\u8BED\u8A00\u3002Node.js \u5BF9\u4E00\u4E9B\u7279\u6B8A\u7528\u4F8B\u8FDB\u884C\u4F18\u5316\uFF0C\u63D0\u4F9B\u66FF\u4EE3\u7684 API\uFF0C\u4F7F\u5F97 V8 \u5728\u975E\u6D4F\u89C8\u5668\u73AF\u5883\u4E0B\u8FD0\u884C\u5F97\u66F4\u597D\uFF0CV8 \u5F15\u64CE\u6267\u884C Javascript \u7684\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u6027\u80FD\u975E\u5E38\u597D\uFF0C\u57FA\u4E8E Chrome JavaScript \u8FD0\u884C\u65F6\u5EFA\u7ACB\u7684\u5E73\u53F0\uFF0C \u7528\u4E8E\u65B9\u4FBF\u5730\u642D\u5EFA\u54CD\u5E94\u901F\u5EA6\u5FEB\u3001\u6613\u4E8E\u6269\u5C55\u7684\u7F51\u7EDC\u5E94\u7528\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001Node.js \u5B98\u7F51\u5730\u5740",slug:"\u4E00\u3001node-js-\u5B98\u7F51\u5730\u5740",children:[]},{level:2,title:"\u4E8C\u3001\u5B89\u88C5\u5305\u5B89\u88C5 Node.js",slug:"\u4E8C\u3001\u5B89\u88C5\u5305\u5B89\u88C5-node-js",children:[]},{level:2,title:"\u4E09\u3001Nvm \u5B89\u88C5 Node",slug:"\u4E09\u3001nvm-\u5B89\u88C5-node",children:[]},{level:2,title:"\u56DB\u3001Npm \u76F8\u5173\u64CD\u4F5C\u547D\u4EE4\u53CA\u5176\u6CE8\u610F\u4E8B\u9879",slug:"\u56DB\u3001npm-\u76F8\u5173\u64CD\u4F5C\u547D\u4EE4\u53CA\u5176\u6CE8\u610F\u4E8B\u9879",children:[]}],content:`---
title: Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F
date: 2022-04-07 11:56:16
tag:
  - Node
category:
  - Node
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204071154296.jpg
sticky: 5
---

&emsp;Node.js \u53D1\u5E03\u4E8E 2009 \u5E74 5 \u6708\uFF0C\u7531 Ryan Dahl \u5F00\u53D1\uFF0C\u662F\u4E00\u4E2A\u57FA\u4E8E Chrome V8 \u5F15\u64CE\u7684 JavaScript \u8FD0\u884C\u73AF\u5883\uFF0C\u4F7F\u7528\u4E86\u4E00\u4E2A\u4E8B\u4EF6\u9A71\u52A8\u3001\u975E\u963B\u585E\u5F0F I/O \u6A21\u578B\uFF0C\u8BA9 JavaScript \u8FD0\u884C\u5728\u670D\u52A1\u7AEF\u7684\u5F00\u53D1\u5E73\u53F0\uFF0CJavaScript \u6210\u4E3A\u4E0E PHP\u3001Python\u3001Perl\u3001Ruby \u7B49\u670D\u52A1\u7AEF\u8BED\u8A00\u5E73\u8D77\u5E73\u5750\u7684\u811A\u672C\u8BED\u8A00\u3002Node.js \u5BF9\u4E00\u4E9B\u7279\u6B8A\u7528\u4F8B\u8FDB\u884C\u4F18\u5316\uFF0C\u63D0\u4F9B\u66FF\u4EE3\u7684 API\uFF0C\u4F7F\u5F97 V8 \u5728\u975E\u6D4F\u89C8\u5668\u73AF\u5883\u4E0B\u8FD0\u884C\u5F97\u66F4\u597D\uFF0CV8 \u5F15\u64CE\u6267\u884C Javascript \u7684\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u6027\u80FD\u975E\u5E38\u597D\uFF0C\u57FA\u4E8E Chrome JavaScript \u8FD0\u884C\u65F6\u5EFA\u7ACB\u7684\u5E73\u53F0\uFF0C \u7528\u4E8E\u65B9\u4FBF\u5730\u642D\u5EFA\u54CD\u5E94\u901F\u5EA6\u5FEB\u3001\u6613\u4E8E\u6269\u5C55\u7684\u7F51\u7EDC\u5E94\u7528\u3002

<!-- more -->

## \u4E00\u3001Node.js \u5B98\u7F51\u5730\u5740

1\u3001Node.js \u56FD\u5185\u4E09\u65B9\u4E2D\u6587\u7F51\u7AD9\uFF1A<http://nodejs.cn/>  
2\u3001Node.js \u5B98\u65B9\u4E2D\u6587\u7F51\u7AD9\uFF1A<https://nodejs.org/zh-cn/>  
3\u3001Node.js \u5B98\u65B9\u82F1\u6587\u7F51\u7AD9\uFF1A<https://nodejs.org/en/>

## \u4E8C\u3001\u5B89\u88C5\u5305\u5B89\u88C5 Node.js

1\u3001\u8FDB\u5165 Node \u5B98\u7F51\u4E0B\u8F7D\u5730\u5740\uFF1A<https://nodejs.org/zh-cn/download/>\uFF0C\u4E0B\u8F7D Linux \u4E8C\u8FDB\u5236\u6587\u4EF6(x64)\u7F16\u8BD1\u5305\uFF0C\u590D\u5236\u4E0B\u8F7D\u94FE\u63A5:\`https://nodejs.org/dist/v16.14.2/node-v16.14.2-linux-x64.tar.xz\`
2\u3001\u8FDB\u5165 Node \u9884\u8BBE\u7684\u5B89\u88C5\u76EE\u5F55\uFF1A

\`\`\`bash
cd /usr/local/node
\`\`\`

3\u3001\u4E0B\u8F7D\u5B89\u88C5\u5305\uFF0C\u5982\u679C\u6CA1\u6709 wget \u547D\u4EE4\uFF0C\u4F7F\u7528\uFF1A\`yum install -y wget\`

\`\`\`bash
wget https://nodejs.org/dist/v16.14.2/node-v16.14.2-linux-x64.tar.xz
\`\`\`

4\u3001\u89E3\u538B\u5B89\u88C5\u5305

\`\`\`bash
tar -zxvf node-v16.14.2-linux-x64.tar.xz
\`\`\`

5\u3001\u91CD\u547D\u540D

\`\`\`bash
mv  node-v16.14.2-linux-x64 node
\`\`\`

6\u3001\u914D\u7F6E\u8F6F\u94FE\u63A5
\u4E3A\u4E86\u4F7F nodejs \u80FD\u591F\u5168\u5C40\u4F7F\u7528\uFF0C\u6211\u4EEC\u9700\u8981\u914D\u7F6E\u4E00\u4E0B\u8F6F\u94FE\u63A5\uFF08\u7C7B\u4F3C\u4E8E\u5FEB\u6377\u65B9\u5F0F\uFF0C\u5982\u679C\u5B89\u88C5\u7684\u8DEF\u5F84\u5728/usr/local/bin/\u4E0B\u4E0D\u9700\u8981\u8FD9\u4E00\u6B65\u64CD\u4F5C\uFF09\uFF0C\u5F53\u7136\u4E5F\u662F\u8F6F\u8FDE\u63A5\u5230\u7528\u6237\u76EE\u5F55\u4E0B/usr/local/bin/

\`\`\`bash
ln -s /usr/local/node/bin/node /usr/local/bin/node
ln -s /usr/local/node/bin/npm /usr/local/bin/npm
\`\`\`

7\u3001\u914D\u7F6E node \u6587\u4EF6\u5B89\u88C5\u8DEF\u5F84

\`\`\`bash
cd /usr/local/node/
mkdir node_global
mkdir node_cache
npm config set prefix "/usr/local/node/node_global"
npm config set cache "/usr/local/node/node_cache"
\`\`\`

8\u3001\u914D\u7F6E\u6DD8\u5B9D\u955C\u50CF

\`\`\`bash
npm config set registry https://registry.npm.taobao.org
\`\`\`

9\u3001\u7248\u672C\u9A8C\u8BC1

\`\`\`bash
node -v
npm -v
\`\`\`

10\u3001\u67E5\u770B npm \u5185\u90E8\u7684\u914D\u7F6E\u53C2\u6570

\`\`\`bash
npm config ls -l
\`\`\`

## \u4E09\u3001Nvm \u5B89\u88C5 Node

&emsp;nvm \u662F node \u7684\u5305\u7BA1\u7406\u5DE5\u5177\u3002\u7531\u4E8E\u5728\u6253\u5F00\u4E0D\u540C\u7684\u9879\u76EE\u65F6\uFF0C\u4E0D\u540C\u7684\u9879\u76EE\u5728\u5B89\u88C5\u4F9D\u8D56\u65F6\u53EF\u80FD\u4F1A\u548C node \u7248\u672C\u6709\u5173\uFF0C\u6240\u4EE5\u8FD9\u5C31\u9700\u8981\u6211\u4EEC\u5728\u4E0D\u540C\u7684\u9879\u76EE\u4E0B\u4F7F\u7528\u4E0D\u540C\u7684 node \u7248\u672C\u3002
nvm \u5C31\u662F\u4E00\u4E2A\u6BD4\u8F83\u597D\u7528 node \u7BA1\u7406\u5DE5\u5177\uFF0C\u65B9\u4FBF\u5FEB\u901F\u5B89\u88C5\u548C\u5207\u6362 node \u7248\u672C\u3002nvm \u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/nvm-sh/nvm>

1\u3001\u524D\u5F80[nvm \u5B98\u7F51](https://github.com/nvm-sh/nvm),\u83B7\u53D6 nvm \u6700\u65B0\u7248\u672C\uFF0C\u4F8B\u5982\uFF1A\`https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh\`  
2\u3001\u4E0B\u8F7D\u5B89\u88C5\u5305

\`\`\`bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
\`\`\`

3\u3001\u73AF\u5883\u53D8\u91CF\u53C2\u6570\u914D\u7F6E
\u5C06\u7B2C\u4E8C\u6B65\u5B89\u88C5\u7ED3\u675F\u540E\u7684\u4E00\u6BB5\u4EE3\u7801\u590D\u5236\u51FA\u6765\uFF0C\u7C98\u8D34\u5728\u6587\u4EF6\`bash_profile\`\u6700\u540E\u3002\u590D\u5236\u4EE3\u7801\u5982\u4E0B\uFF1A

\`\`\`bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \\. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
\`\`\`

\u7F16\u8F91\`bash_profile\`\u6587\u4EF6

\`\`\`bash
vi ~/.bash_profile
#\u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u4F7F\u914D\u7F6E\u53C2\u6570\u751F\u6548
source ~/.bash_profile
\`\`\`

4\u3001\u5173\u95ED\u5F53\u524D shell \u7A97\u53E3\uFF0C\u91CD\u65B0\u6253\u5F00\uFF0C\u67E5\u770B nvm \u7248\u672C

\`\`\`bash
nvm -v
\`\`\`

\u81F3\u6B64 nvm \u5B89\u88C5\u6210\u529F

5\u3001nvm \u5E38\u7528\u547D\u4EE4

\`\`\`bash
#\u5B89\u88C5\u6700\u65B0\u7A33\u5B9A\u7248 node
nvm install stable
#\u5B89\u88C5\u6307\u5B9A\u7248\u672C
nvm install <version>
#\u5220\u9664\u5DF2\u5B89\u88C5\u7684\u6307\u5B9A\u7248\u672C
nvm uninstall <version>
#\u5207\u6362\u4F7F\u7528\u6307\u5B9A\u7684\u7248\u672Cnode
nvm use <version>
#\u5217\u51FA\u6240\u6709\u5B89\u88C5\u7684\u7248\u672C
nvm ls
#\u5217\u51FA\u6240\u6709\u8FDC\u7A0B\u670D\u52A1\u5668\u7684\u7248\u672C
nvm ls-remote
#\u663E\u793A\u5F53\u524D\u7684\u7248\u672C
nvm current
#\u7ED9\u4E0D\u540C\u7684\u7248\u672C\u53F7\u6DFB\u52A0\u522B\u540D
nvm alias <name> <version>
#\u5220\u9664\u5DF2\u5B9A\u4E49\u7684\u522B\u540D
nvm unalias <name>
#\u5728\u5F53\u524D\u7248\u672C node \u73AF\u5883\u4E0B\uFF0C\u91CD\u65B0\u5168\u5C40\u5B89\u88C5\u6307\u5B9A\u7248\u672C\u53F7\u7684 npm \u5305
nvm reinstall-packages <version>
#\u8BBE\u7F6E\u9ED8\u8BA4\u7248\u672C
nvm alias default [node\u7248\u672C\u53F7]
#\u6253\u5F00node.js\u7248\u672C\u63A7\u5236
nvm on
#\u5173\u95EDnode.js\u7248\u672C\u63A7\u5236
nvm off
#\u6E05\u7A7Anvm\u7F13\u5B58\u76EE\u5F55
nvm cache clear
\`\`\`

6\u3001\u5378\u8F7D nvm

\`\`\`bash
#1\u68C0\u67E5\u73AF\u5883\u53D8\u91CF
echo $PATH
#2\u6839\u636E$PATH\u5220\u9664 nvm \u76F8\u5173\u73AF\u5883\u8DEF\u5F84
#3\u5220\u9664 nvm \u76F8\u5173\u76EE\u5F55
rm -rf $NVM_DIR ~/.npm ~/.bower && unset NVM_DIR
#4\u4ECE shell \u914D\u7F6E (\u4F8B\u5982\uFF1A.bash_profile) \u4E2D\u5220\u9664\u4EE5\u4E0B nvm \u76F8\u5173\u73AF\u5883\u53D8\u91CF
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \\. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
#5\u91CD\u542Fshell,\u5173\u95ED\u5F53\u524Dshell\u7A97\u53E3\uFF0C\u6253\u5F00\u65B0\u7684shell\u7A97\u53E3
\`\`\`

## \u56DB\u3001Npm \u76F8\u5173\u64CD\u4F5C\u547D\u4EE4\u53CA\u5176\u6CE8\u610F\u4E8B\u9879

**1\u3001\u67E5\u770B npm \u5B58\u50A8\u5E93\u4E0A\u8F6F\u4EF6\u5305\u7684\u6700\u65B0\u53EF\u7528\u7248\u672C**

\`\`\`bash
#\u67E5\u770B\u6700\u65B0\u7248\u672C
npm view jquery version
#\u67E5\u770B\u6240\u6709\u7248\u672C
npm view jquery versions
\`\`\`

**2\u3001\u67E5\u770B\u672C\u5730\u5DF2\u5B89\u88C5\u5305\u7248\u672C\u53CA\u5176\u4F9D\u8D56\u4FE1\u606F**

\`\`\`bash
#\u67E5\u770B\u5DF2\u5B89\u88C5\u5305\u7248\u672C\u53CA\u5176\u4F9D\u8D56\u4FE1\u606F
npm list
#\u67E5\u770B\u5DF2\u5B89\u88C5\u7684\u7279\u5B9A\u5305\u7248\u672C\u53CA\u5176\u4F9D\u8D56\u4FE1\u606F
npm list dayjs
\`\`\`

**3\u3001\u5B89\u88C5\u6307\u5B9A\u7248\u672C**

\`\`\`bash
#1\u5728package.json\u91CC\u4FEE\u6539\u597D\u6307\u5B9A\u7248\u672C\u53F7\uFF0C\u7136\u540E\u8F93\u5165:
npm update jquery
#2\u66F4\u65B0\u81F3\u6307\u5B9A\u7248\u672C\uFF0C\u4F46\u662F\u4E0D\u4F1A\u5199\u5230package.json\u6587\u4EF6\u91CC
npm update jquery@3.3.1
#3\u66F4\u65B0\u81F3\u6307\u5B9A\u7248\u672C\uFF0C\u5E76\u5199\u5230package.json\u6587\u4EF6\u91CC
npm update jquery@3.3.1 --save
\u6216
npm update jquery@3.3.1 -S
\`\`\`

**4\u3001npm \u5305 ^,@\u548C~\u7684\u533A\u522B**
:::warning
~\u4F1A\u5339\u914D\u6700\u8FD1\u7684\u5C0F\u7248\u672C\u4F9D\u8D56\u5305\uFF0C\u6BD4\u5982~1.2.3 \u4F1A\u5339\u914D\u6240\u6709 1.2.x \u7248\u672C\uFF0C\u4F46\u662F\u4E0D\u5305\u62EC 1.3.0,\u5982\uFF1A~1.1.2\uFF0C\u8868\u793A>=1.1.2 <1.2.0\u3002  
^\u4F1A\u5339\u914D\u6700\u65B0\u7684\u5927\u7248\u672C\u4F9D\u8D56\u5305\uFF0C\u6BD4\u5982^1.2.3 \u4F1A\u5339\u914D\u6240\u6709 1.x.x \u7684\u5305\uFF0C\u5305\u62EC 1.3.0\uFF0C\u4F46\u662F\u4E0D\u5305\u62EC 2.0.0\uFF0C\u5982\uFF1A^1.1.2 \uFF0C\u8868\u793A>=1.1.2 <2.0.0\u3002
:::
&emsp;\u90A3\u4E48\u8BE5\u5982\u4F55\u9009\u62E9\u5462\uFF1F\u5F53\u7136\u4F60\u53EF\u4EE5\u6307\u5B9A\u7279\u5B9A\u7684\u7248\u672C\u53F7\uFF0C\u76F4\u63A5\u5199 1.2.3\uFF0C\u524D\u9762\u4EC0\u4E48\u524D\u7F00\u90FD\u6CA1\u6709\uFF0C\u8FD9\u6837\u56FA\u7136\u6CA1\u95EE\u9898\uFF0C\u4F46\u662F\u5982\u679C\u4F9D\u8D56\u5305\u53D1\u5E03\u65B0\u7248\u672C\u4FEE\u590D\u4E86\u4E00\u4E9B\u5C0F bug\uFF0C\u90A3\u4E48\u9700\u8981\u624B\u52A8\u4FEE\u6539 package.json \u6587\u4EF6\uFF1B~\u548C^\u5219\u53EF\u4EE5\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002\u4F46\u662F\u9700\u8981\u6CE8\u610F^\u7248\u672C\u66F4\u65B0\u53EF\u80FD\u6BD4\u8F83\u5927\uFF0C\u4F1A\u9020\u6210\u9879\u76EE\u4EE3\u7801\u9519\u8BEF\uFF0C\u6BD4\u5982\u8FD9\u7BC7\u6587\u7AE0\uFF08http://blog.csdn.net/u014291497/article/details/54427103\uFF09\u7684\u95EE\u9898\u5C31\u662F\u56E0\u4E3Apackage.json\u4F7F\u7528^1.5.7\u9020\u6210\u7684\uFF0C1.6\u7248\u672C\u7684\u5305\u4E0E\u73B0\u6709\u4EE3\u7801\u4E0D\u517C\u5BB9\u3002\u6240\u4EE5\u5EFA\u8BAE\u4F7F\u7528~\u6765\u6807\u8BB0\u7248\u672C\u53F7\uFF0C\u8FD9\u6837\u53EF\u4EE5\u4FDD\u8BC1\u9879\u76EE\u4E0D\u4F1A\u51FA\u73B0\u5927\u7684\u95EE\u9898\uFF0C\u4E5F\u80FD\u4FDD\u8BC1\u5305\u4E2D\u7684\u5C0Fbug\u53EF\u4EE5\u5F97\u5230\u4FEE\u590D\u3002

**5\u3001npm i \u4E0E npm install \u4E4B\u95F4\u7684\u7EC6\u5C0F\u533A\u522B**

- 1\u3001\u7528 npm i \u5B89\u88C5\u7684\u6A21\u5757\u65E0\u6CD5\u7528 npm uninstall \u5378\u8F7D\uFF0C\u9700\u8981\u7528 npm uninstall i \u547D\u4EE4

- 2\u3001npm i \u4F1A\u5E2E\u52A9\u68C0\u6D4B\u4E0E\u5F53\u524D node \u7248\u672C\u6700\u5339\u914D\u7684 npm \u5305 \u7248\u672C\u53F7\uFF0C\u5E76\u5339\u914D\u51FA\u6765\u76F8\u4E92\u4F9D\u8D56\u7684 npm \u5305\u5E94\u8BE5\u63D0\u5347\u7684\u7248\u672C\u53F7

- 3\u3001\u90E8\u5206 npm \u5305\u5728\u5F53\u524D node \u7248\u672C\u4E0B\u65E0\u6CD5\u4F7F\u7528\uFF0C\u5FC5\u987B\u4F7F\u7528\u5EFA\u8BAE\u7248\u672C

- 4\u3001\u5B89\u88C5\u62A5\u9519\u65F6 intall \u80AF\u5B9A\u4F1A\u51FA\u73B0 npm-debug.log \u6587\u4EF6\uFF0Cnpm i \u4E0D\u4E00\u5B9A

**6\u3001--save \u548C --save-dev \u7684\u4F5C\u7528\u548C\u533A\u522B**

- 1\u3001\u4F7F\u7528\u547D\u4EE4 --save \u6216\u8005\u8BF4\u4E0D\u5199\u547D\u4EE4 --save,\u90FD\u4F1A\u628A\u4FE1\u606F\u8BB0\u5F55\u5230 dependencies \u4E2D,dependencies \u4E2D\u8BB0\u5F55\u7684\u90FD\u662F\u9879\u76EE\u5728\u8FD0\u884C\u65F6\u9700\u8981\u7684\u6587\u4EF6\u3002
- 2\u3001\u4F7F\u7528\u547D\u4EE4 --save-dev \u5219\u4F1A\u628A\u4FE1\u606F\u8BB0\u5F55\u5230 devDependencies \u4E2D\uFF0C devDependencies \u4E2D\u8BB0\u5F55\u7684\u662F\u9879\u76EE\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u9700\u8981\u4F7F\u7528\u7684\u4E00\u4E9B\u6587\u4EF6\uFF0C\u5728\u9879\u76EE\u6700\u7EC8\u8FD0\u884C\u65F6\u662F\u4E0D\u9700\u8981\u7684\u3002
- 3\u3001--save \u7B80\u5199\uFF1A\`-S\`,--save-dev \u7B80\u5199\uFF1A\`-D\`
- 4\u3001\u4E3A\u4F8B\u907F\u514D\u6DF7\u6DC6\uFF0C\u751F\u4EA7\u73AF\u5883\u7528\`-S\`\uFF0C\u5F00\u53D1\u73AF\u5883\u7528\uFF1A\`-D\`
`,contentRendered:`<p>\u2003Node.js \u53D1\u5E03\u4E8E 2009 \u5E74 5 \u6708\uFF0C\u7531 Ryan Dahl \u5F00\u53D1\uFF0C\u662F\u4E00\u4E2A\u57FA\u4E8E Chrome V8 \u5F15\u64CE\u7684 JavaScript \u8FD0\u884C\u73AF\u5883\uFF0C\u4F7F\u7528\u4E86\u4E00\u4E2A\u4E8B\u4EF6\u9A71\u52A8\u3001\u975E\u963B\u585E\u5F0F I/O \u6A21\u578B\uFF0C\u8BA9 JavaScript \u8FD0\u884C\u5728\u670D\u52A1\u7AEF\u7684\u5F00\u53D1\u5E73\u53F0\uFF0CJavaScript \u6210\u4E3A\u4E0E PHP\u3001Python\u3001Perl\u3001Ruby \u7B49\u670D\u52A1\u7AEF\u8BED\u8A00\u5E73\u8D77\u5E73\u5750\u7684\u811A\u672C\u8BED\u8A00\u3002Node.js \u5BF9\u4E00\u4E9B\u7279\u6B8A\u7528\u4F8B\u8FDB\u884C\u4F18\u5316\uFF0C\u63D0\u4F9B\u66FF\u4EE3\u7684 API\uFF0C\u4F7F\u5F97 V8 \u5728\u975E\u6D4F\u89C8\u5668\u73AF\u5883\u4E0B\u8FD0\u884C\u5F97\u66F4\u597D\uFF0CV8 \u5F15\u64CE\u6267\u884C Javascript \u7684\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u6027\u80FD\u975E\u5E38\u597D\uFF0C\u57FA\u4E8E Chrome JavaScript \u8FD0\u884C\u65F6\u5EFA\u7ACB\u7684\u5E73\u53F0\uFF0C \u7528\u4E8E\u65B9\u4FBF\u5730\u642D\u5EFA\u54CD\u5E94\u901F\u5EA6\u5FEB\u3001\u6613\u4E8E\u6269\u5C55\u7684\u7F51\u7EDC\u5E94\u7528\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001node-js-\u5B98\u7F51\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001node-js-\u5B98\u7F51\u5730\u5740" aria-hidden="true">#</a> \u4E00\u3001Node.js \u5B98\u7F51\u5730\u5740</h2>
<p>1\u3001Node.js \u56FD\u5185\u4E09\u65B9\u4E2D\u6587\u7F51\u7AD9\uFF1A<a href="http://nodejs.cn/" target="_blank" rel="noopener noreferrer">http://nodejs.cn/<ExternalLinkIcon/></a><br>
2\u3001Node.js \u5B98\u65B9\u4E2D\u6587\u7F51\u7AD9\uFF1A<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">https://nodejs.org/zh-cn/<ExternalLinkIcon/></a><br>
3\u3001Node.js \u5B98\u65B9\u82F1\u6587\u7F51\u7AD9\uFF1A<a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">https://nodejs.org/en/<ExternalLinkIcon/></a></p>
<h2 id="\u4E8C\u3001\u5B89\u88C5\u5305\u5B89\u88C5-node-js" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u5B89\u88C5\u5305\u5B89\u88C5-node-js" aria-hidden="true">#</a> \u4E8C\u3001\u5B89\u88C5\u5305\u5B89\u88C5 Node.js</h2>
<p>1\u3001\u8FDB\u5165 Node \u5B98\u7F51\u4E0B\u8F7D\u5730\u5740\uFF1A<a href="https://nodejs.org/zh-cn/download/" target="_blank" rel="noopener noreferrer">https://nodejs.org/zh-cn/download/<ExternalLinkIcon/></a>\uFF0C\u4E0B\u8F7D Linux \u4E8C\u8FDB\u5236\u6587\u4EF6(x64)\u7F16\u8BD1\u5305\uFF0C\u590D\u5236\u4E0B\u8F7D\u94FE\u63A5:<code v-pre>https://nodejs.org/dist/v16.14.2/node-v16.14.2-linux-x64.tar.xz</code>
2\u3001\u8FDB\u5165 Node \u9884\u8BBE\u7684\u5B89\u88C5\u76EE\u5F55\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/node
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3\u3001\u4E0B\u8F7D\u5B89\u88C5\u5305\uFF0C\u5982\u679C\u6CA1\u6709 wget \u547D\u4EE4\uFF0C\u4F7F\u7528\uFF1A<code v-pre>yum install -y wget</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">wget</span> https://nodejs.org/dist/v16.14.2/node-v16.14.2-linux-x64.tar.xz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>4\u3001\u89E3\u538B\u5B89\u88C5\u5305</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> node-v16.14.2-linux-x64.tar.xz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>5\u3001\u91CD\u547D\u540D</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">mv</span>  node-v16.14.2-linux-x64 <span class="token function">node</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6\u3001\u914D\u7F6E\u8F6F\u94FE\u63A5
\u4E3A\u4E86\u4F7F nodejs \u80FD\u591F\u5168\u5C40\u4F7F\u7528\uFF0C\u6211\u4EEC\u9700\u8981\u914D\u7F6E\u4E00\u4E0B\u8F6F\u94FE\u63A5\uFF08\u7C7B\u4F3C\u4E8E\u5FEB\u6377\u65B9\u5F0F\uFF0C\u5982\u679C\u5B89\u88C5\u7684\u8DEF\u5F84\u5728/usr/local/bin/\u4E0B\u4E0D\u9700\u8981\u8FD9\u4E00\u6B65\u64CD\u4F5C\uFF09\uFF0C\u5F53\u7136\u4E5F\u662F\u8F6F\u8FDE\u63A5\u5230\u7528\u6237\u76EE\u5F55\u4E0B/usr/local/bin/</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/node/bin/node /usr/local/bin/node
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/node/bin/npm /usr/local/bin/npm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>7\u3001\u914D\u7F6E node \u6587\u4EF6\u5B89\u88C5\u8DEF\u5F84</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/node/
<span class="token function">mkdir</span> node_global
<span class="token function">mkdir</span> node_cache
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> prefix <span class="token string">"/usr/local/node/node_global"</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> cache <span class="token string">"/usr/local/node/node_cache"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>8\u3001\u914D\u7F6E\u6DD8\u5B9D\u955C\u50CF</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>9\u3001\u7248\u672C\u9A8C\u8BC1</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">node</span> <span class="token parameter variable">-v</span>
<span class="token function">npm</span> <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>10\u3001\u67E5\u770B npm \u5185\u90E8\u7684\u914D\u7F6E\u53C2\u6570</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> config <span class="token function">ls</span> <span class="token parameter variable">-l</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u4E09\u3001nvm-\u5B89\u88C5-node" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001nvm-\u5B89\u88C5-node" aria-hidden="true">#</a> \u4E09\u3001Nvm \u5B89\u88C5 Node</h2>
<p>\u2003nvm \u662F node \u7684\u5305\u7BA1\u7406\u5DE5\u5177\u3002\u7531\u4E8E\u5728\u6253\u5F00\u4E0D\u540C\u7684\u9879\u76EE\u65F6\uFF0C\u4E0D\u540C\u7684\u9879\u76EE\u5728\u5B89\u88C5\u4F9D\u8D56\u65F6\u53EF\u80FD\u4F1A\u548C node \u7248\u672C\u6709\u5173\uFF0C\u6240\u4EE5\u8FD9\u5C31\u9700\u8981\u6211\u4EEC\u5728\u4E0D\u540C\u7684\u9879\u76EE\u4E0B\u4F7F\u7528\u4E0D\u540C\u7684 node \u7248\u672C\u3002
nvm \u5C31\u662F\u4E00\u4E2A\u6BD4\u8F83\u597D\u7528 node \u7BA1\u7406\u5DE5\u5177\uFF0C\u65B9\u4FBF\u5FEB\u901F\u5B89\u88C5\u548C\u5207\u6362 node \u7248\u672C\u3002nvm \u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">https://github.com/nvm-sh/nvm<ExternalLinkIcon/></a></p>
<p>1\u3001\u524D\u5F80<a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvm \u5B98\u7F51<ExternalLinkIcon/></a>,\u83B7\u53D6 nvm \u6700\u65B0\u7248\u672C\uFF0C\u4F8B\u5982\uFF1A<code v-pre>https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh</code><br>
2\u3001\u4E0B\u8F7D\u5B89\u88C5\u5305</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">curl</span> -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3\u3001\u73AF\u5883\u53D8\u91CF\u53C2\u6570\u914D\u7F6E
\u5C06\u7B2C\u4E8C\u6B65\u5B89\u88C5\u7ED3\u675F\u540E\u7684\u4E00\u6BB5\u4EE3\u7801\u590D\u5236\u51FA\u6765\uFF0C\u7C98\u8D34\u5728\u6587\u4EF6<code v-pre>bash_profile</code>\u6700\u540E\u3002\u590D\u5236\u4EE3\u7801\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">NVM_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/.nvm"</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>. <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="token comment"># This loads nvm</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$NVM_DIR</span>/bash_completion"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>. <span class="token string">"<span class="token variable">$NVM_DIR</span>/bash_completion"</span>  <span class="token comment"># This loads nvm bash_completion</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7F16\u8F91<code v-pre>bash_profile</code>\u6587\u4EF6</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">vi</span> ~/.bash_profile
<span class="token comment">#\u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u4F7F\u914D\u7F6E\u53C2\u6570\u751F\u6548</span>
<span class="token builtin class-name">source</span> ~/.bash_profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4\u3001\u5173\u95ED\u5F53\u524D shell \u7A97\u53E3\uFF0C\u91CD\u65B0\u6253\u5F00\uFF0C\u67E5\u770B nvm \u7248\u672C</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>nvm <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u81F3\u6B64 nvm \u5B89\u88C5\u6210\u529F</p>
<p>5\u3001nvm \u5E38\u7528\u547D\u4EE4</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u5B89\u88C5\u6700\u65B0\u7A33\u5B9A\u7248 node</span>
nvm <span class="token function">install</span> stable
<span class="token comment">#\u5B89\u88C5\u6307\u5B9A\u7248\u672C</span>
nvm <span class="token function">install</span> <span class="token operator">&lt;</span>version<span class="token operator">></span>
<span class="token comment">#\u5220\u9664\u5DF2\u5B89\u88C5\u7684\u6307\u5B9A\u7248\u672C</span>
nvm uninstall <span class="token operator">&lt;</span>version<span class="token operator">></span>
<span class="token comment">#\u5207\u6362\u4F7F\u7528\u6307\u5B9A\u7684\u7248\u672Cnode</span>
nvm use <span class="token operator">&lt;</span>version<span class="token operator">></span>
<span class="token comment">#\u5217\u51FA\u6240\u6709\u5B89\u88C5\u7684\u7248\u672C</span>
nvm <span class="token function">ls</span>
<span class="token comment">#\u5217\u51FA\u6240\u6709\u8FDC\u7A0B\u670D\u52A1\u5668\u7684\u7248\u672C</span>
nvm ls-remote
<span class="token comment">#\u663E\u793A\u5F53\u524D\u7684\u7248\u672C</span>
nvm current
<span class="token comment">#\u7ED9\u4E0D\u540C\u7684\u7248\u672C\u53F7\u6DFB\u52A0\u522B\u540D</span>
nvm <span class="token builtin class-name">alias</span> <span class="token operator">&lt;</span>name<span class="token operator">></span> <span class="token operator">&lt;</span>version<span class="token operator">></span>
<span class="token comment">#\u5220\u9664\u5DF2\u5B9A\u4E49\u7684\u522B\u540D</span>
nvm <span class="token builtin class-name">unalias</span> <span class="token operator">&lt;</span>name<span class="token operator">></span>
<span class="token comment">#\u5728\u5F53\u524D\u7248\u672C node \u73AF\u5883\u4E0B\uFF0C\u91CD\u65B0\u5168\u5C40\u5B89\u88C5\u6307\u5B9A\u7248\u672C\u53F7\u7684 npm \u5305</span>
nvm reinstall-packages <span class="token operator">&lt;</span>version<span class="token operator">></span>
<span class="token comment">#\u8BBE\u7F6E\u9ED8\u8BA4\u7248\u672C</span>
nvm <span class="token builtin class-name">alias</span> default <span class="token punctuation">[</span>node\u7248\u672C\u53F7<span class="token punctuation">]</span>
<span class="token comment">#\u6253\u5F00node.js\u7248\u672C\u63A7\u5236</span>
nvm on
<span class="token comment">#\u5173\u95EDnode.js\u7248\u672C\u63A7\u5236</span>
nvm off
<span class="token comment">#\u6E05\u7A7Anvm\u7F13\u5B58\u76EE\u5F55</span>
nvm cache <span class="token function">clear</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6\u3001\u5378\u8F7D nvm</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#1\u68C0\u67E5\u73AF\u5883\u53D8\u91CF</span>
<span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
<span class="token comment">#2\u6839\u636E$PATH\u5220\u9664 nvm \u76F8\u5173\u73AF\u5883\u8DEF\u5F84</span>
<span class="token comment">#3\u5220\u9664 nvm \u76F8\u5173\u76EE\u5F55</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">$NVM_DIR</span> ~/.npm ~/.bower <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">unset</span> NVM_DIR
<span class="token comment">#4\u4ECE shell \u914D\u7F6E (\u4F8B\u5982\uFF1A.bash_profile) \u4E2D\u5220\u9664\u4EE5\u4E0B nvm \u76F8\u5173\u73AF\u5883\u53D8\u91CF</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">NVM_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/.nvm"</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>. <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="token comment"># This loads nvm</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$NVM_DIR</span>/bash_completion"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>. <span class="token string">"<span class="token variable">$NVM_DIR</span>/bash_completion"</span>  <span class="token comment"># This loads nvm bash_completion</span>
<span class="token comment">#5\u91CD\u542Fshell,\u5173\u95ED\u5F53\u524Dshell\u7A97\u53E3\uFF0C\u6253\u5F00\u65B0\u7684shell\u7A97\u53E3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u56DB\u3001npm-\u76F8\u5173\u64CD\u4F5C\u547D\u4EE4\u53CA\u5176\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001npm-\u76F8\u5173\u64CD\u4F5C\u547D\u4EE4\u53CA\u5176\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> \u56DB\u3001Npm \u76F8\u5173\u64CD\u4F5C\u547D\u4EE4\u53CA\u5176\u6CE8\u610F\u4E8B\u9879</h2>
<p><strong>1\u3001\u67E5\u770B npm \u5B58\u50A8\u5E93\u4E0A\u8F6F\u4EF6\u5305\u7684\u6700\u65B0\u53EF\u7528\u7248\u672C</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u770B\u6700\u65B0\u7248\u672C</span>
<span class="token function">npm</span> view jquery version
<span class="token comment">#\u67E5\u770B\u6240\u6709\u7248\u672C</span>
<span class="token function">npm</span> view jquery versions
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2\u3001\u67E5\u770B\u672C\u5730\u5DF2\u5B89\u88C5\u5305\u7248\u672C\u53CA\u5176\u4F9D\u8D56\u4FE1\u606F</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u770B\u5DF2\u5B89\u88C5\u5305\u7248\u672C\u53CA\u5176\u4F9D\u8D56\u4FE1\u606F</span>
<span class="token function">npm</span> list
<span class="token comment">#\u67E5\u770B\u5DF2\u5B89\u88C5\u7684\u7279\u5B9A\u5305\u7248\u672C\u53CA\u5176\u4F9D\u8D56\u4FE1\u606F</span>
<span class="token function">npm</span> list dayjs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3\u3001\u5B89\u88C5\u6307\u5B9A\u7248\u672C</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#1\u5728package.json\u91CC\u4FEE\u6539\u597D\u6307\u5B9A\u7248\u672C\u53F7\uFF0C\u7136\u540E\u8F93\u5165:</span>
<span class="token function">npm</span> update jquery
<span class="token comment">#2\u66F4\u65B0\u81F3\u6307\u5B9A\u7248\u672C\uFF0C\u4F46\u662F\u4E0D\u4F1A\u5199\u5230package.json\u6587\u4EF6\u91CC</span>
<span class="token function">npm</span> update jquery@3.3.1
<span class="token comment">#3\u66F4\u65B0\u81F3\u6307\u5B9A\u7248\u672C\uFF0C\u5E76\u5199\u5230package.json\u6587\u4EF6\u91CC</span>
<span class="token function">npm</span> update jquery@3.3.1 <span class="token parameter variable">--save</span>
\u6216
<span class="token function">npm</span> update jquery@3.3.1 <span class="token parameter variable">-S</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4\u3001npm \u5305 ^,@\u548C~\u7684\u533A\u522B</strong></p>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<p>~\u4F1A\u5339\u914D\u6700\u8FD1\u7684\u5C0F\u7248\u672C\u4F9D\u8D56\u5305\uFF0C\u6BD4\u5982~1.2.3 \u4F1A\u5339\u914D\u6240\u6709 1.2.x \u7248\u672C\uFF0C\u4F46\u662F\u4E0D\u5305\u62EC 1.3.0,\u5982\uFF1A~1.1.2\uFF0C\u8868\u793A&gt;=1.1.2 &lt;1.2.0\u3002<br>
^\u4F1A\u5339\u914D\u6700\u65B0\u7684\u5927\u7248\u672C\u4F9D\u8D56\u5305\uFF0C\u6BD4\u5982^1.2.3 \u4F1A\u5339\u914D\u6240\u6709 1.x.x \u7684\u5305\uFF0C\u5305\u62EC 1.3.0\uFF0C\u4F46\u662F\u4E0D\u5305\u62EC 2.0.0\uFF0C\u5982\uFF1A^1.1.2 \uFF0C\u8868\u793A&gt;=1.1.2 &lt;2.0.0\u3002</p>
</div>
<p>\u2003\u90A3\u4E48\u8BE5\u5982\u4F55\u9009\u62E9\u5462\uFF1F\u5F53\u7136\u4F60\u53EF\u4EE5\u6307\u5B9A\u7279\u5B9A\u7684\u7248\u672C\u53F7\uFF0C\u76F4\u63A5\u5199 1.2.3\uFF0C\u524D\u9762\u4EC0\u4E48\u524D\u7F00\u90FD\u6CA1\u6709\uFF0C\u8FD9\u6837\u56FA\u7136\u6CA1\u95EE\u9898\uFF0C\u4F46\u662F\u5982\u679C\u4F9D\u8D56\u5305\u53D1\u5E03\u65B0\u7248\u672C\u4FEE\u590D\u4E86\u4E00\u4E9B\u5C0F bug\uFF0C\u90A3\u4E48\u9700\u8981\u624B\u52A8\u4FEE\u6539 package.json \u6587\u4EF6\uFF1B~\u548C^\u5219\u53EF\u4EE5\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002\u4F46\u662F\u9700\u8981\u6CE8\u610F^\u7248\u672C\u66F4\u65B0\u53EF\u80FD\u6BD4\u8F83\u5927\uFF0C\u4F1A\u9020\u6210\u9879\u76EE\u4EE3\u7801\u9519\u8BEF\uFF0C\u6BD4\u5982\u8FD9\u7BC7\u6587\u7AE0\uFF08http://blog.csdn.net/u014291497/article/details/54427103\uFF09\u7684\u95EE\u9898\u5C31\u662F\u56E0\u4E3Apackage.json\u4F7F\u7528^1.5.7\u9020\u6210\u7684\uFF0C1.6\u7248\u672C\u7684\u5305\u4E0E\u73B0\u6709\u4EE3\u7801\u4E0D\u517C\u5BB9\u3002\u6240\u4EE5\u5EFA\u8BAE\u4F7F\u7528~\u6765\u6807\u8BB0\u7248\u672C\u53F7\uFF0C\u8FD9\u6837\u53EF\u4EE5\u4FDD\u8BC1\u9879\u76EE\u4E0D\u4F1A\u51FA\u73B0\u5927\u7684\u95EE\u9898\uFF0C\u4E5F\u80FD\u4FDD\u8BC1\u5305\u4E2D\u7684\u5C0Fbug\u53EF\u4EE5\u5F97\u5230\u4FEE\u590D\u3002</p>
<p><strong>5\u3001npm i \u4E0E npm install \u4E4B\u95F4\u7684\u7EC6\u5C0F\u533A\u522B</strong></p>
<ul>
<li>
<p>1\u3001\u7528 npm i \u5B89\u88C5\u7684\u6A21\u5757\u65E0\u6CD5\u7528 npm uninstall \u5378\u8F7D\uFF0C\u9700\u8981\u7528 npm uninstall i \u547D\u4EE4</p>
</li>
<li>
<p>2\u3001npm i \u4F1A\u5E2E\u52A9\u68C0\u6D4B\u4E0E\u5F53\u524D node \u7248\u672C\u6700\u5339\u914D\u7684 npm \u5305 \u7248\u672C\u53F7\uFF0C\u5E76\u5339\u914D\u51FA\u6765\u76F8\u4E92\u4F9D\u8D56\u7684 npm \u5305\u5E94\u8BE5\u63D0\u5347\u7684\u7248\u672C\u53F7</p>
</li>
<li>
<p>3\u3001\u90E8\u5206 npm \u5305\u5728\u5F53\u524D node \u7248\u672C\u4E0B\u65E0\u6CD5\u4F7F\u7528\uFF0C\u5FC5\u987B\u4F7F\u7528\u5EFA\u8BAE\u7248\u672C</p>
</li>
<li>
<p>4\u3001\u5B89\u88C5\u62A5\u9519\u65F6 intall \u80AF\u5B9A\u4F1A\u51FA\u73B0 npm-debug.log \u6587\u4EF6\uFF0Cnpm i \u4E0D\u4E00\u5B9A</p>
</li>
</ul>
<p><strong>6\u3001--save \u548C --save-dev \u7684\u4F5C\u7528\u548C\u533A\u522B</strong></p>
<ul>
<li>1\u3001\u4F7F\u7528\u547D\u4EE4 --save \u6216\u8005\u8BF4\u4E0D\u5199\u547D\u4EE4 --save,\u90FD\u4F1A\u628A\u4FE1\u606F\u8BB0\u5F55\u5230 dependencies \u4E2D,dependencies \u4E2D\u8BB0\u5F55\u7684\u90FD\u662F\u9879\u76EE\u5728\u8FD0\u884C\u65F6\u9700\u8981\u7684\u6587\u4EF6\u3002</li>
<li>2\u3001\u4F7F\u7528\u547D\u4EE4 --save-dev \u5219\u4F1A\u628A\u4FE1\u606F\u8BB0\u5F55\u5230 devDependencies \u4E2D\uFF0C devDependencies \u4E2D\u8BB0\u5F55\u7684\u662F\u9879\u76EE\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u9700\u8981\u4F7F\u7528\u7684\u4E00\u4E9B\u6587\u4EF6\uFF0C\u5728\u9879\u76EE\u6700\u7EC8\u8FD0\u884C\u65F6\u662F\u4E0D\u9700\u8981\u7684\u3002</li>
<li>3\u3001--save \u7B80\u5199\uFF1A<code v-pre>-S</code>,--save-dev \u7B80\u5199\uFF1A<code v-pre>-D</code></li>
<li>4\u3001\u4E3A\u4F8B\u907F\u514D\u6DF7\u6DC6\uFF0C\u751F\u4EA7\u73AF\u5883\u7528<code v-pre>-S</code>\uFF0C\u5F00\u53D1\u73AF\u5883\u7528\uFF1A<code v-pre>-D</code></li>
</ul>
`,date:"2022-04-07",deps:[],links:[],pathInferred:"/posts/node/",pathLocale:"/",permalink:null,routeMeta:{title:"Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"},sfcBlocks:[],slug:"README",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/node/README.md",filePathRelative:"posts/node/README.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/node/index.html.vue",componentFilePathRelative:"pages/posts/node/index.html.vue",componentFileChunkName:"v-09429098",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/node/index.html.js",dataFilePathRelative:"pages/posts/node/index.html.js",dataFileChunkName:"v-09429098",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/node/index.html",htmlFilePathRelative:"posts/node/index.html"},title:"Node\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"},["/posts/node/index.html","/posts/node/README.md"]],["v-7eeae4bc","/posts/node/pm2.html",{_blog:{data:{key:"v-7eeae4bc",path:"/posts/node/pm2.html",title:"PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4",lang:"zh-CN",frontmatter:{title:"PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4",date:"2022-04-07T16:31:16.000Z",tags:["pm2"],categories:["Node","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200951285.jpg",summary:`\u2003pm2 \u662F\u4E00\u4E2A\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177,\u53EF\u4EE5\u7528\u5B83\u6765\u7BA1\u7406\u4F60\u7684 node \u8FDB\u7A0B\uFF0C\u5E76\u67E5\u770B node \u8FDB\u7A0B\u7684\u72B6\u6001\uFF0C\u5F53\u7136\u4E5F\u652F\u6301\u6027\u80FD\u76D1\u63A7\uFF0C\u8FDB\u7A0B\u5B88\u62A4\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/node/pm2.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"pm2"}],["meta",{property:"article:published_time",content:"2022-04-07T16:31:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003pm2 \u662F\u4E00\u4E2A\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177,\u53EF\u4EE5\u7528\u5B83\u6765\u7BA1\u7406\u4F60\u7684 node \u8FDB\u7A0B\uFF0C\u5E76\u67E5\u770B node \u8FDB\u7A0B\u7684\u72B6\u6001\uFF0C\u5F53\u7136\u4E5F\u652F\u6301\u6027\u80FD\u76D1\u63A7\uFF0C\u8FDB\u7A0B\u5B88\u62A4\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001pm2 \u5B98\u7F51\u4FE1\u606F",slug:"\u4E00\u3001pm2-\u5B98\u7F51\u4FE1\u606F",children:[]},{level:2,title:"\u4E8C\u3001pm2 \u5B89\u88C5\u6B65\u9AA4",slug:"\u4E8C\u3001pm2-\u5B89\u88C5\u6B65\u9AA4",children:[]},{level:2,title:"\u4E09\u3001pm2 \u5E38\u7528\u547D\u4EE4",slug:"\u4E09\u3001pm2-\u5E38\u7528\u547D\u4EE4",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/node/pm2.md",readingTime:{minutes:3.91,words:1172},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/node/pm2.html`},key:"v-7eeae4bc",path:"/posts/node/pm2.html",title:"PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4",lang:"zh-CN",frontmatter:{title:"PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4",date:"2022-04-07T16:31:16.000Z",tags:["pm2"],categories:["Node","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200951285.jpg",summary:`\u2003pm2 \u662F\u4E00\u4E2A\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177,\u53EF\u4EE5\u7528\u5B83\u6765\u7BA1\u7406\u4F60\u7684 node \u8FDB\u7A0B\uFF0C\u5E76\u67E5\u770B node \u8FDB\u7A0B\u7684\u72B6\u6001\uFF0C\u5F53\u7136\u4E5F\u652F\u6301\u6027\u80FD\u76D1\u63A7\uFF0C\u8FDB\u7A0B\u5B88\u62A4\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/node/pm2.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"pm2"}],["meta",{property:"article:published_time",content:"2022-04-07T16:31:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003pm2 \u662F\u4E00\u4E2A\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177,\u53EF\u4EE5\u7528\u5B83\u6765\u7BA1\u7406\u4F60\u7684 node \u8FDB\u7A0B\uFF0C\u5E76\u67E5\u770B node \u8FDB\u7A0B\u7684\u72B6\u6001\uFF0C\u5F53\u7136\u4E5F\u652F\u6301\u6027\u80FD\u76D1\u63A7\uFF0C\u8FDB\u7A0B\u5B88\u62A4\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001pm2 \u5B98\u7F51\u4FE1\u606F",slug:"\u4E00\u3001pm2-\u5B98\u7F51\u4FE1\u606F",children:[]},{level:2,title:"\u4E8C\u3001pm2 \u5B89\u88C5\u6B65\u9AA4",slug:"\u4E8C\u3001pm2-\u5B89\u88C5\u6B65\u9AA4",children:[]},{level:2,title:"\u4E09\u3001pm2 \u5E38\u7528\u547D\u4EE4",slug:"\u4E09\u3001pm2-\u5E38\u7528\u547D\u4EE4",children:[]}],content:`---
title: PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4
date: 2022-04-07 16:31:16
tags:
  - pm2
categories:
  - Node
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200951285.jpg
---

&emsp;pm2 \u662F\u4E00\u4E2A\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177,\u53EF\u4EE5\u7528\u5B83\u6765\u7BA1\u7406\u4F60\u7684 node \u8FDB\u7A0B\uFF0C\u5E76\u67E5\u770B node \u8FDB\u7A0B\u7684\u72B6\u6001\uFF0C\u5F53\u7136\u4E5F\u652F\u6301\u6027\u80FD\u76D1\u63A7\uFF0C\u8FDB\u7A0B\u5B88\u62A4\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002

<!-- more -->

## \u4E00\u3001pm2 \u5B98\u7F51\u4FE1\u606F

1\u3001pm2 \u5B98\u7F51\u5730\u5740\uFF1A<https://pm2.keymetrics.io/>  
2\u3001pm2 \u5B98\u65B9\u6587\u6863\uFF1A<https://pm2.keymetrics.io/docs/usage/quick-start/>  
3\u3001pm2 github \u5730\u5740\uFF1A<https://github.com/Unitech/pm2>

## \u4E8C\u3001pm2 \u5B89\u88C5\u6B65\u9AA4

1\u3001pm2 \u5B89\u88C5\u9700\u8981\u4F9D\u8D56\`Node\`\u73AF\u5883\uFF0C\u5E76\u4E14\`Node\`\u7248\u672C\u9700\u8981\u9AD8\u4E8E 12\uFF0C\u5982\u679C\u4E3A\u5B89\u88C5\`Node\`,\u8BF7\u53C2\u8003\uFF1A[Node \u73AF\u5883\u5B89\u88C5\u65B9\u5F0F](/node/)  
2\u3001pm2 \u5B89\u88C5\u547D\u4EE4

\`\`\`bash
# \u5168\u5C40\u5B89\u88C5pm2
$ npm install pm2 -g
\`\`\`

3\u3001\u5F00\u59CB\u542F\u52A8\u4E00\u4E2A\u5E94\u7528

\u914D\u7F6E pm2 \u5E94\u7528\u5B9E\u4F8B\u914D\u7F6E\u6587\u4EF6\`ecosystem.config.js\`,\u5982\u4E0B\uFF1A

\`\`\`bash
#pm2\u5B9E\u4F8B\u914D\u7F6E\uFF1Aecosystem.config.js
module.exports = {
  apps: [
    {
      #\u5B9E\u4F8B\u540D\u79F0
      name: 'NuxtRmbRate',
      #\u90E8\u7F72\u6A21\u5F0F\uFF0C\u5355\u673A\uFF1A'fork',\u96C6\u7FA4\uFF1A'cluster'
      exec_mode: 'fork',
      #\u5B9E\u4F8B\u6570\u76EE
      instances: '1',
      #\u9700\u8981\u6267\u884C\u7684\u811A\u672C\u6587\u4EF6\uFF0C\u5BF9\u4E8E\u666E\u901A\u7684nuxt\u9879\u76EE(\u6CA1\u6709server)\uFF0C\u4E00\u822C\u91C7\u7528nuxt start\u547D\u4EE4\uFF0C\u7528pm2\u6267\u884C\u65F6\u9700\u8981\u4FEE\u6539\u6210./node-modules/nuxt/dist/bin/nuxt.js,\u5426\u5219\u62A5\u9519
      script: 'server/index.js',
      #\u5E94\u7528\u7A0B\u5E8F\u6240\u5728\u7684\u76EE\u5F55
      cwd: '',
      # \u4F20\u9012\u7ED9\u811A\u672C\u7684\u53C2\u6570\uFF0C\u4F8B\u5982nuxt start\u547D\u4EE4\uFF0C\u53C2\u6570\u4E3Astart
      args: '',
      # \u5B8C\u6574\u65E5\u5FD7\u8DEF\u5F84
      output: 'log/output.log',
      # \u9519\u8BEF\u65E5\u5FD7\u8DEF\u5F84
      error: 'log/error.log',
      # \u8BBF\u95EE\u65E5\u5FD7\u8DEF\u5F84
      log: 'log/access.log',
      # \u65E5\u5FD7\u683C\u5F0F
      log_type: 'json',
      # \u5408\u5E76\u65E5\u5FD7
      merge_logs: true,
      # \u65E5\u5FD7\u65E5\u671F\u683C\u5F0F
      log_date_format: 'YYYY-MM-DD HH:mm:ss',
       # \u6700\u5C0F\u8FD0\u884C\u65F6\u95F4\uFF0C\u8FD9\u91CC\u8BBE\u7F6E\u7684\u662F60s\u5373\u5982\u679C\u5E94\u7528\u7A0B\u5E8F\u5728* 60s\u5185\u9000\u51FA\uFF0Cpm2\u4F1A\u8BA4\u4E3A\u7A0B\u5E8F\u5F02\u5E38\u9000\u51FA\uFF0C\u6B64\u65F6\u89E6\u53D1\u91CD\u542F* max_restarts\u8BBE\u7F6E\u6570\u91CF\uFF0C\u5E94\u7528\u8FD0\u884C\u5C11\u4E8E\u65F6\u95F4\u88AB\u8BA4\u4E3A\u662F\u5F02\u5E38\u542F\u52A8
      min_uptime: '60s',
      # \u8BBE\u7F6E\u5E94\u7528\u7A0B\u5E8F\u5F02\u5E38\u9000\u51FA\u91CD\u542F\u7684\u6B21\u6570\uFF0C\u9ED8\u8BA415\u6B21\uFF08\u4ECE0\u5F00\u59CB\u8BA1\u6570\uFF09,\u6700\u5927\u5F02\u5E38\u91CD\u542F\u6B21\u6570\uFF0C\u5373\u5C0F\u4E8Emin_uptime\u8FD0\u884C\u65F6\u95F4\u91CD\u542F\u6B21\u6570\uFF1B
      max_restarts: 10,
      # \u542F\u7528/\u7981\u7528\u5E94\u7528\u7A0B\u5E8F\u5D29\u6E83\u6216\u9000\u51FA\u65F6\u81EA\u52A8\u91CD\u542F\uFF0C\u9ED8\u8BA4\u4E3Atrue, \u53D1\u751F\u5F02\u5E38\u7684\u60C5\u51B5\u4E0B\u81EA\u52A8\u91CD\u542F
      autorestart: true,
      # \u5F02\u5E38\u91CD\u542F\u60C5\u51B5\u4E0B\uFF0C\u5EF6\u65F6\u91CD\u542F\u65F6\u95F4
      restart_delay: 30,
      #\u751F\u4EA7\u73AF\u5883\u914D\u7F6E
      env_prod: {
        # \u73AF\u5883\u53C2\u6570\uFF0C\u5F53\u524D\u6307\u5B9A\u4E3A\u751F\u4EA7\u73AF\u5883
        NODE_ENV: 'production'
      }
    }
  ]
}
\`\`\`

\u5176\u4ED6\u914D\u7F6E\u9879\u5982\u4E0B\uFF1A

\`\`\`bash
name \u5E94\u7528\u8FDB\u7A0B\u540D\u79F0\uFF1B

script \u542F\u52A8\u811A\u672C\u8DEF\u5F84\uFF1B

cwd \u5E94\u7528\u542F\u52A8\u7684\u8DEF\u5F84\uFF0C\u5173\u4E8E script \u4E0E cwd \u7684\u533A\u522B\u4E3E\u4F8B\u8BF4\u660E\uFF1A\u5728/home/polo/\u76EE\u5F55\u4E0B\u8FD0\u884C/data/release/node/index.js\uFF0C\u6B64\u5904 script \u4E3A/data/release/node/index.js\uFF0Ccwd \u4E3A/home/polo/\uFF1B

args \u4F20\u9012\u7ED9\u811A\u672C\u7684\u53C2\u6570\uFF1B

interpreter \u6307\u5B9A\u7684\u811A\u672C\u89E3\u91CA\u5668\uFF1B

interpreter_args \u4F20\u9012\u7ED9\u89E3\u91CA\u5668\u7684\u53C2\u6570\uFF1B

instances \u5E94\u7528\u542F\u52A8\u5B9E\u4F8B\u4E2A\u6570\uFF0C\u4EC5\u5728 cluster \u6A21\u5F0F\u6709\u6548\uFF0C\u9ED8\u8BA4\u4E3A fork\uFF1B

exec_mode \u5E94\u7528\u542F\u52A8\u6A21\u5F0F\uFF0C\u652F\u6301 fork \u548C cluster \u6A21\u5F0F\uFF1B

watch \u76D1\u542C\u91CD\u542F\uFF0C\u542F\u7528\u60C5\u51B5\u4E0B\uFF0C\u6587\u4EF6\u5939\u6216\u5B50\u6587\u4EF6\u5939\u4E0B\u53D8\u5316\u5E94\u7528\u81EA\u52A8\u91CD\u542F\uFF1B

ignore_watch \u5FFD\u7565\u76D1\u542C\u7684\u6587\u4EF6\u5939\uFF0C\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\uFF1B

max_memory_restart \u6700\u5927\u5185\u5B58\u9650\u5236\u6570\uFF0C\u8D85\u51FA\u81EA\u52A8\u91CD\u542F\uFF1B

env \u73AF\u5883\u53D8\u91CF\uFF0Cobject \u7C7B\u578B\uFF0C\u5982{"NODE_ENV":"production", "ID": "42"}\uFF1B

log_date_format \u6307\u5B9A\u65E5\u5FD7\u65E5\u671F\u683C\u5F0F\uFF0C\u5982 YYYY-MM-DD HH:mm:ss\uFF1B

error_file \u8BB0\u5F55\u6807\u51C6\u9519\u8BEF\u6D41\uFF0C$HOME/.pm2/logs/XXXerr.log)\uFF0C\u4EE3\u7801\u9519\u8BEF\u53EF\u5728\u6B64\u6587\u4EF6\u67E5\u627E\uFF1B

out_file \u8BB0\u5F55\u6807\u51C6\u8F93\u51FA\u6D41\uFF0C$HOME/.pm2/logs/XXXout.log)\uFF0C\u5982\u5E94\u7528\u6253\u5370\u5927\u91CF\u7684\u6807\u51C6\u8F93\u51FA\uFF0C\u4F1A\u5BFC\u81F4 pm2 \u65E5\u5FD7\u8FC7\u5927\uFF1B

min_uptime \u5E94\u7528\u8FD0\u884C\u5C11\u4E8E\u65F6\u95F4\u88AB\u8BA4\u4E3A\u662F\u5F02\u5E38\u542F\u52A8\uFF1B

max_restarts \u6700\u5927\u5F02\u5E38\u91CD\u542F\u6B21\u6570\uFF0C\u5373\u5C0F\u4E8E min_uptime \u8FD0\u884C\u65F6\u95F4\u91CD\u542F\u6B21\u6570\uFF1B

autorestart \u9ED8\u8BA4\u4E3A true, \u53D1\u751F\u5F02\u5E38\u7684\u60C5\u51B5\u4E0B\u81EA\u52A8\u91CD\u542F\uFF1B

cron_restart crontab \u65F6\u95F4\u683C\u5F0F\u91CD\u542F\u5E94\u7528\uFF0C\u76EE\u524D\u53EA\u652F\u6301 cluster \u6A21\u5F0F\uFF1B

force \u9ED8\u8BA4 false\uFF0C\u5982\u679C true\uFF0C\u53EF\u4EE5\u91CD\u590D\u542F\u52A8\u4E00\u4E2A\u811A\u672C\u3002pm2 \u4E0D\u5EFA\u8BAE\u8FD9\u4E48\u505A\uFF1B

restart_delay \u5F02\u5E38\u91CD\u542F\u60C5\u51B5\u4E0B\uFF0C\u5EF6\u65F6\u91CD\u542F\u65F6\u95F4\uFF1B
\`\`\`

**\u6CE8\u610F\uFF1A** \u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\u65F6\u9700\u8981\u4EE5\`env_\`\u5F00\u5934\uFF0C\u8BE6\u7EC6\u53C2\u8003\uFF1A<https:#pm2.keymetrics.io/docs/usage/environment/>\u3002\u4F8B\u5982\u8BBE\u7F6E\u4E86\u73AF\u5883\u53D8\u91CF\`env_production\`\uFF0C\u91C7\u7528 pm2 \u542F\u52A8\u65F6\u5982\u4E0B\uFF1A\`pm2 start ecosystem.config.js --env production\`

\u542F\u52A8\u9879\u76EE\u5B9E\u4F8B

\`\`\`bash
pm2 start ecosystem.config.js
\`\`\`

## \u4E09\u3001pm2 \u5E38\u7528\u547D\u4EE4

\`\`\`bash
# \u663E\u793A\u6240\u6709\u8FDB\u7A0B\u72B6\u6001
pm2 list
# \u76D1\u89C6\u6240\u6709\u8FDB\u7A0B
pm2 monit
# \u663E\u793A\u6240\u6709\u8FDB\u7A0B\u65E5\u5FD7
pm2 logs
# \u663E\u793Aid=0\u7684\u8FDB\u7A0B\u65E5\u5FD7
pm2 logs 0
# \u505C\u6B62\u6240\u6709\u8FDB\u7A0B
pm2 stop all
# \u91CD\u542F\u6240\u6709\u8FDB\u7A0B
pm2 restart all
# 0\u79D2\u505C\u673A\u91CD\u8F7D\u8FDB\u7A0B (\u7528\u4E8E NETWORKED \u8FDB\u7A0B)
pm2 reload all
# \u505C\u6B62\u6307\u5B9A\u7684\u8FDB\u7A0B
pm2 stop 0
# \u91CD\u542F\u6307\u5B9A\u7684\u8FDB\u7A0B
pm2 restart 0
# \u4EA7\u751F init \u811A\u672C \u4FDD\u6301\u8FDB\u7A0B\u6D3B\u7740
pm2 startup
# \u8FD0\u884C\u5065\u58EE\u7684 computer API endpoint ([http://localhost:9615](http://localhost:9615/))
pm2 web
# \u6740\u6B7B\u6307\u5B9A\u7684\u8FDB\u7A0B
pm2 delete 0
# \u6740\u6B7B\u5168\u90E8\u8FDB\u7A0B
pm2 delete all
# \u67E5\u770B\u8FDB\u7A0B\u8BE6\u7EC6\u4FE1\u606F
pm2 describe 0
\`\`\`
`,contentRendered:`<p>\u2003pm2 \u662F\u4E00\u4E2A\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177,\u53EF\u4EE5\u7528\u5B83\u6765\u7BA1\u7406\u4F60\u7684 node \u8FDB\u7A0B\uFF0C\u5E76\u67E5\u770B node \u8FDB\u7A0B\u7684\u72B6\u6001\uFF0C\u5F53\u7136\u4E5F\u652F\u6301\u6027\u80FD\u76D1\u63A7\uFF0C\u8FDB\u7A0B\u5B88\u62A4\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001pm2-\u5B98\u7F51\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001pm2-\u5B98\u7F51\u4FE1\u606F" aria-hidden="true">#</a> \u4E00\u3001pm2 \u5B98\u7F51\u4FE1\u606F</h2>
<p>1\u3001pm2 \u5B98\u7F51\u5730\u5740\uFF1A<a href="https://pm2.keymetrics.io/" target="_blank" rel="noopener noreferrer">https://pm2.keymetrics.io/<ExternalLinkIcon/></a><br>
2\u3001pm2 \u5B98\u65B9\u6587\u6863\uFF1A<a href="https://pm2.keymetrics.io/docs/usage/quick-start/" target="_blank" rel="noopener noreferrer">https://pm2.keymetrics.io/docs/usage/quick-start/<ExternalLinkIcon/></a><br>
3\u3001pm2 github \u5730\u5740\uFF1A<a href="https://github.com/Unitech/pm2" target="_blank" rel="noopener noreferrer">https://github.com/Unitech/pm2<ExternalLinkIcon/></a></p>
<h2 id="\u4E8C\u3001pm2-\u5B89\u88C5\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001pm2-\u5B89\u88C5\u6B65\u9AA4" aria-hidden="true">#</a> \u4E8C\u3001pm2 \u5B89\u88C5\u6B65\u9AA4</h2>
<p>1\u3001pm2 \u5B89\u88C5\u9700\u8981\u4F9D\u8D56<code v-pre>Node</code>\u73AF\u5883\uFF0C\u5E76\u4E14<code v-pre>Node</code>\u7248\u672C\u9700\u8981\u9AD8\u4E8E 12\uFF0C\u5982\u679C\u4E3A\u5B89\u88C5<code v-pre>Node</code>,\u8BF7\u53C2\u8003\uFF1A<a href="/node/" target="_blank" rel="noopener noreferrer">Node \u73AF\u5883\u5B89\u88C5\u65B9\u5F0F<ExternalLinkIcon/></a><br>
2\u3001pm2 \u5B89\u88C5\u547D\u4EE4</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u5168\u5C40\u5B89\u88C5pm2</span>
$ <span class="token function">npm</span> <span class="token function">install</span> pm2 <span class="token parameter variable">-g</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3\u3001\u5F00\u59CB\u542F\u52A8\u4E00\u4E2A\u5E94\u7528</p>
<p>\u914D\u7F6E pm2 \u5E94\u7528\u5B9E\u4F8B\u914D\u7F6E\u6587\u4EF6<code v-pre>ecosystem.config.js</code>,\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#pm2\u5B9E\u4F8B\u914D\u7F6E\uFF1Aecosystem.config.js</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  apps: <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">#\u5B9E\u4F8B\u540D\u79F0</span>
      name: <span class="token string">'NuxtRmbRate'</span>,
      <span class="token comment">#\u90E8\u7F72\u6A21\u5F0F\uFF0C\u5355\u673A\uFF1A'fork',\u96C6\u7FA4\uFF1A'cluster'</span>
      exec_mode: <span class="token string">'fork'</span>,
      <span class="token comment">#\u5B9E\u4F8B\u6570\u76EE</span>
      instances: <span class="token string">'1'</span>,
      <span class="token comment">#\u9700\u8981\u6267\u884C\u7684\u811A\u672C\u6587\u4EF6\uFF0C\u5BF9\u4E8E\u666E\u901A\u7684nuxt\u9879\u76EE(\u6CA1\u6709server)\uFF0C\u4E00\u822C\u91C7\u7528nuxt start\u547D\u4EE4\uFF0C\u7528pm2\u6267\u884C\u65F6\u9700\u8981\u4FEE\u6539\u6210./node-modules/nuxt/dist/bin/nuxt.js,\u5426\u5219\u62A5\u9519</span>
      script: <span class="token string">'server/index.js'</span>,
      <span class="token comment">#\u5E94\u7528\u7A0B\u5E8F\u6240\u5728\u7684\u76EE\u5F55</span>
      cwd: <span class="token string">''</span>,
      <span class="token comment"># \u4F20\u9012\u7ED9\u811A\u672C\u7684\u53C2\u6570\uFF0C\u4F8B\u5982nuxt start\u547D\u4EE4\uFF0C\u53C2\u6570\u4E3Astart</span>
      args: <span class="token string">''</span>,
      <span class="token comment"># \u5B8C\u6574\u65E5\u5FD7\u8DEF\u5F84</span>
      output: <span class="token string">'log/output.log'</span>,
      <span class="token comment"># \u9519\u8BEF\u65E5\u5FD7\u8DEF\u5F84</span>
      error: <span class="token string">'log/error.log'</span>,
      <span class="token comment"># \u8BBF\u95EE\u65E5\u5FD7\u8DEF\u5F84</span>
      log: <span class="token string">'log/access.log'</span>,
      <span class="token comment"># \u65E5\u5FD7\u683C\u5F0F</span>
      log_type: <span class="token string">'json'</span>,
      <span class="token comment"># \u5408\u5E76\u65E5\u5FD7</span>
      merge_logs: true,
      <span class="token comment"># \u65E5\u5FD7\u65E5\u671F\u683C\u5F0F</span>
      log_date_format: <span class="token string">'YYYY-MM-DD HH:mm:ss'</span>,
       <span class="token comment"># \u6700\u5C0F\u8FD0\u884C\u65F6\u95F4\uFF0C\u8FD9\u91CC\u8BBE\u7F6E\u7684\u662F60s\u5373\u5982\u679C\u5E94\u7528\u7A0B\u5E8F\u5728* 60s\u5185\u9000\u51FA\uFF0Cpm2\u4F1A\u8BA4\u4E3A\u7A0B\u5E8F\u5F02\u5E38\u9000\u51FA\uFF0C\u6B64\u65F6\u89E6\u53D1\u91CD\u542F* max_restarts\u8BBE\u7F6E\u6570\u91CF\uFF0C\u5E94\u7528\u8FD0\u884C\u5C11\u4E8E\u65F6\u95F4\u88AB\u8BA4\u4E3A\u662F\u5F02\u5E38\u542F\u52A8</span>
      min_uptime: <span class="token string">'60s'</span>,
      <span class="token comment"># \u8BBE\u7F6E\u5E94\u7528\u7A0B\u5E8F\u5F02\u5E38\u9000\u51FA\u91CD\u542F\u7684\u6B21\u6570\uFF0C\u9ED8\u8BA415\u6B21\uFF08\u4ECE0\u5F00\u59CB\u8BA1\u6570\uFF09,\u6700\u5927\u5F02\u5E38\u91CD\u542F\u6B21\u6570\uFF0C\u5373\u5C0F\u4E8Emin_uptime\u8FD0\u884C\u65F6\u95F4\u91CD\u542F\u6B21\u6570\uFF1B</span>
      max_restarts: <span class="token number">10</span>,
      <span class="token comment"># \u542F\u7528/\u7981\u7528\u5E94\u7528\u7A0B\u5E8F\u5D29\u6E83\u6216\u9000\u51FA\u65F6\u81EA\u52A8\u91CD\u542F\uFF0C\u9ED8\u8BA4\u4E3Atrue, \u53D1\u751F\u5F02\u5E38\u7684\u60C5\u51B5\u4E0B\u81EA\u52A8\u91CD\u542F</span>
      autorestart: true,
      <span class="token comment"># \u5F02\u5E38\u91CD\u542F\u60C5\u51B5\u4E0B\uFF0C\u5EF6\u65F6\u91CD\u542F\u65F6\u95F4</span>
      restart_delay: <span class="token number">30</span>,
      <span class="token comment">#\u751F\u4EA7\u73AF\u5883\u914D\u7F6E</span>
      env_prod: <span class="token punctuation">{</span>
        <span class="token comment"># \u73AF\u5883\u53C2\u6570\uFF0C\u5F53\u524D\u6307\u5B9A\u4E3A\u751F\u4EA7\u73AF\u5883</span>
        NODE_ENV: <span class="token string">'production'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4ED6\u914D\u7F6E\u9879\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>name \u5E94\u7528\u8FDB\u7A0B\u540D\u79F0\uFF1B

script \u542F\u52A8\u811A\u672C\u8DEF\u5F84\uFF1B

cwd \u5E94\u7528\u542F\u52A8\u7684\u8DEF\u5F84\uFF0C\u5173\u4E8E script \u4E0E cwd \u7684\u533A\u522B\u4E3E\u4F8B\u8BF4\u660E\uFF1A\u5728/home/polo/\u76EE\u5F55\u4E0B\u8FD0\u884C/data/release/node/index.js\uFF0C\u6B64\u5904 script \u4E3A/data/release/node/index.js\uFF0Ccwd \u4E3A/home/polo/\uFF1B

args \u4F20\u9012\u7ED9\u811A\u672C\u7684\u53C2\u6570\uFF1B

interpreter \u6307\u5B9A\u7684\u811A\u672C\u89E3\u91CA\u5668\uFF1B

interpreter_args \u4F20\u9012\u7ED9\u89E3\u91CA\u5668\u7684\u53C2\u6570\uFF1B

instances \u5E94\u7528\u542F\u52A8\u5B9E\u4F8B\u4E2A\u6570\uFF0C\u4EC5\u5728 cluster \u6A21\u5F0F\u6709\u6548\uFF0C\u9ED8\u8BA4\u4E3A fork\uFF1B

exec_mode \u5E94\u7528\u542F\u52A8\u6A21\u5F0F\uFF0C\u652F\u6301 fork \u548C cluster \u6A21\u5F0F\uFF1B

<span class="token function">watch</span> \u76D1\u542C\u91CD\u542F\uFF0C\u542F\u7528\u60C5\u51B5\u4E0B\uFF0C\u6587\u4EF6\u5939\u6216\u5B50\u6587\u4EF6\u5939\u4E0B\u53D8\u5316\u5E94\u7528\u81EA\u52A8\u91CD\u542F\uFF1B

ignore_watch \u5FFD\u7565\u76D1\u542C\u7684\u6587\u4EF6\u5939\uFF0C\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\uFF1B

max_memory_restart \u6700\u5927\u5185\u5B58\u9650\u5236\u6570\uFF0C\u8D85\u51FA\u81EA\u52A8\u91CD\u542F\uFF1B

<span class="token function">env</span> \u73AF\u5883\u53D8\u91CF\uFF0Cobject \u7C7B\u578B\uFF0C\u5982<span class="token punctuation">{</span><span class="token string">"NODE_ENV"</span><span class="token builtin class-name">:</span><span class="token string">"production"</span>, <span class="token string">"ID"</span><span class="token builtin class-name">:</span> <span class="token string">"42"</span><span class="token punctuation">}</span>\uFF1B

log_date_format \u6307\u5B9A\u65E5\u5FD7\u65E5\u671F\u683C\u5F0F\uFF0C\u5982 YYYY-MM-DD HH:mm:ss\uFF1B

error_file \u8BB0\u5F55\u6807\u51C6\u9519\u8BEF\u6D41\uFF0C<span class="token environment constant">$HOME</span>/.pm2/logs/XXXerr.log<span class="token punctuation">)</span>\uFF0C\u4EE3\u7801\u9519\u8BEF\u53EF\u5728\u6B64\u6587\u4EF6\u67E5\u627E\uFF1B

out_file \u8BB0\u5F55\u6807\u51C6\u8F93\u51FA\u6D41\uFF0C<span class="token environment constant">$HOME</span>/.pm2/logs/XXXout.log<span class="token punctuation">)</span>\uFF0C\u5982\u5E94\u7528\u6253\u5370\u5927\u91CF\u7684\u6807\u51C6\u8F93\u51FA\uFF0C\u4F1A\u5BFC\u81F4 pm2 \u65E5\u5FD7\u8FC7\u5927\uFF1B

min_uptime \u5E94\u7528\u8FD0\u884C\u5C11\u4E8E\u65F6\u95F4\u88AB\u8BA4\u4E3A\u662F\u5F02\u5E38\u542F\u52A8\uFF1B

max_restarts \u6700\u5927\u5F02\u5E38\u91CD\u542F\u6B21\u6570\uFF0C\u5373\u5C0F\u4E8E min_uptime \u8FD0\u884C\u65F6\u95F4\u91CD\u542F\u6B21\u6570\uFF1B

autorestart \u9ED8\u8BA4\u4E3A true, \u53D1\u751F\u5F02\u5E38\u7684\u60C5\u51B5\u4E0B\u81EA\u52A8\u91CD\u542F\uFF1B

cron_restart <span class="token function">crontab</span> \u65F6\u95F4\u683C\u5F0F\u91CD\u542F\u5E94\u7528\uFF0C\u76EE\u524D\u53EA\u652F\u6301 cluster \u6A21\u5F0F\uFF1B

force \u9ED8\u8BA4 false\uFF0C\u5982\u679C true\uFF0C\u53EF\u4EE5\u91CD\u590D\u542F\u52A8\u4E00\u4E2A\u811A\u672C\u3002pm2 \u4E0D\u5EFA\u8BAE\u8FD9\u4E48\u505A\uFF1B

restart_delay \u5F02\u5E38\u91CD\u542F\u60C5\u51B5\u4E0B\uFF0C\u5EF6\u65F6\u91CD\u542F\u65F6\u95F4\uFF1B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F\uFF1A</strong> \u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\u65F6\u9700\u8981\u4EE5<code v-pre>env_</code>\u5F00\u5934\uFF0C\u8BE6\u7EC6\u53C2\u8003\uFF1A<RouterLink to="/posts/node/https:#pm2.keymetrics.io/docs/usage/environment/">https:#pm2.keymetrics.io/docs/usage/environment/</RouterLink>\u3002\u4F8B\u5982\u8BBE\u7F6E\u4E86\u73AF\u5883\u53D8\u91CF<code v-pre>env_production</code>\uFF0C\u91C7\u7528 pm2 \u542F\u52A8\u65F6\u5982\u4E0B\uFF1A<code v-pre>pm2 start ecosystem.config.js --env production</code></p>
<p>\u542F\u52A8\u9879\u76EE\u5B9E\u4F8B</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>pm2 start ecosystem.config.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u4E09\u3001pm2-\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001pm2-\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> \u4E09\u3001pm2 \u5E38\u7528\u547D\u4EE4</h2>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u663E\u793A\u6240\u6709\u8FDB\u7A0B\u72B6\u6001</span>
pm2 list
<span class="token comment"># \u76D1\u89C6\u6240\u6709\u8FDB\u7A0B</span>
pm2 monit
<span class="token comment"># \u663E\u793A\u6240\u6709\u8FDB\u7A0B\u65E5\u5FD7</span>
pm2 logs
<span class="token comment"># \u663E\u793Aid=0\u7684\u8FDB\u7A0B\u65E5\u5FD7</span>
pm2 logs <span class="token number">0</span>
<span class="token comment"># \u505C\u6B62\u6240\u6709\u8FDB\u7A0B</span>
pm2 stop all
<span class="token comment"># \u91CD\u542F\u6240\u6709\u8FDB\u7A0B</span>
pm2 restart all
<span class="token comment"># 0\u79D2\u505C\u673A\u91CD\u8F7D\u8FDB\u7A0B (\u7528\u4E8E NETWORKED \u8FDB\u7A0B)</span>
pm2 reload all
<span class="token comment"># \u505C\u6B62\u6307\u5B9A\u7684\u8FDB\u7A0B</span>
pm2 stop <span class="token number">0</span>
<span class="token comment"># \u91CD\u542F\u6307\u5B9A\u7684\u8FDB\u7A0B</span>
pm2 restart <span class="token number">0</span>
<span class="token comment"># \u4EA7\u751F init \u811A\u672C \u4FDD\u6301\u8FDB\u7A0B\u6D3B\u7740</span>
pm2 startup
<span class="token comment"># \u8FD0\u884C\u5065\u58EE\u7684 computer API endpoint ([http://localhost:9615](http://localhost:9615/))</span>
pm2 web
<span class="token comment"># \u6740\u6B7B\u6307\u5B9A\u7684\u8FDB\u7A0B</span>
pm2 delete <span class="token number">0</span>
<span class="token comment"># \u6740\u6B7B\u5168\u90E8\u8FDB\u7A0B</span>
pm2 delete all
<span class="token comment"># \u67E5\u770B\u8FDB\u7A0B\u8BE6\u7EC6\u4FE1\u606F</span>
pm2 describe <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-04-07",deps:[],links:[{raw:"https:#pm2.keymetrics.io/docs/usage/environment/",relative:"posts/node/https:#pm2.keymetrics.io/docs/usage/environment/",absolute:"/blog-docs/posts/node/https:#pm2.keymetrics.io/docs/usage/environment/"}],pathInferred:"/posts/node/pm2.html",pathLocale:"/",permalink:null,routeMeta:{title:"PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4"},sfcBlocks:[],slug:"pm2",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/node/pm2.md",filePathRelative:"posts/node/pm2.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/node/pm2.html.vue",componentFilePathRelative:"pages/posts/node/pm2.html.vue",componentFileChunkName:"v-7eeae4bc",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/node/pm2.html.js",dataFilePathRelative:"pages/posts/node/pm2.html.js",dataFileChunkName:"v-7eeae4bc",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/node/pm2.html",htmlFilePathRelative:"posts/node/pm2.html"},title:"PM2\u9879\u76EE\u90E8\u7F72\u6D41\u7A0B\u548C\u5E38\u7528\u547D\u4EE4"},["/posts/node/pm2","/posts/node/pm2.md"]],["v-08c61a76","/posts/node/tools.html",{_blog:{data:{key:"v-08c61a76",path:"/posts/node/tools.html",title:"NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5",lang:"zh-CN",frontmatter:{title:"NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5",date:"2022-04-19T16:31:16.000Z",tag:["Node"],category:["Node"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200955471.jpg",summary:`\u2003\u6536\u96C6\u4E00\u4E9BNodeJs\u4E2D\u7ECF\u5E38\u4F7F\u7528\u5230\u7684\u4E00\u4E9B\u5DE5\u5177\u7C7B\u6216\u8005\u65B9\u6CD5\uFF0C\u65B9\u4FBF\u4EE5\u540E\u4F7F\u7528\u65F6\u907F\u5751\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/node/tools.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Node"}],["meta",{property:"article:published_time",content:"2022-04-19T16:31:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u6536\u96C6\u4E00\u4E9BNodeJs\u4E2D\u7ECF\u5E38\u4F7F\u7528\u5230\u7684\u4E00\u4E9B\u5DE5\u5177\u7C7B\u6216\u8005\u65B9\u6CD5\uFF0C\u65B9\u4FBF\u4EE5\u540E\u4F7F\u7528\u65F6\u907F\u5751\u3002</p>
`,headers:[{level:2,title:'\u4E00\u3001JS\u3001NodeJs \u659C\u6760"/"\u6216\u53CD\u659C\u6760""\u66FF\u6362\u6216\u8F6C\u6362',slug:"\u4E00\u3001js\u3001nodejs-\u659C\u6760-\u6216\u53CD\u659C\u6760-\u66FF\u6362\u6216\u8F6C\u6362",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/node/tools.md",readingTime:{minutes:.94,words:283},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/node/tools.html`},key:"v-08c61a76",path:"/posts/node/tools.html",title:"NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5",lang:"zh-CN",frontmatter:{title:"NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5",date:"2022-04-19T16:31:16.000Z",tag:["Node"],category:["Node"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200955471.jpg",summary:`\u2003\u6536\u96C6\u4E00\u4E9BNodeJs\u4E2D\u7ECF\u5E38\u4F7F\u7528\u5230\u7684\u4E00\u4E9B\u5DE5\u5177\u7C7B\u6216\u8005\u65B9\u6CD5\uFF0C\u65B9\u4FBF\u4EE5\u540E\u4F7F\u7528\u65F6\u907F\u5751\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/node/tools.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Node"}],["meta",{property:"article:published_time",content:"2022-04-19T16:31:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u6536\u96C6\u4E00\u4E9BNodeJs\u4E2D\u7ECF\u5E38\u4F7F\u7528\u5230\u7684\u4E00\u4E9B\u5DE5\u5177\u7C7B\u6216\u8005\u65B9\u6CD5\uFF0C\u65B9\u4FBF\u4EE5\u540E\u4F7F\u7528\u65F6\u907F\u5751\u3002</p>
`,headers:[{level:2,title:'\u4E00\u3001JS\u3001NodeJs \u659C\u6760"/"\u6216\u53CD\u659C\u6760""\u66FF\u6362\u6216\u8F6C\u6362',slug:"\u4E00\u3001js\u3001nodejs-\u659C\u6760-\u6216\u53CD\u659C\u6760-\u66FF\u6362\u6216\u8F6C\u6362",children:[]}],content:`---
title: NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5
date: 2022-04-19 16:31:16
tag:
  - Node
category:
  - Node
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200955471.jpg
---

&emsp;\u6536\u96C6\u4E00\u4E9BNodeJs\u4E2D\u7ECF\u5E38\u4F7F\u7528\u5230\u7684\u4E00\u4E9B\u5DE5\u5177\u7C7B\u6216\u8005\u65B9\u6CD5\uFF0C\u65B9\u4FBF\u4EE5\u540E\u4F7F\u7528\u65F6\u907F\u5751\u3002

<!-- more -->

## \u4E00\u3001JS\u3001NodeJs \u659C\u6760"/"\u6216\u53CD\u659C\u6760"\\"\u66FF\u6362\u6216\u8F6C\u6362

&emsp;JS\u3001NodeJs \u73AF\u5883\u4E0B\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\`replace\`\u5BF9\u5B57\u7B26\u4E32\u8FDB\u884C\u66FF\u6362\u6216\u8F6C\u6362\uFF0C\u4F46\u6709\u4E2A\u7F3A\u70B9\u53EA\u80FD\u66FF\u6362\u6216\u8F6C\u6362\u7B2C\u4E00\u4E2A\u76EE\u6807\u5B57\u7B26\uFF0CJS \u53EF\u4EE5\u901A\u8FC7\`replaceAll\`\u8FDB\u884C\u5168\u90E8\u66FF\u6362\uFF0CNodeJs \u73AF\u5883\u4E0B\u6CA1\u6709\`replaceAll\`\u65B9\u6CD5\u3002\u56E0\u6B64\u6700\u6709\u6548\u7684\u65B9\u6CD5\u5C31\u662F\u901A\u8FC7\u6B63\u5219\u8868\u8FBE\u5F0F\u8FDB\u884C\u66FF\u6362\u6216\u8F6C\u6362\u3002

1\u3001\u659C\u6760\u8F6C\u53CD\u659C\u6760\u3001\u659C\u6760\u66FF\u6362

\`\`\`bash
#---------- \u659C\u6760\u8F6C\u53CD\u659C\u6760 Slash to backslash --------
let slash = 'C:/Users/JasonSong/\u6210\u957F\u7684\u5C0F\u732A/NodeJs';

#\u65B9\u6CD51\uFF1A
let result = slash.replace(/\\//g, '\\\\');
console.log('[Option 1] slash: ', result);

#\u65B9\u6CD52\uFF1A
result = String.raw\`\${slash}\`.split('/').join('\\\\');
console.log('[Option 2] slash: ', result);
\`\`\`

2\u3001\u53CD\u659C\u6760\u8F6C\u659C\u6760\u3001\u53CD\u659C\u6760\u66FF\u6362

\`\`\`bash
#---------- \u53CD\u659C\u6760\u8F6C\u659C\u6760 Backslash to slash --------
let backslash = 'C:\\\\Users\\\\JasonSong\\\\\u6210\u957F\u7684\u5C0F\u732A\\\\NodeJs';

#\u65B9\u6CD51\uFF1A
result = backslash.replace(/\\\\/g,"/");
console.log('[Option 1] backslash: ', result);

#\u65B9\u6CD52\uFF1A
result = String.raw\`\${backslash}\`.split('\\\\').join('/');
console.log('[Option 2] backslash: ', result);
\`\`\`
`,contentRendered:`<p>\u2003\u6536\u96C6\u4E00\u4E9BNodeJs\u4E2D\u7ECF\u5E38\u4F7F\u7528\u5230\u7684\u4E00\u4E9B\u5DE5\u5177\u7C7B\u6216\u8005\u65B9\u6CD5\uFF0C\u65B9\u4FBF\u4EE5\u540E\u4F7F\u7528\u65F6\u907F\u5751\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001js\u3001nodejs-\u659C\u6760-\u6216\u53CD\u659C\u6760-\u66FF\u6362\u6216\u8F6C\u6362" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001js\u3001nodejs-\u659C\u6760-\u6216\u53CD\u659C\u6760-\u66FF\u6362\u6216\u8F6C\u6362" aria-hidden="true">#</a> \u4E00\u3001JS\u3001NodeJs \u659C\u6760&quot;/&quot;\u6216\u53CD\u659C\u6760&quot;&quot;\u66FF\u6362\u6216\u8F6C\u6362</h2>
<p>\u2003JS\u3001NodeJs \u73AF\u5883\u4E0B\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7<code v-pre>replace</code>\u5BF9\u5B57\u7B26\u4E32\u8FDB\u884C\u66FF\u6362\u6216\u8F6C\u6362\uFF0C\u4F46\u6709\u4E2A\u7F3A\u70B9\u53EA\u80FD\u66FF\u6362\u6216\u8F6C\u6362\u7B2C\u4E00\u4E2A\u76EE\u6807\u5B57\u7B26\uFF0CJS \u53EF\u4EE5\u901A\u8FC7<code v-pre>replaceAll</code>\u8FDB\u884C\u5168\u90E8\u66FF\u6362\uFF0CNodeJs \u73AF\u5883\u4E0B\u6CA1\u6709<code v-pre>replaceAll</code>\u65B9\u6CD5\u3002\u56E0\u6B64\u6700\u6709\u6548\u7684\u65B9\u6CD5\u5C31\u662F\u901A\u8FC7\u6B63\u5219\u8868\u8FBE\u5F0F\u8FDB\u884C\u66FF\u6362\u6216\u8F6C\u6362\u3002</p>
<p>1\u3001\u659C\u6760\u8F6C\u53CD\u659C\u6760\u3001\u659C\u6760\u66FF\u6362</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#---------- \u659C\u6760\u8F6C\u53CD\u659C\u6760 Slash to backslash --------</span>
<span class="token builtin class-name">let</span> slash <span class="token operator">=</span> <span class="token string">'C:/Users/JasonSong/\u6210\u957F\u7684\u5C0F\u732A/NodeJs'</span><span class="token punctuation">;</span>

<span class="token comment">#\u65B9\u6CD51\uFF1A</span>
<span class="token builtin class-name">let</span> result <span class="token operator">=</span> slash.replace<span class="token punctuation">(</span>/<span class="token punctuation">\\</span>//g, <span class="token string">'\\\\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console.log<span class="token punctuation">(</span><span class="token string">'[Option 1] slash: '</span>, result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#\u65B9\u6CD52\uFF1A</span>
result <span class="token operator">=</span> String.raw<span class="token variable"><span class="token variable">\`</span>$<span class="token punctuation">{</span>slash<span class="token punctuation">}</span><span class="token variable">\`</span></span>.split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>.join<span class="token punctuation">(</span><span class="token string">'\\\\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console.log<span class="token punctuation">(</span><span class="token string">'[Option 2] slash: '</span>, result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2\u3001\u53CD\u659C\u6760\u8F6C\u659C\u6760\u3001\u53CD\u659C\u6760\u66FF\u6362</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#---------- \u53CD\u659C\u6760\u8F6C\u659C\u6760 Backslash to slash --------</span>
<span class="token builtin class-name">let</span> backslash <span class="token operator">=</span> <span class="token string">'C:\\\\Users\\\\JasonSong\\\\\u6210\u957F\u7684\u5C0F\u732A\\\\NodeJs'</span><span class="token punctuation">;</span>

<span class="token comment">#\u65B9\u6CD51\uFF1A</span>
result <span class="token operator">=</span> backslash.replace<span class="token punctuation">(</span>/<span class="token punctuation">\\</span><span class="token punctuation">\\</span>/g,<span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console.log<span class="token punctuation">(</span><span class="token string">'[Option 1] backslash: '</span>, result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#\u65B9\u6CD52\uFF1A</span>
result <span class="token operator">=</span> String.raw<span class="token variable"><span class="token variable">\`</span>$<span class="token punctuation">{</span>backslash<span class="token punctuation">}</span><span class="token variable">\`</span></span>.split<span class="token punctuation">(</span><span class="token string">'\\\\'</span><span class="token punctuation">)</span>.join<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console.log<span class="token punctuation">(</span><span class="token string">'[Option 2] backslash: '</span>, result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-04-19",deps:[],links:[],pathInferred:"/posts/node/tools.html",pathLocale:"/",permalink:null,routeMeta:{title:"NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5"},sfcBlocks:[],slug:"tools",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/node/tools.md",filePathRelative:"posts/node/tools.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/node/tools.html.vue",componentFilePathRelative:"pages/posts/node/tools.html.vue",componentFileChunkName:"v-08c61a76",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/node/tools.html.js",dataFilePathRelative:"pages/posts/node/tools.html.js",dataFileChunkName:"v-08c61a76",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/node/tools.html",htmlFilePathRelative:"posts/node/tools.html"},title:"NodeJs \u5E38\u7528\u7684\u5DE5\u5177\u548C\u65B9\u6CD5"},["/posts/node/tools","/posts/node/tools.md"]],["v-094597b7","/posts/nuxt/",{_blog:{data:{key:"v-094597b7",path:"/posts/nuxt/",title:"Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E",lang:"zh-CN",frontmatter:{title:"Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E",date:"2019-04-06T09:44:16.000Z",tag:["Nuxt"],category:["Nuxt"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204060942130.jpg",sticky:5,summary:`\u2003Nuxt.js \u662F\u4E00\u4E2A\u57FA\u4E8E Vue.js \u7684\u901A\u7528\u5E94\u7528\u6846\u67B6\uFF0C\u4E00\u4E2A\u7528\u4E8E Vue.js \u5F00\u53D1 SSR \u5E94\u7528\u7684\u4E00\u7AD9\u5F0F\u89E3\u51B3\u65B9\u6848\uFF0C\u5BF9\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u57FA\u7840\u67B6\u6784\u8FDB\u884C\u4E86\u62BD\u8C61\uFF0C\u4E3B\u8981\u5173\u6CE8\u7684\u662F\u5E94\u7528\u7684 UI \u6E32\u67D3\u3002NuxtJs \u53EF\u4EE5\u5B9E\u73B0\u57FA\u4E8E vuejs \u7684\u591A\u9875\u9762\u5E94\u7528\uFF0C\u652F\u6301 SSR(\u670D\u52A1\u5668\u7AEF\u6E32\u67D3)\uFF0C\u7B80\u5316\u4E86 SSR \u7684\u5F00\u53D1\u96BE\u5EA6\uFF0C\u53D7\u5230\u4E86 React SSR \u6846\u67B6 Next.js \u7684\u542F\u53D1\uFF0C\u4F7F\u7528 Webpack \u548C Node.js \u8FDB\u884C\u5C01\u88C5\u7684\u57FA\u4E8E Vue \u7684 SSR \u6846\u67B6\uFF0C\u9884\u8BBE\u4E86\u5229\u7528 Vue.js \u5F00\u53D1\u670D\u52A1\u7AEF\u6E32\u67D3\u7684\u5E94\u7528\u6240\u9700\u8981\u7684\u5404\u79CD\u914D\u7F6E\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u76F4\u63A5\u7528\u547D\u4EE4\u628A\u6211\u4EEC\u5236\u4F5C\u7684 vue \u9879\u76EE\u751F\u6210\u9759\u6001 html\u3002\u4F5C\u4E3A\u6846\u67B6\uFF0CNuxt.js \u4E3A\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u8FD9\u79CD\u5178\u578B\u7684\u5E94\u7528\u67B6\u6784\u6A21\u5F0F\u63D0\u4F9B\u4E86\u8BB8\u591A\u6709\u7528\u7684\u7279\u6027\uFF0C\u4F8B\u5982\u5F02\u6B65\u6570\u636E\u52A0\u8F7D\u3001\u4E2D\u95F4\u4EF6\u652F\u6301\u3001\u5E03\u5C40\u652F\u6301\u7B49\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/nuxt/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Nuxt"}],["meta",{property:"article:published_time",content:"2019-04-06T09:44:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nuxt.js \u662F\u4E00\u4E2A\u57FA\u4E8E Vue.js \u7684\u901A\u7528\u5E94\u7528\u6846\u67B6\uFF0C\u4E00\u4E2A\u7528\u4E8E Vue.js \u5F00\u53D1 SSR \u5E94\u7528\u7684\u4E00\u7AD9\u5F0F\u89E3\u51B3\u65B9\u6848\uFF0C\u5BF9\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u57FA\u7840\u67B6\u6784\u8FDB\u884C\u4E86\u62BD\u8C61\uFF0C\u4E3B\u8981\u5173\u6CE8\u7684\u662F\u5E94\u7528\u7684 UI \u6E32\u67D3\u3002NuxtJs \u53EF\u4EE5\u5B9E\u73B0\u57FA\u4E8E vuejs \u7684\u591A\u9875\u9762\u5E94\u7528\uFF0C\u652F\u6301 SSR(\u670D\u52A1\u5668\u7AEF\u6E32\u67D3)\uFF0C\u7B80\u5316\u4E86 SSR \u7684\u5F00\u53D1\u96BE\u5EA6\uFF0C\u53D7\u5230\u4E86 React SSR \u6846\u67B6 Next.js \u7684\u542F\u53D1\uFF0C\u4F7F\u7528 Webpack \u548C Node.js \u8FDB\u884C\u5C01\u88C5\u7684\u57FA\u4E8E Vue \u7684 SSR \u6846\u67B6\uFF0C\u9884\u8BBE\u4E86\u5229\u7528 Vue.js \u5F00\u53D1\u670D\u52A1\u7AEF\u6E32\u67D3\u7684\u5E94\u7528\u6240\u9700\u8981\u7684\u5404\u79CD\u914D\u7F6E\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u76F4\u63A5\u7528\u547D\u4EE4\u628A\u6211\u4EEC\u5236\u4F5C\u7684 vue \u9879\u76EE\u751F\u6210\u9759\u6001 html\u3002\u4F5C\u4E3A\u6846\u67B6\uFF0CNuxt.js \u4E3A\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u8FD9\u79CD\u5178\u578B\u7684\u5E94\u7528\u67B6\u6784\u6A21\u5F0F\u63D0\u4F9B\u4E86\u8BB8\u591A\u6709\u7528\u7684\u7279\u6027\uFF0C\u4F8B\u5982\u5F02\u6B65\u6570\u636E\u52A0\u8F7D\u3001\u4E2D\u95F4\u4EF6\u652F\u6301\u3001\u5E03\u5C40\u652F\u6301\u7B49\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001Nuxt.js \u5B98\u7F51\u5730\u5740",slug:"\u4E00\u3001nuxt-js-\u5B98\u7F51\u5730\u5740",children:[]},{level:2,title:"\u4E8C\u3001SSR(\u670D\u52A1\u7AEF\u6E32\u67D3)",slug:"\u4E8C\u3001ssr-\u670D\u52A1\u7AEF\u6E32\u67D3",children:[]},{level:2,title:"\u4E09\u3001NUXT.JS \u7279\u6027",slug:"\u4E09\u3001nuxt-js-\u7279\u6027",children:[]},{level:2,title:"\u56DB\u3001\u5F00\u59CB Nuxt \u9879\u76EE\u7684\u642D\u5EFA",slug:"\u56DB\u3001\u5F00\u59CB-nuxt-\u9879\u76EE\u7684\u642D\u5EFA",children:[]},{level:2,title:"\u4E94\u3001Nuxt \u8DE8\u57DF\u5904\u7406",slug:"\u4E94\u3001nuxt-\u8DE8\u57DF\u5904\u7406",children:[]},{level:2,title:"\u516D\u3001styleResources \u914D\u7F6E",slug:"\u516D\u3001styleresources-\u914D\u7F6E",children:[]},{level:2,title:"\u4E03\u3001\u4F2A\u9759\u6001\u914D\u7F6E",slug:"\u4E03\u3001\u4F2A\u9759\u6001\u914D\u7F6E",children:[]},{level:2,title:"\u516B\u3001\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165\u914D\u7F6E",slug:"\u516B\u3001\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165\u914D\u7F6E",children:[]},{level:2,title:"\u4E5D\u3001Nuxt \u6253\u5305\u5C4F\u853D\u6389\u5168\u5C40console\u529F\u80FD",slug:"\u4E5D\u3001nuxt-\u6253\u5305\u5C4F\u853D\u6389\u5168\u5C40console\u529F\u80FD",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/nuxt/README.md",readingTime:{minutes:5.54,words:1662},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/nuxt/`},key:"v-094597b7",path:"/posts/nuxt/",title:"Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E",lang:"zh-CN",frontmatter:{title:"Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E",date:"2019-04-06T09:44:16.000Z",tag:["Nuxt"],category:["Nuxt"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204060942130.jpg",sticky:5,summary:`\u2003Nuxt.js \u662F\u4E00\u4E2A\u57FA\u4E8E Vue.js \u7684\u901A\u7528\u5E94\u7528\u6846\u67B6\uFF0C\u4E00\u4E2A\u7528\u4E8E Vue.js \u5F00\u53D1 SSR \u5E94\u7528\u7684\u4E00\u7AD9\u5F0F\u89E3\u51B3\u65B9\u6848\uFF0C\u5BF9\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u57FA\u7840\u67B6\u6784\u8FDB\u884C\u4E86\u62BD\u8C61\uFF0C\u4E3B\u8981\u5173\u6CE8\u7684\u662F\u5E94\u7528\u7684 UI \u6E32\u67D3\u3002NuxtJs \u53EF\u4EE5\u5B9E\u73B0\u57FA\u4E8E vuejs \u7684\u591A\u9875\u9762\u5E94\u7528\uFF0C\u652F\u6301 SSR(\u670D\u52A1\u5668\u7AEF\u6E32\u67D3)\uFF0C\u7B80\u5316\u4E86 SSR \u7684\u5F00\u53D1\u96BE\u5EA6\uFF0C\u53D7\u5230\u4E86 React SSR \u6846\u67B6 Next.js \u7684\u542F\u53D1\uFF0C\u4F7F\u7528 Webpack \u548C Node.js \u8FDB\u884C\u5C01\u88C5\u7684\u57FA\u4E8E Vue \u7684 SSR \u6846\u67B6\uFF0C\u9884\u8BBE\u4E86\u5229\u7528 Vue.js \u5F00\u53D1\u670D\u52A1\u7AEF\u6E32\u67D3\u7684\u5E94\u7528\u6240\u9700\u8981\u7684\u5404\u79CD\u914D\u7F6E\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u76F4\u63A5\u7528\u547D\u4EE4\u628A\u6211\u4EEC\u5236\u4F5C\u7684 vue \u9879\u76EE\u751F\u6210\u9759\u6001 html\u3002\u4F5C\u4E3A\u6846\u67B6\uFF0CNuxt.js \u4E3A\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u8FD9\u79CD\u5178\u578B\u7684\u5E94\u7528\u67B6\u6784\u6A21\u5F0F\u63D0\u4F9B\u4E86\u8BB8\u591A\u6709\u7528\u7684\u7279\u6027\uFF0C\u4F8B\u5982\u5F02\u6B65\u6570\u636E\u52A0\u8F7D\u3001\u4E2D\u95F4\u4EF6\u652F\u6301\u3001\u5E03\u5C40\u652F\u6301\u7B49\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/nuxt/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Nuxt"}],["meta",{property:"article:published_time",content:"2019-04-06T09:44:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nuxt.js \u662F\u4E00\u4E2A\u57FA\u4E8E Vue.js \u7684\u901A\u7528\u5E94\u7528\u6846\u67B6\uFF0C\u4E00\u4E2A\u7528\u4E8E Vue.js \u5F00\u53D1 SSR \u5E94\u7528\u7684\u4E00\u7AD9\u5F0F\u89E3\u51B3\u65B9\u6848\uFF0C\u5BF9\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u57FA\u7840\u67B6\u6784\u8FDB\u884C\u4E86\u62BD\u8C61\uFF0C\u4E3B\u8981\u5173\u6CE8\u7684\u662F\u5E94\u7528\u7684 UI \u6E32\u67D3\u3002NuxtJs \u53EF\u4EE5\u5B9E\u73B0\u57FA\u4E8E vuejs \u7684\u591A\u9875\u9762\u5E94\u7528\uFF0C\u652F\u6301 SSR(\u670D\u52A1\u5668\u7AEF\u6E32\u67D3)\uFF0C\u7B80\u5316\u4E86 SSR \u7684\u5F00\u53D1\u96BE\u5EA6\uFF0C\u53D7\u5230\u4E86 React SSR \u6846\u67B6 Next.js \u7684\u542F\u53D1\uFF0C\u4F7F\u7528 Webpack \u548C Node.js \u8FDB\u884C\u5C01\u88C5\u7684\u57FA\u4E8E Vue \u7684 SSR \u6846\u67B6\uFF0C\u9884\u8BBE\u4E86\u5229\u7528 Vue.js \u5F00\u53D1\u670D\u52A1\u7AEF\u6E32\u67D3\u7684\u5E94\u7528\u6240\u9700\u8981\u7684\u5404\u79CD\u914D\u7F6E\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u76F4\u63A5\u7528\u547D\u4EE4\u628A\u6211\u4EEC\u5236\u4F5C\u7684 vue \u9879\u76EE\u751F\u6210\u9759\u6001 html\u3002\u4F5C\u4E3A\u6846\u67B6\uFF0CNuxt.js \u4E3A\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u8FD9\u79CD\u5178\u578B\u7684\u5E94\u7528\u67B6\u6784\u6A21\u5F0F\u63D0\u4F9B\u4E86\u8BB8\u591A\u6709\u7528\u7684\u7279\u6027\uFF0C\u4F8B\u5982\u5F02\u6B65\u6570\u636E\u52A0\u8F7D\u3001\u4E2D\u95F4\u4EF6\u652F\u6301\u3001\u5E03\u5C40\u652F\u6301\u7B49\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001Nuxt.js \u5B98\u7F51\u5730\u5740",slug:"\u4E00\u3001nuxt-js-\u5B98\u7F51\u5730\u5740",children:[]},{level:2,title:"\u4E8C\u3001SSR(\u670D\u52A1\u7AEF\u6E32\u67D3)",slug:"\u4E8C\u3001ssr-\u670D\u52A1\u7AEF\u6E32\u67D3",children:[]},{level:2,title:"\u4E09\u3001NUXT.JS \u7279\u6027",slug:"\u4E09\u3001nuxt-js-\u7279\u6027",children:[]},{level:2,title:"\u56DB\u3001\u5F00\u59CB Nuxt \u9879\u76EE\u7684\u642D\u5EFA",slug:"\u56DB\u3001\u5F00\u59CB-nuxt-\u9879\u76EE\u7684\u642D\u5EFA",children:[]},{level:2,title:"\u4E94\u3001Nuxt \u8DE8\u57DF\u5904\u7406",slug:"\u4E94\u3001nuxt-\u8DE8\u57DF\u5904\u7406",children:[]},{level:2,title:"\u516D\u3001styleResources \u914D\u7F6E",slug:"\u516D\u3001styleresources-\u914D\u7F6E",children:[]},{level:2,title:"\u4E03\u3001\u4F2A\u9759\u6001\u914D\u7F6E",slug:"\u4E03\u3001\u4F2A\u9759\u6001\u914D\u7F6E",children:[]},{level:2,title:"\u516B\u3001\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165\u914D\u7F6E",slug:"\u516B\u3001\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165\u914D\u7F6E",children:[]},{level:2,title:"\u4E5D\u3001Nuxt \u6253\u5305\u5C4F\u853D\u6389\u5168\u5C40console\u529F\u80FD",slug:"\u4E5D\u3001nuxt-\u6253\u5305\u5C4F\u853D\u6389\u5168\u5C40console\u529F\u80FD",children:[]}],content:`---
title: Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E
date: 2019-04-06 09:44:16
tag:
  - Nuxt
category:
  - Nuxt
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204060942130.jpg
sticky: 5
---

&emsp;Nuxt.js \u662F\u4E00\u4E2A\u57FA\u4E8E Vue.js \u7684\u901A\u7528\u5E94\u7528\u6846\u67B6\uFF0C\u4E00\u4E2A\u7528\u4E8E Vue.js \u5F00\u53D1 SSR \u5E94\u7528\u7684\u4E00\u7AD9\u5F0F\u89E3\u51B3\u65B9\u6848\uFF0C\u5BF9\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u57FA\u7840\u67B6\u6784\u8FDB\u884C\u4E86\u62BD\u8C61\uFF0C\u4E3B\u8981\u5173\u6CE8\u7684\u662F\u5E94\u7528\u7684 UI \u6E32\u67D3\u3002NuxtJs \u53EF\u4EE5\u5B9E\u73B0\u57FA\u4E8E vuejs \u7684\u591A\u9875\u9762\u5E94\u7528\uFF0C\u652F\u6301 SSR(\u670D\u52A1\u5668\u7AEF\u6E32\u67D3)\uFF0C\u7B80\u5316\u4E86 SSR \u7684\u5F00\u53D1\u96BE\u5EA6\uFF0C\u53D7\u5230\u4E86 React SSR \u6846\u67B6 Next.js \u7684\u542F\u53D1\uFF0C\u4F7F\u7528 Webpack \u548C Node.js \u8FDB\u884C\u5C01\u88C5\u7684\u57FA\u4E8E Vue \u7684 SSR \u6846\u67B6\uFF0C\u9884\u8BBE\u4E86\u5229\u7528 Vue.js \u5F00\u53D1\u670D\u52A1\u7AEF\u6E32\u67D3\u7684\u5E94\u7528\u6240\u9700\u8981\u7684\u5404\u79CD\u914D\u7F6E\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u76F4\u63A5\u7528\u547D\u4EE4\u628A\u6211\u4EEC\u5236\u4F5C\u7684 vue \u9879\u76EE\u751F\u6210\u9759\u6001 html\u3002\u4F5C\u4E3A\u6846\u67B6\uFF0CNuxt.js \u4E3A\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u8FD9\u79CD\u5178\u578B\u7684\u5E94\u7528\u67B6\u6784\u6A21\u5F0F\u63D0\u4F9B\u4E86\u8BB8\u591A\u6709\u7528\u7684\u7279\u6027\uFF0C\u4F8B\u5982\u5F02\u6B65\u6570\u636E\u52A0\u8F7D\u3001\u4E2D\u95F4\u4EF6\u652F\u6301\u3001\u5E03\u5C40\u652F\u6301\u7B49\u3002

<!-- more -->

## \u4E00\u3001Nuxt.js \u5B98\u7F51\u5730\u5740

1 Nuxt.js 2.x \u7248\u672C\u4E2D\u6587\u7F51\u7AD9\uFF1A<https://www.nuxtjs.cn/>  
2 Nuxt.js 2.x \u7248\u672C\u82F1\u6587\u7F51\u7AD9\uFF1A<https://nuxtjs.org/>  
3 Nuxt.js 2.x \u7248\u672C\u751F\u547D\u5468\u671F\uFF1A<https://nuxtjs.org/docs/concepts/nuxt-lifecycle/>  
4 Nuxt.js 2.x \u7248\u672C\u914D\u7F6E\u6587\u6863\uFF1A<https://nuxtjs.org/docs/get-started/installation>  
5 Nuxt.js 3.x \u7248\u672C\u82F1\u6587\u7F51\u7AD9\uFF1A<https://v3.nuxtjs.org/>  
\u622A\u6B62\u76EE\u524D\`2022\u5E744\u67086\u65E510:25:01\`\u4E3A\u6B62\uFF0CNuxtJs3.x \u5DF2\u53D1\u5E03\u4E86 beta \u7248\u672C\uFF0CNuxtJs3.x \u8FD8\u5728\u5F00\u53D1\u5B8C\u5584\u4E2D\uFF0C\u4E0D\u63A8\u8350\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u3002\u5EFA\u8BAE\u4F7F\u7528 NuxtJS 2.x \u7248\u672C\uFF0C\u76F8\u5BF9\u6BD4\u8F83\u7A33\u5B9A\u3002

## \u4E8C\u3001SSR(\u670D\u52A1\u7AEF\u6E32\u67D3)

SSR\uFF0C\u5373\u670D\u52A1\u7AEF\u6E32\u67D3(Server Side Render)\uFF0C\u5C31\u662F\u5728\u670D\u52A1\u5668\u7AEF\u5C06\u5BF9 Vue \u9875\u9762\u8FDB\u884C\u6E32\u67D3\u751F\u6210 html \u6587\u4EF6\uFF0C\u5C06 html \u9875\u9762\u4F20\u9012\u7ED9\u6D4F\u89C8\u5668\u3002
\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528 SSR?  
1\u3001**\u964D\u4F4E SPA(Single Page Application)\u9996\u5C4F\u6E32\u67D3\u7684\u65F6\u95F4\uFF1A** SPA \u5F15\u7528\u662F\u5C06 bundle.js \u4ECE\u670D\u52A1\u5668\u83B7\u53D6\uFF0C\u7136\u540E\u5728\u5BA2\u6237\u7AEF\u89E3\u6790\u5E76\u6302\u8F7D\u5230 dom\u3002\u800C SSR \u76F4\u63A5\u5C06 HTML \u5B57\u7B26\u4E32\u4F20\u9012\u7ED9\u6D4F\u89C8\u5668\u3002\u5927\u5927\u52A0\u5FEB\u4E86\u9996\u5C4F\u52A0\u8F7D\u65F6\u95F4\u3002  
2\u3001**\u89E3\u51B3 SPA \u4E0D\u5229\u4E8E SEO(Search Engine Optimization)\u7684\u4F18\u5316\uFF1A** SPA \u7684 HTML \u53EA\u6709\u4E00\u4E2A\u65E0\u5B9E\u9645\u5185\u5BB9\u7684 HTML \u548C\u4E00\u4E2A app.js\uFF0CSSR \u751F\u6210\u7684 HTML \u662F\u6709\u5185\u5BB9\u7684\uFF0C\u8FD9\u8BA9\u641C\u7D22\u5F15\u64CE\u80FD\u7D22\u5F15\u5230\u9875\u9762\u5185\u5BB9\u3002

## \u4E09\u3001NUXT.JS \u7279\u6027

- \u57FA\u4E8E Vue.js
- SSR \u670D\u52A1\u7AEF\u6E32\u67D3
- \u5F3A\u5927\u7684\u8DEF\u7531\u529F\u80FD\uFF0C\u652F\u6301\u5F02\u6B65\u6570\u636E
- \u9759\u6001\u6587\u4EF6\u670D\u52A1
- ES2015+\u8BED\u6CD5\u652F\u6301
- \u6253\u5305\u548C\u538B\u7F29 JS \u548C CSS
- HTML \u5934\u90E8\u6807\u7B7E\u7BA1\u7406
- \u672C\u5730\u5F00\u53D1\u652F\u6301\u70ED\u52A0\u8F7D
- \u652F\u6301\u5404\u79CD\u6837\u5F0F\u9884\u5904\u7406\u5668\uFF1ASASS\u3001LESS\u3001Stulus \u7B49\u7B49
- \u652F\u6301 HTTP/2 \u63A8\u9001
- \u652F\u6301\u591A\u9875\u9762\u5E94\u7528
- \u652F\u6301\u9875\u9762\u81EA\u5B9A\u4E49\u5E03\u5C40
- \u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165

## \u56DB\u3001\u5F00\u59CB Nuxt \u9879\u76EE\u7684\u642D\u5EFA

\u4E3A\u4E86\u5FEB\u901F\u5165\u95E8\uFF0CNuxt.js \u56E2\u961F\u521B\u5EFA\u4E86\u811A\u624B\u67B6\u5DE5\u5177 \`create-nuxt-app\`\u3002\u786E\u4FDD\u5B89\u88C5\u4E86 npx(npx \u5728 NPM \u7248\u672C 5.2.0 \u9ED8\u8BA4\u5B89\u88C5\u4E86)

\`\`\`bash
$ npx create-nuxt-app <\u9879\u76EE\u540D>
\u6216
$ yarn create nuxt-app <\u9879\u76EE\u540D>
\`\`\`

\u8BE6\u7EC6\u5B89\u88C5\u6B65\u9AA4\u53C2\u8003\u5B98\u7F51\uFF1A<https://www.nuxtjs.cn/guide/installation>

## \u4E94\u3001Nuxt \u8DE8\u57DF\u5904\u7406

&emsp;\u4F7F\u7528\u8FC7 vue \u7684\u540C\u5B66\uFF0C\u80AF\u5B9A\u77E5\u9053\u5BF9\u4E8E\u9879\u76EE\u4E2D\u7684\u8DE8\u57DF\uFF0Cvue-cli \u5BF9 webpack \u4E2D\u7684 proxy \u9009\u9879\u8FDB\u884C\u4E86\u4E00\u5C42\u5C01\u88C5\u3002\u5B83\u66B4\u9732\u51FA\u6765\u7684\u662F\u4E00\u4E2A\u53EB proxyTable \u7684\u9009\u9879\uFF0C\u662F\u5BF9 webpack \u4E2D\u7684 proxy \u548C\u5176\u4E09\u65B9\u63D2\u4EF6 http-proxy-middleware \u7684\u4E00\u4E2A\u6574\u5408\u3002\u4E0D\u5E78\u7684 Nuxt \u4E2D\u6CA1\u6709 proxyTable \u8FD9\u4E48\u4E00\u4E2A\u914D\u7F6E\u9879\u6765\u8FDB\u884C\u8DE8\u57DF\u7684\u914D\u7F6E\u3002\u5F53\u7136\u5E78\u8FD0\u7684\u662F\uFF0C\u5728 Nuxt \u4E2D\u4F60\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u914D\u7F6E http-proxy-middleware \u6765\u5904\u7406\u8DE8\u57DF\u3002\u66F4\u5E78\u8FD0\u7684\u662F Nuxt \u5B98\u65B9\u63D0\u4F9B\u4E86\u4E24\u4E2A\u5305\u6765\u5904\u7406 axios \u8DE8\u57DF\u95EE\u9898\u3002

- [@nuxtjs/axios](https://www.npmjs.com/package/@nuxtjs/axios)\uFF1ASecure and easy Axios integration for Nuxt.
- [@nuxtjs/proxy](https://www.npmjs.com/package/@nuxtjs/proxy)\uFF1AProxy support for nuxt server

\u5B89\u88C5\u4F9D\u8D56\u5305\uFF1A

\`\`\`bash
npm i @nuxtjs/axios @nuxtjs/proxy -D
\`\`\`

\u7136\u540E\u5728 nuxt.config.js \u6587\u4EF6\u91CC\u8FDB\u884C\u914D\u7F6E

\`\`\`bash
#Modules: https://go.nuxtjs.dev/config-modules
modules: ['@nuxtjs/axios', '@nuxtjs/proxy'],

#Axios module configuration: https://go.nuxtjs.dev/config-axios
axios: {
  proxy: true,
  prefix: '/api',
  progress: true,
  withCredentials: true
},
#https://www.npmjs.com/package/@nuxtjs/proxy\u6216https://github.com/nuxt-community/proxy-module
proxy: {
  '/api': {
    target: 'https://route.showapi.com/',
    changeOrigin: true,
    pathRewrite: {
      '^/api': '/'
    }
  }
}
\`\`\`

\u8BE6\u7EC6\u914D\u7F6E\u53C2\u8003\u4E0A\u8FF0\u94FE\u63A5\u5730\u5740\u3002

## \u516D\u3001styleResources \u914D\u7F6E

\u5F53\u60A8\u9700\u8981\u5728\u9875\u9762\u4E2D\u6CE8\u5165\u4E00\u4E9B\u53D8\u91CF\u548C mixin \u800C\u4E0D\u5FC5\u6BCF\u6B21\u90FD\u5BFC\u5165\u5B83\u4EEC\u65F6\uFF0C\u8FD9\u975E\u5E38\u6709\u7528\u3002Nuxt.js \u4F7F\u7528 https://github.com/nuxt-community/style-resources-module \u6765\u5B9E\u73B0\u8FD9\u79CD\u884C\u4E3A\u3002\u60A8\u9700\u8981\u4E3A css \u9884\u5904\u7406\u5668\u6307\u5B9A\u8981\u5305\u542B\u7684 \u6A21\u5F0F / \u8DEF\u5F84 \uFF1A less, sass, scss \u6216 stylus\u3002\u60A8\u4E0D\u80FD\u5728\u6B64\u5904\u4F7F\u7528\u8DEF\u5F84\u522B\u540D(~ \u548C @)\uFF0C\u4F60\u9700\u8981\u4F7F\u7528\u76F8\u5BF9\u6216\u7EDD\u5BF9\u8DEF\u5F84\u3002

\u5B89\u88C5\u4F9D\u8D56\u5305\uFF1A

\`\`\`bash
npm i @nuxtjs/style-resources -D
\`\`\`

\u6839\u636E\u9700\u8981\u5B89\u88C5\uFF1A

- SASS: npm i sass-loader node-sass -D
- LESS: npm i less-loader less -D
- Stylus: npm i stylus-loader stylus -D

\u5982\u679C\u4F7F\u7528\u7684 npm,\u5219\u53D8\u4E3A npm install less-loader less -D
\u4FEE\u6539 nuxt.config.js:

\`\`\`bash
modules: [
   '@nuxtjs/style-resources'
  ],
styleResources:{
 less:'./assets/common.less'
 }
\`\`\`

\u8BE6\u7EC6\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A<https://github.com/nuxt-community/style-resources-module>

## \u4E03\u3001\u4F2A\u9759\u6001\u914D\u7F6E

Nuxt \u8DEF\u7531\u867D\u7136\u6309\u7167\`pages\`\u6587\u4EF6\u76EE\u5F55\u5C42\u7EA7\u548C\u5185\u7F6E\u7684\u89C4\u5219\u81EA\u52A8\u751F\u6210\u8DEF\u7531\uFF0C\u4F46\u751F\u6210\u7684\u8DEF\u7531\u6CA1\u6709\`.html\`\u540E\u7F00\uFF0C\u5982\u679C\u9700\u8981\u914D\u7F6E\u8DEF\u7531\u4F2A\u9759\u6001(\u8DEF\u7531\u540E\u7F00\u52A0\`.html\`),\u9700\u8981\u5728\`nuxt.config.js\`\u8FDB\u884C\u5982\u4E0B\u914D\u7F6E

\`\`\`bash
 router: {
    extendRoutes(routes) {
      routes.forEach((item) => {
        if (item.path != '/') {
          item.path = item.path + '.html'
        }
      })
    }
  }
\`\`\`

\u8BE6\u7EC6\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A<https://www.nuxtjs.cn/api/configuration-router>

## \u516B\u3001\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165\u914D\u7F6E

Nuxt.js 2.13+ \u652F\u6301\u7EC4\u4EF6\u81EA\u52A8\u626B\u63CF\u548C\u81EA\u52A8\u5BFC\u5165,\u76F8\u5173\u914D\u7F6E\u53C2\u8003\uFF1A<https://go.nuxtjs.dev/config-components>,\u9700\u8981\u5728\`nuxt.config.js\`\u8FDB\u884C\u914D\u7F6E\` components: true\`,\u9ED8\u8BA4 false\u3002
\u5982\u679C\`components\`\u7EC4\u4EF6\u5B58\u653E\u76EE\u5F55\u4E0B\u6CA1\u6709\u591A\u7EA7\u7EC4\u4EF6\u76EE\u5F55\uFF0C\u81EA\u52A8\u5BFC\u5165\u7684\u7EC4\u4EF6\u540D\u79F0\u548C\u7EC4\u4EF6\u6587\u4EF6\u540D\u4E00\u81F4\uFF0C\u5982\u679C\u5B58\u5728\u591A\u7EA7\u6587\u4EF6\u76EE\u5F55\uFF0C\u81EA\u52A8\u5BFC\u5165\u7684\u7EC4\u4EF6\u540D\u9ED8\u8BA4\u4F1A\u52A0\u4E0A\u6587\u4EF6\u5C42\u7EA7\u76EE\u5F55\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u6BCF\u4E2A\u7EC4\u4EF6\u540D\u79F0\u81EA\u52A8\u5BFC\u5165\u540E\u7EC4\u4EF6\u540D\u79F0\u4E0D\u53D8\uFF0C\u9700\u8981\u7EC4\u4E2A\u5BF9\u76EE\u524D\u5C42\u7EA7\u8FDB\u884C\u524D\u7F00\u914D\u7F6E\uFF0C\u914D\u7F6E\u5982\u4E0B\uFF1A

\`\`\`bash
# Auto import components: https://go.nuxtjs.dev/config-components
components: [
  { path: '~/components', prefix: '', extensions: ['vue'] },
  { path: '~/components/Layouts/', prefix: '', extensions: ['vue'] },
  { path: '~/components/LinkItem/', prefix: '', extensions: ['vue'] },
  { path: '~/components/RateItem/', prefix: '', extensions: ['vue'] }
]
\`\`\`

\u8BE6\u7EC6\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A<https://go.nuxtjs.dev/config-components>

## \u4E5D\u3001Nuxt \u6253\u5305\u5C4F\u853D\u6389\u5168\u5C40\`console\`\u529F\u80FD

&emsp;\u51FA\u4E8E\u5B89\u5168\u8003\u8651\uFF0C\u7EBF\u4E0A\u73AF\u5883\u4E00\u822C\u4E0D\u5141\u8BB8\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\u6253\u5370\u4EFB\u4F55\u4FE1\u606F\uFF0C\u6240\u4EE5\u6211\u4EEC\u6253\u5305\u4E0A\u7EBF\u65F6\uFF0C\u5C31\u9700\u8981\u5C4F\u853D console \u529F\u80FD\u3002\u5BF9\u4E8E Nuxt \u9879\u76EE\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u63D2\u4EF6\u7684\u65B9\u5F0F\uFF0C\u5728\u6253\u5305\u65F6\u7981\u7528 console \u529F\u80FD\u3002\u8BBE\u7F6E\u5982\u4E0B\uFF1A

1\u3001\u5B89\u88C5\u4F9D\u8D56\u5305\u3002

\`\`\`bash
yarn add  babel-plugin-transform-remove-console --save-dev
or
npm install babel-plugin-transform-remove-console --save-dev

\`\`\`

2\u3001\u5728\`nuxt.config.js\`\u8FDB\u884C\u5982\u4E0B\u914D\u7F6E\uFF1A  
\u56E0\u4E3A\u9700\u8981\u5224\u65AD\u73AF\u5883 \u6240\u4EE5\u9700\u8981\u5728\u5934\u90E8\u58F0\u660E\u53D8\u91CF\u4F7F\u7528\u63D2\u4EF6\uFF0C\u82E5\u4E0D\u9700\u8981\u53EF\u4EE5\u76F4\u63A5\u5728 build > babel > plugins \u4E2D\u4F7F\u7528

\`\`\`bash
# build\u8FDB\u884C\u914D\u7F6E
build: {
    analyze: true,
    babel: {
      #\u5728\u8FD9\u91CC\u4F7F\u7528
      plugins:plugins
    }
  }
}
\`\`\`
`,contentRendered:`<p>\u2003Nuxt.js \u662F\u4E00\u4E2A\u57FA\u4E8E Vue.js \u7684\u901A\u7528\u5E94\u7528\u6846\u67B6\uFF0C\u4E00\u4E2A\u7528\u4E8E Vue.js \u5F00\u53D1 SSR \u5E94\u7528\u7684\u4E00\u7AD9\u5F0F\u89E3\u51B3\u65B9\u6848\uFF0C\u5BF9\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u57FA\u7840\u67B6\u6784\u8FDB\u884C\u4E86\u62BD\u8C61\uFF0C\u4E3B\u8981\u5173\u6CE8\u7684\u662F\u5E94\u7528\u7684 UI \u6E32\u67D3\u3002NuxtJs \u53EF\u4EE5\u5B9E\u73B0\u57FA\u4E8E vuejs \u7684\u591A\u9875\u9762\u5E94\u7528\uFF0C\u652F\u6301 SSR(\u670D\u52A1\u5668\u7AEF\u6E32\u67D3)\uFF0C\u7B80\u5316\u4E86 SSR \u7684\u5F00\u53D1\u96BE\u5EA6\uFF0C\u53D7\u5230\u4E86 React SSR \u6846\u67B6 Next.js \u7684\u542F\u53D1\uFF0C\u4F7F\u7528 Webpack \u548C Node.js \u8FDB\u884C\u5C01\u88C5\u7684\u57FA\u4E8E Vue \u7684 SSR \u6846\u67B6\uFF0C\u9884\u8BBE\u4E86\u5229\u7528 Vue.js \u5F00\u53D1\u670D\u52A1\u7AEF\u6E32\u67D3\u7684\u5E94\u7528\u6240\u9700\u8981\u7684\u5404\u79CD\u914D\u7F6E\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u76F4\u63A5\u7528\u547D\u4EE4\u628A\u6211\u4EEC\u5236\u4F5C\u7684 vue \u9879\u76EE\u751F\u6210\u9759\u6001 html\u3002\u4F5C\u4E3A\u6846\u67B6\uFF0CNuxt.js \u4E3A\u5BA2\u6237\u7AEF/\u670D\u52A1\u7AEF\u8FD9\u79CD\u5178\u578B\u7684\u5E94\u7528\u67B6\u6784\u6A21\u5F0F\u63D0\u4F9B\u4E86\u8BB8\u591A\u6709\u7528\u7684\u7279\u6027\uFF0C\u4F8B\u5982\u5F02\u6B65\u6570\u636E\u52A0\u8F7D\u3001\u4E2D\u95F4\u4EF6\u652F\u6301\u3001\u5E03\u5C40\u652F\u6301\u7B49\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001nuxt-js-\u5B98\u7F51\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001nuxt-js-\u5B98\u7F51\u5730\u5740" aria-hidden="true">#</a> \u4E00\u3001Nuxt.js \u5B98\u7F51\u5730\u5740</h2>
<p>1 Nuxt.js 2.x \u7248\u672C\u4E2D\u6587\u7F51\u7AD9\uFF1A<a href="https://www.nuxtjs.cn/" target="_blank" rel="noopener noreferrer">https://www.nuxtjs.cn/<ExternalLinkIcon/></a><br>
2 Nuxt.js 2.x \u7248\u672C\u82F1\u6587\u7F51\u7AD9\uFF1A<a href="https://nuxtjs.org/" target="_blank" rel="noopener noreferrer">https://nuxtjs.org/<ExternalLinkIcon/></a><br>
3 Nuxt.js 2.x \u7248\u672C\u751F\u547D\u5468\u671F\uFF1A<a href="https://nuxtjs.org/docs/concepts/nuxt-lifecycle/" target="_blank" rel="noopener noreferrer">https://nuxtjs.org/docs/concepts/nuxt-lifecycle/<ExternalLinkIcon/></a><br>
4 Nuxt.js 2.x \u7248\u672C\u914D\u7F6E\u6587\u6863\uFF1A<a href="https://nuxtjs.org/docs/get-started/installation" target="_blank" rel="noopener noreferrer">https://nuxtjs.org/docs/get-started/installation<ExternalLinkIcon/></a><br>
5 Nuxt.js 3.x \u7248\u672C\u82F1\u6587\u7F51\u7AD9\uFF1A<a href="https://v3.nuxtjs.org/" target="_blank" rel="noopener noreferrer">https://v3.nuxtjs.org/<ExternalLinkIcon/></a><br>
\u622A\u6B62\u76EE\u524D<code v-pre>2022\u5E744\u67086\u65E510:25:01</code>\u4E3A\u6B62\uFF0CNuxtJs3.x \u5DF2\u53D1\u5E03\u4E86 beta \u7248\u672C\uFF0CNuxtJs3.x \u8FD8\u5728\u5F00\u53D1\u5B8C\u5584\u4E2D\uFF0C\u4E0D\u63A8\u8350\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u3002\u5EFA\u8BAE\u4F7F\u7528 NuxtJS 2.x \u7248\u672C\uFF0C\u76F8\u5BF9\u6BD4\u8F83\u7A33\u5B9A\u3002</p>
<h2 id="\u4E8C\u3001ssr-\u670D\u52A1\u7AEF\u6E32\u67D3" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001ssr-\u670D\u52A1\u7AEF\u6E32\u67D3" aria-hidden="true">#</a> \u4E8C\u3001SSR(\u670D\u52A1\u7AEF\u6E32\u67D3)</h2>
<p>SSR\uFF0C\u5373\u670D\u52A1\u7AEF\u6E32\u67D3(Server Side Render)\uFF0C\u5C31\u662F\u5728\u670D\u52A1\u5668\u7AEF\u5C06\u5BF9 Vue \u9875\u9762\u8FDB\u884C\u6E32\u67D3\u751F\u6210 html \u6587\u4EF6\uFF0C\u5C06 html \u9875\u9762\u4F20\u9012\u7ED9\u6D4F\u89C8\u5668\u3002
\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528 SSR?<br>
1\u3001<strong>\u964D\u4F4E SPA(Single Page Application)\u9996\u5C4F\u6E32\u67D3\u7684\u65F6\u95F4\uFF1A</strong> SPA \u5F15\u7528\u662F\u5C06 bundle.js \u4ECE\u670D\u52A1\u5668\u83B7\u53D6\uFF0C\u7136\u540E\u5728\u5BA2\u6237\u7AEF\u89E3\u6790\u5E76\u6302\u8F7D\u5230 dom\u3002\u800C SSR \u76F4\u63A5\u5C06 HTML \u5B57\u7B26\u4E32\u4F20\u9012\u7ED9\u6D4F\u89C8\u5668\u3002\u5927\u5927\u52A0\u5FEB\u4E86\u9996\u5C4F\u52A0\u8F7D\u65F6\u95F4\u3002<br>
2\u3001<strong>\u89E3\u51B3 SPA \u4E0D\u5229\u4E8E SEO(Search Engine Optimization)\u7684\u4F18\u5316\uFF1A</strong> SPA \u7684 HTML \u53EA\u6709\u4E00\u4E2A\u65E0\u5B9E\u9645\u5185\u5BB9\u7684 HTML \u548C\u4E00\u4E2A app.js\uFF0CSSR \u751F\u6210\u7684 HTML \u662F\u6709\u5185\u5BB9\u7684\uFF0C\u8FD9\u8BA9\u641C\u7D22\u5F15\u64CE\u80FD\u7D22\u5F15\u5230\u9875\u9762\u5185\u5BB9\u3002</p>
<h2 id="\u4E09\u3001nuxt-js-\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001nuxt-js-\u7279\u6027" aria-hidden="true">#</a> \u4E09\u3001NUXT.JS \u7279\u6027</h2>
<ul>
<li>\u57FA\u4E8E Vue.js</li>
<li>SSR \u670D\u52A1\u7AEF\u6E32\u67D3</li>
<li>\u5F3A\u5927\u7684\u8DEF\u7531\u529F\u80FD\uFF0C\u652F\u6301\u5F02\u6B65\u6570\u636E</li>
<li>\u9759\u6001\u6587\u4EF6\u670D\u52A1</li>
<li>ES2015+\u8BED\u6CD5\u652F\u6301</li>
<li>\u6253\u5305\u548C\u538B\u7F29 JS \u548C CSS</li>
<li>HTML \u5934\u90E8\u6807\u7B7E\u7BA1\u7406</li>
<li>\u672C\u5730\u5F00\u53D1\u652F\u6301\u70ED\u52A0\u8F7D</li>
<li>\u652F\u6301\u5404\u79CD\u6837\u5F0F\u9884\u5904\u7406\u5668\uFF1ASASS\u3001LESS\u3001Stulus \u7B49\u7B49</li>
<li>\u652F\u6301 HTTP/2 \u63A8\u9001</li>
<li>\u652F\u6301\u591A\u9875\u9762\u5E94\u7528</li>
<li>\u652F\u6301\u9875\u9762\u81EA\u5B9A\u4E49\u5E03\u5C40</li>
<li>\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165</li>
</ul>
<h2 id="\u56DB\u3001\u5F00\u59CB-nuxt-\u9879\u76EE\u7684\u642D\u5EFA" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u5F00\u59CB-nuxt-\u9879\u76EE\u7684\u642D\u5EFA" aria-hidden="true">#</a> \u56DB\u3001\u5F00\u59CB Nuxt \u9879\u76EE\u7684\u642D\u5EFA</h2>
<p>\u4E3A\u4E86\u5FEB\u901F\u5165\u95E8\uFF0CNuxt.js \u56E2\u961F\u521B\u5EFA\u4E86\u811A\u624B\u67B6\u5DE5\u5177 <code v-pre>create-nuxt-app</code>\u3002\u786E\u4FDD\u5B89\u88C5\u4E86 npx(npx \u5728 NPM \u7248\u672C 5.2.0 \u9ED8\u8BA4\u5B89\u88C5\u4E86)</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ npx create-nuxt-app <span class="token operator">&lt;</span>\u9879\u76EE\u540D<span class="token operator">></span>
\u6216
$ <span class="token function">yarn</span> create nuxt-app <span class="token operator">&lt;</span>\u9879\u76EE\u540D<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE6\u7EC6\u5B89\u88C5\u6B65\u9AA4\u53C2\u8003\u5B98\u7F51\uFF1A<a href="https://www.nuxtjs.cn/guide/installation" target="_blank" rel="noopener noreferrer">https://www.nuxtjs.cn/guide/installation<ExternalLinkIcon/></a></p>
<h2 id="\u4E94\u3001nuxt-\u8DE8\u57DF\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001nuxt-\u8DE8\u57DF\u5904\u7406" aria-hidden="true">#</a> \u4E94\u3001Nuxt \u8DE8\u57DF\u5904\u7406</h2>
<p>\u2003\u4F7F\u7528\u8FC7 vue \u7684\u540C\u5B66\uFF0C\u80AF\u5B9A\u77E5\u9053\u5BF9\u4E8E\u9879\u76EE\u4E2D\u7684\u8DE8\u57DF\uFF0Cvue-cli \u5BF9 webpack \u4E2D\u7684 proxy \u9009\u9879\u8FDB\u884C\u4E86\u4E00\u5C42\u5C01\u88C5\u3002\u5B83\u66B4\u9732\u51FA\u6765\u7684\u662F\u4E00\u4E2A\u53EB proxyTable \u7684\u9009\u9879\uFF0C\u662F\u5BF9 webpack \u4E2D\u7684 proxy \u548C\u5176\u4E09\u65B9\u63D2\u4EF6 http-proxy-middleware \u7684\u4E00\u4E2A\u6574\u5408\u3002\u4E0D\u5E78\u7684 Nuxt \u4E2D\u6CA1\u6709 proxyTable \u8FD9\u4E48\u4E00\u4E2A\u914D\u7F6E\u9879\u6765\u8FDB\u884C\u8DE8\u57DF\u7684\u914D\u7F6E\u3002\u5F53\u7136\u5E78\u8FD0\u7684\u662F\uFF0C\u5728 Nuxt \u4E2D\u4F60\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u914D\u7F6E http-proxy-middleware \u6765\u5904\u7406\u8DE8\u57DF\u3002\u66F4\u5E78\u8FD0\u7684\u662F Nuxt \u5B98\u65B9\u63D0\u4F9B\u4E86\u4E24\u4E2A\u5305\u6765\u5904\u7406 axios \u8DE8\u57DF\u95EE\u9898\u3002</p>
<ul>
<li><a href="https://www.npmjs.com/package/@nuxtjs/axios" target="_blank" rel="noopener noreferrer">@nuxtjs/axios<ExternalLinkIcon/></a>\uFF1ASecure and easy Axios integration for Nuxt.</li>
<li><a href="https://www.npmjs.com/package/@nuxtjs/proxy" target="_blank" rel="noopener noreferrer">@nuxtjs/proxy<ExternalLinkIcon/></a>\uFF1AProxy support for nuxt server</li>
</ul>
<p>\u5B89\u88C5\u4F9D\u8D56\u5305\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i @nuxtjs/axios @nuxtjs/proxy <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7136\u540E\u5728 nuxt.config.js \u6587\u4EF6\u91CC\u8FDB\u884C\u914D\u7F6E</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#Modules: https://go.nuxtjs.dev/config-modules</span>
modules: <span class="token punctuation">[</span><span class="token string">'@nuxtjs/axios'</span>, <span class="token string">'@nuxtjs/proxy'</span><span class="token punctuation">]</span>,

<span class="token comment">#Axios module configuration: https://go.nuxtjs.dev/config-axios</span>
axios: <span class="token punctuation">{</span>
  proxy: true,
  prefix: <span class="token string">'/api'</span>,
  progress: true,
  withCredentials: <span class="token boolean">true</span>
<span class="token punctuation">}</span>,
<span class="token comment">#https://www.npmjs.com/package/@nuxtjs/proxy\u6216https://github.com/nuxt-community/proxy-module</span>
proxy: <span class="token punctuation">{</span>
  <span class="token string">'/api'</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    target: <span class="token string">'https://route.showapi.com/'</span>,
    changeOrigin: true,
    pathRewrite: <span class="token punctuation">{</span>
      <span class="token string">'^/api'</span><span class="token builtin class-name">:</span> <span class="token string">'/'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE6\u7EC6\u914D\u7F6E\u53C2\u8003\u4E0A\u8FF0\u94FE\u63A5\u5730\u5740\u3002</p>
<h2 id="\u516D\u3001styleresources-\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u516D\u3001styleresources-\u914D\u7F6E" aria-hidden="true">#</a> \u516D\u3001styleResources \u914D\u7F6E</h2>
<p>\u5F53\u60A8\u9700\u8981\u5728\u9875\u9762\u4E2D\u6CE8\u5165\u4E00\u4E9B\u53D8\u91CF\u548C mixin \u800C\u4E0D\u5FC5\u6BCF\u6B21\u90FD\u5BFC\u5165\u5B83\u4EEC\u65F6\uFF0C\u8FD9\u975E\u5E38\u6709\u7528\u3002Nuxt.js \u4F7F\u7528 https://github.com/nuxt-community/style-resources-module \u6765\u5B9E\u73B0\u8FD9\u79CD\u884C\u4E3A\u3002\u60A8\u9700\u8981\u4E3A css \u9884\u5904\u7406\u5668\u6307\u5B9A\u8981\u5305\u542B\u7684 \u6A21\u5F0F / \u8DEF\u5F84 \uFF1A less, sass, scss \u6216 stylus\u3002\u60A8\u4E0D\u80FD\u5728\u6B64\u5904\u4F7F\u7528\u8DEF\u5F84\u522B\u540D(~ \u548C @)\uFF0C\u4F60\u9700\u8981\u4F7F\u7528\u76F8\u5BF9\u6216\u7EDD\u5BF9\u8DEF\u5F84\u3002</p>
<p>\u5B89\u88C5\u4F9D\u8D56\u5305\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i @nuxtjs/style-resources <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6839\u636E\u9700\u8981\u5B89\u88C5\uFF1A</p>
<ul>
<li>SASS: npm i sass-loader node-sass -D</li>
<li>LESS: npm i less-loader less -D</li>
<li>Stylus: npm i stylus-loader stylus -D</li>
</ul>
<p>\u5982\u679C\u4F7F\u7528\u7684 npm,\u5219\u53D8\u4E3A npm install less-loader less -D
\u4FEE\u6539 nuxt.config.js:</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>modules: <span class="token punctuation">[</span>
   <span class="token string">'@nuxtjs/style-resources'</span>
  <span class="token punctuation">]</span>,
styleResources:<span class="token punctuation">{</span>
 less:<span class="token string">'./assets/common.less'</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE6\u7EC6\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A<a href="https://github.com/nuxt-community/style-resources-module" target="_blank" rel="noopener noreferrer">https://github.com/nuxt-community/style-resources-module<ExternalLinkIcon/></a></p>
<h2 id="\u4E03\u3001\u4F2A\u9759\u6001\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E03\u3001\u4F2A\u9759\u6001\u914D\u7F6E" aria-hidden="true">#</a> \u4E03\u3001\u4F2A\u9759\u6001\u914D\u7F6E</h2>
<p>Nuxt \u8DEF\u7531\u867D\u7136\u6309\u7167<code v-pre>pages</code>\u6587\u4EF6\u76EE\u5F55\u5C42\u7EA7\u548C\u5185\u7F6E\u7684\u89C4\u5219\u81EA\u52A8\u751F\u6210\u8DEF\u7531\uFF0C\u4F46\u751F\u6210\u7684\u8DEF\u7531\u6CA1\u6709<code v-pre>.html</code>\u540E\u7F00\uFF0C\u5982\u679C\u9700\u8981\u914D\u7F6E\u8DEF\u7531\u4F2A\u9759\u6001(\u8DEF\u7531\u540E\u7F00\u52A0<code v-pre>.html</code>),\u9700\u8981\u5728<code v-pre>nuxt.config.js</code>\u8FDB\u884C\u5982\u4E0B\u914D\u7F6E</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code> router: <span class="token punctuation">{</span>
    extendRoutes<span class="token punctuation">(</span>routes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      routes.forEach<span class="token punctuation">((</span>item<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item.path <span class="token operator">!=</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          item.path <span class="token operator">=</span> item.path + <span class="token string">'.html'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE6\u7EC6\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A<a href="https://www.nuxtjs.cn/api/configuration-router" target="_blank" rel="noopener noreferrer">https://www.nuxtjs.cn/api/configuration-router<ExternalLinkIcon/></a></p>
<h2 id="\u516B\u3001\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u516B\u3001\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165\u914D\u7F6E" aria-hidden="true">#</a> \u516B\u3001\u7EC4\u4EF6\u81EA\u52A8\u5BFC\u5165\u914D\u7F6E</h2>
<p>Nuxt.js 2.13+ \u652F\u6301\u7EC4\u4EF6\u81EA\u52A8\u626B\u63CF\u548C\u81EA\u52A8\u5BFC\u5165,\u76F8\u5173\u914D\u7F6E\u53C2\u8003\uFF1A<a href="https://go.nuxtjs.dev/config-components" target="_blank" rel="noopener noreferrer">https://go.nuxtjs.dev/config-components<ExternalLinkIcon/></a>,\u9700\u8981\u5728<code v-pre>nuxt.config.js</code>\u8FDB\u884C\u914D\u7F6E<code v-pre> components: true</code>,\u9ED8\u8BA4 false\u3002
\u5982\u679C<code v-pre>components</code>\u7EC4\u4EF6\u5B58\u653E\u76EE\u5F55\u4E0B\u6CA1\u6709\u591A\u7EA7\u7EC4\u4EF6\u76EE\u5F55\uFF0C\u81EA\u52A8\u5BFC\u5165\u7684\u7EC4\u4EF6\u540D\u79F0\u548C\u7EC4\u4EF6\u6587\u4EF6\u540D\u4E00\u81F4\uFF0C\u5982\u679C\u5B58\u5728\u591A\u7EA7\u6587\u4EF6\u76EE\u5F55\uFF0C\u81EA\u52A8\u5BFC\u5165\u7684\u7EC4\u4EF6\u540D\u9ED8\u8BA4\u4F1A\u52A0\u4E0A\u6587\u4EF6\u5C42\u7EA7\u76EE\u5F55\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u6BCF\u4E2A\u7EC4\u4EF6\u540D\u79F0\u81EA\u52A8\u5BFC\u5165\u540E\u7EC4\u4EF6\u540D\u79F0\u4E0D\u53D8\uFF0C\u9700\u8981\u7EC4\u4E2A\u5BF9\u76EE\u524D\u5C42\u7EA7\u8FDB\u884C\u524D\u7F00\u914D\u7F6E\uFF0C\u914D\u7F6E\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># Auto import components: https://go.nuxtjs.dev/config-components</span>
components: <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path: <span class="token string">'~/components'</span>, prefix: <span class="token string">''</span>, extensions: <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>,
  <span class="token punctuation">{</span> path: <span class="token string">'~/components/Layouts/'</span>, prefix: <span class="token string">''</span>, extensions: <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>,
  <span class="token punctuation">{</span> path: <span class="token string">'~/components/LinkItem/'</span>, prefix: <span class="token string">''</span>, extensions: <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>,
  <span class="token punctuation">{</span> path: <span class="token string">'~/components/RateItem/'</span>, prefix: <span class="token string">''</span>, extensions: <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE6\u7EC6\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A<a href="https://go.nuxtjs.dev/config-components" target="_blank" rel="noopener noreferrer">https://go.nuxtjs.dev/config-components<ExternalLinkIcon/></a></p>
<h2 id="\u4E5D\u3001nuxt-\u6253\u5305\u5C4F\u853D\u6389\u5168\u5C40console\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u4E5D\u3001nuxt-\u6253\u5305\u5C4F\u853D\u6389\u5168\u5C40console\u529F\u80FD" aria-hidden="true">#</a> \u4E5D\u3001Nuxt \u6253\u5305\u5C4F\u853D\u6389\u5168\u5C40<code v-pre>console</code>\u529F\u80FD</h2>
<p>\u2003\u51FA\u4E8E\u5B89\u5168\u8003\u8651\uFF0C\u7EBF\u4E0A\u73AF\u5883\u4E00\u822C\u4E0D\u5141\u8BB8\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\u6253\u5370\u4EFB\u4F55\u4FE1\u606F\uFF0C\u6240\u4EE5\u6211\u4EEC\u6253\u5305\u4E0A\u7EBF\u65F6\uFF0C\u5C31\u9700\u8981\u5C4F\u853D console \u529F\u80FD\u3002\u5BF9\u4E8E Nuxt \u9879\u76EE\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u63D2\u4EF6\u7684\u65B9\u5F0F\uFF0C\u5728\u6253\u5305\u65F6\u7981\u7528 console \u529F\u80FD\u3002\u8BBE\u7F6E\u5982\u4E0B\uFF1A</p>
<p>1\u3001\u5B89\u88C5\u4F9D\u8D56\u5305\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span>  babel-plugin-transform-remove-console --save-dev
or
<span class="token function">npm</span> <span class="token function">install</span> babel-plugin-transform-remove-console --save-dev

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2\u3001\u5728<code v-pre>nuxt.config.js</code>\u8FDB\u884C\u5982\u4E0B\u914D\u7F6E\uFF1A<br>
\u56E0\u4E3A\u9700\u8981\u5224\u65AD\u73AF\u5883 \u6240\u4EE5\u9700\u8981\u5728\u5934\u90E8\u58F0\u660E\u53D8\u91CF\u4F7F\u7528\u63D2\u4EF6\uFF0C\u82E5\u4E0D\u9700\u8981\u53EF\u4EE5\u76F4\u63A5\u5728 build &gt; babel &gt; plugins \u4E2D\u4F7F\u7528</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># build\u8FDB\u884C\u914D\u7F6E</span>
build: <span class="token punctuation">{</span>
    analyze: true,
    babel: <span class="token punctuation">{</span>
      <span class="token comment">#\u5728\u8FD9\u91CC\u4F7F\u7528</span>
      plugins:plugins
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2019-04-06",deps:[],links:[],pathInferred:"/posts/nuxt/",pathLocale:"/",permalink:null,routeMeta:{title:"Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E"},sfcBlocks:[],slug:"README",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/nuxt/README.md",filePathRelative:"posts/nuxt/README.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/nuxt/index.html.vue",componentFilePathRelative:"pages/posts/nuxt/index.html.vue",componentFileChunkName:"v-094597b7",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/nuxt/index.html.js",dataFilePathRelative:"pages/posts/nuxt/index.html.js",dataFileChunkName:"v-094597b7",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/nuxt/index.html",htmlFilePathRelative:"posts/nuxt/index.html"},title:"Nuxt\u9879\u76EE\u521B\u5EFA\u4EE5\u53CA\u5E38\u89C1\u914D\u7F6E"},["/posts/nuxt/index.html","/posts/nuxt/README.md"]],["v-2e69883b","/posts/nuxt/deploy.html",{_blog:{data:{key:"v-2e69883b",path:"/posts/nuxt/deploy.html",title:"Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848",lang:"zh-CN",frontmatter:{title:"Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848",date:"2022-04-07T10:07:16.000Z",tag:["Nuxt"],category:["\u8FD0\u7EF4","Nuxt"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200942246.png",summary:`\u2003Nust.js \u901A\u8FC7\u5728nuxt.config.js\u6587\u4EF6\u914D\u7F6E ssr\uFF1Atrue,\u5F00\u542F SSR \u652F\u6301\uFF0Cssr\uFF1Afalse \u5173\u95ED SSR \u652F\u6301,\u5373\u652F\u6301 SPA\uFF08\u539F\u5C5E\u6027mode\u5DF2\u8FC7\u671F\uFF09\uFF0C\u53EF\u4EE5\u6839\u636E\u9879\u76EE\u5B9E\u9645\u60C5\u51B5\u5F00\u542F ssr \u6216\u5173\u95ED ssr\u3002\u5982\u679C\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u9700\u8981\u670D\u52A1\u7AEF\u73AF\u5883\u652F\u6301\uFF0C\u5982\u679C\u6CA1\u6709\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u548C\u666E\u901A\u7684 vue \u9879\u76EE\u90E8\u7F72\u65B9\u5F0F\u4E00\u81F4\u3002\u5F53\u7136 nuxt \u53EF\u4EE5\u901A\u8FC7 npm run generate \u547D\u4EE4\u6253\u5305\u6210\u9759\u6001\u9875\u9762\uFF0C\u652F\u6301\u9759\u6001\u7AD9\u70B9\u90E8\u7F72\uFF0C\u4F46\u9759\u6001\u7AD9\u70B9\u4E0D\u652F\u6301 SSR\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/nuxt/deploy.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Nuxt"}],["meta",{property:"article:published_time",content:"2022-04-07T10:07:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nust.js \u901A\u8FC7\u5728<code v-pre>nuxt.config.js</code>\u6587\u4EF6\u914D\u7F6E ssr\uFF1Atrue,\u5F00\u542F SSR \u652F\u6301\uFF0Cssr\uFF1Afalse \u5173\u95ED SSR \u652F\u6301,\u5373\u652F\u6301 SPA\uFF08\u539F\u5C5E\u6027<code v-pre>mode</code>\u5DF2\u8FC7\u671F\uFF09\uFF0C\u53EF\u4EE5\u6839\u636E\u9879\u76EE\u5B9E\u9645\u60C5\u51B5\u5F00\u542F ssr \u6216\u5173\u95ED ssr\u3002\u5982\u679C\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u9700\u8981\u670D\u52A1\u7AEF\u73AF\u5883\u652F\u6301\uFF0C\u5982\u679C\u6CA1\u6709\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u548C\u666E\u901A\u7684 vue \u9879\u76EE\u90E8\u7F72\u65B9\u5F0F\u4E00\u81F4\u3002\u5F53\u7136 nuxt \u53EF\u4EE5\u901A\u8FC7 npm run generate \u547D\u4EE4\u6253\u5305\u6210\u9759\u6001\u9875\u9762\uFF0C\u652F\u6301\u9759\u6001\u7AD9\u70B9\u90E8\u7F72\uFF0C\u4F46\u9759\u6001\u7AD9\u70B9\u4E0D\u652F\u6301 SSR\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001nohup \u65B9\u5F0F\u540E\u53F0\u8FD0\u884C",slug:"\u4E00\u3001nohup-\u65B9\u5F0F\u540E\u53F0\u8FD0\u884C",children:[]},{level:2,title:"\u4E8C\u3001pm2 \u65B9\u5F0F\u90E8\u7F72",slug:"\u4E8C\u3001pm2-\u65B9\u5F0F\u90E8\u7F72",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/nuxt/deploy.md",readingTime:{minutes:6.05,words:1816},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/nuxt/deploy.html`},key:"v-2e69883b",path:"/posts/nuxt/deploy.html",title:"Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848",lang:"zh-CN",frontmatter:{title:"Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848",date:"2022-04-07T10:07:16.000Z",tag:["Nuxt"],category:["\u8FD0\u7EF4","Nuxt"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200942246.png",summary:`\u2003Nust.js \u901A\u8FC7\u5728nuxt.config.js\u6587\u4EF6\u914D\u7F6E ssr\uFF1Atrue,\u5F00\u542F SSR \u652F\u6301\uFF0Cssr\uFF1Afalse \u5173\u95ED SSR \u652F\u6301,\u5373\u652F\u6301 SPA\uFF08\u539F\u5C5E\u6027mode\u5DF2\u8FC7\u671F\uFF09\uFF0C\u53EF\u4EE5\u6839\u636E\u9879\u76EE\u5B9E\u9645\u60C5\u51B5\u5F00\u542F ssr \u6216\u5173\u95ED ssr\u3002\u5982\u679C\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u9700\u8981\u670D\u52A1\u7AEF\u73AF\u5883\u652F\u6301\uFF0C\u5982\u679C\u6CA1\u6709\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u548C\u666E\u901A\u7684 vue \u9879\u76EE\u90E8\u7F72\u65B9\u5F0F\u4E00\u81F4\u3002\u5F53\u7136 nuxt \u53EF\u4EE5\u901A\u8FC7 npm run generate \u547D\u4EE4\u6253\u5305\u6210\u9759\u6001\u9875\u9762\uFF0C\u652F\u6301\u9759\u6001\u7AD9\u70B9\u90E8\u7F72\uFF0C\u4F46\u9759\u6001\u7AD9\u70B9\u4E0D\u652F\u6301 SSR\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/nuxt/deploy.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Nuxt"}],["meta",{property:"article:published_time",content:"2022-04-07T10:07:16.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nust.js \u901A\u8FC7\u5728<code v-pre>nuxt.config.js</code>\u6587\u4EF6\u914D\u7F6E ssr\uFF1Atrue,\u5F00\u542F SSR \u652F\u6301\uFF0Cssr\uFF1Afalse \u5173\u95ED SSR \u652F\u6301,\u5373\u652F\u6301 SPA\uFF08\u539F\u5C5E\u6027<code v-pre>mode</code>\u5DF2\u8FC7\u671F\uFF09\uFF0C\u53EF\u4EE5\u6839\u636E\u9879\u76EE\u5B9E\u9645\u60C5\u51B5\u5F00\u542F ssr \u6216\u5173\u95ED ssr\u3002\u5982\u679C\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u9700\u8981\u670D\u52A1\u7AEF\u73AF\u5883\u652F\u6301\uFF0C\u5982\u679C\u6CA1\u6709\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u548C\u666E\u901A\u7684 vue \u9879\u76EE\u90E8\u7F72\u65B9\u5F0F\u4E00\u81F4\u3002\u5F53\u7136 nuxt \u53EF\u4EE5\u901A\u8FC7 npm run generate \u547D\u4EE4\u6253\u5305\u6210\u9759\u6001\u9875\u9762\uFF0C\u652F\u6301\u9759\u6001\u7AD9\u70B9\u90E8\u7F72\uFF0C\u4F46\u9759\u6001\u7AD9\u70B9\u4E0D\u652F\u6301 SSR\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001nohup \u65B9\u5F0F\u540E\u53F0\u8FD0\u884C",slug:"\u4E00\u3001nohup-\u65B9\u5F0F\u540E\u53F0\u8FD0\u884C",children:[]},{level:2,title:"\u4E8C\u3001pm2 \u65B9\u5F0F\u90E8\u7F72",slug:"\u4E8C\u3001pm2-\u65B9\u5F0F\u90E8\u7F72",children:[]}],content:`---
title: Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848
date: 2022-04-07 10:07:16
tag:
  - Nuxt
category:
  - \u8FD0\u7EF4
  - Nuxt
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207200942246.png
---

&emsp;Nust.js \u901A\u8FC7\u5728\`nuxt.config.js\`\u6587\u4EF6\u914D\u7F6E ssr\uFF1Atrue,\u5F00\u542F SSR \u652F\u6301\uFF0Cssr\uFF1Afalse \u5173\u95ED SSR \u652F\u6301,\u5373\u652F\u6301 SPA\uFF08\u539F\u5C5E\u6027\`mode\`\u5DF2\u8FC7\u671F\uFF09\uFF0C\u53EF\u4EE5\u6839\u636E\u9879\u76EE\u5B9E\u9645\u60C5\u51B5\u5F00\u542F ssr \u6216\u5173\u95ED ssr\u3002\u5982\u679C\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u9700\u8981\u670D\u52A1\u7AEF\u73AF\u5883\u652F\u6301\uFF0C\u5982\u679C\u6CA1\u6709\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u548C\u666E\u901A\u7684 vue \u9879\u76EE\u90E8\u7F72\u65B9\u5F0F\u4E00\u81F4\u3002\u5F53\u7136 nuxt \u53EF\u4EE5\u901A\u8FC7 npm run generate \u547D\u4EE4\u6253\u5305\u6210\u9759\u6001\u9875\u9762\uFF0C\u652F\u6301\u9759\u6001\u7AD9\u70B9\u90E8\u7F72\uFF0C\u4F46\u9759\u6001\u7AD9\u70B9\u4E0D\u652F\u6301 SSR\u3002

<!-- more -->

&emsp;Nuxt.js \u9879\u76EE\u6253\u5305\u5B8C\u6210\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7\u547D\u4EE4\`npm run start\`\u8FDB\u884C\u542F\u52A8\u8FD0\u884C\uFF0C\u8FDB\u7A0B\u662F\u524D\u53F0\u8FD0\u884C\uFF0C\u4F1A\u5360\u7528\u5F53\u524D\u547D\u4EE4\u7A97\u53E3\uFF0C\u4F46\u5F53\u6211\u4EEC\u901A\u8FC7\`Ctrl+C\`\u5173\u95ED\u65F6\uFF0C\u5F53\u524D\u7A0B\u5E8F\u8FDB\u7A0B\u4F1A\u88AB\u5173\u95ED\uFF0C\u7A0B\u5E8F\u7EC8\u6B62\u8FD0\u884C\uFF0C\u6240\u4EE5\u9700\u8981\u540E\u53F0\u8FDB\u884C\u8FD0\u884C\u8FDB\u7A0B\u3002\u672C\u6587\u4E3B\u8981\u8BB2\u8FF0 Nuxt SSR \u9879\u76EE\u5E38\u7528\u7684 2 \u4E2D\u90E8\u7F72\u65B9\u5F0F\uFF1A**nohup &** \u548C**pm2**\u3002\u5F53\u7136\u524D\u63D0\u662F\u9700\u8981\u5B89\u88C5 Node \u73AF\u5883\uFF0C\u5982\u679C\u672A\u5B89\u88C5 Node \u73AF\u5883\uFF0C\u8BF7\u53C2\u8003\uFF1A[Node \u73AF\u5883\u5B89\u88C5](/node/)\u3002\u65E0\u8BBA\u90A3\u79CD\u65B9\u5F0F\u5747\u9700\u8981\u4E0A\u4F20\u4EE5\u4E0B\u6587\u4EF6\u81F3\u670D\u52A1\u5668\uFF1A\`.nuxt,static,package.json,package-lock.json,nuxt.config.js\`

## \u4E00\u3001nohup \u65B9\u5F0F\u540E\u53F0\u8FD0\u884C

&emsp;nohup \u547D\u4EE4\u7684\u4E00\u822C\u683C\u5F0F\u4E3A:\`nohup yourcommand &\`,\u6211\u4EEC\u901A\u8FC7\u542F\u52A8\u547D\u4EE4\uFF1A\`nohup npm run start &\`\u6765\u540E\u53F0\u8FD0\u884C nuxt ssr \u9879\u76EE\u3002ohup \u547D\u4EE4\uFF1Anohup \u662F\u4E0D\u6302\u65AD\u7684\u610F\u601D( no hang up)\u3002\u5982\u679C\u4F60\u6B63\u5728\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C\u4E14\u4F60\u89C9\u5F97\u5728\u9000\u51FA\u5E10\u6237\u65F6\u8BE5\u8FDB\u7A0B\u8FD8\u4E0D\u4F1A\u7ED3\u675F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 nohup \u547D\u4EE4\u3002\u8BE5\u547D\u4EE4\u5FFD\u7565\u6240\u6709\u6302\uFF08SIGHUP\uFF09\u4FE1\u53F7\uFF0C\u53EF\u4EE5\u5728\u4F60\u9000\u51FA\u5E10\u6237/\u5173\u95ED\u7EC8\u7AEF\u4E4B\u540E\u7EE7\u7EED\u8FD0\u884C\u76F8\u5E94\u7684\u8FDB\u7A0B\u3002&\u662F\u6307\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u5F53\u7528\u6237\u63A8\u51FA(\u6302\u8D77)\u7684\u65F6\u5019\uFF0C\u547D\u4EE4\u81EA\u52A8\u4E5F\u8DDF\u7740\u9000\u51FA. nohup \u4E0E&\u7ED3\u5408\u8D77\u6765\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E0D\u6302\u65AD\u7684\u540E\u53F0\u8FD0\u884C\u3002\u76F8\u5173\`nohup\`\u547D\u4EE4\u7528\u6CD5\uFF0C\u8BF7\u53C2\u8003\uFF1A[nohup \u4E0D\u6302\u65AD\u8FD0\u884C](/node/nohup.html)

1\u3001\u901A\u8FC7\`npm run build\`\u547D\u4EE4\u7F16\u8BD1\u6253\u5305\u3002  
2\u3001\u5C06\u6253\u5305\u540E\u7684\u6587\u4EF6\`.nuxt,static,package.json,package-lock.json,nuxt.config.js\`\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u9884\u8BBE\u76EE\u5F55\u4E0B\u3002**\u6CE8\u610F\uFF1A** \u5982\u679C\u5F00\u53D1\u4E86\`server\`(\u670D\u52A1\u7AEF)\u4EE3\u7801\uFF0C\u90E8\u7F72\u662F\`server\`\u6587\u4EF6\u76EE\u5F55\u4E5F\u9700\u8981\u4E0A\u4F20  
3\u3001\u5B89\u88C5\u4F9D\u8D56\u5305\uFF1A\`npm install\`  
5\u3001\u542F\u52A8\u9879\u76EE\uFF1A\`nohup npm run start &\`

\`\`\`bash
nohup npm run start &
\`\`\`

6\u3001\u67E5\u770B\u540E\u53F0\u8FD0\u884C\u8FDB\u7A0B

\`\`\`bash
# \u67E5\u770B\u540E\u53F0\u8FD0\u884C\u7684\u6240\u6709\u8FDB\u7A0B
jobs
# \u67E5\u770B\u540E\u53F0\u8FD0\u884C\u7684\u6240\u6709\u8FDB\u7A0B\uFF0C\u5305\u542B\u8FDB\u7A0Bpid
jobs -l
\u6216\u8005
ps -ef | grep npm
ps -ef | grep node
\`\`\`

\u540E\u53F0\u8FDB\u7A0B\u6B63\u5E38\u8FD0\u884C\u8868\u793A\u7A0B\u5E8F\u5DF2\u542F\u52A8\uFF0Cnohup \u9ED8\u8BA4\u65E5\u5FD7\u6587\u4EF6\u540D\u4E3A\`nohup.out\`,\u53EF\u4EE5\u901A\u8FC7\u6B64\u6587\u4EF6\u67E5\u770B\u9879\u76EE\u662F\u5426\u8FD0\u884C\u6B63\u5E38\uFF0C\u6216\u8005\u901A\u8FC7\`tail\`\u547D\u4EE4\u8DDF\u8E2A\u8FD0\u884C\u65E5\u5FD7\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A

## \u4E8C\u3001pm2 \u65B9\u5F0F\u90E8\u7F72

pm2 \u662F\u4E00\u4E2A\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177,\u53EF\u4EE5\u7528\u5B83\u6765\u7BA1\u7406\u4F60\u7684 node \u8FDB\u7A0B\uFF0C\u5E76\u67E5\u770B node \u8FDB\u7A0B\u7684\u72B6\u6001\uFF0C\u5F53\u7136\u4E5F\u652F\u6301\u6027\u80FD\u76D1\u63A7\uFF0C\u8FDB\u7A0B\u5B88\u62A4\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A[pm2 \u5B98\u7F51](https:#pm2.keymetrics.io/)

1\u3001\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u6587\u4EF6\`ecosystem.config.js\`,\u5E76\u6839\u636E\u81EA\u5DF1\u9879\u76EE\u60C5\u51B5\u8FDB\u884C\u914D\u7F6E\uFF1A

\`\`\`bash
#pm2\u5B9E\u4F8B\u914D\u7F6E\uFF1Aecosystem.config.js
module.exports = {
  apps: [
    {
      #\u5B9E\u4F8B\u540D\u79F0
      name: 'NuxtRmbRate',
      #\u90E8\u7F72\u6A21\u5F0F\uFF0C\u5355\u673A\uFF1A'fork',\u96C6\u7FA4\uFF1A'cluster'
      exec_mode: 'fork',
      #\u5B9E\u4F8B\u6570\u76EE
      instances: '1',
      #\u9700\u8981\u6267\u884C\u7684\u811A\u672C\u6587\u4EF6\uFF0C\u5BF9\u4E8E\u666E\u901A\u7684nuxt\u9879\u76EE(\u6CA1\u6709server)\uFF0C\u4E00\u822C\u91C7\u7528nuxt start\u547D\u4EE4\uFF0C\u7528pm2\u6267\u884C\u65F6\u9700\u8981\u4FEE\u6539\u6210./node-modules/nuxt/dist/bin/nuxt.js,\u5426\u5219\u62A5\u9519
      script: 'server/index.js',
      #\u5E94\u7528\u7A0B\u5E8F\u6240\u5728\u7684\u76EE\u5F55
      cwd: '',
      # \u4F20\u9012\u7ED9\u811A\u672C\u7684\u53C2\u6570\uFF0C\u4F8B\u5982nuxt start\u547D\u4EE4\uFF0C\u53C2\u6570\u4E3Astart
      args: '',
      # \u5B8C\u6574\u65E5\u5FD7\u8DEF\u5F84
      output: 'log/output.log',
      # \u9519\u8BEF\u65E5\u5FD7\u8DEF\u5F84
      error: 'log/error.log',
      # \u8BBF\u95EE\u65E5\u5FD7\u8DEF\u5F84
      log: 'log/access.log',
      # \u65E5\u5FD7\u683C\u5F0F
      log_type: 'json',
      # \u5408\u5E76\u65E5\u5FD7
      merge_logs: true,
      # \u65E5\u5FD7\u65E5\u671F\u683C\u5F0F
      log_date_format: 'YYYY-MM-DD HH:mm:ss',
       # \u6700\u5C0F\u8FD0\u884C\u65F6\u95F4\uFF0C\u8FD9\u91CC\u8BBE\u7F6E\u7684\u662F60s\u5373\u5982\u679C\u5E94\u7528\u7A0B\u5E8F\u5728* 60s\u5185\u9000\u51FA\uFF0Cpm2\u4F1A\u8BA4\u4E3A\u7A0B\u5E8F\u5F02\u5E38\u9000\u51FA\uFF0C\u6B64\u65F6\u89E6\u53D1\u91CD\u542F* max_restarts\u8BBE\u7F6E\u6570\u91CF\uFF0C\u5E94\u7528\u8FD0\u884C\u5C11\u4E8E\u65F6\u95F4\u88AB\u8BA4\u4E3A\u662F\u5F02\u5E38\u542F\u52A8
      min_uptime: '60s',
      # \u8BBE\u7F6E\u5E94\u7528\u7A0B\u5E8F\u5F02\u5E38\u9000\u51FA\u91CD\u542F\u7684\u6B21\u6570\uFF0C\u9ED8\u8BA415\u6B21\uFF08\u4ECE0\u5F00\u59CB\u8BA1\u6570\uFF09,\u6700\u5927\u5F02\u5E38\u91CD\u542F\u6B21\u6570\uFF0C\u5373\u5C0F\u4E8Emin_uptime\u8FD0\u884C\u65F6\u95F4\u91CD\u542F\u6B21\u6570\uFF1B
      max_restarts: 10,
      # \u542F\u7528/\u7981\u7528\u5E94\u7528\u7A0B\u5E8F\u5D29\u6E83\u6216\u9000\u51FA\u65F6\u81EA\u52A8\u91CD\u542F\uFF0C\u9ED8\u8BA4\u4E3Atrue, \u53D1\u751F\u5F02\u5E38\u7684\u60C5\u51B5\u4E0B\u81EA\u52A8\u91CD\u542F
      autorestart: true,
      # \u5F02\u5E38\u91CD\u542F\u60C5\u51B5\u4E0B\uFF0C\u5EF6\u65F6\u91CD\u542F\u65F6\u95F4
      restart_delay: 30,
      #\u751F\u4EA7\u73AF\u5883\u914D\u7F6E
      env_prod: {
        # \u73AF\u5883\u53C2\u6570\uFF0C\u5F53\u524D\u6307\u5B9A\u4E3A\u751F\u4EA7\u73AF\u5883
        NODE_ENV: 'production'
      }
    }
  ]
}
\`\`\`

\u5176\u4ED6\u914D\u7F6E\u9879\u5982\u4E0B\uFF1A

\`\`\`bash
name \u5E94\u7528\u8FDB\u7A0B\u540D\u79F0\uFF1B

script \u542F\u52A8\u811A\u672C\u8DEF\u5F84\uFF1B

cwd \u5E94\u7528\u542F\u52A8\u7684\u8DEF\u5F84\uFF0C\u5173\u4E8E script \u4E0E cwd \u7684\u533A\u522B\u4E3E\u4F8B\u8BF4\u660E\uFF1A\u5728/home/polo/\u76EE\u5F55\u4E0B\u8FD0\u884C/data/release/node/index.js\uFF0C\u6B64\u5904 script \u4E3A/data/release/node/index.js\uFF0Ccwd \u4E3A/home/polo/\uFF1B

args \u4F20\u9012\u7ED9\u811A\u672C\u7684\u53C2\u6570\uFF1B

interpreter \u6307\u5B9A\u7684\u811A\u672C\u89E3\u91CA\u5668\uFF1B

interpreter_args \u4F20\u9012\u7ED9\u89E3\u91CA\u5668\u7684\u53C2\u6570\uFF1B

instances \u5E94\u7528\u542F\u52A8\u5B9E\u4F8B\u4E2A\u6570\uFF0C\u4EC5\u5728 cluster \u6A21\u5F0F\u6709\u6548\uFF0C\u9ED8\u8BA4\u4E3A fork\uFF1B

exec_mode \u5E94\u7528\u542F\u52A8\u6A21\u5F0F\uFF0C\u652F\u6301 fork \u548C cluster \u6A21\u5F0F\uFF1B

watch \u76D1\u542C\u91CD\u542F\uFF0C\u542F\u7528\u60C5\u51B5\u4E0B\uFF0C\u6587\u4EF6\u5939\u6216\u5B50\u6587\u4EF6\u5939\u4E0B\u53D8\u5316\u5E94\u7528\u81EA\u52A8\u91CD\u542F\uFF1B

ignore_watch \u5FFD\u7565\u76D1\u542C\u7684\u6587\u4EF6\u5939\uFF0C\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\uFF1B

max_memory_restart \u6700\u5927\u5185\u5B58\u9650\u5236\u6570\uFF0C\u8D85\u51FA\u81EA\u52A8\u91CD\u542F\uFF1B

env \u73AF\u5883\u53D8\u91CF\uFF0Cobject \u7C7B\u578B\uFF0C\u5982{"NODE_ENV":"production", "ID": "42"}\uFF1B

log_date_format \u6307\u5B9A\u65E5\u5FD7\u65E5\u671F\u683C\u5F0F\uFF0C\u5982 YYYY-MM-DD HH:mm:ss\uFF1B

error_file \u8BB0\u5F55\u6807\u51C6\u9519\u8BEF\u6D41\uFF0C$HOME/.pm2/logs/XXXerr.log)\uFF0C\u4EE3\u7801\u9519\u8BEF\u53EF\u5728\u6B64\u6587\u4EF6\u67E5\u627E\uFF1B

out_file \u8BB0\u5F55\u6807\u51C6\u8F93\u51FA\u6D41\uFF0C$HOME/.pm2/logs/XXXout.log)\uFF0C\u5982\u5E94\u7528\u6253\u5370\u5927\u91CF\u7684\u6807\u51C6\u8F93\u51FA\uFF0C\u4F1A\u5BFC\u81F4 pm2 \u65E5\u5FD7\u8FC7\u5927\uFF1B

min_uptime \u5E94\u7528\u8FD0\u884C\u5C11\u4E8E\u65F6\u95F4\u88AB\u8BA4\u4E3A\u662F\u5F02\u5E38\u542F\u52A8\uFF1B

max_restarts \u6700\u5927\u5F02\u5E38\u91CD\u542F\u6B21\u6570\uFF0C\u5373\u5C0F\u4E8E min_uptime \u8FD0\u884C\u65F6\u95F4\u91CD\u542F\u6B21\u6570\uFF1B

autorestart \u9ED8\u8BA4\u4E3A true, \u53D1\u751F\u5F02\u5E38\u7684\u60C5\u51B5\u4E0B\u81EA\u52A8\u91CD\u542F\uFF1B

cron_restart crontab \u65F6\u95F4\u683C\u5F0F\u91CD\u542F\u5E94\u7528\uFF0C\u76EE\u524D\u53EA\u652F\u6301 cluster \u6A21\u5F0F\uFF1B

force \u9ED8\u8BA4 false\uFF0C\u5982\u679C true\uFF0C\u53EF\u4EE5\u91CD\u590D\u542F\u52A8\u4E00\u4E2A\u811A\u672C\u3002pm2 \u4E0D\u5EFA\u8BAE\u8FD9\u4E48\u505A\uFF1B

restart_delay \u5F02\u5E38\u91CD\u542F\u60C5\u51B5\u4E0B\uFF0C\u5EF6\u65F6\u91CD\u542F\u65F6\u95F4\uFF1B
\`\`\`

**\u6CE8\u610F\uFF1A** \u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\u65F6\u9700\u8981\u4EE5\`env_\`\u5F00\u5934\uFF0C\u8BE6\u7EC6\u53C2\u8003\uFF1A<https:#pm2.keymetrics.io/docs/usage/environment/>\u3002\u4F8B\u5982\u8BBE\u7F6E\u4E86\u73AF\u5883\u53D8\u91CF\`env_production\`\uFF0C\u91C7\u7528 pm2 \u542F\u52A8\u65F6\u5982\u4E0B\uFF1A\`pm2 start ecosystem.config.js --env production\`

2\u3001\u9879\u76EE\u6253\u5305\uFF1A\`npm run build\`

\`\`\`bash
npm run build
\`\`\`

3\u3001\u5C06\u6253\u5305\u540E\u7684\u6587\u4EF6\`.nuxt,static,package.json,package-lock.json,nuxt.config.js,ecosystem.config.js\`\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u9884\u8BBE\u76EE\u5F55\u4E0B,\u4F8B\u5982\uFF1A/opt/pm2\u3002 \u5982\u679C\u5F00\u53D1\u4E86\`server\`(\u670D\u52A1\u7AEF)\u4EE3\u7801\uFF0C\u90E8\u7F72\u662F\`server\`\u6587\u4EF6\u76EE\u5F55\u4E5F\u9700\u8981\u4E0A\u4F20  
4\u3001\u5B89\u88C5\u4F9D\u8D56\u5305\uFF1A\`npm install\`

\`\`\`bash
npm install
\`\`\`

5\u3001\u542F\u52A8\u9879\u76EE\uFF1A\`pm2 start ecosystem.config.js\`

\`\`\`bash
pm2 start ecosystem.config.js
\`\`\`

6\u3001\u67E5\u770B pm2 \u9879\u76EE\u5B9E\u4F8B\u5217\u8868\uFF1A\`pm2 list\`

\`\`\`bash
pm2 list
\`\`\`

\u7ED3\u679C\u5982\u4E0B\u56FE\uFF0Cstatus:online \u8868\u793A\u9879\u76EE\u6B63\u5728\u8FD0\u884C\u3002
![](https:#cdn.jsdelivr.net/gh/AnyFork/blog-images/markdown/202204071138505.png)

7\u3001\u67E5\u770B\u9879\u76EE\u8FD0\u884C\u65E5\u5FD7\uFF1A\`pm2 logs id\` \u6216\u8005\u67E5\u770B logs \u65E5\u5FD7\u6587\u4EF6\u67E5\u770B\u65E5\u5FD7\u3002

\`\`\`bash
pm2 logs 0
\`\`\`

8\u3001\u5176\u4ED6\u547D\u4EE4

\`\`\`bash
#\u505C\u6B62\u5B9E\u4F8B
pm2 stop id/\u5B9E\u4F8B\u540D\u79F0
#\u5220\u9664\u5B9E\u4F8B
pm2 delete id/\u5B9E\u4F8B\u540D\u79F0
#\u91CD\u542F\u5B9E\u4F8B
pm2 restart id/\u5B9E\u4F8B\u540D\u79F0
\`\`\`

\u5176\u4ED6\`pm2\`\u547D\u4EE4\u8BF7\u53C2\u8003\uFF1A[pm2 \u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177](/node/pm2.html)
`,contentRendered:`<p>\u2003Nust.js \u901A\u8FC7\u5728<code v-pre>nuxt.config.js</code>\u6587\u4EF6\u914D\u7F6E ssr\uFF1Atrue,\u5F00\u542F SSR \u652F\u6301\uFF0Cssr\uFF1Afalse \u5173\u95ED SSR \u652F\u6301,\u5373\u652F\u6301 SPA\uFF08\u539F\u5C5E\u6027<code v-pre>mode</code>\u5DF2\u8FC7\u671F\uFF09\uFF0C\u53EF\u4EE5\u6839\u636E\u9879\u76EE\u5B9E\u9645\u60C5\u51B5\u5F00\u542F ssr \u6216\u5173\u95ED ssr\u3002\u5982\u679C\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u9700\u8981\u670D\u52A1\u7AEF\u73AF\u5883\u652F\u6301\uFF0C\u5982\u679C\u6CA1\u6709\u5F00\u901A SSR \u529F\u80FD\uFF0C\u901A\u8FC7 npm run build \u8FDB\u884C\u6253\u5305\u540E\uFF0C\u9879\u76EE\u90E8\u7F72\u548C\u666E\u901A\u7684 vue \u9879\u76EE\u90E8\u7F72\u65B9\u5F0F\u4E00\u81F4\u3002\u5F53\u7136 nuxt \u53EF\u4EE5\u901A\u8FC7 npm run generate \u547D\u4EE4\u6253\u5305\u6210\u9759\u6001\u9875\u9762\uFF0C\u652F\u6301\u9759\u6001\u7AD9\u70B9\u90E8\u7F72\uFF0C\u4F46\u9759\u6001\u7AD9\u70B9\u4E0D\u652F\u6301 SSR\u3002</p>
<!-- more -->
<p>\u2003Nuxt.js \u9879\u76EE\u6253\u5305\u5B8C\u6210\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7\u547D\u4EE4<code v-pre>npm run start</code>\u8FDB\u884C\u542F\u52A8\u8FD0\u884C\uFF0C\u8FDB\u7A0B\u662F\u524D\u53F0\u8FD0\u884C\uFF0C\u4F1A\u5360\u7528\u5F53\u524D\u547D\u4EE4\u7A97\u53E3\uFF0C\u4F46\u5F53\u6211\u4EEC\u901A\u8FC7<code v-pre>Ctrl+C</code>\u5173\u95ED\u65F6\uFF0C\u5F53\u524D\u7A0B\u5E8F\u8FDB\u7A0B\u4F1A\u88AB\u5173\u95ED\uFF0C\u7A0B\u5E8F\u7EC8\u6B62\u8FD0\u884C\uFF0C\u6240\u4EE5\u9700\u8981\u540E\u53F0\u8FDB\u884C\u8FD0\u884C\u8FDB\u7A0B\u3002\u672C\u6587\u4E3B\u8981\u8BB2\u8FF0 Nuxt SSR \u9879\u76EE\u5E38\u7528\u7684 2 \u4E2D\u90E8\u7F72\u65B9\u5F0F\uFF1A<strong>nohup &amp;</strong> \u548C<strong>pm2</strong>\u3002\u5F53\u7136\u524D\u63D0\u662F\u9700\u8981\u5B89\u88C5 Node \u73AF\u5883\uFF0C\u5982\u679C\u672A\u5B89\u88C5 Node \u73AF\u5883\uFF0C\u8BF7\u53C2\u8003\uFF1A<a href="/node/" target="_blank" rel="noopener noreferrer">Node \u73AF\u5883\u5B89\u88C5<ExternalLinkIcon/></a>\u3002\u65E0\u8BBA\u90A3\u79CD\u65B9\u5F0F\u5747\u9700\u8981\u4E0A\u4F20\u4EE5\u4E0B\u6587\u4EF6\u81F3\u670D\u52A1\u5668\uFF1A<code v-pre>.nuxt,static,package.json,package-lock.json,nuxt.config.js</code></p>
<h2 id="\u4E00\u3001nohup-\u65B9\u5F0F\u540E\u53F0\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001nohup-\u65B9\u5F0F\u540E\u53F0\u8FD0\u884C" aria-hidden="true">#</a> \u4E00\u3001nohup \u65B9\u5F0F\u540E\u53F0\u8FD0\u884C</h2>
<p>\u2003nohup \u547D\u4EE4\u7684\u4E00\u822C\u683C\u5F0F\u4E3A:<code v-pre>nohup yourcommand &amp;</code>,\u6211\u4EEC\u901A\u8FC7\u542F\u52A8\u547D\u4EE4\uFF1A<code v-pre>nohup npm run start &amp;</code>\u6765\u540E\u53F0\u8FD0\u884C nuxt ssr \u9879\u76EE\u3002ohup \u547D\u4EE4\uFF1Anohup \u662F\u4E0D\u6302\u65AD\u7684\u610F\u601D( no hang up)\u3002\u5982\u679C\u4F60\u6B63\u5728\u8FD0\u884C\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C\u4E14\u4F60\u89C9\u5F97\u5728\u9000\u51FA\u5E10\u6237\u65F6\u8BE5\u8FDB\u7A0B\u8FD8\u4E0D\u4F1A\u7ED3\u675F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 nohup \u547D\u4EE4\u3002\u8BE5\u547D\u4EE4\u5FFD\u7565\u6240\u6709\u6302\uFF08SIGHUP\uFF09\u4FE1\u53F7\uFF0C\u53EF\u4EE5\u5728\u4F60\u9000\u51FA\u5E10\u6237/\u5173\u95ED\u7EC8\u7AEF\u4E4B\u540E\u7EE7\u7EED\u8FD0\u884C\u76F8\u5E94\u7684\u8FDB\u7A0B\u3002&amp;\u662F\u6307\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u5F53\u7528\u6237\u63A8\u51FA(\u6302\u8D77)\u7684\u65F6\u5019\uFF0C\u547D\u4EE4\u81EA\u52A8\u4E5F\u8DDF\u7740\u9000\u51FA. nohup \u4E0E&amp;\u7ED3\u5408\u8D77\u6765\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E0D\u6302\u65AD\u7684\u540E\u53F0\u8FD0\u884C\u3002\u76F8\u5173<code v-pre>nohup</code>\u547D\u4EE4\u7528\u6CD5\uFF0C\u8BF7\u53C2\u8003\uFF1A<a href="/node/nohup.html" target="_blank" rel="noopener noreferrer">nohup \u4E0D\u6302\u65AD\u8FD0\u884C<ExternalLinkIcon/></a></p>
<p>1\u3001\u901A\u8FC7<code v-pre>npm run build</code>\u547D\u4EE4\u7F16\u8BD1\u6253\u5305\u3002<br>
2\u3001\u5C06\u6253\u5305\u540E\u7684\u6587\u4EF6<code v-pre>.nuxt,static,package.json,package-lock.json,nuxt.config.js</code>\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u9884\u8BBE\u76EE\u5F55\u4E0B\u3002<strong>\u6CE8\u610F\uFF1A</strong> \u5982\u679C\u5F00\u53D1\u4E86<code v-pre>server</code>(\u670D\u52A1\u7AEF)\u4EE3\u7801\uFF0C\u90E8\u7F72\u662F<code v-pre>server</code>\u6587\u4EF6\u76EE\u5F55\u4E5F\u9700\u8981\u4E0A\u4F20<br>
3\u3001\u5B89\u88C5\u4F9D\u8D56\u5305\uFF1A<code v-pre>npm install</code><br>
5\u3001\u542F\u52A8\u9879\u76EE\uFF1A<code v-pre>nohup npm run start &amp;</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">nohup</span> <span class="token function">npm</span> run start <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6\u3001\u67E5\u770B\u540E\u53F0\u8FD0\u884C\u8FDB\u7A0B</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u67E5\u770B\u540E\u53F0\u8FD0\u884C\u7684\u6240\u6709\u8FDB\u7A0B</span>
<span class="token function">jobs</span>
<span class="token comment"># \u67E5\u770B\u540E\u53F0\u8FD0\u884C\u7684\u6240\u6709\u8FDB\u7A0B\uFF0C\u5305\u542B\u8FDB\u7A0Bpid</span>
<span class="token function">jobs</span> <span class="token parameter variable">-l</span>
\u6216\u8005
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">npm</span>
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">node</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u540E\u53F0\u8FDB\u7A0B\u6B63\u5E38\u8FD0\u884C\u8868\u793A\u7A0B\u5E8F\u5DF2\u542F\u52A8\uFF0Cnohup \u9ED8\u8BA4\u65E5\u5FD7\u6587\u4EF6\u540D\u4E3A<code v-pre>nohup.out</code>,\u53EF\u4EE5\u901A\u8FC7\u6B64\u6587\u4EF6\u67E5\u770B\u9879\u76EE\u662F\u5426\u8FD0\u884C\u6B63\u5E38\uFF0C\u6216\u8005\u901A\u8FC7<code v-pre>tail</code>\u547D\u4EE4\u8DDF\u8E2A\u8FD0\u884C\u65E5\u5FD7\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A</p>
<h2 id="\u4E8C\u3001pm2-\u65B9\u5F0F\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001pm2-\u65B9\u5F0F\u90E8\u7F72" aria-hidden="true">#</a> \u4E8C\u3001pm2 \u65B9\u5F0F\u90E8\u7F72</h2>
<p>pm2 \u662F\u4E00\u4E2A\u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177,\u53EF\u4EE5\u7528\u5B83\u6765\u7BA1\u7406\u4F60\u7684 node \u8FDB\u7A0B\uFF0C\u5E76\u67E5\u770B node \u8FDB\u7A0B\u7684\u72B6\u6001\uFF0C\u5F53\u7136\u4E5F\u652F\u6301\u6027\u80FD\u76D1\u63A7\uFF0C\u8FDB\u7A0B\u5B88\u62A4\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<RouterLink to="/posts/nuxt/https:#pm2.keymetrics.io/">pm2 \u5B98\u7F51</RouterLink></p>
<p>1\u3001\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u6587\u4EF6<code v-pre>ecosystem.config.js</code>,\u5E76\u6839\u636E\u81EA\u5DF1\u9879\u76EE\u60C5\u51B5\u8FDB\u884C\u914D\u7F6E\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#pm2\u5B9E\u4F8B\u914D\u7F6E\uFF1Aecosystem.config.js</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  apps: <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">#\u5B9E\u4F8B\u540D\u79F0</span>
      name: <span class="token string">'NuxtRmbRate'</span>,
      <span class="token comment">#\u90E8\u7F72\u6A21\u5F0F\uFF0C\u5355\u673A\uFF1A'fork',\u96C6\u7FA4\uFF1A'cluster'</span>
      exec_mode: <span class="token string">'fork'</span>,
      <span class="token comment">#\u5B9E\u4F8B\u6570\u76EE</span>
      instances: <span class="token string">'1'</span>,
      <span class="token comment">#\u9700\u8981\u6267\u884C\u7684\u811A\u672C\u6587\u4EF6\uFF0C\u5BF9\u4E8E\u666E\u901A\u7684nuxt\u9879\u76EE(\u6CA1\u6709server)\uFF0C\u4E00\u822C\u91C7\u7528nuxt start\u547D\u4EE4\uFF0C\u7528pm2\u6267\u884C\u65F6\u9700\u8981\u4FEE\u6539\u6210./node-modules/nuxt/dist/bin/nuxt.js,\u5426\u5219\u62A5\u9519</span>
      script: <span class="token string">'server/index.js'</span>,
      <span class="token comment">#\u5E94\u7528\u7A0B\u5E8F\u6240\u5728\u7684\u76EE\u5F55</span>
      cwd: <span class="token string">''</span>,
      <span class="token comment"># \u4F20\u9012\u7ED9\u811A\u672C\u7684\u53C2\u6570\uFF0C\u4F8B\u5982nuxt start\u547D\u4EE4\uFF0C\u53C2\u6570\u4E3Astart</span>
      args: <span class="token string">''</span>,
      <span class="token comment"># \u5B8C\u6574\u65E5\u5FD7\u8DEF\u5F84</span>
      output: <span class="token string">'log/output.log'</span>,
      <span class="token comment"># \u9519\u8BEF\u65E5\u5FD7\u8DEF\u5F84</span>
      error: <span class="token string">'log/error.log'</span>,
      <span class="token comment"># \u8BBF\u95EE\u65E5\u5FD7\u8DEF\u5F84</span>
      log: <span class="token string">'log/access.log'</span>,
      <span class="token comment"># \u65E5\u5FD7\u683C\u5F0F</span>
      log_type: <span class="token string">'json'</span>,
      <span class="token comment"># \u5408\u5E76\u65E5\u5FD7</span>
      merge_logs: true,
      <span class="token comment"># \u65E5\u5FD7\u65E5\u671F\u683C\u5F0F</span>
      log_date_format: <span class="token string">'YYYY-MM-DD HH:mm:ss'</span>,
       <span class="token comment"># \u6700\u5C0F\u8FD0\u884C\u65F6\u95F4\uFF0C\u8FD9\u91CC\u8BBE\u7F6E\u7684\u662F60s\u5373\u5982\u679C\u5E94\u7528\u7A0B\u5E8F\u5728* 60s\u5185\u9000\u51FA\uFF0Cpm2\u4F1A\u8BA4\u4E3A\u7A0B\u5E8F\u5F02\u5E38\u9000\u51FA\uFF0C\u6B64\u65F6\u89E6\u53D1\u91CD\u542F* max_restarts\u8BBE\u7F6E\u6570\u91CF\uFF0C\u5E94\u7528\u8FD0\u884C\u5C11\u4E8E\u65F6\u95F4\u88AB\u8BA4\u4E3A\u662F\u5F02\u5E38\u542F\u52A8</span>
      min_uptime: <span class="token string">'60s'</span>,
      <span class="token comment"># \u8BBE\u7F6E\u5E94\u7528\u7A0B\u5E8F\u5F02\u5E38\u9000\u51FA\u91CD\u542F\u7684\u6B21\u6570\uFF0C\u9ED8\u8BA415\u6B21\uFF08\u4ECE0\u5F00\u59CB\u8BA1\u6570\uFF09,\u6700\u5927\u5F02\u5E38\u91CD\u542F\u6B21\u6570\uFF0C\u5373\u5C0F\u4E8Emin_uptime\u8FD0\u884C\u65F6\u95F4\u91CD\u542F\u6B21\u6570\uFF1B</span>
      max_restarts: <span class="token number">10</span>,
      <span class="token comment"># \u542F\u7528/\u7981\u7528\u5E94\u7528\u7A0B\u5E8F\u5D29\u6E83\u6216\u9000\u51FA\u65F6\u81EA\u52A8\u91CD\u542F\uFF0C\u9ED8\u8BA4\u4E3Atrue, \u53D1\u751F\u5F02\u5E38\u7684\u60C5\u51B5\u4E0B\u81EA\u52A8\u91CD\u542F</span>
      autorestart: true,
      <span class="token comment"># \u5F02\u5E38\u91CD\u542F\u60C5\u51B5\u4E0B\uFF0C\u5EF6\u65F6\u91CD\u542F\u65F6\u95F4</span>
      restart_delay: <span class="token number">30</span>,
      <span class="token comment">#\u751F\u4EA7\u73AF\u5883\u914D\u7F6E</span>
      env_prod: <span class="token punctuation">{</span>
        <span class="token comment"># \u73AF\u5883\u53C2\u6570\uFF0C\u5F53\u524D\u6307\u5B9A\u4E3A\u751F\u4EA7\u73AF\u5883</span>
        NODE_ENV: <span class="token string">'production'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4ED6\u914D\u7F6E\u9879\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>name \u5E94\u7528\u8FDB\u7A0B\u540D\u79F0\uFF1B

script \u542F\u52A8\u811A\u672C\u8DEF\u5F84\uFF1B

cwd \u5E94\u7528\u542F\u52A8\u7684\u8DEF\u5F84\uFF0C\u5173\u4E8E script \u4E0E cwd \u7684\u533A\u522B\u4E3E\u4F8B\u8BF4\u660E\uFF1A\u5728/home/polo/\u76EE\u5F55\u4E0B\u8FD0\u884C/data/release/node/index.js\uFF0C\u6B64\u5904 script \u4E3A/data/release/node/index.js\uFF0Ccwd \u4E3A/home/polo/\uFF1B

args \u4F20\u9012\u7ED9\u811A\u672C\u7684\u53C2\u6570\uFF1B

interpreter \u6307\u5B9A\u7684\u811A\u672C\u89E3\u91CA\u5668\uFF1B

interpreter_args \u4F20\u9012\u7ED9\u89E3\u91CA\u5668\u7684\u53C2\u6570\uFF1B

instances \u5E94\u7528\u542F\u52A8\u5B9E\u4F8B\u4E2A\u6570\uFF0C\u4EC5\u5728 cluster \u6A21\u5F0F\u6709\u6548\uFF0C\u9ED8\u8BA4\u4E3A fork\uFF1B

exec_mode \u5E94\u7528\u542F\u52A8\u6A21\u5F0F\uFF0C\u652F\u6301 fork \u548C cluster \u6A21\u5F0F\uFF1B

<span class="token function">watch</span> \u76D1\u542C\u91CD\u542F\uFF0C\u542F\u7528\u60C5\u51B5\u4E0B\uFF0C\u6587\u4EF6\u5939\u6216\u5B50\u6587\u4EF6\u5939\u4E0B\u53D8\u5316\u5E94\u7528\u81EA\u52A8\u91CD\u542F\uFF1B

ignore_watch \u5FFD\u7565\u76D1\u542C\u7684\u6587\u4EF6\u5939\uFF0C\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\uFF1B

max_memory_restart \u6700\u5927\u5185\u5B58\u9650\u5236\u6570\uFF0C\u8D85\u51FA\u81EA\u52A8\u91CD\u542F\uFF1B

<span class="token function">env</span> \u73AF\u5883\u53D8\u91CF\uFF0Cobject \u7C7B\u578B\uFF0C\u5982<span class="token punctuation">{</span><span class="token string">"NODE_ENV"</span><span class="token builtin class-name">:</span><span class="token string">"production"</span>, <span class="token string">"ID"</span><span class="token builtin class-name">:</span> <span class="token string">"42"</span><span class="token punctuation">}</span>\uFF1B

log_date_format \u6307\u5B9A\u65E5\u5FD7\u65E5\u671F\u683C\u5F0F\uFF0C\u5982 YYYY-MM-DD HH:mm:ss\uFF1B

error_file \u8BB0\u5F55\u6807\u51C6\u9519\u8BEF\u6D41\uFF0C<span class="token environment constant">$HOME</span>/.pm2/logs/XXXerr.log<span class="token punctuation">)</span>\uFF0C\u4EE3\u7801\u9519\u8BEF\u53EF\u5728\u6B64\u6587\u4EF6\u67E5\u627E\uFF1B

out_file \u8BB0\u5F55\u6807\u51C6\u8F93\u51FA\u6D41\uFF0C<span class="token environment constant">$HOME</span>/.pm2/logs/XXXout.log<span class="token punctuation">)</span>\uFF0C\u5982\u5E94\u7528\u6253\u5370\u5927\u91CF\u7684\u6807\u51C6\u8F93\u51FA\uFF0C\u4F1A\u5BFC\u81F4 pm2 \u65E5\u5FD7\u8FC7\u5927\uFF1B

min_uptime \u5E94\u7528\u8FD0\u884C\u5C11\u4E8E\u65F6\u95F4\u88AB\u8BA4\u4E3A\u662F\u5F02\u5E38\u542F\u52A8\uFF1B

max_restarts \u6700\u5927\u5F02\u5E38\u91CD\u542F\u6B21\u6570\uFF0C\u5373\u5C0F\u4E8E min_uptime \u8FD0\u884C\u65F6\u95F4\u91CD\u542F\u6B21\u6570\uFF1B

autorestart \u9ED8\u8BA4\u4E3A true, \u53D1\u751F\u5F02\u5E38\u7684\u60C5\u51B5\u4E0B\u81EA\u52A8\u91CD\u542F\uFF1B

cron_restart <span class="token function">crontab</span> \u65F6\u95F4\u683C\u5F0F\u91CD\u542F\u5E94\u7528\uFF0C\u76EE\u524D\u53EA\u652F\u6301 cluster \u6A21\u5F0F\uFF1B

force \u9ED8\u8BA4 false\uFF0C\u5982\u679C true\uFF0C\u53EF\u4EE5\u91CD\u590D\u542F\u52A8\u4E00\u4E2A\u811A\u672C\u3002pm2 \u4E0D\u5EFA\u8BAE\u8FD9\u4E48\u505A\uFF1B

restart_delay \u5F02\u5E38\u91CD\u542F\u60C5\u51B5\u4E0B\uFF0C\u5EF6\u65F6\u91CD\u542F\u65F6\u95F4\uFF1B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F\uFF1A</strong> \u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\u65F6\u9700\u8981\u4EE5<code v-pre>env_</code>\u5F00\u5934\uFF0C\u8BE6\u7EC6\u53C2\u8003\uFF1A<RouterLink to="/posts/nuxt/https:#pm2.keymetrics.io/docs/usage/environment/">https:#pm2.keymetrics.io/docs/usage/environment/</RouterLink>\u3002\u4F8B\u5982\u8BBE\u7F6E\u4E86\u73AF\u5883\u53D8\u91CF<code v-pre>env_production</code>\uFF0C\u91C7\u7528 pm2 \u542F\u52A8\u65F6\u5982\u4E0B\uFF1A<code v-pre>pm2 start ecosystem.config.js --env production</code></p>
<p>2\u3001\u9879\u76EE\u6253\u5305\uFF1A<code v-pre>npm run build</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3\u3001\u5C06\u6253\u5305\u540E\u7684\u6587\u4EF6<code v-pre>.nuxt,static,package.json,package-lock.json,nuxt.config.js,ecosystem.config.js</code>\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u9884\u8BBE\u76EE\u5F55\u4E0B,\u4F8B\u5982\uFF1A/opt/pm2\u3002 \u5982\u679C\u5F00\u53D1\u4E86<code v-pre>server</code>(\u670D\u52A1\u7AEF)\u4EE3\u7801\uFF0C\u90E8\u7F72\u662F<code v-pre>server</code>\u6587\u4EF6\u76EE\u5F55\u4E5F\u9700\u8981\u4E0A\u4F20<br>
4\u3001\u5B89\u88C5\u4F9D\u8D56\u5305\uFF1A<code v-pre>npm install</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>5\u3001\u542F\u52A8\u9879\u76EE\uFF1A<code v-pre>pm2 start ecosystem.config.js</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>pm2 start ecosystem.config.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6\u3001\u67E5\u770B pm2 \u9879\u76EE\u5B9E\u4F8B\u5217\u8868\uFF1A<code v-pre>pm2 list</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>pm2 list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7ED3\u679C\u5982\u4E0B\u56FE\uFF0Cstatus:online \u8868\u793A\u9879\u76EE\u6B63\u5728\u8FD0\u884C\u3002
<img src="https:#cdn.jsdelivr.net/gh/AnyFork/blog-images/markdown/202204071138505.png" alt=""></p>
<p>7\u3001\u67E5\u770B\u9879\u76EE\u8FD0\u884C\u65E5\u5FD7\uFF1A<code v-pre>pm2 logs id</code> \u6216\u8005\u67E5\u770B logs \u65E5\u5FD7\u6587\u4EF6\u67E5\u770B\u65E5\u5FD7\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>pm2 logs <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>8\u3001\u5176\u4ED6\u547D\u4EE4</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u505C\u6B62\u5B9E\u4F8B</span>
pm2 stop id/\u5B9E\u4F8B\u540D\u79F0
<span class="token comment">#\u5220\u9664\u5B9E\u4F8B</span>
pm2 delete id/\u5B9E\u4F8B\u540D\u79F0
<span class="token comment">#\u91CD\u542F\u5B9E\u4F8B</span>
pm2 restart id/\u5B9E\u4F8B\u540D\u79F0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4ED6<code v-pre>pm2</code>\u547D\u4EE4\u8BF7\u53C2\u8003\uFF1A<a href="/node/pm2.html" target="_blank" rel="noopener noreferrer">pm2 \u8FDB\u7A0B\u7BA1\u7406\u5DE5\u5177<ExternalLinkIcon/></a></p>
`,date:"2022-04-07",deps:[],links:[{raw:"https:#pm2.keymetrics.io/",relative:"posts/nuxt/https:#pm2.keymetrics.io/",absolute:"/blog-docs/posts/nuxt/https:#pm2.keymetrics.io/"},{raw:"https:#pm2.keymetrics.io/docs/usage/environment/",relative:"posts/nuxt/https:#pm2.keymetrics.io/docs/usage/environment/",absolute:"/blog-docs/posts/nuxt/https:#pm2.keymetrics.io/docs/usage/environment/"}],pathInferred:"/posts/nuxt/deploy.html",pathLocale:"/",permalink:null,routeMeta:{title:"Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848"},sfcBlocks:[],slug:"deploy",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/nuxt/deploy.md",filePathRelative:"posts/nuxt/deploy.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/nuxt/deploy.html.vue",componentFilePathRelative:"pages/posts/nuxt/deploy.html.vue",componentFileChunkName:"v-2e69883b",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/nuxt/deploy.html.js",dataFilePathRelative:"pages/posts/nuxt/deploy.html.js",dataFileChunkName:"v-2e69883b",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/nuxt/deploy.html",htmlFilePathRelative:"posts/nuxt/deploy.html"},title:"Nuxt\u9879\u76EE\u90E8\u7F72\u65B9\u6848"},["/posts/nuxt/deploy","/posts/nuxt/deploy.md"]],["v-cc63cd18","/posts/other/algoliaSearch.html",{_blog:{data:{key:"v-cc63cd18",path:"/posts/other/algoliaSearch.html",title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",lang:"zh-CN",frontmatter:{title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",date:"2022-07-22T09:07:35.000Z",description:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",tag:["Algolia"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210908451.jpg",sticky:3,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/algoliaSearch.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"}],["meta",{property:"og:description",content:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Algolia"}],["meta",{property:"article:published_time",content:"2022-07-22T09:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Algolia \u662F\u4E00\u4E2A\u6570\u636E\u5E93\u5B9E\u65F6\u641C\u7D22\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u6BEB\u79D2\u7EA7\u7684\u6570\u636E\u5E93\u641C\u7D22\u670D\u52A1\uFF0C\u5E76\u4E14\u5176\u670D\u52A1\u80FD\u4EE5 API \u7684\u5F62\u5F0F\u65B9\u4FBF\u5730\u5E03\u5C40\u5230\u7F51\u9875\u3001\u5BA2\u6237\u7AEF\u3001APP \u7B49\u591A\u79CD\u573A\u666F\u3002Algolia \u7684\u670D\u52A1\u652F\u6301\u591A\u79CD\u8BED\u8A00\u652F\u6301 Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u5177\u5907\u5173\u952E\u5B57\u8F93\u5165\u667A\u80FD\u5BB9\u9519\u529F\u80FD\uFF0C\u5E76\u63D0\u4F9B\u6709\u641C\u7D22\u6392\u540D\u914D\u7F6E\uFF0C\u5E76\u5177\u6709\u5B9E\u65F6\u5FEB\u901F\u7684\u7279\u70B9\uFF08Algolia \u5728\u5168\u7403 12 \u4E2A\u6570\u636E\u4E2D\u5FC3\u5747\u6709\u90E8\u7F72\uFF09\u3002Algolia \u8FD8\u4E3A\u79FB\u52A8\u8BBE\u5907\u63D0\u4F9B\u4E86\u79BB\u7EBF\u641C\u7D22\u5F15\u64CE\uFF0C\u5176 C++ SDK \u53EF\u4EE5\u5D4C\u5165\u5230\u5E94\u7528\u670D\u52A1\u5668\u7AEF\uFF0C\u8FD9\u6837\u5373\u4FBF\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u5E94\u7528\u4E5F\u80FD\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002</p>
`,headers:[{level:2,title:"\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528 Algolia?",slug:"\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528-algolia",children:[]},{level:2,title:"\u5982\u4F55\u4F7F\u7528 Algolia?",slug:"\u5982\u4F55\u4F7F\u7528-algolia",children:[]},{level:2,title:"\u6570\u636E\u722C\u53D6",slug:"\u6570\u636E\u722C\u53D6",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/algoliaSearch.md",readingTime:{minutes:6.14,words:1841},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/algoliaSearch.html`},key:"v-cc63cd18",path:"/posts/other/algoliaSearch.html",title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",lang:"zh-CN",frontmatter:{title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",date:"2022-07-22T09:07:35.000Z",description:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22",tag:["Algolia"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210908451.jpg",sticky:3,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/algoliaSearch.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"}],["meta",{property:"og:description",content:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Algolia"}],["meta",{property:"article:published_time",content:"2022-07-22T09:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Algolia \u662F\u4E00\u4E2A\u6570\u636E\u5E93\u5B9E\u65F6\u641C\u7D22\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u6BEB\u79D2\u7EA7\u7684\u6570\u636E\u5E93\u641C\u7D22\u670D\u52A1\uFF0C\u5E76\u4E14\u5176\u670D\u52A1\u80FD\u4EE5 API \u7684\u5F62\u5F0F\u65B9\u4FBF\u5730\u5E03\u5C40\u5230\u7F51\u9875\u3001\u5BA2\u6237\u7AEF\u3001APP \u7B49\u591A\u79CD\u573A\u666F\u3002Algolia \u7684\u670D\u52A1\u652F\u6301\u591A\u79CD\u8BED\u8A00\u652F\u6301 Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u5177\u5907\u5173\u952E\u5B57\u8F93\u5165\u667A\u80FD\u5BB9\u9519\u529F\u80FD\uFF0C\u5E76\u63D0\u4F9B\u6709\u641C\u7D22\u6392\u540D\u914D\u7F6E\uFF0C\u5E76\u5177\u6709\u5B9E\u65F6\u5FEB\u901F\u7684\u7279\u70B9\uFF08Algolia \u5728\u5168\u7403 12 \u4E2A\u6570\u636E\u4E2D\u5FC3\u5747\u6709\u90E8\u7F72\uFF09\u3002Algolia \u8FD8\u4E3A\u79FB\u52A8\u8BBE\u5907\u63D0\u4F9B\u4E86\u79BB\u7EBF\u641C\u7D22\u5F15\u64CE\uFF0C\u5176 C++ SDK \u53EF\u4EE5\u5D4C\u5165\u5230\u5E94\u7528\u670D\u52A1\u5668\u7AEF\uFF0C\u8FD9\u6837\u5373\u4FBF\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u5E94\u7528\u4E5F\u80FD\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002</p>
`,headers:[{level:2,title:"\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528 Algolia?",slug:"\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528-algolia",children:[]},{level:2,title:"\u5982\u4F55\u4F7F\u7528 Algolia?",slug:"\u5982\u4F55\u4F7F\u7528-algolia",children:[]},{level:2,title:"\u6570\u636E\u722C\u53D6",slug:"\u6570\u636E\u722C\u53D6",children:[]}],content:`---
title: VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22
date: 2022-07-22 9:07:35
description: VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22
tag:
  - Algolia
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210908451.jpg
sticky: 3
---

&emsp;Algolia \u662F\u4E00\u4E2A\u6570\u636E\u5E93\u5B9E\u65F6\u641C\u7D22\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u6BEB\u79D2\u7EA7\u7684\u6570\u636E\u5E93\u641C\u7D22\u670D\u52A1\uFF0C\u5E76\u4E14\u5176\u670D\u52A1\u80FD\u4EE5 API \u7684\u5F62\u5F0F\u65B9\u4FBF\u5730\u5E03\u5C40\u5230\u7F51\u9875\u3001\u5BA2\u6237\u7AEF\u3001APP \u7B49\u591A\u79CD\u573A\u666F\u3002Algolia \u7684\u670D\u52A1\u652F\u6301\u591A\u79CD\u8BED\u8A00\u652F\u6301 Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u5177\u5907\u5173\u952E\u5B57\u8F93\u5165\u667A\u80FD\u5BB9\u9519\u529F\u80FD\uFF0C\u5E76\u63D0\u4F9B\u6709\u641C\u7D22\u6392\u540D\u914D\u7F6E\uFF0C\u5E76\u5177\u6709\u5B9E\u65F6\u5FEB\u901F\u7684\u7279\u70B9\uFF08Algolia \u5728\u5168\u7403 12 \u4E2A\u6570\u636E\u4E2D\u5FC3\u5747\u6709\u90E8\u7F72\uFF09\u3002Algolia \u8FD8\u4E3A\u79FB\u52A8\u8BBE\u5907\u63D0\u4F9B\u4E86\u79BB\u7EBF\u641C\u7D22\u5F15\u64CE\uFF0C\u5176 C++ SDK \u53EF\u4EE5\u5D4C\u5165\u5230\u5E94\u7528\u670D\u52A1\u5668\u7AEF\uFF0C\u8FD9\u6837\u5373\u4FBF\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u5E94\u7528\u4E5F\u80FD\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002

<!-- more -->

:::tip
1 Algolia \u7BA1\u7406\u540E\u53F0\u5730\u5740\uFF1A  
<https://www.algolia.com/apps/09V7PWK61N/explorer/browse/anyfork?searchMode=search>  
2 Algolia \u722C\u866B\u540E\u53F0\u5730\u5740\uFF1A  
<https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview>  
3 Algolia GitHub \u5730\u5740:  
<https://github.com/algolia/docsearch>
:::

## \u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528 Algolia?

- 1\u3001\u7531\u4E8E VuePress \u7684\u5185\u7F6E\u641C\u7D22\u53EA\u4F1A\u4E3A\u9875\u9762\u7684\u6807\u9898\u3001h2 \u3001 h3 \u4EE5\u53CA tags \u6784\u5EFA\u641C\u7D22\u7D22\u5F15\u3002\u5982\u679C\u4F60\u9700\u8981\u5168\u6587\u641C\u7D22\uFF0C\u5185\u7F6E\u641C\u7D22\u65E0\u6CD5\u5B9E\u73B0\uFF0C\u53EF\u5219\u4EE5\u4F7F\u7528 Algolia \u641C\u7D22\u3002
- 2\u3001\u4F7F\u7528 Algolia \u641C\u7D22\u6700\u5927\u7684\u597D\u5904\u5C31\u662F\u65B9\u4FBF\uFF0C\u5B83\u4F1A\u81EA\u52A8\u722C\u53D6\u7F51\u7AD9\u7684\u9875\u9762\u5185\u5BB9\u5E76\u6784\u5EFA\u7D22\u5F15\uFF0C\u4F60\u53EA\u7528\u7533\u8BF7\u4E00\u4E2A Algolia \u670D\u52A1\uFF0C\u5728\u7F51\u7AD9\u4E0A\u6DFB\u52A0\u4E00\u4E9B\u4EE3\u7801\uFF0C\u5C31\u50CF\u6DFB\u52A0\u7EDF\u8BA1\u4EE3\u7801\u4E00\u6837\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u5B9E\u73B0\u4E00\u4E2A\u5168\u6587\u641C\u7D22\u529F\u80FD\uFF0C\u64CD\u4F5C\u7B80\u5355\u8FD8\u65B9\u4FBF\uFF0C\u5BB9\u9519\u7387\u5F88\u9AD8\u3002
- 3\u3001\u4F7F\u7528\u8303\u56F4\u5E7F\uFF0C\u76EE\u524D\u5F88\u591A\u5E94\u7528\u7684\u5B98\u65B9\u6587\u6863(\u4F8B\u5982\uFF1Avue.js,vite,vuepress \u7B49)\u5747\u4F7F\u7528 Algolia \u8FDB\u884C\u5168\u6587\u641C\u7D22\uFF0C\u800C\u4E14\u652F\u6301\u591A\u79CD Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u81EA\u52A8\u548C\u624B\u52A8\u722C\u53D6\u7D22\u5F15\u3002\u5C55\u793A\u6548\u679C\u5982\u4E0B:![\u914D\u7F6E\u9875\u9762](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210920996.png)

## \u5982\u4F55\u4F7F\u7528 Algolia?

- 1\u3001**\u641C\u7D22\u670D\u52A1\u7533\u8BF7**

  - 1\u3001\u7533\u8BF7\u5730\u5740\uFF1A<https://docsearch.algolia.com/apply/>
  - 2\u3001\u586B\u5199\u5E94\u7528 Algolia \u641C\u7D22\u670D\u52A1\u7684\u7AD9\u70B9\u5730\u5740\uFF0C\u80FD\u591F\u5BF9\u5916\u8BBF\u95EE\u3002
  - 3\u3001\u586B\u5199\u4E2A\u4EBA\u90AE\u7BB1\uFF0C\u7533\u8BF7\u901A\u8FC7\u540E\u4F1A\u6536\u5230\u56DE\u590D\u90AE\u4EF6\uFF0C\u5305\u542B\u5F00\u901A\u7684\u5E94\u7528\u4FE1\u606F\u4EE5\u53CA\u8FDB\u884C\u540E\u7EED\u5176\u4ED6\u64CD\u4F5C\u7684\u8BF4\u660E\u3002
  - 4\u3001\u586B\u5199\u516C\u5F00\u7684\u4ED3\u5E93\u5730\u5740\uFF0C\u6B64\u4ED3\u5E93\u5B58\u653E\u7AD9\u70B9\u6E90\u7801\u3002

  \u586B\u5B8C\u4E4B\u540E\u4E00\u5468\u4E4B\u5185\uFF0C\u6536\u5230\u56DE\u590D\u90AE\u4EF6\uFF0C\u6309\u7167\u90AE\u4EF6\u5185\u5BB9\u8FDB\u884C\u64CD\u4F5C\u3002\u8BB0\u4F4F\u4E00\u5B9A\u8981\u56DE\u590D\u90AE\u4EF6\uFF0C\u544A\u8BC9\u81EA\u5DF1\u5C31\u662F\u7F51\u7AD9\u7684\u7EF4\u62A4\u8005\uFF0C\u5E76\u4E14\u53EF\u4EE5\u4FEE\u6539\u4EE3\u7801\uFF0C\u5426\u5219\u8D85\u8FC7\u65F6\u95F4\u4E0D\u56DE\u590D\uFF0C\u7533\u8BF7\u7684\u5E94\u7528\u4F1A\u88AB\u81EA\u52A8\u9500\u6BC1\u3002

- 2\u3001**\u4EE3\u7801\u914D\u7F6E**

  - 1\u3001\u5982\u679C\u4F60\u7528\u7684\u662F\`VuePress 1.x\` \u7684\u9ED8\u8BA4\u4E3B\u9898\uFF0CVuePress \u76F4\u63A5\u63D0\u4F9B\u4E86 themeConfig.algolia \u9009\u9879\u6765\u7528 Algolia \u641C\u7D22\u66FF\u6362\u5185\u7F6E\u7684\u641C\u7D22\u6846\uFF0C\u4F60\u53EA\u7528\u5982\u6B64\u7B80\u5355\u7684\u914D\u7F6E\u5373\u53EF\u5B9E\u73B0\u5168\u6587\u641C\u7D22\u3002

  \`\`\`js
  // .vuepress/config.js
  module.exports = {
    themeConfig: {
      algolia: {
        apiKey: '<API_KEY>',
        indexName: '<INDEX_NAME>'
        // \u5982\u679C Algolia \u6CA1\u6709\u4E3A\u4F60\u63D0\u4F9B \`appId\` \uFF0C\u4F7F\u7528 \`BH4D9OD16A\` \u6216\u8005\u79FB\u9664\u8BE5\u914D\u7F6E\u9879
        appId: '<APP_ID>',
      }
    }
  }

  \`\`\`

  - 2\u3001\u5982\u679C\u4F60\u7528\u7684\u662F\`VuePress 2.x\` \u7684\u9ED8\u8BA4\u4E3B\u9898\u6216\u8005\u7EE7\u627F\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u53EF\u4EE5\u901A\u8FC7\`DocSearch\`\u63D2\u4EF6\u8FDB\u884C\u914D\u7F6E\uFF0C\u63D2\u4EF6\u914D\u7F6E\u5B8C\u6BD5\u4EE5\u540E\uFF0C\u5728\`Navbar\`\u4E2D\u81EA\u52A8\u751F\u6210\u641C\u7D22\u6846\u3002\`DocSearch\`\u63D2\u4EF6\u914D\u7F6E\u5982\u4E0B\u3002

  \`\`\`js
  // .vuepress/config.js
  import { docsearchPlugin } from '@vuepress/plugin-docsearch'
  module.exports = {
    plugins: [
      //docsearch\u63D2\u4EF6,https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html
      docsearchPlugin({
        apiKey: 'e3224f6a8f05632af9c14c97******b54',
        indexName: 'anyfork',
        appId: '09V****WK61N',
        placeholder: '\u641C\u7D22\u6587\u6863',
        locales: {
          '/': {
            placeholder: '\u641C\u7D22\u6587\u6863',
            translations: {
              button: {
                buttonText: '\u641C\u7D22\u6587\u6863'
              }
            }
          }
        }
      })
    ]
  }
  \`\`\`

  - 3\u3001\u5982\u679C\u4F60\u7528\u7684\u4E0D\u662F VuePress \u7684\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u5C31\u6BD4\u5982\u6211\u7528\u7684\u662F\`vuepress-theme-reco 1.x\`\uFF0C\u5B83\u7684\u641C\u7D22\u680F\u662F\u81EA\u5DF1\u5B9E\u73B0\u7684\uFF0C\u6240\u4EE5\u6DFB\u52A0\u4E0A\u8FF0\u7684\u914D\u7F6E\u662F\u4E0D\u4F1A\u6709\u6548\u679C\u7684(1.6.10 \u7248\u672C\u4E2D\u81EA\u5B9A\u4E49\u7684\`AlgoliaSearchBox.vue\`\u7EC4\u4EF6\u5B58\u5728\u5F88\u591A bug)\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u9700\u8981\u9075\u7167\u90AE\u4EF6\u4E2D\u7684\u65B9\u6CD5\uFF0C\u624B\u52A8\u6DFB\u52A0 CSS \u548C JavaScript \u6587\u4EF6\u3002\u5982\u679C\u4F60\u76F4\u63A5\u5F15\u5165 vuepress-theme-reco 1.x \u5305\uFF0C\u4F7F\u7528\u6309\u7167\u4E0B\u9762\u6B65\u9AA4\u8FDB\u884C\u914D\u7F6E\uFF1A

  1 \u6211\u4EEC\u9700\u8981\u5148\u4FEE\u6539\u4E0B config.js:

  \`\`\`js
  module.exports = {
    head: [
      ['link', { href: 'https://cdn.jsdelivr.net/npm/@docsearch/css@3', rel: 'stylesheet' }],
      ['script', { language: 'javascript', type: 'text/javascript', src: 'https://cdn.jsdelivr.net/npm/@docsearch/js@3' }]
    ]
  }
  \`\`\`

  2 \u7136\u540E\u4FEE\u6539.vuepress/enhanceApp.js \u6587\u4EF6\uFF1A

  \`\`\`js
  export default ({ router, Vue, isServer }) => {
    Vue.mixin({
      mounted() {
        // \u4E0D\u52A0 setTimeout \u4F1A\u6709\u62A5\u9519\uFF0C\u4F46\u4E0D\u5F71\u54CD\u6548\u679C
        setTimeout(() => {
          try {
            docsearch({
              appId: '43GX903BPS',
              apiKey: 'feff649032d8034cf2a636ef55d96054',
              indexName: 'ts-yayujs',
              container: '.search-box',
              debug: false
            })
          } catch (e) {
            console.log(e)
          }
        }, 100)
      }
    })
  }
  \`\`\`

\u5982\u679C\u4F60\u662F\u5C06 vuepress-theme-reco 1.x \u4E3B\u9898\u8FDB\u884C\u672C\u5730\u5316\u9B54\u6539\uFF0C\u4E3B\u9898\u4E2D\`Alglia\`\u914D\u7F6E\u4E0D\u53D8\uFF0C\u53EF\u4EE5\u5BF9\u81EA\u5B9A\u4E49\u7EC4\u4EF6\`AlgoliaSearchBox.vue\`\u4FEE\u6539\u5982\u4E0B\uFF1A

\`\`\`vue
<template>
  <div id="algolia-search-input" class="search-box"></div>
</template>
<script>
import { defineComponent, ref, onMounted } from 'vue'
import { RecoIcon } from '@vuepress-reco/core/lib/components'
import { useInstance } from '@theme/helpers/composable'
export default defineComponent({
  props: ['options'],
  setup(props, ctx) {
    const initialize = (userOptions) => {
      const { algoliaOptions = {} } = userOptions
      docsearch(
        Object.assign({}, userOptions, {
          container: '#algolia-search-input',
          algoliaOptions: algoliaOptions
        })
      )
    }
    onMounted(() => {
      initialize(props.options)
    })
  }
})
<\/script>
<style>
.search-box .DocSearch.DocSearch-Button {
  cursor: text;
  height: 2rem;
  color: #5b5b5b;
  border: 1px solid var(--border-color);
  border-radius: 2rem;
  font-size: 0.9rem;
  padding: 0 0.5rem 0 0rem;
  outline: none;
  transition: all 0.2s ease;
  background: transparent;
  background-size: 1rem;
  margin: 0px;
}

.search-box .DocSearch-Button-Container {
  margin-left: 0.4rem;
}

.search-box .DocSearch-Button .DocSearch-Search-Icon {
  width: 15px;
  height: 15px;
  position: relative;
  top: 0.1rem;
}

.search-box .DocSearch-Button-Placeholder {
  font-size: 0.8rem;
}

.search-box .DocSearch-Button-Keys {
  display: flex;
  right: 0.1rem;
}

.search-box .DocSearch-Button-Key {
  font-size: 12px;
  line-height: 15px;
  width: 15px;
  height: 15px;
}
</style>
\`\`\`

\u6CE8\u610F\u5176\u4E2D\u7684 container\uFF0C\u53C2\u8003 [docsearch](https://github.com/algolia/docsearch) \u7684\u5B98\u65B9\u4ED3\u5E93\uFF0C\u8FD9\u91CC\u63D0\u4F9B\u7684\u4E0D\u662F input \u8F93\u5165\u6846\u7684\u9009\u62E9\u5668\uFF0C\u800C\u662F\u4E00\u4E2A\u6302\u8F7D\u8282\u70B9\uFF0C\u6BD4\u5982 div \u7684\u9009\u62E9\u5668\u3002\u5982\u679C\u6837\u5F0F\u81EA\u5DF1\u4E0D\u559C\u6B22\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539\`vuepress/styles/index.styl\`\u8986\u76D6\u76EE\u524D\u7684\u6837\u5F0F\u3002\u6700\u7EC8\u6548\u679C\u5982\u4E0B\uFF1A![\u6700\u7EC8\u6548\u679C](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211001028.png)

## \u6570\u636E\u722C\u53D6

- 1\u3001\u914D\u7F6E\u5B8C\u6BD5\u540E\u5C06\u7F51\u7AD9\u8FDB\u884C\u91CD\u65B0\u90E8\u7F72\uFF0C\u67E5\u770B\`Algolia\`\u5168\u5C40\u641C\u7D22\u662F\u5426\u6709\u6570\u636E\u3002
- 2\u3001\u5982\u679C\u4F60\u641C\u4EFB\u4F55\u6570\u636E\uFF0C\u90FD\u663E\u793A\u641C\u7D22\u4E0D\u5230\u6570\u636E\uFF0C\u90A3\u5F88\u53EF\u80FD\u662F\u722C\u53D6\u7684\u6570\u636E\u6709\u95EE\u9898\uFF0C\u6211\u4EEC\u767B\u9646 <https://www.algolia.com/> \u6253\u5F00\u7BA1\u7406\u540E\u53F0\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u9009\u9879\u680F\u91CC\u7684 Search\uFF0C\u67E5\u770B\u5BF9\u5E94\u7684 indexName \u6570\u636E\uFF0C\u5982\u679C Browse \u8FD9\u91CC\u6CA1\u6709\u663E\u793A\u6570\u636E\uFF0C\u90A3\u8BF4\u660E\u722C\u53D6\u7684\u6570\u636E\u53EF\u80FD\u6709\u95EE\u9898\uFF0C\u5BFC\u81F4\u6CA1\u6709\u751F\u6210\u5BF9\u5E94\u7684 Records\uFF1A![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211111162.png)
  \u5982\u679C\u6CA1\u6709\u6570\u636E\uFF0C\u90A3\u6211\u4EEC\u5C31\u67E5\u4E0B\u722C\u53D6\u7684\u903B\u8F91\uFF0C\u6253\u5F00\u722C\u866B\u540E\u53F0\uFF1A<https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview>\uFF0C\u70B9\u51FB\u5BF9\u5E94 indexName \u8FDB\u5165\u540E\u53F0\uFF1A
  ![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211115127.png)\u5982\u679C\u663E\u793A\u6210\u529F\u722C\u53D6\uFF0C\u4E5F\u6709 Monitoring Success \u7684\u6570\u636E\uFF0C\u4F46 Records \u4E3A 0\uFF0C\u90A3\u5927\u6982\u662F\u722C\u866B\u63D0\u53D6\u6570\u636E\u7684\u903B\u8F91\u6709\u95EE\u9898\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u9009\u9879\u680F\u4E2D\u7684 Editor\uFF0C\u67E5\u770B\u5177\u4F53\u7684\u722C\u866B\u903B\u8F91\uFF1A![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211119981.png)\u50CF pathsToMatch \u8FD9\u91CC\u5982\u679C\u662F'<https://anyfork.github.io/blog-docs/docs/>**'\uFF0C\u4F46\u4F60\u7684\u7F51\u5740\u90FD\u662F [https://anyfork.github.io/blog-docs/\\*\\*](https://anyfork.github.io/blog-docs/**)\u5F00\u5934\u7684\uFF0C\u90A3\u8FD9\u91CC\u5927\u6982\u5C31\u662F\u4F1A\u63D0\u53D6\u9519\u8BEF\uFF0C\u4FEE\u6539\u4E00\u4E0B\uFF0C\u7136\u540E\u70B9\u51FB\u53F3\u4FA7\u7684\u6570\u636E\u8FDB\u884C\u6D4B\u8BD5\uFF1A![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211126112.png)\u5982\u679C\u80FD\u50CF\u8FD9\u6837\u63D0\u53D6\u5230\u6570\u636E\uFF0C\u5C31\u8BF4\u660E\u6CA1\u6709\u4EC0\u4E48\u95EE\u9898\u4E86\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 Save\uFF0C\u7136\u540E\u5207\u6362\u56DE Overview\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 Restart crawling\uFF0C\u6211\u4EEC\u91CD\u65B0\u722C\u53D6\u4E00\u4E0B\u6570\u636E\uFF1A![\u56FE\u793A](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211128410.png)\u9664\u4E86\u624B\u52A8\u8FDB\u884C\u722C\u53D6\u4E4B\u5916\uFF0C\`Algolia\`\u722C\u866B\u540E\u53F0\u4F1A\u5B9A\u65F6\u722C\u53D6\u6570\u636E\u3002\u81F3\u6B64\uFF0C VuePress \u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542F Algolia \u5168\u6587\u641C\u7D22\u5C31\u914D\u7F6E\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u8D76\u7D27\u5F00\u59CB\u5427\uFF01

**\u53C2\u8003\u6587\u7AE0**\uFF1A<https://blog.csdn.net/weixin_55475226/article/details/123363042>
`,contentRendered:`<p>\u2003Algolia \u662F\u4E00\u4E2A\u6570\u636E\u5E93\u5B9E\u65F6\u641C\u7D22\u670D\u52A1\uFF0C\u80FD\u591F\u63D0\u4F9B\u6BEB\u79D2\u7EA7\u7684\u6570\u636E\u5E93\u641C\u7D22\u670D\u52A1\uFF0C\u5E76\u4E14\u5176\u670D\u52A1\u80FD\u4EE5 API \u7684\u5F62\u5F0F\u65B9\u4FBF\u5730\u5E03\u5C40\u5230\u7F51\u9875\u3001\u5BA2\u6237\u7AEF\u3001APP \u7B49\u591A\u79CD\u573A\u666F\u3002Algolia \u7684\u670D\u52A1\u652F\u6301\u591A\u79CD\u8BED\u8A00\u652F\u6301 Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u5177\u5907\u5173\u952E\u5B57\u8F93\u5165\u667A\u80FD\u5BB9\u9519\u529F\u80FD\uFF0C\u5E76\u63D0\u4F9B\u6709\u641C\u7D22\u6392\u540D\u914D\u7F6E\uFF0C\u5E76\u5177\u6709\u5B9E\u65F6\u5FEB\u901F\u7684\u7279\u70B9\uFF08Algolia \u5728\u5168\u7403 12 \u4E2A\u6570\u636E\u4E2D\u5FC3\u5747\u6709\u90E8\u7F72\uFF09\u3002Algolia \u8FD8\u4E3A\u79FB\u52A8\u8BBE\u5907\u63D0\u4F9B\u4E86\u79BB\u7EBF\u641C\u7D22\u5F15\u64CE\uFF0C\u5176 C++ SDK \u53EF\u4EE5\u5D4C\u5165\u5230\u5E94\u7528\u670D\u52A1\u5668\u7AEF\uFF0C\u8FD9\u6837\u5373\u4FBF\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u5E94\u7528\u4E5F\u80FD\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002</p>
<!-- more -->
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1 Algolia \u7BA1\u7406\u540E\u53F0\u5730\u5740\uFF1A<br>
<a href="https://www.algolia.com/apps/09V7PWK61N/explorer/browse/anyfork?searchMode=search" target="_blank" rel="noopener noreferrer">https://www.algolia.com/apps/09V7PWK61N/explorer/browse/anyfork?searchMode=search<ExternalLinkIcon/></a><br>
2 Algolia \u722C\u866B\u540E\u53F0\u5730\u5740\uFF1A<br>
<a href="https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview" target="_blank" rel="noopener noreferrer">https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview<ExternalLinkIcon/></a><br>
3 Algolia GitHub \u5730\u5740:<br>
<a href="https://github.com/algolia/docsearch" target="_blank" rel="noopener noreferrer">https://github.com/algolia/docsearch<ExternalLinkIcon/></a></p>
</div>
<h2 id="\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528-algolia" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528-algolia" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u5728\u4F7F\u7528 Algolia?</h2>
<ul>
<li>1\u3001\u7531\u4E8E VuePress \u7684\u5185\u7F6E\u641C\u7D22\u53EA\u4F1A\u4E3A\u9875\u9762\u7684\u6807\u9898\u3001h2 \u3001 h3 \u4EE5\u53CA tags \u6784\u5EFA\u641C\u7D22\u7D22\u5F15\u3002\u5982\u679C\u4F60\u9700\u8981\u5168\u6587\u641C\u7D22\uFF0C\u5185\u7F6E\u641C\u7D22\u65E0\u6CD5\u5B9E\u73B0\uFF0C\u53EF\u5219\u4EE5\u4F7F\u7528 Algolia \u641C\u7D22\u3002</li>
<li>2\u3001\u4F7F\u7528 Algolia \u641C\u7D22\u6700\u5927\u7684\u597D\u5904\u5C31\u662F\u65B9\u4FBF\uFF0C\u5B83\u4F1A\u81EA\u52A8\u722C\u53D6\u7F51\u7AD9\u7684\u9875\u9762\u5185\u5BB9\u5E76\u6784\u5EFA\u7D22\u5F15\uFF0C\u4F60\u53EA\u7528\u7533\u8BF7\u4E00\u4E2A Algolia \u670D\u52A1\uFF0C\u5728\u7F51\u7AD9\u4E0A\u6DFB\u52A0\u4E00\u4E9B\u4EE3\u7801\uFF0C\u5C31\u50CF\u6DFB\u52A0\u7EDF\u8BA1\u4EE3\u7801\u4E00\u6837\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u5B9E\u73B0\u4E00\u4E2A\u5168\u6587\u641C\u7D22\u529F\u80FD\uFF0C\u64CD\u4F5C\u7B80\u5355\u8FD8\u65B9\u4FBF\uFF0C\u5BB9\u9519\u7387\u5F88\u9AD8\u3002</li>
<li>3\u3001\u4F7F\u7528\u8303\u56F4\u5E7F\uFF0C\u76EE\u524D\u5F88\u591A\u5E94\u7528\u7684\u5B98\u65B9\u6587\u6863(\u4F8B\u5982\uFF1Avue.js,vite,vuepress \u7B49)\u5747\u4F7F\u7528 Algolia \u8FDB\u884C\u5168\u6587\u641C\u7D22\uFF0C\u800C\u4E14\u652F\u6301\u591A\u79CD Ruby\u3001Rails\u3001Python\u3001PHP\u3001JS\u3001Java\u3001Android\u3001Objective-C \u7B49\u591A\u79CD\u8BED\u8A00\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u81EA\u52A8\u548C\u624B\u52A8\u722C\u53D6\u7D22\u5F15\u3002\u5C55\u793A\u6548\u679C\u5982\u4E0B:<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207210920996.png" alt="\u914D\u7F6E\u9875\u9762"></li>
</ul>
<h2 id="\u5982\u4F55\u4F7F\u7528-algolia" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u4F7F\u7528-algolia" aria-hidden="true">#</a> \u5982\u4F55\u4F7F\u7528 Algolia?</h2>
<ul>
<li>
<p>1\u3001<strong>\u641C\u7D22\u670D\u52A1\u7533\u8BF7</strong></p>
<ul>
<li>1\u3001\u7533\u8BF7\u5730\u5740\uFF1A<a href="https://docsearch.algolia.com/apply/" target="_blank" rel="noopener noreferrer">https://docsearch.algolia.com/apply/<ExternalLinkIcon/></a></li>
<li>2\u3001\u586B\u5199\u5E94\u7528 Algolia \u641C\u7D22\u670D\u52A1\u7684\u7AD9\u70B9\u5730\u5740\uFF0C\u80FD\u591F\u5BF9\u5916\u8BBF\u95EE\u3002</li>
<li>3\u3001\u586B\u5199\u4E2A\u4EBA\u90AE\u7BB1\uFF0C\u7533\u8BF7\u901A\u8FC7\u540E\u4F1A\u6536\u5230\u56DE\u590D\u90AE\u4EF6\uFF0C\u5305\u542B\u5F00\u901A\u7684\u5E94\u7528\u4FE1\u606F\u4EE5\u53CA\u8FDB\u884C\u540E\u7EED\u5176\u4ED6\u64CD\u4F5C\u7684\u8BF4\u660E\u3002</li>
<li>4\u3001\u586B\u5199\u516C\u5F00\u7684\u4ED3\u5E93\u5730\u5740\uFF0C\u6B64\u4ED3\u5E93\u5B58\u653E\u7AD9\u70B9\u6E90\u7801\u3002</li>
</ul>
<p>\u586B\u5B8C\u4E4B\u540E\u4E00\u5468\u4E4B\u5185\uFF0C\u6536\u5230\u56DE\u590D\u90AE\u4EF6\uFF0C\u6309\u7167\u90AE\u4EF6\u5185\u5BB9\u8FDB\u884C\u64CD\u4F5C\u3002\u8BB0\u4F4F\u4E00\u5B9A\u8981\u56DE\u590D\u90AE\u4EF6\uFF0C\u544A\u8BC9\u81EA\u5DF1\u5C31\u662F\u7F51\u7AD9\u7684\u7EF4\u62A4\u8005\uFF0C\u5E76\u4E14\u53EF\u4EE5\u4FEE\u6539\u4EE3\u7801\uFF0C\u5426\u5219\u8D85\u8FC7\u65F6\u95F4\u4E0D\u56DE\u590D\uFF0C\u7533\u8BF7\u7684\u5E94\u7528\u4F1A\u88AB\u81EA\u52A8\u9500\u6BC1\u3002</p>
</li>
<li>
<p>2\u3001<strong>\u4EE3\u7801\u914D\u7F6E</strong></p>
<ul>
<li>1\u3001\u5982\u679C\u4F60\u7528\u7684\u662F<code v-pre>VuePress 1.x</code> \u7684\u9ED8\u8BA4\u4E3B\u9898\uFF0CVuePress \u76F4\u63A5\u63D0\u4F9B\u4E86 themeConfig.algolia \u9009\u9879\u6765\u7528 Algolia \u641C\u7D22\u66FF\u6362\u5185\u7F6E\u7684\u641C\u7D22\u6846\uFF0C\u4F60\u53EA\u7528\u5982\u6B64\u7B80\u5355\u7684\u914D\u7F6E\u5373\u53EF\u5B9E\u73B0\u5168\u6587\u641C\u7D22\u3002</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">themeConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">algolia</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">'&lt;API_KEY>'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">'&lt;INDEX_NAME>'</span>
      <span class="token comment">// \u5982\u679C Algolia \u6CA1\u6709\u4E3A\u4F60\u63D0\u4F9B \`appId\` \uFF0C\u4F7F\u7528 \`BH4D9OD16A\` \u6216\u8005\u79FB\u9664\u8BE5\u914D\u7F6E\u9879</span>
      <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'&lt;APP_ID>'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>2\u3001\u5982\u679C\u4F60\u7528\u7684\u662F<code v-pre>VuePress 2.x</code> \u7684\u9ED8\u8BA4\u4E3B\u9898\u6216\u8005\u7EE7\u627F\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u53EF\u4EE5\u901A\u8FC7<code v-pre>DocSearch</code>\u63D2\u4EF6\u8FDB\u884C\u914D\u7F6E\uFF0C\u63D2\u4EF6\u914D\u7F6E\u5B8C\u6BD5\u4EE5\u540E\uFF0C\u5728<code v-pre>Navbar</code>\u4E2D\u81EA\u52A8\u751F\u6210\u641C\u7D22\u6846\u3002<code v-pre>DocSearch</code>\u63D2\u4EF6\u914D\u7F6E\u5982\u4E0B\u3002</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> docsearchPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-docsearch'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//docsearch\u63D2\u4EF6,https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html</span>
    <span class="token function">docsearchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">'e3224f6a8f05632af9c14c97******b54'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">'anyfork'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'09V****WK61N'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">locales</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">translations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">buttonText</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>3\u3001\u5982\u679C\u4F60\u7528\u7684\u4E0D\u662F VuePress \u7684\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u5C31\u6BD4\u5982\u6211\u7528\u7684\u662F<code v-pre>vuepress-theme-reco 1.x</code>\uFF0C\u5B83\u7684\u641C\u7D22\u680F\u662F\u81EA\u5DF1\u5B9E\u73B0\u7684\uFF0C\u6240\u4EE5\u6DFB\u52A0\u4E0A\u8FF0\u7684\u914D\u7F6E\u662F\u4E0D\u4F1A\u6709\u6548\u679C\u7684(1.6.10 \u7248\u672C\u4E2D\u81EA\u5B9A\u4E49\u7684<code v-pre>AlgoliaSearchBox.vue</code>\u7EC4\u4EF6\u5B58\u5728\u5F88\u591A bug)\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u9700\u8981\u9075\u7167\u90AE\u4EF6\u4E2D\u7684\u65B9\u6CD5\uFF0C\u624B\u52A8\u6DFB\u52A0 CSS \u548C JavaScript \u6587\u4EF6\u3002\u5982\u679C\u4F60\u76F4\u63A5\u5F15\u5165 vuepress-theme-reco 1.x \u5305\uFF0C\u4F7F\u7528\u6309\u7167\u4E0B\u9762\u6B65\u9AA4\u8FDB\u884C\u914D\u7F6E\uFF1A</li>
</ul>
<p>1 \u6211\u4EEC\u9700\u8981\u5148\u4FEE\u6539\u4E0B config.js:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">head</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'https://cdn.jsdelivr.net/npm/@docsearch/css@3'</span><span class="token punctuation">,</span> <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">'stylesheet'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">'script'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'javascript'</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text/javascript'</span><span class="token punctuation">,</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">'https://cdn.jsdelivr.net/npm/@docsearch/js@3'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2 \u7136\u540E\u4FEE\u6539.vuepress/enhanceApp.js \u6587\u4EF6\uFF1A</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> router<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> isServer <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u4E0D\u52A0 setTimeout \u4F1A\u6709\u62A5\u9519\uFF0C\u4F46\u4E0D\u5F71\u54CD\u6548\u679C</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token function">docsearch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'43GX903BPS'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">'feff649032d8034cf2a636ef55d96054'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">'ts-yayujs'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">'.search-box'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">debug</span><span class="token operator">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<p>\u5982\u679C\u4F60\u662F\u5C06 vuepress-theme-reco 1.x \u4E3B\u9898\u8FDB\u884C\u672C\u5730\u5316\u9B54\u6539\uFF0C\u4E3B\u9898\u4E2D<code v-pre>Alglia</code>\u914D\u7F6E\u4E0D\u53D8\uFF0C\u53EF\u4EE5\u5BF9\u81EA\u5B9A\u4E49\u7EC4\u4EF6<code v-pre>AlgoliaSearchBox.vue</code>\u4FEE\u6539\u5982\u4E0B\uFF1A</p>
<div class="language-vue ext-vue line-numbers-mode"><pre v-pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>algolia-search-input<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RecoIcon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress-reco/core/lib/components'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@theme/helpers/composable'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'options'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">initialize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">userOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> algoliaOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> userOptions
      <span class="token function">docsearch</span><span class="token punctuation">(</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> userOptions<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">'#algolia-search-input'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">algoliaOptions</span><span class="token operator">:</span> algoliaOptions
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">initialize</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>options<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.search-box .DocSearch.DocSearch-Button</span> <span class="token punctuation">{</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #5b5b5b<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--border-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.9rem<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 0.5rem 0 0rem<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.2s ease<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button-Container</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button .DocSearch-Search-Icon</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0.1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button-Placeholder</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.8rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button-Keys</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0.1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box .DocSearch-Button-Key</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\u5176\u4E2D\u7684 container\uFF0C\u53C2\u8003 <a href="https://github.com/algolia/docsearch" target="_blank" rel="noopener noreferrer">docsearch<ExternalLinkIcon/></a> \u7684\u5B98\u65B9\u4ED3\u5E93\uFF0C\u8FD9\u91CC\u63D0\u4F9B\u7684\u4E0D\u662F input \u8F93\u5165\u6846\u7684\u9009\u62E9\u5668\uFF0C\u800C\u662F\u4E00\u4E2A\u6302\u8F7D\u8282\u70B9\uFF0C\u6BD4\u5982 div \u7684\u9009\u62E9\u5668\u3002\u5982\u679C\u6837\u5F0F\u81EA\u5DF1\u4E0D\u559C\u6B22\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539<code v-pre>vuepress/styles/index.styl</code>\u8986\u76D6\u76EE\u524D\u7684\u6837\u5F0F\u3002\u6700\u7EC8\u6548\u679C\u5982\u4E0B\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211001028.png" alt="\u6700\u7EC8\u6548\u679C"></p>
<h2 id="\u6570\u636E\u722C\u53D6" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u722C\u53D6" aria-hidden="true">#</a> \u6570\u636E\u722C\u53D6</h2>
<ul>
<li>1\u3001\u914D\u7F6E\u5B8C\u6BD5\u540E\u5C06\u7F51\u7AD9\u8FDB\u884C\u91CD\u65B0\u90E8\u7F72\uFF0C\u67E5\u770B<code v-pre>Algolia</code>\u5168\u5C40\u641C\u7D22\u662F\u5426\u6709\u6570\u636E\u3002</li>
<li>2\u3001\u5982\u679C\u4F60\u641C\u4EFB\u4F55\u6570\u636E\uFF0C\u90FD\u663E\u793A\u641C\u7D22\u4E0D\u5230\u6570\u636E\uFF0C\u90A3\u5F88\u53EF\u80FD\u662F\u722C\u53D6\u7684\u6570\u636E\u6709\u95EE\u9898\uFF0C\u6211\u4EEC\u767B\u9646 <a href="https://www.algolia.com/" target="_blank" rel="noopener noreferrer">https://www.algolia.com/<ExternalLinkIcon/></a> \u6253\u5F00\u7BA1\u7406\u540E\u53F0\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u9009\u9879\u680F\u91CC\u7684 Search\uFF0C\u67E5\u770B\u5BF9\u5E94\u7684 indexName \u6570\u636E\uFF0C\u5982\u679C Browse \u8FD9\u91CC\u6CA1\u6709\u663E\u793A\u6570\u636E\uFF0C\u90A3\u8BF4\u660E\u722C\u53D6\u7684\u6570\u636E\u53EF\u80FD\u6709\u95EE\u9898\uFF0C\u5BFC\u81F4\u6CA1\u6709\u751F\u6210\u5BF9\u5E94\u7684 Records\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211111162.png" alt="\u56FE\u793A">
\u5982\u679C\u6CA1\u6709\u6570\u636E\uFF0C\u90A3\u6211\u4EEC\u5C31\u67E5\u4E0B\u722C\u53D6\u7684\u903B\u8F91\uFF0C\u6253\u5F00\u722C\u866B\u540E\u53F0\uFF1A<a href="https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview" target="_blank" rel="noopener noreferrer">https://crawler.algolia.com/admin/crawlers/05c701e8-3f90-461a-8624-081309f68d92/overview<ExternalLinkIcon/></a>\uFF0C\u70B9\u51FB\u5BF9\u5E94 indexName \u8FDB\u5165\u540E\u53F0\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211115127.png" alt="\u56FE\u793A">\u5982\u679C\u663E\u793A\u6210\u529F\u722C\u53D6\uFF0C\u4E5F\u6709 Monitoring Success \u7684\u6570\u636E\uFF0C\u4F46 Records \u4E3A 0\uFF0C\u90A3\u5927\u6982\u662F\u722C\u866B\u63D0\u53D6\u6570\u636E\u7684\u903B\u8F91\u6709\u95EE\u9898\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u9009\u9879\u680F\u4E2D\u7684 Editor\uFF0C\u67E5\u770B\u5177\u4F53\u7684\u722C\u866B\u903B\u8F91\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211119981.png" alt="\u56FE\u793A">\u50CF pathsToMatch \u8FD9\u91CC\u5982\u679C\u662F'<a href="https://anyfork.github.io/blog-docs/docs/" target="_blank" rel="noopener noreferrer">https://anyfork.github.io/blog-docs/docs/<ExternalLinkIcon/></a>**'\uFF0C\u4F46\u4F60\u7684\u7F51\u5740\u90FD\u662F <a href="https://anyfork.github.io/blog-docs/**" target="_blank" rel="noopener noreferrer">https://anyfork.github.io/blog-docs/**<ExternalLinkIcon/></a>\u5F00\u5934\u7684\uFF0C\u90A3\u8FD9\u91CC\u5927\u6982\u5C31\u662F\u4F1A\u63D0\u53D6\u9519\u8BEF\uFF0C\u4FEE\u6539\u4E00\u4E0B\uFF0C\u7136\u540E\u70B9\u51FB\u53F3\u4FA7\u7684\u6570\u636E\u8FDB\u884C\u6D4B\u8BD5\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211126112.png" alt="\u56FE\u793A">\u5982\u679C\u80FD\u50CF\u8FD9\u6837\u63D0\u53D6\u5230\u6570\u636E\uFF0C\u5C31\u8BF4\u660E\u6CA1\u6709\u4EC0\u4E48\u95EE\u9898\u4E86\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 Save\uFF0C\u7136\u540E\u5207\u6362\u56DE Overview\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684 Restart crawling\uFF0C\u6211\u4EEC\u91CD\u65B0\u722C\u53D6\u4E00\u4E0B\u6570\u636E\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207211128410.png" alt="\u56FE\u793A">\u9664\u4E86\u624B\u52A8\u8FDB\u884C\u722C\u53D6\u4E4B\u5916\uFF0C<code v-pre>Algolia</code>\u722C\u866B\u540E\u53F0\u4F1A\u5B9A\u65F6\u722C\u53D6\u6570\u636E\u3002\u81F3\u6B64\uFF0C VuePress \u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542F Algolia \u5168\u6587\u641C\u7D22\u5C31\u914D\u7F6E\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u8D76\u7D27\u5F00\u59CB\u5427\uFF01</li>
</ul>
<p><strong>\u53C2\u8003\u6587\u7AE0</strong>\uFF1A<a href="https://blog.csdn.net/weixin_55475226/article/details/123363042" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_55475226/article/details/123363042<ExternalLinkIcon/></a></p>
`,date:"2022-07-22",deps:[],links:[],pathInferred:"/posts/other/algoliaSearch.html",pathLocale:"/",permalink:null,routeMeta:{title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"},sfcBlocks:[],slug:"algoliaSearch",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/algoliaSearch.md",filePathRelative:"posts/other/algoliaSearch.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/algoliaSearch.html.vue",componentFilePathRelative:"pages/posts/other/algoliaSearch.html.vue",componentFileChunkName:"v-cc63cd18",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/algoliaSearch.html.js",dataFilePathRelative:"pages/posts/other/algoliaSearch.html.js",dataFileChunkName:"v-cc63cd18",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/algoliaSearch.html",htmlFilePathRelative:"posts/other/algoliaSearch.html"},title:"VuePress\u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542FAlgolia\u5168\u6587\u641C\u7D22"},["/posts/other/algoliaSearch","/posts/other/algoliaSearch.md"]],["v-65bd7028","/posts/other/blogDocs.html",{_blog:{data:{key:"v-65bd7028",path:"/posts/other/blogDocs.html",title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863",lang:"zh-CN",frontmatter:{title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863",date:"2022-08-23T15:30:27.000Z",description:"\u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002",lang:"zh-CN",tag:["\u535A\u5BA2"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208231513291.png",sidebar:"auto",sticky:1,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/blogDocs.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863"}],["meta",{property:"og:description",content:"\u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u535A\u5BA2"}],["meta",{property:"article:published_time",content:"2022-08-23T15:30:27.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u7684\u6478\u7D22\uFF0C\u8E29\u8FC7\u4E86\u65E0\u6570\u7684\u5751\uFF0C\u7EC8\u4E8E\u642D\u5EFA\u597D\u4E86\u4E00\u4E2A\u5C5E\u4E8E\u81EA\u5DF1\u7684\u535A\u5BA2\u3002\u5728\u6B64\u8BB0\u5F55\u4E00\u4E0B\u8E29\u5751\u8FC7\u7A0B\uFF0C\u8BA9\u4EE5\u540E\u7684\u5C0F\u4F19\u4F34\u4EEC\u642D\u5EFA\u81EA\u5DF1\u535A\u5BA2\u7684\u65F6\u5019\u5C11\u8D70\u5F2F\u8DEF\u3002\u535A\u5BA2\u91C7\u7528\u4E86<code v-pre>vuepress@2.x</code>\u7248\u672C\u8FDB\u884C\u6784\u5EFA\uFF0C\u540C\u65F6\u5BF9\u9ED8\u8BA4\u4E3B\u9898\u8FDB\u884C\u4E86\u672C\u5730\u5316\u7EE7\u627F\u4FEE\u6539\uFF0C\u6574\u4E2A\u4E3B\u9898\u5927\u7684\u5E03\u5C40\u672A\u6539\u52A8\uFF0C\u53EA\u662F\u5BF9\u9996\u9875\u548C\u5C55\u793A\u9875\u9762\u8FDB\u884C\u4E86\u5E03\u5C40\u8C03\u6574\uFF0C\u6700\u7EC8\u6548\u679C\u4E3A\u5F53\u524D\u535A\u5BA2\u663E\u793A\u6548\u679C\u3002\u5C0F\u4F19\u4F34\u4EEC\u8FD8\u7B49\u4EC0\u4E48\uFF0C\u8D76\u5FEB\u5F00\u59CB\u5427\uFF01\u{1F44D}</p>
`,headers:[{level:2,title:"\u4E00 \u521D\u59CB\u5316\u9879\u76EE",slug:"\u4E00-\u521D\u59CB\u5316\u9879\u76EE",children:[{level:3,title:"1 \u73AF\u5883\u4F9D\u8D56",slug:"_1-\u73AF\u5883\u4F9D\u8D56",children:[]},{level:3,title:"2 \u5FEB\u901F\u5F00\u59CB",slug:"_2-\u5FEB\u901F\u5F00\u59CB",children:[]},{level:3,title:"3 \u9879\u76EE\u542F\u52A8",slug:"_3-\u9879\u76EE\u542F\u52A8",children:[]}]},{level:2,title:"\u4E8C \u529F\u80FD\u914D\u7F6E",slug:"\u4E8C-\u529F\u80FD\u914D\u7F6E",children:[{level:3,title:"1 \u5E03\u5C40\u63D2\u69FD",slug:"_1-\u5E03\u5C40\u63D2\u69FD",children:[]},{level:3,title:"2 \u7EC4\u4EF6\u66FF\u6362",slug:"_2-\u7EC4\u4EF6\u66FF\u6362",children:[]},{level:3,title:"3 \u535A\u5BA2\u63D2\u4EF6",slug:"_3-\u535A\u5BA2\u63D2\u4EF6",children:[]},{level:3,title:"4 \u81EA\u5B9A\u4E49\u5BB9\u5668",slug:"_4-\u81EA\u5B9A\u4E49\u5BB9\u5668",children:[]}]},{level:2,title:"\u4E09 \u63D2\u4EF6\u5B89\u88C5",slug:"\u4E09-\u63D2\u4EF6\u5B89\u88C5",children:[{level:3,title:"1 PWA \u63D2\u4EF6",slug:"_1-pwa-\u63D2\u4EF6",children:[]},{level:3,title:"2 DocSearch \u63D2\u4EF6",slug:"_2-docsearch-\u63D2\u4EF6",children:[]},{level:3,title:"3 ReadingTime \u63D2\u4EF6",slug:"_3-readingtime-\u63D2\u4EF6",children:[]},{level:3,title:"4 SEO \u63D2\u4EF6",slug:"_4-seo-\u63D2\u4EF6",children:[]},{level:3,title:"5 SiteMap \u63D2\u4EF6",slug:"_5-sitemap-\u63D2\u4EF6",children:[]},{level:3,title:"6 Copyright \u63D2\u4EF6",slug:"_6-copyright-\u63D2\u4EF6",children:[]},{level:3,title:"7 CopyCode \u63D2\u4EF6",slug:"_7-copycode-\u63D2\u4EF6",children:[]},{level:3,title:"8 Waline \u8BC4\u8BBA\u63D2\u4EF6",slug:"_8-waline-\u8BC4\u8BBA\u63D2\u4EF6",children:[]},{level:3,title:"9 Markdown \u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6",slug:"_9-markdown-\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6",children:[]},{level:3,title:"10 \u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6",slug:"_10-\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6",children:[]},{level:3,title:"11 \u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6",slug:"_11-\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6",children:[]},{level:3,title:"12 \u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6",slug:"_12-\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6",children:[]},{level:3,title:"13 \u770B\u677F\u5A18\u63D2\u4EF6",slug:"_13-\u770B\u677F\u5A18\u63D2\u4EF6",children:[]},{level:3,title:"14 \u80CC\u666F\u5F69\u5E26\u63D2\u4EF6",slug:"_14-\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6",children:[]},{level:3,title:"15 \u6A31\u82B1\u7279\u6548\u63D2\u4EF6",slug:"_15-\u6A31\u82B1\u7279\u6548\u63D2\u4EF6",children:[]}]},{level:2,title:"\u56DB \u9879\u76EE\u90E8\u7F72",slug:"\u56DB-\u9879\u76EE\u90E8\u7F72",children:[{level:3,title:"1 nginx \u670D\u52A1\u5668\u90E8\u7F72",slug:"_1-nginx-\u670D\u52A1\u5668\u90E8\u7F72",children:[]},{level:3,title:"2 \u90E8\u7F72\u5728Github Pages\u548CGitee Pages",slug:"_2-\u90E8\u7F72\u5728github-pages\u548Cgitee-pages",children:[]}]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/blogDocs.md",readingTime:{minutes:28.12,words:8437},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/blogDocs.html`},key:"v-65bd7028",path:"/posts/other/blogDocs.html",title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863",lang:"zh-CN",frontmatter:{title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863",date:"2022-08-23T15:30:27.000Z",description:"\u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002",lang:"zh-CN",tag:["\u535A\u5BA2"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208231513291.png",sidebar:"auto",sticky:1,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/blogDocs.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863"}],["meta",{property:"og:description",content:"\u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u535A\u5BA2"}],["meta",{property:"article:published_time",content:"2022-08-23T15:30:27.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u7684\u6478\u7D22\uFF0C\u8E29\u8FC7\u4E86\u65E0\u6570\u7684\u5751\uFF0C\u7EC8\u4E8E\u642D\u5EFA\u597D\u4E86\u4E00\u4E2A\u5C5E\u4E8E\u81EA\u5DF1\u7684\u535A\u5BA2\u3002\u5728\u6B64\u8BB0\u5F55\u4E00\u4E0B\u8E29\u5751\u8FC7\u7A0B\uFF0C\u8BA9\u4EE5\u540E\u7684\u5C0F\u4F19\u4F34\u4EEC\u642D\u5EFA\u81EA\u5DF1\u535A\u5BA2\u7684\u65F6\u5019\u5C11\u8D70\u5F2F\u8DEF\u3002\u535A\u5BA2\u91C7\u7528\u4E86<code v-pre>vuepress@2.x</code>\u7248\u672C\u8FDB\u884C\u6784\u5EFA\uFF0C\u540C\u65F6\u5BF9\u9ED8\u8BA4\u4E3B\u9898\u8FDB\u884C\u4E86\u672C\u5730\u5316\u7EE7\u627F\u4FEE\u6539\uFF0C\u6574\u4E2A\u4E3B\u9898\u5927\u7684\u5E03\u5C40\u672A\u6539\u52A8\uFF0C\u53EA\u662F\u5BF9\u9996\u9875\u548C\u5C55\u793A\u9875\u9762\u8FDB\u884C\u4E86\u5E03\u5C40\u8C03\u6574\uFF0C\u6700\u7EC8\u6548\u679C\u4E3A\u5F53\u524D\u535A\u5BA2\u663E\u793A\u6548\u679C\u3002\u5C0F\u4F19\u4F34\u4EEC\u8FD8\u7B49\u4EC0\u4E48\uFF0C\u8D76\u5FEB\u5F00\u59CB\u5427\uFF01\u{1F44D}</p>
`,headers:[{level:2,title:"\u4E00 \u521D\u59CB\u5316\u9879\u76EE",slug:"\u4E00-\u521D\u59CB\u5316\u9879\u76EE",children:[{level:3,title:"1 \u73AF\u5883\u4F9D\u8D56",slug:"_1-\u73AF\u5883\u4F9D\u8D56",children:[]},{level:3,title:"2 \u5FEB\u901F\u5F00\u59CB",slug:"_2-\u5FEB\u901F\u5F00\u59CB",children:[]},{level:3,title:"3 \u9879\u76EE\u542F\u52A8",slug:"_3-\u9879\u76EE\u542F\u52A8",children:[]}]},{level:2,title:"\u4E8C \u529F\u80FD\u914D\u7F6E",slug:"\u4E8C-\u529F\u80FD\u914D\u7F6E",children:[{level:3,title:"1 \u5E03\u5C40\u63D2\u69FD",slug:"_1-\u5E03\u5C40\u63D2\u69FD",children:[]},{level:3,title:"2 \u7EC4\u4EF6\u66FF\u6362",slug:"_2-\u7EC4\u4EF6\u66FF\u6362",children:[]},{level:3,title:"3 \u535A\u5BA2\u63D2\u4EF6",slug:"_3-\u535A\u5BA2\u63D2\u4EF6",children:[]},{level:3,title:"4 \u81EA\u5B9A\u4E49\u5BB9\u5668",slug:"_4-\u81EA\u5B9A\u4E49\u5BB9\u5668",children:[]}]},{level:2,title:"\u4E09 \u63D2\u4EF6\u5B89\u88C5",slug:"\u4E09-\u63D2\u4EF6\u5B89\u88C5",children:[{level:3,title:"1 PWA \u63D2\u4EF6",slug:"_1-pwa-\u63D2\u4EF6",children:[]},{level:3,title:"2 DocSearch \u63D2\u4EF6",slug:"_2-docsearch-\u63D2\u4EF6",children:[]},{level:3,title:"3 ReadingTime \u63D2\u4EF6",slug:"_3-readingtime-\u63D2\u4EF6",children:[]},{level:3,title:"4 SEO \u63D2\u4EF6",slug:"_4-seo-\u63D2\u4EF6",children:[]},{level:3,title:"5 SiteMap \u63D2\u4EF6",slug:"_5-sitemap-\u63D2\u4EF6",children:[]},{level:3,title:"6 Copyright \u63D2\u4EF6",slug:"_6-copyright-\u63D2\u4EF6",children:[]},{level:3,title:"7 CopyCode \u63D2\u4EF6",slug:"_7-copycode-\u63D2\u4EF6",children:[]},{level:3,title:"8 Waline \u8BC4\u8BBA\u63D2\u4EF6",slug:"_8-waline-\u8BC4\u8BBA\u63D2\u4EF6",children:[]},{level:3,title:"9 Markdown \u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6",slug:"_9-markdown-\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6",children:[]},{level:3,title:"10 \u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6",slug:"_10-\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6",children:[]},{level:3,title:"11 \u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6",slug:"_11-\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6",children:[]},{level:3,title:"12 \u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6",slug:"_12-\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6",children:[]},{level:3,title:"13 \u770B\u677F\u5A18\u63D2\u4EF6",slug:"_13-\u770B\u677F\u5A18\u63D2\u4EF6",children:[]},{level:3,title:"14 \u80CC\u666F\u5F69\u5E26\u63D2\u4EF6",slug:"_14-\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6",children:[]},{level:3,title:"15 \u6A31\u82B1\u7279\u6548\u63D2\u4EF6",slug:"_15-\u6A31\u82B1\u7279\u6548\u63D2\u4EF6",children:[]}]},{level:2,title:"\u56DB \u9879\u76EE\u90E8\u7F72",slug:"\u56DB-\u9879\u76EE\u90E8\u7F72",children:[{level:3,title:"1 nginx \u670D\u52A1\u5668\u90E8\u7F72",slug:"_1-nginx-\u670D\u52A1\u5668\u90E8\u7F72",children:[]},{level:3,title:"2 \u90E8\u7F72\u5728Github Pages\u548CGitee Pages",slug:"_2-\u90E8\u7F72\u5728github-pages\u548Cgitee-pages",children:[]}]}],content:`---
title: VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863
date: 2022-8-23 15:30:27
description: \u4ECE\u96F6\u5F00\u59CB\u642D\u5EFA\u4E00\u4E2A\u57FA\u4E8Evuepress2.X\u7248\u672C\u7684Markdown\u535A\u5BA2\u6587\u6863\u3002
lang: zh-CN
tag:
  - \u535A\u5BA2
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208231513291.png
sidebar: 'auto'
sticky: 1
---

&emsp;\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u7684\u6478\u7D22\uFF0C\u8E29\u8FC7\u4E86\u65E0\u6570\u7684\u5751\uFF0C\u7EC8\u4E8E\u642D\u5EFA\u597D\u4E86\u4E00\u4E2A\u5C5E\u4E8E\u81EA\u5DF1\u7684\u535A\u5BA2\u3002\u5728\u6B64\u8BB0\u5F55\u4E00\u4E0B\u8E29\u5751\u8FC7\u7A0B\uFF0C\u8BA9\u4EE5\u540E\u7684\u5C0F\u4F19\u4F34\u4EEC\u642D\u5EFA\u81EA\u5DF1\u535A\u5BA2\u7684\u65F6\u5019\u5C11\u8D70\u5F2F\u8DEF\u3002\u535A\u5BA2\u91C7\u7528\u4E86\`vuepress@2.x\`\u7248\u672C\u8FDB\u884C\u6784\u5EFA\uFF0C\u540C\u65F6\u5BF9\u9ED8\u8BA4\u4E3B\u9898\u8FDB\u884C\u4E86\u672C\u5730\u5316\u7EE7\u627F\u4FEE\u6539\uFF0C\u6574\u4E2A\u4E3B\u9898\u5927\u7684\u5E03\u5C40\u672A\u6539\u52A8\uFF0C\u53EA\u662F\u5BF9\u9996\u9875\u548C\u5C55\u793A\u9875\u9762\u8FDB\u884C\u4E86\u5E03\u5C40\u8C03\u6574\uFF0C\u6700\u7EC8\u6548\u679C\u4E3A\u5F53\u524D\u535A\u5BA2\u663E\u793A\u6548\u679C\u3002\u5C0F\u4F19\u4F34\u4EEC\u8FD8\u7B49\u4EC0\u4E48\uFF0C\u8D76\u5FEB\u5F00\u59CB\u5427\uFF01\u{1F44D}

<!-- more -->

:::tip
1\u3001\u535A\u4E3B\u4EE5\u524D\u4E5F\u7528\`vuepress-theme-reco@1.x\`\u4E3B\u9898\u642D\u5EFA\u4E86\u4E00\u4E2A\u535A\u5BA2\uFF0C\u6BD4\u8F83\u559C\u6B22vuepress-theme-reco@1.x\u98CE\u683C\uFF0C\u7531\u4E8E\`vuepress-theme-reco@1.x\`\u91C7\u7528\u7684\u6280\u672F\u90FD\u76F8\u5BF9\u76EE\u524D\u6BD4\u8F83\u843D\u540E\uFF0C\u540E\u6765\u4FBF\u7528\`vuepress 2.X\`\u5F00\u53D1\u4E86\u73B0\u5728\u7684\u535A\u5BA2\uFF0C\u6574\u4F53\u9875\u9762\u98CE\u683C\u548C\u6837\u5F0F\u548C\u539F\u6765\u7684\u4E00\u6A21\u4E00\u6837\uFF0C\u4F46\u4E3B\u9898\u8FD8\u662F\u7EE7\u627F\u4E86\`vuepress 2.X\`\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u589E\u52A0\u4E86\u535A\u5BA2,\u5206\u7C7B\uFF0C\u6807\u7B7E\u529F\u80FD\u548C\u5176\u4ED6\u9996\u9875\u7279\u6548\u63D2\u4EF6\u3002

2\u3001\u535A\u5BA2\u5730\u5740\uFF1A<https://anyfork.github.io/blog-docs/>\u6216<https://anyfork.gitee.io/blog-docs/>
:::

## \u4E00 \u521D\u59CB\u5316\u9879\u76EE

### 1 \u73AF\u5883\u4F9D\u8D56

- [Node.js v14+](https://nodejs.org/)\uFF0C\u6700\u4F4E\u4F7F\u7528\`Node 14+\`\u7248\u672C\uFF0C\u5EFA\u8BAE\u4F7F\u7528\`Node 14.16.0\`\u7248\u672C

::: warning

- \u4F7F\u7528 [pnpm](https://pnpm.io/zh/) \u65F6\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u5B89\u88C5 vue \u548C @vuepress/client \u4F5C\u4E3A peer-dependencies \uFF0C\u5373 pnpm add -D vue @vuepress/client@next \u3002
- \u4F7F\u7528 [yarn 2](https://yarnpkg.com/) \u65F6\uFF0C\u4F60\u9700\u8981\u5728 [.yarnrc.yml](https://yarnpkg.com/configuration/yarnrc#nodeLinker) \u6587\u4EF6\u4E2D\u8BBE\u7F6E nodeLinker: 'node-modules'

:::

### 2 \u5FEB\u901F\u5F00\u59CB

- \u521B\u5EFA\u9879\u76EE\u76EE\u5F55

\`\`\`sh
# \u521B\u5EFA\u9879\u76EE\u76EE\u5F55
mkdir blog-docs
# \u8FDB\u5165\u9879\u76EE\u76EE\u5F55
cd blog-docs
\`\`\`

- \u521D\u59CB\u5316\u9879\u76EE

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
git init
yarn init
\`\`\`

  </CodeGroupItem>

  <CodeGroupItem title="npm" active>

\`\`\`bash:
git init
npm init
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u4F9D\u8D56\u5B89\u88C5

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress@next
\`\`\`

  </CodeGroupItem>

  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm install -D vuepress@next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u5728\`package.json\`\u589E\u52A0\u4E2D\u6DFB\u52A0\u4E00\u4E9B scripts

\`\`\`sh
{
  "scripts": {
    "dev": "vuepress dev docs",
    "build": "vuepress build docs"
  }
}
\`\`\`

- \u5C06\u9ED8\u8BA4\u7684\u4E34\u65F6\u76EE\u5F55\u548C\u7F13\u5B58\u76EE\u5F55\u6DFB\u52A0\u5230\`.gitignore\`\u6587\u4EF6\u4E2D

\`\`\`sh
echo 'node_modules' >> .gitignore
echo '.temp' >> .gitignore
echo '.cache' >> .gitignore
echo '.history' >> .gitignore
\`\`\`

- \u521B\u5EFA\u6587\u6863\u76EE\u5F55

\`\`\`sh
mkdir docs
echo '# Hello VuePress' > docs/README.md
\`\`\`

### 3 \u9879\u76EE\u542F\u52A8

\u7528 vscode \u6253\u5F00\u9879\u76EE\uFF0C\u65B0\u5EFA\u7EC8\u7AEF\uFF0C\u6267\u884C\u542F\u52A8\u811A\u672C\u547D\u4EE4

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn dev
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm run docs:dev
\`\`\`

  </CodeGroupItem>
</CodeGroup>

\u8BE6\u7EC6\u7684\u521B\u5EFA\u8FC7\u7A0B\u8BF7\u53C2\u8003[vuepress \u5B98\u7F51\u5FEB\u901F\u4E0A\u624B](https://v2.vuepress.vuejs.org/zh/guide/getting-started.html)\uFF0C\u81F3\u6B64\u9879\u76EE\u642D\u5EFA\u57FA\u7840\u5C31\u8C03\u6574\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u4EEC\u5C31\u53EF\u4EE5\u5F00\u5F00\u5FC3\u5FC3\u7684\u5199\`markdown\`\u6587\u4EF6\u4E86\u3002

## \u4E8C \u529F\u80FD\u914D\u7F6E

&emsp;\`vuepress 2.x\`\u9ED8\u8BA4\u4E3B\u9898\u96C6\u6210\u4E86\u5927\u90E8\u5206\u529F\u80FD\uFF0C\u57FA\u672C\u80FD\u591F\u6EE1\u8DB3\u6211\u4EEC\u7F16\u5199\`markdown\`\u7684\u9700\u6C42\uFF0C\u4F46\u5B98\u65B9\u4E3B\u9898\u4E3B\u8981\u4EE5\u6587\u6863\u4E3A\u4E3B\uFF0C\u5BF9\u4E8E\u535A\u5BA2\u529F\u80FD\u7684\u62D3\u5C55\u9700\u8981\u81EA\u5DF1\u5F00\u53D1\u3002\u9ED8\u8BA4\u4E3B\u9898\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\`\u7EE7\u627F\u7684\u65B9\u5F0F\`\u6765\u62D3\u5C55\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u8BE6\u60C5\u53C2\u8003\u5B98\u7F51[\u4E3B\u9898\u62D3\u5C55](https://v2.vuepress.vuejs.org/zh/reference/default-theme/extending.html)\u3002

&emsp;\u535A\u4E3B\u91C7\u7528\u4E86\u9ED8\u8BA4\u4E3B\u9898\u9884\u8BBE\u7684\`\u5E03\u5C40\u63D2\u69FD\`\u548C\`\u7EC4\u4EF6\u66FF\u6362\`2 \u79CD\u65B9\u5F0F\u7EE7\u627F\u9ED8\u8BA4\u4E3B\u9898(\u5373:\u672C\u5730\u4E3B\u9898\u5F00\u53D1)\u3002\`\u7EC4\u4EF6\u66FF\u6362\`\u4E3B\u8981\u4F53\u73B0\u5728\u535A\u5BA2\u9996\u9875\u5E03\u5C40\uFF0C\u5206\u7C7B\uFF0C\u6807\u7B7E\uFF0C\u65F6\u95F4\u8F74\u5E03\u5C40\u7B49\uFF0C\`\u5E03\u5C40\u63D2\u69FD\`\u4E3B\u8981\u6D89\u53CA\u8BE6\u60C5\u9875\u9876\u90E8\u5206\u7C7B\u548C\u5E95\u90E8\u8BC4\u8BBA\u7B49\u3002\u540C\u65F6\u901A\u8FC7\`vuepress-plugin-blog2\`\u63D2\u4EF6\u62D3\u5C55\u4E86\u535A\u5BA2\u529F\u80FD(\u6587\u7AE0\u5206\u7C7B\uFF0C\u6807\u7B7E\uFF0C\u65F6\u95F4\u8F74)\uFF0C\`vuepress-plugin-blog2\`<Badge type="tip" text="hope\u63D2\u4EF6" vertical="top" />\u8BBE\u8BA1\u6BD4\u8F83\u7075\u6D3B\uFF0C\u53EF\u4EE5\u6839\u636E\u81EA\u8EAB\u9700\u6C42\u8FDB\u884C\u5B9A\u5236\uFF0C\u4E0D\u9650\u4E8E\u5206\u7C7B\u548C\u6807\u7B7E\u7B49\u529F\u80FD\uFF0C\u53EF\u4EE5\u81EA\u884C\u62D3\u5C55\u3002

### 1 \u5E03\u5C40\u63D2\u69FD

::: tip
1\u3001\u9ED8\u8BA4\u4E3B\u9898\u5185\u7F6E 11 \u4E2A\u5E03\u5C40\u63D2\u69FD\uFF0C\u5206\u522B\u4E3A\uFF1A\`navbar\`,\`navbar-before\`,\`navbar-after\`,\`sidebar\`,\`sidebar-top\`,\`sidebar-bottom\`,\`page\`,\`page-top\`,\`page-bottom\`,\`page-content-top\`,\`page-content-bottom\`,\u8BE6\u60C5\u53C2\u8003\u5B98\u7F51[\u5E03\u5C40\u63D2\u69FD](https://v2.vuepress.vuejs.org/zh/reference/default-theme/extending.html#%E5%B8%83%E5%B1%80%E6%8F%92%E6%A7%BD)

2\u3001\u535A\u5BA2\u4E2D\u7528\u5230\u4E86 2 \u4E2A\u63D2\u69FD\`page-top\`\u548C\`page-bottom\`\u3002\u524D\u8005\u7528\u4E8E\u62D3\u5C55\u6587\u7AE0\u9875\u9762\u6807\u9898\u4E0B\u9762\u6587\u7AE0\u4F5C\u8005\uFF0C\u6587\u7AE0\u5206\u7C7B\uFF0C\u6587\u7AE0\u6807\u7B7E\uFF0C\u5B57\u6570\u7EDF\u8BA1\u548C\u9884\u4F30\u9605\u8BFB\u65F6\u95F4\u7B49\u4FE1\u606F\uFF0C\u540E\u8005\u4E3B\u8981\u5D4C\u5957\`giscus\`\u8BC4\u8BBA\u7EC4\u4EF6\`<CommentService />\`,\u5B9E\u73B0\u6587\u7AE0\u8BC4\u8BBA\u529F\u80FD\u3002
:::

- \u914D\u7F6E\u65B9\u6CD5

  1\u3001\u521B\u5EFA\u81EA\u5B9A\u4E49\u5E03\u5C40\u7EC4\u4EF6\`.vuepress/theme/layouts/layout.vue\`

  ::: normal-demo layout \u914D\u7F6E

  \`\`\`js
  <template>
    <ParentLayout>
      <template #page-top>
        <div class="title w-[var(--content-width)] my-0 mx-auto">
          <div class="flex items-center justify-between">
            <h1>{{ page.title }}</h1>
            <Icon icon="RollbackOutlined" text="\u8FD4\u56DE" @click="$router.go(-1)" class="cursor-pointer"></Icon>
          </div>
          <BlogItemInfo :page="page"></BlogItemInfo>
        </div>
      </template>
      <template #page-bottom>
        <CommentService />
      </template>
    </ParentLayout>
  </template>
  <script setup lang="ts">
  import ParentLayout from '@vuepress/theme-default/lib/client/layouts/Layout.vue'
  import BlogItemInfo from '../components/Blog/BlogItemInfo.vue'
  import { usePageData } from '@vuepress/client'
  const page = usePageData()
  <\/script>

  \`\`\`

  :::

  2\u3001\u521B\u5EFA\u4F60\u7684\u672C\u5730\u4E3B\u9898\`.vuepress/theme/index.ts\`\uFF0C\u5E76\u8986\u76D6\u9ED8\u8BA4\u4E3B\u9898\u5E03\u5C40\u3002

  ::: normal-demo index.ts \u914D\u7F6E

  \`\`\`ts
  import type { Theme } from '@vuepress/core'
  import { defaultTheme } from '@vuepress/theme-default'
  import { path } from '@vuepress/utils'
  import { AnyForkThemeOptions } from './types/theme'

  export const AnyForkTheme = (options: AnyForkThemeOptions): Theme => {
    return {
      name: 'vuepress-theme-AnyFork',
      extends: defaultTheme(options),
      alias: {
        '@theme/Home.vue': path.resolve(__dirname, './components/Home.vue'),
        '@theme/NavbarItems.vue': path.resolve(__dirname, './components/NavbarItems.vue'),
        '@theme/HomeFooter.vue': path.resolve(__dirname, './components/HomeFooter.vue')
      },
      layouts: {
        Layout: path.resolve(__dirname, './layouts/Layout.vue'),
        Category: path.resolve(__dirname, './layouts/Category.vue'),
        Tag: path.resolve(__dirname, './layouts/Tag.vue'),
        Timeline: path.resolve(__dirname, './layouts/Timeline.vue'),
        404: path.resolve(__dirname, './layouts/404.vue')
      }
    }
  }
  \`\`\`

  :::

### 2 \u7EC4\u4EF6\u66FF\u6362

::: tip
1\u3001\u5E03\u5C40\u63D2\u69FD\u5341\u5206\u5B9E\u7528\uFF0C\u4F46\u6709\u65F6\u5019\u4F60\u53EF\u80FD\u4F1A\u89C9\u5F97\u5B83\u4E0D\u591F\u7075\u6D3B\u3002\u9ED8\u8BA4\u4E3B\u9898\u540C\u6837\u63D0\u4F9B\u4E86\u66FF\u6362\u5355\u4E2A\u7EC4\u4EF6\u7684\u80FD\u529B\u3002

2\u3001\u9ED8\u8BA4\u4E3B\u9898\u5C06\u6240\u6709 \u975E\u5168\u5C40\u7684\u7EC4\u4EF6 \u90FD\u6CE8\u518C\u4E86\u4E00\u4E2A\u5E26 @theme \u524D\u7F00\u7684 alias \u3002\u4F8B\u5982\uFF0CHomeFooter.vue \u7684\u522B\u540D\u662F @theme/HomeFooter.vue \u3002
:::

- \u914D\u7F6E\u65B9\u6CD5

  1\u3001\u5728\u81EA\u5B9A\u4E49\u4E3B\u9898\u7EC4\u4EF6\u76EE\u5F55\`.vuepress/theme/components\`\u4E0B\u521B\u5EFA\u81EA\u5DF1\u9700\u8981\u8986\u76D6\u7684\u7EC4\u4EF6\u3002

  2\u3001\u5728\u914D\u7F6E\u6587\u4EF6\`.vuepress/theme/index.ts\`\u4E2D\u8FDB\u884C\u7EC4\u4EF6\u8986\u76D6

  ::: normal-demo index.ts \u914D\u7F6E

  \`\`\`ts
  import type { Theme } from '@vuepress/core'
  import { defaultTheme } from '@vuepress/theme-default'
  import { path } from '@vuepress/utils'
  import { AnyForkThemeOptions } from './types/theme'

  export const AnyForkTheme = (options: AnyForkThemeOptions): Theme => {
    return {
      name: 'vuepress-theme-AnyFork',
      extends: defaultTheme(options),
      alias: {
        '@theme/Home.vue': path.resolve(__dirname, './components/Home.vue'),
        '@theme/NavbarItems.vue': path.resolve(__dirname, './components/NavbarItems.vue'),
        '@theme/HomeFooter.vue': path.resolve(__dirname, './components/HomeFooter.vue')
      },
      layouts: {
        Layout: path.resolve(__dirname, './layouts/Layout.vue'),
        Category: path.resolve(__dirname, './layouts/Category.vue'),
        Tag: path.resolve(__dirname, './layouts/Tag.vue'),
        Timeline: path.resolve(__dirname, './layouts/Timeline.vue'),
        404: path.resolve(__dirname, './layouts/404.vue')
      }
    }
  }
  \`\`\`

  :::

### 3 \u535A\u5BA2\u63D2\u4EF6

&emsp;\u535A\u5BA2\u63D2\u4EF6\u4F7F\u7528\u7684\u662F\u7B2C\u4E09\u65B9[vuepress-plugin-blog2](https://vuepress-theme-hope.github.io/v2/blog/zh/)<Badge type="tip" text="hope\u63D2\u4EF6" vertical="top" />\u63D2\u4EF6\u3002\u6B64\u63D2\u4EF6\u548C\u666E\u901A\u63D2\u4EF6\u4F7F\u7528\u65B9\u5F0F\u4E00\u6837\uFF0C\u6839\u636E[\u5B98\u7F51\u914D\u7F6E](https://vuepress-theme-hope.github.io/v2/blog/zh/config.html)\u5373\u53EF\u3002

::: warning
\`vuepress-plugin-blog2\`\u535A\u5BA2\u63D2\u4EF6\u4E3B\u8981\u7528\u6237\u6269\u5C55\u535A\u5BA2\u529F\u80FD\uFF0C\u672A\u5B9E\u73B0\u5206\u9875\u529F\u80FD\uFF0C\u9700\u8981\u81EA\u884C\u5B9E\u73B0\u5206\u9875\u529F\u80FD\u3002
:::

- \u9879\u76EE\u914D\u7F6E

  \`\`\`ts
   //\u535A\u5BA2\u63D2\u4EF6,https://vuepress-theme-hope.github.io/v2/blog/zh/guide.html
    blogPlugin({
        // \u9875\u9762\u8FC7\u6EE4\u5668\uFF0C\u6B64\u51FD\u6570\u7528\u4E8E\u9274\u522B\u9875\u9762\u662F\u5426\u4F5C\u4E3A\u6587\u7AE0\u3002
        filter: ({ filePathRelative }) => filePathRelative ? filePathRelative?.startsWith("posts/") : false,
        // \u83B7\u53D6\u6587\u7AE0\u4FE1\u606F\u7684\u51FD\u6570\u3002
        getInfo: (page) => ({
            ...page
        }),
        category: [
            {
                key: "category",
                getter: (page) => <string[]>page.frontmatter.category || [],
                layout: "Category",
                itemLayout: "Category",
                frontmatter: () => ({ title: "Categories", sidebar: false }),
                itemFrontmatter: (name) => ({
                    title: \`Category \${name}\`,
                    sidebar: false,
                }),
            },
            {
                key: "tag",
                getter: (page) => <string[]>page.frontmatter.tag || [],
                layout: "Tag",
                itemLayout: "Tag",
                frontmatter: () => ({ title: "Tags", sidebar: false }),
                itemFrontmatter: (name) => ({
                    title: \`Tag \${name}\`,
                    sidebar: false,
                }),
            },
        ],

        type: [
            {
                key: "article",
                //\u9700\u8981\u8FC7\u6EE4\u7684\u6761\u4EF6
                filter: (page) => !page.frontmatter.archive,
                path: "/article/",
                layout: "Layout",
                frontmatter: () => ({ title: "Articles", sidebar: false }),
                // sort pages with time and sticky
                sorter: (pageA, pageB) => {
                    if (pageA.frontmatter.sticky && pageB.frontmatter.sticky)
                        return pageA.frontmatter.sticky as number - (pageB.frontmatter.sticky as number);
                    if (pageA.frontmatter.sticky && !pageB.frontmatter.sticky)
                        return -1;
                    if (!pageA.frontmatter.sticky && pageB.frontmatter.sticky) return 1;
                    if (!pageB.frontmatter.date) return 1;
                    if (!pageA.frontmatter.date) return -1;
                    return (
                        new Date(pageB.frontmatter.date).getTime() - new Date(pageA.frontmatter.date).getTime()
                    );
                },
            },
            {
                key: "timeline",
                // only article with date should be added to timeline
                filter: (page) => page.frontmatter.date ? true : false,
                // sort pages with time
                sorter: (pageA, pageB) => new Date(pageB.frontmatter.date as string).getTime() - new Date(pageA.frontmatter.date as string).getTime(),
                path: "/timeline/",
                layout: "Timeline",
                frontmatter: () => ({ title: "Timeline", sidebar: false }),
            },
        ],
        hotReload: true,
    }),
  \`\`\`

  **\u6CE8\u610F**\uFF1A\u63D2\u4EF6\u4E2D\u6709\`category\`\u548C\`type\`\u533A\u5206\uFF0C\u5373\u7C7B\u522B\u548C\u7C7B\u578B\uFF0C\u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u4E3A\u6587\u7AE0\u6761\u4EF6\u8D5B\u9009\u4E3A\u7C7B\u522B\uFF0C\u6BD4\u5982\uFF1A\u5206\u7C7B\uFF0C\u6807\u7B7E\u7B49\uFF0C\u7C7B\u578B\u4E3A\u6587\u7AE0\u96C6\u5408\uFF0C\u65F6\u95F4\u8F74\u7B49\u3002

- \u5BA2\u6237\u7AEF\u7EC4\u5408 API
  1\u3001\u5BA2\u6237\u7AEF\u53EF\u4EE5\u901A\u8FC7\`useBlogCategory()\` \u548C \`useBlogType()\`\u83B7\u53D6\u5F53\u524D\u8DEF\u7531\u7ED1\u5B9A\u7684\u7C7B\u522B\u6216\u7C7B\u578B\u3002

2\u3001\u53EF\u4EE5\u4F20\u9012\u53C2\u6570\u83B7\u53D6\u5177\u4F53\u7684\u7C7B\u522B\u4FE1\u606F\uFF0C\u6BD4\u5982\`useBlogCategory('category')\`

### 4 \u81EA\u5B9A\u4E49\u5BB9\u5668

::: tip
1\u3001\`vueprsss 2.x\` \u4E2D\u5185\u7F6E\u4E86\u81EA\u5B9A\u4E49\u5BB9\u5668\uFF0C\u8BE6\u60C5\u53C2\u8003[\u81EA\u5B9A\u4E49\u5BB9\u5668](https://v2.vuepress.vuejs.org/zh/reference/default-theme/markdown.html)\u3002

2\u3001\u81EA\u5B9A\u4E49\u5BB9\u5668\u4F9D\u8D56\u9ED8\u8BA4\u4E3B\u9898\u5185\u7F6E\u63D2\u4EF6\`@vuepress/plugin-container\`,\u76F8\u5BF9\u4E8E\`vuepress-plugin-container\`(vuepress 1.x)\u800C\u8A00\u53D8\u52A8\u4E0D\u5927\uFF0C\u53EA\u662F\u63D2\u4EF6\u4F7F\u7528\u65B9\u5F0F\u91C7\u7528\u51FD\u6570\u5F0F\u65B9\u5F0F\u96C6\u6210\u3002
:::

&emsp;\u535A\u5BA2\u4E2D\u5185\u7F6E\u4E86 2 \u4E2A\u81EA\u5B9A\u4E49\u5BB9\u5668\`cardList\`\u548C\`cardImgList\`,\u5206\u522B\u7528\u4E8E\u5C55\u793A\u6587\u672C\u5217\u8868\u548C\u56FE\u7247\u5217\u8868\uFF0C\u5177\u4F53\u6548\u679C\u770B\u4E0B\u56FE\uFF1A

\`cardList\` \u5C55\u793A\u6548\u679C
::: cardList 3

\`\`\`yaml
- name: \u5348\u540E\u5357\u6742
  avatar: https://www.recoluan.com/head.png
  desc: Enjoy when you can, and endure when you must.
  link: https://www.recoluan.com
  bgColor: 'rgb(165 216 243)'
  textColor: '#6854A1'
- name: \u897F\u74DC\u76AE\u513F
  desc: enjoy your grow up!
  avatar: https://coderhdy.com/assets/img/snapshot.png
  link: https://coderhdy.com/
  bgColor: '#FCE5BF'
  textColor: '#7B2532'
- name: \u5C0F\u7D2B\u5FF5\u6C81
  desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
  avatar: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png
  link: https://anyfork.gitee.io/blog-docs/
  bgColor: rgb(218 88 88 / 62%)
  textColor: rgb(5 41 14 / 75%)
\`\`\`

:::

\`cardImgList\`\u5C55\u793A\u6548\u679C
::: cardImgList 2

\`\`\`yaml
- img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
  link: https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html
  name: vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
- img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
  link: https://vuepress-theme-reco.recoluan.com/views/plugins/
  name: vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
- img: https://vuepress.vuejs.org/hero.png
  link: https://www.vuepress.cn/
  name: VuePress \u4E2D\u6587\u5B98\u7F51
  desc: VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
- img: https://vuepress.vuejs.org/hero.png
  link: https://vuepress-community.netlify.app/zh/
  name: VuePress \u5B98\u65B9\u793E\u533A
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
\`\`\`

:::

- \u81EA\u5B9A\u4E49\u5BB9\u5668\u5B9E\u73B0\u65B9\u5F0F

  1\u3001\u5728\u81EA\u5B9A\u4E49\u4E3B\u9898\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\`.vuepress/theme/config/container.ts\`\u4E0B\u521B\u5EFA\u81EA\u5B9A\u4E49\u5BB9\u5668\u6587\u4EF6\u3002

  \`\`\`ts
  import type { ContainerPluginOptions, MarkdownItContainerRenderFunction } from '@vuepress/plugin-container'
  const yaml = require('js-yaml')
  const CARD_LIST = 'cardList'
  const CARD_IMG_LIST = 'cardImgList'
  // \u6E32\u67D3md\u5BB9\u5668\u7684\u5361\u7247\u5217\u8868
  function renderCardList(tokens: any, idx: number) {
    const type = tokens[idx].type.split('_')[1]
    const END_TYPE = \`container_\${type}_close\`,
      _tokens$idx = tokens[idx],
      nesting = _tokens$idx.nesting,
      info = _tokens$idx.info
    if (nesting === 1) {
      // \u6E32\u67D3\u5F00\u5934\u7684 ':::' \u6807\u8BB0
      let yamlStr = ''
      for (let i = idx; i < tokens.length; i++) {
        let _tokens$i = tokens[i],
          type = _tokens$i.type,
          content = _tokens$i.content,
          _info = _tokens$i.info
        if (type === END_TYPE) break // \u9047\u5230\u7ED3\u675F\u7684 ':::' \u65F6
        if (!content) continue
        if (type === 'fence' && _info === 'yaml') {
          // \u662F\u4EE3\u7801\u5757\u7C7B\u578B\uFF0C\u5E76\u4E14\u662Fyaml\u4EE3\u7801
          yamlStr = content
        }
      }
      if (yamlStr) {
        // \u6B63\u786E\u89E3\u6790\u51FAyaml\u5B57\u7B26\u4E32\u540E
        const dataObj = yaml.load(yamlStr) // \u5C06yaml\u5B57\u7B26\u4E32\u89E3\u6790\u6210js\u5BF9\u8C61
        let dataList: Array<string> = []

        if (dataObj) {
          // \u6B63\u786E\u89E3\u6790\u51FA\u6570\u636E\u5BF9\u8C61
          dataList = Array.isArray(dataObj) ? dataObj : dataObj.list
        }

        if (dataList && dataList.length) {
          // \u6709\u5217\u8868\u6570\u636E

          // \u6BCF\u884C\u663E\u793A\u51E0\u4E2A
          let row = Number(info.split(' ').pop())
          if (!row || row > 4 || row < 1) {
            row = 3 // \u9ED8\u8BA4 3
          }

          let listDOM = ''
          if (type === CARD_LIST) {
            // \u666E\u901A\u5361\u7247\u5217\u8868
            listDOM = getCardListDOM(dataList, row)
          } else if (type === CARD_IMG_LIST) {
            // \u5361\u7247\u56FE\u7247\u5217\u8868
            listDOM = getCardImgListDOM(dataList, row)
          }

          return \`<div class="\${type}Container"><div class="card-list">\${listDOM}</div>\`
        }
      }
    } else {
      // \u6E32\u67D3':::' \u7ED3\u5C3E
      return '</div>'
    }
  }

  // \u5C06\u6570\u636E\u89E3\u6790\u6210 DOM \u7ED3\u6784 - \u666E\u901A\u5361\u7247\u5217\u8868
  function getCardListDOM(dataList: Array<string>, row: number) {
    let listDOM = ''
    dataList.forEach((item: any) => {
      listDOM += \` <\${item.link ? 'a href="' + item.link + '" target="_blank"' : 'span'} class="card-item \${row ? 'row-' + row : ''}" style="\${item.bgColor ? 'background-color:' + item.bgColor + ';' : ''}\${item.textColor ? 'color:' + item.textColor + ';' : ''}" > \${
        item.avatar ? '<img src="' + item.avatar + '" class="no-zoom">' : ''
      } <div> <p class="name">\${item.name}</p> <p class="desc">\${item.desc}</p> </div> </\${item.link ? 'a' : 'span'}> \`
    })
    return listDOM
  }

  // \u5C06\u6570\u636E\u89E3\u6790\u6210 DOM \u7ED3\u6784 - \u56FE\u6587\u5361\u7247\u5217\u8868
  function getCardImgListDOM(dataList: Array<string>, row: number) {
    let listDOM = ''
    dataList.forEach((item: any) => {
      listDOM += \` <div class="card-item \${row ? 'row-' + row : ''}" > <div class="box-img"> <a href="\${item.link}" target="_blank"> <img src="\${item.img}" class="no-zoom"> </a> </div> <div class="box-info"> <a href="\${item.link}" target="_blank"> <p class="name">\${item.name}</p> \${
        item.desc ? \`<p class="desc">\${item.desc}</p>\` : ''
      }
    </a>
    </div>
   \${item.avatar || item.author ? \`<div class="box-footer"><a href="\${item.link}" target="_blank">\${item.avatar ? \`<img src="\${item.avatar}" class="no-zoom">\` : ''} \${item.author ? \`<span>\${item.author}</span>\` : ''}</a></div>\` : ''}</div> \`
    })
    return listDOM
  }

  export const resolveContainerOptions = (type: string): ContainerPluginOptions => {
    const render: any = renderCardList
    return { type, render }
  }
  \`\`\`

  2\u3001\u5728\u63D2\u4EF6\u914D\u7F6E\u6587\u4EF6\`.vuepress/theme/plugins.ts\`\u4E2D\u8FDB\u884C\u63D2\u4EF6\u914D\u7F6E

  \`\`\`ts
  import { containerPlugin } from '@vuepress/plugin-container'
  import { resolveContainerOptions } from './container'
  export const plugins = [
    //\u81EA\u5B9A\u4E49\u5BB9\u5668cardList
    containerPlugin(resolveContainerOptions('cardList')),
    //\u81EA\u5B9A\u4E49\u5BB9\u5668cardImgList
    containerPlugin(resolveContainerOptions('cardImgList'))
  ]
  \`\`\`

  3\u3001\`cardList\`\u914D\u7F6E

  \`\`\`\`md
  ::: cardList 3

      \`\`\`yaml
      - name: \u5348\u540E\u5357\u6742
        avatar: https://www.recoluan.com/head.png
        desc: Enjoy when you can, and endure when you must.
        link: https://www.recoluan.com
        bgColor: 'rgb(165 216 243)'
        textColor: '#6854A1'
      - name: \u897F\u74DC\u76AE\u513F
        desc: enjoy your grow up!
        avatar: https://coderhdy.com/assets/img/snapshot.png
        link: https://coderhdy.com/
        bgColor: '#FCE5BF'
        textColor: '#7B2532'
      - name: \u5C0F\u7D2B\u5FF5\u6C81
        desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
        avatar: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png
        link: https://anyfork.gitee.io/blog-docs/
        bgColor: rgb(218 88 88 / 62%)
        textColor: rgb(5 41 14 / 75%)
      \`\`\`

  :::
  \`\`\`\`

  4\u3001\`cardImgList\`\u914D\u7F6E\u65B9\u5F0F

  \`\`\`\`md
  ::: cardImgList 2

      \`\`\`yaml
      - img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
        link: https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html
        name: vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B
        desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
      - img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
        link: https://vuepress-theme-reco.recoluan.com/views/plugins/
        name: vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6
        desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
      - img: https://vuepress.vuejs.org/hero.png
        link: https://www.vuepress.cn/
        name: VuePress \u4E2D\u6587\u5B98\u7F51
        desc: VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
      - img: https://vuepress.vuejs.org/hero.png
        link: https://vuepress-community.netlify.app/zh/
        name: VuePress \u5B98\u65B9\u793E\u533A
        desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
      \`\`\`

  :::
  \`\`\`\`

## \u4E09 \u63D2\u4EF6\u5B89\u88C5

&emsp;vuepress \u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\u6269\u5C55\u63D2\u4EF6\u7684\u65B9\u5F0F\u6765\u62D3\u5C55\u529F\u80FD\uFF0C\u901A\u8FC7\u63D2\u4EF6\u53EF\u4EE5\u4E30\u5BCC\u6211\u4EEC\u535A\u5BA2\u529F\u80FD\uFF0C\u4F7F\u9875\u9762\u6548\u679C\u66F4\u52A0\`\u70AB\u9177\`\uFF0C\`\u589E\u5F3A\`\u7F51\u7AD9\u7684\`\u903C\u683C\`\uFF0C\u8BE6\u7EC6\u60C5\u51B5\u53C2\u8003[vuepress@2.x \u63D2\u4EF6\u914D\u7F6E\u65B9\u5F0F](https://v2.vuepress.vuejs.org/zh/guide/plugin.html)\u548C[vuepress@2.x \u5185\u7F6E\u63D2\u4EF6](https://v2.vuepress.vuejs.org/zh/reference/plugin/back-to-top.html)\u3002\`Vuepress 2.x\`\u63D2\u4EF6 API \u53D8\u5316\u6BD4\u8F83\u5927\uFF0C\u4F7F\u7528\u65B9\u5F0F\u4E5F\u91C7\u7528\u51FD\u6570\u5F0F\u8C03\u7528\uFF0C\u56E0\u6B64\u793E\u533A\`Vuepress 1.x\`\u63D2\u4EF6\u4E0D\u80FD\u4F7F\u7528\u3002\u535A\u4E3B\u535A\u5BA2\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u9488\u5BF9\`Vuepress 1.x\`\u7684\u90E8\u5206\u63D2\u4EF6\u8FDB\u884C\u4E86\u517C\u5BB9\`Vuepress 2.x\`\u9002\u914D\uFF0C\u4EE5\u4E0B\u662F\u535A\u5BA2\u4E2D\u7528\u5230\u7684\u63D2\u4EF6\uFF1A

### 1 PWA \u63D2\u4EF6<Badge type="tip" text="\u5B98\u65B9\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001[pwa](https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html)\u63D2\u4EF6\u4E3A\`vuepress 2.x\`\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u4F7F\u4F60\u7684 VuePress \u7AD9\u70B9\u6210\u4E3A\u4E00\u4E2A[\u6E10\u8FDB\u5F0F Web \u5E94\u7528 (PWA)](https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps)\uFF0C\u8BE5\u63D2\u4EF6\u4F7F\u7528[workbox-build](https://developers.google.com/web/tools/workbox/modules/workbox-build?utm_source=devtools) \u6765\u751F\u6210 Service Worker \u6587\u4EF6\uFF0C\u5E76\u901A\u8FC7[register-service-worker](https://github.com/yyx990803/register-service-worker) \u6765\u6CE8\u518C Service Worker

2\u3001[pwa-popup](https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa-popup.html) \u63D2\u4EF6\u4E3A\`vuepress 2.x\`\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u63D0\u4F9B\u4E00\u4E2A\u5F39\u7A97\u7EC4\u4EF6\uFF0C\u5141\u8BB8\u7528\u6237\u624B\u52A8\u5237\u65B0 PWA Service Worker \u3002
\u8BE5\u63D2\u4EF6\u5FC5\u987B\u548C pwa \u63D2\u4EF6 \u4E00\u8D77\u4F7F\u7528\uFF0C\u5E76\u4E14 skipWaiting \u914D\u7F6E\u9879\u4E0D\u80FD\u8BBE\u7F6E\u4E3A true \u3002\u5F53\u65B0\u7684 Service Worker \u5C31\u7EEA\u65F6\uFF0C\u4F1A\u5728\u9875\u9762\u53F3\u4E0B\u89D2\u51FA\u73B0\u4E00\u4E2A\u5F39\u7A97\uFF0C\u8BE2\u95EE\u7528\u6237\u662F\u5426\u9700\u8981\u6FC0\u6D3B\u5904\u4E8E Waiting \u72B6\u6001\u7684 Service Worker \u3002

3\u3001\`pwa\`\u548C\`pwa-popup\`\u4E3A\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5E76\u672A\u96C6\u6210\u7684\u9ED8\u8BA4\u4E3B\u9898\u4E2D\uFF0C\u56E0\u6B64\u9700\u8981\u81EA\u5DF1\u5B89\u88C5\u4F9D\u8D56\u3002
:::

- [pwa](https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

  - \u5B89\u88C5\u4F9D\u8D56

  \`\`\`sh
   npm i -D @vuepress/plugin-pwa@next
  \`\`\`

  - \u63D2\u4EF6\u914D\u7F6E

  \`\`\`js
  import { pwaPlugin } from '@vuepress/plugin-pwa'
  module.exports = {
    plugins: [pwaPlugin()]
  }
  \`\`\`

- [pwa-popup](https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa-popup.html)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

  - \u5B89\u88C5\u4F9D\u8D56

  \`\`\`sh
   npm i -D @vuepress/plugin-pwa-popup@next
  \`\`\`

  - \u63D2\u4EF6\u914D\u7F6E

  \`\`\`js
   pwaPopupPlugin({
        locales: {
            '/': {
                message: '\u53D1\u73B0\u65B0\u5185\u5BB9\u53EF\u7528',
                buttonText: '\u70B9\u6211\u5237\u65B0',
            }
        },
    }),
  \`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003\`pwa\`\u5B98\u7F51\u914D\u7F6E\uFF1A<https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html>

### 2 DocSearch \u63D2\u4EF6<Badge type="tip" text="\u5B98\u65B9\u63D2\u4EF6" vertical="top" />

::: info
1\u3001\u5C06 Algolia DocSearch \u96C6\u6210\u5230 VuePress \u4E2D\uFF0C\u4E3A\u4F60\u7684\u6587\u6863\u7F51\u7AD9\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002

2\u3001\u5F53\u4F60\u6B63\u786E\u914D\u7F6E\u8BE5\u63D2\u4EF6\u540E\uFF0C\u9ED8\u8BA4\u4E3B\u9898\u4F1A\u628A DocSearch \u6309\u94AE\u6DFB\u52A0\u5230\u5BFC\u822A\u680F\u3002

3\u3001\`DocSearch\`\u4E3A\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5E76\u672A\u96C6\u6210\u7684\u9ED8\u8BA4\u4E3B\u9898\u4E2D\uFF0C\u56E0\u6B64\u9700\u8981\u81EA\u5DF1\u5B89\u88C5\u4F9D\u8D56\u3002
:::

- [DocSearch](https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

- \u5B89\u88C5\u4F9D\u8D56

  \`\`\`sh
   npm i -D @vuepress/plugin-docsearch@next
  \`\`\`

- \u63D2\u4EF6\u914D\u7F6E

  \`\`\`js
  import { docsearchPlugin } from '@vuepress/plugin-docsearch'
  module.exports = {
    plugins: [
      //docsearch\u63D2\u4EF6,https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html
      docsearchPlugin({
        apiKey: 'e3224f6a8f05632af9c14c97******b54',
        indexName: 'anyfork',
        appId: '09V****WK61N',
        placeholder: '\u641C\u7D22\u6587\u6863',
        locales: {
          '/': {
            placeholder: '\u641C\u7D22\u6587\u6863',
            translations: {
              button: {
                buttonText: '\u641C\u7D22\u6587\u6863'
              }
            }
          }
        }
      })
    ]
  }
  \`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[DocSearch](https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95)\u5B98\u7F51\u914D\u7F6E\uFF0C\`Algolia\`\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A[VuePress \u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542F Algolia \u5168\u6587\u641C\u7D22](./algoliaSearch.md)

### 3 ReadingTime \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`ReadingTime\u63D2\u4EF6\`\u7EDF\u8BA1\u6587\u7AE0\u5B57\u6570\u548C\u9884\u4F30\u9605\u8BFB\u65F6\u95F4\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/reading-time/zh/>
:::

- [ReadingTime](https://vuepress-theme-hope.github.io/v2/reading-time/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-reading-time2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-reading-time2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-reading-time2@next@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { readingTimePlugin } from 'vuepress-plugin-reading-time2'
module.exports = {
  plugins: [readingTimePlugin({})]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[readingTime](https://vuepress-theme-hope.github.io/v2/reading-time/zh/)\u5B98\u7F51\u914D\u7F6E\u3002

### 4 SEO \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`SEO\u63D2\u4EF6\`\u672C\u63D2\u4EF6\u4F1A\u901A\u8FC7\u5411\u7F51\u7AD9\`<head>\` \u6CE8\u5165\u6807\u7B7E\uFF0C\u8BA9\u4F60\u7684\u7F51\u7AD9\u5B8C\u5168\u652F\u6301 \u5F00\u653E\u5185\u5BB9\u534F\u8BAE OGP \u548C JSON-LD 1.1\uFF0C\u4EE5\u5168\u9762\u589E\u5F3A\u7AD9\u70B9\u7684\u641C\u7D22\u5F15\u64CE\u4F18\u5316\u6027\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/seo/zh/guide.html>
:::

- [SEO](https://vuepress-theme-hope.github.io/v2/seo/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-seo2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-seo2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-seo2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { seoPlugin } from 'vuepress-plugin-seo2'
module.exports = {
  plugins: [
    // seo\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/seo/
    seoPlugin({
      hostname: 'https://anyfork.github.io/',
      author: {
        name: '\u5C0F\u7D2B\u5FF5\u6C81',
        url: 'https://anyfork.github.io/blog-docs/'
      }
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[SEO](https://vuepress-theme-hope.github.io/v2/seo/zh/config.html)\u5B98\u7F51\u914D\u7F6E\u3002

### 5 SiteMap \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`siteMap\u63D2\u4EF6\`\u672C\u63D2\u4EF6\u4F1A\u4E3A\u4F60\u7684\u7F51\u7AD9\u81EA\u52A8\u751F\u6210 Sitemap\u3002\u4E3A\u4E86\u4F7F\u63D2\u4EF6\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u4F60\u9700\u8981\u5C06\u90E8\u7F72\u7684\u57DF\u540D\u4F20\u9012\u7ED9\u63D2\u4EF6\u7684 hostname \u9009\u9879\u3002\u63D2\u4EF6\u4F1A\u81EA\u52A8\u6839\u636E\u9875\u9762\u7684 Git \u7684\u65F6\u95F4\u6233\u751F\u6210\u9875\u9762\u7684\u6700\u540E\u66F4\u65B0\u65F6\u95F4\uFF0C\u540C\u65F6\u4F1A\u6839\u636E\u7AD9\u70B9\u7684\u591A\u8BED\u8A00\u914D\u7F6E\u58F0\u660E\u9875\u9762\u7684\u5176\u4ED6\u8BED\u8A00\u7248\u672C\u66FF\u4EE3\u5730\u5740\u3002\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/sitemap/zh/>
:::

- [SEO](https://vuepress-theme-hope.github.io/v2/seo/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A

- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-sitemap2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-sitemap2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-sitemap2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>
- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { sitemapPlugin } from 'vuepress-plugin-sitemap2'
module.exports = {
  plugins: [
    // siteMap\u7AD9\u70B9\u5730\u56FE\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/sitemap/zh/config.html
    sitemapPlugin({
      hostname: 'https://anyfork.github.io/blog-docs/',
      extraUrls: ['https://anyfork.gitee.io/blog-docs/']
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[siteMap](https://vuepress-theme-hope.github.io/v2/sitemap/zh/config.html)\u5B98\u7F51\u914D\u7F6E\u3002

### 6 Copyright \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`copyright\u63D2\u4EF6\`\u6B64\u63D2\u4EF6\u53EF\u4EE5\u5728\u8BBF\u95EE\u8005\u4ECE\u4F60\u7684\u7AD9\u70B9\u590D\u5236\u5185\u5BB9\u65F6\uFF0C\u81EA\u52A8\u8FFD\u52A0\u7248\u6743\u4FE1\u606F\uFF0C\u4E5F\u53EF\u4EE5\u7981\u6B62\u7AD9\u70B9\u7684\u590D\u5236\u6216\u8005\u9009\u62E9\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/copyright/zh/>
:::

- [copyright](https://vuepress-theme-hope.github.io/v2/copyright/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-copyright2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-copyright2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-copyright2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { copyrightPlugin } from 'vuepress-plugin-copyright2'
module.exports = {
  plugins: [
    //\u590D\u5236\u52A0\u7248\u6743\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/copyright/zh/config.html
    copyrightPlugin({
      hostname: 'https://anyfork.github.io/blog-docs/',
      author: '\u5C0F\u7D2B\u5FF5\u6C81',
      global: true
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[copyright](https://vuepress-theme-hope.github.io/v2/copyright/zh/config.html)\u5B98\u7F51\u914D\u7F6E\u3002

### 7 CopyCode \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`copyCode\u63D2\u4EF6\`\u6B64\u63D2\u4EF6\u4F1A\u81EA\u52A8\u6DFB\u52A0\u590D\u5236\u6309\u94AE\u5230\u6BCF\u4E2A\u4EE3\u7801\u5757\u7684\u53F3\u4E0B\u89D2\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6309\u94AE\u4EC5\u5728\u684C\u9762\u6A21\u5F0F\u663E\u793A\uFF0C\u5982\u679C\u4F60\u9700\u8981\u5728\u79FB\u52A8\u7AEF\u5C55\u793A\u8FD9\u4E2A\u6309\u94AE\uFF0C\u8BF7\u5C06 showInMobile \u8BBE\u7F6E\u4E3A true\u3002\u5728\u7528\u6237\u70B9\u51FB\u590D\u5236\u6309\u94AE\u540E\uFF0C\u5C4F\u5E55\u4E0A\u4F1A\u663E\u793A\u4E00\u4E2A\u590D\u5236\u6210\u529F\u7684\u63D0\u793A\u3002\u9ED8\u8BA4\u7684\u63D0\u793A\u65F6\u957F\u4E3A 2000ms\uFF0C\u5982\u679C\u4F60\u9700\u8981\u66F4\u6539\u8FD9\u4E2A\u65F6\u957F\uFF0C\u8BF7\u8BBE\u7F6E duration(\u5355\u4F4D ms)\uFF0C\u5982\u679C\u4F60\u4E0D\u9700\u8981\u8FD9\u4E2A\u63D0\u793A\uFF0C\u8BF7\u5C06 duration \u8BBE\u7F6E\u4E3A 0\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/copy-code/zh/>
:::

- [CopyCode](https://vuepress-theme-hope.github.io/v2/copy-code/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-copy-code2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-copy-code2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-copy-code2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { copyCodePlugin } from 'vuepress-plugin-copy-code2'
module.exports = {
  plugins: [
    //\u4EE3\u7801\u590D\u5236\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/copy-code/zh/
    copyCodePlugin({
      selector: '.theme-default-content div[class*="language-"] pre',
      locales: {
        '/': {
          copy: '\u590D\u5236\u6210\u529F!',
          hint: 'copy!'
        }
      }
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[copyCode](https://vuepress-theme-hope.github.io/v2/copy-code/zh/config.html)\u5B98\u7F51\u914D\u7F6E\u3002

### 8 Waline \u8BC4\u8BBA\u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`Giscus\u63D2\u4EF6\`Giscus \u662F\u4E00\u4E2A\u57FA\u4E8E GitHub Discussion \u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u542F\u7528\u7B80\u4FBF\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/comment/zh/guide/giscus.html>,\u539F\u672C\u535A\u4E3B\u91C7\u7528\u7684\u662F\`Giscus\`\u4F5C\u4E3A\u8BC4\u8BBA\u63D2\u4EF6\uFF0C\u4F46\u53D1\u73B0\u5176\u6CA1\u6709\u6D4F\u89C8\u91CF\u7EDF\u8BA1\u529F\u80FD\uFF0C\u540E\u91C7\u7528\`Waline\`\u63D2\u4EF6\uFF0C\u4E0D\u4EC5\u5177\u6709\u8BC4\u8BBA\u529F\u80FD\uFF0C\u8FD8\u80FD\u8FDB\u884C\u6D4F\u89C8\u91CF\u7EDF\u8BA1\u3002

4\u3001\`Waline\u63D2\u4EF6\`\u662F\u5BF9\`valine\u63D2\u4EF6\`\u7684\u5C01\u88C5\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86\`valine\`\u6570\u636E\u4E0D\u5B89\u5168\u95EE\u9898\uFF0C\u540C\u65F6\u4E5F\u5177\u5907\`valine\`\u4E00\u5207\u529F\u80FD\u3002\u53EF\u4EE5\u4F7F\u7528 hope \u63D2\u4EF6\u7528\u6CD5\uFF0C\u5355\u9875\u9762\u96C6\u6210\u597D\u4E86\u6D4F\u89C8\u91CF\u529F\u80FD\uFF0C\u901A\u8FC7\u5BFB\u627E\u9ED8\u8BA4\u7C7B\u9009\u62E9\u5668\`waline-pageview-count\`\u8FDB\u884C\u6570\u636E\u81EA\u52A8\u586B\u5145\uFF0C\u4F46\u5BF9\u4E8E\u9996\u9875\u5217\u8868\u672A\u5B9E\u73B0\u6D4F\u89C8\u91CF\u529F\u80FD\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u81EA\u884C\u5B9E\u73B0\u5373\u53EF\u3002\u63D2\u4EF6\u914D\u7F6E\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html>,\u4EA6\u53EF\u5355\u72EC\u4F7F\u7528\uFF0C\u8BE6\u89C1[waline \u5B98\u7F51](https://waline.js.org/guide/get-started.html)\u3002
:::

- [Waline](https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-comment2@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-comment2@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-comment2@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

:::tip
1\u3001\u53EF\u4EE5\u6309\u7167\`hope\`\u63D2\u4EF6\u914D\u7F6E\u6D41\u7A0B\u8FDB\u884C\u914D\u7F6E\uFF0C\u91C7\u7528\`waline\`\u5B98\u65B9\u9ED8\u8BA4\u7684\`LeanCloud \`\u6570\u636E\u5E93\u548C\`Vercel\`\u670D\u52A1\u7AEF\u90E8\u7F72\u65B9\u5F0F\u3002\u535A\u4E3B\u5C1D\u8BD5\u8FC7\u56FD\u5185\u6548\u679C\u4E0D\u592A\u597D\uFF0C\u4E0D\u5F00\u68AF\u5B50\u60C5\u51B5\u4E0B\`Vercel\`\u670D\u52A1\u7AEF\u5730\u5740\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u4E8E\u662F\u4FBF\u653E\u5F03\u4E86\u3002

2\u3001\u6309\u7167[waline \u5B98\u7F51](https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93)\u670D\u52A1\u7AEF\u90E8\u7F72\u65B9\u5F0F\u8FDB\u884C\u670D\u52A1\u7AEF\u90E8\u7F72\u3002\u5404\u79CD\u65B9\u5F0F\u90FD\u5C1D\u8BD5\u4E86\u4E00\u4E0B,\u7ED3\u679C\u5982\u4E0B\uFF1A1 \u817E\u8BAF\u4E91\u4E91\u51FD\u6570\u8BA1\u7B97\u4ECA\u5E74 8 \u6708\u5F00\u59CB\u6536\u8D39\uFF0C\u6700\u4F4E\u6BCF\u6708 19.9\uFF0C\u653E\u5F03\u4E86\u30022 \u767E\u5EA6\u4E91\u6309\u7167\u5B98\u7F51\u6D41\u7A0B\u90E8\u7F72\uFF0C\u7A0B\u5E8F\u62A5\u9519\uFF0C\u4F9D\u8D56\u7248\u672C\u95EE\u9898\uFF0C\u4FBF\u653E\u5F03\u4E86\u30023 \u963F\u91CC\u4E91\u90E8\u7F72\u6210\u529F\u4E86\uFF0C\u4E91\u51FD\u6570\u8BA1\u7B97\u6BCF\u6708 100 \u4E07\u514D\u8D39\u6B21\u6570\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\uFF0C\u4F46\u670D\u52A1 url \u9700\u8981\u81EA\u5B9A\u4E49\u57DF\u540D\u8FDB\u884C\u6620\u5C04\uFF0C\u4E0D\u7136\u6CA1\u6CD5\u76F4\u63A5\u4F7F\u7528\uFF0C\u4F1A\u76F4\u63A5\u4E0B\u8F7D html\uFF0C\u9700\u8981\u6709\u963F\u91CC\u4E91\u57DF\u540D\u6216\u8005\u8BF4\u963F\u91CC\u4E91\u670D\u52A1\u5668\uFF0C\u535A\u4E3B\u6CA1\u6709\u963F\u91CC\u4E91\u670D\u52A1\u5668\u4FBF\u653E\u5F03\u4E86\u3002\u4E0A\u9762\u7684\u65B9\u5F0F\u963F\u91CC\u4E91\u6700\u5408\u9002\uFF0C\u6709\u6761\u4EF6\u7684\u5C0F\u4F19\u4F34\u53EF\u4EE5\u5C1D\u8BD5\u3002

3\u3001\u535A\u4E3B\u63A8\u8350\u901A\u8FC7\u81EA\u5DF1\u90E8\u7F72\`waline\`\u670D\u52A1\u5668\u7684\u65B9\u5F0F\uFF0C\u4E3B\u8981\u539F\u56E0\u662F\uFF1A\u90E8\u7F72\u7B80\u5355\uFF0C\u7075\u6D3B\uFF0C\u8BBF\u95EE\u901F\u5EA6\u66F4\u5FEB\uFF0C\u8FD8\u80FD\u81EA\u5B9A\u4E49\u6570\u636E\u5E93\uFF0C\u524D\u63D0\u662F\u81EA\u5DF1\u8981\u6709\u4E91\u670D\u52A1\u5668\u548C\u57DF\u540D\u3002\u8BE6\u7EC6\u90E8\u7F72\u65B9\u5F0F\u53C2\u8003\u5B98\u7F51[\u72EC\u7ACB\u90E8\u7F72](https://waline.js.org/guide/server/vps-deploy.html)\u6216\u8005[Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848](./walineServer.md)\u3002\u6309\u7167\u4E0A\u8FF0\u64CD\u4F5C\u5373\u53EF\uFF0C\u53EA\u9700\u8981\u914D\u7F6E\u597D\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\uFF0C\u4E0A\u7EBF\u90E8\u7F72\u5373\u53EF\u3002
:::

\`\`\`js
import { commentPlugin } from 'vuepress-plugin-comment2'
module.exports = {
  plugins: [
    commentPlugin({
      provider: 'Waline',
      //\u72EC\u7ACB\u90E8\u7F72\u7684waline\u670D\u52A1\u5668\u8BBF\u95EE\u5730\u5740
      serverURL: 'XXXX',
      //\u662F\u5426\u5F00\u542F\u8BBF\u95EE\u91CF
      pageview: true
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[Waline](https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93)\u5B98\u7F51\u914D\u7F6E\u3002

### 9 Markdown \u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`Hope\u63D2\u4EF6\`\u6307\`vuepress-theme-hope\`\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002

2\u3001\`Hope\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html>

3\u3001\`Markdown\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6\`\u901A\u8FC7\u5B89\u88C5\u5E76\u542F\u7528\u6B64\u63D2\u4EF6\uFF0C\u4F60\u53EF\u4EE5\u5728 Markdown \u4E2D\u4F7F\u7528\u66F4\u591A\u7684\u8BED\u6CD5\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://vuepress-theme-hope.github.io/v2/md-enhance/zh/>
:::

- [Markdown \u8BED\u6CD5\u6269\u5C55](https://vuepress-theme-hope.github.io/v2/md-enhance/zh/)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D vuepress-plugin-md-enhance@next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D vuepress-plugin-md-enhance@next
\`\`\`

  </CodeGroupItem>
    <CodeGroupItem title="pnpm">

\`\`\`bash:
pnpm add -D vuepress-plugin-md-enhance@next
\`\`\`

  </CodeGroupItem>

</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { mdEnhancePlugin } from 'vuepress-plugin-md-enhance'
module.exports = {
  plugins: [
    //markdown \u589E\u5F3A\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/
    mdEnhancePlugin({
      // \u542F\u7528\u81EA\u5B9A\u4E49\u5BB9\u5668
      container: true
    })
  ]
}
\`\`\`

\u4F60\u53EF\u4EE5\u5728\u9009\u9879\u4E2D enableAll \u8BBE\u7F6E\u4E3A true \u6765\u542F\u7528\u63D2\u4EF6\u7684\u6240\u6709\u529F\u80FD,\u4E0D\u5EFA\u8BAE\u5F00\u542F\u5168\u90E8\u6269\u5C55\u529F\u80FD\uFF0C\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8FDB\u884C\u5F00\u542F

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[Markdown \u8BED\u6CD5\u6269\u5C55](https://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/)\u5B98\u7F51\u914D\u7F6E\u3002

### 10 \u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6\`\u53EF\u4EE5\u5728\u7F51\u7AD9\u5168\u5C40\u6CE8\u518C\u97F3\u4E50\u64AD\u653E\u5668\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u914D\u7F6E\u672C\u5730\u6216\u7EBF\u4E0A\u97F3\u4E50\uFF0C\u5B9E\u73B0\u97F3\u4E50\u5728\u7EBF\u64AD\u653E\u3002
:::

- [\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-bgm-player-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D @anyfork/vuepress-plugin-bgm-player-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-bgm-player-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { bgmMusicPlayer } from '@anyfork/vuepress-plugin-bgm-player-next'
module.exports = {
  plugins: [
    //\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6\u3002
    bgmMusicPlayer({
      audios: [
        {
          name: '\u5361\u519C',
          artist: '\u5361\u519C\u94A2\u7434\u7248',
          url: '/blog-docs/music/canon/canon.mp3',
          cover: '/blog-docs/music/canon/canon.jpg'
        },
        {
          name: '\u98CE\u5C45\u4F4F\u7684\u8857\u9053',
          artist: '\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2',
          url: '/blog-docs/music/wind/wind.mp3',
          cover: '/blog-docs/music/wind/wind.jpg'
        },
        {
          name: '\u591C\u7684\u94A2\u7434\u66F2',
          artist: '\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB',
          url: '/blog-docs/music/night/night.mp3',
          cover: '/blog-docs/music/night/night.jpg'
        }
      ],
      autoShrink: true,
      floatStyle: { bottom: '100px', 'z-index': '999999' }
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-bgm-player-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 11 \u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6\`\u9F20\u6807\u70B9\u51FB\u65F6\u89E6\u53D1\u70B9\u51FB\u7279\u6548\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next>
:::

- [\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-cursor-effects-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-cursor-effects-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { cursorEffects } from '@anyfork/vuepress-plugin-cursor-effects-next'
module.exports = {
  plugins: [
    //\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6
    cursorEffects({
      size: 4,
      shape: 'star'
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 12 \u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6\`\u5F53\u4ECA\u65E5\u6216\u79BB\u5F00\u9875\u9762 tabs \u65F6 title \u53D1\u751F\u53D8\u5316\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next>
:::

- [\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-dynamic-title-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-dynamic-title-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { dynamicTitle } from '@anyfork/vuepress-plugin-dynamic-title-next'
module.exports = {
  plugins: [dynamicTitle()]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 13 \u770B\u677F\u5A18\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u770B\u677F\u5A18\u63D2\u4EF6\`\u5F53\u4ECA\u65E5\u6216\u79BB\u5F00\u9875\u9762 tabs \u65F6 title \u53D1\u751F\u53D8\u5316\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next>
:::

- [\u770B\u677F\u5A18\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-kan-ban-niang-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-kan-ban-niang-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { kanBanNiang } from '@anyfork/vuepress-plugin-kan-ban-niang-next'
module.exports = {
  plugins: [kanBanNiang()]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u770B\u677F\u5A18\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 14 \u80CC\u666F\u5F69\u5E26\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6\`\u80CC\u666F\u5F69\u5E26\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next>
:::

- [\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-ribbon-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-ribbon-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { ribbon } from '@anyfork/vuepress-plugin-ribbon-next'
module.exports = {
  plugins: [
    //\u5F69\u5E26
    ribbon({
      size: 120, // \u9ED8\u8BA4\u6570\u636E
      opacity: 0.3, //  \u900F\u660E\u5EA6
      zIndex: -1, //  \u5C42\u7EA7
      option: {
        // \u8272\u5E26HSL\u9971\u548C\u5EA6
        colorSaturation: '80%',
        // \u8272\u5E26HSL\u4EAE\u5EA6\u91CF
        colorBrightness: '60%',
        // \u5E26\u72B6\u989C\u8272\u4E0D\u900F\u660E\u5EA6
        colorAlpha: 0.65,
        // \u5728HSL\u989C\u8272\u7A7A\u95F4\u4E2D\u5FAA\u73AF\u663E\u793A\u989C\u8272\u7684\u901F\u5EA6\u6709\u591A\u5FEB
        colorCycleSpeed: 6,
        // \u4ECE\u54EA\u4E00\u4FA7\u5F00\u59CBY\u8F74 (top|min, middle|center, bottom|max, random)
        verticalPosition: 'max',
        // \u5230\u8FBE\u5C4F\u5E55\u53E6\u4E00\u4FA7\u7684\u901F\u5EA6\u6709\u591A\u5FEB
        horizontalSpeed: 200,
        // \u5728\u4EFB\u4F55\u7ED9\u5B9A\u65F6\u95F4\uFF0C\u5C4F\u5E55\u4E0A\u4F1A\u4FDD\u7559\u591A\u5C11\u6761\u5E26
        ribbonCount: 3,
        // \u6DFB\u52A0\u7B14\u5212\u4EE5\u53CA\u8272\u5E26\u586B\u5145\u989C\u8272
        strokeSize: 0,
        // \u901A\u8FC7\u9875\u9762\u6EDA\u52A8\u4E0A\u7684\u56E0\u5B50\u5782\u76F4\u79FB\u52A8\u8272\u5E26
        parallaxAmount: -0.5,
        // \u968F\u7740\u65F6\u95F4\u7684\u63A8\u79FB\uFF0C\u4E3A\u6BCF\u4E2A\u529F\u80FD\u533A\u6DFB\u52A0\u52A8\u753B\u6548\u679C
        animateSections: true
      },
      //  \u70B9\u51FB\u5F69\u5E26  true\u663E\u793A  false\u4E3A\u4E0D\u663E\u793A
      ribbonShow: false,
      // \u6ED1\u52A8\u5F69\u5E26
      ribbonAnimationShow: true
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next)\u5B98\u7F51\u914D\u7F6E\u3002

### 15 \u6A31\u82B1\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" />

::: tip
1\u3001\`AnyFork\u63D2\u4EF6\`\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002

2\u3001\`AnyFork\u63D2\u4EF6\`\u5B98\u7F51\u5730\u5740\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork>

3\u3001\`\u6A31\u82B1\u7279\u6548\u63D2\u4EF6\`\u80CC\u666F\u5F69\u5E26\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next>
:::

- [\u6A31\u82B1\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next)\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A
- \u5B89\u88C5\u4F9D\u8D56

<CodeGroup>
  <CodeGroupItem title="yarn">

\`\`\`bash:
yarn add -D  @anyfork/vuepress-plugin-sakura-next
\`\`\`

  </CodeGroupItem>
  <CodeGroupItem title="npm" active>

\`\`\`bash:
npm i -D @anyfork/vuepress-plugin-sakura-next
\`\`\`

  </CodeGroupItem>
</CodeGroup>

- \u63D2\u4EF6\u914D\u7F6E

\`\`\`js
import { sakura } from '@anyfork/vuepress-plugin-sakura-next'
module.exports = {
  plugins: [
    //\u6A31\u82B1\u7279\u6548
    sakura({
      sakura_zindex: 1,
      sakura_img: '/blog-docs/images/blue.png'
    })
  ]
}
\`\`\`

- \u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003[\u6A31\u82B1\u7279\u6548\u63D2\u4EF6](https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next)\u5B98\u7F51\u914D\u7F6E\u3002

## \u56DB \u9879\u76EE\u90E8\u7F72

\`vuepress\`\u9879\u76EE\u548C\u666E\u901A vue \u90FD\u5C5E\u4E8E\u5355\u9875\u9762\u5E94\u7528\uFF0C\u9879\u76EE\u6253\u5305\u90E8\u7F72\u65B9\u5F0F\u4E5F\u4E00\u81F4\uFF0C\u53EF\u4EE5\u91C7\u7528\u672C\u5730\u90E8\u7F72\uFF0C\u4E5F\u53EF\u4EE5\u91C7\u7528\u4E91\u670D\u52A1\u5668\u8FDB\u884C\u90E8\u7F72\u3002\u4E0B\u9762\u603B\u7ED3 2 \u79CD\u90E8\u7F72\u65B9\u5F0F\uFF1A

- 1 \u672C\u5730 nginx \u90E8\u7F72\u9759\u6001\u6587\u4EF6 \u3002
- 2 \u901A\u8FC7\`Gitee Actions\`\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\u5230\`Github Pages\`\u548C\`Gitee Pages\`\u3002

::: warning
1\u3001\u5982\u679C\u9879\u76EE\u8BBE\u7F6E\u4E86\`base\`,\u4E0D\u53EF\u76F4\u63A5\u5728\u672C\u5730\u5F00\u542F\u4E00\u4E2A\u670D\u52A1\u5668(eg:http-server)\u8FDB\u884C\u90E8\u7F72\uFF0C\u9700\u8981\u901A\u8FC7 nginx \u670D\u52A1\u5668\u8FDB\u884C\u53CD\u5411\u4EE3\u7406\u3002

2\u3001\u5982\u679C\u9879\u76EE\u6CA1\u6709\u8BBE\u7F6E\`base\`,\u53EF\u4EE5\u901A\u8FC7\u672C\u5730\u9759\u6001\u670D\u52A1\u5668\u6216 nginx \u670D\u52A1\u5668\u8FDB\u884C\u4EE3\u7406\u3002

3\u3001\`base\`\u7C7B\u578B: string,\u9ED8\u8BA4\u503C: /,\u90E8\u7F72\u7AD9\u70B9\u7684\u57FA\u7840\u8DEF\u5F84\uFF0C\u5982\u679C\u4F60\u60F3\u8BA9\u4F60\u7684\u7F51\u7AD9\u90E8\u7F72\u5230\u4E00\u4E2A\u5B50\u8DEF\u5F84\u4E0B\uFF0C\u4F60\u5C06\u9700\u8981\u8BBE\u7F6E\u5B83\u3002\u5982 Github pages\uFF0C\u5982\u679C\u4F60\u60F3\u5C06\u4F60\u7684\u7F51\u7AD9\u90E8\u7F72\u5230 https://foo.github.io/bar/\uFF0C\u90A3\u4E48 base \u5E94\u8BE5\u88AB\u8BBE\u7F6E\u6210 \u201C/bar/\u201D\uFF0C\u5B83\u7684\u503C\u5E94\u5F53\u603B\u662F\u4EE5\u659C\u6760\u5F00\u59CB\uFF0C\u5E76\u4EE5\u659C\u6760\u7ED3\u675F\u3002base \u5C06\u4F1A\u81EA\u52A8\u5730\u4F5C\u4E3A\u524D\u7F00\u63D2\u5165\u5230\u6240\u6709\u4EE5 / \u5F00\u59CB\u7684\u5176\u4ED6\u9009\u9879\u7684\u94FE\u63A5\u4E2D\uFF0C\u6240\u4EE5\u4F60\u53EA\u9700\u8981\u6307\u5B9A\u4E00\u6B21\u3002
:::

### 1 nginx \u670D\u52A1\u5668\u90E8\u7F72

- \`base\`\u4E3A\`/\`\u65F6\uFF0C\u76F8\u5E94\u7684 nginx \u914D\u7F6E\u5341\u5206\u7B80\u5355\uFF0C\u76F4\u63A5\u6307\u5B9A\u7AEF\u53E3\u5982\u4E0B\u9762\u793A\u4F8B\u7684 8080\uFF0C\u5E76\u6307\u5B9A root \u8DEF\u5F84\uFF08\u5373 build \u540E\u653E\u5728\u670D\u52A1\u5668\u7684\u8DEF\u5F84\uFF09nginx.conf \u914D\u7F6E\u5982\u4E0B\uFF1A

  \`\`\`conf
  server {
    listen 8080;
    location / {
        root /root/doc/dist;
        try_files $uri $uri/ /index.html;
        index index.html index.htm;
      }
  }
  \`\`\`

- \`base\`\u4E3A\`/blog-docs\`\u65F6\uFF0C\u6BD4\u5982\u672C\u7AD9\uFF0C\u914D\u7F6E\u7684\u4E3A/blog-docs\uFF0C\u914D\u7F6E\u4E5F\u5F88\u7B80\u5355\uFF0C\u53EA\u9700\u8981\u4E0A\u9762\u7684 location \u7531/\u6539\u4E3A/blog-docs/\uFF0C\u6CE8\u610F\u6700\u540E\u4E00\u4E2A\u659C\u6760\u3002nginx.conf \u914D\u7F6E\u5982\u4E0B\uFF1A
  \`\`\`conf
  server {
    listen 80;
    server_name localhost;
    client_max_body_size 20m;
    charset utf-8;
      #\u914D\u7F6E\u4E86\u8F6C\u53D1
    location /blog-docs/ {
      proxy_pass http://localhost:8081/;
    }
  }
  #\u57288081\u4E0A\u8D77\u4E86vuepress
  server {
    listen 8081;
    location / {
        root /root/doc/dist;
        try_files $uri $uri/ /index.html;
        index index.html index.htm;
    }
  }
  \`\`\`

### 2 \u90E8\u7F72\u5728\`Github Pages\`\u548C\`Gitee Pages\`

&emsp;\u9879\u76EE\u91C7\u7528\`Github Pages\`\u548C\`Gitee Pages\`\u65B9\u5F0F\u8FDB\u884C\u4EE3\u7406\u90E8\u7F72\uFF0C\u4F9D\u9760\`Github\`\u5F3A\u5927\u7684\u5DE5\u4F5C\u6D41\u673A\u5236\u5B9E\u73B0\u81EA\u52A8\u7F16\u8BD1\u6253\u5305\u90E8\u7F72\u3002\u5927\u81F4\u90E8\u7F72\u6D41\u7A0B\uFF1A\u672C\u5730\u901A\u8FC7 git \u63D0\u4EA4\u6E90\u4EE3\u7801\uFF0C\`Github Actions\`\u89E6\u53D1\u5DE5\u4F5C\u6D41\`workflows\`\u5B9E\u73B0\u5206\u652F\u4EE3\u7801\u68C0\u51FA\uFF0C\u4F9D\u8D56\u5B89\u88C5\uFF0C\u6253\u5305\u7F16\u8BD1\uFF0C\u521B\u5EFA\`gh-pages\`\u5206\u652F\uFF0C\u4E0A\u4F20\`dist\`\u7F16\u8BD1\u540E\u4EE3\u7801\u5230\`gh-pages\`\uFF0C\`gh-pages\`\u5206\u652F\u90E8\u7F72\u5230\`\`Github Pages\`\uFF0C\u540C\u6B65\`Github\`\u4ED3\u5E93\u4EE3\u7801\u81F3\`Giee\`,\`Gitee Pages\`\u90E8\u7F72\u3002\u4E0A\u8FF0\u6D41\u7A0B\u5B9E\u73B0\u4E86\u81EA\u52A8\u7F16\u8BD1\u90E8\u7F72\u548C\`github\`\u4EE3\u7801\u540C\u6B65\u90E8\u7F72\u81F3\`gitee\`\u3002

\u5177\u4F53\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u8BF7\u53C2\u8003\uFF1A[GitHub Actions \u81EA\u52A8\u90E8\u7F72 GitHub Pages \u5E76\u540C\u6B65 Gitee Pages](./githubPages.md)
`,contentRendered:`<p>\u2003\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u7684\u6478\u7D22\uFF0C\u8E29\u8FC7\u4E86\u65E0\u6570\u7684\u5751\uFF0C\u7EC8\u4E8E\u642D\u5EFA\u597D\u4E86\u4E00\u4E2A\u5C5E\u4E8E\u81EA\u5DF1\u7684\u535A\u5BA2\u3002\u5728\u6B64\u8BB0\u5F55\u4E00\u4E0B\u8E29\u5751\u8FC7\u7A0B\uFF0C\u8BA9\u4EE5\u540E\u7684\u5C0F\u4F19\u4F34\u4EEC\u642D\u5EFA\u81EA\u5DF1\u535A\u5BA2\u7684\u65F6\u5019\u5C11\u8D70\u5F2F\u8DEF\u3002\u535A\u5BA2\u91C7\u7528\u4E86<code v-pre>vuepress@2.x</code>\u7248\u672C\u8FDB\u884C\u6784\u5EFA\uFF0C\u540C\u65F6\u5BF9\u9ED8\u8BA4\u4E3B\u9898\u8FDB\u884C\u4E86\u672C\u5730\u5316\u7EE7\u627F\u4FEE\u6539\uFF0C\u6574\u4E2A\u4E3B\u9898\u5927\u7684\u5E03\u5C40\u672A\u6539\u52A8\uFF0C\u53EA\u662F\u5BF9\u9996\u9875\u548C\u5C55\u793A\u9875\u9762\u8FDB\u884C\u4E86\u5E03\u5C40\u8C03\u6574\uFF0C\u6700\u7EC8\u6548\u679C\u4E3A\u5F53\u524D\u535A\u5BA2\u663E\u793A\u6548\u679C\u3002\u5C0F\u4F19\u4F34\u4EEC\u8FD8\u7B49\u4EC0\u4E48\uFF0C\u8D76\u5FEB\u5F00\u59CB\u5427\uFF01\u{1F44D}</p>
<!-- more -->
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u535A\u4E3B\u4EE5\u524D\u4E5F\u7528<code v-pre>vuepress-theme-reco@1.x</code>\u4E3B\u9898\u642D\u5EFA\u4E86\u4E00\u4E2A\u535A\u5BA2\uFF0C\u6BD4\u8F83\u559C\u6B22vuepress-theme-reco@1.x\u98CE\u683C\uFF0C\u7531\u4E8E<code v-pre>vuepress-theme-reco@1.x</code>\u91C7\u7528\u7684\u6280\u672F\u90FD\u76F8\u5BF9\u76EE\u524D\u6BD4\u8F83\u843D\u540E\uFF0C\u540E\u6765\u4FBF\u7528<code v-pre>vuepress 2.X</code>\u5F00\u53D1\u4E86\u73B0\u5728\u7684\u535A\u5BA2\uFF0C\u6574\u4F53\u9875\u9762\u98CE\u683C\u548C\u6837\u5F0F\u548C\u539F\u6765\u7684\u4E00\u6A21\u4E00\u6837\uFF0C\u4F46\u4E3B\u9898\u8FD8\u662F\u7EE7\u627F\u4E86<code v-pre>vuepress 2.X</code>\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u589E\u52A0\u4E86\u535A\u5BA2,\u5206\u7C7B\uFF0C\u6807\u7B7E\u529F\u80FD\u548C\u5176\u4ED6\u9996\u9875\u7279\u6548\u63D2\u4EF6\u3002</p>
<p>2\u3001\u535A\u5BA2\u5730\u5740\uFF1A<a href="https://anyfork.github.io/blog-docs/" target="_blank" rel="noopener noreferrer">https://anyfork.github.io/blog-docs/<ExternalLinkIcon/></a>\u6216<a href="https://anyfork.gitee.io/blog-docs/" target="_blank" rel="noopener noreferrer">https://anyfork.gitee.io/blog-docs/<ExternalLinkIcon/></a></p>
</div>
<h2 id="\u4E00-\u521D\u59CB\u5316\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u4E00-\u521D\u59CB\u5316\u9879\u76EE" aria-hidden="true">#</a> \u4E00 \u521D\u59CB\u5316\u9879\u76EE</h2>
<h3 id="_1-\u73AF\u5883\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#_1-\u73AF\u5883\u4F9D\u8D56" aria-hidden="true">#</a> 1 \u73AF\u5883\u4F9D\u8D56</h3>
<ul>
<li><a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js v14+<ExternalLinkIcon/></a>\uFF0C\u6700\u4F4E\u4F7F\u7528<code v-pre>Node 14+</code>\u7248\u672C\uFF0C\u5EFA\u8BAE\u4F7F\u7528<code v-pre>Node 14.16.0</code>\u7248\u672C</li>
</ul>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<ul>
<li>\u4F7F\u7528 <a href="https://pnpm.io/zh/" target="_blank" rel="noopener noreferrer">pnpm<ExternalLinkIcon/></a> \u65F6\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u5B89\u88C5 vue \u548C @vuepress/client \u4F5C\u4E3A peer-dependencies \uFF0C\u5373 pnpm add -D vue @vuepress/client@next \u3002</li>
<li>\u4F7F\u7528 <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">yarn 2<ExternalLinkIcon/></a> \u65F6\uFF0C\u4F60\u9700\u8981\u5728 <a href="https://yarnpkg.com/configuration/yarnrc#nodeLinker" target="_blank" rel="noopener noreferrer">.yarnrc.yml<ExternalLinkIcon/></a> \u6587\u4EF6\u4E2D\u8BBE\u7F6E nodeLinker: 'node-modules'</li>
</ul>
</div>
<h3 id="_2-\u5FEB\u901F\u5F00\u59CB" tabindex="-1"><a class="header-anchor" href="#_2-\u5FEB\u901F\u5F00\u59CB" aria-hidden="true">#</a> 2 \u5FEB\u901F\u5F00\u59CB</h3>
<ul>
<li>\u521B\u5EFA\u9879\u76EE\u76EE\u5F55</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u521B\u5EFA\u9879\u76EE\u76EE\u5F55</span>
<span class="token function">mkdir</span> blog-docs
<span class="token comment"># \u8FDB\u5165\u9879\u76EE\u76EE\u5F55</span>
<span class="token builtin class-name">cd</span> blog-docs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u521D\u59CB\u5316\u9879\u76EE</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">git</span> init
<span class="token function">yarn</span> init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">git</span> init
<span class="token function">npm</span> init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u4F9D\u8D56\u5B89\u88C5</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> vuepress@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u5728<code v-pre>package.json</code>\u589E\u52A0\u4E2D\u6DFB\u52A0\u4E00\u4E9B scripts</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">{</span>
  <span class="token string">"scripts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">"dev"</span><span class="token builtin class-name">:</span> <span class="token string">"vuepress dev docs"</span>,
    <span class="token string">"build"</span><span class="token builtin class-name">:</span> <span class="token string">"vuepress build docs"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u5C06\u9ED8\u8BA4\u7684\u4E34\u65F6\u76EE\u5F55\u548C\u7F13\u5B58\u76EE\u5F55\u6DFB\u52A0\u5230<code v-pre>.gitignore</code>\u6587\u4EF6\u4E2D</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">'node_modules'</span> <span class="token operator">>></span> .gitignore
<span class="token builtin class-name">echo</span> <span class="token string">'.temp'</span> <span class="token operator">>></span> .gitignore
<span class="token builtin class-name">echo</span> <span class="token string">'.cache'</span> <span class="token operator">>></span> .gitignore
<span class="token builtin class-name">echo</span> <span class="token string">'.history'</span> <span class="token operator">>></span> .gitignore
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u521B\u5EFA\u6587\u6863\u76EE\u5F55</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">mkdir</span> docs
<span class="token builtin class-name">echo</span> <span class="token string">'# Hello VuePress'</span> <span class="token operator">></span> docs/README.md
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u9879\u76EE\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#_3-\u9879\u76EE\u542F\u52A8" aria-hidden="true">#</a> 3 \u9879\u76EE\u542F\u52A8</h3>
<p>\u7528 vscode \u6253\u5F00\u9879\u76EE\uFF0C\u65B0\u5EFA\u7EC8\u7AEF\uFF0C\u6267\u884C\u542F\u52A8\u811A\u672C\u547D\u4EE4</p>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> run docs:dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<p>\u8BE6\u7EC6\u7684\u521B\u5EFA\u8FC7\u7A0B\u8BF7\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/guide/getting-started.html" target="_blank" rel="noopener noreferrer">vuepress \u5B98\u7F51\u5FEB\u901F\u4E0A\u624B<ExternalLinkIcon/></a>\uFF0C\u81F3\u6B64\u9879\u76EE\u642D\u5EFA\u57FA\u7840\u5C31\u8C03\u6574\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u4EEC\u5C31\u53EF\u4EE5\u5F00\u5F00\u5FC3\u5FC3\u7684\u5199<code v-pre>markdown</code>\u6587\u4EF6\u4E86\u3002</p>
<h2 id="\u4E8C-\u529F\u80FD\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E8C-\u529F\u80FD\u914D\u7F6E" aria-hidden="true">#</a> \u4E8C \u529F\u80FD\u914D\u7F6E</h2>
<p>\u2003<code v-pre>vuepress 2.x</code>\u9ED8\u8BA4\u4E3B\u9898\u96C6\u6210\u4E86\u5927\u90E8\u5206\u529F\u80FD\uFF0C\u57FA\u672C\u80FD\u591F\u6EE1\u8DB3\u6211\u4EEC\u7F16\u5199<code v-pre>markdown</code>\u7684\u9700\u6C42\uFF0C\u4F46\u5B98\u65B9\u4E3B\u9898\u4E3B\u8981\u4EE5\u6587\u6863\u4E3A\u4E3B\uFF0C\u5BF9\u4E8E\u535A\u5BA2\u529F\u80FD\u7684\u62D3\u5C55\u9700\u8981\u81EA\u5DF1\u5F00\u53D1\u3002\u9ED8\u8BA4\u4E3B\u9898\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7<code v-pre>\u7EE7\u627F\u7684\u65B9\u5F0F</code>\u6765\u62D3\u5C55\u9ED8\u8BA4\u4E3B\u9898\uFF0C\u8BE6\u60C5\u53C2\u8003\u5B98\u7F51<a href="https://v2.vuepress.vuejs.org/zh/reference/default-theme/extending.html" target="_blank" rel="noopener noreferrer">\u4E3B\u9898\u62D3\u5C55<ExternalLinkIcon/></a>\u3002</p>
<p>\u2003\u535A\u4E3B\u91C7\u7528\u4E86\u9ED8\u8BA4\u4E3B\u9898\u9884\u8BBE\u7684<code v-pre>\u5E03\u5C40\u63D2\u69FD</code>\u548C<code v-pre>\u7EC4\u4EF6\u66FF\u6362</code>2 \u79CD\u65B9\u5F0F\u7EE7\u627F\u9ED8\u8BA4\u4E3B\u9898(\u5373:\u672C\u5730\u4E3B\u9898\u5F00\u53D1)\u3002<code v-pre>\u7EC4\u4EF6\u66FF\u6362</code>\u4E3B\u8981\u4F53\u73B0\u5728\u535A\u5BA2\u9996\u9875\u5E03\u5C40\uFF0C\u5206\u7C7B\uFF0C\u6807\u7B7E\uFF0C\u65F6\u95F4\u8F74\u5E03\u5C40\u7B49\uFF0C<code v-pre>\u5E03\u5C40\u63D2\u69FD</code>\u4E3B\u8981\u6D89\u53CA\u8BE6\u60C5\u9875\u9876\u90E8\u5206\u7C7B\u548C\u5E95\u90E8\u8BC4\u8BBA\u7B49\u3002\u540C\u65F6\u901A\u8FC7<code v-pre>vuepress-plugin-blog2</code>\u63D2\u4EF6\u62D3\u5C55\u4E86\u535A\u5BA2\u529F\u80FD(\u6587\u7AE0\u5206\u7C7B\uFF0C\u6807\u7B7E\uFF0C\u65F6\u95F4\u8F74)\uFF0C<code v-pre>vuepress-plugin-blog2</code><Badge type="tip" text="hope\u63D2\u4EF6" vertical="top" />\u8BBE\u8BA1\u6BD4\u8F83\u7075\u6D3B\uFF0C\u53EF\u4EE5\u6839\u636E\u81EA\u8EAB\u9700\u6C42\u8FDB\u884C\u5B9A\u5236\uFF0C\u4E0D\u9650\u4E8E\u5206\u7C7B\u548C\u6807\u7B7E\u7B49\u529F\u80FD\uFF0C\u53EF\u4EE5\u81EA\u884C\u62D3\u5C55\u3002</p>
<h3 id="_1-\u5E03\u5C40\u63D2\u69FD" tabindex="-1"><a class="header-anchor" href="#_1-\u5E03\u5C40\u63D2\u69FD" aria-hidden="true">#</a> 1 \u5E03\u5C40\u63D2\u69FD</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u9ED8\u8BA4\u4E3B\u9898\u5185\u7F6E 11 \u4E2A\u5E03\u5C40\u63D2\u69FD\uFF0C\u5206\u522B\u4E3A\uFF1A<code v-pre>navbar</code>,<code v-pre>navbar-before</code>,<code v-pre>navbar-after</code>,<code v-pre>sidebar</code>,<code v-pre>sidebar-top</code>,<code v-pre>sidebar-bottom</code>,<code v-pre>page</code>,<code v-pre>page-top</code>,<code v-pre>page-bottom</code>,<code v-pre>page-content-top</code>,<code v-pre>page-content-bottom</code>,\u8BE6\u60C5\u53C2\u8003\u5B98\u7F51<a href="https://v2.vuepress.vuejs.org/zh/reference/default-theme/extending.html#%E5%B8%83%E5%B1%80%E6%8F%92%E6%A7%BD" target="_blank" rel="noopener noreferrer">\u5E03\u5C40\u63D2\u69FD<ExternalLinkIcon/></a></p>
<p>2\u3001\u535A\u5BA2\u4E2D\u7528\u5230\u4E86 2 \u4E2A\u63D2\u69FD<code v-pre>page-top</code>\u548C<code v-pre>page-bottom</code>\u3002\u524D\u8005\u7528\u4E8E\u62D3\u5C55\u6587\u7AE0\u9875\u9762\u6807\u9898\u4E0B\u9762\u6587\u7AE0\u4F5C\u8005\uFF0C\u6587\u7AE0\u5206\u7C7B\uFF0C\u6587\u7AE0\u6807\u7B7E\uFF0C\u5B57\u6570\u7EDF\u8BA1\u548C\u9884\u4F30\u9605\u8BFB\u65F6\u95F4\u7B49\u4FE1\u606F\uFF0C\u540E\u8005\u4E3B\u8981\u5D4C\u5957<code v-pre>giscus</code>\u8BC4\u8BBA\u7EC4\u4EF6<code v-pre>&lt;CommentService /&gt;</code>,\u5B9E\u73B0\u6587\u7AE0\u8BC4\u8BBA\u529F\u80FD\u3002</p>
</div>
<ul>
<li>
<p>\u914D\u7F6E\u65B9\u6CD5</p>
<p>1\u3001\u521B\u5EFA\u81EA\u5B9A\u4E49\u5E03\u5C40\u7EC4\u4EF6<code v-pre>.vuepress/theme/layouts/layout.vue</code></p>

<CodeDemo id="code-demo-0b0e88d4" type="normal" title="layout%20%E9%85%8D%E7%BD%AE" code="%7B%22js%22%3A%22%3Ctemplate%3E%5Cn%20%20%3CParentLayout%3E%5Cn%20%20%20%20%3Ctemplate%20%23page-top%3E%5Cn%20%20%20%20%20%20%3Cdiv%20class%3D%5C%22title%20w-%5Bvar(--content-width)%5D%20my-0%20mx-auto%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%5C%22flex%20items-center%20justify-between%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3Ch1%3E%7B%7B%20page.title%20%7D%7D%3C%2Fh1%3E%5Cn%20%20%20%20%20%20%20%20%20%20%3CIcon%20icon%3D%5C%22RollbackOutlined%5C%22%20text%3D%5C%22%E8%BF%94%E5%9B%9E%5C%22%20%40click%3D%5C%22%24router.go(-1)%5C%22%20class%3D%5C%22cursor-pointer%5C%22%3E%3C%2FIcon%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%3CBlogItemInfo%20%3Apage%3D%5C%22page%5C%22%3E%3C%2FBlogItemInfo%3E%5Cn%20%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%3C%2Ftemplate%3E%5Cn%20%20%20%20%3Ctemplate%20%23page-bottom%3E%5Cn%20%20%20%20%20%20%3CCommentService%20%2F%3E%5Cn%20%20%20%20%3C%2Ftemplate%3E%5Cn%20%20%3C%2FParentLayout%3E%5Cn%3C%2Ftemplate%3E%5Cn%3Cscript%20setup%20lang%3D%5C%22ts%5C%22%3E%5Cnimport%20ParentLayout%20from%20'%40vuepress%2Ftheme-default%2Flib%2Fclient%2Flayouts%2FLayout.vue'%5Cnimport%20BlogItemInfo%20from%20'..%2Fcomponents%2FBlog%2FBlogItemInfo.vue'%5Cnimport%20%7B%20usePageData%20%7D%20from%20'%40vuepress%2Fclient'%5Cnconst%20page%20%3D%20usePageData()%5Cn%3C%2Fscript%3E%5Cn%5Cn%22%7D">
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>ParentLayout<span class="token operator">></span>
    <span class="token operator">&lt;</span>template #page<span class="token operator">-</span>top<span class="token operator">></span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title w-[var(--content-width)] my-0 mx-auto"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"flex items-center justify-between"</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> page<span class="token punctuation">.</span>title <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
          <span class="token operator">&lt;</span>Icon icon<span class="token operator">=</span><span class="token string">"RollbackOutlined"</span> text<span class="token operator">=</span><span class="token string">"\u8FD4\u56DE"</span> @click<span class="token operator">=</span><span class="token string">"$router.go(-1)"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cursor-pointer"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Icon<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>BlogItemInfo <span class="token operator">:</span>page<span class="token operator">=</span><span class="token string">"page"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>BlogItemInfo<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
    <span class="token operator">&lt;</span>template #page<span class="token operator">-</span>bottom<span class="token operator">></span>
      <span class="token operator">&lt;</span>CommentService <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ParentLayout<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>
<span class="token keyword">import</span> ParentLayout <span class="token keyword">from</span> <span class="token string">'@vuepress/theme-default/lib/client/layouts/Layout.vue'</span>
<span class="token keyword">import</span> BlogItemInfo <span class="token keyword">from</span> <span class="token string">'../components/Blog/BlogItemInfo.vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePageData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/client'</span>
<span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token function">usePageData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></CodeDemo><p>2\u3001\u521B\u5EFA\u4F60\u7684\u672C\u5730\u4E3B\u9898<code v-pre>.vuepress/theme/index.ts</code>\uFF0C\u5E76\u8986\u76D6\u9ED8\u8BA4\u4E3B\u9898\u5E03\u5C40\u3002</p>

<CodeDemo id="code-demo-31a1aab0" type="normal" title="index.ts%20%E9%85%8D%E7%BD%AE" code="%7B%22ts%22%3A%22import%20type%20%7B%20Theme%20%7D%20from%20'%40vuepress%2Fcore'%5Cnimport%20%7B%20defaultTheme%20%7D%20from%20'%40vuepress%2Ftheme-default'%5Cnimport%20%7B%20path%20%7D%20from%20'%40vuepress%2Futils'%5Cnimport%20%7B%20AnyForkThemeOptions%20%7D%20from%20'.%2Ftypes%2Ftheme'%5Cn%5Cnexport%20const%20AnyForkTheme%20%3D%20(options%3A%20AnyForkThemeOptions)%3A%20Theme%20%3D%3E%20%7B%5Cn%20%20return%20%7B%5Cn%20%20%20%20name%3A%20'vuepress-theme-AnyFork'%2C%5Cn%20%20%20%20extends%3A%20defaultTheme(options)%2C%5Cn%20%20%20%20alias%3A%20%7B%5Cn%20%20%20%20%20%20'%40theme%2FHome.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FHome.vue')%2C%5Cn%20%20%20%20%20%20'%40theme%2FNavbarItems.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FNavbarItems.vue')%2C%5Cn%20%20%20%20%20%20'%40theme%2FHomeFooter.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FHomeFooter.vue')%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20layouts%3A%20%7B%5Cn%20%20%20%20%20%20Layout%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FLayout.vue')%2C%5Cn%20%20%20%20%20%20Category%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FCategory.vue')%2C%5Cn%20%20%20%20%20%20Tag%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FTag.vue')%2C%5Cn%20%20%20%20%20%20Timeline%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FTimeline.vue')%2C%5Cn%20%20%20%20%20%20404%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2F404.vue')%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22%7D">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Theme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defaultTheme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/theme-default'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/utils'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AnyForkThemeOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types/theme'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> AnyForkTheme <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> AnyForkThemeOptions<span class="token punctuation">)</span><span class="token operator">:</span> Theme <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'vuepress-theme-AnyFork'</span><span class="token punctuation">,</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token function">defaultTheme</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'@theme/Home.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'@theme/NavbarItems.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/NavbarItems.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'@theme/HomeFooter.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/HomeFooter.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    layouts<span class="token operator">:</span> <span class="token punctuation">{</span>
      Layout<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Layout.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Category<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Category.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Tag<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Tag.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Timeline<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Timeline.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token number">404</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/404.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></CodeDemo></li>
</ul>
<h3 id="_2-\u7EC4\u4EF6\u66FF\u6362" tabindex="-1"><a class="header-anchor" href="#_2-\u7EC4\u4EF6\u66FF\u6362" aria-hidden="true">#</a> 2 \u7EC4\u4EF6\u66FF\u6362</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u5E03\u5C40\u63D2\u69FD\u5341\u5206\u5B9E\u7528\uFF0C\u4F46\u6709\u65F6\u5019\u4F60\u53EF\u80FD\u4F1A\u89C9\u5F97\u5B83\u4E0D\u591F\u7075\u6D3B\u3002\u9ED8\u8BA4\u4E3B\u9898\u540C\u6837\u63D0\u4F9B\u4E86\u66FF\u6362\u5355\u4E2A\u7EC4\u4EF6\u7684\u80FD\u529B\u3002</p>
<p>2\u3001\u9ED8\u8BA4\u4E3B\u9898\u5C06\u6240\u6709 \u975E\u5168\u5C40\u7684\u7EC4\u4EF6 \u90FD\u6CE8\u518C\u4E86\u4E00\u4E2A\u5E26 @theme \u524D\u7F00\u7684 alias \u3002\u4F8B\u5982\uFF0CHomeFooter.vue \u7684\u522B\u540D\u662F @theme/HomeFooter.vue \u3002</p>
</div>
<ul>
<li>
<p>\u914D\u7F6E\u65B9\u6CD5</p>
<p>1\u3001\u5728\u81EA\u5B9A\u4E49\u4E3B\u9898\u7EC4\u4EF6\u76EE\u5F55<code v-pre>.vuepress/theme/components</code>\u4E0B\u521B\u5EFA\u81EA\u5DF1\u9700\u8981\u8986\u76D6\u7684\u7EC4\u4EF6\u3002</p>
<p>2\u3001\u5728\u914D\u7F6E\u6587\u4EF6<code v-pre>.vuepress/theme/index.ts</code>\u4E2D\u8FDB\u884C\u7EC4\u4EF6\u8986\u76D6</p>

<CodeDemo id="code-demo-31a1aab0" type="normal" title="index.ts%20%E9%85%8D%E7%BD%AE" code="%7B%22ts%22%3A%22import%20type%20%7B%20Theme%20%7D%20from%20'%40vuepress%2Fcore'%5Cnimport%20%7B%20defaultTheme%20%7D%20from%20'%40vuepress%2Ftheme-default'%5Cnimport%20%7B%20path%20%7D%20from%20'%40vuepress%2Futils'%5Cnimport%20%7B%20AnyForkThemeOptions%20%7D%20from%20'.%2Ftypes%2Ftheme'%5Cn%5Cnexport%20const%20AnyForkTheme%20%3D%20(options%3A%20AnyForkThemeOptions)%3A%20Theme%20%3D%3E%20%7B%5Cn%20%20return%20%7B%5Cn%20%20%20%20name%3A%20'vuepress-theme-AnyFork'%2C%5Cn%20%20%20%20extends%3A%20defaultTheme(options)%2C%5Cn%20%20%20%20alias%3A%20%7B%5Cn%20%20%20%20%20%20'%40theme%2FHome.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FHome.vue')%2C%5Cn%20%20%20%20%20%20'%40theme%2FNavbarItems.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FNavbarItems.vue')%2C%5Cn%20%20%20%20%20%20'%40theme%2FHomeFooter.vue'%3A%20path.resolve(__dirname%2C%20'.%2Fcomponents%2FHomeFooter.vue')%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20layouts%3A%20%7B%5Cn%20%20%20%20%20%20Layout%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FLayout.vue')%2C%5Cn%20%20%20%20%20%20Category%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FCategory.vue')%2C%5Cn%20%20%20%20%20%20Tag%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FTag.vue')%2C%5Cn%20%20%20%20%20%20Timeline%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2FTimeline.vue')%2C%5Cn%20%20%20%20%20%20404%3A%20path.resolve(__dirname%2C%20'.%2Flayouts%2F404.vue')%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22%7D">
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Theme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defaultTheme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/theme-default'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/utils'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AnyForkThemeOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./types/theme'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> AnyForkTheme <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> AnyForkThemeOptions<span class="token punctuation">)</span><span class="token operator">:</span> Theme <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'vuepress-theme-AnyFork'</span><span class="token punctuation">,</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token function">defaultTheme</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'@theme/Home.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'@theme/NavbarItems.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/NavbarItems.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string-property property">'@theme/HomeFooter.vue'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./components/HomeFooter.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    layouts<span class="token operator">:</span> <span class="token punctuation">{</span>
      Layout<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Layout.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Category<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Category.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Tag<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Tag.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Timeline<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/Timeline.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token number">404</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./layouts/404.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></CodeDemo></li>
</ul>
<h3 id="_3-\u535A\u5BA2\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_3-\u535A\u5BA2\u63D2\u4EF6" aria-hidden="true">#</a> 3 \u535A\u5BA2\u63D2\u4EF6</h3>
<p>\u2003\u535A\u5BA2\u63D2\u4EF6\u4F7F\u7528\u7684\u662F\u7B2C\u4E09\u65B9<a href="https://vuepress-theme-hope.github.io/v2/blog/zh/" target="_blank" rel="noopener noreferrer">vuepress-plugin-blog2<ExternalLinkIcon/></a><Badge type="tip" text="hope\u63D2\u4EF6" vertical="top" />\u63D2\u4EF6\u3002\u6B64\u63D2\u4EF6\u548C\u666E\u901A\u63D2\u4EF6\u4F7F\u7528\u65B9\u5F0F\u4E00\u6837\uFF0C\u6839\u636E<a href="https://vuepress-theme-hope.github.io/v2/blog/zh/config.html" target="_blank" rel="noopener noreferrer">\u5B98\u7F51\u914D\u7F6E<ExternalLinkIcon/></a>\u5373\u53EF\u3002</p>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<p><code v-pre>vuepress-plugin-blog2</code>\u535A\u5BA2\u63D2\u4EF6\u4E3B\u8981\u7528\u6237\u6269\u5C55\u535A\u5BA2\u529F\u80FD\uFF0C\u672A\u5B9E\u73B0\u5206\u9875\u529F\u80FD\uFF0C\u9700\u8981\u81EA\u884C\u5B9E\u73B0\u5206\u9875\u529F\u80FD\u3002</p>
</div>
<ul>
<li>
<p>\u9879\u76EE\u914D\u7F6E</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code> <span class="token comment">//\u535A\u5BA2\u63D2\u4EF6,https://vuepress-theme-hope.github.io/v2/blog/zh/guide.html</span>
  <span class="token function">blogPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// \u9875\u9762\u8FC7\u6EE4\u5668\uFF0C\u6B64\u51FD\u6570\u7528\u4E8E\u9274\u522B\u9875\u9762\u662F\u5426\u4F5C\u4E3A\u6587\u7AE0\u3002</span>
      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> filePathRelative <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> filePathRelative <span class="token operator">?</span> filePathRelative<span class="token operator">?.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"posts/"</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// \u83B7\u53D6\u6587\u7AE0\u4FE1\u606F\u7684\u51FD\u6570\u3002</span>
      <span class="token function-variable function">getInfo</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token operator">...</span>page
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      category<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
              key<span class="token operator">:</span> <span class="token string">"category"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">getter</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span>page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>category <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              layout<span class="token operator">:</span> <span class="token string">"Category"</span><span class="token punctuation">,</span>
              itemLayout<span class="token operator">:</span> <span class="token string">"Category"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Categories"</span><span class="token punctuation">,</span> sidebar<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function-variable function">itemFrontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
                  title<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Category </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
                  sidebar<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
              key<span class="token operator">:</span> <span class="token string">"tag"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">getter</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span>page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>tag <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              layout<span class="token operator">:</span> <span class="token string">"Tag"</span><span class="token punctuation">,</span>
              itemLayout<span class="token operator">:</span> <span class="token string">"Tag"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Tags"</span><span class="token punctuation">,</span> sidebar<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function-variable function">itemFrontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
                  title<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Tag </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
                  sidebar<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>

      type<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
              key<span class="token operator">:</span> <span class="token string">"article"</span><span class="token punctuation">,</span>
              <span class="token comment">//\u9700\u8981\u8FC7\u6EE4\u7684\u6761\u4EF6</span>
              <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">!</span>page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>archive<span class="token punctuation">,</span>
              path<span class="token operator">:</span> <span class="token string">"/article/"</span><span class="token punctuation">,</span>
              layout<span class="token operator">:</span> <span class="token string">"Layout"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Articles"</span><span class="token punctuation">,</span> sidebar<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token comment">// sort pages with time and sticky</span>
              <span class="token function-variable function">sorter</span><span class="token operator">:</span> <span class="token punctuation">(</span>pageA<span class="token punctuation">,</span> pageB<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token operator">&amp;&amp;</span> pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky<span class="token punctuation">)</span>
                      <span class="token keyword">return</span> pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token keyword">as</span> <span class="token builtin">number</span> <span class="token operator">-</span> <span class="token punctuation">(</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky<span class="token punctuation">)</span>
                      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky <span class="token operator">&amp;&amp;</span> pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>sticky<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                  <span class="token keyword">return</span> <span class="token punctuation">(</span>
                      <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                  <span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
              key<span class="token operator">:</span> <span class="token string">"timeline"</span><span class="token punctuation">,</span>
              <span class="token comment">// only article with date should be added to timeline</span>
              <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">=></span> page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token comment">// sort pages with time</span>
              <span class="token function-variable function">sorter</span><span class="token operator">:</span> <span class="token punctuation">(</span>pageA<span class="token punctuation">,</span> pageB<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>pageB<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>pageA<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              path<span class="token operator">:</span> <span class="token string">"/timeline/"</span><span class="token punctuation">,</span>
              layout<span class="token operator">:</span> <span class="token string">"Timeline"</span><span class="token punctuation">,</span>
              <span class="token function-variable function">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Timeline"</span><span class="token punctuation">,</span> sidebar<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      hotReload<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F</strong>\uFF1A\u63D2\u4EF6\u4E2D\u6709<code v-pre>category</code>\u548C<code v-pre>type</code>\u533A\u5206\uFF0C\u5373\u7C7B\u522B\u548C\u7C7B\u578B\uFF0C\u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u4E3A\u6587\u7AE0\u6761\u4EF6\u8D5B\u9009\u4E3A\u7C7B\u522B\uFF0C\u6BD4\u5982\uFF1A\u5206\u7C7B\uFF0C\u6807\u7B7E\u7B49\uFF0C\u7C7B\u578B\u4E3A\u6587\u7AE0\u96C6\u5408\uFF0C\u65F6\u95F4\u8F74\u7B49\u3002</p>
</li>
<li>
<p>\u5BA2\u6237\u7AEF\u7EC4\u5408 API
1\u3001\u5BA2\u6237\u7AEF\u53EF\u4EE5\u901A\u8FC7<code v-pre>useBlogCategory()</code> \u548C <code v-pre>useBlogType()</code>\u83B7\u53D6\u5F53\u524D\u8DEF\u7531\u7ED1\u5B9A\u7684\u7C7B\u522B\u6216\u7C7B\u578B\u3002</p>
</li>
</ul>
<p>2\u3001\u53EF\u4EE5\u4F20\u9012\u53C2\u6570\u83B7\u53D6\u5177\u4F53\u7684\u7C7B\u522B\u4FE1\u606F\uFF0C\u6BD4\u5982<code v-pre>useBlogCategory('category')</code></p>
<h3 id="_4-\u81EA\u5B9A\u4E49\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_4-\u81EA\u5B9A\u4E49\u5BB9\u5668" aria-hidden="true">#</a> 4 \u81EA\u5B9A\u4E49\u5BB9\u5668</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>vueprsss 2.x</code> \u4E2D\u5185\u7F6E\u4E86\u81EA\u5B9A\u4E49\u5BB9\u5668\uFF0C\u8BE6\u60C5\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/reference/default-theme/markdown.html" target="_blank" rel="noopener noreferrer">\u81EA\u5B9A\u4E49\u5BB9\u5668<ExternalLinkIcon/></a>\u3002</p>
<p>2\u3001\u81EA\u5B9A\u4E49\u5BB9\u5668\u4F9D\u8D56\u9ED8\u8BA4\u4E3B\u9898\u5185\u7F6E\u63D2\u4EF6<code v-pre>@vuepress/plugin-container</code>,\u76F8\u5BF9\u4E8E<code v-pre>vuepress-plugin-container</code>(vuepress 1.x)\u800C\u8A00\u53D8\u52A8\u4E0D\u5927\uFF0C\u53EA\u662F\u63D2\u4EF6\u4F7F\u7528\u65B9\u5F0F\u91C7\u7528\u51FD\u6570\u5F0F\u65B9\u5F0F\u96C6\u6210\u3002</p>
</div>
<p>\u2003\u535A\u5BA2\u4E2D\u5185\u7F6E\u4E86 2 \u4E2A\u81EA\u5B9A\u4E49\u5BB9\u5668<code v-pre>cardList</code>\u548C<code v-pre>cardImgList</code>,\u5206\u522B\u7528\u4E8E\u5C55\u793A\u6587\u672C\u5217\u8868\u548C\u56FE\u7247\u5217\u8868\uFF0C\u5177\u4F53\u6548\u679C\u770B\u4E0B\u56FE\uFF1A</p>
<p><code v-pre>cardList</code> \u5C55\u793A\u6548\u679C</p>
<div class="cardListContainer"><div class="card-list">
        <a href="https://www.recoluan.com" target="_blank" class="card-item row-3"
          style="background-color:rgb(165 216 243);color:#6854A1;"
        >
          <img src="https://www.recoluan.com/head.png" class="no-zoom">
          <div>
            <p class="name">\u5348\u540E\u5357\u6742</p>
            <p class="desc">Enjoy when you can, and endure when you must.</p>
          </div>
        </a>
      
        <a href="https://coderhdy.com/" target="_blank" class="card-item row-3"
          style="background-color:#FCE5BF;color:#7B2532;"
        >
          <img src="https://coderhdy.com/assets/img/snapshot.png" class="no-zoom">
          <div>
            <p class="name">\u897F\u74DC\u76AE\u513F</p>
            <p class="desc">enjoy your grow up!</p>
          </div>
        </a>
      
        <a href="https://anyfork.gitee.io/blog-docs/" target="_blank" class="card-item row-3"
          style="background-color:rgb(218 88 88 / 62%);color:rgb(5 41 14 / 75%);"
        >
          <img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png" class="no-zoom">
          <div>
            <p class="name">\u5C0F\u7D2B\u5FF5\u6C81</p>
            <p class="desc">\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77</p>
          </div>
        </a>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5348\u540E\u5357\u6742
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.recoluan.com/head.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> Enjoy when you can<span class="token punctuation">,</span> and endure when you must.
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.recoluan.com
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(165 216 243)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#6854A1'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u897F\u74DC\u76AE\u513F
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> enjoy your grow up<span class="token tag">!</span>
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//coderhdy.com/assets/img/snapshot.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//coderhdy.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#FCE5BF'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#7B2532'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5C0F\u7D2B\u5FF5\u6C81
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E0D\u79EF\u8DEC\u6B65<span class="token punctuation">,</span>\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41<span class="token punctuation">,</span>\u65E0\u4EE5\u6210\u6C5F\u6D77
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.staticaly.com/gh/AnyFork/blog<span class="token punctuation">-</span>images/main/markdown/202208241822713.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//anyfork.gitee.io/blog<span class="token punctuation">-</span>docs/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(218 88 88 / 62%)
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> rgb(5 41 14 / 75%)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p><code v-pre>cardImgList</code>\u5C55\u793A\u6548\u679C</p>
<div class="cardImgListContainer"><div class="card-list">
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank">
              <img src="https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank">
              <p class="name">vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank">
              <img src="https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank">
              <p class="name">vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://www.vuepress.cn/" target="_blank">
              <img src="https://vuepress.vuejs.org/hero.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://www.vuepress.cn/" target="_blank">
              <p class="name">VuePress \u4E2D\u6587\u5B98\u7F51</p>
              <p class="desc">VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-community.netlify.app/zh/" target="_blank">
              <img src="https://vuepress.vuejs.org/hero.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-community.netlify.app/zh/" target="_blank">
              <p class="name">VuePress \u5B98\u65B9\u793E\u533A</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6</p>
            </a>
          </div>
          
          
        </div>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/icon_vuepress_reco.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/views/other/theme<span class="token punctuation">-</span>example.html
  <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco\u5B98\u7F51\u6848\u4F8B
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/icon_vuepress_reco.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/views/plugins/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco\u5B98\u65B9\u63D2\u4EF6
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress.vuejs.org/hero.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.vuepress.cn/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> VuePress \u4E2D\u6587\u5B98\u7F51
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress.vuejs.org/hero.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>community.netlify.app/zh/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> VuePress \u5B98\u65B9\u793E\u533A
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><ul>
<li>
<p>\u81EA\u5B9A\u4E49\u5BB9\u5668\u5B9E\u73B0\u65B9\u5F0F</p>
<p>1\u3001\u5728\u81EA\u5B9A\u4E49\u4E3B\u9898\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55<code v-pre>.vuepress/theme/config/container.ts</code>\u4E0B\u521B\u5EFA\u81EA\u5B9A\u4E49\u5BB9\u5668\u6587\u4EF6\u3002</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> ContainerPluginOptions<span class="token punctuation">,</span> MarkdownItContainerRenderFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-container'</span>
<span class="token keyword">const</span> yaml <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'js-yaml'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token constant">CARD_LIST</span> <span class="token operator">=</span> <span class="token string">'cardList'</span>
<span class="token keyword">const</span> <span class="token constant">CARD_IMG_LIST</span> <span class="token operator">=</span> <span class="token string">'cardImgList'</span>
<span class="token comment">// \u6E32\u67D3md\u5BB9\u5668\u7684\u5361\u7247\u5217\u8868</span>
<span class="token keyword">function</span> <span class="token function">renderCardList</span><span class="token punctuation">(</span>tokens<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> idx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> type <span class="token operator">=</span> tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token constant">END_TYPE</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">container_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_close</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
    _tokens$idx <span class="token operator">=</span> tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">,</span>
    nesting <span class="token operator">=</span> _tokens$idx<span class="token punctuation">.</span>nesting<span class="token punctuation">,</span>
    info <span class="token operator">=</span> _tokens$idx<span class="token punctuation">.</span>info
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nesting <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6E32\u67D3\u5F00\u5934\u7684 ':::' \u6807\u8BB0</span>
    <span class="token keyword">let</span> yamlStr <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> idx<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> _tokens$i <span class="token operator">=</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
        type <span class="token operator">=</span> _tokens$i<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
        content <span class="token operator">=</span> _tokens$i<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
        _info <span class="token operator">=</span> _tokens$i<span class="token punctuation">.</span>info
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token constant">END_TYPE</span><span class="token punctuation">)</span> <span class="token keyword">break</span> <span class="token comment">// \u9047\u5230\u7ED3\u675F\u7684 ':::' \u65F6</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">)</span> <span class="token keyword">continue</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'fence'</span> <span class="token operator">&amp;&amp;</span> _info <span class="token operator">===</span> <span class="token string">'yaml'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u662F\u4EE3\u7801\u5757\u7C7B\u578B\uFF0C\u5E76\u4E14\u662Fyaml\u4EE3\u7801</span>
        yamlStr <span class="token operator">=</span> content
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>yamlStr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u6B63\u786E\u89E3\u6790\u51FAyaml\u5B57\u7B26\u4E32\u540E</span>
      <span class="token keyword">const</span> dataObj <span class="token operator">=</span> yaml<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>yamlStr<span class="token punctuation">)</span> <span class="token comment">// \u5C06yaml\u5B57\u7B26\u4E32\u89E3\u6790\u6210js\u5BF9\u8C61</span>
      <span class="token keyword">let</span> dataList<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>dataObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6B63\u786E\u89E3\u6790\u51FA\u6570\u636E\u5BF9\u8C61</span>
        dataList <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>dataObj<span class="token punctuation">)</span> <span class="token operator">?</span> dataObj <span class="token operator">:</span> dataObj<span class="token punctuation">.</span>list
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>dataList <span class="token operator">&amp;&amp;</span> dataList<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6709\u5217\u8868\u6570\u636E</span>

        <span class="token comment">// \u6BCF\u884C\u663E\u793A\u51E0\u4E2A</span>
        <span class="token keyword">let</span> row <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>row <span class="token operator">||</span> row <span class="token operator">></span> <span class="token number">4</span> <span class="token operator">||</span> row <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          row <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// \u9ED8\u8BA4 3</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> listDOM <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token constant">CARD_LIST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u666E\u901A\u5361\u7247\u5217\u8868</span>
          listDOM <span class="token operator">=</span> <span class="token function">getCardListDOM</span><span class="token punctuation">(</span>dataList<span class="token punctuation">,</span> row<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token constant">CARD_IMG_LIST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u5361\u7247\u56FE\u7247\u5217\u8868</span>
          listDOM <span class="token operator">=</span> <span class="token function">getCardImgListDOM</span><span class="token punctuation">(</span>dataList<span class="token punctuation">,</span> row<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">Container">&lt;div class="card-list"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>listDOM<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div></span><span class="token template-punctuation string">\`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6E32\u67D3':::' \u7ED3\u5C3E</span>
    <span class="token keyword">return</span> <span class="token string">'&lt;/div>'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u5C06\u6570\u636E\u89E3\u6790\u6210 DOM \u7ED3\u6784 - \u666E\u901A\u5361\u7247\u5217\u8868</span>
<span class="token keyword">function</span> <span class="token function">getCardListDOM</span><span class="token punctuation">(</span>dataList<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span> row<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> listDOM <span class="token operator">=</span> <span class="token string">''</span>
  dataList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    listDOM <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"> &lt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link <span class="token operator">?</span> <span class="token string">'a href="'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>link <span class="token operator">+</span> <span class="token string">'" target="_blank"'</span> <span class="token operator">:</span> <span class="token string">'span'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> class="card-item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>row <span class="token operator">?</span> <span class="token string">'row-'</span> <span class="token operator">+</span> row <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" style="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>bgColor <span class="token operator">?</span> <span class="token string">'background-color:'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>bgColor <span class="token operator">+</span> <span class="token string">';'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>textColor <span class="token operator">?</span> <span class="token string">'color:'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>textColor <span class="token operator">+</span> <span class="token string">';'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" > </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>
      item<span class="token punctuation">.</span>avatar <span class="token operator">?</span> <span class="token string">'&lt;img src="'</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>avatar <span class="token operator">+</span> <span class="token string">'" class="no-zoom">'</span> <span class="token operator">:</span> <span class="token string">''</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;div> &lt;p class="name"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p> &lt;p class="desc"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>desc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p> &lt;/div> &lt;/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link <span class="token operator">?</span> <span class="token string">'a'</span> <span class="token operator">:</span> <span class="token string">'span'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">> </span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> listDOM
<span class="token punctuation">}</span>

<span class="token comment">// \u5C06\u6570\u636E\u89E3\u6790\u6210 DOM \u7ED3\u6784 - \u56FE\u6587\u5361\u7247\u5217\u8868</span>
<span class="token keyword">function</span> <span class="token function">getCardImgListDOM</span><span class="token punctuation">(</span>dataList<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span> row<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> listDOM <span class="token operator">=</span> <span class="token string">''</span>
  dataList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    listDOM <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"> &lt;div class="card-item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>row <span class="token operator">?</span> <span class="token string">'row-'</span> <span class="token operator">+</span> row <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" > &lt;div class="box-img"> &lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" target="_blank"> &lt;img src="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>img<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="no-zoom"> &lt;/a> &lt;/div> &lt;div class="box-info"> &lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" target="_blank"> &lt;p class="name"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>
      item<span class="token punctuation">.</span>desc <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;p class="desc"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>desc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">''</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  &lt;/a>
  &lt;/div>
 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>avatar <span class="token operator">||</span> item<span class="token punctuation">.</span>author <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div class="box-footer">&lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>link<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" target="_blank"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>avatar <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;img src="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>avatar<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" class="no-zoom"></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>author <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a>&lt;/div></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div> </span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> listDOM
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> resolveContainerOptions <span class="token operator">=</span> <span class="token punctuation">(</span>type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> ContainerPluginOptions <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> render<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> renderCardList
  <span class="token keyword">return</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> render <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2\u3001\u5728\u63D2\u4EF6\u914D\u7F6E\u6587\u4EF6<code v-pre>.vuepress/theme/plugins.ts</code>\u4E2D\u8FDB\u884C\u63D2\u4EF6\u914D\u7F6E</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> containerPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-container'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> resolveContainerOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./container'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">//\u81EA\u5B9A\u4E49\u5BB9\u5668cardList</span>
  <span class="token function">containerPlugin</span><span class="token punctuation">(</span><span class="token function">resolveContainerOptions</span><span class="token punctuation">(</span><span class="token string">'cardList'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">//\u81EA\u5B9A\u4E49\u5BB9\u5668cardImgList</span>
  <span class="token function">containerPlugin</span><span class="token punctuation">(</span><span class="token function">resolveContainerOptions</span><span class="token punctuation">(</span><span class="token string">'cardImgList'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3\u3001<code v-pre>cardList</code>\u914D\u7F6E</p>
<div class="language-markdown ext-md line-numbers-mode"><pre v-pre class="language-markdown"><code>::: cardList 3

<span class="token code keyword">    \`\`\`yaml
    - name: \u5348\u540E\u5357\u6742
      avatar: https://www.recoluan.com/head.png
      desc: Enjoy when you can, and endure when you must.
      link: https://www.recoluan.com
      bgColor: 'rgb(165 216 243)'
      textColor: '#6854A1'
    - name: \u897F\u74DC\u76AE\u513F
      desc: enjoy your grow up!
      avatar: https://coderhdy.com/assets/img/snapshot.png
      link: https://coderhdy.com/
      bgColor: '#FCE5BF'
      textColor: '#7B2532'
    - name: \u5C0F\u7D2B\u5FF5\u6C81
      desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
      avatar: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png
      link: https://anyfork.gitee.io/blog-docs/
      bgColor: rgb(218 88 88 / 62%)
      textColor: rgb(5 41 14 / 75%)
    \`\`\`</span>

:::
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4\u3001<code v-pre>cardImgList</code>\u914D\u7F6E\u65B9\u5F0F</p>
<div class="language-markdown ext-md line-numbers-mode"><pre v-pre class="language-markdown"><code>::: cardImgList 2

<span class="token code keyword">    \`\`\`yaml
    - img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
      link: https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html
      name: vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B
      desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
    - img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
      link: https://vuepress-theme-reco.recoluan.com/views/plugins/
      name: vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6
      desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
    - img: https://vuepress.vuejs.org/hero.png
      link: https://www.vuepress.cn/
      name: VuePress \u4E2D\u6587\u5B98\u7F51
      desc: VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
    - img: https://vuepress.vuejs.org/hero.png
      link: https://vuepress-community.netlify.app/zh/
      name: VuePress \u5B98\u65B9\u793E\u533A
      desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
    \`\`\`</span>

:::
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h2 id="\u4E09-\u63D2\u4EF6\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u4E09-\u63D2\u4EF6\u5B89\u88C5" aria-hidden="true">#</a> \u4E09 \u63D2\u4EF6\u5B89\u88C5</h2>
<p>\u2003vuepress \u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\u6269\u5C55\u63D2\u4EF6\u7684\u65B9\u5F0F\u6765\u62D3\u5C55\u529F\u80FD\uFF0C\u901A\u8FC7\u63D2\u4EF6\u53EF\u4EE5\u4E30\u5BCC\u6211\u4EEC\u535A\u5BA2\u529F\u80FD\uFF0C\u4F7F\u9875\u9762\u6548\u679C\u66F4\u52A0<code v-pre>\u70AB\u9177</code>\uFF0C<code v-pre>\u589E\u5F3A</code>\u7F51\u7AD9\u7684<code v-pre>\u903C\u683C</code>\uFF0C\u8BE6\u7EC6\u60C5\u51B5\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/guide/plugin.html" target="_blank" rel="noopener noreferrer">vuepress@2.x \u63D2\u4EF6\u914D\u7F6E\u65B9\u5F0F<ExternalLinkIcon/></a>\u548C<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/back-to-top.html" target="_blank" rel="noopener noreferrer">vuepress@2.x \u5185\u7F6E\u63D2\u4EF6<ExternalLinkIcon/></a>\u3002<code v-pre>Vuepress 2.x</code>\u63D2\u4EF6 API \u53D8\u5316\u6BD4\u8F83\u5927\uFF0C\u4F7F\u7528\u65B9\u5F0F\u4E5F\u91C7\u7528\u51FD\u6570\u5F0F\u8C03\u7528\uFF0C\u56E0\u6B64\u793E\u533A<code v-pre>Vuepress 1.x</code>\u63D2\u4EF6\u4E0D\u80FD\u4F7F\u7528\u3002\u535A\u4E3B\u535A\u5BA2\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u9488\u5BF9<code v-pre>Vuepress 1.x</code>\u7684\u90E8\u5206\u63D2\u4EF6\u8FDB\u884C\u4E86\u517C\u5BB9<code v-pre>Vuepress 2.x</code>\u9002\u914D\uFF0C\u4EE5\u4E0B\u662F\u535A\u5BA2\u4E2D\u7528\u5230\u7684\u63D2\u4EF6\uFF1A</p>
<h3 id="_1-pwa-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-pwa-\u63D2\u4EF6" aria-hidden="true">#</a> 1 PWA \u63D2\u4EF6<Badge type="tip" text="\u5B98\u65B9\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html" target="_blank" rel="noopener noreferrer">pwa<ExternalLinkIcon/></a>\u63D2\u4EF6\u4E3A<code v-pre>vuepress 2.x</code>\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u4F7F\u4F60\u7684 VuePress \u7AD9\u70B9\u6210\u4E3A\u4E00\u4E2A<a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps" target="_blank" rel="noopener noreferrer">\u6E10\u8FDB\u5F0F Web \u5E94\u7528 (PWA)<ExternalLinkIcon/></a>\uFF0C\u8BE5\u63D2\u4EF6\u4F7F\u7528<a href="https://developers.google.com/web/tools/workbox/modules/workbox-build?utm_source=devtools" target="_blank" rel="noopener noreferrer">workbox-build<ExternalLinkIcon/></a> \u6765\u751F\u6210 Service Worker \u6587\u4EF6\uFF0C\u5E76\u901A\u8FC7<a href="https://github.com/yyx990803/register-service-worker" target="_blank" rel="noopener noreferrer">register-service-worker<ExternalLinkIcon/></a> \u6765\u6CE8\u518C Service Worker</p>
<p>2\u3001<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa-popup.html" target="_blank" rel="noopener noreferrer">pwa-popup<ExternalLinkIcon/></a> \u63D2\u4EF6\u4E3A<code v-pre>vuepress 2.x</code>\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u63D0\u4F9B\u4E00\u4E2A\u5F39\u7A97\u7EC4\u4EF6\uFF0C\u5141\u8BB8\u7528\u6237\u624B\u52A8\u5237\u65B0 PWA Service Worker \u3002
\u8BE5\u63D2\u4EF6\u5FC5\u987B\u548C pwa \u63D2\u4EF6 \u4E00\u8D77\u4F7F\u7528\uFF0C\u5E76\u4E14 skipWaiting \u914D\u7F6E\u9879\u4E0D\u80FD\u8BBE\u7F6E\u4E3A true \u3002\u5F53\u65B0\u7684 Service Worker \u5C31\u7EEA\u65F6\uFF0C\u4F1A\u5728\u9875\u9762\u53F3\u4E0B\u89D2\u51FA\u73B0\u4E00\u4E2A\u5F39\u7A97\uFF0C\u8BE2\u95EE\u7528\u6237\u662F\u5426\u9700\u8981\u6FC0\u6D3B\u5904\u4E8E Waiting \u72B6\u6001\u7684 Service Worker \u3002</p>
<p>3\u3001<code v-pre>pwa</code>\u548C<code v-pre>pwa-popup</code>\u4E3A\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5E76\u672A\u96C6\u6210\u7684\u9ED8\u8BA4\u4E3B\u9898\u4E2D\uFF0C\u56E0\u6B64\u9700\u8981\u81EA\u5DF1\u5B89\u88C5\u4F9D\u8D56\u3002</p>
</div>
<ul>
<li>
<p><a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html" target="_blank" rel="noopener noreferrer">pwa<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
<ul>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code> <span class="token function">npm</span> i <span class="token parameter variable">-D</span> @vuepress/plugin-pwa@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> pwaPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-pwa'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">pwaPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p><a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa-popup.html" target="_blank" rel="noopener noreferrer">pwa-popup<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
<ul>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code> <span class="token function">npm</span> i <span class="token parameter variable">-D</span> @vuepress/plugin-pwa-popup@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code> <span class="token function">pwaPopupPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">locales</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'\u53D1\u73B0\u65B0\u5185\u5BB9\u53EF\u7528'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">buttonText</span><span class="token operator">:</span> <span class="token string">'\u70B9\u6211\u5237\u65B0'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<code v-pre>pwa</code>\u5B98\u7F51\u914D\u7F6E\uFF1A<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html" target="_blank" rel="noopener noreferrer">https://v2.vuepress.vuejs.org/zh/reference/plugin/pwa.html<ExternalLinkIcon/></a></p>
</li>
</ul>
<h3 id="_2-docsearch-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-docsearch-\u63D2\u4EF6" aria-hidden="true">#</a> 2 DocSearch \u63D2\u4EF6<Badge type="tip" text="\u5B98\u65B9\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container info"><p class="custom-container-title">\u76F8\u5173\u4FE1\u606F</p>
<p>1\u3001\u5C06 Algolia DocSearch \u96C6\u6210\u5230 VuePress \u4E2D\uFF0C\u4E3A\u4F60\u7684\u6587\u6863\u7F51\u7AD9\u63D0\u4F9B\u641C\u7D22\u529F\u80FD\u3002</p>
<p>2\u3001\u5F53\u4F60\u6B63\u786E\u914D\u7F6E\u8BE5\u63D2\u4EF6\u540E\uFF0C\u9ED8\u8BA4\u4E3B\u9898\u4F1A\u628A DocSearch \u6309\u94AE\u6DFB\u52A0\u5230\u5BFC\u822A\u680F\u3002</p>
<p>3\u3001<code v-pre>DocSearch</code>\u4E3A\u5B98\u65B9\u5F00\u53D1\u7684\u63D2\u4EF6\uFF0C\u5E76\u672A\u96C6\u6210\u7684\u9ED8\u8BA4\u4E3B\u9898\u4E2D\uFF0C\u56E0\u6B64\u9700\u8981\u81EA\u5DF1\u5B89\u88C5\u4F9D\u8D56\u3002</p>
</div>
<ul>
<li>
<p><a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">DocSearch<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
</li>
<li>
<p>\u5B89\u88C5\u4F9D\u8D56</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code> <span class="token function">npm</span> i <span class="token parameter variable">-D</span> @vuepress/plugin-docsearch@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
<li>
<p>\u63D2\u4EF6\u914D\u7F6E</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> docsearchPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vuepress/plugin-docsearch'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//docsearch\u63D2\u4EF6,https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html</span>
    <span class="token function">docsearchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">'e3224f6a8f05632af9c14c97******b54'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">'anyfork'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">'09V****WK61N'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">locales</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">translations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">buttonText</span><span class="token operator">:</span> <span class="token string">'\u641C\u7D22\u6587\u6863'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/docsearch.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">DocSearch<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\uFF0C<code v-pre>Algolia</code>\u914D\u7F6E\u8BF7\u53C2\u8003\uFF1A<RouterLink to="/posts/other/algoliaSearch.html">VuePress \u535A\u5BA2\u4F18\u5316\u4E4B\u5F00\u542F Algolia \u5168\u6587\u641C\u7D22</RouterLink></p>
</li>
</ul>
<h3 id="_3-readingtime-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_3-readingtime-\u63D2\u4EF6" aria-hidden="true">#</a> 3 ReadingTime \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>ReadingTime\u63D2\u4EF6</code>\u7EDF\u8BA1\u6587\u7AE0\u5B57\u6570\u548C\u9884\u4F30\u9605\u8BFB\u65F6\u95F4\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/reading-time/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/reading-time/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li>
<p><a href="https://vuepress-theme-hope.github.io/v2/reading-time/zh/" target="_blank" rel="noopener noreferrer">ReadingTime<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
</li>
<li>
<p>\u5B89\u88C5\u4F9D\u8D56</p>
</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-reading-time2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-reading-time2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-reading-time2@next@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readingTimePlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-reading-time2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">readingTimePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/reading-time/zh/" target="_blank" rel="noopener noreferrer">readingTime<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_4-seo-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_4-seo-\u63D2\u4EF6" aria-hidden="true">#</a> 4 SEO \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>SEO\u63D2\u4EF6</code>\u672C\u63D2\u4EF6\u4F1A\u901A\u8FC7\u5411\u7F51\u7AD9<code v-pre>&lt;head&gt;</code> \u6CE8\u5165\u6807\u7B7E\uFF0C\u8BA9\u4F60\u7684\u7F51\u7AD9\u5B8C\u5168\u652F\u6301 \u5F00\u653E\u5185\u5BB9\u534F\u8BAE OGP \u548C JSON-LD 1.1\uFF0C\u4EE5\u5168\u9762\u589E\u5F3A\u7AD9\u70B9\u7684\u641C\u7D22\u5F15\u64CE\u4F18\u5316\u6027\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/seo/zh/guide.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/seo/zh/guide.html<ExternalLinkIcon/></a></p>
</div>
<ul>
<li>
<p><a href="https://vuepress-theme-hope.github.io/v2/seo/zh/" target="_blank" rel="noopener noreferrer">SEO<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
</li>
<li>
<p>\u5B89\u88C5\u4F9D\u8D56</p>
</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-seo2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-seo2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-seo2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> seoPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-seo2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// seo\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/seo/</span>
    <span class="token function">seoPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'https://anyfork.github.io/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'\u5C0F\u7D2B\u5FF5\u6C81'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://anyfork.github.io/blog-docs/'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/seo/zh/config.html" target="_blank" rel="noopener noreferrer">SEO<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_5-sitemap-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_5-sitemap-\u63D2\u4EF6" aria-hidden="true">#</a> 5 SiteMap \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>siteMap\u63D2\u4EF6</code>\u672C\u63D2\u4EF6\u4F1A\u4E3A\u4F60\u7684\u7F51\u7AD9\u81EA\u52A8\u751F\u6210 Sitemap\u3002\u4E3A\u4E86\u4F7F\u63D2\u4EF6\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u4F60\u9700\u8981\u5C06\u90E8\u7F72\u7684\u57DF\u540D\u4F20\u9012\u7ED9\u63D2\u4EF6\u7684 hostname \u9009\u9879\u3002\u63D2\u4EF6\u4F1A\u81EA\u52A8\u6839\u636E\u9875\u9762\u7684 Git \u7684\u65F6\u95F4\u6233\u751F\u6210\u9875\u9762\u7684\u6700\u540E\u66F4\u65B0\u65F6\u95F4\uFF0C\u540C\u65F6\u4F1A\u6839\u636E\u7AD9\u70B9\u7684\u591A\u8BED\u8A00\u914D\u7F6E\u58F0\u660E\u9875\u9762\u7684\u5176\u4ED6\u8BED\u8A00\u7248\u672C\u66FF\u4EE3\u5730\u5740\u3002\uFF0C\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/sitemap/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/sitemap/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li>
<p><a href="https://vuepress-theme-hope.github.io/v2/seo/zh/" target="_blank" rel="noopener noreferrer">SEO<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</p>
</li>
<li>
<p>\u5B89\u88C5\u4F9D\u8D56</p>
</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-sitemap2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-sitemap2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-sitemap2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
- \u63D2\u4EF6\u914D\u7F6E
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> sitemapPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-sitemap2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// siteMap\u7AD9\u70B9\u5730\u56FE\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/sitemap/zh/config.html</span>
    <span class="token function">sitemapPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'https://anyfork.github.io/blog-docs/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">extraUrls</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://anyfork.gitee.io/blog-docs/'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/sitemap/zh/config.html" target="_blank" rel="noopener noreferrer">siteMap<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_6-copyright-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_6-copyright-\u63D2\u4EF6" aria-hidden="true">#</a> 6 Copyright \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>copyright\u63D2\u4EF6</code>\u6B64\u63D2\u4EF6\u53EF\u4EE5\u5728\u8BBF\u95EE\u8005\u4ECE\u4F60\u7684\u7AD9\u70B9\u590D\u5236\u5185\u5BB9\u65F6\uFF0C\u81EA\u52A8\u8FFD\u52A0\u7248\u6743\u4FE1\u606F\uFF0C\u4E5F\u53EF\u4EE5\u7981\u6B62\u7AD9\u70B9\u7684\u590D\u5236\u6216\u8005\u9009\u62E9\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/copyright/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/copyright/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/v2/copyright/zh/" target="_blank" rel="noopener noreferrer">copyright<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-copyright2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-copyright2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-copyright2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> copyrightPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-copyright2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u590D\u5236\u52A0\u7248\u6743\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/copyright/zh/config.html</span>
    <span class="token function">copyrightPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">'https://anyfork.github.io/blog-docs/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">'\u5C0F\u7D2B\u5FF5\u6C81'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/copyright/zh/config.html" target="_blank" rel="noopener noreferrer">copyright<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_7-copycode-\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_7-copycode-\u63D2\u4EF6" aria-hidden="true">#</a> 7 CopyCode \u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>copyCode\u63D2\u4EF6</code>\u6B64\u63D2\u4EF6\u4F1A\u81EA\u52A8\u6DFB\u52A0\u590D\u5236\u6309\u94AE\u5230\u6BCF\u4E2A\u4EE3\u7801\u5757\u7684\u53F3\u4E0B\u89D2\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6309\u94AE\u4EC5\u5728\u684C\u9762\u6A21\u5F0F\u663E\u793A\uFF0C\u5982\u679C\u4F60\u9700\u8981\u5728\u79FB\u52A8\u7AEF\u5C55\u793A\u8FD9\u4E2A\u6309\u94AE\uFF0C\u8BF7\u5C06 showInMobile \u8BBE\u7F6E\u4E3A true\u3002\u5728\u7528\u6237\u70B9\u51FB\u590D\u5236\u6309\u94AE\u540E\uFF0C\u5C4F\u5E55\u4E0A\u4F1A\u663E\u793A\u4E00\u4E2A\u590D\u5236\u6210\u529F\u7684\u63D0\u793A\u3002\u9ED8\u8BA4\u7684\u63D0\u793A\u65F6\u957F\u4E3A 2000ms\uFF0C\u5982\u679C\u4F60\u9700\u8981\u66F4\u6539\u8FD9\u4E2A\u65F6\u957F\uFF0C\u8BF7\u8BBE\u7F6E duration(\u5355\u4F4D ms)\uFF0C\u5982\u679C\u4F60\u4E0D\u9700\u8981\u8FD9\u4E2A\u63D0\u793A\uFF0C\u8BF7\u5C06 duration \u8BBE\u7F6E\u4E3A 0\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/copy-code/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/copy-code/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/v2/copy-code/zh/" target="_blank" rel="noopener noreferrer">CopyCode<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-copy-code2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-copy-code2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-copy-code2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> copyCodePlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-copy-code2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u4EE3\u7801\u590D\u5236\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/copy-code/zh/</span>
    <span class="token function">copyCodePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'.theme-default-content div[class*="language-"] pre'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">locales</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">copy</span><span class="token operator">:</span> <span class="token string">'\u590D\u5236\u6210\u529F!'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">hint</span><span class="token operator">:</span> <span class="token string">'copy!'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/copy-code/zh/config.html" target="_blank" rel="noopener noreferrer">copyCode<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_8-waline-\u8BC4\u8BBA\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_8-waline-\u8BC4\u8BBA\u63D2\u4EF6" aria-hidden="true">#</a> 8 Waline \u8BC4\u8BBA\u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>Giscus\u63D2\u4EF6</code>Giscus \u662F\u4E00\u4E2A\u57FA\u4E8E GitHub Discussion \u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u542F\u7528\u7B80\u4FBF\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/comment/zh/guide/giscus.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/comment/zh/guide/giscus.html<ExternalLinkIcon/></a>,\u539F\u672C\u535A\u4E3B\u91C7\u7528\u7684\u662F<code v-pre>Giscus</code>\u4F5C\u4E3A\u8BC4\u8BBA\u63D2\u4EF6\uFF0C\u4F46\u53D1\u73B0\u5176\u6CA1\u6709\u6D4F\u89C8\u91CF\u7EDF\u8BA1\u529F\u80FD\uFF0C\u540E\u91C7\u7528<code v-pre>Waline</code>\u63D2\u4EF6\uFF0C\u4E0D\u4EC5\u5177\u6709\u8BC4\u8BBA\u529F\u80FD\uFF0C\u8FD8\u80FD\u8FDB\u884C\u6D4F\u89C8\u91CF\u7EDF\u8BA1\u3002</p>
<p>4\u3001<code v-pre>Waline\u63D2\u4EF6</code>\u662F\u5BF9<code v-pre>valine\u63D2\u4EF6</code>\u7684\u5C01\u88C5\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86<code v-pre>valine</code>\u6570\u636E\u4E0D\u5B89\u5168\u95EE\u9898\uFF0C\u540C\u65F6\u4E5F\u5177\u5907<code v-pre>valine</code>\u4E00\u5207\u529F\u80FD\u3002\u53EF\u4EE5\u4F7F\u7528 hope \u63D2\u4EF6\u7528\u6CD5\uFF0C\u5355\u9875\u9762\u96C6\u6210\u597D\u4E86\u6D4F\u89C8\u91CF\u529F\u80FD\uFF0C\u901A\u8FC7\u5BFB\u627E\u9ED8\u8BA4\u7C7B\u9009\u62E9\u5668<code v-pre>waline-pageview-count</code>\u8FDB\u884C\u6570\u636E\u81EA\u52A8\u586B\u5145\uFF0C\u4F46\u5BF9\u4E8E\u9996\u9875\u5217\u8868\u672A\u5B9E\u73B0\u6D4F\u89C8\u91CF\u529F\u80FD\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u81EA\u884C\u5B9E\u73B0\u5373\u53EF\u3002\u63D2\u4EF6\u914D\u7F6E\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html<ExternalLinkIcon/></a>,\u4EA6\u53EF\u5355\u72EC\u4F7F\u7528\uFF0C\u8BE6\u89C1<a href="https://waline.js.org/guide/get-started.html" target="_blank" rel="noopener noreferrer">waline \u5B98\u7F51<ExternalLinkIcon/></a>\u3002</p>
</div>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/v2/comment/zh/config/waline.html" target="_blank" rel="noopener noreferrer">Waline<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-comment2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-comment2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-comment2@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u53EF\u4EE5\u6309\u7167<code v-pre>hope</code>\u63D2\u4EF6\u914D\u7F6E\u6D41\u7A0B\u8FDB\u884C\u914D\u7F6E\uFF0C\u91C7\u7528<code v-pre>waline</code>\u5B98\u65B9\u9ED8\u8BA4\u7684<code v-pre>LeanCloud </code>\u6570\u636E\u5E93\u548C<code v-pre>Vercel</code>\u670D\u52A1\u7AEF\u90E8\u7F72\u65B9\u5F0F\u3002\u535A\u4E3B\u5C1D\u8BD5\u8FC7\u56FD\u5185\u6548\u679C\u4E0D\u592A\u597D\uFF0C\u4E0D\u5F00\u68AF\u5B50\u60C5\u51B5\u4E0B<code v-pre>Vercel</code>\u670D\u52A1\u7AEF\u5730\u5740\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u4E8E\u662F\u4FBF\u653E\u5F03\u4E86\u3002</p>
<p>2\u3001\u6309\u7167<a href="https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93" target="_blank" rel="noopener noreferrer">waline \u5B98\u7F51<ExternalLinkIcon/></a>\u670D\u52A1\u7AEF\u90E8\u7F72\u65B9\u5F0F\u8FDB\u884C\u670D\u52A1\u7AEF\u90E8\u7F72\u3002\u5404\u79CD\u65B9\u5F0F\u90FD\u5C1D\u8BD5\u4E86\u4E00\u4E0B,\u7ED3\u679C\u5982\u4E0B\uFF1A1 \u817E\u8BAF\u4E91\u4E91\u51FD\u6570\u8BA1\u7B97\u4ECA\u5E74 8 \u6708\u5F00\u59CB\u6536\u8D39\uFF0C\u6700\u4F4E\u6BCF\u6708 19.9\uFF0C\u653E\u5F03\u4E86\u30022 \u767E\u5EA6\u4E91\u6309\u7167\u5B98\u7F51\u6D41\u7A0B\u90E8\u7F72\uFF0C\u7A0B\u5E8F\u62A5\u9519\uFF0C\u4F9D\u8D56\u7248\u672C\u95EE\u9898\uFF0C\u4FBF\u653E\u5F03\u4E86\u30023 \u963F\u91CC\u4E91\u90E8\u7F72\u6210\u529F\u4E86\uFF0C\u4E91\u51FD\u6570\u8BA1\u7B97\u6BCF\u6708 100 \u4E07\u514D\u8D39\u6B21\u6570\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\uFF0C\u4F46\u670D\u52A1 url \u9700\u8981\u81EA\u5B9A\u4E49\u57DF\u540D\u8FDB\u884C\u6620\u5C04\uFF0C\u4E0D\u7136\u6CA1\u6CD5\u76F4\u63A5\u4F7F\u7528\uFF0C\u4F1A\u76F4\u63A5\u4E0B\u8F7D html\uFF0C\u9700\u8981\u6709\u963F\u91CC\u4E91\u57DF\u540D\u6216\u8005\u8BF4\u963F\u91CC\u4E91\u670D\u52A1\u5668\uFF0C\u535A\u4E3B\u6CA1\u6709\u963F\u91CC\u4E91\u670D\u52A1\u5668\u4FBF\u653E\u5F03\u4E86\u3002\u4E0A\u9762\u7684\u65B9\u5F0F\u963F\u91CC\u4E91\u6700\u5408\u9002\uFF0C\u6709\u6761\u4EF6\u7684\u5C0F\u4F19\u4F34\u53EF\u4EE5\u5C1D\u8BD5\u3002</p>
<p>3\u3001\u535A\u4E3B\u63A8\u8350\u901A\u8FC7\u81EA\u5DF1\u90E8\u7F72<code v-pre>waline</code>\u670D\u52A1\u5668\u7684\u65B9\u5F0F\uFF0C\u4E3B\u8981\u539F\u56E0\u662F\uFF1A\u90E8\u7F72\u7B80\u5355\uFF0C\u7075\u6D3B\uFF0C\u8BBF\u95EE\u901F\u5EA6\u66F4\u5FEB\uFF0C\u8FD8\u80FD\u81EA\u5B9A\u4E49\u6570\u636E\u5E93\uFF0C\u524D\u63D0\u662F\u81EA\u5DF1\u8981\u6709\u4E91\u670D\u52A1\u5668\u548C\u57DF\u540D\u3002\u8BE6\u7EC6\u90E8\u7F72\u65B9\u5F0F\u53C2\u8003\u5B98\u7F51<a href="https://waline.js.org/guide/server/vps-deploy.html" target="_blank" rel="noopener noreferrer">\u72EC\u7ACB\u90E8\u7F72<ExternalLinkIcon/></a>\u6216\u8005<RouterLink to="/posts/other/walineServer.html">Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848</RouterLink>\u3002\u6309\u7167\u4E0A\u8FF0\u64CD\u4F5C\u5373\u53EF\uFF0C\u53EA\u9700\u8981\u914D\u7F6E\u597D\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\uFF0C\u4E0A\u7EBF\u90E8\u7F72\u5373\u53EF\u3002</p>
</div>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> commentPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-comment2'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">commentPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">provider</span><span class="token operator">:</span> <span class="token string">'Waline'</span><span class="token punctuation">,</span>
      <span class="token comment">//\u72EC\u7ACB\u90E8\u7F72\u7684waline\u670D\u52A1\u5668\u8BBF\u95EE\u5730\u5740</span>
      <span class="token literal-property property">serverURL</span><span class="token operator">:</span> <span class="token string">'XXXX'</span><span class="token punctuation">,</span>
      <span class="token comment">//\u662F\u5426\u5F00\u542F\u8BBF\u95EE\u91CF</span>
      <span class="token literal-property property">pageview</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93" target="_blank" rel="noopener noreferrer">Waline<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_9-markdown-\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_9-markdown-\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6" aria-hidden="true">#</a> 9 Markdown \u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6<Badge type="tip" text="Hope\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u6307<code v-pre>vuepress-theme-hope</code>\u4E3B\u9898\u4F5C\u8005\u5F00\u53D1\u7684\u63D2\u4EF6\u5E93\u3002</p>
<p>2\u3001<code v-pre>Hope\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>Markdown\u8BED\u6CD5\u6269\u5C55\u63D2\u4EF6</code>\u901A\u8FC7\u5B89\u88C5\u5E76\u542F\u7528\u6B64\u63D2\u4EF6\uFF0C\u4F60\u53EF\u4EE5\u5728 Markdown \u4E2D\u4F7F\u7528\u66F4\u591A\u7684\u8BED\u6CD5\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://vuepress-theme-hope.github.io/v2/md-enhance/zh/" target="_blank" rel="noopener noreferrer">https://vuepress-theme-hope.github.io/v2/md-enhance/zh/<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/v2/md-enhance/zh/" target="_blank" rel="noopener noreferrer">Markdown \u8BED\u6CD5\u6269\u5C55<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-md-enhance@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> vuepress-plugin-md-enhance@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
    <CodeGroupItem title="pnpm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> vuepress-plugin-md-enhance@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mdEnhancePlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuepress-plugin-md-enhance'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//markdown \u589E\u5F3A\u63D2\u4EF6\uFF0Chttps://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/</span>
    <span class="token function">mdEnhancePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// \u542F\u7528\u81EA\u5B9A\u4E49\u5BB9\u5668</span>
      <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u53EF\u4EE5\u5728\u9009\u9879\u4E2D enableAll \u8BBE\u7F6E\u4E3A true \u6765\u542F\u7528\u63D2\u4EF6\u7684\u6240\u6709\u529F\u80FD,\u4E0D\u5EFA\u8BAE\u5F00\u542F\u5168\u90E8\u6269\u5C55\u529F\u80FD\uFF0C\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8FDB\u884C\u5F00\u542F</p>
<ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://vuepress-theme-hope.github.io/v2/md-enhance/zh/guide/" target="_blank" rel="noopener noreferrer">Markdown \u8BED\u6CD5\u6269\u5C55<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_10-\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_10-\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6" aria-hidden="true">#</a> 10 \u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6</code>\u53EF\u4EE5\u5728\u7F51\u7AD9\u5168\u5C40\u6CE8\u518C\u97F3\u4E50\u64AD\u653E\u5668\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u914D\u7F6E\u672C\u5730\u6216\u7EBF\u4E0A\u97F3\u4E50\uFF0C\u5B9E\u73B0\u97F3\u4E50\u5728\u7EBF\u64AD\u653E\u3002</p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-bgm-player-next" target="_blank" rel="noopener noreferrer">\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-bgm-player-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-bgm-player-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> bgmMusicPlayer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-bgm-player-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6\u3002</span>
    <span class="token function">bgmMusicPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">audios</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'\u5361\u519C'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">artist</span><span class="token operator">:</span> <span class="token string">'\u5361\u519C\u94A2\u7434\u7248'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/canon/canon.mp3'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">cover</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/canon/canon.jpg'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'\u98CE\u5C45\u4F4F\u7684\u8857\u9053'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">artist</span><span class="token operator">:</span> <span class="token string">'\u98CE\u5C45\u4F4F\u7684\u8857\u9053 \u94A2\u7434\u7248 - \u94A2\u7434\u66F2'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/wind/wind.mp3'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">cover</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/wind/wind.jpg'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'\u591C\u7684\u94A2\u7434\u66F2'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">artist</span><span class="token operator">:</span> <span class="token string">'\u591C\u7684\u94A2\u7434\u66F2\u4E94 - \u77F3\u8FDB'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/night/night.mp3'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">cover</span><span class="token operator">:</span> <span class="token string">'/blog-docs/music/night/night.jpg'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">autoShrink</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">floatStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token string">'100px'</span><span class="token punctuation">,</span> <span class="token string-property property">'z-index'</span><span class="token operator">:</span> <span class="token string">'999999'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-bgm-player-next" target="_blank" rel="noopener noreferrer">\u97F3\u4E50\u64AD\u653E\u5668\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_11-\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_11-\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6" aria-hidden="true">#</a> 11 \u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6</code>\u9F20\u6807\u70B9\u51FB\u65F6\u89E6\u53D1\u70B9\u51FB\u7279\u6548\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next" target="_blank" rel="noopener noreferrer">\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-cursor-effects-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-cursor-effects-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> cursorEffects <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-cursor-effects-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6</span>
    <span class="token function">cursorEffects</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'star'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-cursor-effects-next" target="_blank" rel="noopener noreferrer">\u9F20\u6807\u70B9\u51FB\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_12-\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_12-\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6" aria-hidden="true">#</a> 12 \u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6</code>\u5F53\u4ECA\u65E5\u6216\u79BB\u5F00\u9875\u9762 tabs \u65F6 title \u53D1\u751F\u53D8\u5316\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next" target="_blank" rel="noopener noreferrer">\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-dynamic-title-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-dynamic-title-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> dynamicTitle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-dynamic-title-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">dynamicTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-dynamic-title-next" target="_blank" rel="noopener noreferrer">\u52A8\u6001\u6807\u9898\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_13-\u770B\u677F\u5A18\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_13-\u770B\u677F\u5A18\u63D2\u4EF6" aria-hidden="true">#</a> 13 \u770B\u677F\u5A18\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u770B\u677F\u5A18\u63D2\u4EF6</code>\u5F53\u4ECA\u65E5\u6216\u79BB\u5F00\u9875\u9762 tabs \u65F6 title \u53D1\u751F\u53D8\u5316\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next" target="_blank" rel="noopener noreferrer">\u770B\u677F\u5A18\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-kan-ban-niang-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-kan-ban-niang-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> kanBanNiang <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-kan-ban-niang-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">kanBanNiang</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-kan-ban-niang-next" target="_blank" rel="noopener noreferrer">\u770B\u677F\u5A18\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_14-\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_14-\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6" aria-hidden="true">#</a> 14 \u80CC\u666F\u5F69\u5E26\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6</code>\u80CC\u666F\u5F69\u5E26\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next" target="_blank" rel="noopener noreferrer">\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-ribbon-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-ribbon-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ribbon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-ribbon-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u5F69\u5E26</span>
    <span class="token function">ribbon</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token comment">// \u9ED8\u8BA4\u6570\u636E</span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token comment">//  \u900F\u660E\u5EA6</span>
      <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//  \u5C42\u7EA7</span>
      <span class="token literal-property property">option</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u8272\u5E26HSL\u9971\u548C\u5EA6</span>
        <span class="token literal-property property">colorSaturation</span><span class="token operator">:</span> <span class="token string">'80%'</span><span class="token punctuation">,</span>
        <span class="token comment">// \u8272\u5E26HSL\u4EAE\u5EA6\u91CF</span>
        <span class="token literal-property property">colorBrightness</span><span class="token operator">:</span> <span class="token string">'60%'</span><span class="token punctuation">,</span>
        <span class="token comment">// \u5E26\u72B6\u989C\u8272\u4E0D\u900F\u660E\u5EA6</span>
        <span class="token literal-property property">colorAlpha</span><span class="token operator">:</span> <span class="token number">0.65</span><span class="token punctuation">,</span>
        <span class="token comment">// \u5728HSL\u989C\u8272\u7A7A\u95F4\u4E2D\u5FAA\u73AF\u663E\u793A\u989C\u8272\u7684\u901F\u5EA6\u6709\u591A\u5FEB</span>
        <span class="token literal-property property">colorCycleSpeed</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
        <span class="token comment">// \u4ECE\u54EA\u4E00\u4FA7\u5F00\u59CBY\u8F74 (top|min, middle|center, bottom|max, random)</span>
        <span class="token literal-property property">verticalPosition</span><span class="token operator">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span>
        <span class="token comment">// \u5230\u8FBE\u5C4F\u5E55\u53E6\u4E00\u4FA7\u7684\u901F\u5EA6\u6709\u591A\u5FEB</span>
        <span class="token literal-property property">horizontalSpeed</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        <span class="token comment">// \u5728\u4EFB\u4F55\u7ED9\u5B9A\u65F6\u95F4\uFF0C\u5C4F\u5E55\u4E0A\u4F1A\u4FDD\u7559\u591A\u5C11\u6761\u5E26</span>
        <span class="token literal-property property">ribbonCount</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token comment">// \u6DFB\u52A0\u7B14\u5212\u4EE5\u53CA\u8272\u5E26\u586B\u5145\u989C\u8272</span>
        <span class="token literal-property property">strokeSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token comment">// \u901A\u8FC7\u9875\u9762\u6EDA\u52A8\u4E0A\u7684\u56E0\u5B50\u5782\u76F4\u79FB\u52A8\u8272\u5E26</span>
        <span class="token literal-property property">parallaxAmount</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>
        <span class="token comment">// \u968F\u7740\u65F6\u95F4\u7684\u63A8\u79FB\uFF0C\u4E3A\u6BCF\u4E2A\u529F\u80FD\u533A\u6DFB\u52A0\u52A8\u753B\u6548\u679C</span>
        <span class="token literal-property property">animateSections</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//  \u70B9\u51FB\u5F69\u5E26  true\u663E\u793A  false\u4E3A\u4E0D\u663E\u793A</span>
      <span class="token literal-property property">ribbonShow</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// \u6ED1\u52A8\u5F69\u5E26</span>
      <span class="token literal-property property">ribbonAnimationShow</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-ribbon-next" target="_blank" rel="noopener noreferrer">\u80CC\u666F\u5F69\u5E26\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h3 id="_15-\u6A31\u82B1\u7279\u6548\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_15-\u6A31\u82B1\u7279\u6548\u63D2\u4EF6" aria-hidden="true">#</a> 15 \u6A31\u82B1\u7279\u6548\u63D2\u4EF6<Badge type="tip" text="AnyFork\u63D2\u4EF6" vertical="top" /></h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u6307\u535A\u4E3B\u81EA\u5DF1\u5F00\u53D1\u9002\u914D\u7684\u63D2\u4EF6\u3002</p>
<p>2\u3001<code v-pre>AnyFork\u63D2\u4EF6</code>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork<ExternalLinkIcon/></a></p>
<p>3\u3001<code v-pre>\u6A31\u82B1\u7279\u6548\u63D2\u4EF6</code>\u80CC\u666F\u5F69\u5E26\u3002\u8BE6\u60C5\u53C2\u8003\uFF1A<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next" target="_blank" rel="noopener noreferrer">https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next<ExternalLinkIcon/></a></p>
</div>
<ul>
<li><a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next" target="_blank" rel="noopener noreferrer">\u6A31\u82B1\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u63D2\u4EF6\u4F9D\u8D56\u5B89\u88C5\u548C\u63D2\u4EF6\u914D\u7F6E\uFF1A</li>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<CodeGroup>
  <CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  @anyfork/vuepress-plugin-sakura-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
  <CodeGroupItem title="npm" active>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> @anyfork/vuepress-plugin-sakura-next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>  </CodeGroupItem>
</CodeGroup>
<ul>
<li>\u63D2\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> sakura <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@anyfork/vuepress-plugin-sakura-next'</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//\u6A31\u82B1\u7279\u6548</span>
    <span class="token function">sakura</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">sakura_zindex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">sakura_img</span><span class="token operator">:</span> <span class="token string">'/blog-docs/images/blue.png'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u66F4\u591A\u8BE6\u7EC6\u914D\u7F6E\uFF0C\u8BF7\u53C2\u8003<a href="https://github.com/AnyFork/vuepress-pulgins/tree/2.X/packages/%40anyfork/vuepress-plugin-sakura-next" target="_blank" rel="noopener noreferrer">\u6A31\u82B1\u7279\u6548\u63D2\u4EF6<ExternalLinkIcon/></a>\u5B98\u7F51\u914D\u7F6E\u3002</li>
</ul>
<h2 id="\u56DB-\u9879\u76EE\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u56DB-\u9879\u76EE\u90E8\u7F72" aria-hidden="true">#</a> \u56DB \u9879\u76EE\u90E8\u7F72</h2>
<p><code v-pre>vuepress</code>\u9879\u76EE\u548C\u666E\u901A vue \u90FD\u5C5E\u4E8E\u5355\u9875\u9762\u5E94\u7528\uFF0C\u9879\u76EE\u6253\u5305\u90E8\u7F72\u65B9\u5F0F\u4E5F\u4E00\u81F4\uFF0C\u53EF\u4EE5\u91C7\u7528\u672C\u5730\u90E8\u7F72\uFF0C\u4E5F\u53EF\u4EE5\u91C7\u7528\u4E91\u670D\u52A1\u5668\u8FDB\u884C\u90E8\u7F72\u3002\u4E0B\u9762\u603B\u7ED3 2 \u79CD\u90E8\u7F72\u65B9\u5F0F\uFF1A</p>
<ul>
<li>1 \u672C\u5730 nginx \u90E8\u7F72\u9759\u6001\u6587\u4EF6 \u3002</li>
<li>2 \u901A\u8FC7<code v-pre>Gitee Actions</code>\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\u5230<code v-pre>Github Pages</code>\u548C<code v-pre>Gitee Pages</code>\u3002</li>
</ul>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<p>1\u3001\u5982\u679C\u9879\u76EE\u8BBE\u7F6E\u4E86<code v-pre>base</code>,\u4E0D\u53EF\u76F4\u63A5\u5728\u672C\u5730\u5F00\u542F\u4E00\u4E2A\u670D\u52A1\u5668(eg:http-server)\u8FDB\u884C\u90E8\u7F72\uFF0C\u9700\u8981\u901A\u8FC7 nginx \u670D\u52A1\u5668\u8FDB\u884C\u53CD\u5411\u4EE3\u7406\u3002</p>
<p>2\u3001\u5982\u679C\u9879\u76EE\u6CA1\u6709\u8BBE\u7F6E<code v-pre>base</code>,\u53EF\u4EE5\u901A\u8FC7\u672C\u5730\u9759\u6001\u670D\u52A1\u5668\u6216 nginx \u670D\u52A1\u5668\u8FDB\u884C\u4EE3\u7406\u3002</p>
<p>3\u3001<code v-pre>base</code>\u7C7B\u578B: string,\u9ED8\u8BA4\u503C: /,\u90E8\u7F72\u7AD9\u70B9\u7684\u57FA\u7840\u8DEF\u5F84\uFF0C\u5982\u679C\u4F60\u60F3\u8BA9\u4F60\u7684\u7F51\u7AD9\u90E8\u7F72\u5230\u4E00\u4E2A\u5B50\u8DEF\u5F84\u4E0B\uFF0C\u4F60\u5C06\u9700\u8981\u8BBE\u7F6E\u5B83\u3002\u5982 Github pages\uFF0C\u5982\u679C\u4F60\u60F3\u5C06\u4F60\u7684\u7F51\u7AD9\u90E8\u7F72\u5230 https://foo.github.io/bar/\uFF0C\u90A3\u4E48 base \u5E94\u8BE5\u88AB\u8BBE\u7F6E\u6210 \u201C/bar/\u201D\uFF0C\u5B83\u7684\u503C\u5E94\u5F53\u603B\u662F\u4EE5\u659C\u6760\u5F00\u59CB\uFF0C\u5E76\u4EE5\u659C\u6760\u7ED3\u675F\u3002base \u5C06\u4F1A\u81EA\u52A8\u5730\u4F5C\u4E3A\u524D\u7F00\u63D2\u5165\u5230\u6240\u6709\u4EE5 / \u5F00\u59CB\u7684\u5176\u4ED6\u9009\u9879\u7684\u94FE\u63A5\u4E2D\uFF0C\u6240\u4EE5\u4F60\u53EA\u9700\u8981\u6307\u5B9A\u4E00\u6B21\u3002</p>
</div>
<h3 id="_1-nginx-\u670D\u52A1\u5668\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#_1-nginx-\u670D\u52A1\u5668\u90E8\u7F72" aria-hidden="true">#</a> 1 nginx \u670D\u52A1\u5668\u90E8\u7F72</h3>
<ul>
<li>
<p><code v-pre>base</code>\u4E3A<code v-pre>/</code>\u65F6\uFF0C\u76F8\u5E94\u7684 nginx \u914D\u7F6E\u5341\u5206\u7B80\u5355\uFF0C\u76F4\u63A5\u6307\u5B9A\u7AEF\u53E3\u5982\u4E0B\u9762\u793A\u4F8B\u7684 8080\uFF0C\u5E76\u6307\u5B9A root \u8DEF\u5F84\uFF08\u5373 build \u540E\u653E\u5728\u670D\u52A1\u5668\u7684\u8DEF\u5F84\uFF09nginx.conf \u914D\u7F6E\u5982\u4E0B\uFF1A</p>
<div class="language-conf ext-conf line-numbers-mode"><pre v-pre class="language-conf"><code>server {
  listen 8080;
  location / {
      root /root/doc/dist;
      try_files $uri $uri/ /index.html;
      index index.html index.htm;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p><code v-pre>base</code>\u4E3A<code v-pre>/blog-docs</code>\u65F6\uFF0C\u6BD4\u5982\u672C\u7AD9\uFF0C\u914D\u7F6E\u7684\u4E3A/blog-docs\uFF0C\u914D\u7F6E\u4E5F\u5F88\u7B80\u5355\uFF0C\u53EA\u9700\u8981\u4E0A\u9762\u7684 location \u7531/\u6539\u4E3A/blog-docs/\uFF0C\u6CE8\u610F\u6700\u540E\u4E00\u4E2A\u659C\u6760\u3002nginx.conf \u914D\u7F6E\u5982\u4E0B\uFF1A</p>
<div class="language-conf ext-conf line-numbers-mode"><pre v-pre class="language-conf"><code>server {
  listen 80;
  server_name localhost;
  client_max_body_size 20m;
  charset utf-8;
    #\u914D\u7F6E\u4E86\u8F6C\u53D1
  location /blog-docs/ {
    proxy_pass http://localhost:8081/;
  }
}
#\u57288081\u4E0A\u8D77\u4E86vuepress
server {
  listen 8081;
  location / {
      root /root/doc/dist;
      try_files $uri $uri/ /index.html;
      index index.html index.htm;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
</ul>
<h3 id="_2-\u90E8\u7F72\u5728github-pages\u548Cgitee-pages" tabindex="-1"><a class="header-anchor" href="#_2-\u90E8\u7F72\u5728github-pages\u548Cgitee-pages" aria-hidden="true">#</a> 2 \u90E8\u7F72\u5728<code v-pre>Github Pages</code>\u548C<code v-pre>Gitee Pages</code></h3>
<p>\u2003\u9879\u76EE\u91C7\u7528<code v-pre>Github Pages</code>\u548C<code v-pre>Gitee Pages</code>\u65B9\u5F0F\u8FDB\u884C\u4EE3\u7406\u90E8\u7F72\uFF0C\u4F9D\u9760<code v-pre>Github</code>\u5F3A\u5927\u7684\u5DE5\u4F5C\u6D41\u673A\u5236\u5B9E\u73B0\u81EA\u52A8\u7F16\u8BD1\u6253\u5305\u90E8\u7F72\u3002\u5927\u81F4\u90E8\u7F72\u6D41\u7A0B\uFF1A\u672C\u5730\u901A\u8FC7 git \u63D0\u4EA4\u6E90\u4EE3\u7801\uFF0C<code v-pre>Github Actions</code>\u89E6\u53D1\u5DE5\u4F5C\u6D41<code v-pre>workflows</code>\u5B9E\u73B0\u5206\u652F\u4EE3\u7801\u68C0\u51FA\uFF0C\u4F9D\u8D56\u5B89\u88C5\uFF0C\u6253\u5305\u7F16\u8BD1\uFF0C\u521B\u5EFA<code v-pre>gh-pages</code>\u5206\u652F\uFF0C\u4E0A\u4F20<code v-pre>dist</code>\u7F16\u8BD1\u540E\u4EE3\u7801\u5230<code v-pre>gh-pages</code>\uFF0C<code v-pre>gh-pages</code>\u5206\u652F\u90E8\u7F72\u5230\`\`Github Pages<code v-pre>\uFF0C\u540C\u6B65</code>Github<code v-pre>\u4ED3\u5E93\u4EE3\u7801\u81F3</code>Giee<code v-pre>,</code>Gitee Pages<code v-pre>\u90E8\u7F72\u3002\u4E0A\u8FF0\u6D41\u7A0B\u5B9E\u73B0\u4E86\u81EA\u52A8\u7F16\u8BD1\u90E8\u7F72\u548C</code>github<code v-pre>\u4EE3\u7801\u540C\u6B65\u90E8\u7F72\u81F3</code>gitee\`\u3002</p>
<p>\u5177\u4F53\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u8BF7\u53C2\u8003\uFF1A<RouterLink to="/posts/other/githubPages.html">GitHub Actions \u81EA\u52A8\u90E8\u7F72 GitHub Pages \u5E76\u540C\u6B65 Gitee Pages</RouterLink></p>
`,date:"2022-08-23",deps:[],links:[{raw:"./algoliaSearch.md",relative:"posts/other/algoliaSearch.md",absolute:"/blog-docs/posts/other/algoliaSearch.md"},{raw:"./walineServer.md",relative:"posts/other/walineServer.md",absolute:"/blog-docs/posts/other/walineServer.md"},{raw:"./githubPages.md",relative:"posts/other/githubPages.md",absolute:"/blog-docs/posts/other/githubPages.md"}],pathInferred:"/posts/other/blogDocs.html",pathLocale:"/",permalink:null,routeMeta:{title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863"},sfcBlocks:[],slug:"blogDocs",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/blogDocs.md",filePathRelative:"posts/other/blogDocs.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/blogDocs.html.vue",componentFilePathRelative:"pages/posts/other/blogDocs.html.vue",componentFileChunkName:"v-65bd7028",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/blogDocs.html.js",dataFilePathRelative:"pages/posts/other/blogDocs.html.js",dataFileChunkName:"v-65bd7028",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/blogDocs.html",htmlFilePathRelative:"posts/other/blogDocs.html"},title:"VuePress\u535A\u5BA2\u642D\u5EFA\u6587\u6863"},["/posts/other/blogDocs","/posts/other/blogDocs.md"]],["v-9b67abf4","/posts/other/firends.html",{_blog:{data:{key:"v-9b67abf4",path:"/posts/other/firends.html",title:"\u670B\u53CB\u5708",lang:"zh-CN",frontmatter:{title:"\u670B\u53CB\u5708",date:"2022-02-14T15:34:34.000Z",description:"\u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708",lang:"zh-CN",tag:["\u5176\u4ED6"],category:["\u5176\u4ED6"],head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/firends.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"\u670B\u53CB\u5708"}],["meta",{property:"og:description",content:"\u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-02-14T15:34:34.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u672C\u680F\u76EE\u53EA\u8981\u6536\u96C6\u4E00\u4E9B\u57FA\u4E8E vuepress \u642D\u5EFA\u7684\u9AD8\u8D28\u91CF\u7684\u535A\u5BA2\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002</p>
`,headers:[{level:3,title:"\u670B\u53CB\u5708\u96C6\u9526",slug:"\u670B\u53CB\u5708\u96C6\u9526",children:[]},{level:3,title:"\u670B\u53CB\u5708\u4E92\u6362",slug:"\u670B\u53CB\u5708\u4E92\u6362",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/firends.md",readingTime:{minutes:3.07,words:922},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/firends.html`},key:"v-9b67abf4",path:"/posts/other/firends.html",title:"\u670B\u53CB\u5708",lang:"zh-CN",frontmatter:{title:"\u670B\u53CB\u5708",date:"2022-02-14T15:34:34.000Z",description:"\u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708",lang:"zh-CN",tag:["\u5176\u4ED6"],category:["\u5176\u4ED6"],head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/firends.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"\u670B\u53CB\u5708"}],["meta",{property:"og:description",content:"\u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-02-14T15:34:34.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u672C\u680F\u76EE\u53EA\u8981\u6536\u96C6\u4E00\u4E9B\u57FA\u4E8E vuepress \u642D\u5EFA\u7684\u9AD8\u8D28\u91CF\u7684\u535A\u5BA2\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002</p>
`,headers:[{level:3,title:"\u670B\u53CB\u5708\u96C6\u9526",slug:"\u670B\u53CB\u5708\u96C6\u9526",children:[]},{level:3,title:"\u670B\u53CB\u5708\u4E92\u6362",slug:"\u670B\u53CB\u5708\u4E92\u6362",children:[]}],content:`---
title: \u670B\u53CB\u5708
date: 2022-02-14 15:34:34
description: \u6536\u96C6vuepress\u642D\u5EFA\u7684\u535A\u5BA2\u94FE\u63A5\u5F62\u6210\u670B\u53CB\u5708
lang: zh-CN
tag:
  - \u5176\u4ED6
category:
  - \u5176\u4ED6
---

\u672C\u680F\u76EE\u53EA\u8981\u6536\u96C6\u4E00\u4E9B\u57FA\u4E8E vuepress \u642D\u5EFA\u7684\u9AD8\u8D28\u91CF\u7684\u535A\u5BA2\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002

<!-- more -->

### \u670B\u53CB\u5708\u96C6\u9526

- \u5FD7\u5408\u8005\uFF0C\u4E0D\u4EE5\u5C71\u6D77\u4E3A\u8FDC\uFF1B\u9053\u4E56\u8005\uFF0C\u4E0D\u4EE5\u54AB\u5C3A\u4E3A\u8FD1\u3002\u2014\u2014\u664B\xB7\u845B\u6D2A
- \u6B64\u5904\u5C55\u793A\u4E86\u6240\u6709\u9AD8\u8D28\u91CF\u7684\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u6392\u540D\u4E0D\u5206\u5148\u540E\uFF01
- \u53CB\u60C5\u94FE\u63A5\u662F\u6211\u5728\u5F00\u53D1\u535A\u5BA2\u4E2D\u7F51\u4E0A\u67E5\u9605\u8D44\u6599\u627E\u5230\u7684\uFF0C\u5982\u6709\u4FB5\u6743\uFF0C\u8BF7\u53CA\u65F6\u8054\u7CFB\u6211\uFF01
- \u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002

::: cardList 3

\`\`\`yaml
- name: \u5348\u540E\u5357\u6742
  avatar: https://www.recoluan.com/head.png
  desc: Enjoy when you can, and endure when you must.
  link: https://www.recoluan.com
  bgColor: 'rgb(165 216 243)'
  textColor: '#6854A1'
- name: \u897F\u74DC\u76AE\u513F
  desc: enjoy your grow up!
  avatar: https://coderhdy.com/assets/img/snapshot.png
  link: https://coderhdy.com/
  bgColor: '#FCE5BF'
  textColor: '#7B2532'
- name: znote
  desc: \u8377\u5C3D\u5DF2\u65E0\u64CE\u96E8\u76D6\uFF0C\u83CA\u6B8B\u72B9\u6709\u50B2\u971C\u679D\u3002
  avatar: https://zpj80231.gitee.io/znote/vuepress/head-fish.jpg
  link: https://zpj80231.gitee.io/znote/
  bgColor: rgb(212 162 72)
  textColor: '#A05F2C'
- name: \u534A\u843D\u6C99\u75D5
  desc: Everything Wins\uFF01
  avatar: http://img.dracarys.top/avatar.jpg
  link: http://www.dracarys.top
  bgColor: '#1abc9c'
  textColor: '#c0392b'
- name: Evan's blog
  avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg
  desc: \u79EF\u8DEC\u6B65\u4EE5\u81F3\u5343\u91CC\uFF0C\u81F4\u656C\u6BCF\u4E2A\u7231\u5B66\u4E60\u7684\u4F60\u3002
  link: https://xugaoyi.com/
  bgColor: '#2980b9'
  textColor: '#ecf0f1'
- name: \u53CB\u4EBAc
  avatar: https://www.ihewro.com/usr/uploads/2020/02/863730882.jpg
  desc: \u53EA\u8981\u5FC3\u8FD8\u773A\u3002
  link: https://www.ihewro.com/
  bgColor: 'rgb(136,181,214)'
  textColor: 'rgb(249,249,249)'
- name: \u7530\u5C0F\u6CE2
  avatar: https://www.tianxiaobo.com/images/avatar.jpg
  desc: \u6B22\u8FCE\u8BBF\u95EE\u7530\u5C0F\u6CE2\u7684\u6280\u672F\u535A\u5BA2\u3002
  link: http://www.tianxiaobo.com/
  bgColor: '#B39CD0'
  textColor: '#FBEAFF'
- name: \u6613\u826F\u540C\u5B66\u7684\u535A\u5BA2
  desc: \u6B63\u5728\u52AA\u529B\uFF01
  avatar: https://yiliang.site/assets/images/avatar.jpeg
  link: https://yiliang.site
  bgColor: 'rgb(220 218 218)'
  textColor: '#2c3e50'
- name: \u4F1A\u98DE\u7684\u5C0F\u5F0B
  link: https://lovelijunyi.gitee.io/
  avatar: https://lovelijunyi.gitee.io/img/avatar.gif
  desc: \u559C\u6B22\u5927\u6570\u636E\uFF0C\u5D4C\u5165\u5F0F\u548C\u673A\u5668\u89C6\u89C9
  bgColor: 'rgb(243 126 126)'
  textColor: 'rgb(102 48 72)'
- name: \u996D\u56E2\u4E5F\u6709\u6625\u5929
  link: http://www.zpzpup.com/blog/
  avatar: https://www.zpzpup.com/assets/image/avatar.png
  desc: \u4E00\u4E2A\u88AB\u7A0B\u5E8F\u5458\u751F\u6DAF\u803D\u8BEF\u7684\u4F18\u79C0\u53A8\u5B50
  bgColor: 'rgb(163 243 126)'
  textColor: 'rgb(102 48 72)'
- name: \u5C71\u6D77\u4EE5\u5357
  link: https://mu-yan.cn/
  avatar: https://cdn.staticaly.com/gh/Mu-Yan/Mu-Yan.github.io/avatar.jpg
  desc: \u5DF1\u6240\u4E0D\u6B32\u52FF\u65BD\u4E8E\u4EBA
  bgColor: rgb(213 136 216);
  textColor: 'rgb(102 48 72)'
- name: WangScaler
  link: https://blog.wangscaler.com/
  avatar: https://blog.wangscaler.com/logo.png
  desc: WangScaler
  bgColor: rgb(220 46 122);
  textColor: 'rgb(102 48 72)'
- name: \u6D9B\u6D9B\u4E4B\u6D77
  link: https://claa.gitee.io/vuepress-theme-vdoing/
  avatar: https://claa.gitee.io/vuepress-theme-vdoing/img/taotao.jpg
  desc: \u6E05\u9192\u65F6\u505A\u4E8B\uFF0C\u7CCA\u6D82\u65F6\u8BFB\u4E66\uFF0C\u5927\u6012\u65F6\u7761\u89C9\uFF0C\u72EC\u5904\u65F6\u601D\u8003\u3002
  bgColor: rgb(114 173 87);
  textColor: 'rgb(102 48 72)'
- name: \u5E73\u51E1\u7684\u4F60\u6211
  link: https://reinness.com/
  avatar: https://reinness.com/avatar.png
  desc: \u7406\u60F3\u6210\u4E3A\u5927\u725B\u7684\u5C0F\u9648\u540C\u5B66
  bgColor: rgb(243 126 150);
  textColor: 'rgb(102 48 72)'
- name: \u5C0F\u7D2B\u5FF5\u6C81
  desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
  avatar: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png
  link: https://anyfork.gitee.io/blog-docs/
  bgColor: rgb(218 88 88 / 62%)
  textColor: rgb(5 41 14 / 75%)
\`\`\`

:::

::: cardImgList 2

\`\`\`yaml
- img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
  link: https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html
  name: vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
- img: https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png
  link: https://vuepress-theme-reco.recoluan.com/views/plugins/
  name: vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
- img: https://vuepress.vuejs.org/hero.png
  link: https://www.vuepress.cn/
  name: VuePress \u4E2D\u6587\u5B98\u7F51
  desc: VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
- img: https://vuepress.vuejs.org/hero.png
  link: https://vuepress-community.netlify.app/zh/
  name: VuePress \u5B98\u65B9\u793E\u533A
  desc: \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
\`\`\`

:::

### \u670B\u53CB\u5708\u4E92\u6362

\u5982\u9700\u8981\u53CB\u94FE\uFF0C\u8BF7<a> \u7559\u8A00 \u{1F447} </a> \u544A\u77E5\uFF0C\u7533\u8BF7\u524D\u8BF7\u8BB0\u5F97\u5148\u6DFB\u52A0\u672C\u7AD9\u54E6\uFF5E, \u5E76\u4F7F\u7528\u5982\u4E0B\u683C\u5F0F\uFF1A

\`\`\`yaml
- name: \u5C0F\u7D2B\u5FF5\u6C81
  desc: \u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77
  avatar: https://anyfork.gitee.io/blog-docs/images/user.jpg
  link: https://anyfork.gitee.io/blog-docs/
  bgColor: rgb(218 88 88 / 62%)
  textColor: rgb(5 41 14 / 75%)
\`\`\`
`,contentRendered:`<p>\u672C\u680F\u76EE\u53EA\u8981\u6536\u96C6\u4E00\u4E9B\u57FA\u4E8E vuepress \u642D\u5EFA\u7684\u9AD8\u8D28\u91CF\u7684\u535A\u5BA2\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002</p>
<!-- more -->
<h3 id="\u670B\u53CB\u5708\u96C6\u9526" tabindex="-1"><a class="header-anchor" href="#\u670B\u53CB\u5708\u96C6\u9526" aria-hidden="true">#</a> \u670B\u53CB\u5708\u96C6\u9526</h3>
<ul>
<li>\u5FD7\u5408\u8005\uFF0C\u4E0D\u4EE5\u5C71\u6D77\u4E3A\u8FDC\uFF1B\u9053\u4E56\u8005\uFF0C\u4E0D\u4EE5\u54AB\u5C3A\u4E3A\u8FD1\u3002\u2014\u2014\u664B\xB7\u845B\u6D2A</li>
<li>\u6B64\u5904\u5C55\u793A\u4E86\u6240\u6709\u9AD8\u8D28\u91CF\u7684\u53CB\u60C5\u7AD9\u70B9\u94FE\u63A5\uFF0C\u7528\u4E8E\u76F8\u4E92\u53C2\u8003\uFF0C\u501F\u9274\u548C\u5B66\u4E60\uFF0C\u6392\u540D\u4E0D\u5206\u5148\u540E\uFF01</li>
<li>\u53CB\u60C5\u94FE\u63A5\u662F\u6211\u5728\u5F00\u53D1\u535A\u5BA2\u4E2D\u7F51\u4E0A\u67E5\u9605\u8D44\u6599\u627E\u5230\u7684\uFF0C\u5982\u6709\u4FB5\u6743\uFF0C\u8BF7\u53CA\u65F6\u8054\u7CFB\u6211\uFF01</li>
<li>\u90E8\u5206\u7F51\u7AD9\u9700\u8981\u7FFB\u5899\u624D\u80FD\u8BBF\u95EE\uFF0C\u540C\u65F6\u4E5F\u6B22\u8FCE\u65B0\u670B\u53CB\u52A0\u5165\u3002</li>
</ul>
<div class="cardListContainer"><div class="card-list">
        <a href="https://www.recoluan.com" target="_blank" class="card-item row-3"
          style="background-color:rgb(165 216 243);color:#6854A1;"
        >
          <img src="https://www.recoluan.com/head.png" class="no-zoom">
          <div>
            <p class="name">\u5348\u540E\u5357\u6742</p>
            <p class="desc">Enjoy when you can, and endure when you must.</p>
          </div>
        </a>
      
        <a href="https://coderhdy.com/" target="_blank" class="card-item row-3"
          style="background-color:#FCE5BF;color:#7B2532;"
        >
          <img src="https://coderhdy.com/assets/img/snapshot.png" class="no-zoom">
          <div>
            <p class="name">\u897F\u74DC\u76AE\u513F</p>
            <p class="desc">enjoy your grow up!</p>
          </div>
        </a>
      
        <a href="https://zpj80231.gitee.io/znote/" target="_blank" class="card-item row-3"
          style="background-color:rgb(212 162 72);color:#A05F2C;"
        >
          <img src="https://zpj80231.gitee.io/znote/vuepress/head-fish.jpg" class="no-zoom">
          <div>
            <p class="name">znote</p>
            <p class="desc">\u8377\u5C3D\u5DF2\u65E0\u64CE\u96E8\u76D6\uFF0C\u83CA\u6B8B\u72B9\u6709\u50B2\u971C\u679D\u3002</p>
          </div>
        </a>
      
        <a href="http://www.dracarys.top" target="_blank" class="card-item row-3"
          style="background-color:#1abc9c;color:#c0392b;"
        >
          <img src="http://img.dracarys.top/avatar.jpg" class="no-zoom">
          <div>
            <p class="name">\u534A\u843D\u6C99\u75D5</p>
            <p class="desc">Everything Wins\uFF01</p>
          </div>
        </a>
      
        <a href="https://xugaoyi.com/" target="_blank" class="card-item row-3"
          style="background-color:#2980b9;color:#ecf0f1;"
        >
          <img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg" class="no-zoom">
          <div>
            <p class="name">Evan's blog</p>
            <p class="desc">\u79EF\u8DEC\u6B65\u4EE5\u81F3\u5343\u91CC\uFF0C\u81F4\u656C\u6BCF\u4E2A\u7231\u5B66\u4E60\u7684\u4F60\u3002</p>
          </div>
        </a>
      
        <a href="https://www.ihewro.com/" target="_blank" class="card-item row-3"
          style="background-color:rgb(136,181,214);color:rgb(249,249,249);"
        >
          <img src="https://www.ihewro.com/usr/uploads/2020/02/863730882.jpg" class="no-zoom">
          <div>
            <p class="name">\u53CB\u4EBAc</p>
            <p class="desc">\u53EA\u8981\u5FC3\u8FD8\u773A\u3002</p>
          </div>
        </a>
      
        <a href="http://www.tianxiaobo.com/" target="_blank" class="card-item row-3"
          style="background-color:#B39CD0;color:#FBEAFF;"
        >
          <img src="https://www.tianxiaobo.com/images/avatar.jpg" class="no-zoom">
          <div>
            <p class="name">\u7530\u5C0F\u6CE2</p>
            <p class="desc">\u6B22\u8FCE\u8BBF\u95EE\u7530\u5C0F\u6CE2\u7684\u6280\u672F\u535A\u5BA2\u3002</p>
          </div>
        </a>
      
        <a href="https://yiliang.site" target="_blank" class="card-item row-3"
          style="background-color:rgb(220 218 218);color:#2c3e50;"
        >
          <img src="https://yiliang.site/assets/images/avatar.jpeg" class="no-zoom">
          <div>
            <p class="name">\u6613\u826F\u540C\u5B66\u7684\u535A\u5BA2</p>
            <p class="desc">\u6B63\u5728\u52AA\u529B\uFF01</p>
          </div>
        </a>
      
        <a href="https://lovelijunyi.gitee.io/" target="_blank" class="card-item row-3"
          style="background-color:rgb(243 126 126);color:rgb(102 48 72);"
        >
          <img src="https://lovelijunyi.gitee.io/img/avatar.gif" class="no-zoom">
          <div>
            <p class="name">\u4F1A\u98DE\u7684\u5C0F\u5F0B</p>
            <p class="desc">\u559C\u6B22\u5927\u6570\u636E\uFF0C\u5D4C\u5165\u5F0F\u548C\u673A\u5668\u89C6\u89C9</p>
          </div>
        </a>
      
        <a href="http://www.zpzpup.com/blog/" target="_blank" class="card-item row-3"
          style="background-color:rgb(163 243 126);color:rgb(102 48 72);"
        >
          <img src="https://www.zpzpup.com/assets/image/avatar.png" class="no-zoom">
          <div>
            <p class="name">\u996D\u56E2\u4E5F\u6709\u6625\u5929</p>
            <p class="desc">\u4E00\u4E2A\u88AB\u7A0B\u5E8F\u5458\u751F\u6DAF\u803D\u8BEF\u7684\u4F18\u79C0\u53A8\u5B50</p>
          </div>
        </a>
      
        <a href="https://mu-yan.cn/" target="_blank" class="card-item row-3"
          style="background-color:rgb(213 136 216);;color:rgb(102 48 72);"
        >
          <img src="https://cdn.staticaly.com/gh/Mu-Yan/Mu-Yan.github.io/avatar.jpg" class="no-zoom">
          <div>
            <p class="name">\u5C71\u6D77\u4EE5\u5357</p>
            <p class="desc">\u5DF1\u6240\u4E0D\u6B32\u52FF\u65BD\u4E8E\u4EBA</p>
          </div>
        </a>
      
        <a href="https://blog.wangscaler.com/" target="_blank" class="card-item row-3"
          style="background-color:rgb(220 46 122);;color:rgb(102 48 72);"
        >
          <img src="https://blog.wangscaler.com/logo.png" class="no-zoom">
          <div>
            <p class="name">WangScaler</p>
            <p class="desc">WangScaler</p>
          </div>
        </a>
      
        <a href="https://claa.gitee.io/vuepress-theme-vdoing/" target="_blank" class="card-item row-3"
          style="background-color:rgb(114 173 87);;color:rgb(102 48 72);"
        >
          <img src="https://claa.gitee.io/vuepress-theme-vdoing/img/taotao.jpg" class="no-zoom">
          <div>
            <p class="name">\u6D9B\u6D9B\u4E4B\u6D77</p>
            <p class="desc">\u6E05\u9192\u65F6\u505A\u4E8B\uFF0C\u7CCA\u6D82\u65F6\u8BFB\u4E66\uFF0C\u5927\u6012\u65F6\u7761\u89C9\uFF0C\u72EC\u5904\u65F6\u601D\u8003\u3002</p>
          </div>
        </a>
      
        <a href="https://reinness.com/" target="_blank" class="card-item row-3"
          style="background-color:rgb(243 126 150);;color:rgb(102 48 72);"
        >
          <img src="https://reinness.com/avatar.png" class="no-zoom">
          <div>
            <p class="name">\u5E73\u51E1\u7684\u4F60\u6211</p>
            <p class="desc">\u7406\u60F3\u6210\u4E3A\u5927\u725B\u7684\u5C0F\u9648\u540C\u5B66</p>
          </div>
        </a>
      
        <a href="https://anyfork.gitee.io/blog-docs/" target="_blank" class="card-item row-3"
          style="background-color:rgb(218 88 88 / 62%);color:rgb(5 41 14 / 75%);"
        >
          <img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208241822713.png" class="no-zoom">
          <div>
            <p class="name">\u5C0F\u7D2B\u5FF5\u6C81</p>
            <p class="desc">\u4E0D\u79EF\u8DEC\u6B65,\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41,\u65E0\u4EE5\u6210\u6C5F\u6D77</p>
          </div>
        </a>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5348\u540E\u5357\u6742
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.recoluan.com/head.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> Enjoy when you can<span class="token punctuation">,</span> and endure when you must.
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.recoluan.com
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(165 216 243)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#6854A1'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u897F\u74DC\u76AE\u513F
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> enjoy your grow up<span class="token tag">!</span>
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//coderhdy.com/assets/img/snapshot.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//coderhdy.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#FCE5BF'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#7B2532'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> znote
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u8377\u5C3D\u5DF2\u65E0\u64CE\u96E8\u76D6\uFF0C\u83CA\u6B8B\u72B9\u6709\u50B2\u971C\u679D\u3002
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//zpj80231.gitee.io/znote/vuepress/head<span class="token punctuation">-</span>fish.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//zpj80231.gitee.io/znote/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(212 162 72)
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#A05F2C'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u534A\u843D\u6C99\u75D5
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> Everything Wins\uFF01
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//img.dracarys.top/avatar.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.dracarys.top
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#1abc9c'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#c0392b'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Evan's blog
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u79EF\u8DEC\u6B65\u4EE5\u81F3\u5343\u91CC\uFF0C\u81F4\u656C\u6BCF\u4E2A\u7231\u5B66\u4E60\u7684\u4F60\u3002
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xugaoyi.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#2980b9'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#ecf0f1'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u53CB\u4EBAc
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.ihewro.com/usr/uploads/2020/02/863730882.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u53EA\u8981\u5FC3\u8FD8\u773A\u3002
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.ihewro.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(136,181,214)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(249,249,249)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u7530\u5C0F\u6CE2
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.tianxiaobo.com/images/avatar.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u6B22\u8FCE\u8BBF\u95EE\u7530\u5C0F\u6CE2\u7684\u6280\u672F\u535A\u5BA2\u3002
  <span class="token key atrule">link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.tianxiaobo.com/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'#B39CD0'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#FBEAFF'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u6613\u826F\u540C\u5B66\u7684\u535A\u5BA2
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u6B63\u5728\u52AA\u529B\uFF01
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//yiliang.site/assets/images/avatar.jpeg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//yiliang.site
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(220 218 218)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#2c3e50'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u4F1A\u98DE\u7684\u5C0F\u5F0B
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//lovelijunyi.gitee.io/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//lovelijunyi.gitee.io/img/avatar.gif
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u559C\u6B22\u5927\u6570\u636E\uFF0C\u5D4C\u5165\u5F0F\u548C\u673A\u5668\u89C6\u89C9
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(243 126 126)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u996D\u56E2\u4E5F\u6709\u6625\u5929
  <span class="token key atrule">link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.zpzpup.com/blog/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.zpzpup.com/assets/image/avatar.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E00\u4E2A\u88AB\u7A0B\u5E8F\u5458\u751F\u6DAF\u803D\u8BEF\u7684\u4F18\u79C0\u53A8\u5B50
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(163 243 126)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5C71\u6D77\u4EE5\u5357
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//mu<span class="token punctuation">-</span>yan.cn/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.staticaly.com/gh/Mu<span class="token punctuation">-</span>Yan/Mu<span class="token punctuation">-</span>Yan.github.io/avatar.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5DF1\u6240\u4E0D\u6B32\u52FF\u65BD\u4E8E\u4EBA
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(213 136 216);
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> WangScaler
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//blog.wangscaler.com/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//blog.wangscaler.com/logo.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> WangScaler
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(220 46 122);
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u6D9B\u6D9B\u4E4B\u6D77
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//claa.gitee.io/vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>vdoing/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//claa.gitee.io/vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>vdoing/img/taotao.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u6E05\u9192\u65F6\u505A\u4E8B\uFF0C\u7CCA\u6D82\u65F6\u8BFB\u4E66\uFF0C\u5927\u6012\u65F6\u7761\u89C9\uFF0C\u72EC\u5904\u65F6\u601D\u8003\u3002
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(114 173 87);
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5E73\u51E1\u7684\u4F60\u6211
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//reinness.com/
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//reinness.com/avatar.png
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u7406\u60F3\u6210\u4E3A\u5927\u725B\u7684\u5C0F\u9648\u540C\u5B66
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(243 126 150);
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(102 48 72)'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5C0F\u7D2B\u5FF5\u6C81
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E0D\u79EF\u8DEC\u6B65<span class="token punctuation">,</span>\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41<span class="token punctuation">,</span>\u65E0\u4EE5\u6210\u6C5F\u6D77
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.staticaly.com/gh/AnyFork/blog<span class="token punctuation">-</span>images/main/markdown/202208241822713.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//anyfork.gitee.io/blog<span class="token punctuation">-</span>docs/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(218 88 88 / 62%)
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> rgb(5 41 14 / 75%)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="cardImgListContainer"><div class="card-list">
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank">
              <img src="https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank">
              <p class="name">vuepress-theme-reco\u5B98\u7F51\u6848\u4F8B</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank">
              <img src="https://vuepress-theme-reco.recoluan.com/icon_vuepress_reco.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank">
              <p class="name">vuepress-theme-reco\u5B98\u65B9\u63D2\u4EF6</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://www.vuepress.cn/" target="_blank">
              <img src="https://vuepress.vuejs.org/hero.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://www.vuepress.cn/" target="_blank">
              <p class="name">VuePress \u4E2D\u6587\u5B98\u7F51</p>
              <p class="desc">VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740</p>
            </a>
          </div>
          
          
        </div>
      
        <div class="card-item row-2" >
          <div class="box-img">
            <a href="https://vuepress-community.netlify.app/zh/" target="_blank">
              <img src="https://vuepress.vuejs.org/hero.png" class="no-zoom">
            </a>
          </div>
          <div class="box-info">
            <a href="https://vuepress-community.netlify.app/zh/" target="_blank">
              <p class="name">VuePress \u5B98\u65B9\u793E\u533A</p>
              <p class="desc">\u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6</p>
            </a>
          </div>
          
          
        </div>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/icon_vuepress_reco.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/views/other/theme<span class="token punctuation">-</span>example.html
  <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco\u5B98\u7F51\u6848\u4F8B
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u535A\u5BA2\u6848\u4F8B
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/icon_vuepress_reco.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco.recoluan.com/views/plugins/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>reco\u5B98\u65B9\u63D2\u4EF6
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress.vuejs.org/hero.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.vuepress.cn/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> VuePress \u4E2D\u6587\u5B98\u7F51
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> VuePress \u4E2D\u6587\u5B98\u7F51\u5730\u5740
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress.vuejs.org/hero.png
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//vuepress<span class="token punctuation">-</span>community.netlify.app/zh/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> VuePress \u5B98\u65B9\u793E\u533A
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u5B98\u7F51\u66F4\u591A\u4F18\u79C0\u7684\u63D2\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="\u670B\u53CB\u5708\u4E92\u6362" tabindex="-1"><a class="header-anchor" href="#\u670B\u53CB\u5708\u4E92\u6362" aria-hidden="true">#</a> \u670B\u53CB\u5708\u4E92\u6362</h3>
<p>\u5982\u9700\u8981\u53CB\u94FE\uFF0C\u8BF7<a> \u7559\u8A00 \u{1F447} </a> \u544A\u77E5\uFF0C\u7533\u8BF7\u524D\u8BF7\u8BB0\u5F97\u5148\u6DFB\u52A0\u672C\u7AD9\u54E6\uFF5E, \u5E76\u4F7F\u7528\u5982\u4E0B\u683C\u5F0F\uFF1A</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5C0F\u7D2B\u5FF5\u6C81
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E0D\u79EF\u8DEC\u6B65<span class="token punctuation">,</span>\u65E0\u4EE5\u81F3\u5343\u91CC.\u4E0D\u79EF\u5C0F\u6D41<span class="token punctuation">,</span>\u65E0\u4EE5\u6210\u6C5F\u6D77
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//anyfork.gitee.io/blog<span class="token punctuation">-</span>docs/images/user.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//anyfork.gitee.io/blog<span class="token punctuation">-</span>docs/
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> rgb(218 88 88 / 62%)
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> rgb(5 41 14 / 75%)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-02-14",deps:[],links:[],pathInferred:"/posts/other/firends.html",pathLocale:"/",permalink:null,routeMeta:{title:"\u670B\u53CB\u5708"},sfcBlocks:[],slug:"firends",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/firends.md",filePathRelative:"posts/other/firends.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/firends.html.vue",componentFilePathRelative:"pages/posts/other/firends.html.vue",componentFileChunkName:"v-9b67abf4",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/firends.html.js",dataFilePathRelative:"pages/posts/other/firends.html.js",dataFileChunkName:"v-9b67abf4",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/firends.html",htmlFilePathRelative:"posts/other/firends.html"},title:"\u670B\u53CB\u5708"},["/posts/other/firends","/posts/other/firends.md"]],["v-22a1c62c","/posts/other/githubPages.html",{_blog:{data:{key:"v-22a1c62c",path:"/posts/other/githubPages.html",title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",lang:"zh-CN",frontmatter:{title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",date:"2022-07-20T14:07:35.000Z",description:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",lang:"zh-CN",tag:["Github Pages"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201555438.jpg",sticky:2,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/githubPages.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"}],["meta",{property:"og:description",content:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Github Pages"}],["meta",{property:"article:published_time",content:"2022-07-20T14:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003GitHub Pages \u548C Giee Pages \u4E00\u822C\u591A\u7528\u4E8E\u6258\u7BA1\u4E2A\u4EBA\u7684\u9759\u6001\u7F51\u7AD9\uFF0C\u73B0\u5728\u5F88\u591A\u4EBA\u4E5F\u7528\u6765\u5B83\u6765\u642D\u5EFA\u79C1\u4EBA\u535A\u5BA2\uFF0C\u4E5F\u7B97\u662F\u7701\u53BB\u4E86\u8D2D\u4E70\u670D\u52A1\u5668\u3001\u57DF\u540D\u4EE5\u53CA\u7F51\u7AD9\u5907\u6848\u7B49\u7B49\u4E00\u7CFB\u5217\u590D\u6742\u7684\u64CD\u4F5C\u3002GitHub \u53EF\u4EE5\u901A\u8FC7 Action \u5DE5\u4F5C\u6D41\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\uFF0C\u90E8\u7F72\u7F51\u7AD9\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F GitHub \u6BD5\u7ADF\u662F\u56FD\u5916\u4ED3\u5E93\uFF0C\u6709\u65F6\u5019\u4F1A\u51FA\u73B0\u8BBF\u95EE\u901F\u5EA6\u6162\uFF0C\u52A0\u8F7D\u4E0D\u4E86\u56FE\u7247\u7B49\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u8BB8\u591A\u4EBA\u4FBF\u60F3\u5230 Gitee Pages \u6765\u90E8\u7F72\u7AD9\u70B9\uFF0C\u867D\u7136\u8BBF\u95EE\u901F\u5EA6\u5FEB, \u4F46\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u514D\u8D39\u7248\u7684 Gitee Pgaes \u4E0D\u652F\u6301\u81EA\u52A8\u90E8\u7F72\u65B9\u6848\uFF0C\u624B\u52A8\u90E8\u7F72\u53C8\u6BD4\u8F83\u9EBB\u70E6(Gitee Pages Pro \u867D\u7136\u4E5F\u5B9E\u73B0\u4E86\u81EA\u52A8\u5316\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u9700\u8981\u6536\u8D39)\u3002 \u4E0B\u9762\u5C31\u4ECB\u7ECD\u4E00\u79CD\u6709\u6548\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u5229\u7528 GitHub Actions \u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\uFF0C\u540C\u65F6\u63A8\u9001\u4EE3\u7801\u81F3 Giee,\u5E76\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002</p>
`,headers:[{level:2,title:"\u51C6\u5907\u5DE5\u4F5C",slug:"\u51C6\u5907\u5DE5\u4F5C",children:[]},{level:2,title:"\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199",slug:"\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199",children:[]},{level:2,title:"\u63D0\u4EA4\u4EE3\u7801",slug:"\u63D0\u4EA4\u4EE3\u7801",children:[]},{level:2,title:"\u76F8\u5173 Aciton \u5730\u5740",slug:"\u76F8\u5173-aciton-\u5730\u5740",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/githubPages.md",readingTime:{minutes:4.21,words:1262},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/githubPages.html`},key:"v-22a1c62c",path:"/posts/other/githubPages.html",title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",lang:"zh-CN",frontmatter:{title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",date:"2022-07-20T14:07:35.000Z",description:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages",lang:"zh-CN",tag:["Github Pages"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201555438.jpg",sticky:2,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/githubPages.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"}],["meta",{property:"og:description",content:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Github Pages"}],["meta",{property:"article:published_time",content:"2022-07-20T14:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003GitHub Pages \u548C Giee Pages \u4E00\u822C\u591A\u7528\u4E8E\u6258\u7BA1\u4E2A\u4EBA\u7684\u9759\u6001\u7F51\u7AD9\uFF0C\u73B0\u5728\u5F88\u591A\u4EBA\u4E5F\u7528\u6765\u5B83\u6765\u642D\u5EFA\u79C1\u4EBA\u535A\u5BA2\uFF0C\u4E5F\u7B97\u662F\u7701\u53BB\u4E86\u8D2D\u4E70\u670D\u52A1\u5668\u3001\u57DF\u540D\u4EE5\u53CA\u7F51\u7AD9\u5907\u6848\u7B49\u7B49\u4E00\u7CFB\u5217\u590D\u6742\u7684\u64CD\u4F5C\u3002GitHub \u53EF\u4EE5\u901A\u8FC7 Action \u5DE5\u4F5C\u6D41\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\uFF0C\u90E8\u7F72\u7F51\u7AD9\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F GitHub \u6BD5\u7ADF\u662F\u56FD\u5916\u4ED3\u5E93\uFF0C\u6709\u65F6\u5019\u4F1A\u51FA\u73B0\u8BBF\u95EE\u901F\u5EA6\u6162\uFF0C\u52A0\u8F7D\u4E0D\u4E86\u56FE\u7247\u7B49\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u8BB8\u591A\u4EBA\u4FBF\u60F3\u5230 Gitee Pages \u6765\u90E8\u7F72\u7AD9\u70B9\uFF0C\u867D\u7136\u8BBF\u95EE\u901F\u5EA6\u5FEB, \u4F46\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u514D\u8D39\u7248\u7684 Gitee Pgaes \u4E0D\u652F\u6301\u81EA\u52A8\u90E8\u7F72\u65B9\u6848\uFF0C\u624B\u52A8\u90E8\u7F72\u53C8\u6BD4\u8F83\u9EBB\u70E6(Gitee Pages Pro \u867D\u7136\u4E5F\u5B9E\u73B0\u4E86\u81EA\u52A8\u5316\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u9700\u8981\u6536\u8D39)\u3002 \u4E0B\u9762\u5C31\u4ECB\u7ECD\u4E00\u79CD\u6709\u6548\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u5229\u7528 GitHub Actions \u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\uFF0C\u540C\u65F6\u63A8\u9001\u4EE3\u7801\u81F3 Giee,\u5E76\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002</p>
`,headers:[{level:2,title:"\u51C6\u5907\u5DE5\u4F5C",slug:"\u51C6\u5907\u5DE5\u4F5C",children:[]},{level:2,title:"\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199",slug:"\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199",children:[]},{level:2,title:"\u63D0\u4EA4\u4EE3\u7801",slug:"\u63D0\u4EA4\u4EE3\u7801",children:[]},{level:2,title:"\u76F8\u5173 Aciton \u5730\u5740",slug:"\u76F8\u5173-aciton-\u5730\u5740",children:[]}],content:`---
title: GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages
date: 2022-07-20 14:07:35
description: GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages
lang: zh-CN
tag:
  - Github Pages
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201555438.jpg
sticky: 2
---

&emsp;GitHub Pages \u548C Giee Pages \u4E00\u822C\u591A\u7528\u4E8E\u6258\u7BA1\u4E2A\u4EBA\u7684\u9759\u6001\u7F51\u7AD9\uFF0C\u73B0\u5728\u5F88\u591A\u4EBA\u4E5F\u7528\u6765\u5B83\u6765\u642D\u5EFA\u79C1\u4EBA\u535A\u5BA2\uFF0C\u4E5F\u7B97\u662F\u7701\u53BB\u4E86\u8D2D\u4E70\u670D\u52A1\u5668\u3001\u57DF\u540D\u4EE5\u53CA\u7F51\u7AD9\u5907\u6848\u7B49\u7B49\u4E00\u7CFB\u5217\u590D\u6742\u7684\u64CD\u4F5C\u3002GitHub \u53EF\u4EE5\u901A\u8FC7 Action \u5DE5\u4F5C\u6D41\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\uFF0C\u90E8\u7F72\u7F51\u7AD9\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F GitHub \u6BD5\u7ADF\u662F\u56FD\u5916\u4ED3\u5E93\uFF0C\u6709\u65F6\u5019\u4F1A\u51FA\u73B0\u8BBF\u95EE\u901F\u5EA6\u6162\uFF0C\u52A0\u8F7D\u4E0D\u4E86\u56FE\u7247\u7B49\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u8BB8\u591A\u4EBA\u4FBF\u60F3\u5230 Gitee Pages \u6765\u90E8\u7F72\u7AD9\u70B9\uFF0C\u867D\u7136\u8BBF\u95EE\u901F\u5EA6\u5FEB, \u4F46\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u514D\u8D39\u7248\u7684 Gitee Pgaes \u4E0D\u652F\u6301\u81EA\u52A8\u90E8\u7F72\u65B9\u6848\uFF0C\u624B\u52A8\u90E8\u7F72\u53C8\u6BD4\u8F83\u9EBB\u70E6(Gitee Pages Pro \u867D\u7136\u4E5F\u5B9E\u73B0\u4E86\u81EA\u52A8\u5316\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u9700\u8981\u6536\u8D39)\u3002 \u4E0B\u9762\u5C31\u4ECB\u7ECD\u4E00\u79CD\u6709\u6548\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u5229\u7528 GitHub Actions \u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\uFF0C\u540C\u65F6\u63A8\u9001\u4EE3\u7801\u81F3 Giee,\u5E76\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002

<!-- more -->

## \u51C6\u5907\u5DE5\u4F5C

- **\u521B\u5EFA\u516C\u5F00\u4ED3\u5E93**\uFF1A

  \u5206\u522B\u5728 Github \u548C Gitee \u5404\u521B\u5EFA\u4E00\u4E2A\u516C\u5F00\u7684\u4ED3\u5E93\uFF0C\u4ED3\u5E93\u540D\u79F0\u4EFB\u610F\u53D6\uFF0C\u4ED3\u5E93\u5FC5\u987B\u516C\u5F00\u3002

- **SSH \u79D8\u94A5\u521B\u5EFA**\uFF1A

  \u901A\u8FC7 SSH \u65B9\u5F0F\u63A8\u9001\u548C\u62C9\u53D6\u4EE3\u7801\uFF0C\u907F\u514D\u767B\u5F55\u8D26\u53F7\u5BC6\u7801\u3002\u79D8\u94A5\u521B\u521B\u5EFA\u6D41\u7A0B\u5982\u4E0B\uFF1A

  1\u3001\u5728\u547D\u4EE4\u884C\u7EC8\u7AEF\u6216\`Git Bash\`\u4F7F\u7528\u547D\u4EE4 ssh-keygen -t rsa -C "youremail@example.com"\u751F\u6210 SSH Key\uFF0C\u6CE8\u610F\u66FF\u6362\u4E3A\u81EA\u5DF1\u7684\u90AE\u7BB1\uFF0C\u8FDE\u7EED\u4E09\u6B21\u56DE\u8F66\u3002\u751F\u6210\u7684 id_rsa \u662F\u79C1\u94A5\uFF0Cid_rsa.pub \u662F\u516C\u94A5\u3002(\u26A0\uFE0F \u6CE8\u610F\u6B64\u5904\u4E0D\u8981\u8BBE\u7F6E\u5BC6\u7801)\uFF0C\u79D8\u94A5\u751F\u6210\u5728\`C:\\Users\\Administrator\\.ssh\`\u76EE\u5F55\u4E0B\u9762\u3002\u5982\u679C\u51FA\u73B0\`'ssh-keygen' \u4E0D\u662F\u5185\u90E8\u6216\u5916\u90E8\u547D\u4EE4\uFF0C\u4E5F\u4E0D\u662F\u53EF\u8FD0\u884C\u7684\u7A0B\u5E8F \u6216\u6279\u5904\u7406\u6587\u4EF6\u3002\`\u95EE\u9898\u65F6\u3002\u9700\u8981\u8FDB\u5165\u5230 git \u5B89\u88C5\u76EE\u5F55\u4E0B\u9762\u7684\`/usr/bin\`\u76EE\u5F55\u6267\u884C\u547D\u4EE4\u3002

  2\u3001\u5728 GitHub \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762\u300CSettings -> SSH and GPG keys\u300D\u200B \u914D\u7F6E SSH \u516C\u94A5\uFF08\u5373\uFF1Aid_rsa.pub\uFF09\uFF0C\u547D\u540D\u968F\u610F\uFF0C\u5982\u4E0B\u56FE\uFF1A
  ![GitHub \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201634013.png)

  3\u3001\u5728 Gitee \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762\u300C\u5B89\u5168\u8BBE\u7F6E -> SSH \u516C\u94A5\u300D\u200B \u914D\u7F6E SSH \u516C\u94A5\uFF08\u5373\uFF1Aid_rsa.pub\uFF09\uFF0C\u547D\u540D\u968F\u610F\uFF0C\u5982\u4E0B\u56FE\uFF1A![ Gitee \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201636995.png)

  4\u3001\u5728 GitHub \u9879\u76EE\u7684\u300C\u200BSettings -> Secrets\u300D\u8DEF\u5F84\u4E0B\u914D\u7F6E\u597D\u547D\u540D\u4E3A GITEE_RSA_PRIVATE_KEY \u5BC6\u94A5\u548C GITEE_PASSWORD \u5BC6\u94A5\u3002GITEE_RSA_PRIVATE_KEY \u5B58\u653E id_rsa \u79C1\u94A5\uFF0CGITEE_PASSWORD \u8D26\u53F7\u767B\u5F55\u7684\u5BC6\u7801\u3002\u5982\u4E0B\u56FE\uFF1A![setting](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201641069.png)

  5\u3001\u5728\u7AD9\u70B9\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u5982\u4E0B\u76EE\u5F55\`.github/workflows/xxx.yml\`\uFF0C\u6587\u4EF6\u540D\u4EFB\u610F\u8D77\uFF0CGitHub \u7684 Actions \u4F1A\u5904\u7406.github \u4E0B\u7684\u5DE5\u4F5C\u6D41\u6587\u4EF6\u5939 workflows \u7684\u5DE5\u4F5C\u6D41\u7A0B\u3002

## \u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199

\u6BD4\u5982\u5728\u76EE\u5F55\`.github/workflows/deploy.yml\`\u4E2D\u7F16\u5199\u5982\u4E0B\u4EE3\u7801:

\`\`\`yaml
name: Build and Deploy to github & gitee
on:
  push:
    branches:
      - main
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      # \u6784\u5EFANode\u73AF\u5883
      - name: Build Node.js Env
        uses: actions/setup-node@v1
        with:
          node-version: '14'
      # \u68C0\u51FAmain\u5206\u652F\u4EE3\u7801
      - name: Checkout Code
        uses: actions/checkout@v2.3.1
        with:
          persist-credentials: false
      # \u5B89\u88C5\u4F9D\u8D56
      - name: Install dependencies
        run: npm install
      # \u9879\u76EE\u6253\u5305
      - name: Build Project
        run: npm run build
      # github \u90E8\u7F72\u5206\u652Fgh-pages \u5230github pages
      - name: Deploy dist on gh-pages
        uses: JamesIves/github-pages-deploy-action@4.2.0
        with:
          BRANCH: gh-pages
          FOLDER: dist
          ACCESS_TOKEN: \${{ secrets.ACCESS_TOKEN }}

      # \u540C\u6B65github\u4EE3\u7801\u5230gitee
      - name: Sync to Gitee
        uses: wearerequired/git-mirror-action@master
        env:
          # \u6CE8\u610F\u5728 Settings->Secrets \u914D\u7F6E GITEE_RSA_PRIVATE_KEY
          SSH_PRIVATE_KEY: \${{ secrets.GITEE_RSA_PRIVATE_KEY }}
        with:
          # \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 GitHub \u6E90\u4ED3\u5E93\u5730\u5740
          source-repo: git@github.com:AnyFork/blog-docs.git
          # \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u76EE\u6807\u4ED3\u5E93\u5730\u5740
          destination-repo: git@gitee.com:AnyFork/blog-docs.git

      # \u81EA\u52A8\u90E8\u7F72gitee gh-pages\u5206\u652F
      - name: Build Gitee Pages
        uses: yanglbme/gitee-pages-action@main
        with:
          # \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u7528\u6237\u540D
          gitee-username: 874957743@qq.com
          # \u6CE8\u610F\u5728 Settings->Secrets \u914D\u7F6E GITEE_PASSWORD
          gitee-password: \${{ secrets.GITEE_PASSWORD }}
          # \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u4ED3\u5E93\uFF0C\u4ED3\u5E93\u540D\u4E25\u683C\u533A\u5206\u5927\u5C0F\u5199\uFF0C\u8BF7\u51C6\u786E\u586B\u5199\uFF0C\u5426\u5219\u4F1A\u51FA\u9519
          gitee-repo: AnyFork/blog-docs
          # \u8981\u90E8\u7F72\u7684\u5206\u652F\uFF0C\u9ED8\u8BA4\u662F master\uFF0C\u82E5\u662F\u5176\u4ED6\u5206\u652F\uFF0C\u5219\u9700\u8981\u6307\u5B9A\uFF08\u6307\u5B9A\u7684\u5206\u652F\u5FC5\u987B\u5B58\u5728\uFF09
          branch: gh-pages
\`\`\`

\u6BCF\u6B21\u63D0\u4EA4\u4EE3\u7801\u540E\uFF0C\u81EA\u52A8\u89E6\u53D1 Aciton \u6267\u884C\u5DE5\u4F5C\u4EFB\u52A1\u3002\u5F53\u7136\u4F60\u5982\u679C\u4E0D\u60F3\u5728 Githup \u4E0A\u90E8\u7F72\u4EE3\u7801\uFF0C\u53EF\u4EE5\u53BB\u6389\u524D\u9762\u51E0\u6B65\uFF0C\u76F4\u63A5\u901A\u8FC7 Action \u540C\u6B65 github \u4EE3\u7801\u5230 gitee\uFF0C\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002

## \u63D0\u4EA4\u4EE3\u7801

- **\u914D\u7F6E\u7AD9\u70B9**\uFF1A\u4EE3\u7801\u63D0\u4EA4\u65B9\u5F0F\`SSH\`,\u5177\u4F53\u914D\u7F6E\u65B9\u5F0F\u6709\u4E00\u4E0B 2 \u79CD\uFF1A
  - 1\u3001\u5C06 GitHub \u4ED3\u5E93\u901A\u8FC7 SSH \u65B9\u5F0F Clone \u5230\u672C\u5730\u3002
  - 2\u3001\u5C06\u672C\u5730\u8FDC\u7A0B\u4ED3\u5E93\u8BBE\u7F6E\u4E3A GitHub \u4ED3\u5E93 SSH \u5730\u5740,\u4F8B\u5982\uFF1A\`git remote set-url origin git@github.com:xxx/blog-docs.git\`
- **\u63A8\u9001\u4EE3\u7801**\uFF1A\u6BCF\u6B21\u6587\u6863\u7F16\u5199\u5B8C\u6BD5\uFF0C\u53EF\u4EE5\u901A\u8FC7\`vscode\uFF0Cgit-bash\u6216\u8005\u547D\u4EE4\u884C\u7A97\u53E3\`\u63A8\u9001\u4EE3\u7801\uFF0C\u89E6\u53D1 Aciton\uFF0C\u5B9E\u73B0 GitHub \u548C Gitee \u81EA\u52A8\u90E8\u7F72 Pages,

## \u76F8\u5173 Aciton \u5730\u5740

**actions/setup-node@v1**\uFF1A<https://github.com/actions/setup-node/>

**actions/checkout@v2.3.1**\uFF1A<https://github.com/actions/checkout/>

**JamesIves/github-pages-deploy-action@4.2.0**\uFF1A<https://github.com/JamesIves/github-pages-deploy-action/>

**wearerequired/git-mirror-action@master**\uFF1A<https://github.com/wearerequired/git-mirror-action/>

**yanglbme/gitee-pages-action@main**\uFF1A<https://github.com/yanglbme/gitee-pages-action/>

\u81F3\u6B64\uFF0C\u901A\u8FC7 GitHub Actions \u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72 GitHub Pages \u548C Gitee Pages \u6D41\u7A0B\u5C31\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u8D76\u7D27\u8BD5\u8BD5\u5427\u3002
`,contentRendered:`<p>\u2003GitHub Pages \u548C Giee Pages \u4E00\u822C\u591A\u7528\u4E8E\u6258\u7BA1\u4E2A\u4EBA\u7684\u9759\u6001\u7F51\u7AD9\uFF0C\u73B0\u5728\u5F88\u591A\u4EBA\u4E5F\u7528\u6765\u5B83\u6765\u642D\u5EFA\u79C1\u4EBA\u535A\u5BA2\uFF0C\u4E5F\u7B97\u662F\u7701\u53BB\u4E86\u8D2D\u4E70\u670D\u52A1\u5668\u3001\u57DF\u540D\u4EE5\u53CA\u7F51\u7AD9\u5907\u6848\u7B49\u7B49\u4E00\u7CFB\u5217\u590D\u6742\u7684\u64CD\u4F5C\u3002GitHub \u53EF\u4EE5\u901A\u8FC7 Action \u5DE5\u4F5C\u6D41\u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72\uFF0C\u90E8\u7F72\u7F51\u7AD9\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F GitHub \u6BD5\u7ADF\u662F\u56FD\u5916\u4ED3\u5E93\uFF0C\u6709\u65F6\u5019\u4F1A\u51FA\u73B0\u8BBF\u95EE\u901F\u5EA6\u6162\uFF0C\u52A0\u8F7D\u4E0D\u4E86\u56FE\u7247\u7B49\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u8BB8\u591A\u4EBA\u4FBF\u60F3\u5230 Gitee Pages \u6765\u90E8\u7F72\u7AD9\u70B9\uFF0C\u867D\u7136\u8BBF\u95EE\u901F\u5EA6\u5FEB, \u4F46\u5F0A\u7AEF\u4E5F\u5F88\u660E\u663E\uFF0C\u514D\u8D39\u7248\u7684 Gitee Pgaes \u4E0D\u652F\u6301\u81EA\u52A8\u90E8\u7F72\u65B9\u6848\uFF0C\u624B\u52A8\u90E8\u7F72\u53C8\u6BD4\u8F83\u9EBB\u70E6(Gitee Pages Pro \u867D\u7136\u4E5F\u5B9E\u73B0\u4E86\u81EA\u52A8\u5316\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\uFF0C\u4F46\u9700\u8981\u6536\u8D39)\u3002 \u4E0B\u9762\u5C31\u4ECB\u7ECD\u4E00\u79CD\u6709\u6548\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u5229\u7528 GitHub Actions \u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\uFF0C\u540C\u65F6\u63A8\u9001\u4EE3\u7801\u81F3 Giee,\u5E76\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002</p>
<!-- more -->
<h2 id="\u51C6\u5907\u5DE5\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u5DE5\u4F5C" aria-hidden="true">#</a> \u51C6\u5907\u5DE5\u4F5C</h2>
<ul>
<li>
<p><strong>\u521B\u5EFA\u516C\u5F00\u4ED3\u5E93</strong>\uFF1A</p>
<p>\u5206\u522B\u5728 Github \u548C Gitee \u5404\u521B\u5EFA\u4E00\u4E2A\u516C\u5F00\u7684\u4ED3\u5E93\uFF0C\u4ED3\u5E93\u540D\u79F0\u4EFB\u610F\u53D6\uFF0C\u4ED3\u5E93\u5FC5\u987B\u516C\u5F00\u3002</p>
</li>
<li>
<p><strong>SSH \u79D8\u94A5\u521B\u5EFA</strong>\uFF1A</p>
<p>\u901A\u8FC7 SSH \u65B9\u5F0F\u63A8\u9001\u548C\u62C9\u53D6\u4EE3\u7801\uFF0C\u907F\u514D\u767B\u5F55\u8D26\u53F7\u5BC6\u7801\u3002\u79D8\u94A5\u521B\u521B\u5EFA\u6D41\u7A0B\u5982\u4E0B\uFF1A</p>
<p>1\u3001\u5728\u547D\u4EE4\u884C\u7EC8\u7AEF\u6216<code v-pre>Git Bash</code>\u4F7F\u7528\u547D\u4EE4 ssh-keygen -t rsa -C &quot;youremail@example.com&quot;\u751F\u6210 SSH Key\uFF0C\u6CE8\u610F\u66FF\u6362\u4E3A\u81EA\u5DF1\u7684\u90AE\u7BB1\uFF0C\u8FDE\u7EED\u4E09\u6B21\u56DE\u8F66\u3002\u751F\u6210\u7684 id_rsa \u662F\u79C1\u94A5\uFF0Cid_rsa.pub \u662F\u516C\u94A5\u3002(\u26A0\uFE0F \u6CE8\u610F\u6B64\u5904\u4E0D\u8981\u8BBE\u7F6E\u5BC6\u7801)\uFF0C\u79D8\u94A5\u751F\u6210\u5728<code v-pre>C:\\Users\\Administrator\\.ssh</code>\u76EE\u5F55\u4E0B\u9762\u3002\u5982\u679C\u51FA\u73B0<code v-pre>'ssh-keygen' \u4E0D\u662F\u5185\u90E8\u6216\u5916\u90E8\u547D\u4EE4\uFF0C\u4E5F\u4E0D\u662F\u53EF\u8FD0\u884C\u7684\u7A0B\u5E8F \u6216\u6279\u5904\u7406\u6587\u4EF6\u3002</code>\u95EE\u9898\u65F6\u3002\u9700\u8981\u8FDB\u5165\u5230 git \u5B89\u88C5\u76EE\u5F55\u4E0B\u9762\u7684<code v-pre>/usr/bin</code>\u76EE\u5F55\u6267\u884C\u547D\u4EE4\u3002</p>
<p>2\u3001\u5728 GitHub \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762\u300CSettings -&gt; SSH and GPG keys\u300D\u200B \u914D\u7F6E SSH \u516C\u94A5\uFF08\u5373\uFF1Aid_rsa.pub\uFF09\uFF0C\u547D\u540D\u968F\u610F\uFF0C\u5982\u4E0B\u56FE\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201634013.png" alt="GitHub \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762"></p>
<p>3\u3001\u5728 Gitee \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762\u300C\u5B89\u5168\u8BBE\u7F6E -&gt; SSH \u516C\u94A5\u300D\u200B \u914D\u7F6E SSH \u516C\u94A5\uFF08\u5373\uFF1Aid_rsa.pub\uFF09\uFF0C\u547D\u540D\u968F\u610F\uFF0C\u5982\u4E0B\u56FE\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201636995.png" alt=" Gitee \u7684\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u9762"></p>
<p>4\u3001\u5728 GitHub \u9879\u76EE\u7684\u300C\u200BSettings -&gt; Secrets\u300D\u8DEF\u5F84\u4E0B\u914D\u7F6E\u597D\u547D\u540D\u4E3A GITEE_RSA_PRIVATE_KEY \u5BC6\u94A5\u548C GITEE_PASSWORD \u5BC6\u94A5\u3002GITEE_RSA_PRIVATE_KEY \u5B58\u653E id_rsa \u79C1\u94A5\uFF0CGITEE_PASSWORD \u8D26\u53F7\u767B\u5F55\u7684\u5BC6\u7801\u3002\u5982\u4E0B\u56FE\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201641069.png" alt="setting"></p>
<p>5\u3001\u5728\u7AD9\u70B9\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u5982\u4E0B\u76EE\u5F55<code v-pre>.github/workflows/xxx.yml</code>\uFF0C\u6587\u4EF6\u540D\u4EFB\u610F\u8D77\uFF0CGitHub \u7684 Actions \u4F1A\u5904\u7406.github \u4E0B\u7684\u5DE5\u4F5C\u6D41\u6587\u4EF6\u5939 workflows \u7684\u5DE5\u4F5C\u6D41\u7A0B\u3002</p>
</li>
</ul>
<h2 id="\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199" aria-hidden="true">#</a> \u5DE5\u4F5C\u6D41\u7A0B\u811A\u672C\u7F16\u5199</h2>
<p>\u6BD4\u5982\u5728\u76EE\u5F55<code v-pre>.github/workflows/deploy.yml</code>\u4E2D\u7F16\u5199\u5982\u4E0B\u4EE3\u7801:</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Build and Deploy to github &amp; gitee
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># \u6784\u5EFANode\u73AF\u5883</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Node.js Env
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">'14'</span>
      <span class="token comment"># \u68C0\u51FAmain\u5206\u652F\u4EE3\u7801</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout Code
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2.3.1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">persist-credentials</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token comment"># \u5B89\u88C5\u4F9D\u8D56</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install
      <span class="token comment"># \u9879\u76EE\u6253\u5305</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Project
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm run build
      <span class="token comment"># github \u90E8\u7F72\u5206\u652Fgh-pages \u5230github pages</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy dist on gh<span class="token punctuation">-</span>pages
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@4.2.0
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> dist
          <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>

      <span class="token comment"># \u540C\u6B65github\u4EE3\u7801\u5230gitee</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sync to Gitee
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> wearerequired/git<span class="token punctuation">-</span>mirror<span class="token punctuation">-</span>action@master
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token comment"># \u6CE8\u610F\u5728 Settings->Secrets \u914D\u7F6E GITEE_RSA_PRIVATE_KEY</span>
          <span class="token key atrule">SSH_PRIVATE_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_RSA_PRIVATE_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 GitHub \u6E90\u4ED3\u5E93\u5730\u5740</span>
          <span class="token key atrule">source-repo</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span>AnyFork/blog<span class="token punctuation">-</span>docs.git
          <span class="token comment"># \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u76EE\u6807\u4ED3\u5E93\u5730\u5740</span>
          <span class="token key atrule">destination-repo</span><span class="token punctuation">:</span> git@gitee.com<span class="token punctuation">:</span>AnyFork/blog<span class="token punctuation">-</span>docs.git

      <span class="token comment"># \u81EA\u52A8\u90E8\u7F72gitee gh-pages\u5206\u652F</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Gitee Pages
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> yanglbme/gitee<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>action@main
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u7528\u6237\u540D</span>
          <span class="token key atrule">gitee-username</span><span class="token punctuation">:</span> 874957743@qq.com
          <span class="token comment"># \u6CE8\u610F\u5728 Settings->Secrets \u914D\u7F6E GITEE_PASSWORD</span>
          <span class="token key atrule">gitee-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># \u6CE8\u610F\u66FF\u6362\u4E3A\u4F60\u7684 Gitee \u4ED3\u5E93\uFF0C\u4ED3\u5E93\u540D\u4E25\u683C\u533A\u5206\u5927\u5C0F\u5199\uFF0C\u8BF7\u51C6\u786E\u586B\u5199\uFF0C\u5426\u5219\u4F1A\u51FA\u9519</span>
          <span class="token key atrule">gitee-repo</span><span class="token punctuation">:</span> AnyFork/blog<span class="token punctuation">-</span>docs
          <span class="token comment"># \u8981\u90E8\u7F72\u7684\u5206\u652F\uFF0C\u9ED8\u8BA4\u662F master\uFF0C\u82E5\u662F\u5176\u4ED6\u5206\u652F\uFF0C\u5219\u9700\u8981\u6307\u5B9A\uFF08\u6307\u5B9A\u7684\u5206\u652F\u5FC5\u987B\u5B58\u5728\uFF09</span>
          <span class="token key atrule">branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BCF\u6B21\u63D0\u4EA4\u4EE3\u7801\u540E\uFF0C\u81EA\u52A8\u89E6\u53D1 Aciton \u6267\u884C\u5DE5\u4F5C\u4EFB\u52A1\u3002\u5F53\u7136\u4F60\u5982\u679C\u4E0D\u60F3\u5728 Githup \u4E0A\u90E8\u7F72\u4EE3\u7801\uFF0C\u53EF\u4EE5\u53BB\u6389\u524D\u9762\u51E0\u6B65\uFF0C\u76F4\u63A5\u901A\u8FC7 Action \u540C\u6B65 github \u4EE3\u7801\u5230 gitee\uFF0C\u5B9E\u73B0 Gitee Pages \u81EA\u52A8\u90E8\u7F72\u3002</p>
<h2 id="\u63D0\u4EA4\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u63D0\u4EA4\u4EE3\u7801" aria-hidden="true">#</a> \u63D0\u4EA4\u4EE3\u7801</h2>
<ul>
<li><strong>\u914D\u7F6E\u7AD9\u70B9</strong>\uFF1A\u4EE3\u7801\u63D0\u4EA4\u65B9\u5F0F<code v-pre>SSH</code>,\u5177\u4F53\u914D\u7F6E\u65B9\u5F0F\u6709\u4E00\u4E0B 2 \u79CD\uFF1A
<ul>
<li>1\u3001\u5C06 GitHub \u4ED3\u5E93\u901A\u8FC7 SSH \u65B9\u5F0F Clone \u5230\u672C\u5730\u3002</li>
<li>2\u3001\u5C06\u672C\u5730\u8FDC\u7A0B\u4ED3\u5E93\u8BBE\u7F6E\u4E3A GitHub \u4ED3\u5E93 SSH \u5730\u5740,\u4F8B\u5982\uFF1A<code v-pre>git remote set-url origin git@github.com:xxx/blog-docs.git</code></li>
</ul>
</li>
<li><strong>\u63A8\u9001\u4EE3\u7801</strong>\uFF1A\u6BCF\u6B21\u6587\u6863\u7F16\u5199\u5B8C\u6BD5\uFF0C\u53EF\u4EE5\u901A\u8FC7<code v-pre>vscode\uFF0Cgit-bash\u6216\u8005\u547D\u4EE4\u884C\u7A97\u53E3</code>\u63A8\u9001\u4EE3\u7801\uFF0C\u89E6\u53D1 Aciton\uFF0C\u5B9E\u73B0 GitHub \u548C Gitee \u81EA\u52A8\u90E8\u7F72 Pages,</li>
</ul>
<h2 id="\u76F8\u5173-aciton-\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173-aciton-\u5730\u5740" aria-hidden="true">#</a> \u76F8\u5173 Aciton \u5730\u5740</h2>
<p><strong>actions/setup-node@v1</strong>\uFF1A<a href="https://github.com/actions/setup-node/" target="_blank" rel="noopener noreferrer">https://github.com/actions/setup-node/<ExternalLinkIcon/></a></p>
<p><strong>actions/checkout@v2.3.1</strong>\uFF1A<a href="https://github.com/actions/checkout/" target="_blank" rel="noopener noreferrer">https://github.com/actions/checkout/<ExternalLinkIcon/></a></p>
<p><strong>JamesIves/github-pages-deploy-action@4.2.0</strong>\uFF1A<a href="https://github.com/JamesIves/github-pages-deploy-action/" target="_blank" rel="noopener noreferrer">https://github.com/JamesIves/github-pages-deploy-action/<ExternalLinkIcon/></a></p>
<p><strong>wearerequired/git-mirror-action@master</strong>\uFF1A<a href="https://github.com/wearerequired/git-mirror-action/" target="_blank" rel="noopener noreferrer">https://github.com/wearerequired/git-mirror-action/<ExternalLinkIcon/></a></p>
<p><strong>yanglbme/gitee-pages-action@main</strong>\uFF1A<a href="https://github.com/yanglbme/gitee-pages-action/" target="_blank" rel="noopener noreferrer">https://github.com/yanglbme/gitee-pages-action/<ExternalLinkIcon/></a></p>
<p>\u81F3\u6B64\uFF0C\u901A\u8FC7 GitHub Actions \u5B9E\u73B0\u81EA\u52A8\u90E8\u7F72 GitHub Pages \u548C Gitee Pages \u6D41\u7A0B\u5C31\u5B8C\u4E86\uFF0C\u5C0F\u4F19\u4F34\u8D76\u7D27\u8BD5\u8BD5\u5427\u3002</p>
`,date:"2022-07-20",deps:[],links:[],pathInferred:"/posts/other/githubPages.html",pathLocale:"/",permalink:null,routeMeta:{title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"},sfcBlocks:[],slug:"githubPages",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/githubPages.md",filePathRelative:"posts/other/githubPages.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/githubPages.html.vue",componentFilePathRelative:"pages/posts/other/githubPages.html.vue",componentFileChunkName:"v-22a1c62c",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/githubPages.html.js",dataFilePathRelative:"pages/posts/other/githubPages.html.js",dataFileChunkName:"v-22a1c62c",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/githubPages.html",htmlFilePathRelative:"posts/other/githubPages.html"},title:"GitHub Actions\u81EA\u52A8\u90E8\u7F72GitHub Pages\u5E76\u540C\u6B65Gitee Pages"},["/posts/other/githubPages","/posts/other/githubPages.md"]],["v-57fe6fac","/posts/other/hotlinking.html",{_blog:{data:{key:"v-57fe6fac",path:"/posts/other/hotlinking.html",title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",lang:"zh-CN",frontmatter:{title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",date:"2022-03-01T19:06:46.000Z",description:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",tag:["\u5176\u4ED6"],category:["\u76D7\u94FE"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021637553.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/hotlinking.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"}],["meta",{property:"og:description",content:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-03-01T19:06:46.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u73B0\u5728\u5F88\u591A\u7B2C\u4E09\u65B9\u7F51\u7AD9\u5BF9\u4E8E\u81EA\u8EAB\u8D44\u6E90\u8FDB\u884C\u4E86\u9632\u76D7\u94FE\u4FDD\u62A4\uFF0C\u60F3\u8981\u5F15\u7528\u4ED6\u4EEC\u7684\u8D44\u6E90\u94FE\u63A5\uFF0C\u4F1A\u76F4\u63A5\u8D44\u6E90\u8DF3\u8F6C\u6216\u8005 403 \u7981\u6B62\u8BBF\u95EE\u3002\u6B64\u7BC7\u6587\u7AE0\u4ECE html \u89D2\u5EA6\u8BB2\u8FF0\u5982\u4F55\u7ED5\u5F00\u91C7\u7528 referer \u65B9\u5F0F\u5B9E\u73B0\u7684\u8F6F\u9632\u76D7\u94FE\u7684\u65B9\u6CD5\u3002</p>
`,headers:[{level:2,title:"\u76D7\u94FE",slug:"\u76D7\u94FE",children:[]},{level:2,title:"\u9632\u76D7\u94FE",slug:"\u9632\u76D7\u94FE",children:[]},{level:2,title:"\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE",slug:"\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE",children:[{level:3,title:"\u4E00 Nginx \u9632\u76D7\u94FE\u914D\u7F6E",slug:"\u4E00-nginx-\u9632\u76D7\u94FE\u914D\u7F6E",children:[{level:4,title:"1 referer \u5F15\u7528\u65B9\u5F0F",slug:"_1-referer-\u5F15\u7528\u65B9\u5F0F",children:[]},{level:4,title:"2 \u7B7E\u540D\u65B9\u5F0F",slug:"_2-\u7B7E\u540D\u65B9\u5F0F",children:[]}]}]},{level:2,title:"html \u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",slug:"html-\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/hotlinking.md",readingTime:{minutes:5.62,words:1687},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/hotlinking.html`},key:"v-57fe6fac",path:"/posts/other/hotlinking.html",title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",lang:"zh-CN",frontmatter:{title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",date:"2022-03-01T19:06:46.000Z",description:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",tag:["\u5176\u4ED6"],category:["\u76D7\u94FE"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021637553.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/hotlinking.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"}],["meta",{property:"og:description",content:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-03-01T19:06:46.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u73B0\u5728\u5F88\u591A\u7B2C\u4E09\u65B9\u7F51\u7AD9\u5BF9\u4E8E\u81EA\u8EAB\u8D44\u6E90\u8FDB\u884C\u4E86\u9632\u76D7\u94FE\u4FDD\u62A4\uFF0C\u60F3\u8981\u5F15\u7528\u4ED6\u4EEC\u7684\u8D44\u6E90\u94FE\u63A5\uFF0C\u4F1A\u76F4\u63A5\u8D44\u6E90\u8DF3\u8F6C\u6216\u8005 403 \u7981\u6B62\u8BBF\u95EE\u3002\u6B64\u7BC7\u6587\u7AE0\u4ECE html \u89D2\u5EA6\u8BB2\u8FF0\u5982\u4F55\u7ED5\u5F00\u91C7\u7528 referer \u65B9\u5F0F\u5B9E\u73B0\u7684\u8F6F\u9632\u76D7\u94FE\u7684\u65B9\u6CD5\u3002</p>
`,headers:[{level:2,title:"\u76D7\u94FE",slug:"\u76D7\u94FE",children:[]},{level:2,title:"\u9632\u76D7\u94FE",slug:"\u9632\u76D7\u94FE",children:[]},{level:2,title:"\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE",slug:"\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE",children:[{level:3,title:"\u4E00 Nginx \u9632\u76D7\u94FE\u914D\u7F6E",slug:"\u4E00-nginx-\u9632\u76D7\u94FE\u914D\u7F6E",children:[{level:4,title:"1 referer \u5F15\u7528\u65B9\u5F0F",slug:"_1-referer-\u5F15\u7528\u65B9\u5F0F",children:[]},{level:4,title:"2 \u7B7E\u540D\u65B9\u5F0F",slug:"_2-\u7B7E\u540D\u65B9\u5F0F",children:[]}]}]},{level:2,title:"html \u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",slug:"html-\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5",children:[]}],content:`---
title: html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5
date: 2022-03-01 19:06:46
description: html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5
tag:
  - \u5176\u4ED6
category:
  - \u76D7\u94FE
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021637553.jpg
---

&emsp;\u73B0\u5728\u5F88\u591A\u7B2C\u4E09\u65B9\u7F51\u7AD9\u5BF9\u4E8E\u81EA\u8EAB\u8D44\u6E90\u8FDB\u884C\u4E86\u9632\u76D7\u94FE\u4FDD\u62A4\uFF0C\u60F3\u8981\u5F15\u7528\u4ED6\u4EEC\u7684\u8D44\u6E90\u94FE\u63A5\uFF0C\u4F1A\u76F4\u63A5\u8D44\u6E90\u8DF3\u8F6C\u6216\u8005 403 \u7981\u6B62\u8BBF\u95EE\u3002\u6B64\u7BC7\u6587\u7AE0\u4ECE html \u89D2\u5EA6\u8BB2\u8FF0\u5982\u4F55\u7ED5\u5F00\u91C7\u7528 referer \u65B9\u5F0F\u5B9E\u73B0\u7684\u8F6F\u9632\u76D7\u94FE\u7684\u65B9\u6CD5\u3002

<!-- more -->

## \u76D7\u94FE

&emsp;\u76D7\u94FE\u662F\u6307\u670D\u52A1\u63D0\u4F9B\u5546\u81EA\u5DF1\u4E0D\u63D0\u4F9B\u670D\u52A1\u7684\u5185\u5BB9\uFF0C\u901A\u8FC7\u6280\u672F\u624B\u6BB5\u7ED5\u8FC7\u5176\u5B83\u6709\u5229\u76CA\u7684\u6700\u7EC8\u7528\u6237\u754C\u9762(\u5982\u5E7F\u544A)\uFF0C\u76F4\u63A5\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0A\u5411\u6700\u7EC8\u7528\u6237\u63D0\u4F9B\u5176\u5B83\u670D\u52A1\u63D0\u4F9B\u5546\u7684\u670D\u52A1\u5185\u5BB9\uFF0C\u9A97\u53D6\u6700\u7EC8\u7528\u6237\u7684\u6D4F\u89C8\u548C\u70B9\u51FB\u7387\u3002\u53D7\u76CA\u8005\u4E0D\u63D0\u4F9B\u8D44\u6E90\u6216\u63D0\u4F9B\u5F88\u5C11\u7684\u8D44\u6E90\uFF0C\u800C\u771F\u6B63\u7684\u670D\u52A1\u63D0\u4F9B\u5546\u5374\u5F97\u4E0D\u5230\u4EFB\u4F55\u7684\u6536\u76CA\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF1A\u5047\u8BBE B \u7AD9\u70B9\u4F5C\u4E3A\u4E00\u4E2A\u5546\u4E1A\u7F51\u7AD9\uFF0C\u6709\u5F88\u591A\u81EA\u4E3B\u7248\u6743\u7684\u56FE\u7247\uFF0C\u81EA\u8EAB\u5C55\u793A\u7528\u4E8E\u5546\u4E1A\u76EE\u7684\u3002\u800C A \u7AD9\u70B9\uFF0C\u5E0C\u671B\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0A\u9762\u4E5F\u5C55\u793A\u8FD9\u4E9B\u56FE\u7247\uFF0C\u76F4\u63A5\u4F7F\u7528\uFF1A\`<img src="http://b.com/photo.jpg"/>\`\u8FD9\u6837\uFF0C\u5927\u91CF\u7684\u5BA2\u6237\u7AEF\u5728\u8BBF\u95EE A \u7AD9\u70B9\u65F6\uFF0C\u5B9E\u9645\u4E0A\u6D88\u8017\u4E86 B \u7AD9\u70B9\u7684\u6D41\u91CF\uFF0C\u800C A \u7AD9\u70B9\u5374\u4ECE\u4E2D\u8FBE\u6210\u5546\u4E1A\u76EE\u7684\u3002\u4ECE\u800C\u4E0D\u52B3\u800C\u83B7\u3002\u8FD9\u6837\u7684 A \u7AD9\u70B9\u7740\u5B9E\u4EE4 B \u7AD9\u70B9\u4E0D\u5FEB\u7684\u3002

## \u9632\u76D7\u94FE

&emsp;\u4E3A\u4E86\u89E3\u51B3\u76D7\u94FE\u7684\u95EE\u9898\uFF0C\u901A\u8FC7\u4E00\u5B9A\u7684\u65B9\u5F0F\u7981\u6B62\u975E\u6CD5\u8BBF\u95EE\uFF0C\u5B9E\u73B0\u7F51\u7AD9\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u7684\u7B56\u7565\u5C31\u662F\u9632\u76D7\u94FE\u3002\u9632\u76D7\u901A\u8FC7 Referer \u6216\u8005\u7B7E\u540D\uFF0C\u7F51\u7AD9\u53EF\u4EE5\u68C0\u6D4B\u76EE\u6807\u7F51\u9875\u8BBF\u95EE\u7684\u6765\u6E90\u9875\uFF0C\u5982\u679C\u662F\u6307\u5B9A\u7684\u7F51\u7AD9\u6216\u7B26\u5408\u6761\u4EF6\u7684\u7F51\u7AD9\uFF0C\u5C31\u53EF\u4EE5\u8DDF\u8E2A\u5230\u663E\u793A\u5B83\u7684\u7F51\u9875\u5730\u5740\u3002HTTP \u534F\u8BAE\u548C\u6807\u51C6\u7684\u6D4F\u89C8\u5668\u5BF9\u4E8E\u89E3\u51B3\u76D7\u94FE\u63D0\u4F9B\u4FBF\u5229\uFF0C\u6D4F\u89C8\u5668\u5728\u52A0\u8F7D\u975E\u672C\u7AD9\u7684\u8D44\u6E90\u65F6\uFF0C\u4F1A\u589E\u52A0\u4E00\u4E2A\u5934\u57DF\uFF0C\u5934\u57DF\u540D\u5B57\u56FA\u5B9A\u4E3A\uFF1A\`Referer\`\uFF0C\u800C\u5728\u76F4\u63A5\u7C98\u8D34\u5730\u5740\u5230\u6D4F\u89C8\u5668\u5730\u5740\u680F\u8BBF\u95EE\u65F6\uFF0C\u8BF7\u6C42\u7684\u662F\u672C\u7AD9\u7684\u8BE5 url \u7684\u9875\u9762\uFF0C\u662F\u4E0D\u4F1A\u6709\u8FD9\u4E2A referer \u8FD9\u4E2A http \u5934\u57DF\u7684\u3002\u9488\u5BF9\u975E\u540C\u57DF\u540D\u4E0B\u9762\u7684\u8BF7\u6C42\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5BF9\`Referer\`\u62E6\u622A\u8BBE\u7F6E\uFF0C\u5224\u65AD\u662F\u5426\u5141\u8BB8\u8BBF\u95EE\uFF0C\u5BF9\u4E8E\u4E0D\u5141\u8BB8\u7684\u57DF\u540D\u8BBF\u95EE\u8FDB\u884C\u9632\u76D7\u3002\u5927\u90E8\u5206\u7F51\u7AD9\u73B0\u5728\u901A\u8FC7 Nginx \u914D\u7F6E referer \u5F15\u7528\u7684\u65B9\u5F0F\u8BBE\u7F6E\u9632\u76D7\u94FE\uFF0C\u6709\u7684\u8BBE\u7F6E\u4E86\`valid_referers none blocked \u5339\u914D\u57DF\u540D\`\u8FD9\u79CD\u65B9\u5F0F\u53EA\u662F\u9632\u6B62\u7B2C\u4E09\u65B9\u76D7\u7528\u56FE\u7247\uFF0C\u4F46\u53EF\u4EE5\u901A\u8FC7\u6D4F\u89C8\u5668\u6253\u5F00\uFF0C\u53F3\u952E\u4E0B\u8F7D;\u6709\u7684\u8BBE\u7F6E\u4E86\`valid_referers \u5339\u914D\u57DF\u540D;\`\u8FD9\u79CD\u65B9\u5F0F\u5C5E\u4E8E\`\u5F3A\`\u9632\u76D7\u94FE,\u9664\u4E86\u767D\u540D\u5355\u4E2D\u7684\u57DF\u540D\uFF0C\u7981\u6B62\u4EFB\u4F55\u975E\u6CD5\u8BBF\u95EE\uFF0C\u5305\u62EC\u6D4F\u89C8\u5668\u76F4\u63A5\u8BBF\u95EE\u548C\u53F3\u952E\u4E0B\u8F7D\u3002

## \u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE

:::tip
\u7F51\u7AD9\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u7B56\u7565\u5F88\u591A\uFF0C\u4F46\u5927\u591A\u6570\u7F51\u7AD9\u901A\u8FC7 nginx \u8BBE\u7F6E\u9632\u76D7\u94FE\uFF0C\u7981\u6B62\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u3002
:::

### **\u4E00 Nginx \u9632\u76D7\u94FE\u914D\u7F6E**

#### **1 referer \u5F15\u7528\u65B9\u5F0F**

&emsp;\u901A\u8FC7 Referer\uFF0C\u7F51\u7AD9\u53EF\u4EE5\u68C0\u6D4B\u76EE\u6807\u7F51\u9875\u8BBF\u95EE\u7684\u6765\u6E90\u7F51\u9875\u662F\u5426\u5408\u6CD5\uFF0C\u53EA\u6709\u5728\u8BBE\u5B9A\u7684\u5141\u8BB8\u8303\u56F4\u5185\u7684 referer \u624D\u80FD\u8BBF\u95EE\u6307\u5B9A\u7684\u8D44\u6E90\uFF0C\u4ECE\u800C\u5B9E\u73B0\u4E86\u9632\u76D7\u94FE\u7684\u76EE\u7684\u3002
\u5DE5\u4F5C\u6A21\u5757\uFF1A\`ngx_http_referer_module\`\u3002\u4F5C\u7528\u53D8\u91CF\uFF1A\`$invalid_referer\`\u5168\u5C40\u53D8\u91CF\u3002\u914D\u7F6E\u57DF\uFF1A\`server, location\`

\`\`\`bash
# \u6307\u5B9A\u6587\u4EF6\u7C7B\u578B
server {
   listen 80;
   server_name www.imcati.com;
   root /usr/share/nginx/html;
   location ~*\\.(gif|jpg|jpeg|png|bmp|swf)$ {
        valid_referers none blocked www.imcati.com;
        if ($invalid_referer) {
\u3000\u3000\u3000\u3000\u3000\u3000  #rewrite ^/ http://www.youdomain.com/404.jpg;
            return 403;
        }
   }
}

# \u6307\u5B9A\u6587\u4EF6\u76EE\u5F55
server {
   listen 80;
   server_name www.imcati.com;
   root /usr/share/nginx/html;
   location /img/ {
    root /data/img/;
    valid_referers none blocked www.imcati.com;
      if ($invalid_referer) {
          rewrite  ^/  http://www.765h.com/images/error.gif;
          #return   403;
      }
   }
}
\`\`\`

1\u3001valid_referers: \u6307\u5B9A\u8D44\u6E90\u8BBF\u95EE\u662F\u901A\u8FC7\u4EE5\u4E0B\u51E0\u79CD\u65B9\u5F0F\u4E3A\u5408\u6CD5\uFF0C\u5373\u767D\u540D\u5355\u3002  
2\u3001none\uFF1A\u5141\u8BB8\u7F3A\u5931\u7684\u5934\u90E8\u8BBF\u95EE\u3002\u53EF\u4EE5\u628A none \u53BB\u6389\uFF0C\u9632\u6B62\u522B\u4EBA\u901A\u8FC7\u53F3\u952E\u53E6\u5B58\u56FE\u7247\u5730\u5740  
3\u3001blocked\uFF1A\u4EE3\u8868\u6709 referer \u4F46\u662F\u88AB\u9632\u706B\u5899\u6216\u8005\u662F\u4EE3\u7406\u7ED9\u53BB\u9664\u4E86\u3002  
4\u3001server_names\uFF1A\u82E5 referer \u7AD9\u70B9\u57DF\u540D\u4E0E server_name \u4E2D\u672C\u673A\u914D\u7684\u57DF\u540D\u4E00\u6837\u5141\u8BB8\u8BBF\u95EE\u3002
5\u3001\u9996\u5148\u5F53\u6211\u8F93\u5165\u6211\u8981\u6253\u5F00\u7684\u7F51\u5740\u7684\u65F6\u5019\uFF0C\u56E0\u4E3A\u662F\u76F4\u63A5\u8F93\u5165\u7684\u6CA1\u6709 referer \u6240\u4EE5\u5339\u914D\u4E86 valid_referers \u540E\u9762\u7684 none \u6216\u8005\u662F blocked \u6240\u4EE5 invalid_referer \u503C\u4E3A 0 \u6240\u4EE5\u4E0D\u8FDB\u884C\u8DF3\u8F6C.
\u5F53\u6211\u662F\u4ECE\u8FD9\u4E2A\u7F51\u7AD9\u91CC\u9762\u7684\u94FE\u63A5\u8DF3\u5230\u8BE5\u7F51\u7AD9\u9996\u9875\u7684\u65F6\u5019 \u56E0\u4E3A referer \u7684\u503C\u662F\u80AF\u5B9A\u5305\u542B srever_names \u6240\u4EE5\u5339\u914D\u4E86 server_names \u6240\u4EE5\u4E0D\u8FDB\u884C\u8DF3\u8F6C\u3002\u5F53\u6211\u4ECE\u641C\u7D20\u5F15\u64CE\u8FDB\u53BB\u7684\u65F6\u5019\u56E0\u4E3A referer \u5B57\u6BB5\u7C7B\u4F3C\u4E8Ewww.google.com.hk/search\u5F00\u59CB\u8FDB\u884C\u5339\u914D \u53D1\u73B0\u6CA1\u6709\u4E00\u4E2A\u5339\u914D\uFF0C\u5219\u6B64\u65F6\u4F1A\u8BBE\u7F6E invalid_referer \u503C\u4E3A 1 if \u8BED\u53E5\u6210\u529F\u6267\u884C\uFF0C\u8FDB\u884C\u4E86\u8DF3\u8F6C,\u8FBE\u5230\u529F\u80FD\u3002\u5982\u679C\u628A\u8FD9\u4E24\u4E2A\uFF08none,blocked\uFF09\u53BB\u6389\u5C31\u53EF\u4EE5\u771F\u6B63\u7684\u5B9E\u73B0\u9632\u76D7\u8FDE\u4E86\uFF01\u56E0\u4E3A\u53EA\u6709\u5339\u914D\u5230 server_name \u7684\u65F6\u5019\uFF0C\u624D\u4E0D\u4F1A\u8FDB\u884C\u8DF3\u8F6C\u3002

#### **2 \u7B7E\u540D\u65B9\u5F0F**

&emsp;\u5F53\u7136\u522B\u4EBA\u4E5F\u53EF\u4EE5\u901A\u8FC7\u7BE1\u6539\u4F2A\u9020 refer \u6765\u8FDB\u884C\u8BBF\u95EE\uFF0C\u5BFC\u81F4 referer \u5F15\u7528\u65B9\u5F0F\u65E0\u6CD5\u5F7B\u5E95\u89E3\u51B3\u9632\u76D7\u95EE\u9898\uFF0C\u7B7E\u540D\u65B9\u5F0F\u53EF\u4EE5\u5F7B\u5E95\u89E3\u51B3\u95EE\u9898\u3002\u4F7F\u7528\u7B7E\u540D\u65B9\u5F0F\u9700\u8981\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757 \`HttpAccessKeyModule\`\u3002
\u7136\u540E\u6309\u7167\u5982\u4E0B\u914D\u7F6E\u5373\u53EF\uFF1A

\`\`\`bash
# \u6307\u5B9A\u6587\u4EF6\u7C7B\u578B
server {
    listen       80;
    server_name  www.imcati.com;
    root /usr/share/nginx/html;
    location ~*\\.(gif|jpg|jpeg|png|bmp|swf)$ {
        accesskey on;
        accesskey_hashmethod md5;
        accesskey_arg "key";
        accesskey_signature "mypass$remote_addr";
    }
}
# \u6307\u5B9A\u6587\u4EF6\u76EE\u5F55
server {
    listen       80;
    server_name  www.imcati.com;
    root /usr/share/nginx/html;
    location /img/ {
        root /data/img/;
        accesskey on;
        accesskey_hashmethod md5;
        accesskey_arg "key";
        accesskey_signature "mypass$remote_addr";
    }
}
\`\`\`

1\u3001accesskey on | off: \u6A21\u5757\u5F00\u5173  
2\u3001accesskey_hashmethod md5|sha\u20141: \u7B7E\u540D\u52A0\u5BC6\u65B9\u5F0F  
3\u3001accesskey_arg: GET \u53C2\u6570\u540D\u79F0  
4\u3001accesskey_signature\uFF1A\u4E3A\u52A0\u5BC6\u503C\uFF0C\u6B64\u5904\u4E3A mypass \u548C\u8BBF\u95EE IP \u6784\u6210\u7684\u5B57\u7B26\u4E32\u3002  
5\u3001$sign = md5('mypass' . $_SERVICE['REMOTE_ADDR']);  
6\u3001\u901A\u8FC7\`img src=/test.png?key=<?=$sign?>\`\u65B9\u5F0F\u8BBF\u95EE\u56FE\u7247\u3002

## html \u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5

&emsp;\u5982\u679C\u91C7\u7528 referer \u5E94\u7528\u65B9\u5F0F\u5904\u7406\u9632\u76D7\u94FE\u95EE\u9898\uFF0C\u6211\u4EEC\u60F3\u8981\u76D7\u7528\u5176\u4ED6\u7F51\u7AD9\u7684\u8D44\u6E90\uFF0C\u53EF\u4EE5\u5728 html \u901A\u8FC7\u4EE5\u4E0B\u8BBE\u7F6E\u7ED5\u5F00\u9632\u76D7\u94FE\u3002\u5728\u6807\u7B7E\u91CC\u52A0 meta\u3002\u4F8B\u5982\uFF1A\`<meta name="referrer" content="never">\`\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u51FA\u4E8E\u4E00\u4E9B\u539F\u56E0\uFF0C\u7F51\u7AD9\u60F3\u8981\u63A7\u5236\u9875\u9762\u53D1\u9001\u7ED9 server \u7684 referrer \u4FE1\u606F\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8FD9 referer metadata \u53C2\u6570\u3002
referer \u7684 metedata \u5C5E\u6027\u53EF\u8BBE\u7F6E content \u5C5E\u6027\u503C\u4E3A\u4EE5\u4E0B\u96C6\u5408\uFF1A\`never\`,\`always\`,\`origin\`,\`default\`

- \u5982\u679C referer-policy \u7684\u503C\u4E3A never\uFF1A\u5220\u9664 http head \u4E2D\u7684 referer\uFF1B\u503C\u9700\u8981\u662F never\uFF0C\u6D4F\u89C8\u5668\u90FD\u53EF\u4EE5\u517C\u5BB9\uFF0Cno-referrer \u8FD9\u79CD\u6709\u4E9B\u6D4F\u89C8\u5668\u4E0D\u517C\u5BB9
- \u5982\u679C referer-policy \u7684\u503C\u4E3A default\uFF1A\u5982\u679C\u5F53\u524D\u9875\u9762\u4F7F\u7528\u7684\u662F https \u534F\u8BAE\uFF0C\u800C\u6B63\u8981\u52A0\u8F7D\u8D44\u6E90\u4F7F\u7528\u7684\u662F\u666E\u901A\u7684 http \u534F\u8BAE\uFF0C\u5219\u5C06 http header \u4E2D\u989D referer \u7F6E\u4E3A\u7A7A\uFF1B
- \u5982\u679C referer-policy \u7684\u503C origin\uFF1A\u53EA\u53D1\u9001 origin \u90E8\u5206\uFF1B
- \u5982\u679C referer-policy \u7684\u503C\u4E3A always\uFF1A\u4E0D\u6539\u53D8 http header \u4E2D\u7684 referer \u7684\u503C
`,contentRendered:`<p>\u2003\u73B0\u5728\u5F88\u591A\u7B2C\u4E09\u65B9\u7F51\u7AD9\u5BF9\u4E8E\u81EA\u8EAB\u8D44\u6E90\u8FDB\u884C\u4E86\u9632\u76D7\u94FE\u4FDD\u62A4\uFF0C\u60F3\u8981\u5F15\u7528\u4ED6\u4EEC\u7684\u8D44\u6E90\u94FE\u63A5\uFF0C\u4F1A\u76F4\u63A5\u8D44\u6E90\u8DF3\u8F6C\u6216\u8005 403 \u7981\u6B62\u8BBF\u95EE\u3002\u6B64\u7BC7\u6587\u7AE0\u4ECE html \u89D2\u5EA6\u8BB2\u8FF0\u5982\u4F55\u7ED5\u5F00\u91C7\u7528 referer \u65B9\u5F0F\u5B9E\u73B0\u7684\u8F6F\u9632\u76D7\u94FE\u7684\u65B9\u6CD5\u3002</p>
<!-- more -->
<h2 id="\u76D7\u94FE" tabindex="-1"><a class="header-anchor" href="#\u76D7\u94FE" aria-hidden="true">#</a> \u76D7\u94FE</h2>
<p>\u2003\u76D7\u94FE\u662F\u6307\u670D\u52A1\u63D0\u4F9B\u5546\u81EA\u5DF1\u4E0D\u63D0\u4F9B\u670D\u52A1\u7684\u5185\u5BB9\uFF0C\u901A\u8FC7\u6280\u672F\u624B\u6BB5\u7ED5\u8FC7\u5176\u5B83\u6709\u5229\u76CA\u7684\u6700\u7EC8\u7528\u6237\u754C\u9762(\u5982\u5E7F\u544A)\uFF0C\u76F4\u63A5\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0A\u5411\u6700\u7EC8\u7528\u6237\u63D0\u4F9B\u5176\u5B83\u670D\u52A1\u63D0\u4F9B\u5546\u7684\u670D\u52A1\u5185\u5BB9\uFF0C\u9A97\u53D6\u6700\u7EC8\u7528\u6237\u7684\u6D4F\u89C8\u548C\u70B9\u51FB\u7387\u3002\u53D7\u76CA\u8005\u4E0D\u63D0\u4F9B\u8D44\u6E90\u6216\u63D0\u4F9B\u5F88\u5C11\u7684\u8D44\u6E90\uFF0C\u800C\u771F\u6B63\u7684\u670D\u52A1\u63D0\u4F9B\u5546\u5374\u5F97\u4E0D\u5230\u4EFB\u4F55\u7684\u6536\u76CA\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF1A\u5047\u8BBE B \u7AD9\u70B9\u4F5C\u4E3A\u4E00\u4E2A\u5546\u4E1A\u7F51\u7AD9\uFF0C\u6709\u5F88\u591A\u81EA\u4E3B\u7248\u6743\u7684\u56FE\u7247\uFF0C\u81EA\u8EAB\u5C55\u793A\u7528\u4E8E\u5546\u4E1A\u76EE\u7684\u3002\u800C A \u7AD9\u70B9\uFF0C\u5E0C\u671B\u5728\u81EA\u5DF1\u7684\u7F51\u7AD9\u4E0A\u9762\u4E5F\u5C55\u793A\u8FD9\u4E9B\u56FE\u7247\uFF0C\u76F4\u63A5\u4F7F\u7528\uFF1A<code v-pre>&lt;img src=&quot;http://b.com/photo.jpg&quot;/&gt;</code>\u8FD9\u6837\uFF0C\u5927\u91CF\u7684\u5BA2\u6237\u7AEF\u5728\u8BBF\u95EE A \u7AD9\u70B9\u65F6\uFF0C\u5B9E\u9645\u4E0A\u6D88\u8017\u4E86 B \u7AD9\u70B9\u7684\u6D41\u91CF\uFF0C\u800C A \u7AD9\u70B9\u5374\u4ECE\u4E2D\u8FBE\u6210\u5546\u4E1A\u76EE\u7684\u3002\u4ECE\u800C\u4E0D\u52B3\u800C\u83B7\u3002\u8FD9\u6837\u7684 A \u7AD9\u70B9\u7740\u5B9E\u4EE4 B \u7AD9\u70B9\u4E0D\u5FEB\u7684\u3002</p>
<h2 id="\u9632\u76D7\u94FE" tabindex="-1"><a class="header-anchor" href="#\u9632\u76D7\u94FE" aria-hidden="true">#</a> \u9632\u76D7\u94FE</h2>
<p>\u2003\u4E3A\u4E86\u89E3\u51B3\u76D7\u94FE\u7684\u95EE\u9898\uFF0C\u901A\u8FC7\u4E00\u5B9A\u7684\u65B9\u5F0F\u7981\u6B62\u975E\u6CD5\u8BBF\u95EE\uFF0C\u5B9E\u73B0\u7F51\u7AD9\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u7684\u7B56\u7565\u5C31\u662F\u9632\u76D7\u94FE\u3002\u9632\u76D7\u901A\u8FC7 Referer \u6216\u8005\u7B7E\u540D\uFF0C\u7F51\u7AD9\u53EF\u4EE5\u68C0\u6D4B\u76EE\u6807\u7F51\u9875\u8BBF\u95EE\u7684\u6765\u6E90\u9875\uFF0C\u5982\u679C\u662F\u6307\u5B9A\u7684\u7F51\u7AD9\u6216\u7B26\u5408\u6761\u4EF6\u7684\u7F51\u7AD9\uFF0C\u5C31\u53EF\u4EE5\u8DDF\u8E2A\u5230\u663E\u793A\u5B83\u7684\u7F51\u9875\u5730\u5740\u3002HTTP \u534F\u8BAE\u548C\u6807\u51C6\u7684\u6D4F\u89C8\u5668\u5BF9\u4E8E\u89E3\u51B3\u76D7\u94FE\u63D0\u4F9B\u4FBF\u5229\uFF0C\u6D4F\u89C8\u5668\u5728\u52A0\u8F7D\u975E\u672C\u7AD9\u7684\u8D44\u6E90\u65F6\uFF0C\u4F1A\u589E\u52A0\u4E00\u4E2A\u5934\u57DF\uFF0C\u5934\u57DF\u540D\u5B57\u56FA\u5B9A\u4E3A\uFF1A<code v-pre>Referer</code>\uFF0C\u800C\u5728\u76F4\u63A5\u7C98\u8D34\u5730\u5740\u5230\u6D4F\u89C8\u5668\u5730\u5740\u680F\u8BBF\u95EE\u65F6\uFF0C\u8BF7\u6C42\u7684\u662F\u672C\u7AD9\u7684\u8BE5 url \u7684\u9875\u9762\uFF0C\u662F\u4E0D\u4F1A\u6709\u8FD9\u4E2A referer \u8FD9\u4E2A http \u5934\u57DF\u7684\u3002\u9488\u5BF9\u975E\u540C\u57DF\u540D\u4E0B\u9762\u7684\u8BF7\u6C42\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5BF9<code v-pre>Referer</code>\u62E6\u622A\u8BBE\u7F6E\uFF0C\u5224\u65AD\u662F\u5426\u5141\u8BB8\u8BBF\u95EE\uFF0C\u5BF9\u4E8E\u4E0D\u5141\u8BB8\u7684\u57DF\u540D\u8BBF\u95EE\u8FDB\u884C\u9632\u76D7\u3002\u5927\u90E8\u5206\u7F51\u7AD9\u73B0\u5728\u901A\u8FC7 Nginx \u914D\u7F6E referer \u5F15\u7528\u7684\u65B9\u5F0F\u8BBE\u7F6E\u9632\u76D7\u94FE\uFF0C\u6709\u7684\u8BBE\u7F6E\u4E86<code v-pre>valid_referers none blocked \u5339\u914D\u57DF\u540D</code>\u8FD9\u79CD\u65B9\u5F0F\u53EA\u662F\u9632\u6B62\u7B2C\u4E09\u65B9\u76D7\u7528\u56FE\u7247\uFF0C\u4F46\u53EF\u4EE5\u901A\u8FC7\u6D4F\u89C8\u5668\u6253\u5F00\uFF0C\u53F3\u952E\u4E0B\u8F7D;\u6709\u7684\u8BBE\u7F6E\u4E86<code v-pre>valid_referers \u5339\u914D\u57DF\u540D;</code>\u8FD9\u79CD\u65B9\u5F0F\u5C5E\u4E8E<code v-pre>\u5F3A</code>\u9632\u76D7\u94FE,\u9664\u4E86\u767D\u540D\u5355\u4E2D\u7684\u57DF\u540D\uFF0C\u7981\u6B62\u4EFB\u4F55\u975E\u6CD5\u8BBF\u95EE\uFF0C\u5305\u62EC\u6D4F\u89C8\u5668\u76F4\u63A5\u8BBF\u95EE\u548C\u53F3\u952E\u4E0B\u8F7D\u3002</p>
<h2 id="\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE" aria-hidden="true">#</a> \u5982\u4F55\u8BBE\u7F6E\u7F51\u7AD9\u9632\u76D7\u94FE</h2>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>\u7F51\u7AD9\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u7B56\u7565\u5F88\u591A\uFF0C\u4F46\u5927\u591A\u6570\u7F51\u7AD9\u901A\u8FC7 nginx \u8BBE\u7F6E\u9632\u76D7\u94FE\uFF0C\u7981\u6B62\u8D44\u6E90\u94FE\u63A5\u9632\u76D7\u3002</p>
</div>
<h3 id="\u4E00-nginx-\u9632\u76D7\u94FE\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E00-nginx-\u9632\u76D7\u94FE\u914D\u7F6E" aria-hidden="true">#</a> <strong>\u4E00 Nginx \u9632\u76D7\u94FE\u914D\u7F6E</strong></h3>
<h4 id="_1-referer-\u5F15\u7528\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1-referer-\u5F15\u7528\u65B9\u5F0F" aria-hidden="true">#</a> <strong>1 referer \u5F15\u7528\u65B9\u5F0F</strong></h4>
<p>\u2003\u901A\u8FC7 Referer\uFF0C\u7F51\u7AD9\u53EF\u4EE5\u68C0\u6D4B\u76EE\u6807\u7F51\u9875\u8BBF\u95EE\u7684\u6765\u6E90\u7F51\u9875\u662F\u5426\u5408\u6CD5\uFF0C\u53EA\u6709\u5728\u8BBE\u5B9A\u7684\u5141\u8BB8\u8303\u56F4\u5185\u7684 referer \u624D\u80FD\u8BBF\u95EE\u6307\u5B9A\u7684\u8D44\u6E90\uFF0C\u4ECE\u800C\u5B9E\u73B0\u4E86\u9632\u76D7\u94FE\u7684\u76EE\u7684\u3002
\u5DE5\u4F5C\u6A21\u5757\uFF1A<code v-pre>ngx_http_referer_module</code>\u3002\u4F5C\u7528\u53D8\u91CF\uFF1A<code v-pre>$invalid_referer</code>\u5168\u5C40\u53D8\u91CF\u3002\u914D\u7F6E\u57DF\uFF1A<code v-pre>server, location</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u6307\u5B9A\u6587\u4EF6\u7C7B\u578B</span>
server <span class="token punctuation">{</span>
   listen <span class="token number">80</span><span class="token punctuation">;</span>
   server_name www.imcati.com<span class="token punctuation">;</span>
   root /usr/share/nginx/html<span class="token punctuation">;</span>
   location ~*<span class="token punctuation">\\</span>.<span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
        valid_referers none blocked www.imcati.com<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$invalid_referer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
\u3000\u3000\u3000\u3000\u3000\u3000  <span class="token comment">#rewrite ^/ http://www.youdomain.com/404.jpg;</span>
            <span class="token builtin class-name">return</span> <span class="token number">403</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># \u6307\u5B9A\u6587\u4EF6\u76EE\u5F55</span>
server <span class="token punctuation">{</span>
   listen <span class="token number">80</span><span class="token punctuation">;</span>
   server_name www.imcati.com<span class="token punctuation">;</span>
   root /usr/share/nginx/html<span class="token punctuation">;</span>
   location /img/ <span class="token punctuation">{</span>
    root /data/img/<span class="token punctuation">;</span>
    valid_referers none blocked www.imcati.com<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$invalid_referer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          rewrite  ^/  http://www.765h.com/images/error.gif<span class="token punctuation">;</span>
          <span class="token comment">#return   403;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1\u3001valid_referers: \u6307\u5B9A\u8D44\u6E90\u8BBF\u95EE\u662F\u901A\u8FC7\u4EE5\u4E0B\u51E0\u79CD\u65B9\u5F0F\u4E3A\u5408\u6CD5\uFF0C\u5373\u767D\u540D\u5355\u3002<br>
2\u3001none\uFF1A\u5141\u8BB8\u7F3A\u5931\u7684\u5934\u90E8\u8BBF\u95EE\u3002\u53EF\u4EE5\u628A none \u53BB\u6389\uFF0C\u9632\u6B62\u522B\u4EBA\u901A\u8FC7\u53F3\u952E\u53E6\u5B58\u56FE\u7247\u5730\u5740<br>
3\u3001blocked\uFF1A\u4EE3\u8868\u6709 referer \u4F46\u662F\u88AB\u9632\u706B\u5899\u6216\u8005\u662F\u4EE3\u7406\u7ED9\u53BB\u9664\u4E86\u3002<br>
4\u3001server_names\uFF1A\u82E5 referer \u7AD9\u70B9\u57DF\u540D\u4E0E server_name \u4E2D\u672C\u673A\u914D\u7684\u57DF\u540D\u4E00\u6837\u5141\u8BB8\u8BBF\u95EE\u3002
5\u3001\u9996\u5148\u5F53\u6211\u8F93\u5165\u6211\u8981\u6253\u5F00\u7684\u7F51\u5740\u7684\u65F6\u5019\uFF0C\u56E0\u4E3A\u662F\u76F4\u63A5\u8F93\u5165\u7684\u6CA1\u6709 referer \u6240\u4EE5\u5339\u914D\u4E86 valid_referers \u540E\u9762\u7684 none \u6216\u8005\u662F blocked \u6240\u4EE5 invalid_referer \u503C\u4E3A 0 \u6240\u4EE5\u4E0D\u8FDB\u884C\u8DF3\u8F6C.
\u5F53\u6211\u662F\u4ECE\u8FD9\u4E2A\u7F51\u7AD9\u91CC\u9762\u7684\u94FE\u63A5\u8DF3\u5230\u8BE5\u7F51\u7AD9\u9996\u9875\u7684\u65F6\u5019 \u56E0\u4E3A referer \u7684\u503C\u662F\u80AF\u5B9A\u5305\u542B srever_names \u6240\u4EE5\u5339\u914D\u4E86 server_names \u6240\u4EE5\u4E0D\u8FDB\u884C\u8DF3\u8F6C\u3002\u5F53\u6211\u4ECE\u641C\u7D20\u5F15\u64CE\u8FDB\u53BB\u7684\u65F6\u5019\u56E0\u4E3A referer \u5B57\u6BB5\u7C7B\u4F3C\u4E8Ewww.google.com.hk/search\u5F00\u59CB\u8FDB\u884C\u5339\u914D \u53D1\u73B0\u6CA1\u6709\u4E00\u4E2A\u5339\u914D\uFF0C\u5219\u6B64\u65F6\u4F1A\u8BBE\u7F6E invalid_referer \u503C\u4E3A 1 if \u8BED\u53E5\u6210\u529F\u6267\u884C\uFF0C\u8FDB\u884C\u4E86\u8DF3\u8F6C,\u8FBE\u5230\u529F\u80FD\u3002\u5982\u679C\u628A\u8FD9\u4E24\u4E2A\uFF08none,blocked\uFF09\u53BB\u6389\u5C31\u53EF\u4EE5\u771F\u6B63\u7684\u5B9E\u73B0\u9632\u76D7\u8FDE\u4E86\uFF01\u56E0\u4E3A\u53EA\u6709\u5339\u914D\u5230 server_name \u7684\u65F6\u5019\uFF0C\u624D\u4E0D\u4F1A\u8FDB\u884C\u8DF3\u8F6C\u3002</p>
<h4 id="_2-\u7B7E\u540D\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-\u7B7E\u540D\u65B9\u5F0F" aria-hidden="true">#</a> <strong>2 \u7B7E\u540D\u65B9\u5F0F</strong></h4>
<p>\u2003\u5F53\u7136\u522B\u4EBA\u4E5F\u53EF\u4EE5\u901A\u8FC7\u7BE1\u6539\u4F2A\u9020 refer \u6765\u8FDB\u884C\u8BBF\u95EE\uFF0C\u5BFC\u81F4 referer \u5F15\u7528\u65B9\u5F0F\u65E0\u6CD5\u5F7B\u5E95\u89E3\u51B3\u9632\u76D7\u95EE\u9898\uFF0C\u7B7E\u540D\u65B9\u5F0F\u53EF\u4EE5\u5F7B\u5E95\u89E3\u51B3\u95EE\u9898\u3002\u4F7F\u7528\u7B7E\u540D\u65B9\u5F0F\u9700\u8981\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757 <code v-pre>HttpAccessKeyModule</code>\u3002
\u7136\u540E\u6309\u7167\u5982\u4E0B\u914D\u7F6E\u5373\u53EF\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u6307\u5B9A\u6587\u4EF6\u7C7B\u578B</span>
server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    server_name  www.imcati.com<span class="token punctuation">;</span>
    root /usr/share/nginx/html<span class="token punctuation">;</span>
    location ~*<span class="token punctuation">\\</span>.<span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
        accesskey on<span class="token punctuation">;</span>
        accesskey_hashmethod md5<span class="token punctuation">;</span>
        accesskey_arg <span class="token string">"key"</span><span class="token punctuation">;</span>
        accesskey_signature <span class="token string">"mypass<span class="token variable">$remote_addr</span>"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment"># \u6307\u5B9A\u6587\u4EF6\u76EE\u5F55</span>
server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    server_name  www.imcati.com<span class="token punctuation">;</span>
    root /usr/share/nginx/html<span class="token punctuation">;</span>
    location /img/ <span class="token punctuation">{</span>
        root /data/img/<span class="token punctuation">;</span>
        accesskey on<span class="token punctuation">;</span>
        accesskey_hashmethod md5<span class="token punctuation">;</span>
        accesskey_arg <span class="token string">"key"</span><span class="token punctuation">;</span>
        accesskey_signature <span class="token string">"mypass<span class="token variable">$remote_addr</span>"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1\u3001accesskey on | off: \u6A21\u5757\u5F00\u5173<br>
2\u3001accesskey_hashmethod md5|sha\u20141: \u7B7E\u540D\u52A0\u5BC6\u65B9\u5F0F<br>
3\u3001accesskey_arg: GET \u53C2\u6570\u540D\u79F0<br>
4\u3001accesskey_signature\uFF1A\u4E3A\u52A0\u5BC6\u503C\uFF0C\u6B64\u5904\u4E3A mypass \u548C\u8BBF\u95EE IP \u6784\u6210\u7684\u5B57\u7B26\u4E32\u3002<br>
5\u3001$sign = md5('mypass' . $_SERVICE['REMOTE_ADDR']);<br>
6\u3001\u901A\u8FC7<code v-pre>img src=/test.png?key=&lt;?=$sign?&gt;</code>\u65B9\u5F0F\u8BBF\u95EE\u56FE\u7247\u3002</p>
<h2 id="html-\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#html-\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5" aria-hidden="true">#</a> html \u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5</h2>
<p>\u2003\u5982\u679C\u91C7\u7528 referer \u5E94\u7528\u65B9\u5F0F\u5904\u7406\u9632\u76D7\u94FE\u95EE\u9898\uFF0C\u6211\u4EEC\u60F3\u8981\u76D7\u7528\u5176\u4ED6\u7F51\u7AD9\u7684\u8D44\u6E90\uFF0C\u53EF\u4EE5\u5728 html \u901A\u8FC7\u4EE5\u4E0B\u8BBE\u7F6E\u7ED5\u5F00\u9632\u76D7\u94FE\u3002\u5728\u6807\u7B7E\u91CC\u52A0 meta\u3002\u4F8B\u5982\uFF1A<code v-pre>&lt;meta name=&quot;referrer&quot; content=&quot;never&quot;&gt;</code>\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u51FA\u4E8E\u4E00\u4E9B\u539F\u56E0\uFF0C\u7F51\u7AD9\u60F3\u8981\u63A7\u5236\u9875\u9762\u53D1\u9001\u7ED9 server \u7684 referrer \u4FE1\u606F\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8FD9 referer metadata \u53C2\u6570\u3002
referer \u7684 metedata \u5C5E\u6027\u53EF\u8BBE\u7F6E content \u5C5E\u6027\u503C\u4E3A\u4EE5\u4E0B\u96C6\u5408\uFF1A<code v-pre>never</code>,<code v-pre>always</code>,<code v-pre>origin</code>,<code v-pre>default</code></p>
<ul>
<li>\u5982\u679C referer-policy \u7684\u503C\u4E3A never\uFF1A\u5220\u9664 http head \u4E2D\u7684 referer\uFF1B\u503C\u9700\u8981\u662F never\uFF0C\u6D4F\u89C8\u5668\u90FD\u53EF\u4EE5\u517C\u5BB9\uFF0Cno-referrer \u8FD9\u79CD\u6709\u4E9B\u6D4F\u89C8\u5668\u4E0D\u517C\u5BB9</li>
<li>\u5982\u679C referer-policy \u7684\u503C\u4E3A default\uFF1A\u5982\u679C\u5F53\u524D\u9875\u9762\u4F7F\u7528\u7684\u662F https \u534F\u8BAE\uFF0C\u800C\u6B63\u8981\u52A0\u8F7D\u8D44\u6E90\u4F7F\u7528\u7684\u662F\u666E\u901A\u7684 http \u534F\u8BAE\uFF0C\u5219\u5C06 http header \u4E2D\u989D referer \u7F6E\u4E3A\u7A7A\uFF1B</li>
<li>\u5982\u679C referer-policy \u7684\u503C origin\uFF1A\u53EA\u53D1\u9001 origin \u90E8\u5206\uFF1B</li>
<li>\u5982\u679C referer-policy \u7684\u503C\u4E3A always\uFF1A\u4E0D\u6539\u53D8 http header \u4E2D\u7684 referer \u7684\u503C</li>
</ul>
`,date:"2022-03-01",deps:[],links:[],pathInferred:"/posts/other/hotlinking.html",pathLocale:"/",permalink:null,routeMeta:{title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"},sfcBlocks:[],slug:"hotlinking",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/hotlinking.md",filePathRelative:"posts/other/hotlinking.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/hotlinking.html.vue",componentFilePathRelative:"pages/posts/other/hotlinking.html.vue",componentFileChunkName:"v-57fe6fac",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/hotlinking.html.js",dataFilePathRelative:"pages/posts/other/hotlinking.html.js",dataFileChunkName:"v-57fe6fac",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/hotlinking.html",htmlFilePathRelative:"posts/other/hotlinking.html"},title:"html\u7ED5\u5F00\u9632\u76D7\u94FE\u65B9\u6CD5"},["/posts/other/hotlinking","/posts/other/hotlinking.md"]],["v-3ba2686a","/posts/other/imageHost.html",{_blog:{data:{key:"v-3ba2686a",path:"/posts/other/imageHost.html",title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",lang:"zh-CN",frontmatter:{title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",date:"2022-03-02T16:42:35.000Z",description:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",tag:["\u5176\u4ED6"],category:["\u56FE\u5E8A"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021636834.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/imageHost.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"}],["meta",{property:"og:description",content:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-03-02T16:42:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u7ECF\u5E38\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u5C0F\u4F19\u4F34\u6DF1\u6709\u4F53\u4F1A\uFF0C\u5982\u4F55\u5C06\u56FE\u7247\u8D44\u6E90\u8FDB\u884C\u5B58\u50A8\uFF0C\u5E76\u5728 markdown \u6587\u6863\u4E2D\u4F7F\u7528\u5462\uFF1F\u91C7\u7528\u7B2C\u4E09\u65B9\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u6709\u7684\u8D44\u6E90\u6709\u9632\u76D7\u94FE\u9650\u5236\uFF0C\u6709\u7684\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FC7\u671F\uFF0C\u90A3\u4E48\uFF0C\u4ECA\u5929\u5C31\u7ED9\u5C0F\u4F19\u4F34\u4ECB\u7ECD\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\uFF0C\u5C5E\u4E8E\u81EA\u5DF1\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002</p>
`,headers:[{level:2,title:"\u4EC0\u4E48\u662F\u56FE\u5E8A",slug:"\u4EC0\u4E48\u662F\u56FE\u5E8A",children:[]},{level:2,title:"\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A",slug:"\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A",children:[]},{level:2,title:"\u600E\u6837\u83B7\u5F97\u56FE\u5E8A",slug:"\u600E\u6837\u83B7\u5F97\u56FE\u5E8A",children:[]},{level:2,title:"\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA",slug:"\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA",children:[]},{level:2,title:"PicGO \u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5",slug:"picgo-\u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5",children:[]},{level:2,title:"PicGO \u914D\u7F6E github \u56FE\u5E8A",slug:"picgo-\u914D\u7F6E-github-\u56FE\u5E8A",children:[]},{level:2,title:"\u514D\u8D39\u7684 CDN \u52A0\u901F",slug:"\u514D\u8D39\u7684-cdn-\u52A0\u901F",children:[{level:3,title:"jsdelivr",slug:"jsdelivr",children:[]},{level:3,title:"staticaly",slug:"staticaly",children:[]},{level:3,title:"githack",slug:"githack",children:[]}]},{level:2,title:"\u5176\u4ED6\u56FE\u5E8A",slug:"\u5176\u4ED6\u56FE\u5E8A",children:[{level:3,title:"\u5BA2\u6765\u56FE\u5E8A",slug:"\u5BA2\u6765\u56FE\u5E8A",children:[]}]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/imageHost.md",readingTime:{minutes:7.46,words:2237},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/imageHost.html`},key:"v-3ba2686a",path:"/posts/other/imageHost.html",title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",lang:"zh-CN",frontmatter:{title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",date:"2022-03-02T16:42:35.000Z",description:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A",tag:["\u5176\u4ED6"],category:["\u56FE\u5E8A"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021636834.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/imageHost.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"}],["meta",{property:"og:description",content:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-03-02T16:42:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u7ECF\u5E38\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u5C0F\u4F19\u4F34\u6DF1\u6709\u4F53\u4F1A\uFF0C\u5982\u4F55\u5C06\u56FE\u7247\u8D44\u6E90\u8FDB\u884C\u5B58\u50A8\uFF0C\u5E76\u5728 markdown \u6587\u6863\u4E2D\u4F7F\u7528\u5462\uFF1F\u91C7\u7528\u7B2C\u4E09\u65B9\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u6709\u7684\u8D44\u6E90\u6709\u9632\u76D7\u94FE\u9650\u5236\uFF0C\u6709\u7684\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FC7\u671F\uFF0C\u90A3\u4E48\uFF0C\u4ECA\u5929\u5C31\u7ED9\u5C0F\u4F19\u4F34\u4ECB\u7ECD\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\uFF0C\u5C5E\u4E8E\u81EA\u5DF1\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002</p>
`,headers:[{level:2,title:"\u4EC0\u4E48\u662F\u56FE\u5E8A",slug:"\u4EC0\u4E48\u662F\u56FE\u5E8A",children:[]},{level:2,title:"\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A",slug:"\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A",children:[]},{level:2,title:"\u600E\u6837\u83B7\u5F97\u56FE\u5E8A",slug:"\u600E\u6837\u83B7\u5F97\u56FE\u5E8A",children:[]},{level:2,title:"\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA",slug:"\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA",children:[]},{level:2,title:"PicGO \u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5",slug:"picgo-\u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5",children:[]},{level:2,title:"PicGO \u914D\u7F6E github \u56FE\u5E8A",slug:"picgo-\u914D\u7F6E-github-\u56FE\u5E8A",children:[]},{level:2,title:"\u514D\u8D39\u7684 CDN \u52A0\u901F",slug:"\u514D\u8D39\u7684-cdn-\u52A0\u901F",children:[{level:3,title:"jsdelivr",slug:"jsdelivr",children:[]},{level:3,title:"staticaly",slug:"staticaly",children:[]},{level:3,title:"githack",slug:"githack",children:[]}]},{level:2,title:"\u5176\u4ED6\u56FE\u5E8A",slug:"\u5176\u4ED6\u56FE\u5E8A",children:[{level:3,title:"\u5BA2\u6765\u56FE\u5E8A",slug:"\u5BA2\u6765\u56FE\u5E8A",children:[]}]}],content:`---
title: \u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A
date: 2022-03-02 16:42:35
description: \u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A
tag:
  - \u5176\u4ED6
category:
  - \u56FE\u5E8A
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021636834.jpg
---

&emsp;\u7ECF\u5E38\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u5C0F\u4F19\u4F34\u6DF1\u6709\u4F53\u4F1A\uFF0C\u5982\u4F55\u5C06\u56FE\u7247\u8D44\u6E90\u8FDB\u884C\u5B58\u50A8\uFF0C\u5E76\u5728 markdown \u6587\u6863\u4E2D\u4F7F\u7528\u5462\uFF1F\u91C7\u7528\u7B2C\u4E09\u65B9\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u6709\u7684\u8D44\u6E90\u6709\u9632\u76D7\u94FE\u9650\u5236\uFF0C\u6709\u7684\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FC7\u671F\uFF0C\u90A3\u4E48\uFF0C\u4ECA\u5929\u5C31\u7ED9\u5C0F\u4F19\u4F34\u4ECB\u7ECD\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\uFF0C\u5C5E\u4E8E\u81EA\u5DF1\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002

<!-- more -->

::: info
1\u3001github \u56FE\u5E8A\u539F\u7406\uFF1A\u901A\u8FC7 github Api \u548C\u4E2A\u4EBA\u6388\u6743 Token,\u901A\u8FC7\u7B2C\u4E09\u65B9\u5DE5\u5177\u5C06\u672C\u5730\u56FE\u7247\u4E0A\u4F20\u5230\u4E2A\u4EBA github \u4ED3\u5E93\u8FDB\u884C\u56FE\u7247\u5B58\u50A8\uFF0C\u7136\u540E\u751F\u6210\u4E00\u4E2A\u901A\u8FC7 CND \u52A0\u901F\u7684\u94FE\u63A5\uFF0C\u63D0\u4F9B\u7528\u6237\u8BBF\u95EE\u3002 **\u6CE8\u610F\uFF1A** github \u4E2A\u4EBA\u6388\u6743\u4EE4\u724C Token \u4E00\u65E6\u521B\u5EFA\u518D\u65E0\u6CD5\u83B7\u53D6\uFF0C\u4E00\u5B9A\u7262\u8BB0\u4F4F\uFF0C\u5982\u679C\u9057\u5931\uFF0C\u53EA\u80FD\u91CD\u65B0\u751F\u6210\u4E00\u4E2A\u3002

2\u3001github \u56FE\u5E8A\u6700\u597D\u5355\u72EC\u521B\u5EFA\u4E00\u4E2A\u4ED3\u5E93\uFF0C\u5E76\u4E14\u4ED3\u5E93\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 100M\uFF0C\u5426\u5219\u4F1A\u88AB\u5B98\u65B9\u89C6\u4E3A\u56FE\u5E8A\u5C01\u7981\uFF0C\u5982\u679C\u8D85\u8FC7 100M\uFF0C\u9700\u8981\u91CD\u65B0\u521B\u5EFA\u65B0\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002
:::

## \u4EC0\u4E48\u662F\u56FE\u5E8A

&emsp;\u56FE\u5E8A\u5176\u5B9E\u662F\u4E92\u8054\u7F51\u4E2D\u5B58\u50A8\u56FE\u7247\u7684\u7A7A\u95F4\uFF0C\u4E3E\u4E2A\u6817\u5B50\uFF1A\u5047\u8BBE\u4F60\u5728\u5FAE\u535A\u5206\u4EAB\u4E00\u5F20\u56FE\u7247\uFF0C\u4F60\u7684\u7C89\u4E1D\u53EF\u4EE5\u901A\u8FC7\u4E92\u8054\u7F51\u770B\u5230\u4F60\u5206\u4EAB\u7684\u56FE\u7247\uFF0C\u90A3\u4E48\u4ED6\u662F\u53BB\u8BBF\u95EE\u4F60\u7684\u624B\u673A\u7684\u76F8\u518C\u5417\uFF1F\u5176\u5B9E\u4E0D\u662F\u7684\uFF0C\u4F60\u5206\u4EAB\u56FE\u7247\uFF0C\u4E5F\u5C31\u662F\u628A\u56FE\u7247\u4E0A\u4F20\u5230\u5FAE\u535A\u7684\u670D\u52A1\u5668\uFF0C\u5FAE\u535A\u5C06\u4E3A\u4F60\u751F\u6210\u4E00\u4E2A\u72EC\u4E00\u65E0\u4E8C\u7684\u8BBF\u95EE\u94FE\u63A5\uFF0C\u8FD9\u4E2A\u94FE\u63A5\u6307\u5411\u7684\u7A7A\u95F4\u5176\u5B9E\u5C31\u662F\u56FE\u5E8A\u3002

## \u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A

&emsp;\u4F1A\u53BB\u63A5\u89E6\u56FE\u5E8A\u7684\u4EBA\u901A\u5E38\u90FD\u662F\u4E00\u4E9B\u70ED\u7231\u5728\u7F51\u4E0A\u5206\u4EAB\u535A\u5BA2\u6216\u8005\u559C\u6B22\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u4EBA\uFF0C\u4F7F\u7528\u56FE\u5E8A\u7684\u4EBA\u901A\u5E38\u91C7\u7528 Markdown \u7684\u65B9\u5F0F\u53BB\u7F16\u8F91\u6587\u5B57\u3002\u6211\u4EEC\u90FD\u77E5\u9053\u73B0\u5728\u901A\u5E38\u6D41\u884C\u4E24\u79CD\u65B9\u5F0F\u7F16\u8F91\u6587\u5B57\uFF1A\u5BCC\u6587\u672C\u7F16\u8F91\uFF0CWord \u5C31\u662F\u5176\u4E2D\u975E\u5E38\u5177\u6709\u4EE3\u8868\u6027\u7684\uFF0C\u6587\u5B57\u7684\u5404\u79CD\u683C\u5F0F\u90FD\u662F\u901A\u8FC7\u4EA4\u4E92\u6309\u94AE\u8BBE\u7F6E\u7684\uFF0C\u8FD9\u65F6\u5019\u9700\u8981\u9891\u7E41\u7684\u9F20\u6807\u914D\u5408\u64CD\u4F5C\u3002\u8FD9\u79CD\u65B9\u5F0F\u64CD\u4F5C\u6E10\u53D8\uFF0C\u4F46\u662F\u5BF9\u4E8E\u5927\u91CF\u7F16\u8F91\u5DE5\u4F5C\u7684\u6587\u5B57\u5DE5\u4F5C\u8005\uFF0C\u53CC\u624B\u79BB\u5F00\u952E\u76D8\u4F7F\u7528\u9F20\u6807\u5176\u5B9E\u662F\u4E00\u79CD\u8D1F\u62C5\u3002
Markdown \u7F16\u8F91\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7 Markdown \u6807\u8BB0\u8BED\u8A00\u53BB\u89C4\u5B9A\u683C\u5F0F\u7684\u7EAF\u6587\u672C\u7F16\u8F91\u65B9\u5F0F\u3002\u8FD9\u79CD\u65B9\u5F0F\u4F7F\u5F97\u6587\u5B57\u5DE5\u4F5C\u8005\u4E13\u6CE8\u4E8E\u6587\u5B57\uFF0C\u800C\u975E\u683C\u5F0F\uFF0C\u53CC\u624B\u53EF\u4EE5\u5F7B\u5E95\u7684\u89E3\u653E\u9F20\u6807\uFF0C\u5927\u5927\u63D0\u9AD8\u4E86\u6548\u7387\u3002\u8FD8\u6709\u4E00\u4E2A\u4F18\u70B9\u5C31\u662F\uFF0CMarkdown \u6BD4\u5BCC\u6587\u672C\u7F16\u8F91\u65B9\u5F0F\u66F4\u52A0\u5177\u6709\u901A\u7528\u6027\uFF0Cword \u7684\u6587\u5B57\u6574\u7BC7\u590D\u5236\u5230\u6709\u9053\u4E91\u7B14\u8BB0\u683C\u5F0F\u4F1A\u51FA\u73B0\u5DEE\u5F02\uFF0C\u8FD9\u4E5F\u662F\u5BCC\u6587\u672C\u7F16\u8F91\u7684\u5DE8\u5927\u7F3A\u9677\u3002

## \u600E\u6837\u83B7\u5F97\u56FE\u5E8A

\u76EE\u524D\u6709\u8BB8\u591A\u83B7\u5F97\u56FE\u5E8A\u7684\u9014\u5F84\u975E\u5E38\u591A\uFF0C\u901A\u5E38\u5206\u4E3A\u6536\u8D39\u7684\u548C\u514D\u8D39\u7684\u3002\u6536\u8D39\u56FE\u5E8A\uFF1A\u4F18\u70B9\u5728\u4E8E\u5730\u5740\u4FDD\u6301\u3001\u72EC\u7ACB\u57DF\u540D\u3001\u53EF\u80FD\u901F\u5EA6\u66F4\u5FEB\u5427\u3002\u514D\u8D39\u56FE\u5E8A\uFF1A\u63A8\u8350\u521A\u63A5\u89E6\u7684\u540C\u5B66\u53EF\u4EE5\u4F7F\u7528\u6709\u9053\u4E91\u7B14\u8BB0\u548C\u5FAE\u535A\uFF0C\u56E0\u4E3A\u8FD9\u4E24\u4E2A\u8F6F\u4EF6\u5927\u5BB6\u90FD\u6BD4\u8F83\u719F\u6089\uFF0C\u64CD\u4F5C\u4E5F\u7B80\u5355\u3002 \u5E38\u7528\u7684\u56FE\u5E8A\u6709\uFF1A\u5FAE\u535A\uFF0C\u6709\u9053\u4E91\u7B14\u8BB0\uFF0Cgithub \u56FE\u5E8A,\u817E\u8BAF\u4E91 cos,\u4E03\u725B\u56FE\u5E8A\uFF0C\u963F\u91CC\u4E91 OSS\uFF0CSM.MS \u56FE\u5E8A\u3002\u4ECA\u65E5\u4E3B\u8981\u7ED9\u5C0F\u4F19\u4F34\u4EEC\u4ECB\u7ECD\u4E00\u6B3E\u514D\u8D39\u7684 github \u56FE\u5E8A\u7684\u521B\u5EFA\u65B9\u5F0F\u3002\u56FE\u5E8A\u7684\u5927\u81F4\u4F7F\u7528\u6D41\u7A0B\u5982\u4E0B\uFF1A![\u56FE\u5E8A\u7684\u5927\u81F4\u4F7F\u7528\u6D41\u7A0B\u5982\u4E0B](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021701018.png)

## \u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA

1\u3001\u521B\u5EFA\u4E00\u4E2A\u5B58\u653E\u56FE\u7247\u7684\u516C\u5F00\u7684\`github\`\u4ED3\u5E93
![\u521B\u5EFA\u4E00\u4E2A\u5B58\u653E\u56FE\u7247\u7684\u516C\u5F00\u7684github\u4ED3\u5E93](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021717135.png)
2\u3001\u521B\u5EFA Token\uFF0C\u3010\u8FDB\u5165 github\u3011-\u3010\u70B9\u51FB\u5934\u50CF\u3011-\u3010settings\u3011-\u3010developer settings\u3011-\u3010Personal access tokens\u3011\uFF0C\u4E2A\u4EBA\u8BBF\u95EE\u4EE4\u724C\u521B\u5EFA\u6210\u529F\uFF0C\u8BF7\u590D\u5236\u4F60\u7684 token\uFF0C\u5B83\u53EA\u663E\u793A\u4E00\u6B21\uFF0C\u8BF7\u59A5\u5584\u4FDD\u7BA1\u3002\u64CD\u4F5C\u5982\u4E0B\u56FE\uFF1A![\u521B\u5EFAToken](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021717283.png)

## PicGO \u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5

&emsp;PicGO \u662F\u4E00\u6B3E\u91C7\u7528 electron+Vue \u5F00\u53D1\u4E0A\u4F20\u56FE\u7247\u7684\u684C\u9762\u7AEF\u5DE5\u5177\u3002\u9996\u5148\u9700\u8981\u672C\u5730\u4E0B\u8F7D\u5B89\u88C5\u5BA2\u6237\u7AEF\uFF0C\u5B98\u7F51\u5F00\u6E90\u5730\u5740\uFF1A<https://github.com/Molunerfinn/PicGo/releases>; \u5B89\u88C5\u5B8C\u6253\u5F00\u5BA2\u6237\u7AEF\u8FDB\u884C\u914D\u7F6E\uFF1A\u6709\u5F88\u591A\u56FE\u5E8A\uFF0C\u6211\u4EEC\u9009\u62E9 github \u56FE\u5E8A\uFF0C\u914D\u7F6E\u76F8\u5173\u7684\u4ED3\u5E93\u4FE1\u606F\u548C token \u4FE1\u606F\u3002

## PicGO \u914D\u7F6E github \u56FE\u5E8A

1\u3001\u586B\u5199\u56FE\u5E8A\u4ED3\u5E93\u540D\u79F0\uFF0C\u5206\u652F\uFF0C\u56FE\u7247\u5B58\u653E\u76EE\u5F55\uFF0C\u4E2A\u4EBA\u4EE4\u724C Token\uFF0C\u914D\u7F6E\u5982\u4E0B\uFF1A
![token\u914D\u7F6E](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021709999.png)  
\u8FD9\u91CC\u7684\u81EA\u5B9A\u4E49\u57DF\u540D\u7684\u683C\u5F0F\uFF1A\`https://cdn.jsdelivr.net/gh/\u7528\u6237\u540D/\u4ED3\u5E93\u540D\`\uFF0C\u8FD9\u662F\u4E2A\u514D\u8D39\u7684 CDN \u52A0\u901F\uFF0C\u53EF\u4EE5\u52A0\u5FEB\u56FE\u7247\u7684\u8BBF\u95EE\u901F\u5EA6\uFF0C\u4E5F\u53EF\u4EE5\u4E0D\u52A0\u3002
2\u3001\u901A\u8FC7 PicGO \u4E0A\u4F20\u533A\u4E0A\u4F20\u56FE\u7247
![\u4E0A\u4F20\u56FE\u4F8B](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021726001.png)  
3\u3001\u5728\u76F8\u518C\u4E2D\u67E5\u770B\u56FE\u7247\uFF0C\u70B9\u51FB\u5BF9\u5E94\u7684\u56FE\u7247\u590D\u5236\u4E0D\u540C\u683C\u5F0F\u8FDE\u63A5\uFF0C\u76F4\u63A5\u4F7F\u7528\u3002
![\u9884\u89C8\u56FE\u4F8B](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021726886.png)  
4\u3001\u67E5\u770B github \u56FE\u5E8A\u4ED3\u5E93\u56FE\u7247\u5B58\u50A8\u60C5\u51B5
![\u4ED3\u5E93\u9884\u89C8](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021730066.png)  
\u81F3\u6B64 github \u56FE\u5E8A\u521B\u5EFA\u5B8C\u6210\u4E86\uFF0C\u5C0F\u4F19\u4F34\u4EEC\u53EF\u4EE5\u5F00\u5FC3\u7684\u73A9\u800D\u4E86 :grinning:\u3002

## \u514D\u8D39\u7684 CDN \u52A0\u901F

:::note
CDN \u7684\u5168\u79F0\u662F Content Delivery Network\uFF0C\u5373\u5185\u5BB9\u5206\u53D1\u7F51\u7EDC\u3002CDN \u662F\u6784\u5EFA\u5728\u7F51\u7EDC\u4E4B\u4E0A\u7684\u5185\u5BB9\u5206\u53D1\u7F51\u7EDC\uFF0C\u4F9D\u9760\u90E8\u7F72\u5728\u5404\u5730\u7684\u8FB9\u7F18\u670D\u52A1\u5668\uFF0C\u901A\u8FC7\u4E2D\u5FC3\u5E73\u53F0\u7684\u8D1F\u8F7D\u5747\u8861\u3001\u5185\u5BB9\u5206\u53D1\u3001\u8C03\u5EA6\u7B49\u529F\u80FD\u6A21\u5757\uFF0C\u4F7F\u7528\u6237\u5C31\u8FD1\u83B7\u53D6\u6240\u9700\u5185\u5BB9\uFF0C\u964D\u4F4E\u7F51\u7EDC\u62E5\u585E\uFF0C\u63D0\u9AD8\u7528\u6237\u8BBF\u95EE\u54CD\u5E94\u901F\u5EA6\u548C\u547D\u4E2D\u7387\u3002CDN \u7684\u5173\u952E\u6280\u672F\u4E3B\u8981\u6709\u5185\u5BB9\u5B58\u50A8\u548C\u5206\u53D1\u6280\u672F\u3002\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\uFF0C\u5F88\u591A\u516C\u7528\u514D\u8D39\u7684 CDN \u8D44\u6E90\u5728\u4E2D\u56FD\u5927\u9646\u5E76\u4E0D\u5F88\u597D\u7528\uFF0C\u5C31\u7B97\u662F\u4ED8\u8D39\u7684\uFF0C\u4E5F\u6709\u4E00\u5B9A\u7684\u9650\u5236\uFF0C\u4F8B\u5982\u6BCF\u5929\u7684\u5237\u65B0\u6B21\u6570\u6709\u9650\u4E4B\u7C7B\u7684\u3002
:::

&emsp;\u6700\u8FD1 CDN\`https://cdn.jsdelivr.net\`\u7531\u4E8E dns \u6C61\u67D3\u4E00\u81F4\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u5BFC\u81F4\u52A0\u901F\u5931\u6548\u3002\u4E0B\u9762\u4FBF\u6536\u96C6\u4E86\u4E00\u4E9B\u514D\u8D39\u7684 CDN \u94FE\u63A5\uFF0C\u4EE5\u5907\u66F4\u6362\u3002\u4E3B\u8981\u4ECB\u7ECD\uFF1Ajsdelivr\uFF0Cstaticaly\uFF0Cgithack

### jsdelivr

:::tip
1\u3001\u8FD9\u662F\u5728\u4E2D\u56FD\u5927\u9646\u552F\u4E00\u6709 license \u7684\u516C\u6709 CDN\uFF0C\u800C\u4E14\u5B9E\u9645\u4F7F\u7528\u4E2D\u7684\u8BBF\u95EE\u901F\u5EA6\u4E5F\u662F\u6781\u5FEB\u7684\u3002

2\u3001[\u5B98\u7F51\u5730\u5740](https://www.jsdelivr.com),\u6CA1\u68AF\u5B50\u8BBF\u95EE\u53EF\u80FD\u6709\u70B9\u6162\uFF0C\u4E0D\u8FC7 CDN \u7684\u8282\u70B9\u662F\u5F88\u5FEB\u7684 \u53EF\u4EE5\u5F15\u7528\u7684\u8D44\u6E90\u5305\u62EC NPM\u3001github\u3001wordpress \u7684\u6240\u6709\u8D44\u6E90\uFF0Cgithub \u53EF\u4EE5\u662F\u4EFB\u610F\u4F53\u79EF\u5C0F\u4E8E 50M \u7684\u4ED3\u5E93\u3002
:::
\u4EE5 github \u4E3A\u4F8B\uFF0C\u53EA\u9700\u8981\u901A\u8FC7\u7B26\u5408 JSDelivr \u89C4\u5219\u7684 URL \u5F15\u7528\uFF0C\u5373\u53EF\u76F4\u63A5\u4F7F\u7528 Github \u4E2D\u7684\u8D44\u6E90\u3002

\`\`\`bash
// \u7528\u6237\u540D/\u4ED3\u5E93\u540D@\u7248\u672C\u53F7/\u6587\u4EF6\u540D
https://cdn.jsdelivr.net/gh/user/repo@version/file
// load jQuery v3.2.1
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js


// \u4F7F\u7528\u4E00\u4E2A\u8303\u56F4\u5185\u7684\u7248\u672C
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2/dist/jquery.min.js
https://cdn.jsdelivr.net/gh/jquery/jquery@3/dist/jquery.min.js


// \u5FFD\u7565\u7248\u672C\u53F7\u5219\u9ED8\u8BA4\u4F7F\u7528\u6700\u65B0\u7248
// you should NOT use this in production
https://cdn.jsdelivr.net/gh/jquery/jquery/dist/jquery.min.js


// \u5728\u4EFB\u610FJS/CSS\u6587\u4EF6\u540E\u6DFB\u52A0 .min \u80FD\u5F97\u5230\u4E00\u4E2A\u7F29\u5C0F\u7248
// \u5982\u679C\u5B83\u672C\u8EAB\u4E0D\u5B58\u5728\uFF0C\u6211\u4EEC\u5C06\u4F1A\u4E3A\u4F60\u751F\u6210
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/src/core.min.js


// \u5728\u672B\u5C3E\u52A0 / \u5219\u5F97\u5230\u76EE\u5F55\u5217\u8868
https://cdn.jsdelivr.net/gh/jquery/jquery/
\`\`\`

### staticaly

\u5B98\u7F51\u5730\u5740\uFF1A<https://www.staticaly.com>,\u8F7B\u677E\u5730\u4ECEGitHub / GitLab / Bitbucket \u7B49\u52A0\u8F7D\u60A8\u7684\u9879\u76EE \u6CA1\u6709\u6D41\u91CF\u9650\u5236\u6216\u9650\u5236\u3002\u6587\u4EF6\u901A\u8FC7\u8D85\u5FEB\u901F\u5168\u7403 CDN \u63D0\u4F9B\u3002 \u5728 URL\uFF08\u4E0D\u662F\u5206\u652F\uFF09\u4E2D\u4F7F\u7528\u7279\u5B9A\u6807\u8BB0\u6216\u63D0\u4EA4\u54C8\u5E0C\u3002\u6839\u636E URL \u6C38\u4E45\u7F13\u5B58\u6587\u4EF6\u3002 \u9664 master \u5206\u652F\u5916\uFF0C\u6587\u4EF6\u5728\u6D4F\u89C8\u5668\u4E2D\u7F13\u5B58 1 \u5E74\u3002 \u5177\u4F53\u7528\u6CD5\uFF1A

\`\`\`bash
# GitHub CDN
https://cdn.staticaly.com/gh/:user/:repo/:tag/:file
https://cdn.staticaly.com/gh/growvv/growvv.github.io/master/README.md

# GitLab CDN
https://cdn.staticaly.com/gl/:user/:repo/:tag/:file

# Bitbucket CDN
https://cdn.staticaly.com/bb/:user/:repo/:tag/:file

# WordPress CDN
https://cdn.staticaly.com/wp/c/:version/wp-includes/:file
https://cdn.staticaly.com/wp/p/:plugin_name/:version/:file
https://cdn.staticaly.com/wp/t/:theme_name/:version/:file

# Imgpx CDN
https://cdn.staticaly.com/img/:image_url

# Favicons CDN
https://cdn.staticaly.com/favicons/:favicon_url
\`\`\`

### githack

\u5B98\u7F51\u5730\u5740\uFF1A<http://raw.githack.com/> \u5177\u4F53\u7528\u6CD5\u548C\u4E0A\u9762\u7684 staticaly \u5F88\u7C7B\u4F3C\uFF0C\u76F4\u63A5\u4ECE GitHub\uFF0CBitbucket \u6216 GitLab \u63D0\u4F9B\u539F\u59CB\u6587\u4EF6\u3002\u7528\u6CD5\u5982\u4E0B\uFF1A

\`\`\`bash
# Github CDN
//\u4E3B\u5206\u652F
https://rawcdn.githack.com/liub1934/LB-Blog/master/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png

//\u7248\u672C\u5206\u652F
https://rawcdn.githack.com/liub1934/LB-Blog/8806f440d3f9a7cc3e6125d7d75564e40262c6a8/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png
\`\`\`

## \u5176\u4ED6\u56FE\u5E8A

### \u5BA2\u6765\u56FE\u5E8A

&emsp;\u53E6\u5916\u7ED9\u5C0F\u4F19\u4F34\u4EEC\u4ECB\u7ECD\u4E00\u6B3E web \u6D4F\u89C8\u5668\u7F51\u7AD9\u5DE5\u5177\uFF0C\u4E5F\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u5230\u6211\u4EEC\u7684 github \u56FE\u5E8A\u4ED3\u5E93\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u53EF\u4EE5\u907F\u514D\u7279\u6B8A\u60C5\u51B5\u4E0B\u5B89\u88C5\u684C\u9762\u7AEF\u7A0B\u5E8F\u4E5F\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u3002\u5B98\u7F51\u5730\u5740\uFF1A<https://img.itclan.cn/#/upload>\u3002\u4F7F\u7528\u548C PicGo \u5F88\u76F8\u4F3C\uFF0C\u8F93\u5165\u4E2A\u4EBA\u4EE4\u724C\uFF0C\u4F1A\u81EA\u52A8\u8C03\u7528 github Api \u83B7\u53D6\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u7136\u540E\u9009\u62E9\u56FE\u5E8A\u4ED3\u5E93\uFF0C\u914D\u7F6E\u56FE\u5E8A\u6587\u4EF6\u8DEF\u5F84\uFF0C\u5982\u4E0B\u56FE\uFF1A  
![\u914D\u7F6E](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021749103.png)  
\u7136\u540E\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247\uFF0C\u4E0A\u4F20\u540E\u53EF\u4EE5\u7B5B\u9009\u4E0D\u540C\u76EE\u5F55\u4E0B\u7684\u56FE\u7247\uFF0C\u4E5F\u53EF\u4EE5\u9884\u89C8 PicGo \u4E0A\u4F20\u7684\u56FE\u7247\uFF0C\u540C\u65F6\u53EF\u4EE5\u83B7\u53D6 github \u5916\u7F51\u94FE\u63A5\u548C CND \u52A0\u901F\u94FE\u63A5\uFF0Cmarkdown \u683C\u5F0F\u7684\u94FE\u63A5\u76F4\u63A5\u4F7F\u7528\uFF0C\u5982\u4E0B\u56FE\uFF1A
![\u56FE\u4F8B](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021750165.png)
`,contentRendered:`<p>\u2003\u7ECF\u5E38\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u5C0F\u4F19\u4F34\u6DF1\u6709\u4F53\u4F1A\uFF0C\u5982\u4F55\u5C06\u56FE\u7247\u8D44\u6E90\u8FDB\u884C\u5B58\u50A8\uFF0C\u5E76\u5728 markdown \u6587\u6863\u4E2D\u4F7F\u7528\u5462\uFF1F\u91C7\u7528\u7B2C\u4E09\u65B9\u7684\u56FE\u7247\u8D44\u6E90\uFF0C\u6709\u7684\u8D44\u6E90\u6709\u9632\u76D7\u94FE\u9650\u5236\uFF0C\u6709\u7684\u8D44\u6E90\u53EF\u80FD\u4F1A\u8FC7\u671F\uFF0C\u90A3\u4E48\uFF0C\u4ECA\u5929\u5C31\u7ED9\u5C0F\u4F19\u4F34\u4ECB\u7ECD\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\uFF0C\u5C5E\u4E8E\u81EA\u5DF1\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002</p>
<!-- more -->
<div class="custom-container info"><p class="custom-container-title">\u76F8\u5173\u4FE1\u606F</p>
<p>1\u3001github \u56FE\u5E8A\u539F\u7406\uFF1A\u901A\u8FC7 github Api \u548C\u4E2A\u4EBA\u6388\u6743 Token,\u901A\u8FC7\u7B2C\u4E09\u65B9\u5DE5\u5177\u5C06\u672C\u5730\u56FE\u7247\u4E0A\u4F20\u5230\u4E2A\u4EBA github \u4ED3\u5E93\u8FDB\u884C\u56FE\u7247\u5B58\u50A8\uFF0C\u7136\u540E\u751F\u6210\u4E00\u4E2A\u901A\u8FC7 CND \u52A0\u901F\u7684\u94FE\u63A5\uFF0C\u63D0\u4F9B\u7528\u6237\u8BBF\u95EE\u3002 <strong>\u6CE8\u610F\uFF1A</strong> github \u4E2A\u4EBA\u6388\u6743\u4EE4\u724C Token \u4E00\u65E6\u521B\u5EFA\u518D\u65E0\u6CD5\u83B7\u53D6\uFF0C\u4E00\u5B9A\u7262\u8BB0\u4F4F\uFF0C\u5982\u679C\u9057\u5931\uFF0C\u53EA\u80FD\u91CD\u65B0\u751F\u6210\u4E00\u4E2A\u3002</p>
<p>2\u3001github \u56FE\u5E8A\u6700\u597D\u5355\u72EC\u521B\u5EFA\u4E00\u4E2A\u4ED3\u5E93\uFF0C\u5E76\u4E14\u4ED3\u5E93\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 100M\uFF0C\u5426\u5219\u4F1A\u88AB\u5B98\u65B9\u89C6\u4E3A\u56FE\u5E8A\u5C01\u7981\uFF0C\u5982\u679C\u8D85\u8FC7 100M\uFF0C\u9700\u8981\u91CD\u65B0\u521B\u5EFA\u65B0\u7684\u56FE\u5E8A\u4ED3\u5E93\u3002</p>
</div>
<h2 id="\u4EC0\u4E48\u662F\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u4E48\u662F\u56FE\u5E8A" aria-hidden="true">#</a> \u4EC0\u4E48\u662F\u56FE\u5E8A</h2>
<p>\u2003\u56FE\u5E8A\u5176\u5B9E\u662F\u4E92\u8054\u7F51\u4E2D\u5B58\u50A8\u56FE\u7247\u7684\u7A7A\u95F4\uFF0C\u4E3E\u4E2A\u6817\u5B50\uFF1A\u5047\u8BBE\u4F60\u5728\u5FAE\u535A\u5206\u4EAB\u4E00\u5F20\u56FE\u7247\uFF0C\u4F60\u7684\u7C89\u4E1D\u53EF\u4EE5\u901A\u8FC7\u4E92\u8054\u7F51\u770B\u5230\u4F60\u5206\u4EAB\u7684\u56FE\u7247\uFF0C\u90A3\u4E48\u4ED6\u662F\u53BB\u8BBF\u95EE\u4F60\u7684\u624B\u673A\u7684\u76F8\u518C\u5417\uFF1F\u5176\u5B9E\u4E0D\u662F\u7684\uFF0C\u4F60\u5206\u4EAB\u56FE\u7247\uFF0C\u4E5F\u5C31\u662F\u628A\u56FE\u7247\u4E0A\u4F20\u5230\u5FAE\u535A\u7684\u670D\u52A1\u5668\uFF0C\u5FAE\u535A\u5C06\u4E3A\u4F60\u751F\u6210\u4E00\u4E2A\u72EC\u4E00\u65E0\u4E8C\u7684\u8BBF\u95EE\u94FE\u63A5\uFF0C\u8FD9\u4E2A\u94FE\u63A5\u6307\u5411\u7684\u7A7A\u95F4\u5176\u5B9E\u5C31\u662F\u56FE\u5E8A\u3002</p>
<h2 id="\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u9700\u8981\u56FE\u5E8A</h2>
<p>\u2003\u4F1A\u53BB\u63A5\u89E6\u56FE\u5E8A\u7684\u4EBA\u901A\u5E38\u90FD\u662F\u4E00\u4E9B\u70ED\u7231\u5728\u7F51\u4E0A\u5206\u4EAB\u535A\u5BA2\u6216\u8005\u559C\u6B22\u91C7\u7528 markdown \u7F16\u5199\u6587\u6863\u7684\u4EBA\uFF0C\u4F7F\u7528\u56FE\u5E8A\u7684\u4EBA\u901A\u5E38\u91C7\u7528 Markdown \u7684\u65B9\u5F0F\u53BB\u7F16\u8F91\u6587\u5B57\u3002\u6211\u4EEC\u90FD\u77E5\u9053\u73B0\u5728\u901A\u5E38\u6D41\u884C\u4E24\u79CD\u65B9\u5F0F\u7F16\u8F91\u6587\u5B57\uFF1A\u5BCC\u6587\u672C\u7F16\u8F91\uFF0CWord \u5C31\u662F\u5176\u4E2D\u975E\u5E38\u5177\u6709\u4EE3\u8868\u6027\u7684\uFF0C\u6587\u5B57\u7684\u5404\u79CD\u683C\u5F0F\u90FD\u662F\u901A\u8FC7\u4EA4\u4E92\u6309\u94AE\u8BBE\u7F6E\u7684\uFF0C\u8FD9\u65F6\u5019\u9700\u8981\u9891\u7E41\u7684\u9F20\u6807\u914D\u5408\u64CD\u4F5C\u3002\u8FD9\u79CD\u65B9\u5F0F\u64CD\u4F5C\u6E10\u53D8\uFF0C\u4F46\u662F\u5BF9\u4E8E\u5927\u91CF\u7F16\u8F91\u5DE5\u4F5C\u7684\u6587\u5B57\u5DE5\u4F5C\u8005\uFF0C\u53CC\u624B\u79BB\u5F00\u952E\u76D8\u4F7F\u7528\u9F20\u6807\u5176\u5B9E\u662F\u4E00\u79CD\u8D1F\u62C5\u3002
Markdown \u7F16\u8F91\uFF0C\u662F\u4E00\u79CD\u901A\u8FC7 Markdown \u6807\u8BB0\u8BED\u8A00\u53BB\u89C4\u5B9A\u683C\u5F0F\u7684\u7EAF\u6587\u672C\u7F16\u8F91\u65B9\u5F0F\u3002\u8FD9\u79CD\u65B9\u5F0F\u4F7F\u5F97\u6587\u5B57\u5DE5\u4F5C\u8005\u4E13\u6CE8\u4E8E\u6587\u5B57\uFF0C\u800C\u975E\u683C\u5F0F\uFF0C\u53CC\u624B\u53EF\u4EE5\u5F7B\u5E95\u7684\u89E3\u653E\u9F20\u6807\uFF0C\u5927\u5927\u63D0\u9AD8\u4E86\u6548\u7387\u3002\u8FD8\u6709\u4E00\u4E2A\u4F18\u70B9\u5C31\u662F\uFF0CMarkdown \u6BD4\u5BCC\u6587\u672C\u7F16\u8F91\u65B9\u5F0F\u66F4\u52A0\u5177\u6709\u901A\u7528\u6027\uFF0Cword \u7684\u6587\u5B57\u6574\u7BC7\u590D\u5236\u5230\u6709\u9053\u4E91\u7B14\u8BB0\u683C\u5F0F\u4F1A\u51FA\u73B0\u5DEE\u5F02\uFF0C\u8FD9\u4E5F\u662F\u5BCC\u6587\u672C\u7F16\u8F91\u7684\u5DE8\u5927\u7F3A\u9677\u3002</p>
<h2 id="\u600E\u6837\u83B7\u5F97\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u600E\u6837\u83B7\u5F97\u56FE\u5E8A" aria-hidden="true">#</a> \u600E\u6837\u83B7\u5F97\u56FE\u5E8A</h2>
<p>\u76EE\u524D\u6709\u8BB8\u591A\u83B7\u5F97\u56FE\u5E8A\u7684\u9014\u5F84\u975E\u5E38\u591A\uFF0C\u901A\u5E38\u5206\u4E3A\u6536\u8D39\u7684\u548C\u514D\u8D39\u7684\u3002\u6536\u8D39\u56FE\u5E8A\uFF1A\u4F18\u70B9\u5728\u4E8E\u5730\u5740\u4FDD\u6301\u3001\u72EC\u7ACB\u57DF\u540D\u3001\u53EF\u80FD\u901F\u5EA6\u66F4\u5FEB\u5427\u3002\u514D\u8D39\u56FE\u5E8A\uFF1A\u63A8\u8350\u521A\u63A5\u89E6\u7684\u540C\u5B66\u53EF\u4EE5\u4F7F\u7528\u6709\u9053\u4E91\u7B14\u8BB0\u548C\u5FAE\u535A\uFF0C\u56E0\u4E3A\u8FD9\u4E24\u4E2A\u8F6F\u4EF6\u5927\u5BB6\u90FD\u6BD4\u8F83\u719F\u6089\uFF0C\u64CD\u4F5C\u4E5F\u7B80\u5355\u3002 \u5E38\u7528\u7684\u56FE\u5E8A\u6709\uFF1A\u5FAE\u535A\uFF0C\u6709\u9053\u4E91\u7B14\u8BB0\uFF0Cgithub \u56FE\u5E8A,\u817E\u8BAF\u4E91 cos,\u4E03\u725B\u56FE\u5E8A\uFF0C\u963F\u91CC\u4E91 OSS\uFF0CSM.MS \u56FE\u5E8A\u3002\u4ECA\u65E5\u4E3B\u8981\u7ED9\u5C0F\u4F19\u4F34\u4EEC\u4ECB\u7ECD\u4E00\u6B3E\u514D\u8D39\u7684 github \u56FE\u5E8A\u7684\u521B\u5EFA\u65B9\u5F0F\u3002\u56FE\u5E8A\u7684\u5927\u81F4\u4F7F\u7528\u6D41\u7A0B\u5982\u4E0B\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021701018.png" alt="\u56FE\u5E8A\u7684\u5927\u81F4\u4F7F\u7528\u6D41\u7A0B\u5982\u4E0B"></p>
<h2 id="\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA" tabindex="-1"><a class="header-anchor" href="#\u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA" aria-hidden="true">#</a> \u56FE\u5E8A\u4ED3\u5E93\u521B\u5EFA</h2>
<p>1\u3001\u521B\u5EFA\u4E00\u4E2A\u5B58\u653E\u56FE\u7247\u7684\u516C\u5F00\u7684<code v-pre>github</code>\u4ED3\u5E93
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021717135.png" alt="\u521B\u5EFA\u4E00\u4E2A\u5B58\u653E\u56FE\u7247\u7684\u516C\u5F00\u7684github\u4ED3\u5E93">
2\u3001\u521B\u5EFA Token\uFF0C\u3010\u8FDB\u5165 github\u3011-\u3010\u70B9\u51FB\u5934\u50CF\u3011-\u3010settings\u3011-\u3010developer settings\u3011-\u3010Personal access tokens\u3011\uFF0C\u4E2A\u4EBA\u8BBF\u95EE\u4EE4\u724C\u521B\u5EFA\u6210\u529F\uFF0C\u8BF7\u590D\u5236\u4F60\u7684 token\uFF0C\u5B83\u53EA\u663E\u793A\u4E00\u6B21\uFF0C\u8BF7\u59A5\u5584\u4FDD\u7BA1\u3002\u64CD\u4F5C\u5982\u4E0B\u56FE\uFF1A<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021717283.png" alt="\u521B\u5EFAToken"></p>
<h2 id="picgo-\u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#picgo-\u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5" aria-hidden="true">#</a> PicGO \u5DE5\u5177\u4E0B\u8F7D\u5B89\u88C5</h2>
<p>\u2003PicGO \u662F\u4E00\u6B3E\u91C7\u7528 electron+Vue \u5F00\u53D1\u4E0A\u4F20\u56FE\u7247\u7684\u684C\u9762\u7AEF\u5DE5\u5177\u3002\u9996\u5148\u9700\u8981\u672C\u5730\u4E0B\u8F7D\u5B89\u88C5\u5BA2\u6237\u7AEF\uFF0C\u5B98\u7F51\u5F00\u6E90\u5730\u5740\uFF1A<a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noopener noreferrer">https://github.com/Molunerfinn/PicGo/releases<ExternalLinkIcon/></a>; \u5B89\u88C5\u5B8C\u6253\u5F00\u5BA2\u6237\u7AEF\u8FDB\u884C\u914D\u7F6E\uFF1A\u6709\u5F88\u591A\u56FE\u5E8A\uFF0C\u6211\u4EEC\u9009\u62E9 github \u56FE\u5E8A\uFF0C\u914D\u7F6E\u76F8\u5173\u7684\u4ED3\u5E93\u4FE1\u606F\u548C token \u4FE1\u606F\u3002</p>
<h2 id="picgo-\u914D\u7F6E-github-\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#picgo-\u914D\u7F6E-github-\u56FE\u5E8A" aria-hidden="true">#</a> PicGO \u914D\u7F6E github \u56FE\u5E8A</h2>
<p>1\u3001\u586B\u5199\u56FE\u5E8A\u4ED3\u5E93\u540D\u79F0\uFF0C\u5206\u652F\uFF0C\u56FE\u7247\u5B58\u653E\u76EE\u5F55\uFF0C\u4E2A\u4EBA\u4EE4\u724C Token\uFF0C\u914D\u7F6E\u5982\u4E0B\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021709999.png" alt="token\u914D\u7F6E"><br>
\u8FD9\u91CC\u7684\u81EA\u5B9A\u4E49\u57DF\u540D\u7684\u683C\u5F0F\uFF1A<code v-pre>https://cdn.jsdelivr.net/gh/\u7528\u6237\u540D/\u4ED3\u5E93\u540D</code>\uFF0C\u8FD9\u662F\u4E2A\u514D\u8D39\u7684 CDN \u52A0\u901F\uFF0C\u53EF\u4EE5\u52A0\u5FEB\u56FE\u7247\u7684\u8BBF\u95EE\u901F\u5EA6\uFF0C\u4E5F\u53EF\u4EE5\u4E0D\u52A0\u3002
2\u3001\u901A\u8FC7 PicGO \u4E0A\u4F20\u533A\u4E0A\u4F20\u56FE\u7247
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021726001.png" alt="\u4E0A\u4F20\u56FE\u4F8B"><br>
3\u3001\u5728\u76F8\u518C\u4E2D\u67E5\u770B\u56FE\u7247\uFF0C\u70B9\u51FB\u5BF9\u5E94\u7684\u56FE\u7247\u590D\u5236\u4E0D\u540C\u683C\u5F0F\u8FDE\u63A5\uFF0C\u76F4\u63A5\u4F7F\u7528\u3002
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021726886.png" alt="\u9884\u89C8\u56FE\u4F8B"><br>
4\u3001\u67E5\u770B github \u56FE\u5E8A\u4ED3\u5E93\u56FE\u7247\u5B58\u50A8\u60C5\u51B5
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021730066.png" alt="\u4ED3\u5E93\u9884\u89C8"><br>
\u81F3\u6B64 github \u56FE\u5E8A\u521B\u5EFA\u5B8C\u6210\u4E86\uFF0C\u5C0F\u4F19\u4F34\u4EEC\u53EF\u4EE5\u5F00\u5FC3\u7684\u73A9\u800D\u4E86 \u{1F600}\u3002</p>
<h2 id="\u514D\u8D39\u7684-cdn-\u52A0\u901F" tabindex="-1"><a class="header-anchor" href="#\u514D\u8D39\u7684-cdn-\u52A0\u901F" aria-hidden="true">#</a> \u514D\u8D39\u7684 CDN \u52A0\u901F</h2>
<div class="custom-container note"><p class="custom-container-title">\u6CE8</p>
<p>CDN \u7684\u5168\u79F0\u662F Content Delivery Network\uFF0C\u5373\u5185\u5BB9\u5206\u53D1\u7F51\u7EDC\u3002CDN \u662F\u6784\u5EFA\u5728\u7F51\u7EDC\u4E4B\u4E0A\u7684\u5185\u5BB9\u5206\u53D1\u7F51\u7EDC\uFF0C\u4F9D\u9760\u90E8\u7F72\u5728\u5404\u5730\u7684\u8FB9\u7F18\u670D\u52A1\u5668\uFF0C\u901A\u8FC7\u4E2D\u5FC3\u5E73\u53F0\u7684\u8D1F\u8F7D\u5747\u8861\u3001\u5185\u5BB9\u5206\u53D1\u3001\u8C03\u5EA6\u7B49\u529F\u80FD\u6A21\u5757\uFF0C\u4F7F\u7528\u6237\u5C31\u8FD1\u83B7\u53D6\u6240\u9700\u5185\u5BB9\uFF0C\u964D\u4F4E\u7F51\u7EDC\u62E5\u585E\uFF0C\u63D0\u9AD8\u7528\u6237\u8BBF\u95EE\u54CD\u5E94\u901F\u5EA6\u548C\u547D\u4E2D\u7387\u3002CDN \u7684\u5173\u952E\u6280\u672F\u4E3B\u8981\u6709\u5185\u5BB9\u5B58\u50A8\u548C\u5206\u53D1\u6280\u672F\u3002\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\uFF0C\u5F88\u591A\u516C\u7528\u514D\u8D39\u7684 CDN \u8D44\u6E90\u5728\u4E2D\u56FD\u5927\u9646\u5E76\u4E0D\u5F88\u597D\u7528\uFF0C\u5C31\u7B97\u662F\u4ED8\u8D39\u7684\uFF0C\u4E5F\u6709\u4E00\u5B9A\u7684\u9650\u5236\uFF0C\u4F8B\u5982\u6BCF\u5929\u7684\u5237\u65B0\u6B21\u6570\u6709\u9650\u4E4B\u7C7B\u7684\u3002</p>
</div>
<p>\u2003\u6700\u8FD1 CDN<code v-pre>https://cdn.jsdelivr.net</code>\u7531\u4E8E dns \u6C61\u67D3\u4E00\u81F4\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u5BFC\u81F4\u52A0\u901F\u5931\u6548\u3002\u4E0B\u9762\u4FBF\u6536\u96C6\u4E86\u4E00\u4E9B\u514D\u8D39\u7684 CDN \u94FE\u63A5\uFF0C\u4EE5\u5907\u66F4\u6362\u3002\u4E3B\u8981\u4ECB\u7ECD\uFF1Ajsdelivr\uFF0Cstaticaly\uFF0Cgithack</p>
<h3 id="jsdelivr" tabindex="-1"><a class="header-anchor" href="#jsdelivr" aria-hidden="true">#</a> jsdelivr</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001\u8FD9\u662F\u5728\u4E2D\u56FD\u5927\u9646\u552F\u4E00\u6709 license \u7684\u516C\u6709 CDN\uFF0C\u800C\u4E14\u5B9E\u9645\u4F7F\u7528\u4E2D\u7684\u8BBF\u95EE\u901F\u5EA6\u4E5F\u662F\u6781\u5FEB\u7684\u3002</p>
<p>2\u3001<a href="https://www.jsdelivr.com" target="_blank" rel="noopener noreferrer">\u5B98\u7F51\u5730\u5740<ExternalLinkIcon/></a>,\u6CA1\u68AF\u5B50\u8BBF\u95EE\u53EF\u80FD\u6709\u70B9\u6162\uFF0C\u4E0D\u8FC7 CDN \u7684\u8282\u70B9\u662F\u5F88\u5FEB\u7684 \u53EF\u4EE5\u5F15\u7528\u7684\u8D44\u6E90\u5305\u62EC NPM\u3001github\u3001wordpress \u7684\u6240\u6709\u8D44\u6E90\uFF0Cgithub \u53EF\u4EE5\u662F\u4EFB\u610F\u4F53\u79EF\u5C0F\u4E8E 50M \u7684\u4ED3\u5E93\u3002</p>
</div>
<p>\u4EE5 github \u4E3A\u4F8B\uFF0C\u53EA\u9700\u8981\u901A\u8FC7\u7B26\u5408 JSDelivr \u89C4\u5219\u7684 URL \u5F15\u7528\uFF0C\u5373\u53EF\u76F4\u63A5\u4F7F\u7528 Github \u4E2D\u7684\u8D44\u6E90\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>// \u7528\u6237\u540D/\u4ED3\u5E93\u540D@\u7248\u672C\u53F7/\u6587\u4EF6\u540D
https://cdn.jsdelivr.net/gh/user/repo@version/file
// load jQuery v3.2.1
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js


// \u4F7F\u7528\u4E00\u4E2A\u8303\u56F4\u5185\u7684\u7248\u672C
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2/dist/jquery.min.js
https://cdn.jsdelivr.net/gh/jquery/jquery@3/dist/jquery.min.js


// \u5FFD\u7565\u7248\u672C\u53F7\u5219\u9ED8\u8BA4\u4F7F\u7528\u6700\u65B0\u7248
// you should NOT use this <span class="token keyword">in</span> production
https://cdn.jsdelivr.net/gh/jquery/jquery/dist/jquery.min.js


// \u5728\u4EFB\u610FJS/CSS\u6587\u4EF6\u540E\u6DFB\u52A0 .min \u80FD\u5F97\u5230\u4E00\u4E2A\u7F29\u5C0F\u7248
// \u5982\u679C\u5B83\u672C\u8EAB\u4E0D\u5B58\u5728\uFF0C\u6211\u4EEC\u5C06\u4F1A\u4E3A\u4F60\u751F\u6210
https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/src/core.min.js


// \u5728\u672B\u5C3E\u52A0 / \u5219\u5F97\u5230\u76EE\u5F55\u5217\u8868
https://cdn.jsdelivr.net/gh/jquery/jquery/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="staticaly" tabindex="-1"><a class="header-anchor" href="#staticaly" aria-hidden="true">#</a> staticaly</h3>
<p>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://www.staticaly.com" target="_blank" rel="noopener noreferrer">https://www.staticaly.com<ExternalLinkIcon/></a>,\u8F7B\u677E\u5730\u4ECEGitHub / GitLab / Bitbucket \u7B49\u52A0\u8F7D\u60A8\u7684\u9879\u76EE \u6CA1\u6709\u6D41\u91CF\u9650\u5236\u6216\u9650\u5236\u3002\u6587\u4EF6\u901A\u8FC7\u8D85\u5FEB\u901F\u5168\u7403 CDN \u63D0\u4F9B\u3002 \u5728 URL\uFF08\u4E0D\u662F\u5206\u652F\uFF09\u4E2D\u4F7F\u7528\u7279\u5B9A\u6807\u8BB0\u6216\u63D0\u4EA4\u54C8\u5E0C\u3002\u6839\u636E URL \u6C38\u4E45\u7F13\u5B58\u6587\u4EF6\u3002 \u9664 master \u5206\u652F\u5916\uFF0C\u6587\u4EF6\u5728\u6D4F\u89C8\u5668\u4E2D\u7F13\u5B58 1 \u5E74\u3002 \u5177\u4F53\u7528\u6CD5\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># GitHub CDN</span>
https://cdn.staticaly.com/gh/:user/:repo/:tag/:file
https://cdn.staticaly.com/gh/growvv/growvv.github.io/master/README.md

<span class="token comment"># GitLab CDN</span>
https://cdn.staticaly.com/gl/:user/:repo/:tag/:file

<span class="token comment"># Bitbucket CDN</span>
https://cdn.staticaly.com/bb/:user/:repo/:tag/:file

<span class="token comment"># WordPress CDN</span>
https://cdn.staticaly.com/wp/c/:version/wp-includes/:file
https://cdn.staticaly.com/wp/p/:plugin_name/:version/:file
https://cdn.staticaly.com/wp/t/:theme_name/:version/:file

<span class="token comment"># Imgpx CDN</span>
https://cdn.staticaly.com/img/:image_url

<span class="token comment"># Favicons CDN</span>
https://cdn.staticaly.com/favicons/:favicon_url
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="githack" tabindex="-1"><a class="header-anchor" href="#githack" aria-hidden="true">#</a> githack</h3>
<p>\u5B98\u7F51\u5730\u5740\uFF1A<a href="http://raw.githack.com/" target="_blank" rel="noopener noreferrer">http://raw.githack.com/<ExternalLinkIcon/></a> \u5177\u4F53\u7528\u6CD5\u548C\u4E0A\u9762\u7684 staticaly \u5F88\u7C7B\u4F3C\uFF0C\u76F4\u63A5\u4ECE GitHub\uFF0CBitbucket \u6216 GitLab \u63D0\u4F9B\u539F\u59CB\u6587\u4EF6\u3002\u7528\u6CD5\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># Github CDN</span>
//\u4E3B\u5206\u652F
https://rawcdn.githack.com/liub1934/LB-Blog/master/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png

//\u7248\u672C\u5206\u652F
https://rawcdn.githack.com/liub1934/LB-Blog/8806f440d3f9a7cc3e6125d7d75564e40262c6a8/wp-content/themes/Memory/emoji/xiaodianshi/baiyan.png
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5176\u4ED6\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u5176\u4ED6\u56FE\u5E8A" aria-hidden="true">#</a> \u5176\u4ED6\u56FE\u5E8A</h2>
<h3 id="\u5BA2\u6765\u56FE\u5E8A" tabindex="-1"><a class="header-anchor" href="#\u5BA2\u6765\u56FE\u5E8A" aria-hidden="true">#</a> \u5BA2\u6765\u56FE\u5E8A</h3>
<p>\u2003\u53E6\u5916\u7ED9\u5C0F\u4F19\u4F34\u4EEC\u4ECB\u7ECD\u4E00\u6B3E web \u6D4F\u89C8\u5668\u7F51\u7AD9\u5DE5\u5177\uFF0C\u4E5F\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u5230\u6211\u4EEC\u7684 github \u56FE\u5E8A\u4ED3\u5E93\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u53EF\u4EE5\u907F\u514D\u7279\u6B8A\u60C5\u51B5\u4E0B\u5B89\u88C5\u684C\u9762\u7AEF\u7A0B\u5E8F\u4E5F\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u3002\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://img.itclan.cn/#/upload" target="_blank" rel="noopener noreferrer">https://img.itclan.cn/#/upload<ExternalLinkIcon/></a>\u3002\u4F7F\u7528\u548C PicGo \u5F88\u76F8\u4F3C\uFF0C\u8F93\u5165\u4E2A\u4EBA\u4EE4\u724C\uFF0C\u4F1A\u81EA\u52A8\u8C03\u7528 github Api \u83B7\u53D6\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u7136\u540E\u9009\u62E9\u56FE\u5E8A\u4ED3\u5E93\uFF0C\u914D\u7F6E\u56FE\u5E8A\u6587\u4EF6\u8DEF\u5F84\uFF0C\u5982\u4E0B\u56FE\uFF1A<br>
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021749103.png" alt="\u914D\u7F6E"><br>
\u7136\u540E\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247\uFF0C\u4E0A\u4F20\u540E\u53EF\u4EE5\u7B5B\u9009\u4E0D\u540C\u76EE\u5F55\u4E0B\u7684\u56FE\u7247\uFF0C\u4E5F\u53EF\u4EE5\u9884\u89C8 PicGo \u4E0A\u4F20\u7684\u56FE\u7247\uFF0C\u540C\u65F6\u53EF\u4EE5\u83B7\u53D6 github \u5916\u7F51\u94FE\u63A5\u548C CND \u52A0\u901F\u94FE\u63A5\uFF0Cmarkdown \u683C\u5F0F\u7684\u94FE\u63A5\u76F4\u63A5\u4F7F\u7528\uFF0C\u5982\u4E0B\u56FE\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203021750165.png" alt="\u56FE\u4F8B"></p>
`,date:"2022-03-02",deps:[],links:[],pathInferred:"/posts/other/imageHost.html",pathLocale:"/",permalink:null,routeMeta:{title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"},sfcBlocks:[],slug:"imageHost",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/imageHost.md",filePathRelative:"posts/other/imageHost.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/imageHost.html.vue",componentFilePathRelative:"pages/posts/other/imageHost.html.vue",componentFileChunkName:"v-3ba2686a",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/imageHost.html.js",dataFilePathRelative:"pages/posts/other/imageHost.html.js",dataFileChunkName:"v-3ba2686a",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/imageHost.html",htmlFilePathRelative:"posts/other/imageHost.html"},title:"\u4F7F\u7528github\u642D\u5EFA\u514D\u8D39\u7684\u56FE\u5E8A"},["/posts/other/imageHost","/posts/other/imageHost.md"]],["v-a60cbc14","/posts/other/internetResource.html",{_blog:{data:{key:"v-a60cbc14",path:"/posts/other/internetResource.html",title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",lang:"zh-CN",frontmatter:{title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",date:"2022-02-12T22:07:35.000Z",description:"\u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",tag:["\u5176\u4ED6"],category:["\u7F51\u7EDC\u8D44\u6E90"],image:"https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/internetResource.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"}],["meta",{property:"og:description",content:"\u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-02-12T22:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u672C\u680F\u76EE\u4E3B\u8981\u6536\u96C6\u4E86\u5404\u79CD\u7F51\u7EDC\u8D44\u6E90\u548C\u5728\u7EBF\u5DE5\u5177\u94FE\u63A5\uFF0C\u5305\u542B 4k \u9AD8\u6E05\u56FE\u7247,\u97F3\u4E50,\u7F8E\u6587\uFF0C\u7F51\u7AD9\u94FE\u63A5\u7B49\u8D44\u6E90\u94FE\u63A5\u4FE1\u606F,\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u65B9\u4FBF\u5FEB\u901F\u67E5\u8BE2\u67E5\u8BE2\uFF01\u{1F44D}</p>
`,headers:[{level:2,title:"\u5DE5\u5177\u7C7B",slug:"\u5DE5\u5177\u7C7B",children:[]},{level:2,title:"\u56FE\u7247\u7C7B",slug:"\u56FE\u7247\u7C7B",children:[]},{level:2,title:"CSS \u7279\u6548",slug:"css-\u7279\u6548",children:[]},{level:2,title:"\u5E94\u7528\u7F51\u7AD9\u7C7B",slug:"\u5E94\u7528\u7F51\u7AD9\u7C7B",children:[]},{level:2,title:"\u7CFB\u7EDF\u7C7B",slug:"\u7CFB\u7EDF\u7C7B",children:[]},{level:2,title:"GitHub \u4ED3\u5E93",slug:"github-\u4ED3\u5E93",children:[]},{level:2,title:"\u4F18\u79C0\u535A\u5BA2\u7C7B",slug:"\u4F18\u79C0\u535A\u5BA2\u7C7B",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/internetResource.md",readingTime:{minutes:3.51,words:1054},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/internetResource.html`},key:"v-a60cbc14",path:"/posts/other/internetResource.html",title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",lang:"zh-CN",frontmatter:{title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",date:"2022-02-12T22:07:35.000Z",description:"\u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9",tag:["\u5176\u4ED6"],category:["\u7F51\u7EDC\u8D44\u6E90"],image:"https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/internetResource.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"}],["meta",{property:"og:description",content:"\u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5176\u4ED6"}],["meta",{property:"article:published_time",content:"2022-02-12T22:07:35.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u672C\u680F\u76EE\u4E3B\u8981\u6536\u96C6\u4E86\u5404\u79CD\u7F51\u7EDC\u8D44\u6E90\u548C\u5728\u7EBF\u5DE5\u5177\u94FE\u63A5\uFF0C\u5305\u542B 4k \u9AD8\u6E05\u56FE\u7247,\u97F3\u4E50,\u7F8E\u6587\uFF0C\u7F51\u7AD9\u94FE\u63A5\u7B49\u8D44\u6E90\u94FE\u63A5\u4FE1\u606F,\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u65B9\u4FBF\u5FEB\u901F\u67E5\u8BE2\u67E5\u8BE2\uFF01\u{1F44D}</p>
`,headers:[{level:2,title:"\u5DE5\u5177\u7C7B",slug:"\u5DE5\u5177\u7C7B",children:[]},{level:2,title:"\u56FE\u7247\u7C7B",slug:"\u56FE\u7247\u7C7B",children:[]},{level:2,title:"CSS \u7279\u6548",slug:"css-\u7279\u6548",children:[]},{level:2,title:"\u5E94\u7528\u7F51\u7AD9\u7C7B",slug:"\u5E94\u7528\u7F51\u7AD9\u7C7B",children:[]},{level:2,title:"\u7CFB\u7EDF\u7C7B",slug:"\u7CFB\u7EDF\u7C7B",children:[]},{level:2,title:"GitHub \u4ED3\u5E93",slug:"github-\u4ED3\u5E93",children:[]},{level:2,title:"\u4F18\u79C0\u535A\u5BA2\u7C7B",slug:"\u4F18\u79C0\u535A\u5BA2\u7C7B",children:[]}],content:`---
title: \u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9
date: 2022-02-12 22:07:35
description: \u516C\u5171\u8D44\u6E90\u94FE\u63A5\uFF0C\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9
tag:
  - \u5176\u4ED6
category:
  - \u7F51\u7EDC\u8D44\u6E90
image: https://pic.netbian.com/uploads/allimg/211120/005250-1637340770973a.jpg
---

&emsp;\u672C\u680F\u76EE\u4E3B\u8981\u6536\u96C6\u4E86\u5404\u79CD\u7F51\u7EDC\u8D44\u6E90\u548C\u5728\u7EBF\u5DE5\u5177\u94FE\u63A5\uFF0C\u5305\u542B 4k \u9AD8\u6E05\u56FE\u7247,\u97F3\u4E50,\u7F8E\u6587\uFF0C\u7F51\u7AD9\u94FE\u63A5\u7B49\u8D44\u6E90\u94FE\u63A5\u4FE1\u606F,\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u65B9\u4FBF\u5FEB\u901F\u67E5\u8BE2\u67E5\u8BE2\uFF01\u{1F44D}

<!-- more -->

## \u5DE5\u5177\u7C7B

- [SCSS \u5728\u7EBF\u8F6C CSS](https://www.sassmeister.com/): \u5728\u7EBF Scss \u8F6C css \u7F51\u7AD9\u3002
- [Stylus \u5728\u7EBF\u8F6C CSS](https://www.cssportal.com/stylus-to-css/): \u5728\u7EBF Stylus \u8F6C css \u7F51\u7AD9\u3002
- [100 \u7D20\u6750\u7F51](http://www.100sucai.com/): \u5404\u79CD\u5728\u7EBF\u7D20\u6750\u8D44\u6E90\uFF0Ccss3 \u52A8\u753B\u7279\u6548\uFF0Cswiper \u5E7B\u706F\u7247\u4EE5\u53CA\u5404\u79CD\u524D\u7AEF\u7279\u6548\u6A21\u677F\u3002

## \u56FE\u7247\u7C7B

- [\u5F7C\u5CB8\u56FE\u7F51](https://pic.netbian.com/): 4k \u9AD8\u6E05\u7F8E\u5973,\u98CE\u666F\u8D44\u6E90\u7F51,\u6BCF\u65E5\u9650\u91CF\u514D\u8D39\u4E0B\u8F7D,\u4E5F\u53EF\u4EE5\u901A\u8FC7\u722C\u866B\u83B7\u53D6\uFF0C\u52A8\u6F2B\u8D85\u559C\u6B22,\u4F60\u503C\u5F97\u62E5\u6709! \u672C\u7AD9\u9996\u9875\u56FE\u7247\u6765\u6E90\u4E8E\u6B64\u7F51\u7AD9\u3002

## CSS \u7279\u6548

- [Flux Slider](https://www.joelambert.co.uk/flux/): Flux Slider \u4E00\u6B3E\u529F\u80FD\u5F3A\u5927\u7684\u56FE\u7247 2D \u6216 3D \u7279\u6548\u63D2\u4EF6

## \u5E94\u7528\u7F51\u7AD9\u7C7B

- [vite@2.x](https://vitejs.cn/): \u4E0B\u4E00\u4EE3\u524D\u7AEF\u5F00\u53D1\u4E0E\u6784\u5EFA\u5DE5\u5177 \u3002
- [vue@2.X](https://cn.vuejs.org/index.html): \u6E10\u8FDB\u5F0F JavaScript \u6846\u67B6\u3002
- [vue@3.X](https://v3.cn.vuejs.org/): \u6E10\u8FDB\u5F0F JavaScript \u6846\u67B6\u3002
- [ant-design-vue@3.X](https://next.antdv.com/docs/vue/introduce-cn/): \u5F00\u7BB1\u5373\u7528\u7684\u9AD8\u8D28\u91CF Vue \u7EC4\u4EF6\uFF0C\u5171\u4EAB Ant Design of React \u8BBE\u8BA1\u5DE5\u5177\u4F53\u7CFB\u3002
- [vuepress@1.X](https://v1.vuepress.vuejs.org/zh/): vuepress 1.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [vuepress@2.X](https://v2.vuepress.vuejs.org/zh/): vuepress 2.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [vuepress-theme-reco@1.X](https://vuepress-theme-reco.recoluan.com/): vuepress-theme-reco 1.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [vuepress-theme-reco@2.X](http://v2.vuepress-reco.recoluan.com//): vuepress-theme-reco 2.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [xicons](https://www.xicons.org/#/zh-CN/): \u524D\u7AEF SVG \u56FE\u6807\u7EC4\u4EF6\u5E93\uFF0C\u6574\u5408\u81EA fluentui-system-icons\u3001ionicons\u3001ant-design-icons\u3001material-design-icons\u3001Font-Awesome tabler-icons \u548C carbon \u7684 SVG Vue/React \u7EC4\u4EF6,\u63D0\u4F9B\u4E86\u4E00\u4E9B\u56FE\u6807\u5DE5\u5177\u7EC4\u4EF6\u6765\u81EA\u5B9A\u4E49\u56FE\u6807\u7684\u989C\u8272\u548C\u5C3A\u5BF8\u3002[\u56FE\u6807\u9884\u89C8\u7F51\u5740](https://www.xicons.org)\u548C[github \u4ED3\u5E93](https://github.com/07akioni/xicons/blob/main/README.zh-CN.md#%E5%AE%89%E8%A3%85)\u3002
- [markdown-it-emoji](https://github.com/markdown-it/markdown-it-emoji): \u4E00\u6B3E markdown \u6587\u4EF6\u8868\u60C5\u89E3\u6790\u63D2\u4EF6\u3002\u8BE6\u7EC6\u7528\u6CD5\u53C2\u8003[\u5B98\u7F51\u4ED3\u5E93](https://github.com/markdown-it/markdown-it-emoji)\u548C\u5E38\u7528\u7684[\u8868\u60C5\u5217\u8868](https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/full.json),\u7528\u6CD5\uFF1A\`:hear_no_evil:\`\uFF0C\u663E\u793A\uFF1A:hear_no_evil: \u3002
- [Valine](https://valine.js.org/quickstart.html): \u4E00\u6B3E\u65E0\u540E\u53F0\u8BC4\u8BBA\u63D2\u4EF6\u3002
- [gitalk](https://github.com/gitalk/gitalk/blob/master/readme-cn.md): \u4E00\u4E2A\u57FA\u4E8E GitHub Issue \u548C Preact \u5F00\u53D1\u7684\u65E0\u540E\u53F0\u8BC4\u8BBA\u63D2\u4EF6\u3002
- [typed.js](https://mattboldt.com/demos/typed-js/): \u4E00\u6B3E\u6587\u672C\u6253\u5370\u673A\u7279\u6548\u7684\u63D2\u4EF6\u3002
- [fontAwesome](https://fontawesome.com/): \u4E00\u5957\u7EDD\u4F73\u7684\u56FE\u6807\u5B57\u4F53\u5E93\u548C CSS \u6846\u67B6\u3002 [Vue](https://fontawesome.com/docs/web/use-with/vue/)\u4E2D\u4F7F\u7528\u65B9\u6CD5\uFF0C\u7F51\u7AD9\u8BBF\u95EE\u9700\u8981\u68AF\u5B50\u3002
- [vue-i18n-next](https://github.com/intlify/vue-i18n-next): \u4E00\u6B3E\u57FA\u4E8E vue3 \u7684 i18n \u63D2\u4EF6\u3002
- [\u5BA2\u6765\u56FE\u5E8A](https://img.itclan.cn/#/help):\u4E00\u4E2A\u56FE\u7247\u4E0A\u4F20\u5230 github \u56FE\u5E8A\u7684\u5DE5\u5177\u3002
- [IT \u8D44\u6E90\u7F51](https://itclan.cn/): IT \u8D44\u6E90\u7F51
- [\u7231\u5BA2\u6765\u535A\u5BA2](https://coder.itclan.cn/):\u4E00\u6B3E\u7EFC\u5408\u6027\u535A\u5BA2\u3002
- [TypeScript \u4E2D\u6587\u624B\u518C](https://bosens-china.github.io/Typescript-manual/): TypeScript \u4E2D\u6587\u624B\u518C
- [CSS Tricks](https://qishaoxuan.github.io/css_tricks/): \u4E00\u6B3E\u524D\u7AEF\u7279\u6548\u53CA\u5176 css \u6587\u6863\u3002
- [vuepress-theme-hope@2.X](https://vuepress-theme-hope.github.io/v2/zh/guide/): vuepress-theme-hope\u4E3B\u9898\u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002
- [vuepress-plugin-hope](https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html): vuepress-plugin-hope\u63D2\u4EF6\u5730\u5740\u3002
- [vuepress-theme-hope](https://mrhope.site/): vuepress-theme-home\u4E3B\u9898\u7F51\u7AD9\u793A\u4F8B\u5730\u5740\u3002

## \u7CFB\u7EDF\u7C7B

- [vbenAdmin](https://vvbin.cn/next/#/login): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\uFF0C[github](https://github.com/vbenjs/vue-vben-admin)\u4ED3\u5E93\u3002
- [Vue-Antd-Admin](https://iczer.gitee.io/vue-antd-admin/#/login): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002
- [jeecgBoot](http://boot3.jeecg.com/login?redirect=/dashboard/analysis): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002
- [vue-netx-admin](https://lyt-top.gitee.io/vue-next-admin-preview/#/login): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002
- [ant-design-pro](https://preview.pro.antdv.com/dashboard/workplace): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002
- [admin-pro](https://admin.makeit.vip/start): \u4E00\u6B3E\u57FA\u4E8E\`Vue3\`\u548C\`ant-design-vue 3\` \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002

## GitHub \u4ED3\u5E93

- [TypeScript \u4E2D\u6587\u624B\u518C](https://github.com/bosens-China/Typescript-manual): TypeScript \u4E2D\u6587\u624B\u518C\u4ED3\u5E93

## \u4F18\u79C0\u535A\u5BA2\u7C7B

\u6B64\u6A21\u5757\u6536\u96C6\u4E86\u4E00\u4E9B\u4F18\u79C0\u7684\u535A\u4E3B\u94FE\u63A5\uFF0C\u539F\u521B\u6587\u7AE0\u591A\uFF0C\u6D89\u53CA\u8303\u56F4\u5E7F\uFF0C\u53EF\u4EE5\u76F8\u4E92\u501F\u9274\u5B66\u4E60\u3002

::: cardList 3

\`\`\`yaml
- name: \u516E\u52A8\u4EBA
  avatar: https://avatar.csdnimg.cn/F/7/6/3_qq_41684621_1612151476.jpg
  desc: \u4E16\u95F4\u5473\u8DA3\u4EA6\u5982\u6B64\uFF0C\u4E07\u7269\u4E14\u53BB\u8F6E\u6D6E\u751F.
  link: https://xdr630.blog.csdn.net/?type=blog
  bgColor: 'rgb(165 216 243)'
  textColor: '#6854A1'
\`\`\`
`,contentRendered:`<p>\u2003\u672C\u680F\u76EE\u4E3B\u8981\u6536\u96C6\u4E86\u5404\u79CD\u7F51\u7EDC\u8D44\u6E90\u548C\u5728\u7EBF\u5DE5\u5177\u94FE\u63A5\uFF0C\u5305\u542B 4k \u9AD8\u6E05\u56FE\u7247,\u97F3\u4E50,\u7F8E\u6587\uFF0C\u7F51\u7AD9\u94FE\u63A5\u7B49\u8D44\u6E90\u94FE\u63A5\u4FE1\u606F,\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\u65B9\u4FBF\u5FEB\u901F\u67E5\u8BE2\u67E5\u8BE2\uFF01\u{1F44D}</p>
<!-- more -->
<h2 id="\u5DE5\u5177\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u5177\u7C7B" aria-hidden="true">#</a> \u5DE5\u5177\u7C7B</h2>
<ul>
<li><a href="https://www.sassmeister.com/" target="_blank" rel="noopener noreferrer">SCSS \u5728\u7EBF\u8F6C CSS<ExternalLinkIcon/></a>: \u5728\u7EBF Scss \u8F6C css \u7F51\u7AD9\u3002</li>
<li><a href="https://www.cssportal.com/stylus-to-css/" target="_blank" rel="noopener noreferrer">Stylus \u5728\u7EBF\u8F6C CSS<ExternalLinkIcon/></a>: \u5728\u7EBF Stylus \u8F6C css \u7F51\u7AD9\u3002</li>
<li><a href="http://www.100sucai.com/" target="_blank" rel="noopener noreferrer">100 \u7D20\u6750\u7F51<ExternalLinkIcon/></a>: \u5404\u79CD\u5728\u7EBF\u7D20\u6750\u8D44\u6E90\uFF0Ccss3 \u52A8\u753B\u7279\u6548\uFF0Cswiper \u5E7B\u706F\u7247\u4EE5\u53CA\u5404\u79CD\u524D\u7AEF\u7279\u6548\u6A21\u677F\u3002</li>
</ul>
<h2 id="\u56FE\u7247\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u56FE\u7247\u7C7B" aria-hidden="true">#</a> \u56FE\u7247\u7C7B</h2>
<ul>
<li><a href="https://pic.netbian.com/" target="_blank" rel="noopener noreferrer">\u5F7C\u5CB8\u56FE\u7F51<ExternalLinkIcon/></a>: 4k \u9AD8\u6E05\u7F8E\u5973,\u98CE\u666F\u8D44\u6E90\u7F51,\u6BCF\u65E5\u9650\u91CF\u514D\u8D39\u4E0B\u8F7D,\u4E5F\u53EF\u4EE5\u901A\u8FC7\u722C\u866B\u83B7\u53D6\uFF0C\u52A8\u6F2B\u8D85\u559C\u6B22,\u4F60\u503C\u5F97\u62E5\u6709! \u672C\u7AD9\u9996\u9875\u56FE\u7247\u6765\u6E90\u4E8E\u6B64\u7F51\u7AD9\u3002</li>
</ul>
<h2 id="css-\u7279\u6548" tabindex="-1"><a class="header-anchor" href="#css-\u7279\u6548" aria-hidden="true">#</a> CSS \u7279\u6548</h2>
<ul>
<li><a href="https://www.joelambert.co.uk/flux/" target="_blank" rel="noopener noreferrer">Flux Slider<ExternalLinkIcon/></a>: Flux Slider \u4E00\u6B3E\u529F\u80FD\u5F3A\u5927\u7684\u56FE\u7247 2D \u6216 3D \u7279\u6548\u63D2\u4EF6</li>
</ul>
<h2 id="\u5E94\u7528\u7F51\u7AD9\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u7F51\u7AD9\u7C7B" aria-hidden="true">#</a> \u5E94\u7528\u7F51\u7AD9\u7C7B</h2>
<ul>
<li><a href="https://vitejs.cn/" target="_blank" rel="noopener noreferrer">vite@2.x<ExternalLinkIcon/></a>: \u4E0B\u4E00\u4EE3\u524D\u7AEF\u5F00\u53D1\u4E0E\u6784\u5EFA\u5DE5\u5177 \u3002</li>
<li><a href="https://cn.vuejs.org/index.html" target="_blank" rel="noopener noreferrer">vue@2.X<ExternalLinkIcon/></a>: \u6E10\u8FDB\u5F0F JavaScript \u6846\u67B6\u3002</li>
<li><a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer">vue@3.X<ExternalLinkIcon/></a>: \u6E10\u8FDB\u5F0F JavaScript \u6846\u67B6\u3002</li>
<li><a href="https://next.antdv.com/docs/vue/introduce-cn/" target="_blank" rel="noopener noreferrer">ant-design-vue@3.X<ExternalLinkIcon/></a>: \u5F00\u7BB1\u5373\u7528\u7684\u9AD8\u8D28\u91CF Vue \u7EC4\u4EF6\uFF0C\u5171\u4EAB Ant Design of React \u8BBE\u8BA1\u5DE5\u5177\u4F53\u7CFB\u3002</li>
<li><a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vuepress@1.X<ExternalLinkIcon/></a>: vuepress 1.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="https://v2.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vuepress@2.X<ExternalLinkIcon/></a>: vuepress 2.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">vuepress-theme-reco@1.X<ExternalLinkIcon/></a>: vuepress-theme-reco 1.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="http://v2.vuepress-reco.recoluan.com//" target="_blank" rel="noopener noreferrer">vuepress-theme-reco@2.X<ExternalLinkIcon/></a>: vuepress-theme-reco 2.X \u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="https://www.xicons.org/#/zh-CN/" target="_blank" rel="noopener noreferrer">xicons<ExternalLinkIcon/></a>: \u524D\u7AEF SVG \u56FE\u6807\u7EC4\u4EF6\u5E93\uFF0C\u6574\u5408\u81EA fluentui-system-icons\u3001ionicons\u3001ant-design-icons\u3001material-design-icons\u3001Font-Awesome tabler-icons \u548C carbon \u7684 SVG Vue/React \u7EC4\u4EF6,\u63D0\u4F9B\u4E86\u4E00\u4E9B\u56FE\u6807\u5DE5\u5177\u7EC4\u4EF6\u6765\u81EA\u5B9A\u4E49\u56FE\u6807\u7684\u989C\u8272\u548C\u5C3A\u5BF8\u3002<a href="https://www.xicons.org" target="_blank" rel="noopener noreferrer">\u56FE\u6807\u9884\u89C8\u7F51\u5740<ExternalLinkIcon/></a>\u548C<a href="https://github.com/07akioni/xicons/blob/main/README.zh-CN.md#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer">github \u4ED3\u5E93<ExternalLinkIcon/></a>\u3002</li>
<li><a href="https://github.com/markdown-it/markdown-it-emoji" target="_blank" rel="noopener noreferrer">markdown-it-emoji<ExternalLinkIcon/></a>: \u4E00\u6B3E markdown \u6587\u4EF6\u8868\u60C5\u89E3\u6790\u63D2\u4EF6\u3002\u8BE6\u7EC6\u7528\u6CD5\u53C2\u8003<a href="https://github.com/markdown-it/markdown-it-emoji" target="_blank" rel="noopener noreferrer">\u5B98\u7F51\u4ED3\u5E93<ExternalLinkIcon/></a>\u548C\u5E38\u7528\u7684<a href="https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/full.json" target="_blank" rel="noopener noreferrer">\u8868\u60C5\u5217\u8868<ExternalLinkIcon/></a>,\u7528\u6CD5\uFF1A<code v-pre>:hear_no_evil:</code>\uFF0C\u663E\u793A\uFF1A\u{1F649} \u3002</li>
<li><a href="https://valine.js.org/quickstart.html" target="_blank" rel="noopener noreferrer">Valine<ExternalLinkIcon/></a>: \u4E00\u6B3E\u65E0\u540E\u53F0\u8BC4\u8BBA\u63D2\u4EF6\u3002</li>
<li><a href="https://github.com/gitalk/gitalk/blob/master/readme-cn.md" target="_blank" rel="noopener noreferrer">gitalk<ExternalLinkIcon/></a>: \u4E00\u4E2A\u57FA\u4E8E GitHub Issue \u548C Preact \u5F00\u53D1\u7684\u65E0\u540E\u53F0\u8BC4\u8BBA\u63D2\u4EF6\u3002</li>
<li><a href="https://mattboldt.com/demos/typed-js/" target="_blank" rel="noopener noreferrer">typed.js<ExternalLinkIcon/></a>: \u4E00\u6B3E\u6587\u672C\u6253\u5370\u673A\u7279\u6548\u7684\u63D2\u4EF6\u3002</li>
<li><a href="https://fontawesome.com/" target="_blank" rel="noopener noreferrer">fontAwesome<ExternalLinkIcon/></a>: \u4E00\u5957\u7EDD\u4F73\u7684\u56FE\u6807\u5B57\u4F53\u5E93\u548C CSS \u6846\u67B6\u3002 <a href="https://fontawesome.com/docs/web/use-with/vue/" target="_blank" rel="noopener noreferrer">Vue<ExternalLinkIcon/></a>\u4E2D\u4F7F\u7528\u65B9\u6CD5\uFF0C\u7F51\u7AD9\u8BBF\u95EE\u9700\u8981\u68AF\u5B50\u3002</li>
<li><a href="https://github.com/intlify/vue-i18n-next" target="_blank" rel="noopener noreferrer">vue-i18n-next<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E vue3 \u7684 i18n \u63D2\u4EF6\u3002</li>
<li><a href="https://img.itclan.cn/#/help" target="_blank" rel="noopener noreferrer">\u5BA2\u6765\u56FE\u5E8A<ExternalLinkIcon/></a>:\u4E00\u4E2A\u56FE\u7247\u4E0A\u4F20\u5230 github \u56FE\u5E8A\u7684\u5DE5\u5177\u3002</li>
<li><a href="https://itclan.cn/" target="_blank" rel="noopener noreferrer">IT \u8D44\u6E90\u7F51<ExternalLinkIcon/></a>: IT \u8D44\u6E90\u7F51</li>
<li><a href="https://coder.itclan.cn/" target="_blank" rel="noopener noreferrer">\u7231\u5BA2\u6765\u535A\u5BA2<ExternalLinkIcon/></a>:\u4E00\u6B3E\u7EFC\u5408\u6027\u535A\u5BA2\u3002</li>
<li><a href="https://bosens-china.github.io/Typescript-manual/" target="_blank" rel="noopener noreferrer">TypeScript \u4E2D\u6587\u624B\u518C<ExternalLinkIcon/></a>: TypeScript \u4E2D\u6587\u624B\u518C</li>
<li><a href="https://qishaoxuan.github.io/css_tricks/" target="_blank" rel="noopener noreferrer">CSS Tricks<ExternalLinkIcon/></a>: \u4E00\u6B3E\u524D\u7AEF\u7279\u6548\u53CA\u5176 css \u6587\u6863\u3002</li>
<li><a href="https://vuepress-theme-hope.github.io/v2/zh/guide/" target="_blank" rel="noopener noreferrer">vuepress-theme-hope@2.X<ExternalLinkIcon/></a>: vuepress-theme-hope\u4E3B\u9898\u4E2D\u6587\u5B98\u7F51\u5730\u5740\u3002</li>
<li><a href="https://vuepress-theme-hope.github.io/v2/zh/config/plugins/intro.html" target="_blank" rel="noopener noreferrer">vuepress-plugin-hope<ExternalLinkIcon/></a>: vuepress-plugin-hope\u63D2\u4EF6\u5730\u5740\u3002</li>
<li><a href="https://mrhope.site/" target="_blank" rel="noopener noreferrer">vuepress-theme-hope<ExternalLinkIcon/></a>: vuepress-theme-home\u4E3B\u9898\u7F51\u7AD9\u793A\u4F8B\u5730\u5740\u3002</li>
</ul>
<h2 id="\u7CFB\u7EDF\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u7CFB\u7EDF\u7C7B" aria-hidden="true">#</a> \u7CFB\u7EDF\u7C7B</h2>
<ul>
<li><a href="https://vvbin.cn/next/#/login" target="_blank" rel="noopener noreferrer">vbenAdmin<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\uFF0C<a href="https://github.com/vbenjs/vue-vben-admin" target="_blank" rel="noopener noreferrer">github<ExternalLinkIcon/></a>\u4ED3\u5E93\u3002</li>
<li><a href="https://iczer.gitee.io/vue-antd-admin/#/login" target="_blank" rel="noopener noreferrer">Vue-Antd-Admin<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
<li><a href="http://boot3.jeecg.com/login?redirect=/dashboard/analysis" target="_blank" rel="noopener noreferrer">jeecgBoot<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
<li><a href="https://lyt-top.gitee.io/vue-next-admin-preview/#/login" target="_blank" rel="noopener noreferrer">vue-netx-admin<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
<li><a href="https://preview.pro.antdv.com/dashboard/workplace" target="_blank" rel="noopener noreferrer">ant-design-pro<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
<li><a href="https://admin.makeit.vip/start" target="_blank" rel="noopener noreferrer">admin-pro<ExternalLinkIcon/></a>: \u4E00\u6B3E\u57FA\u4E8E<code v-pre>Vue3</code>\u548C<code v-pre>ant-design-vue 3</code> \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF\u3002</li>
</ul>
<h2 id="github-\u4ED3\u5E93" tabindex="-1"><a class="header-anchor" href="#github-\u4ED3\u5E93" aria-hidden="true">#</a> GitHub \u4ED3\u5E93</h2>
<ul>
<li><a href="https://github.com/bosens-China/Typescript-manual" target="_blank" rel="noopener noreferrer">TypeScript \u4E2D\u6587\u624B\u518C<ExternalLinkIcon/></a>: TypeScript \u4E2D\u6587\u624B\u518C\u4ED3\u5E93</li>
</ul>
<h2 id="\u4F18\u79C0\u535A\u5BA2\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u4F18\u79C0\u535A\u5BA2\u7C7B" aria-hidden="true">#</a> \u4F18\u79C0\u535A\u5BA2\u7C7B</h2>
<p>\u6B64\u6A21\u5757\u6536\u96C6\u4E86\u4E00\u4E9B\u4F18\u79C0\u7684\u535A\u4E3B\u94FE\u63A5\uFF0C\u539F\u521B\u6587\u7AE0\u591A\uFF0C\u6D89\u53CA\u8303\u56F4\u5E7F\uFF0C\u53EF\u4EE5\u76F8\u4E92\u501F\u9274\u5B66\u4E60\u3002</p>
<div class="cardListContainer"><div class="card-list">
        <a href="https://xdr630.blog.csdn.net/?type=blog" target="_blank" class="card-item row-3"
          style="background-color:rgb(165 216 243);color:#6854A1;"
        >
          <img src="https://avatar.csdnimg.cn/F/7/6/3_qq_41684621_1612151476.jpg" class="no-zoom">
          <div>
            <p class="name">\u516E\u52A8\u4EBA</p>
            <p class="desc">\u4E16\u95F4\u5473\u8DA3\u4EA6\u5982\u6B64\uFF0C\u4E07\u7269\u4E14\u53BB\u8F6E\u6D6E\u751F.</p>
          </div>
        </a>
      </div><div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> \u516E\u52A8\u4EBA
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//avatar.csdnimg.cn/F/7/6/3_qq_41684621_1612151476.jpg
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> \u4E16\u95F4\u5473\u8DA3\u4EA6\u5982\u6B64\uFF0C\u4E07\u7269\u4E14\u53BB\u8F6E\u6D6E\u751F.
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xdr630.blog.csdn.net/<span class="token punctuation">?</span>type=blog
  <span class="token key atrule">bgColor</span><span class="token punctuation">:</span> <span class="token string">'rgb(165 216 243)'</span>
  <span class="token key atrule">textColor</span><span class="token punctuation">:</span> <span class="token string">'#6854A1'</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,date:"2022-02-12",deps:[],links:[],pathInferred:"/posts/other/internetResource.html",pathLocale:"/",permalink:null,routeMeta:{title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"},sfcBlocks:[],slug:"internetResource",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/internetResource.md",filePathRelative:"posts/other/internetResource.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/internetResource.html.vue",componentFilePathRelative:"pages/posts/other/internetResource.html.vue",componentFileChunkName:"v-a60cbc14",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/internetResource.html.js",dataFilePathRelative:"pages/posts/other/internetResource.html.js",dataFileChunkName:"v-a60cbc14",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/internetResource.html",htmlFilePathRelative:"posts/other/internetResource.html"},title:"\u5DE5\u5177\u8D44\u6E90\u7F51\u7AD9"},["/posts/other/internetResource","/posts/other/internetResource.md"]],["v-351c6704","/posts/other/walineServer.html",{_blog:{data:{key:"v-351c6704",path:"/posts/other/walineServer.html",title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848",lang:"zh-CN",frontmatter:{title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848",date:"2022-08-23T15:30:27.000Z",description:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002",lang:"zh-CN",tag:["waline"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208311312129.png",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/walineServer.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848"}],["meta",{property:"og:description",content:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"waline"}],["meta",{property:"article:published_time",content:"2022-08-23T15:30:27.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003waline \u662F\u4E00\u6B3E\u7B80\u6D01\u3001\u5B89\u5168\u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u8BE5\u7CFB\u7EDF\u5305\u542B\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\uFF0C\u5C5E\u4E8E valine \u7684\u884D\u751F\u7248\u672C\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86 valine \u9605\u8BFB\u6570\u636E\u7BE1\u6539\uFF0CXSS \u5B89\u5168\uFF0C\u7528\u6237\u9690\u79C1\u6CC4\u9732\u7B49\u6570\u636E\u5B89\u5168\u95EE\u9898\u3002waline \u4E0D\u4EC5\u5177\u6709 valine \u529F\u80FD\uFF0C\u8FD8\u63D0\u4F9B\u4E86\u90AE\u4EF6\u901A\u77E5\u3001\u5FAE\u4FE1\u901A\u77E5\u3001\u8BC4\u8BBA\u540E\u53F0\u7BA1\u7406\u3001LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL \u591A\u5B58\u50A8\u670D\u52A1\u652F\u6301\u7B49\u8BF8\u591A\u7279\u6027\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0CWaline \u9ED8\u8BA4\u4F7F\u7528 Vercel \u90E8\u7F72\uFF0C\u5B9E\u73B0\u5B8C\u5168\u514D\u8D39\u90E8\u7F72\uFF01\u672C\u6587\u7740\u91CD\u8BB0\u5F55 waline \u670D\u52A1\u5668\u72EC\u7ACB\u90E8\u7F72\u7684\u8FC7\u7A0B\u3002</p>
`,headers:[{level:2,title:"\u7B80\u8FF0",slug:"\u7B80\u8FF0",children:[]},{level:2,title:"\u51C6\u5907\u5DE5\u4F5C",slug:"\u51C6\u5907\u5DE5\u4F5C",children:[{level:3,title:"\u73AF\u5883\u53D8\u91CF\u914D\u7F6E",slug:"\u73AF\u5883\u53D8\u91CF\u914D\u7F6E",children:[{level:4,title:"\u65B9\u5F0F\u4E00\uFF1A",slug:"\u65B9\u5F0F\u4E00",children:[]},{level:4,title:"\u65B9\u6848\u4E8C\uFF1A",slug:"\u65B9\u6848\u4E8C",children:[]}]},{level:3,title:"\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E",slug:"\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E",children:[]},{level:3,title:"\u670D\u52A1\u5668\u90E8\u7F72",slug:"\u670D\u52A1\u5668\u90E8\u7F72",children:[]}]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/other/walineServer.md",readingTime:{minutes:6.05,words:1815},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/other/walineServer.html`},key:"v-351c6704",path:"/posts/other/walineServer.html",title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848",lang:"zh-CN",frontmatter:{title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848",date:"2022-08-23T15:30:27.000Z",description:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002",lang:"zh-CN",tag:["waline"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208311312129.png",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/other/walineServer.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848"}],["meta",{property:"og:description",content:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"waline"}],["meta",{property:"article:published_time",content:"2022-08-23T15:30:27.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003waline \u662F\u4E00\u6B3E\u7B80\u6D01\u3001\u5B89\u5168\u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u8BE5\u7CFB\u7EDF\u5305\u542B\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\uFF0C\u5C5E\u4E8E valine \u7684\u884D\u751F\u7248\u672C\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86 valine \u9605\u8BFB\u6570\u636E\u7BE1\u6539\uFF0CXSS \u5B89\u5168\uFF0C\u7528\u6237\u9690\u79C1\u6CC4\u9732\u7B49\u6570\u636E\u5B89\u5168\u95EE\u9898\u3002waline \u4E0D\u4EC5\u5177\u6709 valine \u529F\u80FD\uFF0C\u8FD8\u63D0\u4F9B\u4E86\u90AE\u4EF6\u901A\u77E5\u3001\u5FAE\u4FE1\u901A\u77E5\u3001\u8BC4\u8BBA\u540E\u53F0\u7BA1\u7406\u3001LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL \u591A\u5B58\u50A8\u670D\u52A1\u652F\u6301\u7B49\u8BF8\u591A\u7279\u6027\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0CWaline \u9ED8\u8BA4\u4F7F\u7528 Vercel \u90E8\u7F72\uFF0C\u5B9E\u73B0\u5B8C\u5168\u514D\u8D39\u90E8\u7F72\uFF01\u672C\u6587\u7740\u91CD\u8BB0\u5F55 waline \u670D\u52A1\u5668\u72EC\u7ACB\u90E8\u7F72\u7684\u8FC7\u7A0B\u3002</p>
`,headers:[{level:2,title:"\u7B80\u8FF0",slug:"\u7B80\u8FF0",children:[]},{level:2,title:"\u51C6\u5907\u5DE5\u4F5C",slug:"\u51C6\u5907\u5DE5\u4F5C",children:[{level:3,title:"\u73AF\u5883\u53D8\u91CF\u914D\u7F6E",slug:"\u73AF\u5883\u53D8\u91CF\u914D\u7F6E",children:[{level:4,title:"\u65B9\u5F0F\u4E00\uFF1A",slug:"\u65B9\u5F0F\u4E00",children:[]},{level:4,title:"\u65B9\u6848\u4E8C\uFF1A",slug:"\u65B9\u6848\u4E8C",children:[]}]},{level:3,title:"\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E",slug:"\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E",children:[]},{level:3,title:"\u670D\u52A1\u5668\u90E8\u7F72",slug:"\u670D\u52A1\u5668\u90E8\u7F72",children:[]}]}],content:`---
title: Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848
date: 2022-8-23 15:30:27
description: Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848\u3002
lang: zh-CN
tag:
  - waline
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202208311312129.png
---

&emsp;waline \u662F\u4E00\u6B3E\u7B80\u6D01\u3001\u5B89\u5168\u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u8BE5\u7CFB\u7EDF\u5305\u542B\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\uFF0C\u5C5E\u4E8E valine \u7684\u884D\u751F\u7248\u672C\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86 valine \u9605\u8BFB\u6570\u636E\u7BE1\u6539\uFF0CXSS \u5B89\u5168\uFF0C\u7528\u6237\u9690\u79C1\u6CC4\u9732\u7B49\u6570\u636E\u5B89\u5168\u95EE\u9898\u3002waline \u4E0D\u4EC5\u5177\u6709 valine \u529F\u80FD\uFF0C\u8FD8\u63D0\u4F9B\u4E86\u90AE\u4EF6\u901A\u77E5\u3001\u5FAE\u4FE1\u901A\u77E5\u3001\u8BC4\u8BBA\u540E\u53F0\u7BA1\u7406\u3001LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL \u591A\u5B58\u50A8\u670D\u52A1\u652F\u6301\u7B49\u8BF8\u591A\u7279\u6027\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0CWaline \u9ED8\u8BA4\u4F7F\u7528 Vercel \u90E8\u7F72\uFF0C\u5B9E\u73B0\u5B8C\u5168\u514D\u8D39\u90E8\u7F72\uFF01\u672C\u6587\u7740\u91CD\u8BB0\u5F55 waline \u670D\u52A1\u5668\u72EC\u7ACB\u90E8\u7F72\u7684\u8FC7\u7A0B\u3002

<!-- more -->

## \u7B80\u8FF0

&emsp;waline \u4F5C\u4E3A valine \u7684\u52A0\u5F3A\u7248\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u652F\u6301\u591A\u79CD\u6570\u636E\u5E93\u548C\u81EA\u5B9A\u4E49\u6570\u636E\u5E93\u6A21\u5F0F\uFF0C\u6570\u636E\u5B58\u50A8\u66F4\u52A0\u5B89\u5168\u3002waline \u9ED8\u8BA4\u6570\u636E\u5E93:[LeanCloud](https://console.leancloud.app/login)\uFF0C\`LeanCloud\`\u6709[\u56FD\u5185\u7248](https://console.leancloud.cn/login?from=%2Fapps)\u548C[\u56FD\u9645\u7248](https://console.leancloud.app/login?from=%2Fapps)2 \u4E2A\u7248\u672C\uFF0C\u56FD\u5185\u7248\u9700\u8981\u914D\u7F6E\u81EA\u5B9A\u4E49\u57DF\u540D\uFF0C\u56FD\u9645\u7248\u8BBF\u95EE\u5B58\u5728\u5F88\u9AD8\u5EF6\u8FDF\uFF0C\u5982\u679C\u4E0D\u8003\u8651\u6570\u636E\u5B89\u5168\u6027\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\`leancloud\`\u6570\u636E\u5E93\u3002\u9ED8\u8BA4\u90E8\u7F72\u65B9\u6848\uFF1A[Vercel](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample)\uFF0C\`Vercel\`\u662F\u4E00\u79CD\u514D\u8D39\u7684\u90E8\u7F72\u65B9\u6848\uFF0C\u90E8\u7F72\u4E5F\u6BD4\u8F83\u7B80\u5355\uFF0C\u6CE8\u518C\u767B\u5F55\u540E\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u6253\u5305\u7F16\u8BD1\u5373\u53EF(\u4F9D\u8D56 github \u4ED3\u5E93)\uFF0C\u4F46\u6700\u8FD1\`vercel\`\u597D\u50CF\u6302\u4E86\uFF0C\u6CA1\u6709\u68AF\u5B50\u6839\u672C\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u6240\u6709\u535A\u4E3B\u653E\u5F03\u4E86\u9ED8\u8BA4\u90E8\u7F72\u65B9\u5F0F\uFF0C\u91C7\u7528\`waline\`\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u65B9\u6848\u3002\u66F4\u591A\u5176\u4ED6\u90E8\u7F72\u65B9\u6848\uFF0C\u8BF7\u53C2\u8003[waline \u5B98\u7F51](https://waline.js.org/)\u3002

:::warning
\`waline\`\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u9700\u8981\u5177\u5907\u4EE5\u4E0B\u6761\u4EF6\uFF1A

1\u3001\u4E00\u53F0\u4E91\u670D\u52A1\u5668\u548C\u5B89\u88C5\u597D\u7684\u6570\u636E\u5E93(\u4F8B\u5982\uFF1AMySQL)\uFF0C\u5176\u4ED6\u6570\u636E\u5E93\u53C2\u8003[\u591A\u6570\u636E\u6E90\u53C2\u8003](https://waline.js.org/guide/server/databases.html)\u3002

2\u3001\`Nodejs\`\u73AF\u5883\u5B89\u88C5\u914D\u7F6E\uFF0C\u9879\u76EE\u90E8\u7F72\u4F9D\u8D56 Node \u73AF\u5883\uFF0C\u9700\u8981\u63D0\u524D\u5B89\u88C5\u597D\u73AF\u5883\u3002
:::

## \u51C6\u5907\u5DE5\u4F5C

&emsp;\`waline\`\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u5F88\u7B80\u5355\uFF0C\u53EF\u4EE5\u53C2\u8003[waline \u5B98\u7F51](https://waline.js.org/guide/server/vps-deploy.html)\u72EC\u7ACB\u90E8\u7F72\uFF0C\u5B98\u7F51\u63CF\u8FF0\u6BD4\u8F83\u7B80\u5355\uFF0C\u4EC5\u4F9B\u53C2\u8003\u3002\u672C\u6587\u72EC\u7ACB\u90E8\u7F72\u53EA\u9700\u8981 3 \u5927\u6B65\u9AA4\uFF1A\`\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\`\uFF0C\`\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E\`\u548C\`\u670D\u52A1\u5668\u90E8\u7F72\`\u3002\u4E0B\u9762\u8BB2\u8FF0\u5177\u4F53\u5B9E\u73B0\u65B9\u5F0F\u3002

### \u73AF\u5883\u53D8\u91CF\u914D\u7F6E

&emsp;\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u6307\uFF1A\u914D\u7F6E\`waline\`\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\u3002\`waline\`\u91C7\u7528\u73AF\u5883\u53D8\u91CF\u7684\u65B9\u5F0F\u8BFB\u53D6\u914D\u7F6E\u4FE1\u606F\uFF0C\u5185\u7F6E\u4E86\u591A\u79CD\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\uFF0C\u5177\u4F53\u53C2\u8003[\u591A\u6570\u636E\u6E90\u73AF\u5883\u53D8\u91CF](https://waline.js.org/guide/server/databases.html)\u3002\u6211\u4EEC\u53EA\u9700\u8981\u6309\u7167\u5185\u7F6E\u914D\u7F6E\u9879\u8FDB\u884C\u914D\u7F6E\uFF0C\u5C31\u53EF\u4EE5\u66F4\u6362\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u3002\u4E0B\u9762\u4EE5\`MySQL\`\u4E3A\u4F8B\uFF0C\u4F7F\u7528\u65F6\u8BF7\u5148\u5BFC\u5165 [waline.sql](https://github.com/walinejs/waline/blob/main/assets/waline.sql) \u4EE5\u5B8C\u6210\u8868\u548C\u8868\u7ED3\u6784\u7684\u521B\u5EFA\uFF0C\u4E4B\u540E\u5728\u9879\u76EE\u4E2D\u914D\u7F6E\u5982\u4E0B\u73AF\u5883\u53D8\u91CF\uFF1A
| \u73AF\u5883\u53D8\u91CF\u540D\u79F0 | \u5FC5\u586B | \u9ED8\u8BA4\u503C | \u5907\u6CE8 |
| ---------------- | ---- | --------- | ----------------------------- |
| MYSQL*HOST | | 127.0.0.1 | MySQL \u670D\u52A1\u7684\u5730\u5740 |
| MYSQL_PORT | | 3306 | MySQL \u670D\u52A1\u7684\u7AEF\u53E3 |
| MYSQL_DB | \u2705 | | MySQL \u6570\u636E\u5E93\u5E93\u540D |
| MYSQL_USER | \u2705 | | MySQL \u6570\u636E\u5E93\u7684\u7528\u6237\u540D |
| MYSQL_PASSWORD | \u2705 | | MySQL \u6570\u636E\u5E93\u7684\u5BC6\u7801 |
| MYSQL_PREFIX | | wl* | MySQL \u6570\u636E\u8868\u7684\u8868\u524D\u7F00 |
| MYSQL_CHARSET | | utf8mb4 | MySQL \u6570\u636E\u8868\u7684\u5B57\u7B26\u96C6 |
| MYSQL_SSL | | | \u662F\u5426\u4F7F\u7528 SSL MYSQL \u8FDE\u63A5\u6570\u636E\u5E93 |

&emsp;\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u53EF\u4EE5\u53EA\u914D\u7F6E\u5FC5\u586B\u9879\uFF0C\u5176\u4ED6\u9009\u9879\u91C7\u7528\u9ED8\u8BA4\u503C\u5373\u53EF\u3002\u5176\u4ED6\u6570\u636E\u5E93\u914D\u7F6E\u4E5F\u4E00\u6837\uFF0C\u53EA\u662F\u914D\u7F6E\u9879\u5B58\u5728\u5DEE\u5F02\u800C\u5DF2\uFF0C\u5F88\u7B80\u5355\u3002\u73AF\u5883\u53D8\u91CF\u4F7F\u7528\u6709\u4EE5\u4E0B 2 \u79CD\u65B9\u5F0F\uFF1A

#### \u65B9\u5F0F\u4E00\uFF1A

&emsp;\u5982\u679C\u4F60\u7684\u670D\u52A1\u5668\u662F linux \u64CD\u4F5C\u7CFB\u7EDF\u7684\u8BDD\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539\u5C5E\u4E3B\u76EE\u5F55\u4E0B\u7684.bashrc \u6587\u4EF6\uFF0C\u5E76\u5199\u5165\u4EE5\u4E0B\u5185\u5BB9\uFF1A

\`\`\`bash
export MYSQL_HOST=12.12.12.12
export MYSQL_PORT=3306
export MYSQL_DB=waline
#\u4EE5\u8FD9\u4E09\u4E2A\u4E3A\u4F8B\uFF0C\u66F4\u591A\u8BF7\u5BF9\u7167\u53C2\u6570\u8868\u4E00\u4E00\u586B\u5199\u5373\u53EF
\`\`\`

&emsp;\u586B\u5199\u5B8C\u6210\u540E\u4FDD\u5B58\u6587\u4EF6\u5E76\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u5237\u65B0\uFF1A

\`\`\`bash
source ~/.bashrc
\`\`\`

&emsp;\u8BE5\u65B9\u6CD5\u662F\u76F4\u63A5\u5BFC\u51FA\u7CFB\u7EDF\u7EA7\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u4F7F\`waline\` \u670D\u52A1\u7AEF\u53EF\u4EE5\u4ECE\`process.env\`\u5BF9\u8C61\u4E2D\u987A\u5229\u8BFB\u53D6\u5230\uFF0C\u800C\u8FD9\u6837\u5B9A\u4E49\u7684\u5168\u5C40\u73AF\u5883\u53D8\u91CF\u5B58\u5728\u4E00\u4E2A\u5F0A\u7AEF\uFF0C\u5C31\u662F\u4F1A\u6C61\u67D3\u5230\u5168\u5C40\uFF0C\u53EF\u80FD\u4F1A\u5E72\u9884\u5230\u5176\u4ED6\u9879\u76EE\uFF0C\u800C\u4E14 windows \u4E0E linux \u7684\u914D\u7F6E\u65B9\u6CD5\u5404\u4E0D\u76F8\u540C\u3002\u6240\u4EE5\u8FD9\u91CC\u5E76\u4E0D\u63A8\u8350\uFF0C\u800C\u662F\u66F4\u63A8\u8350\u4F7F\u7528\u65B9\u6848\u4E8C

#### \u65B9\u6848\u4E8C\uFF1A

&emsp;\u6211\u4EEC\u9700\u8981\u4E86\u89E3\u7684\u662F\uFF0C\u5728\`nodejs\` \u4E2D\uFF0C\u901A\u8FC7 \`process.env\` \u5BF9\u8C61\u53EF\u4EE5\u62FF\u5230\u5168\u5C40\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u800C\u6709\u8FD9\u4E48\u4E00\u4E2A\u7B2C\u4E09\u65B9\u5E93\uFF0C\u53EF\u4EE5\u505A\u5230\u65E2\u4E0D\u6C61\u67D3\u5168\u5C40\u73AF\u5883\u53D8\u91CF\uFF0C\u4E5F\u80FD\u5B9E\u73B0\u4EE3\u7801\u4E0E\u914D\u7F6E\u5206\u5F00\u7BA1\u7406\uFF1Adotenv\u3002\u8BE5\u5E93\u652F\u6301\u5C06\u73AF\u5883\u53D8\u91CF\u5199\u5165\u5230\u4E00\u4E2A\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u7684.env \u6587\u4EF6\u4E2D\uFF0C\u5E76\u5728\u4EE3\u7801\u4E2D\u901A\u8FC7\`dotenv.config()\`\u65B9\u6CD5\u5C06\u53D8\u91CF\u5408\u5E76\u81F3\`process.env\`\u5BF9\u8C61\u4E2D\uFF0C\u6BCF\u4E2A\u9879\u76EE\u7684.env \u6587\u4EF6\u90FD\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u4F5C\u7528\u57DF\uFF0C\u5728\u9879\u76EE\u7ED3\u675F\u8FD0\u884C\u65F6\uFF0C\`.env \`\u6587\u4EF6\u4E2D\u7684\u5168\u5C40\u53D8\u91CF\u5C06\u88AB\u9500\u6BC1\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u7F16\u5199\u4E00\u4E2A javascript \u811A\u672C\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u8C03\u7528\`dotenv.config()\`\u65B9\u6CD5\u5199\u5165\u5168\u5C40\u53D8\u91CF\uFF0C\u4E4B\u540E\u5F15\u5165\u5E76\u6267\u884C\`@waline/vercel/vanilla.js\` \u8FD9\u4E2A\u6587\u4EF6\u5373\u53EF\u3002

### \u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E

&emsp;\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E\uFF1A\u6784\u5EFA\u9879\u76EE\u76EE\u5F55\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5728\u670D\u52A1\u5668\u4E2D\u642D\u5EFA\uFF0C\u4E5F\u53EF\u4EE5\u5728\u672C\u5730\u521B\u5EFA\u597D\u9879\u76EE\uFF0C\u518D\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u3002\u4E0B\u9762\u8BB2\u8FF0\u672C\u5730\u9879\u76EE\u6784\u5EFA\u65B9\u5F0F\uFF0C\u9879\u76EE\u540D\u79F0\u4E3A\uFF1A\`waline-server\`\u4E3A\u4F8B\u3002

- \u521B\u5EFA\u9879\u76EE\u76EE\u5F55

\`\`\`bash
mkdir waline-server
\`\`\`

- \u521D\u59CB\u5316\u9879\u76EE

\`\`\`bash
npm init -y
\`\`\`

- \u5B89\u88C5\u4F9D\u8D56

\`\`\`bash
# dotenv\u73AF\u5883\u53D8\u91CF\u4F9D\u8D56
npm install dotenv
# waline \u670D\u52A1\u5668\u7AEF\u4F9D\u8D56
npm install @waline/vercel

\`\`\`

- \u521B\u5EFA\u73AF\u5883\u53D8\u91CF\`.env\`\u6587\u4EF6,\u5199\u5165\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u9879

\`\`\`bash
# \u6570\u636E\u5E93\u8FDE\u63A5\u5730\u5740
MYSQL_HOST=127.0.0.1
# \u6570\u636E\u5E93\u8FDE\u63A5\u7AEF\u53E3\u53F7
MYSQL_PORT=3306
# \u6570\u636E\u5E93\u540D
MYSQL_DB=waline
# \u8FDE\u63A5\u6570\u636E\u5E93\u7528\u6237\u540D
MYSQL_USER=root
# \u8FDE\u63A5\u5BC6\u7801
MYSQL_PASSWORD=thbbx09
\`\`\`

- \u521B\u5EFA\u7A0B\u5E8F\u5165\u53E3\u6587\u4EF6\`main.js\`

\`\`\`js
// \u5F15\u5165dotenv
const dotenv = require('dotenv')
// \u8C03\u7528config\u65B9\u6CD5\u5408\u5E76.env\u73AF\u5883\u53D8\u91CF
dotenv.config()
// \u5F15\u5165\u5E76\u6267\u884C\u8BE5\u6587\u4EF6
require('@waline/vercel/vanilla.js')
\`\`\`

- \`package.json\`\u914D\u7F6E\`script\`

\`\`\`js
"scripts": {
    "start": "node ./main.js"
  }
\`\`\`

&emsp;\u81F3\u6B64\uFF0C\u9879\u76EE\u6784\u5EFA\u5B8C\u6210\uFF0C\u53EF\u4EE5\u5728\u672C\u5730\u542F\u52A8\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u9ED8\u8BA4\u8BBF\u95EE\u5730\u5740\uFF1A\`http://127.0.0.1:8360\`,\u9ED8\u8BA4\u7AEF\u53E3\uFF1A\`8360\`\u3002\u5C06\u4EE3\u7801\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u9884\u8BBE\u76EE\u5F55\u4E0B\uFF0C\u8FDB\u884C\u90E8\u7F72\u3002\u9879\u76EE\u4EE3\u7801\u83B7\u53D6\u65B9\u5F0F\uFF1A

\`\`\`bash
git clone https://github.com/AnyFork/waline-server.git
\`\`\`

### \u670D\u52A1\u5668\u90E8\u7F72

&emsp;\u670D\u52A1\u5668\u90E8\u7F72\u5206\u4E3A 2 \u4E2A\u6B65\u9AA4\uFF0C1 \u4E0A\u4F20\u4EE3\u7801\u81F3\u670D\u52A1\u5668\u5E76\u8FD0\u884C\uFF1B 2 \u914D\u7F6E nginx \u53CD\u5411\u4EE3\u7406\u3002

- \u9879\u76EE\u542F\u52A8
  \u5C06\u4EE3\u7801\u4E0A\u4F20\u81F3\u9884\u8BBE\u76EE\u5F55\uFF0C\u7136\u540E\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A

\`\`\`bash
# \u5B89\u88C5\u4F9D\u8D56
npm install
# \u9879\u76EE\u542F\u52A8
npm run start
\`\`\`

- Nginx \u53CD\u5411\u4EE3\u7406
  \u5982\u679C\u4F60\u4E0D\u60F3\u5E26\u7AEF\u53E3\u8BBF\u95EE\u7684\u8BDD\uFF0C\u53EF\u4EE5\u589E\u52A0 Nginx 80 \u548C 443 \u7AEF\u53E3\u7684\u53CD\u4EE3\u3002\u53EF\u53C2\u8003\u5982\u4E0B\u914D\u7F6E:

\`\`\`bash
server
{
  listen 80;
  listen 443 ssl http2;
  server_name your.domain.server.name;
  root /www/wwwroot/your.domain.server.name;
  if ($server_port !~ 443){
    rewrite ^(/.*)$ https://$host$1 permanent;
  }

  # SSL setting
  ssl_certificate fullchain.pem;
  ssl_certificate_key privkey.pem;
  ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
  ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
  ssl_prefer_server_ciphers on;
  ssl_session_cache shared:SSL:10m;
  ssl_session_timeout 10m;
  add_header Strict-Transport-Security "max-age=31536000";

  # proxy to 8360
  location / {
    proxy_pass http://127.0.0.1:8360;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header REMOTE-HOST $remote_addr;
    add_header X-Cache $upstream_cache_status;
    # cache
    add_header Cache-Control no-cache;
    expires 12h;
  }
}
\`\`\`
`,contentRendered:`<p>\u2003waline \u662F\u4E00\u6B3E\u7B80\u6D01\u3001\u5B89\u5168\u7684\u8BC4\u8BBA\u7CFB\u7EDF\uFF0C\u8BE5\u7CFB\u7EDF\u5305\u542B\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\uFF0C\u5C5E\u4E8E valine \u7684\u884D\u751F\u7248\u672C\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u89E3\u51B3\u4E86 valine \u9605\u8BFB\u6570\u636E\u7BE1\u6539\uFF0CXSS \u5B89\u5168\uFF0C\u7528\u6237\u9690\u79C1\u6CC4\u9732\u7B49\u6570\u636E\u5B89\u5168\u95EE\u9898\u3002waline \u4E0D\u4EC5\u5177\u6709 valine \u529F\u80FD\uFF0C\u8FD8\u63D0\u4F9B\u4E86\u90AE\u4EF6\u901A\u77E5\u3001\u5FAE\u4FE1\u901A\u77E5\u3001\u8BC4\u8BBA\u540E\u53F0\u7BA1\u7406\u3001LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL \u591A\u5B58\u50A8\u670D\u52A1\u652F\u6301\u7B49\u8BF8\u591A\u7279\u6027\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0CWaline \u9ED8\u8BA4\u4F7F\u7528 Vercel \u90E8\u7F72\uFF0C\u5B9E\u73B0\u5B8C\u5168\u514D\u8D39\u90E8\u7F72\uFF01\u672C\u6587\u7740\u91CD\u8BB0\u5F55 waline \u670D\u52A1\u5668\u72EC\u7ACB\u90E8\u7F72\u7684\u8FC7\u7A0B\u3002</p>
<!-- more -->
<h2 id="\u7B80\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u7B80\u8FF0" aria-hidden="true">#</a> \u7B80\u8FF0</h2>
<p>\u2003waline \u4F5C\u4E3A valine \u7684\u52A0\u5F3A\u7248\uFF0C\u589E\u52A0\u4E86\u670D\u52A1\u7AEF\u529F\u80FD\uFF0C\u652F\u6301\u591A\u79CD\u6570\u636E\u5E93\u548C\u81EA\u5B9A\u4E49\u6570\u636E\u5E93\u6A21\u5F0F\uFF0C\u6570\u636E\u5B58\u50A8\u66F4\u52A0\u5B89\u5168\u3002waline \u9ED8\u8BA4\u6570\u636E\u5E93:<a href="https://console.leancloud.app/login" target="_blank" rel="noopener noreferrer">LeanCloud<ExternalLinkIcon/></a>\uFF0C<code v-pre>LeanCloud</code>\u6709<a href="https://console.leancloud.cn/login?from=%2Fapps" target="_blank" rel="noopener noreferrer">\u56FD\u5185\u7248<ExternalLinkIcon/></a>\u548C<a href="https://console.leancloud.app/login?from=%2Fapps" target="_blank" rel="noopener noreferrer">\u56FD\u9645\u7248<ExternalLinkIcon/></a>2 \u4E2A\u7248\u672C\uFF0C\u56FD\u5185\u7248\u9700\u8981\u914D\u7F6E\u81EA\u5B9A\u4E49\u57DF\u540D\uFF0C\u56FD\u9645\u7248\u8BBF\u95EE\u5B58\u5728\u5F88\u9AD8\u5EF6\u8FDF\uFF0C\u5982\u679C\u4E0D\u8003\u8651\u6570\u636E\u5B89\u5168\u6027\uFF0C\u53EF\u4EE5\u5C1D\u8BD5<code v-pre>leancloud</code>\u6570\u636E\u5E93\u3002\u9ED8\u8BA4\u90E8\u7F72\u65B9\u6848\uFF1A<a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample" target="_blank" rel="noopener noreferrer">Vercel<ExternalLinkIcon/></a>\uFF0C<code v-pre>Vercel</code>\u662F\u4E00\u79CD\u514D\u8D39\u7684\u90E8\u7F72\u65B9\u6848\uFF0C\u90E8\u7F72\u4E5F\u6BD4\u8F83\u7B80\u5355\uFF0C\u6CE8\u518C\u767B\u5F55\u540E\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u6253\u5305\u7F16\u8BD1\u5373\u53EF(\u4F9D\u8D56 github \u4ED3\u5E93)\uFF0C\u4F46\u6700\u8FD1<code v-pre>vercel</code>\u597D\u50CF\u6302\u4E86\uFF0C\u6CA1\u6709\u68AF\u5B50\u6839\u672C\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u6240\u6709\u535A\u4E3B\u653E\u5F03\u4E86\u9ED8\u8BA4\u90E8\u7F72\u65B9\u5F0F\uFF0C\u91C7\u7528<code v-pre>waline</code>\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u65B9\u6848\u3002\u66F4\u591A\u5176\u4ED6\u90E8\u7F72\u65B9\u6848\uFF0C\u8BF7\u53C2\u8003<a href="https://waline.js.org/" target="_blank" rel="noopener noreferrer">waline \u5B98\u7F51<ExternalLinkIcon/></a>\u3002</p>
<div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p>
<p><code v-pre>waline</code>\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u9700\u8981\u5177\u5907\u4EE5\u4E0B\u6761\u4EF6\uFF1A</p>
<p>1\u3001\u4E00\u53F0\u4E91\u670D\u52A1\u5668\u548C\u5B89\u88C5\u597D\u7684\u6570\u636E\u5E93(\u4F8B\u5982\uFF1AMySQL)\uFF0C\u5176\u4ED6\u6570\u636E\u5E93\u53C2\u8003<a href="https://waline.js.org/guide/server/databases.html" target="_blank" rel="noopener noreferrer">\u591A\u6570\u636E\u6E90\u53C2\u8003<ExternalLinkIcon/></a>\u3002</p>
<p>2\u3001<code v-pre>Nodejs</code>\u73AF\u5883\u5B89\u88C5\u914D\u7F6E\uFF0C\u9879\u76EE\u90E8\u7F72\u4F9D\u8D56 Node \u73AF\u5883\uFF0C\u9700\u8981\u63D0\u524D\u5B89\u88C5\u597D\u73AF\u5883\u3002</p>
</div>
<h2 id="\u51C6\u5907\u5DE5\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u5DE5\u4F5C" aria-hidden="true">#</a> \u51C6\u5907\u5DE5\u4F5C</h2>
<p>\u2003<code v-pre>waline</code>\u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u5F88\u7B80\u5355\uFF0C\u53EF\u4EE5\u53C2\u8003<a href="https://waline.js.org/guide/server/vps-deploy.html" target="_blank" rel="noopener noreferrer">waline \u5B98\u7F51<ExternalLinkIcon/></a>\u72EC\u7ACB\u90E8\u7F72\uFF0C\u5B98\u7F51\u63CF\u8FF0\u6BD4\u8F83\u7B80\u5355\uFF0C\u4EC5\u4F9B\u53C2\u8003\u3002\u672C\u6587\u72EC\u7ACB\u90E8\u7F72\u53EA\u9700\u8981 3 \u5927\u6B65\u9AA4\uFF1A<code v-pre>\u73AF\u5883\u53D8\u91CF\u914D\u7F6E</code>\uFF0C<code v-pre>\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E</code>\u548C<code v-pre>\u670D\u52A1\u5668\u90E8\u7F72</code>\u3002\u4E0B\u9762\u8BB2\u8FF0\u5177\u4F53\u5B9E\u73B0\u65B9\u5F0F\u3002</p>
<h3 id="\u73AF\u5883\u53D8\u91CF\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u53D8\u91CF\u914D\u7F6E" aria-hidden="true">#</a> \u73AF\u5883\u53D8\u91CF\u914D\u7F6E</h3>
<p>\u2003\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u6307\uFF1A\u914D\u7F6E<code v-pre>waline</code>\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\u3002<code v-pre>waline</code>\u91C7\u7528\u73AF\u5883\u53D8\u91CF\u7684\u65B9\u5F0F\u8BFB\u53D6\u914D\u7F6E\u4FE1\u606F\uFF0C\u5185\u7F6E\u4E86\u591A\u79CD\u6570\u636E\u5E93\u73AF\u5883\u53D8\u91CF\uFF0C\u5177\u4F53\u53C2\u8003<a href="https://waline.js.org/guide/server/databases.html" target="_blank" rel="noopener noreferrer">\u591A\u6570\u636E\u6E90\u73AF\u5883\u53D8\u91CF<ExternalLinkIcon/></a>\u3002\u6211\u4EEC\u53EA\u9700\u8981\u6309\u7167\u5185\u7F6E\u914D\u7F6E\u9879\u8FDB\u884C\u914D\u7F6E\uFF0C\u5C31\u53EF\u4EE5\u66F4\u6362\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u3002\u4E0B\u9762\u4EE5<code v-pre>MySQL</code>\u4E3A\u4F8B\uFF0C\u4F7F\u7528\u65F6\u8BF7\u5148\u5BFC\u5165 <a href="https://github.com/walinejs/waline/blob/main/assets/waline.sql" target="_blank" rel="noopener noreferrer">waline.sql<ExternalLinkIcon/></a> \u4EE5\u5B8C\u6210\u8868\u548C\u8868\u7ED3\u6784\u7684\u521B\u5EFA\uFF0C\u4E4B\u540E\u5728\u9879\u76EE\u4E2D\u914D\u7F6E\u5982\u4E0B\u73AF\u5883\u53D8\u91CF\uFF1A</p>
<table>
<thead>
<tr>
<th>\u73AF\u5883\u53D8\u91CF\u540D\u79F0</th>
<th>\u5FC5\u586B</th>
<th>\u9ED8\u8BA4\u503C</th>
<th>\u5907\u6CE8</th>
</tr>
</thead>
<tbody>
<tr>
<td>MYSQL*HOST</td>
<td></td>
<td>127.0.0.1</td>
<td>MySQL \u670D\u52A1\u7684\u5730\u5740</td>
</tr>
<tr>
<td>MYSQL_PORT</td>
<td></td>
<td>3306</td>
<td>MySQL \u670D\u52A1\u7684\u7AEF\u53E3</td>
</tr>
<tr>
<td>MYSQL_DB</td>
<td>\u2705</td>
<td></td>
<td>MySQL \u6570\u636E\u5E93\u5E93\u540D</td>
</tr>
<tr>
<td>MYSQL_USER</td>
<td>\u2705</td>
<td></td>
<td>MySQL \u6570\u636E\u5E93\u7684\u7528\u6237\u540D</td>
</tr>
<tr>
<td>MYSQL_PASSWORD</td>
<td>\u2705</td>
<td></td>
<td>MySQL \u6570\u636E\u5E93\u7684\u5BC6\u7801</td>
</tr>
<tr>
<td>MYSQL_PREFIX</td>
<td></td>
<td>wl*</td>
<td>MySQL \u6570\u636E\u8868\u7684\u8868\u524D\u7F00</td>
</tr>
<tr>
<td>MYSQL_CHARSET</td>
<td></td>
<td>utf8mb4</td>
<td>MySQL \u6570\u636E\u8868\u7684\u5B57\u7B26\u96C6</td>
</tr>
<tr>
<td>MYSQL_SSL</td>
<td></td>
<td></td>
<td>\u662F\u5426\u4F7F\u7528 SSL MYSQL \u8FDE\u63A5\u6570\u636E\u5E93</td>
</tr>
</tbody>
</table>
<p>\u2003\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u53EF\u4EE5\u53EA\u914D\u7F6E\u5FC5\u586B\u9879\uFF0C\u5176\u4ED6\u9009\u9879\u91C7\u7528\u9ED8\u8BA4\u503C\u5373\u53EF\u3002\u5176\u4ED6\u6570\u636E\u5E93\u914D\u7F6E\u4E5F\u4E00\u6837\uFF0C\u53EA\u662F\u914D\u7F6E\u9879\u5B58\u5728\u5DEE\u5F02\u800C\u5DF2\uFF0C\u5F88\u7B80\u5355\u3002\u73AF\u5883\u53D8\u91CF\u4F7F\u7528\u6709\u4EE5\u4E0B 2 \u79CD\u65B9\u5F0F\uFF1A</p>
<h4 id="\u65B9\u5F0F\u4E00" tabindex="-1"><a class="header-anchor" href="#\u65B9\u5F0F\u4E00" aria-hidden="true">#</a> \u65B9\u5F0F\u4E00\uFF1A</h4>
<p>\u2003\u5982\u679C\u4F60\u7684\u670D\u52A1\u5668\u662F linux \u64CD\u4F5C\u7CFB\u7EDF\u7684\u8BDD\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539\u5C5E\u4E3B\u76EE\u5F55\u4E0B\u7684.bashrc \u6587\u4EF6\uFF0C\u5E76\u5199\u5165\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">MYSQL_HOST</span><span class="token operator">=</span><span class="token number">12.12</span>.12.12
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MYSQL_PORT</span><span class="token operator">=</span><span class="token number">3306</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MYSQL_DB</span><span class="token operator">=</span>waline
<span class="token comment">#\u4EE5\u8FD9\u4E09\u4E2A\u4E3A\u4F8B\uFF0C\u66F4\u591A\u8BF7\u5BF9\u7167\u53C2\u6570\u8868\u4E00\u4E00\u586B\u5199\u5373\u53EF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u2003\u586B\u5199\u5B8C\u6210\u540E\u4FDD\u5B58\u6587\u4EF6\u5E76\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u5237\u65B0\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">source</span> ~/.bashrc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u2003\u8BE5\u65B9\u6CD5\u662F\u76F4\u63A5\u5BFC\u51FA\u7CFB\u7EDF\u7EA7\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u4F7F<code v-pre>waline</code> \u670D\u52A1\u7AEF\u53EF\u4EE5\u4ECE<code v-pre>process.env</code>\u5BF9\u8C61\u4E2D\u987A\u5229\u8BFB\u53D6\u5230\uFF0C\u800C\u8FD9\u6837\u5B9A\u4E49\u7684\u5168\u5C40\u73AF\u5883\u53D8\u91CF\u5B58\u5728\u4E00\u4E2A\u5F0A\u7AEF\uFF0C\u5C31\u662F\u4F1A\u6C61\u67D3\u5230\u5168\u5C40\uFF0C\u53EF\u80FD\u4F1A\u5E72\u9884\u5230\u5176\u4ED6\u9879\u76EE\uFF0C\u800C\u4E14 windows \u4E0E linux \u7684\u914D\u7F6E\u65B9\u6CD5\u5404\u4E0D\u76F8\u540C\u3002\u6240\u4EE5\u8FD9\u91CC\u5E76\u4E0D\u63A8\u8350\uFF0C\u800C\u662F\u66F4\u63A8\u8350\u4F7F\u7528\u65B9\u6848\u4E8C</p>
<h4 id="\u65B9\u6848\u4E8C" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6848\u4E8C" aria-hidden="true">#</a> \u65B9\u6848\u4E8C\uFF1A</h4>
<p>\u2003\u6211\u4EEC\u9700\u8981\u4E86\u89E3\u7684\u662F\uFF0C\u5728<code v-pre>nodejs</code> \u4E2D\uFF0C\u901A\u8FC7 <code v-pre>process.env</code> \u5BF9\u8C61\u53EF\u4EE5\u62FF\u5230\u5168\u5C40\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u800C\u6709\u8FD9\u4E48\u4E00\u4E2A\u7B2C\u4E09\u65B9\u5E93\uFF0C\u53EF\u4EE5\u505A\u5230\u65E2\u4E0D\u6C61\u67D3\u5168\u5C40\u73AF\u5883\u53D8\u91CF\uFF0C\u4E5F\u80FD\u5B9E\u73B0\u4EE3\u7801\u4E0E\u914D\u7F6E\u5206\u5F00\u7BA1\u7406\uFF1Adotenv\u3002\u8BE5\u5E93\u652F\u6301\u5C06\u73AF\u5883\u53D8\u91CF\u5199\u5165\u5230\u4E00\u4E2A\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u7684.env \u6587\u4EF6\u4E2D\uFF0C\u5E76\u5728\u4EE3\u7801\u4E2D\u901A\u8FC7<code v-pre>dotenv.config()</code>\u65B9\u6CD5\u5C06\u53D8\u91CF\u5408\u5E76\u81F3<code v-pre>process.env</code>\u5BF9\u8C61\u4E2D\uFF0C\u6BCF\u4E2A\u9879\u76EE\u7684.env \u6587\u4EF6\u90FD\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u4F5C\u7528\u57DF\uFF0C\u5728\u9879\u76EE\u7ED3\u675F\u8FD0\u884C\u65F6\uFF0C<code v-pre>.env </code>\u6587\u4EF6\u4E2D\u7684\u5168\u5C40\u53D8\u91CF\u5C06\u88AB\u9500\u6BC1\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u7F16\u5199\u4E00\u4E2A javascript \u811A\u672C\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u8C03\u7528<code v-pre>dotenv.config()</code>\u65B9\u6CD5\u5199\u5165\u5168\u5C40\u53D8\u91CF\uFF0C\u4E4B\u540E\u5F15\u5165\u5E76\u6267\u884C<code v-pre>@waline/vercel/vanilla.js</code> \u8FD9\u4E2A\u6587\u4EF6\u5373\u53EF\u3002</p>
<h3 id="\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E" aria-hidden="true">#</a> \u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E</h3>
<p>\u2003\u9879\u76EE\u4F9D\u8D56\u5305\u914D\u7F6E\uFF1A\u6784\u5EFA\u9879\u76EE\u76EE\u5F55\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5728\u670D\u52A1\u5668\u4E2D\u642D\u5EFA\uFF0C\u4E5F\u53EF\u4EE5\u5728\u672C\u5730\u521B\u5EFA\u597D\u9879\u76EE\uFF0C\u518D\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u3002\u4E0B\u9762\u8BB2\u8FF0\u672C\u5730\u9879\u76EE\u6784\u5EFA\u65B9\u5F0F\uFF0C\u9879\u76EE\u540D\u79F0\u4E3A\uFF1A<code v-pre>waline-server</code>\u4E3A\u4F8B\u3002</p>
<ul>
<li>\u521B\u5EFA\u9879\u76EE\u76EE\u5F55</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">mkdir</span> waline-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>\u521D\u59CB\u5316\u9879\u76EE</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> init <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>\u5B89\u88C5\u4F9D\u8D56</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># dotenv\u73AF\u5883\u53D8\u91CF\u4F9D\u8D56</span>
<span class="token function">npm</span> <span class="token function">install</span> dotenv
<span class="token comment"># waline \u670D\u52A1\u5668\u7AEF\u4F9D\u8D56</span>
<span class="token function">npm</span> <span class="token function">install</span> @waline/vercel

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u521B\u5EFA\u73AF\u5883\u53D8\u91CF<code v-pre>.env</code>\u6587\u4EF6,\u5199\u5165\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u9879</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u6570\u636E\u5E93\u8FDE\u63A5\u5730\u5740</span>
<span class="token assign-left variable">MYSQL_HOST</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token comment"># \u6570\u636E\u5E93\u8FDE\u63A5\u7AEF\u53E3\u53F7</span>
<span class="token assign-left variable">MYSQL_PORT</span><span class="token operator">=</span><span class="token number">3306</span>
<span class="token comment"># \u6570\u636E\u5E93\u540D</span>
<span class="token assign-left variable">MYSQL_DB</span><span class="token operator">=</span>waline
<span class="token comment"># \u8FDE\u63A5\u6570\u636E\u5E93\u7528\u6237\u540D</span>
<span class="token assign-left variable">MYSQL_USER</span><span class="token operator">=</span>root
<span class="token comment"># \u8FDE\u63A5\u5BC6\u7801</span>
<span class="token assign-left variable">MYSQL_PASSWORD</span><span class="token operator">=</span>thbbx09
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u521B\u5EFA\u7A0B\u5E8F\u5165\u53E3\u6587\u4EF6<code v-pre>main.js</code></li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// \u5F15\u5165dotenv</span>
<span class="token keyword">const</span> dotenv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv'</span><span class="token punctuation">)</span>
<span class="token comment">// \u8C03\u7528config\u65B9\u6CD5\u5408\u5E76.env\u73AF\u5883\u53D8\u91CF</span>
dotenv<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// \u5F15\u5165\u5E76\u6267\u884C\u8BE5\u6587\u4EF6</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@waline/vercel/vanilla.js'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><code v-pre>package.json</code>\u914D\u7F6E<code v-pre>script</code></li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"start"</span><span class="token operator">:</span> <span class="token string">"node ./main.js"</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u2003\u81F3\u6B64\uFF0C\u9879\u76EE\u6784\u5EFA\u5B8C\u6210\uFF0C\u53EF\u4EE5\u5728\u672C\u5730\u542F\u52A8\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u9ED8\u8BA4\u8BBF\u95EE\u5730\u5740\uFF1A<code v-pre>http://127.0.0.1:8360</code>,\u9ED8\u8BA4\u7AEF\u53E3\uFF1A<code v-pre>8360</code>\u3002\u5C06\u4EE3\u7801\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\u9884\u8BBE\u76EE\u5F55\u4E0B\uFF0C\u8FDB\u884C\u90E8\u7F72\u3002\u9879\u76EE\u4EE3\u7801\u83B7\u53D6\u65B9\u5F0F\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/AnyFork/waline-server.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u670D\u52A1\u5668\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u670D\u52A1\u5668\u90E8\u7F72" aria-hidden="true">#</a> \u670D\u52A1\u5668\u90E8\u7F72</h3>
<p>\u2003\u670D\u52A1\u5668\u90E8\u7F72\u5206\u4E3A 2 \u4E2A\u6B65\u9AA4\uFF0C1 \u4E0A\u4F20\u4EE3\u7801\u81F3\u670D\u52A1\u5668\u5E76\u8FD0\u884C\uFF1B 2 \u914D\u7F6E nginx \u53CD\u5411\u4EE3\u7406\u3002</p>
<ul>
<li>\u9879\u76EE\u542F\u52A8
\u5C06\u4EE3\u7801\u4E0A\u4F20\u81F3\u9884\u8BBE\u76EE\u5F55\uFF0C\u7136\u540E\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u5B89\u88C5\u4F9D\u8D56</span>
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token comment"># \u9879\u76EE\u542F\u52A8</span>
<span class="token function">npm</span> run start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>Nginx \u53CD\u5411\u4EE3\u7406
\u5982\u679C\u4F60\u4E0D\u60F3\u5E26\u7AEF\u53E3\u8BBF\u95EE\u7684\u8BDD\uFF0C\u53EF\u4EE5\u589E\u52A0 Nginx 80 \u548C 443 \u7AEF\u53E3\u7684\u53CD\u4EE3\u3002\u53EF\u53C2\u8003\u5982\u4E0B\u914D\u7F6E:</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>server
<span class="token punctuation">{</span>
  listen <span class="token number">80</span><span class="token punctuation">;</span>
  listen <span class="token number">443</span> ssl http2<span class="token punctuation">;</span>
  server_name your.domain.server.name<span class="token punctuation">;</span>
  root /www/wwwroot/your.domain.server.name<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$server_port</span> <span class="token operator">!</span>~ <span class="token number">443</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    rewrite ^<span class="token punctuation">(</span>/.*<span class="token punctuation">)</span>$ https://<span class="token variable">$host</span><span class="token variable">$1</span> permanent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment"># SSL setting</span>
  ssl_certificate fullchain.pem<span class="token punctuation">;</span>
  ssl_certificate_key privkey.pem<span class="token punctuation">;</span>
  ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3<span class="token punctuation">;</span>
  ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:<span class="token operator">!</span>MD5<span class="token punctuation">;</span>
  ssl_prefer_server_ciphers on<span class="token punctuation">;</span>
  ssl_session_cache shared:SSL:10m<span class="token punctuation">;</span>
  ssl_session_timeout 10m<span class="token punctuation">;</span>
  add_header Strict-Transport-Security <span class="token string">"max-age=31536000"</span><span class="token punctuation">;</span>

  <span class="token comment"># proxy to 8360</span>
  location / <span class="token punctuation">{</span>
    proxy_pass http://127.0.0.1:8360<span class="token punctuation">;</span>
    proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>
    proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
    proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
    proxy_set_header X-Forwarded-Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>
    proxy_set_header REMOTE-HOST <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
    add_header X-Cache <span class="token variable">$upstream_cache_status</span><span class="token punctuation">;</span>
    <span class="token comment"># cache</span>
    add_header Cache-Control no-cache<span class="token punctuation">;</span>
    expires 12h<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-08-23",deps:[],links:[],pathInferred:"/posts/other/walineServer.html",pathLocale:"/",permalink:null,routeMeta:{title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848"},sfcBlocks:[],slug:"walineServer",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/other/walineServer.md",filePathRelative:"posts/other/walineServer.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/walineServer.html.vue",componentFilePathRelative:"pages/posts/other/walineServer.html.vue",componentFileChunkName:"v-351c6704",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/other/walineServer.html.js",dataFilePathRelative:"pages/posts/other/walineServer.html.js",dataFileChunkName:"v-351c6704",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/other/walineServer.html",htmlFilePathRelative:"posts/other/walineServer.html"},title:"Waline \u670D\u52A1\u7AEF\u72EC\u7ACB\u90E8\u7F72\u89E3\u51B3\u65B9\u6848"},["/posts/other/walineServer","/posts/other/walineServer.md"]],["v-4c41b060","/posts/devops/docker/install.html",{_blog:{data:{key:"v-4c41b060",path:"/posts/devops/docker/install.html",title:"Centos7\u5B89\u88C5Docker\u6B65\u9AA4",lang:"zh-CN",frontmatter:{title:"Centos7\u5B89\u88C5Docker\u6B65\u9AA4",date:"2022-02-19T15:53:03.000Z",lang:"zh-CN",tag:["docker"],category:["docker","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041529112.jpg",summary:`\u2003Docker \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5E94\u7528\u5BB9\u5668\u5F15\u64CE\uFF0C\u8BA9\u5F00\u53D1\u8005\u53EF\u4EE5\u6253\u5305\u4ED6\u4EEC\u7684\u5E94\u7528\u4EE5\u53CA\u4F9D\u8D56\u5305\u5230\u4E00\u4E2A\u53EF\u79FB\u690D\u7684\u5BB9\u5668\u4E2D\uFF0C\u7136\u540E\u53D1\u5E03\u5230\u4EFB\u4F55\u6D41\u884C\u7684 Linux \u6216 Windows \u64CD\u4F5C\u7CFB\u7EDF\u7684\u673A\u5668\u4E0A\uFF0C\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u865A\u62DF\u5316\uFF0C\u5BB9\u5668\u662F\u5B8C\u5168\u4F7F\u7528\u6C99\u7BB1\u673A\u5236\uFF0C\u76F8\u4E92\u4E4B\u95F4\u4E0D\u4F1A\u6709\u4EFB\u4F55\u63A5\u53E3\u3002\u7B80\u5316\u914D\u7F6E,\u955C\u50CF\u5B89\u88C5\uFF0C\u5BB9\u5668\u7684\u521B\u5EFA\u975E\u5E38\u7684\u65B9\u4FBF\uFF0C\u540C\u65F6\u53EF\u4EE5\u5F39\u6027\u6269\u5BB9\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/docker/install.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Centos7\u5B89\u88C5Docker\u6B65\u9AA4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"docker"}],["meta",{property:"article:published_time",content:"2022-02-19T15:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Docker \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5E94\u7528\u5BB9\u5668\u5F15\u64CE\uFF0C\u8BA9\u5F00\u53D1\u8005\u53EF\u4EE5\u6253\u5305\u4ED6\u4EEC\u7684\u5E94\u7528\u4EE5\u53CA\u4F9D\u8D56\u5305\u5230\u4E00\u4E2A\u53EF\u79FB\u690D\u7684\u5BB9\u5668\u4E2D\uFF0C\u7136\u540E\u53D1\u5E03\u5230\u4EFB\u4F55\u6D41\u884C\u7684 Linux \u6216 Windows \u64CD\u4F5C\u7CFB\u7EDF\u7684\u673A\u5668\u4E0A\uFF0C\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u865A\u62DF\u5316\uFF0C\u5BB9\u5668\u662F\u5B8C\u5168\u4F7F\u7528\u6C99\u7BB1\u673A\u5236\uFF0C\u76F8\u4E92\u4E4B\u95F4\u4E0D\u4F1A\u6709\u4EFB\u4F55\u63A5\u53E3\u3002\u7B80\u5316\u914D\u7F6E,\u955C\u50CF\u5B89\u88C5\uFF0C\u5BB9\u5668\u7684\u521B\u5EFA\u975E\u5E38\u7684\u65B9\u4FBF\uFF0C\u540C\u65F6\u53EF\u4EE5\u5F39\u6027\u6269\u5BB9\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001docker \u5B89\u88C5",slug:"\u4E00\u3001docker-\u5B89\u88C5",children:[{level:3,title:"1\u3001\u5378\u8F7D\u65E7\u7684Docker\u5F15\u64CE",slug:"_1\u3001\u5378\u8F7D\u65E7\u7684docker\u5F15\u64CE",children:[]},{level:3,title:"2\u3001\u4F7F\u7528\u5B58\u50A8\u5E93\u5B89\u88C5docker",slug:"_2\u3001\u4F7F\u7528\u5B58\u50A8\u5E93\u5B89\u88C5docker",children:[]}]},{level:2,title:"\u4E8C\u3001docker \u5E38\u89C1\u4F7F\u7528\u547D\u4EE4",slug:"\u4E8C\u3001docker-\u5E38\u89C1\u4F7F\u7528\u547D\u4EE4",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/docker/install.md",readingTime:{minutes:2.7,words:809},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/docker/install.html`},key:"v-4c41b060",path:"/posts/devops/docker/install.html",title:"Centos7\u5B89\u88C5Docker\u6B65\u9AA4",lang:"zh-CN",frontmatter:{title:"Centos7\u5B89\u88C5Docker\u6B65\u9AA4",date:"2022-02-19T15:53:03.000Z",lang:"zh-CN",tag:["docker"],category:["docker","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041529112.jpg",summary:`\u2003Docker \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5E94\u7528\u5BB9\u5668\u5F15\u64CE\uFF0C\u8BA9\u5F00\u53D1\u8005\u53EF\u4EE5\u6253\u5305\u4ED6\u4EEC\u7684\u5E94\u7528\u4EE5\u53CA\u4F9D\u8D56\u5305\u5230\u4E00\u4E2A\u53EF\u79FB\u690D\u7684\u5BB9\u5668\u4E2D\uFF0C\u7136\u540E\u53D1\u5E03\u5230\u4EFB\u4F55\u6D41\u884C\u7684 Linux \u6216 Windows \u64CD\u4F5C\u7CFB\u7EDF\u7684\u673A\u5668\u4E0A\uFF0C\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u865A\u62DF\u5316\uFF0C\u5BB9\u5668\u662F\u5B8C\u5168\u4F7F\u7528\u6C99\u7BB1\u673A\u5236\uFF0C\u76F8\u4E92\u4E4B\u95F4\u4E0D\u4F1A\u6709\u4EFB\u4F55\u63A5\u53E3\u3002\u7B80\u5316\u914D\u7F6E,\u955C\u50CF\u5B89\u88C5\uFF0C\u5BB9\u5668\u7684\u521B\u5EFA\u975E\u5E38\u7684\u65B9\u4FBF\uFF0C\u540C\u65F6\u53EF\u4EE5\u5F39\u6027\u6269\u5BB9\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/docker/install.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Centos7\u5B89\u88C5Docker\u6B65\u9AA4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"docker"}],["meta",{property:"article:published_time",content:"2022-02-19T15:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Docker \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5E94\u7528\u5BB9\u5668\u5F15\u64CE\uFF0C\u8BA9\u5F00\u53D1\u8005\u53EF\u4EE5\u6253\u5305\u4ED6\u4EEC\u7684\u5E94\u7528\u4EE5\u53CA\u4F9D\u8D56\u5305\u5230\u4E00\u4E2A\u53EF\u79FB\u690D\u7684\u5BB9\u5668\u4E2D\uFF0C\u7136\u540E\u53D1\u5E03\u5230\u4EFB\u4F55\u6D41\u884C\u7684 Linux \u6216 Windows \u64CD\u4F5C\u7CFB\u7EDF\u7684\u673A\u5668\u4E0A\uFF0C\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u865A\u62DF\u5316\uFF0C\u5BB9\u5668\u662F\u5B8C\u5168\u4F7F\u7528\u6C99\u7BB1\u673A\u5236\uFF0C\u76F8\u4E92\u4E4B\u95F4\u4E0D\u4F1A\u6709\u4EFB\u4F55\u63A5\u53E3\u3002\u7B80\u5316\u914D\u7F6E,\u955C\u50CF\u5B89\u88C5\uFF0C\u5BB9\u5668\u7684\u521B\u5EFA\u975E\u5E38\u7684\u65B9\u4FBF\uFF0C\u540C\u65F6\u53EF\u4EE5\u5F39\u6027\u6269\u5BB9\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001docker \u5B89\u88C5",slug:"\u4E00\u3001docker-\u5B89\u88C5",children:[{level:3,title:"1\u3001\u5378\u8F7D\u65E7\u7684Docker\u5F15\u64CE",slug:"_1\u3001\u5378\u8F7D\u65E7\u7684docker\u5F15\u64CE",children:[]},{level:3,title:"2\u3001\u4F7F\u7528\u5B58\u50A8\u5E93\u5B89\u88C5docker",slug:"_2\u3001\u4F7F\u7528\u5B58\u50A8\u5E93\u5B89\u88C5docker",children:[]}]},{level:2,title:"\u4E8C\u3001docker \u5E38\u89C1\u4F7F\u7528\u547D\u4EE4",slug:"\u4E8C\u3001docker-\u5E38\u89C1\u4F7F\u7528\u547D\u4EE4",children:[]}],content:`---
title: Centos7\u5B89\u88C5Docker\u6B65\u9AA4
date: 2022-02-19 15:53:03
lang: zh-CN
tag:
  - docker
category:
  - docker
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041529112.jpg
---

&emsp;Docker \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5E94\u7528\u5BB9\u5668\u5F15\u64CE\uFF0C\u8BA9\u5F00\u53D1\u8005\u53EF\u4EE5\u6253\u5305\u4ED6\u4EEC\u7684\u5E94\u7528\u4EE5\u53CA\u4F9D\u8D56\u5305\u5230\u4E00\u4E2A\u53EF\u79FB\u690D\u7684\u5BB9\u5668\u4E2D\uFF0C\u7136\u540E\u53D1\u5E03\u5230\u4EFB\u4F55\u6D41\u884C\u7684 Linux \u6216 Windows \u64CD\u4F5C\u7CFB\u7EDF\u7684\u673A\u5668\u4E0A\uFF0C\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u865A\u62DF\u5316\uFF0C\u5BB9\u5668\u662F\u5B8C\u5168\u4F7F\u7528\u6C99\u7BB1\u673A\u5236\uFF0C\u76F8\u4E92\u4E4B\u95F4\u4E0D\u4F1A\u6709\u4EFB\u4F55\u63A5\u53E3\u3002\u7B80\u5316\u914D\u7F6E,\u955C\u50CF\u5B89\u88C5\uFF0C\u5BB9\u5668\u7684\u521B\u5EFA\u975E\u5E38\u7684\u65B9\u4FBF\uFF0C\u540C\u65F6\u53EF\u4EE5\u5F39\u6027\u6269\u5BB9\u3002

<!-- more -->

:::warning \u6E29\u99A8\u63D0\u793A
Docker \u8981\u6C42 CentOS7 \u7CFB\u7EDF\u7684\u5185\u6838\u7248\u672C\u5728 3.10 \u4EE5\u4E0A\uFF0C\u5426\u5219\u65E0\u6CD5\u5B89\u88C5 Docker\u3002\u5C0F\u4F19\u4F34\u4EEC\u53EF\u4EE5\u901A\u8FC7\`uname -a\`\u67E5\u770B\u81EA\u5DF1 centos \u5185\u6838\u7248\u672C\uFF0C\u5982\u679C\u4F4E\u4E8E 3.10\uFF0C\u9700\u8981\u91CD\u65B0\u5B89\u88C5 centos \u955C\u50CF\u3002\u4EE5\u4E0B\u662F docker \u76F8\u5173\u7F51\u5740\uFF1A<br/>docker \u5B98\u7F51\uFF1A<https://www.docker.com/><br/>docker \u6587\u6863\u5B98\u7F51\uFF1A<https://docs.docker.com/><br/>\u5B89\u88C5\u6587\u6863\uFF1A<https://docs.docker.com/engine/install/centos/>
:::

## \u4E00\u3001docker \u5B89\u88C5

### 1\u3001\u5378\u8F7D\u65E7\u7684Docker\u5F15\u64CE

\u5982\u679C centos \u4E0A\u4EE5\u524D\u5B89\u88C5\u8FC7\u65E7\u7248\u7684 docker,\u9700\u8981\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u5148\u5220\u9664\u65E7\u7684\u7248\u672C\uFF0C\u518D\u8FDB\u884C\u5B89\u88C5:<br/>
\u2460 \u5148\u5220\u9664\u4F9D\u8D56\u5305

\`\`\`bash
yum remove docker-ce docker-cd-cli containerd.io
sudo yum remove docker docker-client docker-client-latest docker-common\\
docker-latest docker-latest-logrotate docker-logrotate docker-engine
\`\`\`

\u2461 \u5220\u9664\u8D44\u6E90\u3002

\u4E3B\u673A\u4E0A\u7684\u6620\u50CF\u3001\u5BB9\u5668\u3001\u5377\u6216\u81EA\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6\u4E0D\u4F1A\u81EA\u52A8\u5220\u9664\uFF0C\u5FC5\u987B\u624B\u52A8\u5220\u9664\u4EFB\u4F55\u5DF2\u7F16\u8F91\u7684\u914D\u7F6E\u6587\u4EF6\u3002Docker \u9ED8\u8BA4\u5DE5\u4F5C\u8DEF\u5F84/var/lib/docker

\`\`\`bash
rm -rf /var/lib/docker

rm -rf /var/lib/containerd
\`\`\`

### 2\u3001\u4F7F\u7528\u5B58\u50A8\u5E93\u5B89\u88C5docker

:::tip
\u4F7F\u7528 Docker \u7684\u5B58\u50A8\u5E93\u5E76\u5B89\u88C5\uFF0C\u4FBF\u4E8E\u5B89\u88C5\u548C\u5347\u7EA7\u4EFB\u52A1\uFF1B\u4E0B\u8F7D RPM \u5305\u5E76\u624B\u52A8\u5B89\u88C5\u5E76\u7BA1\u7406\uFF0C\u5B8C\u5168\u624B\u52A8\u5347\u7EA7\uFF1B
:::
\u2460 \u5B89\u88C5\u5FC5\u8981\u7684\u7CFB\u7EDF\u5DE5\u5177

\`\`\`bash
yum -y install yum-utils
\`\`\`

\u2461 \u8BBE\u7F6E\u8F6F\u4EF6\u6E90\u4FE1\u606F

\`\`\`bash
# \u8BBE\u7F6E\u963F\u91CC\u4E91\u955C\u50CF\uFF0C\u5B89\u88C5docker\u901F\u5EA6\u5FEB
yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
\`\`\`

\u2462 \u66F4\u65B0\u5E76\u5B89\u88C5 docker-ce(ce \u793E\u533A\u7248\uFF0Cee \u4F01\u4E1A\u7248)

\`\`\`bash
# \u66F4\u65B0\u7D22\u5F15
yum makecache fast
\`\`\`

\u2463 \u5982\u9700\u6307\u5B9A docker \u5F15\u64CE\u7684\u7248\u672C\uFF0C\u901A\u8FC7\u4EE5\u4E0B\u547D\u4EE4\u83B7\u53D6\u53EF\u7528\u7248\u672C

\`\`\`bash
yum list docker-ce --showduplicates | sort -r
\`\`\`

\u2464 \u5B89\u88C5\u6307\u5B9A\u7248\u672C\u7684 docker

\`\`\`bash
yum install docker-ce-<\u7248\u672C\u53F7> docker-ce-cli-<\u7248\u672C\u53F7> containerd.io
\`\`\`

\u2465 \u542F\u52A8 docker

\`\`\`bash
systemctl start docker
\`\`\`

\u2466 \u5F00\u673A\u81EA\u542F\u52A8

\`\`\`bash
systemctl enable docker
\`\`\`

\u2467hello-world \u6D4B\u8BD5

\`\`\`bash
# \u8FD0\u884C\u5BB9\u5668
docker run hello-world
# \u67E5\u770B\u955C\u50CF
docker images

\`\`\`

## \u4E8C\u3001docker \u5E38\u89C1\u4F7F\u7528\u547D\u4EE4

:::tip
docker \u5B98\u7F51\u547D\u4EE4\u53C2\u8003\u6587\u6863\uFF1A<https://docs.docker.com/engine/reference/builder/>
:::

1\u3001\u542F\u52A8docker\u5F15\u64CE\uFF1Asystemctl start docker

2\u3001docker\u8BBE\u7F6E\u5F00\u673A\u81EA\u542F\u52A8\uFF1Asystemctl enable docker

3\u3001docker\u7248\u672C\u4FE1\u606F\u67E5\u8BE2\uFF1Adocker version

4\u3001docker\u6240\u6709\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker ps -a

5\u3001docker\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker ps

6\u3001docker\u505C\u6B62\u8FD0\u884C\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker stop \u5BB9\u5668ID/\u5BB9\u5668\u540D\u79F0

7\u3001docker\u5220\u9664\u505C\u6B62\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker rm \u5BB9\u5668ID/\u5BB9\u5668\u540D\u79F0

8\u3001docker\u5F3A\u5236\u5220\u9664\u8FD0\u884C\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker rm -f \u5BB9\u5668ID/\u5BB9\u5668\u540D\u79F0

9\u3001docker\u5220\u9664\u505C\u6B62\u7684\u5BB9\u5668\u5B9E\u4F8B\u955C\u50CF\uFF1Adocker rmi \u955C\u50CFID/\u955C\u50CF\u540D\u79F0

10\u3001docker\u5F3A\u5236\u5220\u9664\u955C\u50CF\uFF1Adocker rmi -f \u955C\u50CFID/\u955C\u50CF\u540D\u79F0

11\u3001docker\u5220\u9664\u6240\u7528\u5BB9\u5668: docker rm -f \`docker ps -a -q\`

12\u3001docker\u5220\u9664\u6240\u6709\u955C\u50CF\uFF1Adocker rmi -f \`docker images -q\`

`,contentRendered:`<p>\u2003Docker \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5E94\u7528\u5BB9\u5668\u5F15\u64CE\uFF0C\u8BA9\u5F00\u53D1\u8005\u53EF\u4EE5\u6253\u5305\u4ED6\u4EEC\u7684\u5E94\u7528\u4EE5\u53CA\u4F9D\u8D56\u5305\u5230\u4E00\u4E2A\u53EF\u79FB\u690D\u7684\u5BB9\u5668\u4E2D\uFF0C\u7136\u540E\u53D1\u5E03\u5230\u4EFB\u4F55\u6D41\u884C\u7684 Linux \u6216 Windows \u64CD\u4F5C\u7CFB\u7EDF\u7684\u673A\u5668\u4E0A\uFF0C\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u865A\u62DF\u5316\uFF0C\u5BB9\u5668\u662F\u5B8C\u5168\u4F7F\u7528\u6C99\u7BB1\u673A\u5236\uFF0C\u76F8\u4E92\u4E4B\u95F4\u4E0D\u4F1A\u6709\u4EFB\u4F55\u63A5\u53E3\u3002\u7B80\u5316\u914D\u7F6E,\u955C\u50CF\u5B89\u88C5\uFF0C\u5BB9\u5668\u7684\u521B\u5EFA\u975E\u5E38\u7684\u65B9\u4FBF\uFF0C\u540C\u65F6\u53EF\u4EE5\u5F39\u6027\u6269\u5BB9\u3002</p>
<!-- more -->
<div class="custom-container warning"><p class="custom-container-title">\u6E29\u99A8\u63D0\u793A</p>
<p>Docker \u8981\u6C42 CentOS7 \u7CFB\u7EDF\u7684\u5185\u6838\u7248\u672C\u5728 3.10 \u4EE5\u4E0A\uFF0C\u5426\u5219\u65E0\u6CD5\u5B89\u88C5 Docker\u3002\u5C0F\u4F19\u4F34\u4EEC\u53EF\u4EE5\u901A\u8FC7<code v-pre>uname -a</code>\u67E5\u770B\u81EA\u5DF1 centos \u5185\u6838\u7248\u672C\uFF0C\u5982\u679C\u4F4E\u4E8E 3.10\uFF0C\u9700\u8981\u91CD\u65B0\u5B89\u88C5 centos \u955C\u50CF\u3002\u4EE5\u4E0B\u662F docker \u76F8\u5173\u7F51\u5740\uFF1A<br/>docker \u5B98\u7F51\uFF1A<a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">https://www.docker.com/<ExternalLinkIcon/></a><br/>docker \u6587\u6863\u5B98\u7F51\uFF1A<a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/<ExternalLinkIcon/></a><br/>\u5B89\u88C5\u6587\u6863\uFF1A<a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/centos/<ExternalLinkIcon/></a></p>
</div>
<h2 id="\u4E00\u3001docker-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001docker-\u5B89\u88C5" aria-hidden="true">#</a> \u4E00\u3001docker \u5B89\u88C5</h2>
<h3 id="_1\u3001\u5378\u8F7D\u65E7\u7684docker\u5F15\u64CE" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5378\u8F7D\u65E7\u7684docker\u5F15\u64CE" aria-hidden="true">#</a> 1\u3001\u5378\u8F7D\u65E7\u7684Docker\u5F15\u64CE</h3>
<p>\u5982\u679C centos \u4E0A\u4EE5\u524D\u5B89\u88C5\u8FC7\u65E7\u7248\u7684 docker,\u9700\u8981\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u5148\u5220\u9664\u65E7\u7684\u7248\u672C\uFF0C\u518D\u8FDB\u884C\u5B89\u88C5:<br/>
\u2460 \u5148\u5220\u9664\u4F9D\u8D56\u5305</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum remove docker-ce docker-cd-cli containerd.io
<span class="token function">sudo</span> yum remove <span class="token function">docker</span> docker-client docker-client-latest docker-common<span class="token punctuation">\\</span>
docker-latest docker-latest-logrotate docker-logrotate docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u2461 \u5220\u9664\u8D44\u6E90\u3002</p>
<p>\u4E3B\u673A\u4E0A\u7684\u6620\u50CF\u3001\u5BB9\u5668\u3001\u5377\u6216\u81EA\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6\u4E0D\u4F1A\u81EA\u52A8\u5220\u9664\uFF0C\u5FC5\u987B\u624B\u52A8\u5220\u9664\u4EFB\u4F55\u5DF2\u7F16\u8F91\u7684\u914D\u7F6E\u6587\u4EF6\u3002Docker \u9ED8\u8BA4\u5DE5\u4F5C\u8DEF\u5F84/var/lib/docker</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker

<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/containerd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2\u3001\u4F7F\u7528\u5B58\u50A8\u5E93\u5B89\u88C5docker" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u4F7F\u7528\u5B58\u50A8\u5E93\u5B89\u88C5docker" aria-hidden="true">#</a> 2\u3001\u4F7F\u7528\u5B58\u50A8\u5E93\u5B89\u88C5docker</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>\u4F7F\u7528 Docker \u7684\u5B58\u50A8\u5E93\u5E76\u5B89\u88C5\uFF0C\u4FBF\u4E8E\u5B89\u88C5\u548C\u5347\u7EA7\u4EFB\u52A1\uFF1B\u4E0B\u8F7D RPM \u5305\u5E76\u624B\u52A8\u5B89\u88C5\u5E76\u7BA1\u7406\uFF0C\u5B8C\u5168\u624B\u52A8\u5347\u7EA7\uFF1B</p>
</div>
<p>\u2460 \u5B89\u88C5\u5FC5\u8981\u7684\u7CFB\u7EDF\u5DE5\u5177</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> yum-utils
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u2461 \u8BBE\u7F6E\u8F6F\u4EF6\u6E90\u4FE1\u606F</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u8BBE\u7F6E\u963F\u91CC\u4E91\u955C\u50CF\uFF0C\u5B89\u88C5docker\u901F\u5EA6\u5FEB</span>
yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u2462 \u66F4\u65B0\u5E76\u5B89\u88C5 docker-ce(ce \u793E\u533A\u7248\uFF0Cee \u4F01\u4E1A\u7248)</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u66F4\u65B0\u7D22\u5F15</span>
yum makecache fast
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u2463 \u5982\u9700\u6307\u5B9A docker \u5F15\u64CE\u7684\u7248\u672C\uFF0C\u901A\u8FC7\u4EE5\u4E0B\u547D\u4EE4\u83B7\u53D6\u53EF\u7528\u7248\u672C</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum list docker-ce <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u2464 \u5B89\u88C5\u6307\u5B9A\u7248\u672C\u7684 docker</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum <span class="token function">install</span> docker-ce-<span class="token operator">&lt;</span>\u7248\u672C\u53F7<span class="token operator">></span> docker-ce-cli-<span class="token operator">&lt;</span>\u7248\u672C\u53F7<span class="token operator">></span> containerd.io
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u2465 \u542F\u52A8 docker</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>systemctl start <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u2466 \u5F00\u673A\u81EA\u542F\u52A8</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u2467hello-world \u6D4B\u8BD5</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u8FD0\u884C\u5BB9\u5668</span>
<span class="token function">docker</span> run hello-world
<span class="token comment"># \u67E5\u770B\u955C\u50CF</span>
<span class="token function">docker</span> images

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8C\u3001docker-\u5E38\u89C1\u4F7F\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001docker-\u5E38\u89C1\u4F7F\u7528\u547D\u4EE4" aria-hidden="true">#</a> \u4E8C\u3001docker \u5E38\u89C1\u4F7F\u7528\u547D\u4EE4</h2>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>docker \u5B98\u7F51\u547D\u4EE4\u53C2\u8003\u6587\u6863\uFF1A<a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/builder/<ExternalLinkIcon/></a></p>
</div>
<p>1\u3001\u542F\u52A8docker\u5F15\u64CE\uFF1Asystemctl start docker</p>
<p>2\u3001docker\u8BBE\u7F6E\u5F00\u673A\u81EA\u542F\u52A8\uFF1Asystemctl enable docker</p>
<p>3\u3001docker\u7248\u672C\u4FE1\u606F\u67E5\u8BE2\uFF1Adocker version</p>
<p>4\u3001docker\u6240\u6709\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker ps -a</p>
<p>5\u3001docker\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker ps</p>
<p>6\u3001docker\u505C\u6B62\u8FD0\u884C\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker stop \u5BB9\u5668ID/\u5BB9\u5668\u540D\u79F0</p>
<p>7\u3001docker\u5220\u9664\u505C\u6B62\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker rm \u5BB9\u5668ID/\u5BB9\u5668\u540D\u79F0</p>
<p>8\u3001docker\u5F3A\u5236\u5220\u9664\u8FD0\u884C\u7684\u5BB9\u5668\u5B9E\u4F8B\uFF1Adocker rm -f \u5BB9\u5668ID/\u5BB9\u5668\u540D\u79F0</p>
<p>9\u3001docker\u5220\u9664\u505C\u6B62\u7684\u5BB9\u5668\u5B9E\u4F8B\u955C\u50CF\uFF1Adocker rmi \u955C\u50CFID/\u955C\u50CF\u540D\u79F0</p>
<p>10\u3001docker\u5F3A\u5236\u5220\u9664\u955C\u50CF\uFF1Adocker rmi -f \u955C\u50CFID/\u955C\u50CF\u540D\u79F0</p>
<p>11\u3001docker\u5220\u9664\u6240\u7528\u5BB9\u5668: docker rm -f <code v-pre>docker ps -a -q</code></p>
<p>12\u3001docker\u5220\u9664\u6240\u6709\u955C\u50CF\uFF1Adocker rmi -f <code v-pre>docker images -q</code></p>
`,date:"2022-02-19",deps:[],links:[],pathInferred:"/posts/devops/docker/install.html",pathLocale:"/",permalink:null,routeMeta:{title:"Centos7\u5B89\u88C5Docker\u6B65\u9AA4"},sfcBlocks:[],slug:"install",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/docker/install.md",filePathRelative:"posts/devops/docker/install.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/docker/install.html.vue",componentFilePathRelative:"pages/posts/devops/docker/install.html.vue",componentFileChunkName:"v-4c41b060",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/docker/install.html.js",dataFilePathRelative:"pages/posts/devops/docker/install.html.js",dataFileChunkName:"v-4c41b060",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/docker/install.html",htmlFilePathRelative:"posts/devops/docker/install.html"},title:"Centos7\u5B89\u88C5Docker\u6B65\u9AA4"},["/posts/devops/docker/install","/posts/devops/docker/install.md"]],["v-ec046092","/posts/devops/gitlab/",{_blog:{data:{key:"v-ec046092",path:"/posts/devops/gitlab/",title:"GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4",lang:"zh-CN",frontmatter:{title:"GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4",date:"2022-06-22T18:53:03.000Z",tag:["Gitlab"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202206221855008.png",summary:`\u2003GitLab \u662F\u7531 GitLabInc.\u5F00\u53D1\uFF0C\u4F7F\u7528 MIT \u8BB8\u53EF\u8BC1\u7684\u57FA\u4E8E\u7F51\u7EDC\u7684 Git \u4ED3\u5E93\u7BA1\u7406\u5DE5\u5177\uFF0C\u4E14\u5177\u6709 wiki \u548C issue \u8DDF\u8E2A\u529F\u80FD\u3002\u4F7F\u7528 Git \u4F5C\u4E3A\u4EE3\u7801\u7BA1\u7406\u5DE5\u5177\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u642D\u5EFA\u8D77\u6765\u7684 web \u670D\u52A1\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/gitlab/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Gitlab"}],["meta",{property:"article:published_time",content:"2022-06-22T18:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003GitLab \u662F\u7531 GitLabInc.\u5F00\u53D1\uFF0C\u4F7F\u7528 MIT \u8BB8\u53EF\u8BC1\u7684\u57FA\u4E8E\u7F51\u7EDC\u7684 Git \u4ED3\u5E93\u7BA1\u7406\u5DE5\u5177\uFF0C\u4E14\u5177\u6709 wiki \u548C issue \u8DDF\u8E2A\u529F\u80FD\u3002\u4F7F\u7528 Git \u4F5C\u4E3A\u4EE3\u7801\u7BA1\u7406\u5DE5\u5177\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u642D\u5EFA\u8D77\u6765\u7684 web \u670D\u52A1\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001GitLab \u7B80\u4ECB",slug:"\u4E00\u3001gitlab-\u7B80\u4ECB",children:[]},{level:2,title:"\u4E8C\u3001GitLab\u3001GitLab\u3001GitHub\u3001Gitee",slug:"\u4E8C\u3001gitlab\u3001gitlab\u3001github\u3001gitee",children:[{level:3,title:"1\u3001\u53D1\u5C55\u80CC\u666F",slug:"_1\u3001\u53D1\u5C55\u80CC\u666F",children:[]},{level:3,title:"2\u3001\u603B\u7ED3\u5BF9\u6BD4\u56FE",slug:"_2\u3001\u603B\u7ED3\u5BF9\u6BD4\u56FE",children:[]}]},{level:2,title:"\u4E09\u3001GitLab \u4E25\u91CD\u6F0F\u6D1E",slug:"\u4E09\u3001gitlab-\u4E25\u91CD\u6F0F\u6D1E",children:[]},{level:2,title:"\u56DB\u3001GitLab \u76F8\u5173\u94FE\u63A5",slug:"\u56DB\u3001gitlab-\u76F8\u5173\u94FE\u63A5",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/gitlab/README.md",readingTime:{minutes:4.15,words:1245},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/gitlab/`},key:"v-ec046092",path:"/posts/devops/gitlab/",title:"GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4",lang:"zh-CN",frontmatter:{title:"GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4",date:"2022-06-22T18:53:03.000Z",tag:["Gitlab"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202206221855008.png",summary:`\u2003GitLab \u662F\u7531 GitLabInc.\u5F00\u53D1\uFF0C\u4F7F\u7528 MIT \u8BB8\u53EF\u8BC1\u7684\u57FA\u4E8E\u7F51\u7EDC\u7684 Git \u4ED3\u5E93\u7BA1\u7406\u5DE5\u5177\uFF0C\u4E14\u5177\u6709 wiki \u548C issue \u8DDF\u8E2A\u529F\u80FD\u3002\u4F7F\u7528 Git \u4F5C\u4E3A\u4EE3\u7801\u7BA1\u7406\u5DE5\u5177\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u642D\u5EFA\u8D77\u6765\u7684 web \u670D\u52A1\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/gitlab/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Gitlab"}],["meta",{property:"article:published_time",content:"2022-06-22T18:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003GitLab \u662F\u7531 GitLabInc.\u5F00\u53D1\uFF0C\u4F7F\u7528 MIT \u8BB8\u53EF\u8BC1\u7684\u57FA\u4E8E\u7F51\u7EDC\u7684 Git \u4ED3\u5E93\u7BA1\u7406\u5DE5\u5177\uFF0C\u4E14\u5177\u6709 wiki \u548C issue \u8DDF\u8E2A\u529F\u80FD\u3002\u4F7F\u7528 Git \u4F5C\u4E3A\u4EE3\u7801\u7BA1\u7406\u5DE5\u5177\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u642D\u5EFA\u8D77\u6765\u7684 web \u670D\u52A1\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001GitLab \u7B80\u4ECB",slug:"\u4E00\u3001gitlab-\u7B80\u4ECB",children:[]},{level:2,title:"\u4E8C\u3001GitLab\u3001GitLab\u3001GitHub\u3001Gitee",slug:"\u4E8C\u3001gitlab\u3001gitlab\u3001github\u3001gitee",children:[{level:3,title:"1\u3001\u53D1\u5C55\u80CC\u666F",slug:"_1\u3001\u53D1\u5C55\u80CC\u666F",children:[]},{level:3,title:"2\u3001\u603B\u7ED3\u5BF9\u6BD4\u56FE",slug:"_2\u3001\u603B\u7ED3\u5BF9\u6BD4\u56FE",children:[]}]},{level:2,title:"\u4E09\u3001GitLab \u4E25\u91CD\u6F0F\u6D1E",slug:"\u4E09\u3001gitlab-\u4E25\u91CD\u6F0F\u6D1E",children:[]},{level:2,title:"\u56DB\u3001GitLab \u76F8\u5173\u94FE\u63A5",slug:"\u56DB\u3001gitlab-\u76F8\u5173\u94FE\u63A5",children:[]}],content:`---
title: GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4
date: 2022-6-22 18:53:03
tag:
  - Gitlab
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202206221855008.png
---

&emsp;GitLab \u662F\u7531 GitLabInc.\u5F00\u53D1\uFF0C\u4F7F\u7528 MIT \u8BB8\u53EF\u8BC1\u7684\u57FA\u4E8E\u7F51\u7EDC\u7684 Git \u4ED3\u5E93\u7BA1\u7406\u5DE5\u5177\uFF0C\u4E14\u5177\u6709 wiki \u548C issue \u8DDF\u8E2A\u529F\u80FD\u3002\u4F7F\u7528 Git \u4F5C\u4E3A\u4EE3\u7801\u7BA1\u7406\u5DE5\u5177\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u642D\u5EFA\u8D77\u6765\u7684 web \u670D\u52A1\u3002
<!-- more -->

## \u4E00\u3001GitLab \u7B80\u4ECB

&emsp;GitLab \u662F\u4E00\u4E2A\u7528\u4E8E\u4ED3\u5E93\u7BA1\u7406\u7CFB\u7EDF\u7684\u5F00\u6E90\u9879\u76EE\uFF0C\u4F7F\u7528 Git \u4F5C\u4E3A\u4EE3\u7801\u7BA1\u7406\u5DE5\u5177\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u642D\u5EFA\u8D77\u6765\u7684 Web \u670D\u52A1\u3002GitLab \u7531\u4E4C\u514B\u5170\u7A0B\u5E8F\u5458 DmitriyZaporozhets \u548C ValerySizov \u5F00\u53D1\uFF0C\u5B83\u4F7F\u7528 Ruby \u8BED\u8A00\u5199\u6210\u3002\u540E\u6765\uFF0C\u4E00\u4E9B\u90E8\u5206\u7528 Go \u8BED\u8A00\u91CD\u5199\u3002\u622A\u6B62 2018 \u5E74 5 \u6708\uFF0C\u8BE5\u516C\u53F8\u7EA6\u6709 290 \u540D\u56E2\u961F\u6210\u5458\uFF0C\u4EE5\u53CA 2000 \u591A\u540D\u5F00\u6E90\u8D21\u732E\u8005\u3002GitLab \u88AB IBM\uFF0CSony\uFF0CJ\xFClichResearchCenter\uFF0CNASA\uFF0CAlibaba\uFF0CInvincea\uFF0CO\u2019ReillyMedia\uFF0CLeibniz-Rechenzentrum(LRZ)\uFF0CCERN\uFF0CSpaceX \u7B49\u7EC4\u7EC7\u4F7F\u7528\u3002<br>
&emsp;Gitlab \u4ECE 2011 \u5E74 10 \u6708 GitLab \u8FDB\u884C\u7B2C\u4E00\u6B21\u4EE3\u7801\u63D0\u4EA4\uFF0C\u5230 2021 \u5E74 10 \u6708\u6B63\u5F0F\u9646\u7EB3\u65AF\u8FBE\u514B\u4E0A\u5E02\uFF0CGitLab \u7684\u53D1\u5C55\u81F3\u4ECA\u5DF2\u6709\u6574\u6574\u5341\u5E74\u3002\u800C\u5728\u8FC7\u53BB\u7684\u53D1\u5C55\u4E2D\uFF0CGitLab \u5728\u4E2D\u56FD\u5E02\u573A\u4E00\u76F4\u9762\u4E34\u7740\u4E00\u4E2A\u95EE\u9898\u3002\u4F17\u6240\u5468\u77E5\uFF0C\u4E2D\u56FD\u662F\u76EE\u524D\u5168\u7403\u6700\u5927\u7684\u8F6F\u4EF6\u5F00\u53D1\u5E02\u573A\u4E4B\u4E00\uFF0CGitLab \u4E5F\u62E5\u6709\u7740\u6570\u767E\u4E07\u4E2D\u56FD\u7528\u6237\u548C\u8BF8\u591A\u77E5\u540D\u7684\u4E2D\u56FD\u672C\u571F\u4F01\u4E1A\u7528\u6237\u3002\u7136\u800C\uFF0C\u5728\u4EE5\u5F80\uFF0C\u4E2D\u56FD\u7528\u6237\u53EA\u80FD\u901A\u8FC7 GitLab \u7ECF\u9500\u5546\u548C\u7CFB\u7EDF\u96C6\u6210\u5546\u7F51\u7EDC\u83B7\u53D6 GitLab \u5E73\u53F0\u7684\u81EA\u52A9\u7BA1\u7406\u7248\u672C\uFF0C\u4E14\u65E0\u6CD5\u5F97\u5230\u5145\u5206\u7684\u672C\u571F\u6280\u672F\u652F\u6301\u3002
\u6240\u4EE5\uFF0C\u4E3A\u4E86\u5E2E\u52A9\u4E2D\u56FD\u7528\u6237\u66F4\u597D\u5730\u4F7F\u7528 GitLab \u4EA4\u4ED8\u521B\u65B0\uFF0C\u5408\u8D44\u516C\u53F8\u6781\u72D0(GitLab)\u5E94\u8FD0\u800C\u751F\uFF0C\u8BE5\u516C\u53F8\u7531 GitLab Inc.\u4EE5\u6280\u672F\u6388\u6743\u7684\u5F62\u5F0F\u5165\u80A1\uFF0C\u4E0E\u72EC\u5BB6\u9886\u6295\u7EA2\u6749\u5BBD\u5E26\u8DE8\u5883\u6570\u5B57\u4EA7\u4E1A\u57FA\u91D1\uFF0C\u4EE5\u53CA\u9AD8\u6210\u8D44\u672C\u5408\u4F5C\u8BBE\u7ACB\uFF0C\u7531\u4E2D\u56FD\u7BA1\u7406\u56E2\u961F\u5728\u56FD\u5185\u72EC\u7ACB\u8FD0\u8425\u3002\u5728\u6388\u6743\u65B9\u9762\uFF0C\u6781\u72D0(GitLab) \u62E5\u6709 GitLab \u72EC\u5BB6\u4E14\u4E0D\u53EF\u64A4\u9500\u7684\u6280\u672F\u548C\u54C1\u724C\u6388\u6743\uFF0C\u5168\u9762\u670D\u52A1\u4E8E\u4E2D\u56FD\u5927\u9646\u3001\u9999\u6E2F\u548C\u6FB3\u95E8\u7684\u4F01\u4E1A\u548C\u7528\u6237\uFF0C\u5E76\u6839\u636E\u4E2D\u56FD\u5E02\u573A\u9700\u6C42\u63A8\u51FA\u7279\u5B9A\u7684\u8F6F\u4EF6\u529F\u80FD\u548C\u670D\u52A1\u652F\u6301\u30022022 \u5E74\uFF0C\u6781\u72D0(GitLab)\u6B63\u5F0F\u5BA3\u5E03\u63A8\u51FA\u6781\u72D0 GitLab SaaS \uFF0C\u4E3A\u4E2D\u56FD\u7528\u6237\u63D0\u4F9B\u4ECE\u6E90\u4EE3\u7801\u6258\u7BA1\u5230\u5F00\u53D1\u8FD0\u7EF4\u7684\u5168\u6808\u5F0F\u4E00\u4F53\u5316 DevOps SaaS \u5E73\u53F0\u4E0E\u4F01\u4E1A\u7EA7\u4E13\u5BB6\u54A8\u8BE2\u670D\u52A1\u3002<br />
&emsp;\u5728\u4EA7\u54C1\u65B9\u9762\uFF0CGitLab \u5728\u5168\u7403\u8303\u56F4\u5185\u6709\u4E09\u4E2A\u7248\u672C\uFF1A\u793E\u533A\u7248\uFF08CE\uFF09\u3001\u4F01\u4E1A\u7248\uFF08EE\uFF09\u3001\u6781\u72D0\u7248 (JH)\uFF0C\u6781\u72D0 GitLab \u662F\u5728\u4E2D\u56FD\u5927\u9646\u548C\u6E2F\u6FB3\u5730\u533A\u53D1\u884C\u7684\u4F01\u4E1A\u7EA7 GitLab \u7248\u672C\uFF0C\u62E5\u6709 GitLab \u6280\u672F\u548C\u54C1\u724C\u72EC\u5BB6\u6388\u6743\uFF0C\u57FA\u4E8E GitLab EE \u548C\u6781\u72D0(GitLab)\u6301\u6709\u72EC\u7ACB\u77E5\u8BC6\u4EA7\u6743\u7684\u2014\u2014JH \u4EE3\u7801\u4ED3\u5E93\u6784\u5EFA\uFF0C\u7531\u6781\u72D0(GitLab)\u516C\u53F8\u5728\u56FD\u5185\u72EC\u7ACB\u8FD0\u8425\u3002\u540C\u65F6\uFF0C\u6781\u72D0 GitLab \u652F\u6301\u79C1\u6709\u5316\u90E8\u7F72\uFF08self-managed\uFF09\u7248\u672C\u548C SaaS \u670D\u52A1\u3002\u6781\u72D0 GitLab \u7684\u4F01\u4E1A\u7EA7\u8BA2\u9605\u8BB8\u53EF\u8BC1\u3001\u6E90\u4EE3\u7801\u7BA1\u7406\u3001\u652F\u4ED8\u7CFB\u7EDF\u7B49\u5747\u5728\u4E2D\u56FD\u5883\u5185\u7BA1\u7406\uFF0C\u53D7\u4E2D\u56FD\u6CD5\u5F8B\u4FDD\u62A4\u3002

## \u4E8C\u3001GitLab\u3001GitLab\u3001GitHub\u3001Gitee

&emsp;\u6781\u72D0 GitLab\u3001GitLab\u3001GitHub\u3001Gitee \u90FD\u662F\u5E02\u9762\u4E0A\u5E38\u89C1\u7684\u4E0E\u4EE3\u7801\u6258\u7BA1\u6709\u5173\u7684\u5E73\u53F0\uFF0C\u4F46\u662F\u8FD9\u56DB\u79CD\u4EA7\u54C1\u8FD8\u662F\u6709\u6240\u5DEE\u5F02\u7684\u3002

### 1\u3001\u53D1\u5C55\u80CC\u666F

\u8FD9\u56DB\u4E2A Giter \u7684\u53D1\u5C55\u5386\u53F2\u5404\u4E0D\u76F8\u540C\uFF0CGitHub \u5386\u53F2\u6700\u957F\uFF0C\u5728 2008 \u5E74\u4E0A\u7EBF\uFF1BGitLab \u5176\u6B21\uFF0CGitLab \u5728 2011 \u5E74\u4E0A\u7EBF \uFF1B\u63A5\u4E0B\u6765\u662F Gitee\uFF0C\u5728 2013 \u5E74\u63A8\u51FA\uFF1B\u6700\u540E\u662F\u6781\u72D0 GitLab\uFF0C\u6210\u7ACB\u4E8E 2021 \u5E74 3 \u6708 18 \u65E5\u3002\u56DB\u79CD\u4EA7\u54C1\u7684\u53D1\u5C55\u7B80\u53F2\u5982\u4E0B\u56FE\u6240\u793A\uFF1A
![](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202206222015231.png)

### 2\u3001\u603B\u7ED3\u5BF9\u6BD4\u56FE

![](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202206222015511.png)

## \u4E09\u3001GitLab \u4E25\u91CD\u6F0F\u6D1E

&emsp;\u8FD1\u65E5\uFF0C\u5FAE\u6B65\u5728\u7EBF\u65D7\u4E0B\u5FAE\u6B65\u60C5\u62A5\u5C40\u5229\u7528\u514D\u8D39\u793E\u533A\u871C\u7F50 HFish \u6355\u83B7\u5230 GitLab \u672A\u6388\u6743\u8FDC\u7A0B\u547D\u4EE4\u6267\u884C\u6F0F\u6D1E\uFF08CVE-2021-22205\uFF09\u5728\u91CE\u5229\u7528\uFF0C\u653B\u51FB\u6210\u529F\u540E\u653B\u51FB\u8005\u4F1A\u690D\u5165\u6316\u77FF\u6728\u9A6C\u8FDB\u884C\u6316\u77FF\u3002\u8BE5\u6F0F\u6D1E\u65E0\u9700\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u5373\u53EF\u8FDB\u5229\u7528\uFF0C\u5371\u5BB3\u6781\u5927\u3002\u5728 2021 \u5E74\u201C\u53CC 11\u201D\u524D\u591C\uFF0C HFish \u871C\u7F50\u4E0E OneEDR \u8054\u5408\u884C\u52A8\uFF0C\u6355\u83B7\u5E76\u5904\u7F6E\u4E86\u4E00\u8D77\u771F\u5B9E\u5229\u7528 GitLab \u672A\u6388\u6743\u8FDC\u7A0B\u547D\u4EE4\u6267\u884C\u6F0F\u6D1E\uFF08CVE-2021-22205\uFF09\u5728\u91CE\u6F0F\u6D1E\u8FDB\u884C\u6316\u77FF\u7684\u653B\u51FB\u3002\u6839\u636E\u90E8\u7F72\u5728\u4E92\u8054\u7F51\u7684 GitLab \u670D\u52A1\u6A21\u62DF\u871C\u7F50\u663E\u793A\uFF0C\u8BE5\u653B\u51FB\u53D1\u751F\u5728 11 \u6708 10 \u65E5\u665A\u4E0A 21 \u70B9\uFF0C\u67D0\u56FD\u5185 IP \u7ECF\u8FC7\u7B80\u5355\u626B\u63CF\u8E29\u70B9\u540E\uFF0C\u53D1\u9001\u53EF\u7591 HTTP POST \u8BF7\u6C42\uFF0C\u7ECF\u8FC7\u5206\u6790\u786E\u8BA4\u8BE5\u6F0F\u6D1E\u4E3A\u5229\u7528 ExifTool \u89E3\u6790\u56FE\u7247\u5F02\u5E38\u5BFC\u81F4\u547D\u4EE4\u6267\u884C\u7684 CVE-2021-22205\uFF0C\u5E76\u63D0\u53D6\u884C\u4E3A\u7279\u5F81\u63A8\u9001\u7ED9 OneEDR \u5BA2\u6237\u3002\u8BE6\u7EC6\u60C5\u51B5\u53C2\u8003\uFF1A<https://blog.csdn.net/HFish2021/article/details/122050063>\u3002

&emsp;\u8FD1\u671F\uFF0C\u6211\u4EEC\u516C\u53F8\u7684 gitlab \u670D\u52A1\u5668\u4E5F\u88AB\u6CE8\u5165\u6316\u77FF\u7A0B\u5E8F\uFF0C\u7ECF\u8FC7\u6392\u67E5 GitLab \u7248\u672C\u5904\u7406\u6F0F\u6D1E\u7248\u672C\u8303\u56F4\uFF0C\u56E0\u6B64\u4E0D\u5F97\u4E0D\u8FDB\u884C\u7248\u672C\u5347\u7EA7\u3002\u76EE\u524D\u5F71\u54CD\u7684\u7248\u672C\u8303\u56F4\u5982\u4E0B\uFF1A
11.9 <= GitLab\uFF08CE/EE\uFF09< 13.8.8
13.9 <= GitLab\uFF08CE/EE\uFF09< 13.9.6
13.10 <= GitLab\uFF08CE/EE\uFF09< 13.10.3

## \u56DB\u3001GitLab \u76F8\u5173\u94FE\u63A5

GitLab \u5B98\u7F51\uFF1A<https://about.gitlab.com/>  
GitLab \u6E05\u534E\u955C\u50CF\u6E90\uFF1A<https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/>
`,contentRendered:`<p>\u2003GitLab \u662F\u7531 GitLabInc.\u5F00\u53D1\uFF0C\u4F7F\u7528 MIT \u8BB8\u53EF\u8BC1\u7684\u57FA\u4E8E\u7F51\u7EDC\u7684 Git \u4ED3\u5E93\u7BA1\u7406\u5DE5\u5177\uFF0C\u4E14\u5177\u6709 wiki \u548C issue \u8DDF\u8E2A\u529F\u80FD\u3002\u4F7F\u7528 Git \u4F5C\u4E3A\u4EE3\u7801\u7BA1\u7406\u5DE5\u5177\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u642D\u5EFA\u8D77\u6765\u7684 web \u670D\u52A1\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001gitlab-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001gitlab-\u7B80\u4ECB" aria-hidden="true">#</a> \u4E00\u3001GitLab \u7B80\u4ECB</h2>
<p>\u2003GitLab \u662F\u4E00\u4E2A\u7528\u4E8E\u4ED3\u5E93\u7BA1\u7406\u7CFB\u7EDF\u7684\u5F00\u6E90\u9879\u76EE\uFF0C\u4F7F\u7528 Git \u4F5C\u4E3A\u4EE3\u7801\u7BA1\u7406\u5DE5\u5177\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u642D\u5EFA\u8D77\u6765\u7684 Web \u670D\u52A1\u3002GitLab \u7531\u4E4C\u514B\u5170\u7A0B\u5E8F\u5458 DmitriyZaporozhets \u548C ValerySizov \u5F00\u53D1\uFF0C\u5B83\u4F7F\u7528 Ruby \u8BED\u8A00\u5199\u6210\u3002\u540E\u6765\uFF0C\u4E00\u4E9B\u90E8\u5206\u7528 Go \u8BED\u8A00\u91CD\u5199\u3002\u622A\u6B62 2018 \u5E74 5 \u6708\uFF0C\u8BE5\u516C\u53F8\u7EA6\u6709 290 \u540D\u56E2\u961F\u6210\u5458\uFF0C\u4EE5\u53CA 2000 \u591A\u540D\u5F00\u6E90\u8D21\u732E\u8005\u3002GitLab \u88AB IBM\uFF0CSony\uFF0CJ\xFClichResearchCenter\uFF0CNASA\uFF0CAlibaba\uFF0CInvincea\uFF0CO\u2019ReillyMedia\uFF0CLeibniz-Rechenzentrum(LRZ)\uFF0CCERN\uFF0CSpaceX \u7B49\u7EC4\u7EC7\u4F7F\u7528\u3002<br>
\u2003Gitlab \u4ECE 2011 \u5E74 10 \u6708 GitLab \u8FDB\u884C\u7B2C\u4E00\u6B21\u4EE3\u7801\u63D0\u4EA4\uFF0C\u5230 2021 \u5E74 10 \u6708\u6B63\u5F0F\u9646\u7EB3\u65AF\u8FBE\u514B\u4E0A\u5E02\uFF0CGitLab \u7684\u53D1\u5C55\u81F3\u4ECA\u5DF2\u6709\u6574\u6574\u5341\u5E74\u3002\u800C\u5728\u8FC7\u53BB\u7684\u53D1\u5C55\u4E2D\uFF0CGitLab \u5728\u4E2D\u56FD\u5E02\u573A\u4E00\u76F4\u9762\u4E34\u7740\u4E00\u4E2A\u95EE\u9898\u3002\u4F17\u6240\u5468\u77E5\uFF0C\u4E2D\u56FD\u662F\u76EE\u524D\u5168\u7403\u6700\u5927\u7684\u8F6F\u4EF6\u5F00\u53D1\u5E02\u573A\u4E4B\u4E00\uFF0CGitLab \u4E5F\u62E5\u6709\u7740\u6570\u767E\u4E07\u4E2D\u56FD\u7528\u6237\u548C\u8BF8\u591A\u77E5\u540D\u7684\u4E2D\u56FD\u672C\u571F\u4F01\u4E1A\u7528\u6237\u3002\u7136\u800C\uFF0C\u5728\u4EE5\u5F80\uFF0C\u4E2D\u56FD\u7528\u6237\u53EA\u80FD\u901A\u8FC7 GitLab \u7ECF\u9500\u5546\u548C\u7CFB\u7EDF\u96C6\u6210\u5546\u7F51\u7EDC\u83B7\u53D6 GitLab \u5E73\u53F0\u7684\u81EA\u52A9\u7BA1\u7406\u7248\u672C\uFF0C\u4E14\u65E0\u6CD5\u5F97\u5230\u5145\u5206\u7684\u672C\u571F\u6280\u672F\u652F\u6301\u3002
\u6240\u4EE5\uFF0C\u4E3A\u4E86\u5E2E\u52A9\u4E2D\u56FD\u7528\u6237\u66F4\u597D\u5730\u4F7F\u7528 GitLab \u4EA4\u4ED8\u521B\u65B0\uFF0C\u5408\u8D44\u516C\u53F8\u6781\u72D0(GitLab)\u5E94\u8FD0\u800C\u751F\uFF0C\u8BE5\u516C\u53F8\u7531 GitLab Inc.\u4EE5\u6280\u672F\u6388\u6743\u7684\u5F62\u5F0F\u5165\u80A1\uFF0C\u4E0E\u72EC\u5BB6\u9886\u6295\u7EA2\u6749\u5BBD\u5E26\u8DE8\u5883\u6570\u5B57\u4EA7\u4E1A\u57FA\u91D1\uFF0C\u4EE5\u53CA\u9AD8\u6210\u8D44\u672C\u5408\u4F5C\u8BBE\u7ACB\uFF0C\u7531\u4E2D\u56FD\u7BA1\u7406\u56E2\u961F\u5728\u56FD\u5185\u72EC\u7ACB\u8FD0\u8425\u3002\u5728\u6388\u6743\u65B9\u9762\uFF0C\u6781\u72D0(GitLab) \u62E5\u6709 GitLab \u72EC\u5BB6\u4E14\u4E0D\u53EF\u64A4\u9500\u7684\u6280\u672F\u548C\u54C1\u724C\u6388\u6743\uFF0C\u5168\u9762\u670D\u52A1\u4E8E\u4E2D\u56FD\u5927\u9646\u3001\u9999\u6E2F\u548C\u6FB3\u95E8\u7684\u4F01\u4E1A\u548C\u7528\u6237\uFF0C\u5E76\u6839\u636E\u4E2D\u56FD\u5E02\u573A\u9700\u6C42\u63A8\u51FA\u7279\u5B9A\u7684\u8F6F\u4EF6\u529F\u80FD\u548C\u670D\u52A1\u652F\u6301\u30022022 \u5E74\uFF0C\u6781\u72D0(GitLab)\u6B63\u5F0F\u5BA3\u5E03\u63A8\u51FA\u6781\u72D0 GitLab SaaS \uFF0C\u4E3A\u4E2D\u56FD\u7528\u6237\u63D0\u4F9B\u4ECE\u6E90\u4EE3\u7801\u6258\u7BA1\u5230\u5F00\u53D1\u8FD0\u7EF4\u7684\u5168\u6808\u5F0F\u4E00\u4F53\u5316 DevOps SaaS \u5E73\u53F0\u4E0E\u4F01\u4E1A\u7EA7\u4E13\u5BB6\u54A8\u8BE2\u670D\u52A1\u3002<br />
\u2003\u5728\u4EA7\u54C1\u65B9\u9762\uFF0CGitLab \u5728\u5168\u7403\u8303\u56F4\u5185\u6709\u4E09\u4E2A\u7248\u672C\uFF1A\u793E\u533A\u7248\uFF08CE\uFF09\u3001\u4F01\u4E1A\u7248\uFF08EE\uFF09\u3001\u6781\u72D0\u7248 (JH)\uFF0C\u6781\u72D0 GitLab \u662F\u5728\u4E2D\u56FD\u5927\u9646\u548C\u6E2F\u6FB3\u5730\u533A\u53D1\u884C\u7684\u4F01\u4E1A\u7EA7 GitLab \u7248\u672C\uFF0C\u62E5\u6709 GitLab \u6280\u672F\u548C\u54C1\u724C\u72EC\u5BB6\u6388\u6743\uFF0C\u57FA\u4E8E GitLab EE \u548C\u6781\u72D0(GitLab)\u6301\u6709\u72EC\u7ACB\u77E5\u8BC6\u4EA7\u6743\u7684\u2014\u2014JH \u4EE3\u7801\u4ED3\u5E93\u6784\u5EFA\uFF0C\u7531\u6781\u72D0(GitLab)\u516C\u53F8\u5728\u56FD\u5185\u72EC\u7ACB\u8FD0\u8425\u3002\u540C\u65F6\uFF0C\u6781\u72D0 GitLab \u652F\u6301\u79C1\u6709\u5316\u90E8\u7F72\uFF08self-managed\uFF09\u7248\u672C\u548C SaaS \u670D\u52A1\u3002\u6781\u72D0 GitLab \u7684\u4F01\u4E1A\u7EA7\u8BA2\u9605\u8BB8\u53EF\u8BC1\u3001\u6E90\u4EE3\u7801\u7BA1\u7406\u3001\u652F\u4ED8\u7CFB\u7EDF\u7B49\u5747\u5728\u4E2D\u56FD\u5883\u5185\u7BA1\u7406\uFF0C\u53D7\u4E2D\u56FD\u6CD5\u5F8B\u4FDD\u62A4\u3002</p>
<h2 id="\u4E8C\u3001gitlab\u3001gitlab\u3001github\u3001gitee" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001gitlab\u3001gitlab\u3001github\u3001gitee" aria-hidden="true">#</a> \u4E8C\u3001GitLab\u3001GitLab\u3001GitHub\u3001Gitee</h2>
<p>\u2003\u6781\u72D0 GitLab\u3001GitLab\u3001GitHub\u3001Gitee \u90FD\u662F\u5E02\u9762\u4E0A\u5E38\u89C1\u7684\u4E0E\u4EE3\u7801\u6258\u7BA1\u6709\u5173\u7684\u5E73\u53F0\uFF0C\u4F46\u662F\u8FD9\u56DB\u79CD\u4EA7\u54C1\u8FD8\u662F\u6709\u6240\u5DEE\u5F02\u7684\u3002</p>
<h3 id="_1\u3001\u53D1\u5C55\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u53D1\u5C55\u80CC\u666F" aria-hidden="true">#</a> 1\u3001\u53D1\u5C55\u80CC\u666F</h3>
<p>\u8FD9\u56DB\u4E2A Giter \u7684\u53D1\u5C55\u5386\u53F2\u5404\u4E0D\u76F8\u540C\uFF0CGitHub \u5386\u53F2\u6700\u957F\uFF0C\u5728 2008 \u5E74\u4E0A\u7EBF\uFF1BGitLab \u5176\u6B21\uFF0CGitLab \u5728 2011 \u5E74\u4E0A\u7EBF \uFF1B\u63A5\u4E0B\u6765\u662F Gitee\uFF0C\u5728 2013 \u5E74\u63A8\u51FA\uFF1B\u6700\u540E\u662F\u6781\u72D0 GitLab\uFF0C\u6210\u7ACB\u4E8E 2021 \u5E74 3 \u6708 18 \u65E5\u3002\u56DB\u79CD\u4EA7\u54C1\u7684\u53D1\u5C55\u7B80\u53F2\u5982\u4E0B\u56FE\u6240\u793A\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202206222015231.png" alt=""></p>
<h3 id="_2\u3001\u603B\u7ED3\u5BF9\u6BD4\u56FE" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u603B\u7ED3\u5BF9\u6BD4\u56FE" aria-hidden="true">#</a> 2\u3001\u603B\u7ED3\u5BF9\u6BD4\u56FE</h3>
<p><img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202206222015511.png" alt=""></p>
<h2 id="\u4E09\u3001gitlab-\u4E25\u91CD\u6F0F\u6D1E" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001gitlab-\u4E25\u91CD\u6F0F\u6D1E" aria-hidden="true">#</a> \u4E09\u3001GitLab \u4E25\u91CD\u6F0F\u6D1E</h2>
<p>\u2003\u8FD1\u65E5\uFF0C\u5FAE\u6B65\u5728\u7EBF\u65D7\u4E0B\u5FAE\u6B65\u60C5\u62A5\u5C40\u5229\u7528\u514D\u8D39\u793E\u533A\u871C\u7F50 HFish \u6355\u83B7\u5230 GitLab \u672A\u6388\u6743\u8FDC\u7A0B\u547D\u4EE4\u6267\u884C\u6F0F\u6D1E\uFF08CVE-2021-22205\uFF09\u5728\u91CE\u5229\u7528\uFF0C\u653B\u51FB\u6210\u529F\u540E\u653B\u51FB\u8005\u4F1A\u690D\u5165\u6316\u77FF\u6728\u9A6C\u8FDB\u884C\u6316\u77FF\u3002\u8BE5\u6F0F\u6D1E\u65E0\u9700\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u5373\u53EF\u8FDB\u5229\u7528\uFF0C\u5371\u5BB3\u6781\u5927\u3002\u5728 2021 \u5E74\u201C\u53CC 11\u201D\u524D\u591C\uFF0C HFish \u871C\u7F50\u4E0E OneEDR \u8054\u5408\u884C\u52A8\uFF0C\u6355\u83B7\u5E76\u5904\u7F6E\u4E86\u4E00\u8D77\u771F\u5B9E\u5229\u7528 GitLab \u672A\u6388\u6743\u8FDC\u7A0B\u547D\u4EE4\u6267\u884C\u6F0F\u6D1E\uFF08CVE-2021-22205\uFF09\u5728\u91CE\u6F0F\u6D1E\u8FDB\u884C\u6316\u77FF\u7684\u653B\u51FB\u3002\u6839\u636E\u90E8\u7F72\u5728\u4E92\u8054\u7F51\u7684 GitLab \u670D\u52A1\u6A21\u62DF\u871C\u7F50\u663E\u793A\uFF0C\u8BE5\u653B\u51FB\u53D1\u751F\u5728 11 \u6708 10 \u65E5\u665A\u4E0A 21 \u70B9\uFF0C\u67D0\u56FD\u5185 IP \u7ECF\u8FC7\u7B80\u5355\u626B\u63CF\u8E29\u70B9\u540E\uFF0C\u53D1\u9001\u53EF\u7591 HTTP POST \u8BF7\u6C42\uFF0C\u7ECF\u8FC7\u5206\u6790\u786E\u8BA4\u8BE5\u6F0F\u6D1E\u4E3A\u5229\u7528 ExifTool \u89E3\u6790\u56FE\u7247\u5F02\u5E38\u5BFC\u81F4\u547D\u4EE4\u6267\u884C\u7684 CVE-2021-22205\uFF0C\u5E76\u63D0\u53D6\u884C\u4E3A\u7279\u5F81\u63A8\u9001\u7ED9 OneEDR \u5BA2\u6237\u3002\u8BE6\u7EC6\u60C5\u51B5\u53C2\u8003\uFF1A<a href="https://blog.csdn.net/HFish2021/article/details/122050063" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/HFish2021/article/details/122050063<ExternalLinkIcon/></a>\u3002</p>
<p>\u2003\u8FD1\u671F\uFF0C\u6211\u4EEC\u516C\u53F8\u7684 gitlab \u670D\u52A1\u5668\u4E5F\u88AB\u6CE8\u5165\u6316\u77FF\u7A0B\u5E8F\uFF0C\u7ECF\u8FC7\u6392\u67E5 GitLab \u7248\u672C\u5904\u7406\u6F0F\u6D1E\u7248\u672C\u8303\u56F4\uFF0C\u56E0\u6B64\u4E0D\u5F97\u4E0D\u8FDB\u884C\u7248\u672C\u5347\u7EA7\u3002\u76EE\u524D\u5F71\u54CD\u7684\u7248\u672C\u8303\u56F4\u5982\u4E0B\uFF1A
11.9 &lt;= GitLab\uFF08CE/EE\uFF09&lt; 13.8.8
13.9 &lt;= GitLab\uFF08CE/EE\uFF09&lt; 13.9.6
13.10 &lt;= GitLab\uFF08CE/EE\uFF09&lt; 13.10.3</p>
<h2 id="\u56DB\u3001gitlab-\u76F8\u5173\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001gitlab-\u76F8\u5173\u94FE\u63A5" aria-hidden="true">#</a> \u56DB\u3001GitLab \u76F8\u5173\u94FE\u63A5</h2>
<p>GitLab \u5B98\u7F51\uFF1A<a href="https://about.gitlab.com/" target="_blank" rel="noopener noreferrer">https://about.gitlab.com/<ExternalLinkIcon/></a><br>
GitLab \u6E05\u534E\u955C\u50CF\u6E90\uFF1A<a href="https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/" target="_blank" rel="noopener noreferrer">https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/<ExternalLinkIcon/></a></p>
`,date:"2022-06-22",deps:[],links:[],pathInferred:"/posts/devops/gitlab/",pathLocale:"/",permalink:null,routeMeta:{title:"GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4"},sfcBlocks:[],slug:"README",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/gitlab/README.md",filePathRelative:"posts/devops/gitlab/README.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/gitlab/index.html.vue",componentFilePathRelative:"pages/posts/devops/gitlab/index.html.vue",componentFileChunkName:"v-ec046092",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/gitlab/index.html.js",dataFilePathRelative:"pages/posts/devops/gitlab/index.html.js",dataFileChunkName:"v-ec046092",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/gitlab/index.html",htmlFilePathRelative:"posts/devops/gitlab/index.html"},title:"GitLab\u3001GitLab\u3001GitHub\u3001Gitee\u5BF9\u6BD4"},["/posts/devops/gitlab/index.html","/posts/devops/gitlab/README.md"]],["v-5a96e6d2","/posts/devops/nginx/",{_blog:{data:{key:"v-5a96e6d2",path:"/posts/devops/nginx/",title:"nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790",lang:"zh-CN",frontmatter:{title:"nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790",date:"2022-02-19T15:53:03.000Z",lang:"zh-CN",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041530281.png",sticky:5,summary:`\u2003Nginx\u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406 web \u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86IMAP/POP3/SMTP \u670D\u52A1\u3002\u9002\u5408\u505A\u9759\u6001\u6587\u4EF6\u5904\u7406\u548C\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u8F7B\u91CF\u7EA7,\u975E\u963B\u585E\uFF0C\u652F\u6301\u9AD8\u5E76\u53D1\uFF0C\u9AD8\u6297\u538B\uFF0C\u8017\u8D39\u5185\u5B58\u5C11\u3002\u540C\u65F6\u652F\u6301\u6545\u969C\u8F6C\u79FB\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-02-19T15:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nginx\u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406 web \u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86IMAP/POP3/SMTP \u670D\u52A1\u3002\u9002\u5408\u505A\u9759\u6001\u6587\u4EF6\u5904\u7406\u548C\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u8F7B\u91CF\u7EA7,\u975E\u963B\u585E\uFF0C\u652F\u6301\u9AD8\u5E76\u53D1\uFF0C\u9AD8\u6297\u538B\uFF0C\u8017\u8D39\u5185\u5B58\u5C11\u3002\u540C\u65F6\u652F\u6301\u6545\u969C\u8F6C\u79FB\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001nginx \u7B80\u4ECB",slug:"\u4E00\u3001nginx-\u7B80\u4ECB",children:[]},{level:2,title:"\u4E8C\u3001Nginx \u7684\u4F18\u70B9",slug:"\u4E8C\u3001nginx-\u7684\u4F18\u70B9",children:[]},{level:2,title:"\u4E09\u3001Nginx \u7684\u7F3A\u70B9",slug:"\u4E09\u3001nginx-\u7684\u7F3A\u70B9",children:[]},{level:2,title:"\u56DB\u3001\u529F\u80FD\u5BF9\u6BD4",slug:"\u56DB\u3001\u529F\u80FD\u5BF9\u6BD4",children:[{level:3,title:"Nginx \u548C tomcat \u7684\u533A\u522B",slug:"nginx-\u548C-tomcat-\u7684\u533A\u522B",children:[]},{level:3,title:"Nginx \u548C Apache \u7684\u533A\u522B",slug:"nginx-\u548C-apache-\u7684\u533A\u522B",children:[]}]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/nginx/README.md",readingTime:{minutes:6.1,words:1829},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/nginx/`},key:"v-5a96e6d2",path:"/posts/devops/nginx/",title:"nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790",lang:"zh-CN",frontmatter:{title:"nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790",date:"2022-02-19T15:53:03.000Z",lang:"zh-CN",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041530281.png",sticky:5,summary:`\u2003Nginx\u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406 web \u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86IMAP/POP3/SMTP \u670D\u52A1\u3002\u9002\u5408\u505A\u9759\u6001\u6587\u4EF6\u5904\u7406\u548C\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u8F7B\u91CF\u7EA7,\u975E\u963B\u585E\uFF0C\u652F\u6301\u9AD8\u5E76\u53D1\uFF0C\u9AD8\u6297\u538B\uFF0C\u8017\u8D39\u5185\u5B58\u5C11\u3002\u540C\u65F6\u652F\u6301\u6545\u969C\u8F6C\u79FB\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-02-19T15:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nginx\u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406 web \u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86IMAP/POP3/SMTP \u670D\u52A1\u3002\u9002\u5408\u505A\u9759\u6001\u6587\u4EF6\u5904\u7406\u548C\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u8F7B\u91CF\u7EA7,\u975E\u963B\u585E\uFF0C\u652F\u6301\u9AD8\u5E76\u53D1\uFF0C\u9AD8\u6297\u538B\uFF0C\u8017\u8D39\u5185\u5B58\u5C11\u3002\u540C\u65F6\u652F\u6301\u6545\u969C\u8F6C\u79FB\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001nginx \u7B80\u4ECB",slug:"\u4E00\u3001nginx-\u7B80\u4ECB",children:[]},{level:2,title:"\u4E8C\u3001Nginx \u7684\u4F18\u70B9",slug:"\u4E8C\u3001nginx-\u7684\u4F18\u70B9",children:[]},{level:2,title:"\u4E09\u3001Nginx \u7684\u7F3A\u70B9",slug:"\u4E09\u3001nginx-\u7684\u7F3A\u70B9",children:[]},{level:2,title:"\u56DB\u3001\u529F\u80FD\u5BF9\u6BD4",slug:"\u56DB\u3001\u529F\u80FD\u5BF9\u6BD4",children:[{level:3,title:"Nginx \u548C tomcat \u7684\u533A\u522B",slug:"nginx-\u548C-tomcat-\u7684\u533A\u522B",children:[]},{level:3,title:"Nginx \u548C Apache \u7684\u533A\u522B",slug:"nginx-\u548C-apache-\u7684\u533A\u522B",children:[]}]}],content:`---
title: nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790
date: 2022-02-19 15:53:03
lang: zh-CN
tag:
  - nginx
category:
  - nginx
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041530281.png
sticky: 5
---

&emsp;Nginx\u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406 web \u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86IMAP/POP3/SMTP \u670D\u52A1\u3002\u9002\u5408\u505A\u9759\u6001\u6587\u4EF6\u5904\u7406\u548C\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u8F7B\u91CF\u7EA7,\u975E\u963B\u585E\uFF0C\u652F\u6301\u9AD8\u5E76\u53D1\uFF0C\u9AD8\u6297\u538B\uFF0C\u8017\u8D39\u5185\u5B58\u5C11\u3002\u540C\u65F6\u652F\u6301\u6545\u969C\u8F6C\u79FB\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002

<!-- more -->

## \u4E00\u3001nginx \u7B80\u4ECB

::: theorem
Nginx (engine x) \u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406 web \u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86 IMAP/POP3/SMTP \u670D\u52A1\u3002Nginx \u662F\u7531\u4F0A\u6208\u5C14\xB7\u8D5B\u7D22\u8036\u592B\u4E3A\u4FC4\u7F57\u65AF\u8BBF\u95EE\u91CF\u7B2C\u4E8C\u7684 Rambler.ru \u7AD9\u70B9\uFF08\u4FC4\u6587\uFF1A\u0420\u0430\u043C\u0431\u043B\u0435\u0440\uFF09\u5F00\u53D1\u7684\uFF0C\u7B2C\u4E00\u4E2A\u516C\u5F00\u7248\u672C 0.1.0 \u53D1\u5E03\u4E8E 2004 \u5E74 10 \u6708 4 \u65E5\u3002
\u5176\u5C06\u6E90\u4EE3\u7801\u4EE5\u7C7B BSD \u8BB8\u53EF\u8BC1\u7684\u5F62\u5F0F\u53D1\u5E03\uFF0C\u56E0\u5B83\u7684\u7A33\u5B9A\u6027\u3001\u4E30\u5BCC\u7684\u529F\u80FD\u96C6\u3001\u7B80\u5355\u7684\u914D\u7F6E\u6587\u4EF6\u548C\u4F4E\u7CFB\u7EDF\u8D44\u6E90\u7684\u6D88\u8017\u800C\u95FB\u540D\u30022011 \u5E74 6 \u6708 1 \u65E5\uFF0Cnginx 1.0.4 \u53D1\u5E03\u3002
Nginx \u662F\u4E00\u6B3E\u8F7B\u91CF\u7EA7\u7684 Web \u670D\u52A1\u5668/\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\u53CA\u7535\u5B50\u90AE\u4EF6\uFF08IMAP/POP3\uFF09\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u5728 BSD-like \u534F\u8BAE\u4E0B\u53D1\u884C\u3002\u5176\u7279\u70B9\u662F\u5360\u6709\u5185\u5B58\u5C11\uFF0C\u5E76\u53D1\u80FD\u529B\u5F3A\uFF0C\u4E8B\u5B9E\u4E0A nginx \u7684\u5E76\u53D1\u80FD\u529B\u5728\u540C\u7C7B\u578B\u7684\u7F51\u9875\u670D\u52A1\u5668\u4E2D\u8868\u73B0\u8F83\u597D\uFF0C\u4E2D\u56FD\u5927\u9646\u4F7F\u7528 nginx \u7F51\u7AD9\u7528\u6237\u6709\uFF1A\u767E\u5EA6\u3001\u4EAC\u4E1C\u3001\u65B0\u6D6A\u3001\u7F51\u6613\u3001\u817E\u8BAF\u3001\u6DD8\u5B9D\u7B49\u3002

::: right
\u6765\u81EA [\u7EF4\u57FA\u767E\u79D1](https://baike.baidu.com/item/nginx/3817705?fr=aladdin)
:::

## \u4E8C\u3001Nginx \u7684\u4F18\u70B9

1\u3001**\u8DE8\u5E73\u53F0**\uFF1ANginx \u53EF\u4EE5\u5728\u5927\u591A\u6570 Unix like OS \u7F16\u8BD1\u8FD0\u884C\uFF0C\u800C\u4E14\u4E5F\u6709 Windows \u7684\u79FB\u690D\u7248\u672C\u3002

2\u3001**\u7B80\u5355\u7A33\u5B9A**\uFF1A\u914D\u7F6E\u7B80\u5355\uFF0C\u975E\u5E38\u5BB9\u6613\u4E0A\u624B\uFF0C\u57FA\u672C\u5728\u4E00\u4E2A conf \u6587\u4EF6\u4E2D\u914D\u7F6E\uFF0C\u6027\u80FD\u6BD4\u8F83\u7A33\u5B9A\uFF0C\u7528\u4E8E\u53CD\u5411\u4EE3\u7406\uFF0C\u5B95\u673A\u7684\u6982\u7387\u5FAE\u4E4E\u5176\u5FAE\uFF0C\u53EF\u4EE5 7\\*24 \u5C0F\u65F6\u957F\u65F6\u95F4\u4E0D\u95F4\u65AD\u8FD0\u884C\u624B\u3002

3\u3001**\u975E\u963B\u585E**\u3001\u9AD8\u5E76\u53D1\u8FDE\u63A5\uFF1A\u6570\u636E\u590D\u5236\u65F6\uFF0C\u78C1\u76D8 I/O \u7684\u7B2C\u4E00\u9636\u6BB5\u662F\u975E\u963B\u585E\u7684\u3002\u5B98\u65B9\u6D4B\u8BD5\u80FD\u591F\u652F\u6491 5 \u4E07\u5E76\u53D1\u8FDE\u63A5\uFF0C\u5728\u5B9E\u9645\u751F\u4EA7\u73AF\u5883\u4E2D\u8DD1\u5230 2 \uFF5E 3 \u4E07\u5E76\u53D1\u8FDE\u63A5\u6570.(\u8FD9\u5F97\u76CA\u4E8E Nginx \u4F7F\u7528\u4E86\u6700\u65B0\u7684 epoll \u6A21\u578B)

4\u3001**\u4E8B\u4EF6\u9A71\u52A8**\uFF1A\u901A\u4FE1\u673A\u5236\u91C7\u7528 epoll \u6A21\u578B\uFF0C\u652F\u6301\u66F4\u5927\u7684\u5E76\u53D1\u8FDE\u63A5\u3002

5\u3001**master/worker \u7ED3\u6784**\uFF1A\u4E00\u4E2A master \u8FDB\u7A0B\uFF0C\u751F\u6210\u4E00\u4E2A\u6216\u591A\u4E2A worker \u8FDB\u7A0B

6\u3001**\u5185\u5B58\u6D88\u8017\u5C0F**\uFF1A\u5904\u7406\u5927\u5E76\u53D1\u7684\u8BF7\u6C42\u5185\u5B58\u6D88\u8017\u975E\u5E38\u5C0F\u3002\u5728 3 \u4E07\u5E76\u53D1\u8FDE\u63A5\u4E0B\uFF0C\u5F00\u542F\u7684 10 \u4E2A Nginx \u8FDB\u7A0B\u624D\u6D88\u8017 150M \u5185\u5B58\uFF0815M\\*10=150M\uFF09

7\u3001**\u6210\u672C\u4F4E\u5EC9**\uFF1ANginx \u53EF\u4EE5\u505A\u9AD8\u5E76\u53D1\u7684\u8D1F\u8F7D\u5747\u8861\uFF0C\u4E14 Nginx \u662F\u5F00\u6E90\u514D\u8D39\u7684\u3002\u800C\u8D2D\u4E70 F5 BIG-IP\u3001NetScaler \u7B49\u786C\u4EF6\u8D1F\u8F7D\u5747\u8861\u4EA4\u6362\u673A\u5219\u9700\u8981\u5341\u591A\u4E07\u81F3\u51E0\u5341\u4E07\u4EBA\u6C11\u5E01

8\u3001**\u5185\u7F6E\u7684\u5065\u5EB7\u68C0\u67E5\u529F\u80FD**\uFF1ANGINX \u80FD\u591F\u6839\u636E\u5E94\u7528\u670D\u52A1\u5668\u5904\u7406\u9875\u9762\u8FD4\u56DE\u7684\u72B6\u6001\u7801\u3001\u8D85\u65F6\u4FE1\u606F\u7B49\u68C0\u6D4B\u670D\u52A1\u5668\u662F\u5426\u51FA\u73B0\u6545\u969C\uFF0C\u5E76\u53CA\u65F6\u8FD4\u56DE\u9519\u8BEF\u7684\u8BF7\u6C42\u91CD\u65B0\u63D0\u4EA4\u5230\u5176\u5B83\u8282\u70B9\u4E0A

9\u3001**\u8282\u7701\u5E26\u5BBD**\uFF1A\u652F\u6301 GZIP \u538B\u7F29\uFF0C\u53EF\u4EE5\u6DFB\u52A0\u6D4F\u89C8\u5668\u672C\u5730\u7F13\u5B58\u7684 Header \u5934\u3002

10\u3001**\u7A33\u5B9A\u6027\u9AD8**\uFF1A\u7528\u4E8E\u53CD\u5411\u4EE3\u7406\uFF0C\u5B95\u673A\u7684\u6982\u7387\u5FAE\u4E4E\u5176\u5FAE

11\u3001**\u6A21\u5757\u5316\u7A0B\u5EA6\u9AD8**\uFF1ANginx \u662F\u9AD8\u5EA6\u6A21\u5757\u5316\u7684\u8BBE\u8BA1\uFF0C\u7F16\u5199\u6A21\u5757\u76F8\u5BF9\u7B80\u5355\uFF0C\u5305\u62EC gzipping, byte ranges, chunked responses,\u4EE5\u53CA SSI-filter \u7B49 filter\uFF0C\u652F\u6301 SSL \u548C TLSSNI\u3002

12\u3001**\u652F\u6301 Rwrite \u91CD\u5199\u89C4\u5219**\uFF1A\u80FD\u591F\u6839\u636E\u57DF\u540D\u3001URL \u7684\u4E0D\u540C\uFF0C \u5C06 HTTP \u8BF7\u6C42\u5206\u53D1\u5230\u4E0D\u540C\u7684\u540E\u7AEF\u670D\u52A1\u5668\u7FA4\u7EC4\u3002

13\u3001**\u652F\u6301\u53CD\u5411\u4EE3\u7406\u548C\u8D1F\u8F7D\u5747\u8861**\uFF1Anginx \u652F\u6301\u53CD\u5411\u4EE3\u7406\u548C\u8D1F\u8F7D\u5747\u8861\u7684\u529F\u80FD\u3002

14\u3001nginx \u4EE3\u7406\u548C\u540E\u7AEF web \u670D\u52A1\u5668\u95F4\u65E0\u9700\u957F\u8FDE\u63A5\uFF1B

15\u3001\u63A5\u6536\u7528\u6237\u8BF7\u6C42\u662F\u5F02\u6B65\u7684\uFF0C\u5373\u5148\u5C06\u7528\u6237\u8BF7\u6C42\u5168\u90E8\u63A5\u6536\u4E0B\u6765\uFF0C\u518D\u4E00\u6B21\u6027\u53D1\u9001\u540E\u540E\u7AEF web \u670D\u52A1\u5668\uFF0C\u6781\u5927\u7684\u51CF\u8F7B\u540E\u7AEF web \u670D\u52A1\u5668\u7684\u538B\u529B\u3002

16\u3001\u9001\u54CD\u5E94\u62A5\u6587\u65F6\uFF0C\u662F\u8FB9\u63A5\u6536\u6765\u81EA\u540E\u7AEF web \u670D\u52A1\u5668\u7684\u6570\u636E\uFF0C\u8FB9\u53D1\u9001\u7ED9\u5BA2\u6237\u7AEF\u7684\u3002

17\u3001\u7F51\u7EDC\u4F9D\u8D56\u578B\u4F4E\u3002NGINX \u5BF9\u7F51\u7EDC\u7684\u4F9D\u8D56\u7A0B\u5EA6\u975E\u5E38\u4F4E\uFF0C\u7406\u8BBA\u4E0A\u8BB2\uFF0C\u53EA\u8981\u80FD\u591F ping \u901A\u5C31\u53EF\u4EE5\u5B9E\u65BD\u8D1F\u8F7D\u5747\u8861\uFF0C\u800C\u4E14\u53EF\u4EE5\u6709\u6548\u533A\u5206\u5185\u7F51\u548C\u5916\u7F51\u6D41\u91CF\u3002

## \u4E09\u3001Nginx \u7684\u7F3A\u70B9

1\u3001**\u52A8\u6001\u5904\u7406\u5DEE**\uFF1ANginx\u53EA\u9002\u5408\u9759\u6001\u548C\u53CD\u5411\u4EE3\u7406\uFF0Cnginx \u5904\u7406\u9759\u6001\u6587\u4EF6\u597D,\u8017\u8D39\u5185\u5B58\u5C11\uFF0C\u4F46\u662F\u5904\u7406\u52A8\u6001\u9875\u9762\u5219\u5F88\u9E21\u808B\uFF0C\u73B0\u5728\u4E00\u822C\u524D\u7AEF\u7528 nginx \u4F5C\u4E3A\u53CD\u5411\u4EE3\u7406\u6297\u4F4F\u538B\u529B\uFF0Capache \u4F5C\u4E3A\u540E\u7AEF\u5904\u7406\u52A8\u6001\u8BF7\u6C42\u3002

2\u3001**rewrite \u5F31**\uFF1A\u867D\u7136 nginx \u652F\u6301 rewrite \u529F\u80FD\uFF0C\u4F46\u662F\u76F8\u6BD4\u4E8E Apache \u6765\u8BF4\uFF0CApache \u6BD4 nginx \u7684 rewrite \u5F3A\u5927\u3002

## \u56DB\u3001\u529F\u80FD\u5BF9\u6BD4

### Nginx \u548C tomcat \u7684\u533A\u522B

&emsp;nginx \u5E38\u7528\u505A\u9759\u6001\u5185\u5BB9\u670D\u52A1\u548C\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u76F4\u63A5\u5916\u6765\u8BF7\u6C42\u8F6C\u53D1\u7ED9\u540E\u9762\u7684\u5E94\u7528\u670D\u52A1\u5668\uFF08tomcat\uFF0CDjango \u7B49\uFF09\uFF0Ctomcat \u66F4\u591A\u7528\u6765\u505A\u4E00\u4E2A\u5E94\u7528\u5BB9\u5668\uFF0C\u8BA9 java web app \u6CE1\u5728\u91CC\u9762\u7684\u4E1C\u897F\u3002\u4E25\u683C\u610F\u4E49\u4E0A\u6765\u8BB2\uFF0CApache \u548C nginx \u5E94\u8BE5\u53EB\u505A HTTP Server\uFF0C\u800C tomcat \u662F\u4E00\u4E2A Application Server \u662F\u4E00\u4E2A Servlet/JSO \u5E94\u7528\u7684\u5BB9\u5668\u3002\u5BA2\u6237\u7AEF\u901A\u8FC7 HTTP Server \u8BBF\u95EE\u670D\u52A1\u5668\u4E0A\u5B58\u50A8\u7684\u8D44\u6E90\uFF08HTML \u6587\u4EF6\uFF0C\u56FE\u7247\u6587\u4EF6\u7B49\uFF09\uFF0CHTTP Server \u662F\u4E2D\u53EA\u662F\u628A\u670D\u52A1\u5668\u4E0A\u7684\u6587\u4EF6\u5982\u5B9E\u901A\u8FC7 HTTP \u534F\u8BAE\u4F20\u8F93\u7ED9\u5BA2\u6237\u7AEF\u3002\u5E94\u7528\u670D\u52A1\u5668\u5F80\u5F80\u662F\u8FD0\u884C\u5728 HTTP Server \u7684\u80CC\u540E\uFF0C\u6267\u884C\u5E94\u7528\uFF0C\u5C06\u52A8\u6001\u7684\u5185\u5BB9\u8F6C\u5316\u4E3A\u9759\u6001\u7684\u5185\u5BB9\u4E4B\u540E\uFF0C\u901A\u8FC7 HTTP Server \u5206\u53D1\u5230\u5BA2\u6237\u7AEF
\u6CE8\u610F\uFF1Anginx \u53EA\u662F\u628A\u8BF7\u6C42\u505A\u4E86\u5206\u53D1\uFF0C\u4E0D\u505A\u5904\u7406\uFF01\uFF01

### Nginx \u548C Apache \u7684\u533A\u522B

&emsp;Apache \u662F\u540C\u6B65\u591A\u8FDB\u7A0B\u6A21\u578B\uFF0C\u4E00\u4E2A\u8FDE\u63A5\u5BF9\u5E94\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C nginx \u662F\u5F02\u6B65\u7684\uFF0C\u591A\u4E2A\u8FDE\u63A5\uFF08\u4E07\u7EA7\u522B\uFF09\u53EF\u4EE5\u5BF9\u5E94\u4E00\u4E2A\u8FDB\u7A0B\u3002nginx \u8F7B\u91CF\u7EA7\uFF0C\u6297\u5E76\u53D1\uFF0C\u5904\u7406\u9759\u6001\u6587\u4EF6\u597D
Apache \u8D85\u7A33\u5B9A\uFF0C\u5BF9 PHP \u652F\u6301\u6BD4\u8F83\u7B80\u5355\uFF0Cnginx \u9700\u8981\u914D\u5408\u5176\u4ED6\u540E\u7AEF\u7528\uFF0C\u5904\u7406\u52A8\u6001\u8BF7\u6C42\u6709\u4F18\u52BF\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u524D\u7AEF nginx \u6297\u5E76\u53D1\uFF0C\u540E\u7AEF apache \u96C6\u7FA4\uFF0C\u914D\u5408\u8D77\u6765\u4F1A\u66F4\u597D\uFF0Cnignx \u7684\u6B63\u5411\u4EE3\u7406\u548C\u53CD\u5411\u4EE3\u7406

**1\u3001nginx \u76F8\u5BF9\u4E8E apache \u7684\u4F18\u70B9**
:::tip
\u8F7B\u91CF\u7EA7\uFF0C\u540C\u6837\u8D77 web \u670D\u52A1\uFF0C\u6BD4 apache \u5360\u7528\u66F4\u5C11\u7684\u5185\u5B58\u53CA\u8D44\u6E90 \u6297\u5E76\u53D1\uFF0Cnginx \u5904\u7406\u8BF7\u6C42\u662F\u5F02\u6B65\u975E\u963B\u585E\u7684\uFF0C\u800C apache \u5219\u662F\u963B\u585E\u578B\u7684\uFF0C\u5728\u9AD8\u5E76\u53D1\u4E0B nginx \u80FD\u4FDD\u6301\u4F4E\u8D44\u6E90\u4F4E\u6D88\u8017\u9AD8\u6027\u80FD\u9AD8\u5EA6\u6A21\u5757\u5316\u7684\u8BBE\u8BA1\uFF0C\u7F16\u5199\u6A21\u5757\u76F8\u5BF9\u7B80\u5355\u63D0\u4F9B\u8D1F\u8F7D\u5747\u8861,\u793E\u533A\u6D3B\u8DC3\uFF0C\u5404\u79CD\u9AD8\u6027\u80FD\u6A21\u5757\u51FA\u54C1\u8FC5\u901F
:::
**2\u3001apache \u76F8\u5BF9\u4E8E nginx \u7684\u4F18\u70B9**
:::tip
apache \u7684 rewrite\uFF08\u91CD\u5199\uFF09 \u6BD4 nginx \u7684\u5F3A\u5927 ;\u652F\u6301\u52A8\u6001\u9875\u9762;\u652F\u6301\u7684\u6A21\u5757\u591A\uFF0C\u57FA\u672C\u6DB5\u76D6\u6240\u6709\u5E94\u7528;\u6027\u80FD\u7A33\u5B9A\uFF0C\u800C nginx \u76F8\u5BF9 bug \u8F83\u591A\u3002
:::

**3\u3001\u4E24\u8005\u4F18\u7F3A\u70B9\u6BD4\u8F83**
:::tip
Nginx \u914D\u7F6E\u7B80\u6D01, Apache \u590D\u6742 ;
Nginx \u9759\u6001\u5904\u7406\u6027\u80FD\u6BD4 Apache \u9AD8 3 \u500D\u4EE5\u4E0A ;
Apache \u5BF9 PHP \u652F\u6301\u6BD4\u8F83\u7B80\u5355\uFF0CNginx \u9700\u8981\u914D\u5408\u5176\u4ED6\u540E\u7AEF\u7528;Apache \u7684\u7EC4\u4EF6\u6BD4 Nginx \u591A ;
apache \u662F\u540C\u6B65\u591A\u8FDB\u7A0B\u6A21\u578B\uFF0C\u4E00\u4E2A\u8FDE\u63A5\u5BF9\u5E94\u4E00\u4E2A\u8FDB\u7A0B;nginx \u662F\u5F02\u6B65\u7684\uFF0C\u591A\u4E2A\u8FDE\u63A5(\u4E07\u7EA7\u522B)\u53EF\u4EE5\u5BF9\u5E94\u4E00\u4E2A\u8FDB\u7A0B;
nginx \u5904\u7406\u9759\u6001\u6587\u4EF6\u597D,\u8017\u8D39\u5185\u5B58\u5C11;
\u52A8\u6001\u8BF7\u6C42\u7531 apache \u53BB\u505A\uFF0Cnginx \u53EA\u9002\u5408\u9759\u6001\u548C\u53CD\u5411;
Nginx \u9002\u5408\u505A\u524D\u7AEF\u670D\u52A1\u5668\uFF0C\u8D1F\u8F7D\u6027\u80FD\u5F88\u597D;
Nginx \u672C\u8EAB\u5C31\u662F\u4E00\u4E2A\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668 \uFF0C\u4E14\u652F\u6301\u8D1F\u8F7D\u5747\u8861
:::
`,contentRendered:`<p>\u2003Nginx\u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406 web \u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86IMAP/POP3/SMTP \u670D\u52A1\u3002\u9002\u5408\u505A\u9759\u6001\u6587\u4EF6\u5904\u7406\u548C\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u8F7B\u91CF\u7EA7,\u975E\u963B\u585E\uFF0C\u652F\u6301\u9AD8\u5E76\u53D1\uFF0C\u9AD8\u6297\u538B\uFF0C\u8017\u8D39\u5185\u5B58\u5C11\u3002\u540C\u65F6\u652F\u6301\u6545\u969C\u8F6C\u79FB\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u529F\u80FD\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001nginx-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001nginx-\u7B80\u4ECB" aria-hidden="true">#</a> \u4E00\u3001nginx \u7B80\u4ECB</h2>
<p>::: theorem
Nginx (engine x) \u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406 web \u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u63D0\u4F9B\u4E86 IMAP/POP3/SMTP \u670D\u52A1\u3002Nginx \u662F\u7531\u4F0A\u6208\u5C14\xB7\u8D5B\u7D22\u8036\u592B\u4E3A\u4FC4\u7F57\u65AF\u8BBF\u95EE\u91CF\u7B2C\u4E8C\u7684 Rambler.ru \u7AD9\u70B9\uFF08\u4FC4\u6587\uFF1A\u0420\u0430\u043C\u0431\u043B\u0435\u0440\uFF09\u5F00\u53D1\u7684\uFF0C\u7B2C\u4E00\u4E2A\u516C\u5F00\u7248\u672C 0.1.0 \u53D1\u5E03\u4E8E 2004 \u5E74 10 \u6708 4 \u65E5\u3002
\u5176\u5C06\u6E90\u4EE3\u7801\u4EE5\u7C7B BSD \u8BB8\u53EF\u8BC1\u7684\u5F62\u5F0F\u53D1\u5E03\uFF0C\u56E0\u5B83\u7684\u7A33\u5B9A\u6027\u3001\u4E30\u5BCC\u7684\u529F\u80FD\u96C6\u3001\u7B80\u5355\u7684\u914D\u7F6E\u6587\u4EF6\u548C\u4F4E\u7CFB\u7EDF\u8D44\u6E90\u7684\u6D88\u8017\u800C\u95FB\u540D\u30022011 \u5E74 6 \u6708 1 \u65E5\uFF0Cnginx 1.0.4 \u53D1\u5E03\u3002
Nginx \u662F\u4E00\u6B3E\u8F7B\u91CF\u7EA7\u7684 Web \u670D\u52A1\u5668/\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\u53CA\u7535\u5B50\u90AE\u4EF6\uFF08IMAP/POP3\uFF09\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u5728 BSD-like \u534F\u8BAE\u4E0B\u53D1\u884C\u3002\u5176\u7279\u70B9\u662F\u5360\u6709\u5185\u5B58\u5C11\uFF0C\u5E76\u53D1\u80FD\u529B\u5F3A\uFF0C\u4E8B\u5B9E\u4E0A nginx \u7684\u5E76\u53D1\u80FD\u529B\u5728\u540C\u7C7B\u578B\u7684\u7F51\u9875\u670D\u52A1\u5668\u4E2D\u8868\u73B0\u8F83\u597D\uFF0C\u4E2D\u56FD\u5927\u9646\u4F7F\u7528 nginx \u7F51\u7AD9\u7528\u6237\u6709\uFF1A\u767E\u5EA6\u3001\u4EAC\u4E1C\u3001\u65B0\u6D6A\u3001\u7F51\u6613\u3001\u817E\u8BAF\u3001\u6DD8\u5B9D\u7B49\u3002</p>
<p>::: right
\u6765\u81EA <a href="https://baike.baidu.com/item/nginx/3817705?fr=aladdin" target="_blank" rel="noopener noreferrer">\u7EF4\u57FA\u767E\u79D1<ExternalLinkIcon/></a>
:::</p>
<h2 id="\u4E8C\u3001nginx-\u7684\u4F18\u70B9" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001nginx-\u7684\u4F18\u70B9" aria-hidden="true">#</a> \u4E8C\u3001Nginx \u7684\u4F18\u70B9</h2>
<p>1\u3001<strong>\u8DE8\u5E73\u53F0</strong>\uFF1ANginx \u53EF\u4EE5\u5728\u5927\u591A\u6570 Unix like OS \u7F16\u8BD1\u8FD0\u884C\uFF0C\u800C\u4E14\u4E5F\u6709 Windows \u7684\u79FB\u690D\u7248\u672C\u3002</p>
<p>2\u3001<strong>\u7B80\u5355\u7A33\u5B9A</strong>\uFF1A\u914D\u7F6E\u7B80\u5355\uFF0C\u975E\u5E38\u5BB9\u6613\u4E0A\u624B\uFF0C\u57FA\u672C\u5728\u4E00\u4E2A conf \u6587\u4EF6\u4E2D\u914D\u7F6E\uFF0C\u6027\u80FD\u6BD4\u8F83\u7A33\u5B9A\uFF0C\u7528\u4E8E\u53CD\u5411\u4EE3\u7406\uFF0C\u5B95\u673A\u7684\u6982\u7387\u5FAE\u4E4E\u5176\u5FAE\uFF0C\u53EF\u4EE5 7*24 \u5C0F\u65F6\u957F\u65F6\u95F4\u4E0D\u95F4\u65AD\u8FD0\u884C\u624B\u3002</p>
<p>3\u3001<strong>\u975E\u963B\u585E</strong>\u3001\u9AD8\u5E76\u53D1\u8FDE\u63A5\uFF1A\u6570\u636E\u590D\u5236\u65F6\uFF0C\u78C1\u76D8 I/O \u7684\u7B2C\u4E00\u9636\u6BB5\u662F\u975E\u963B\u585E\u7684\u3002\u5B98\u65B9\u6D4B\u8BD5\u80FD\u591F\u652F\u6491 5 \u4E07\u5E76\u53D1\u8FDE\u63A5\uFF0C\u5728\u5B9E\u9645\u751F\u4EA7\u73AF\u5883\u4E2D\u8DD1\u5230 2 \uFF5E 3 \u4E07\u5E76\u53D1\u8FDE\u63A5\u6570.(\u8FD9\u5F97\u76CA\u4E8E Nginx \u4F7F\u7528\u4E86\u6700\u65B0\u7684 epoll \u6A21\u578B)</p>
<p>4\u3001<strong>\u4E8B\u4EF6\u9A71\u52A8</strong>\uFF1A\u901A\u4FE1\u673A\u5236\u91C7\u7528 epoll \u6A21\u578B\uFF0C\u652F\u6301\u66F4\u5927\u7684\u5E76\u53D1\u8FDE\u63A5\u3002</p>
<p>5\u3001<strong>master/worker \u7ED3\u6784</strong>\uFF1A\u4E00\u4E2A master \u8FDB\u7A0B\uFF0C\u751F\u6210\u4E00\u4E2A\u6216\u591A\u4E2A worker \u8FDB\u7A0B</p>
<p>6\u3001<strong>\u5185\u5B58\u6D88\u8017\u5C0F</strong>\uFF1A\u5904\u7406\u5927\u5E76\u53D1\u7684\u8BF7\u6C42\u5185\u5B58\u6D88\u8017\u975E\u5E38\u5C0F\u3002\u5728 3 \u4E07\u5E76\u53D1\u8FDE\u63A5\u4E0B\uFF0C\u5F00\u542F\u7684 10 \u4E2A Nginx \u8FDB\u7A0B\u624D\u6D88\u8017 150M \u5185\u5B58\uFF0815M*10=150M\uFF09</p>
<p>7\u3001<strong>\u6210\u672C\u4F4E\u5EC9</strong>\uFF1ANginx \u53EF\u4EE5\u505A\u9AD8\u5E76\u53D1\u7684\u8D1F\u8F7D\u5747\u8861\uFF0C\u4E14 Nginx \u662F\u5F00\u6E90\u514D\u8D39\u7684\u3002\u800C\u8D2D\u4E70 F5 BIG-IP\u3001NetScaler \u7B49\u786C\u4EF6\u8D1F\u8F7D\u5747\u8861\u4EA4\u6362\u673A\u5219\u9700\u8981\u5341\u591A\u4E07\u81F3\u51E0\u5341\u4E07\u4EBA\u6C11\u5E01</p>
<p>8\u3001<strong>\u5185\u7F6E\u7684\u5065\u5EB7\u68C0\u67E5\u529F\u80FD</strong>\uFF1ANGINX \u80FD\u591F\u6839\u636E\u5E94\u7528\u670D\u52A1\u5668\u5904\u7406\u9875\u9762\u8FD4\u56DE\u7684\u72B6\u6001\u7801\u3001\u8D85\u65F6\u4FE1\u606F\u7B49\u68C0\u6D4B\u670D\u52A1\u5668\u662F\u5426\u51FA\u73B0\u6545\u969C\uFF0C\u5E76\u53CA\u65F6\u8FD4\u56DE\u9519\u8BEF\u7684\u8BF7\u6C42\u91CD\u65B0\u63D0\u4EA4\u5230\u5176\u5B83\u8282\u70B9\u4E0A</p>
<p>9\u3001<strong>\u8282\u7701\u5E26\u5BBD</strong>\uFF1A\u652F\u6301 GZIP \u538B\u7F29\uFF0C\u53EF\u4EE5\u6DFB\u52A0\u6D4F\u89C8\u5668\u672C\u5730\u7F13\u5B58\u7684 Header \u5934\u3002</p>
<p>10\u3001<strong>\u7A33\u5B9A\u6027\u9AD8</strong>\uFF1A\u7528\u4E8E\u53CD\u5411\u4EE3\u7406\uFF0C\u5B95\u673A\u7684\u6982\u7387\u5FAE\u4E4E\u5176\u5FAE</p>
<p>11\u3001<strong>\u6A21\u5757\u5316\u7A0B\u5EA6\u9AD8</strong>\uFF1ANginx \u662F\u9AD8\u5EA6\u6A21\u5757\u5316\u7684\u8BBE\u8BA1\uFF0C\u7F16\u5199\u6A21\u5757\u76F8\u5BF9\u7B80\u5355\uFF0C\u5305\u62EC gzipping, byte ranges, chunked responses,\u4EE5\u53CA SSI-filter \u7B49 filter\uFF0C\u652F\u6301 SSL \u548C TLSSNI\u3002</p>
<p>12\u3001<strong>\u652F\u6301 Rwrite \u91CD\u5199\u89C4\u5219</strong>\uFF1A\u80FD\u591F\u6839\u636E\u57DF\u540D\u3001URL \u7684\u4E0D\u540C\uFF0C \u5C06 HTTP \u8BF7\u6C42\u5206\u53D1\u5230\u4E0D\u540C\u7684\u540E\u7AEF\u670D\u52A1\u5668\u7FA4\u7EC4\u3002</p>
<p>13\u3001<strong>\u652F\u6301\u53CD\u5411\u4EE3\u7406\u548C\u8D1F\u8F7D\u5747\u8861</strong>\uFF1Anginx \u652F\u6301\u53CD\u5411\u4EE3\u7406\u548C\u8D1F\u8F7D\u5747\u8861\u7684\u529F\u80FD\u3002</p>
<p>14\u3001nginx \u4EE3\u7406\u548C\u540E\u7AEF web \u670D\u52A1\u5668\u95F4\u65E0\u9700\u957F\u8FDE\u63A5\uFF1B</p>
<p>15\u3001\u63A5\u6536\u7528\u6237\u8BF7\u6C42\u662F\u5F02\u6B65\u7684\uFF0C\u5373\u5148\u5C06\u7528\u6237\u8BF7\u6C42\u5168\u90E8\u63A5\u6536\u4E0B\u6765\uFF0C\u518D\u4E00\u6B21\u6027\u53D1\u9001\u540E\u540E\u7AEF web \u670D\u52A1\u5668\uFF0C\u6781\u5927\u7684\u51CF\u8F7B\u540E\u7AEF web \u670D\u52A1\u5668\u7684\u538B\u529B\u3002</p>
<p>16\u3001\u9001\u54CD\u5E94\u62A5\u6587\u65F6\uFF0C\u662F\u8FB9\u63A5\u6536\u6765\u81EA\u540E\u7AEF web \u670D\u52A1\u5668\u7684\u6570\u636E\uFF0C\u8FB9\u53D1\u9001\u7ED9\u5BA2\u6237\u7AEF\u7684\u3002</p>
<p>17\u3001\u7F51\u7EDC\u4F9D\u8D56\u578B\u4F4E\u3002NGINX \u5BF9\u7F51\u7EDC\u7684\u4F9D\u8D56\u7A0B\u5EA6\u975E\u5E38\u4F4E\uFF0C\u7406\u8BBA\u4E0A\u8BB2\uFF0C\u53EA\u8981\u80FD\u591F ping \u901A\u5C31\u53EF\u4EE5\u5B9E\u65BD\u8D1F\u8F7D\u5747\u8861\uFF0C\u800C\u4E14\u53EF\u4EE5\u6709\u6548\u533A\u5206\u5185\u7F51\u548C\u5916\u7F51\u6D41\u91CF\u3002</p>
<h2 id="\u4E09\u3001nginx-\u7684\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001nginx-\u7684\u7F3A\u70B9" aria-hidden="true">#</a> \u4E09\u3001Nginx \u7684\u7F3A\u70B9</h2>
<p>1\u3001<strong>\u52A8\u6001\u5904\u7406\u5DEE</strong>\uFF1ANginx\u53EA\u9002\u5408\u9759\u6001\u548C\u53CD\u5411\u4EE3\u7406\uFF0Cnginx \u5904\u7406\u9759\u6001\u6587\u4EF6\u597D,\u8017\u8D39\u5185\u5B58\u5C11\uFF0C\u4F46\u662F\u5904\u7406\u52A8\u6001\u9875\u9762\u5219\u5F88\u9E21\u808B\uFF0C\u73B0\u5728\u4E00\u822C\u524D\u7AEF\u7528 nginx \u4F5C\u4E3A\u53CD\u5411\u4EE3\u7406\u6297\u4F4F\u538B\u529B\uFF0Capache \u4F5C\u4E3A\u540E\u7AEF\u5904\u7406\u52A8\u6001\u8BF7\u6C42\u3002</p>
<p>2\u3001<strong>rewrite \u5F31</strong>\uFF1A\u867D\u7136 nginx \u652F\u6301 rewrite \u529F\u80FD\uFF0C\u4F46\u662F\u76F8\u6BD4\u4E8E Apache \u6765\u8BF4\uFF0CApache \u6BD4 nginx \u7684 rewrite \u5F3A\u5927\u3002</p>
<h2 id="\u56DB\u3001\u529F\u80FD\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u529F\u80FD\u5BF9\u6BD4" aria-hidden="true">#</a> \u56DB\u3001\u529F\u80FD\u5BF9\u6BD4</h2>
<h3 id="nginx-\u548C-tomcat-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#nginx-\u548C-tomcat-\u7684\u533A\u522B" aria-hidden="true">#</a> Nginx \u548C tomcat \u7684\u533A\u522B</h3>
<p>\u2003nginx \u5E38\u7528\u505A\u9759\u6001\u5185\u5BB9\u670D\u52A1\u548C\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u76F4\u63A5\u5916\u6765\u8BF7\u6C42\u8F6C\u53D1\u7ED9\u540E\u9762\u7684\u5E94\u7528\u670D\u52A1\u5668\uFF08tomcat\uFF0CDjango \u7B49\uFF09\uFF0Ctomcat \u66F4\u591A\u7528\u6765\u505A\u4E00\u4E2A\u5E94\u7528\u5BB9\u5668\uFF0C\u8BA9 java web app \u6CE1\u5728\u91CC\u9762\u7684\u4E1C\u897F\u3002\u4E25\u683C\u610F\u4E49\u4E0A\u6765\u8BB2\uFF0CApache \u548C nginx \u5E94\u8BE5\u53EB\u505A HTTP Server\uFF0C\u800C tomcat \u662F\u4E00\u4E2A Application Server \u662F\u4E00\u4E2A Servlet/JSO \u5E94\u7528\u7684\u5BB9\u5668\u3002\u5BA2\u6237\u7AEF\u901A\u8FC7 HTTP Server \u8BBF\u95EE\u670D\u52A1\u5668\u4E0A\u5B58\u50A8\u7684\u8D44\u6E90\uFF08HTML \u6587\u4EF6\uFF0C\u56FE\u7247\u6587\u4EF6\u7B49\uFF09\uFF0CHTTP Server \u662F\u4E2D\u53EA\u662F\u628A\u670D\u52A1\u5668\u4E0A\u7684\u6587\u4EF6\u5982\u5B9E\u901A\u8FC7 HTTP \u534F\u8BAE\u4F20\u8F93\u7ED9\u5BA2\u6237\u7AEF\u3002\u5E94\u7528\u670D\u52A1\u5668\u5F80\u5F80\u662F\u8FD0\u884C\u5728 HTTP Server \u7684\u80CC\u540E\uFF0C\u6267\u884C\u5E94\u7528\uFF0C\u5C06\u52A8\u6001\u7684\u5185\u5BB9\u8F6C\u5316\u4E3A\u9759\u6001\u7684\u5185\u5BB9\u4E4B\u540E\uFF0C\u901A\u8FC7 HTTP Server \u5206\u53D1\u5230\u5BA2\u6237\u7AEF
\u6CE8\u610F\uFF1Anginx \u53EA\u662F\u628A\u8BF7\u6C42\u505A\u4E86\u5206\u53D1\uFF0C\u4E0D\u505A\u5904\u7406\uFF01\uFF01</p>
<h3 id="nginx-\u548C-apache-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#nginx-\u548C-apache-\u7684\u533A\u522B" aria-hidden="true">#</a> Nginx \u548C Apache \u7684\u533A\u522B</h3>
<p>\u2003Apache \u662F\u540C\u6B65\u591A\u8FDB\u7A0B\u6A21\u578B\uFF0C\u4E00\u4E2A\u8FDE\u63A5\u5BF9\u5E94\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u800C nginx \u662F\u5F02\u6B65\u7684\uFF0C\u591A\u4E2A\u8FDE\u63A5\uFF08\u4E07\u7EA7\u522B\uFF09\u53EF\u4EE5\u5BF9\u5E94\u4E00\u4E2A\u8FDB\u7A0B\u3002nginx \u8F7B\u91CF\u7EA7\uFF0C\u6297\u5E76\u53D1\uFF0C\u5904\u7406\u9759\u6001\u6587\u4EF6\u597D
Apache \u8D85\u7A33\u5B9A\uFF0C\u5BF9 PHP \u652F\u6301\u6BD4\u8F83\u7B80\u5355\uFF0Cnginx \u9700\u8981\u914D\u5408\u5176\u4ED6\u540E\u7AEF\u7528\uFF0C\u5904\u7406\u52A8\u6001\u8BF7\u6C42\u6709\u4F18\u52BF\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u524D\u7AEF nginx \u6297\u5E76\u53D1\uFF0C\u540E\u7AEF apache \u96C6\u7FA4\uFF0C\u914D\u5408\u8D77\u6765\u4F1A\u66F4\u597D\uFF0Cnignx \u7684\u6B63\u5411\u4EE3\u7406\u548C\u53CD\u5411\u4EE3\u7406</p>
<p><strong>1\u3001nginx \u76F8\u5BF9\u4E8E apache \u7684\u4F18\u70B9</strong></p>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>\u8F7B\u91CF\u7EA7\uFF0C\u540C\u6837\u8D77 web \u670D\u52A1\uFF0C\u6BD4 apache \u5360\u7528\u66F4\u5C11\u7684\u5185\u5B58\u53CA\u8D44\u6E90 \u6297\u5E76\u53D1\uFF0Cnginx \u5904\u7406\u8BF7\u6C42\u662F\u5F02\u6B65\u975E\u963B\u585E\u7684\uFF0C\u800C apache \u5219\u662F\u963B\u585E\u578B\u7684\uFF0C\u5728\u9AD8\u5E76\u53D1\u4E0B nginx \u80FD\u4FDD\u6301\u4F4E\u8D44\u6E90\u4F4E\u6D88\u8017\u9AD8\u6027\u80FD\u9AD8\u5EA6\u6A21\u5757\u5316\u7684\u8BBE\u8BA1\uFF0C\u7F16\u5199\u6A21\u5757\u76F8\u5BF9\u7B80\u5355\u63D0\u4F9B\u8D1F\u8F7D\u5747\u8861,\u793E\u533A\u6D3B\u8DC3\uFF0C\u5404\u79CD\u9AD8\u6027\u80FD\u6A21\u5757\u51FA\u54C1\u8FC5\u901F</p>
</div>
<p><strong>2\u3001apache \u76F8\u5BF9\u4E8E nginx \u7684\u4F18\u70B9</strong></p>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>apache \u7684 rewrite\uFF08\u91CD\u5199\uFF09 \u6BD4 nginx \u7684\u5F3A\u5927 ;\u652F\u6301\u52A8\u6001\u9875\u9762;\u652F\u6301\u7684\u6A21\u5757\u591A\uFF0C\u57FA\u672C\u6DB5\u76D6\u6240\u6709\u5E94\u7528;\u6027\u80FD\u7A33\u5B9A\uFF0C\u800C nginx \u76F8\u5BF9 bug \u8F83\u591A\u3002</p>
</div>
<p><strong>3\u3001\u4E24\u8005\u4F18\u7F3A\u70B9\u6BD4\u8F83</strong></p>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>Nginx \u914D\u7F6E\u7B80\u6D01, Apache \u590D\u6742 ;
Nginx \u9759\u6001\u5904\u7406\u6027\u80FD\u6BD4 Apache \u9AD8 3 \u500D\u4EE5\u4E0A ;
Apache \u5BF9 PHP \u652F\u6301\u6BD4\u8F83\u7B80\u5355\uFF0CNginx \u9700\u8981\u914D\u5408\u5176\u4ED6\u540E\u7AEF\u7528;Apache \u7684\u7EC4\u4EF6\u6BD4 Nginx \u591A ;
apache \u662F\u540C\u6B65\u591A\u8FDB\u7A0B\u6A21\u578B\uFF0C\u4E00\u4E2A\u8FDE\u63A5\u5BF9\u5E94\u4E00\u4E2A\u8FDB\u7A0B;nginx \u662F\u5F02\u6B65\u7684\uFF0C\u591A\u4E2A\u8FDE\u63A5(\u4E07\u7EA7\u522B)\u53EF\u4EE5\u5BF9\u5E94\u4E00\u4E2A\u8FDB\u7A0B;
nginx \u5904\u7406\u9759\u6001\u6587\u4EF6\u597D,\u8017\u8D39\u5185\u5B58\u5C11;
\u52A8\u6001\u8BF7\u6C42\u7531 apache \u53BB\u505A\uFF0Cnginx \u53EA\u9002\u5408\u9759\u6001\u548C\u53CD\u5411;
Nginx \u9002\u5408\u505A\u524D\u7AEF\u670D\u52A1\u5668\uFF0C\u8D1F\u8F7D\u6027\u80FD\u5F88\u597D;
Nginx \u672C\u8EAB\u5C31\u662F\u4E00\u4E2A\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668 \uFF0C\u4E14\u652F\u6301\u8D1F\u8F7D\u5747\u8861</p>
</div>
`,date:"2022-02-19",deps:[],links:[],pathInferred:"/posts/devops/nginx/",pathLocale:"/",permalink:null,routeMeta:{title:"nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790"},sfcBlocks:[],slug:"README",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/nginx/README.md",filePathRelative:"posts/devops/nginx/README.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/index.html.vue",componentFilePathRelative:"pages/posts/devops/nginx/index.html.vue",componentFileChunkName:"v-5a96e6d2",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/index.html.js",dataFilePathRelative:"pages/posts/devops/nginx/index.html.js",dataFileChunkName:"v-5a96e6d2",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/nginx/index.html",htmlFilePathRelative:"posts/devops/nginx/index.html"},title:"nginx \u5185\u5BB9\u7B80\u4ECB\u548C\u6027\u80FD\u5206\u6790"},["/posts/devops/nginx/index.html","/posts/devops/nginx/README.md"]],["v-324dfae9","/posts/devops/nginx/cache.html",{_blog:{data:{key:"v-324dfae9",path:"/posts/devops/nginx/cache.html",title:"Nginx Cache\u7F13\u5B58\u914D\u7F6E",lang:"zh-CN",frontmatter:{title:"Nginx Cache\u7F13\u5B58\u914D\u7F6E",date:"2022-03-14T10:13:50.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201016051.jpg",summary:`\u2003Nginx\u4F5C\u4E3AWeb\u7F13\u5B58\u670D\u52A1\u5668\uFF0C\u5B83\u4ECB\u4E8E\u5BA2\u6237\u7AEF\u548C\u5E94\u7528\u670D\u52A1\u5668\u4E4B\u95F4\uFF0C\u5F53\u7528\u6237\u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E00\u4E2AURL\u65F6\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u4F1A\u53BB\u5E94\u7528\u670D\u52A1\u5668\u83B7\u53D6\u8981\u5C55\u793A\u7ED9\u7528\u6237\u7684\u5185\u5BB9\uFF0C\u5C06\u5185\u5BB9\u7F13\u5B58\u5230\u81EA\u5DF1\u7684\u670D\u52A1\u5668\u4E0A\uFF0C\u5F53\u4E0B\u4E00\u6B21\u8BF7\u6C42\u5230\u6765\u65F6\uFF0C\u5982\u679C\u8BBF\u95EE\u7684\u662F\u540C\u4E00\u4E2AURL\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u5C31\u4F1A\u76F4\u63A5\u5C06\u4E4B\u524D\u7F13\u5B58\u7684\u5185\u5BB9\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u800C\u4E0D\u662F\u5411\u5E94\u7528\u670D\u52A1\u5668\u518D\u6B21\u53D1\u9001\u8BF7\u6C42\u3002web\u7F13\u5B58\u964D\u4F4E\u4E86\u5E94\u7528\u670D\u52A1\u5668\u3001\u6570\u636E\u5E93\u7684\u8D1F\u8F7D\uFF0C\u51CF\u5C11\u4E86\u7F51\u7EDC\u5EF6\u8FDF\uFF0C\u63D0\u9AD8\u4E86\u7528\u6237\u8BBF\u95EE\u7684\u54CD\u5E94\u901F\u5EA6\uFF0C\u589E\u5F3A\u4E86\u7528\u6237\u7684\u4F53\u9A8C\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/cache.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx Cache\u7F13\u5B58\u914D\u7F6E"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-03-14T10:13:50.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nginx\u4F5C\u4E3AWeb\u7F13\u5B58\u670D\u52A1\u5668\uFF0C\u5B83\u4ECB\u4E8E\u5BA2\u6237\u7AEF\u548C\u5E94\u7528\u670D\u52A1\u5668\u4E4B\u95F4\uFF0C\u5F53\u7528\u6237\u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E00\u4E2AURL\u65F6\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u4F1A\u53BB\u5E94\u7528\u670D\u52A1\u5668\u83B7\u53D6\u8981\u5C55\u793A\u7ED9\u7528\u6237\u7684\u5185\u5BB9\uFF0C\u5C06\u5185\u5BB9\u7F13\u5B58\u5230\u81EA\u5DF1\u7684\u670D\u52A1\u5668\u4E0A\uFF0C\u5F53\u4E0B\u4E00\u6B21\u8BF7\u6C42\u5230\u6765\u65F6\uFF0C\u5982\u679C\u8BBF\u95EE\u7684\u662F\u540C\u4E00\u4E2AURL\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u5C31\u4F1A\u76F4\u63A5\u5C06\u4E4B\u524D\u7F13\u5B58\u7684\u5185\u5BB9\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u800C\u4E0D\u662F\u5411\u5E94\u7528\u670D\u52A1\u5668\u518D\u6B21\u53D1\u9001\u8BF7\u6C42\u3002web\u7F13\u5B58\u964D\u4F4E\u4E86\u5E94\u7528\u670D\u52A1\u5668\u3001\u6570\u636E\u5E93\u7684\u8D1F\u8F7D\uFF0C\u51CF\u5C11\u4E86\u7F51\u7EDC\u5EF6\u8FDF\uFF0C\u63D0\u9AD8\u4E86\u7528\u6237\u8BBF\u95EE\u7684\u54CD\u5E94\u901F\u5EA6\uFF0C\u589E\u5F3A\u4E86\u7528\u6237\u7684\u4F53\u9A8C\u3002</p>
`,headers:[{level:2,title:"\u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u4F5C\u7528\u662F\u4EC0\u4E48\uFF1F",slug:"\u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u4F5C\u7528\u662F\u4EC0\u4E48",children:[]},{level:2,title:"\u7F13\u5B58\u7684\u8D44\u6E90\u6587\u4EF6\u5230\u4EC0\u4E48\u5730\u65B9\u53BB\u4E86\u5462\uFF1F",slug:"\u7F13\u5B58\u7684\u8D44\u6E90\u6587\u4EF6\u5230\u4EC0\u4E48\u5730\u65B9\u53BB\u4E86\u5462",children:[]},{level:2,title:"\u534F\u5546\u7F13\u5B58 Last-Modified/if-Modify-Since",slug:"\u534F\u5546\u7F13\u5B58-last-modified-if-modify-since",children:[]},{level:2,title:"\u534F\u5546\u7F13\u5B58 ETag/if-None-Match",slug:"\u534F\u5546\u7F13\u5B58-etag-if-none-match",children:[]},{level:2,title:"last-modified \u548C ETag \u4E4B\u95F4\u5BF9\u6BD4",slug:"last-modified-\u548C-etag-\u4E4B\u95F4\u5BF9\u6BD4",children:[]},{level:2,title:"\u7406\u89E3\u5F3A\u5236\u7F13\u5B58",slug:"\u7406\u89E3\u5F3A\u5236\u7F13\u5B58",children:[]},{level:2,title:"nginx \u7F13\u5B58\u914D\u7F6E",slug:"nginx-\u7F13\u5B58\u914D\u7F6E",children:[]},{level:2,title:"\u89E3\u51B3 nginx \u53CD\u5411\u4EE3\u7406\u7F13\u5B58\u4E0D\u8D77\u4F5C\u7528\u7684\u95EE\u9898",slug:"\u89E3\u51B3-nginx-\u53CD\u5411\u4EE3\u7406\u7F13\u5B58\u4E0D\u8D77\u4F5C\u7528\u7684\u95EE\u9898",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/nginx/cache.md",readingTime:{minutes:8.8,words:2639},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/nginx/cache.html`},key:"v-324dfae9",path:"/posts/devops/nginx/cache.html",title:"Nginx Cache\u7F13\u5B58\u914D\u7F6E",lang:"zh-CN",frontmatter:{title:"Nginx Cache\u7F13\u5B58\u914D\u7F6E",date:"2022-03-14T10:13:50.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201016051.jpg",summary:`\u2003Nginx\u4F5C\u4E3AWeb\u7F13\u5B58\u670D\u52A1\u5668\uFF0C\u5B83\u4ECB\u4E8E\u5BA2\u6237\u7AEF\u548C\u5E94\u7528\u670D\u52A1\u5668\u4E4B\u95F4\uFF0C\u5F53\u7528\u6237\u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E00\u4E2AURL\u65F6\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u4F1A\u53BB\u5E94\u7528\u670D\u52A1\u5668\u83B7\u53D6\u8981\u5C55\u793A\u7ED9\u7528\u6237\u7684\u5185\u5BB9\uFF0C\u5C06\u5185\u5BB9\u7F13\u5B58\u5230\u81EA\u5DF1\u7684\u670D\u52A1\u5668\u4E0A\uFF0C\u5F53\u4E0B\u4E00\u6B21\u8BF7\u6C42\u5230\u6765\u65F6\uFF0C\u5982\u679C\u8BBF\u95EE\u7684\u662F\u540C\u4E00\u4E2AURL\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u5C31\u4F1A\u76F4\u63A5\u5C06\u4E4B\u524D\u7F13\u5B58\u7684\u5185\u5BB9\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u800C\u4E0D\u662F\u5411\u5E94\u7528\u670D\u52A1\u5668\u518D\u6B21\u53D1\u9001\u8BF7\u6C42\u3002web\u7F13\u5B58\u964D\u4F4E\u4E86\u5E94\u7528\u670D\u52A1\u5668\u3001\u6570\u636E\u5E93\u7684\u8D1F\u8F7D\uFF0C\u51CF\u5C11\u4E86\u7F51\u7EDC\u5EF6\u8FDF\uFF0C\u63D0\u9AD8\u4E86\u7528\u6237\u8BBF\u95EE\u7684\u54CD\u5E94\u901F\u5EA6\uFF0C\u589E\u5F3A\u4E86\u7528\u6237\u7684\u4F53\u9A8C\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/cache.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx Cache\u7F13\u5B58\u914D\u7F6E"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-03-14T10:13:50.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nginx\u4F5C\u4E3AWeb\u7F13\u5B58\u670D\u52A1\u5668\uFF0C\u5B83\u4ECB\u4E8E\u5BA2\u6237\u7AEF\u548C\u5E94\u7528\u670D\u52A1\u5668\u4E4B\u95F4\uFF0C\u5F53\u7528\u6237\u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E00\u4E2AURL\u65F6\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u4F1A\u53BB\u5E94\u7528\u670D\u52A1\u5668\u83B7\u53D6\u8981\u5C55\u793A\u7ED9\u7528\u6237\u7684\u5185\u5BB9\uFF0C\u5C06\u5185\u5BB9\u7F13\u5B58\u5230\u81EA\u5DF1\u7684\u670D\u52A1\u5668\u4E0A\uFF0C\u5F53\u4E0B\u4E00\u6B21\u8BF7\u6C42\u5230\u6765\u65F6\uFF0C\u5982\u679C\u8BBF\u95EE\u7684\u662F\u540C\u4E00\u4E2AURL\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u5C31\u4F1A\u76F4\u63A5\u5C06\u4E4B\u524D\u7F13\u5B58\u7684\u5185\u5BB9\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u800C\u4E0D\u662F\u5411\u5E94\u7528\u670D\u52A1\u5668\u518D\u6B21\u53D1\u9001\u8BF7\u6C42\u3002web\u7F13\u5B58\u964D\u4F4E\u4E86\u5E94\u7528\u670D\u52A1\u5668\u3001\u6570\u636E\u5E93\u7684\u8D1F\u8F7D\uFF0C\u51CF\u5C11\u4E86\u7F51\u7EDC\u5EF6\u8FDF\uFF0C\u63D0\u9AD8\u4E86\u7528\u6237\u8BBF\u95EE\u7684\u54CD\u5E94\u901F\u5EA6\uFF0C\u589E\u5F3A\u4E86\u7528\u6237\u7684\u4F53\u9A8C\u3002</p>
`,headers:[{level:2,title:"\u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u4F5C\u7528\u662F\u4EC0\u4E48\uFF1F",slug:"\u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u4F5C\u7528\u662F\u4EC0\u4E48",children:[]},{level:2,title:"\u7F13\u5B58\u7684\u8D44\u6E90\u6587\u4EF6\u5230\u4EC0\u4E48\u5730\u65B9\u53BB\u4E86\u5462\uFF1F",slug:"\u7F13\u5B58\u7684\u8D44\u6E90\u6587\u4EF6\u5230\u4EC0\u4E48\u5730\u65B9\u53BB\u4E86\u5462",children:[]},{level:2,title:"\u534F\u5546\u7F13\u5B58 Last-Modified/if-Modify-Since",slug:"\u534F\u5546\u7F13\u5B58-last-modified-if-modify-since",children:[]},{level:2,title:"\u534F\u5546\u7F13\u5B58 ETag/if-None-Match",slug:"\u534F\u5546\u7F13\u5B58-etag-if-none-match",children:[]},{level:2,title:"last-modified \u548C ETag \u4E4B\u95F4\u5BF9\u6BD4",slug:"last-modified-\u548C-etag-\u4E4B\u95F4\u5BF9\u6BD4",children:[]},{level:2,title:"\u7406\u89E3\u5F3A\u5236\u7F13\u5B58",slug:"\u7406\u89E3\u5F3A\u5236\u7F13\u5B58",children:[]},{level:2,title:"nginx \u7F13\u5B58\u914D\u7F6E",slug:"nginx-\u7F13\u5B58\u914D\u7F6E",children:[]},{level:2,title:"\u89E3\u51B3 nginx \u53CD\u5411\u4EE3\u7406\u7F13\u5B58\u4E0D\u8D77\u4F5C\u7528\u7684\u95EE\u9898",slug:"\u89E3\u51B3-nginx-\u53CD\u5411\u4EE3\u7406\u7F13\u5B58\u4E0D\u8D77\u4F5C\u7528\u7684\u95EE\u9898",children:[]}],content:`---
title: Nginx Cache\u7F13\u5B58\u914D\u7F6E
date: 2022-03-14 10:13:50
tag:
  - nginx
category:
  - nginx
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201016051.jpg
---

&emsp;Nginx\u4F5C\u4E3AWeb\u7F13\u5B58\u670D\u52A1\u5668\uFF0C\u5B83\u4ECB\u4E8E\u5BA2\u6237\u7AEF\u548C\u5E94\u7528\u670D\u52A1\u5668\u4E4B\u95F4\uFF0C\u5F53\u7528\u6237\u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E00\u4E2AURL\u65F6\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u4F1A\u53BB\u5E94\u7528\u670D\u52A1\u5668\u83B7\u53D6\u8981\u5C55\u793A\u7ED9\u7528\u6237\u7684\u5185\u5BB9\uFF0C\u5C06\u5185\u5BB9\u7F13\u5B58\u5230\u81EA\u5DF1\u7684\u670D\u52A1\u5668\u4E0A\uFF0C\u5F53\u4E0B\u4E00\u6B21\u8BF7\u6C42\u5230\u6765\u65F6\uFF0C\u5982\u679C\u8BBF\u95EE\u7684\u662F\u540C\u4E00\u4E2AURL\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u5C31\u4F1A\u76F4\u63A5\u5C06\u4E4B\u524D\u7F13\u5B58\u7684\u5185\u5BB9\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u800C\u4E0D\u662F\u5411\u5E94\u7528\u670D\u52A1\u5668\u518D\u6B21\u53D1\u9001\u8BF7\u6C42\u3002web\u7F13\u5B58\u964D\u4F4E\u4E86\u5E94\u7528\u670D\u52A1\u5668\u3001\u6570\u636E\u5E93\u7684\u8D1F\u8F7D\uFF0C\u51CF\u5C11\u4E86\u7F51\u7EDC\u5EF6\u8FDF\uFF0C\u63D0\u9AD8\u4E86\u7528\u6237\u8BBF\u95EE\u7684\u54CD\u5E94\u901F\u5EA6\uFF0C\u589E\u5F3A\u4E86\u7528\u6237\u7684\u4F53\u9A8C\u3002

<!-- more -->

## \u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u4F5C\u7528\u662F\u4EC0\u4E48\uFF1F

&emsp;1. \u7F13\u5B58\u53EF\u4EE5\u51CF\u5C11\u5197\u4F59\u7684\u6570\u636E\u4F20\u8F93\u3002\u8282\u7701\u4E86\u7F51\u7EDC\u5E26\u5BBD\uFF0C\u4ECE\u800C\u66F4\u5FEB\u7684\u52A0\u8F7D\u9875\u9762\u3002  
&emsp;2. \u7F13\u5B58\u964D\u4F4E\u4E86\u670D\u52A1\u5668\u7684\u8981\u6C42\uFF0C\u4ECE\u800C\u670D\u52A1\u5668\u66F4\u5FEB\u7684\u54CD\u5E94\u3002

## \u7F13\u5B58\u7684\u8D44\u6E90\u6587\u4EF6\u5230\u4EC0\u4E48\u5730\u65B9\u53BB\u4E86\u5462\uFF1F

&emsp;\u6839\u636E\u7F13\u5B58\u7684\u8D44\u6E90\u5B58\u50A8\u7684\u4F4D\u7F6E\u7F13\u5B58\u5206\u4E3A\`\u5185\u5B58\u7F13\u5B58(memory cache)\`\u548C\`\u78C1\u76D8\u7F13\u5B58(disk cache)\` memory cache: \u5B83\u662F\u5C06\u8D44\u6E90\u6587\u4EF6\u7F13\u5B58\u5230\u5185\u5B58\u4E2D\uFF0C\u7B49\u4E0B\u6B21\u8BF7\u6C42\u8BBF\u95EE\u7684\u65F6\u5019\u4E0D\u9700\u8981\u91CD\u65B0\u4E0B\u8F7D\u8D44\u6E90\uFF0C\u800C\u662F\u76F4\u63A5\u4ECE\u5185\u5B58\u4E2D\u8BFB\u53D6\u6570\u636E\u3002disk cache: \u5B83\u662F\u5C06\u8D44\u6E90\u6587\u4EF6\u7F13\u5B58\u5230\u786C\u76D8\u4E2D\uFF0C\u7B49\u4E0B\u6B21\u8BF7\u6C42\u7684\u65F6\u5019\u5B83\u662F\u76F4\u63A5\u4ECE\u786C\u76D8\u4E2D\u8BFB\u53D6\u3002\u4E8C\u8005\u533A\u522B\u5982\u4E0B\uFF1A

- memory cache(\u5185\u5B58\u7F13\u5B58)\u9000\u51FA\u8FDB\u7A0B\u65F6\u6570\u636E\u4F1A\u88AB\u6E05\u9664\uFF0C\u800C disk cache(\u786C\u76D8\u7F13\u5B58)\u9000\u51FA\u8FDB\u7A0B\u65F6\u6570\u636E\u4E0D\u4F1A\u88AB\u6E05\u9664\u3002\u5185\u5B58\u8BFB\u53D6\u6BD4\u786C\u76D8\u4E2D\u8BFB\u53D6\u7684\u901F\u5EA6\u66F4\u5FEB\u3002\u4F46\u662F\u6211\u4EEC\u4E5F\u4E0D\u80FD\u628A\u6240\u6709\u6570\u636E\u653E\u5728\u5185\u5B58\u4E2D\u7F13\u5B58\u7684\uFF0C\u56E0\u4E3A\u5185\u5B58\u4E5F\u662F\u6709\u9650\u7684\u3002
- memory cache(\u5185\u5B58\u7F13\u5B58)\u4E00\u822C\u4F1A\u5C06\u811A\u672C\u3001\u5B57\u4F53\u3001\u56FE\u7247\u4F1A\u5B58\u50A8\u5230\u5185\u5B58\u7F13\u5B58\u4E2D\u3002
- disk cache(\u786C\u76D8\u7F13\u5B58) \u4E00\u822C\u975E\u811A\u672C\u4F1A\u5B58\u653E\u5728\u786C\u76D8\u4E2D\uFF0C\u6BD4\u5982 css \u8FD9\u4E9B\u3002

&emsp;\u7F13\u5B58\u8BFB\u53D6\u7684\u539F\u7406\uFF1A\u5148\u4ECE\u5185\u5B58\u4E2D\u67E5\u627E\u5BF9\u5E94\u7684\u7F13\u5B58\uFF0C\u5982\u679C\u5185\u5B58\u4E2D\u80FD\u627E\u5230\u5C31\u8BFB\u53D6\u5BF9\u5E94\u7684\u7F13\u5B58\uFF0C\u5426\u5219\u7684\u8BDD\u5C31\u4ECE\u786C\u76D8\u4E2D\u67E5\u627E\u5BF9\u5E94\u7684\u7F13\u5B58\uFF0C\u5982\u679C\u6709\u5C31\u8BFB\u53D6\uFF0C\u5426\u5219\u7684\u8BDD\uFF0C\u5C31\u91CD\u65B0\u7F51\u7EDC\u8BF7\u6C42\u3002
&emsp;\u6D4F\u89C8\u5668\u7F13\u5B58\u5206\u4E3A\uFF1A\`\u5F3A\u5236\u7F13\u5B58\u548C\u534F\u5546\u7F13\u5B58\`  
&emsp;\u534F\u5546\u7F13\u5B58\u539F\u7406\uFF1A\u5BA2\u6237\u7AEF\u5411\u670D\u52A1\u5668\u7AEF\u53D1\u51FA\u8BF7\u6C42\uFF0C\u670D\u52A1\u7AEF\u4F1A\u68C0\u6D4B\u662F\u5426\u6709\u5BF9\u5E94\u7684\u6807\u8BC6\uFF0C\u5982\u679C\u6CA1\u6709\u5BF9\u5E94\u7684\u6807\u8BC6\uFF0C\u670D\u52A1\u5668\u7AEF\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u5BF9\u5E94\u7684\u6807\u8BC6\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u5BA2\u6237\u7AEF\u4E0B\u6B21\u518D\u6B21\u8BF7\u6C42\u7684\u65F6\u5019\uFF0C\u628A\u8BE5\u6807\u8BC6\u5E26\u8FC7\u53BB\uFF0C\u7136\u540E\u670D\u52A1\u5668\u7AEF\u4F1A\u9A8C\u8BC1\u8BE5\u6807\u8BC6\uFF0C\u5982\u679C\u9A8C\u8BC1\u901A\u8FC7\u4E86\uFF0C\u5219\u4F1A\u54CD\u5E94 304\uFF0C\u544A\u8BC9\u6D4F\u89C8\u5668\u8BFB\u53D6\u7F13\u5B58\u3002\u5982\u679C\u6807\u8BC6\u6CA1\u6709\u901A\u8FC7\uFF0C\u5219\u8FD4\u56DE\u8BF7\u6C42\u7684\u8D44\u6E90\u3002\u90A3\u4E48\u534F\u5546\u7F13\u5B58\u7684\u6807\u8BC6\u53C8\u6709 2 \u79CD\uFF1A\`ETag/if-None-Match\` \u548C \`Last-Modified/if-Modify-Since\`

## \u534F\u5546\u7F13\u5B58 Last-Modified/if-Modify-Since

&emsp;\u6D4F\u89C8\u5668\u7B2C\u4E00\u6B21\u53D1\u51FA\u8BF7\u6C42\u4E00\u4E2A\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u670D\u52A1\u5668\u4F1A\u8FD4\u56DE\u4E00\u4E2A last-Modify \u5230 hearer \u4E2D. Last-Modify \u542B\u4E49\u662F\u6700\u540E\u7684\u4FEE\u6539\u65F6\u95F4\u3002\u5F53\u6D4F\u89C8\u5668\u518D\u6B21\u8BF7\u6C42\u7684\u65F6\u5019\uFF0Crequest \u7684\u8BF7\u6C42\u5934\u4F1A\u52A0\u4E0A if-Modify-Since\uFF0C\u8BE5\u503C\u4E3A\u7F13\u5B58\u4E4B\u524D\u8FD4\u56DE\u7684 Last-Modify. \u670D\u52A1\u5668\u6536\u5230 if-Modify-Since \u540E\uFF0C\u6839\u636E\u8D44\u6E90\u7684\u6700\u540E\u4FEE\u6539\u65F6\u95F4(last-Modify)\u548C\u8BE5\u503C(if-Modify-Since)\u8FDB\u884C\u6BD4\u8F83\uFF0C\u5982\u679C\u76F8\u7B49\u7684\u8BDD\uFF0C\u5219\u547D\u4E2D\u7F13\u5B58\uFF0C\u8FD4\u56DE 304\uFF0C\u5426\u5219, \u5982\u679C Last-Modify > if-Modify-Since, \u5219\u4F1A\u7ED9\u51FA 200 \u54CD\u5E94\uFF0C\u5E76\u4E14\u66F4\u65B0 Last-Modify \u4E3A\u65B0\u7684\u503C

## \u534F\u5546\u7F13\u5B58 ETag/if-None-Match

&emsp;ETag \u7684\u539F\u7406\u548C\u4E0A\u9762\u7684 last-modified \u662F\u7C7B\u4F3C\u7684\u3002ETag \u5219\u662F\u5BF9\u5F53\u524D\u8BF7\u6C42\u7684\u8D44\u6E90\u505A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u3002\u8BE5\u6807\u8BC6\u53EF\u4EE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u6587\u4EF6\u7684 size,hash \u7B49\u3002\u53EA\u8981\u80FD\u591F\u5408\u7406\u6807\u8BC6\u8D44\u6E90\u7684\u552F\u4E00\u6027\u5E76\u80FD\u9A8C\u8BC1\u662F\u5426\u4FEE\u6539\u8FC7\u5C31\u53EF\u4EE5\u4E86\u3002ETag \u5728\u670D\u52A1\u5668\u54CD\u5E94\u8BF7\u6C42\u7684\u65F6\u5019\uFF0C\u8FD4\u56DE\u5F53\u524D\u8D44\u6E90\u7684\u552F\u4E00\u6807\u8BC6(\u5B83\u662F\u7531\u670D\u52A1\u5668\u751F\u6210\u7684)\u3002\u4F46\u662F\u53EA\u8981\u8D44\u6E90\u6709\u53D8\u5316\uFF0CETag \u4F1A\u91CD\u65B0\u751F\u6210\u7684\u3002\u6D4F\u89C8\u5668\u518D\u4E0B\u4E00\u6B21\u52A0\u8F7D\u7684\u65F6\u5019\u4F1A\u5411\u670D\u52A1\u5668\u53D1\u9001\u8BF7\u6C42\uFF0C\u4F1A\u5C06\u4E0A\u4E00\u6B21\u8FD4\u56DE\u7684 ETag \u503C\u653E\u5230 request header \u91CC\u7684 if-None-Match \u91CC\u9762\u53BB\uFF0C\u670D\u52A1\u5668\u7AEF\u53EA\u8981\u6BD4\u8F83\u5BA2\u6237\u7AEF\u4F20\u6765\u7684 if-None-Match \u503C\u662F\u5426\u548C\u81EA\u5DF1\u670D\u52A1\u5668\u4E0A\u7684 ETag \u662F\u5426\u4E00\u81F4\uFF0C\u5982\u679C\u4E00\u81F4\u8BF4\u660E\u8D44\u6E90\u672A\u4FEE\u6539\u8FC7\uFF0C\u56E0\u6B64\u8FD4\u56DE 304\uFF0C\u5982\u679C\u4E0D\u4E00\u81F4\uFF0C\u8BF4\u660E\u4FEE\u6539\u8FC7\uFF0C\u56E0\u6B64\u8FD4\u56DE 200\u3002\u5E76\u4E14\u628A\u65B0\u7684 Etag \u8D4B\u503C\u7ED9 if-None-Match \u6765\u66F4\u65B0\u8BE5\u503C

## last-modified \u548C ETag \u4E4B\u95F4\u5BF9\u6BD4

- 1. \u5728\u7CBE\u5EA6\u4E0A\uFF0CETag \u8981\u4F18\u5148\u4E8E last-modified\u3002
- 2. \u5728\u6027\u80FD\u4E0A\uFF0CEtag \u8981\u900A\u4E8E Last-Modified\uFF0CLast-Modified \u9700\u8981\u8BB0\u5F55\u65F6\u95F4\uFF0C\u800C Etag \u9700\u8981\u670D\u52A1\u5668\u901A\u8FC7\u7B97\u6CD5\u6765\u8BA1\u7B97\u51FA\u4E00\u4E2A hash \u503C\u3002
- 3. \u5728\u4F18\u5148\u7EA7\u4E0A\uFF0C\u670D\u52A1\u5668\u6821\u9A8C\u4F18\u5148\u8003\u8651 Etag\u3002

## \u7406\u89E3\u5F3A\u5236\u7F13\u5B58

&emsp;\u57FA\u672C\u539F\u7406\uFF1A\u6D4F\u89C8\u5668\u5728\u52A0\u8F7D\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u4F1A\u5148\u6839\u636E\u672C\u5730\u7F13\u5B58\u8D44\u6E90\u7684 header \u4E2D\u7684\u4FE1\u606F(Expires \u548C Cache-Control)\u6765\u5224\u65AD\u662F\u5426\u9700\u8981\u5F3A\u5236\u7F13\u5B58\u3002\u5982\u679C\u547D\u4E2D\u7684\u8BDD\uFF0C\u5219\u4F1A\u76F4\u63A5\u4F7F\u7528\u7F13\u5B58\u4E2D\u7684\u8D44\u6E90\u3002\u5426\u5219\u7684\u8BDD\uFF0C\u4F1A\u7EE7\u7EED\u5411\u670D\u52A1\u5668\u53D1\u9001\u8BF7\u6C42\u3002  
&emsp;Expires \u662F http1.0 \u7684\u89C4\u8303\uFF0C\u5B83\u7684\u503C\u662F\u4E00\u4E2A\u7EDD\u5BF9\u65F6\u95F4\u7684 GMT \u683C\u5F0F\u7684\u65F6\u95F4\u5B57\u7B26\u4E32\u3002\u8FD9\u4E2A\u65F6\u95F4\u4EE3\u8868\u7684\u8BE5\u8D44\u6E90\u7684\u5931\u6548\u65F6\u95F4\uFF0C\u5982\u679C\u5728\u8BE5\u65F6\u95F4\u4E4B\u524D\u8BF7\u6C42\u7684\u8BDD\uFF0C\u5219\u90FD\u662F\u4ECE\u7F13\u5B58\u91CC\u9762\u8BFB\u53D6\u7684\u3002\u4F46\u662F\u4F7F\u7528\u8BE5\u89C4\u8303\u65F6\uFF0C\u53EF\u80FD\u4F1A\u6709\u4E00\u4E2A\u7F3A\u70B9\u5C31\u662F\u5F53\u670D\u52A1\u5668\u7684\u65F6\u95F4\u548C\u5BA2\u6237\u7AEF\u7684\u65F6\u95F4\u4E0D\u4E00\u6837\u7684\u60C5\u51B5\u4E0B\uFF0C\u4F1A\u5BFC\u81F4\u7F13\u5B58\u5931\u6548\u3002  
&emsp;Cache-Control \u662F http1.1 \u7684\u89C4\u8303\uFF0C\u5B83\u662F\u5229\u7528\u8BE5\u5B57\u6BB5 max-age \u503C\u8FDB\u884C\u5224\u65AD\u7684\u3002\u8BE5\u503C\u662F\u4E00\u4E2A\u76F8\u5BF9\u65F6\u95F4\uFF0C\u6BD4\u5982 Cache-Control: max-age=3600, \u4EE3\u8868\u8BE5\u8D44\u6E90\u7684\u6709\u6548\u671F\u662F 3600 \u79D2\u3002\u9664\u4E86\u8BE5\u5B57\u6BB5\u5916\uFF0C\u6211\u4EEC\u8FD8\u6709\u5982\u4E0B\u5B57\u6BB5\u53EF\u4EE5\u8BBE\u7F6E\uFF1A

- no-cache: \u9700\u8981\u8FDB\u884C\u534F\u5546\u7F13\u5B58\uFF0C\u53D1\u9001\u8BF7\u6C42\u5230\u670D\u52A1\u5668\u786E\u8BA4\u662F\u5426\u4F7F\u7528\u7F13\u5B58\u3002

- no-store\uFF1A\u7981\u6B62\u4F7F\u7528\u7F13\u5B58\uFF0C\u6BCF\u4E00\u6B21\u90FD\u8981\u91CD\u65B0\u8BF7\u6C42\u6570\u636E\u3002

- public\uFF1A\u53EF\u4EE5\u88AB\u6240\u6709\u7684\u7528\u6237\u7F13\u5B58\uFF0C\u5305\u62EC\u7EC8\u7AEF\u7528\u6237\u548C CDN \u7B49\u4E2D\u95F4\u4EE3\u7406\u670D\u52A1\u5668\u3002

- private\uFF1A\u53EA\u80FD\u88AB\u7EC8\u7AEF\u7528\u6237\u7684\u6D4F\u89C8\u5668\u7F13\u5B58\uFF0C\u4E0D\u5141\u8BB8 CDN \u7B49\u4E2D\u7EE7\u7F13\u5B58\u670D\u52A1\u5668\u5BF9\u5176\u7F13\u5B58\u3002

&emsp;**\u6CE8\u610F\uFF1ACache-Control \u4E0E Expires \u53EF\u4EE5\u5728\u670D\u52A1\u7AEF\u914D\u7F6E\u540C\u65F6\u542F\u7528\uFF0C\u540C\u65F6\u542F\u7528\u7684\u65F6\u5019 Cache-Control \u4F18\u5148\u7EA7\u9AD8**

## nginx \u7F13\u5B58\u914D\u7F6E

&emsp;\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\uFF0C\u51CF\u5C11\u670D\u52A1\u5668\u7684\u5904\u7406\u8BF7\u6C42\u538B\u529B\u3002\u6BD4\u5982\u5BF9\u4E00\u4E9B\u56FE\u7247\uFF0C\u5927\u6587\u4EF6\uFF0Ccss \u6216 js \u505A\u4E00\u4E9B\u7F13\u5B58\uFF0C\u90A3\u4E48\u5728\u6BCF\u6B21\u5237\u65B0\u6D4F\u89C8\u5668\u7684\u65F6\u5019\uFF0C\u5C31\u4E0D\u4F1A\u91CD\u65B0\u8BF7\u6C42\u4E86\uFF0C\u800C\u662F\u4ECE\u7F13\u5B58\u91CC\u9762\u8BFB\u53D6\u3002\u8FD9\u6837\u5C31\u53EF\u4EE5\u51CF\u8F7B\u670D\u52A1\u5668\u7684\u538B\u529B\u3002nginx \u53EF\u914D\u7F6E\u7684\u7F13\u5B58\u53C8\u6709 2 \u79CD\uFF1A

- 1 \u5BA2\u6237\u7AEF\u7684\u7F13\u5B58(\u4E00\u822C\u6307\u6D4F\u89C8\u5668\u7684\u7F13\u5B58)\u3002
- 2 \u670D\u52A1\u7AEF\u7684\u7F13\u5B58(\u4F7F\u7528 proxy-cache \u5B9E\u73B0\u7684)\u3002  
  **\u6CE8\u610F\uFF1A\u5BA2\u6237\u7AEF\u7684\u7F13\u5B58\u4E00\u822C\u6709\u5982\u4E0B\u4E24\u79CD\u65B9\u5F0F\u5B9E\u73B0\uFF1A\u534F\u5546\u7F13\u5B58\u548C\u5F3A\u7F13\u5B58\u3002**

\`\`\`bash
server {
  location ~* \\.(html)$ {
    access_log off;
    add_header  Cache-Control  max-age=no-cache;
  }

  location ~* \\.(css|js|png|jpg|jpeg|gif|gz|svg|mp4|ogg|ogv|webm|htc|xml|woff)$ {
    # \u540C\u4E0A\uFF0C\u901A\u914D\u6240\u6709\u4EE5.css/.js/...\u7ED3\u5C3E\u7684\u8BF7\u6C42
    access_log off;
    add_header    Cache-Control  max-age=360000;
  }
}
\`\`\`

~_ \u7684\u542B\u4E49\u662F\uFF1A\u901A\u914D\u4EFB\u610F\u5B57\u7B26\uFF08\u4E14\u5927\u5C0F\u5199\u4E0D\u654F\u611F\uFF09\uFF0C\\\u8F6C\u4E49\u5B57\u7B26\uFF0C\u56E0\u6B64 ~_ \\.(html)$\u7684\u542B\u4E49\u662F\uFF1A\u5339\u914D\u6240\u6709\u4EE5.html \u7ED3\u5C3E\u7684\u8BF7\u6C42
access_log off; \u7684\u542B\u4E49\u662F \u5173\u95ED\u65E5\u5FD7\u529F\u80FD\u3002  
**add_header Cache-Control max-age=no-cache;** \u7684\u542B\u4E49\uFF1Ahtml \u6587\u4EF6\u4E0D\u8BBE\u7F6E\u5F3A\u5236\u7F13\u5B58\u65F6\u95F4\uFF0C\u534F\u5546\u7F13\u5B58\uFF0C\u4F7F\u7528 Last-Modified\u3002no-cache \u4F1A\u53D1\u8D77\u5F80\u8FD4\u901A\u4FE1\u6765\u9A8C\u8BC1\u7F13\u5B58\u7684\u54CD\u5E94\uFF0C\u4F46\u5982\u679C\u8D44\u6E90\u672A\u53D1\u751F\u53D8\u5316\uFF0C\u5219\u4E0D\u4F1A\u4E0B\u8F7D\uFF0C\u8FD4\u56DE 304  
**add_header Cache-Control max-age=360000;** \u7684\u542B\u4E49\u7ED9\u4E0A\u9762\u5339\u914D\u540E\u7F00\u7684\u6587\u4EF6\u8BBE\u7F6E\u5F3A\u5236\u7F13\u5B58\uFF0C\u4E14\u7F13\u5B58\u7684\u65F6\u95F4\u662F 360000 \u79D2\uFF0C\u7B2C\u4E00\u6B21\u8BBF\u95EE\u7684\u65F6\u5019\uFF0C\u4ECE\u670D\u52A1\u5668\u8BF7\u6C42\uFF0C\u5F53\u9664\u4E86\u7B2C\u4E00\u6B21\u4EE5\u5916\uFF0C\u518D\u6B21\u5237\u65B0\u6D4F\u89C8\u5668\uFF0C\u4F1A\u4ECE\u6D4F\u89C8\u5668\u7F13\u5B58\u8BFB\u53D6\uFF0C\u90A3\u4E48\u5F3A\u5236\u7F13\u5B58\u4E00\u822C\u662F\u4ECE\u5185\u5B58\u91CC\u9762\u5148\u8BFB\u53D6\uFF0C\u5982\u679C\u5185\u5B58\u6CA1\u6709\uFF0C\u518D\u4ECE\u786C\u76D8\u8BFB\u53D6\u3002

**\u6CE8\u610F\uFF1A\u5982\u4E0A\u53EA\u662F\u4E0D\u5BF9\u53CD\u5411\u4EE3\u7406\u7684\u9875\u9762\u8FDB\u884C\u7F13\u5B58\u8BBE\u7F6E\u7684\uFF0C\u4F46\u662F\u5982\u679C\u662F\u53CD\u5411\u4EE3\u7406\u540E\u7684\u9875\u9762\uFF0C\u5982\u4E0A\u8BBE\u7F6E\u662F\u4E0D\u751F\u6548\u7684\u3002\u6BD4\u5982\u8BF4\u6211 node \u8D77\u4E86\u4E00\u4E2A\u670D\u52A1\uFF0C\u7136\u540E\u901A\u8FC7\u8BBF\u95EE nginx \u53CD\u5411\u4EE3\u7406\u7684\u65B9\u5F0F\u4EE3\u7406\u5230\u6211 node \u670D\u52A1\u6765\uFF0C\u4E0A\u9762\u7684\u914D\u7F6E\u662F\u4E0D\u751F\u6548\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u5982\u4E0B\u5904\u7406\u914D\u7F6E**

## \u89E3\u51B3 nginx \u53CD\u5411\u4EE3\u7406\u7F13\u5B58\u4E0D\u8D77\u4F5C\u7528\u7684\u95EE\u9898

\u6BD4\u5982\u6211\u4E0A\u9762\u7684 node \u670D\u52A1\u7AEF\u53E3\u662F 7878 \u7AEF\u53E3\u3002nginx \u9700\u8981\u5982\u4E0B\u914D\u7F6E\uFF1A

\`\`\`bash
server {
  listen  8081;
  server_name  xxx.abc.com;
  location / {
    proxy_pass http://localhost:7878;
    add_header  Cache-Control  max-age=no-cache;
  }
}
\`\`\`

1 \u5982\u679C\u6211\u4EEC\u8981\u6DFB\u52A0\u7F13\u5B58\u529F\u80FD\u7684\u8BDD\uFF0C\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u7528\u4E8E\u5B58\u653E\u7F13\u5B58\u6587\u4EF6\u7684\u6587\u4EF6\u5939\u3002\u6BD4\u5982\u6211\u4EEC\u8FD9\u91CC\u4F7F\u7528 /data/nuget-cache\u3002  
2 \u7136\u540E\u6211\u4EEC\u9700\u8981\u5728 nginx.conf \u7684 http \u8BBE\u7F6E\u90E8\u5206\u6DFB\u52A0 proxy_cache_path \u7684\u8BBE\u7F6E\uFF0C\u5982\u4E0B\uFF1A

\`\`\`bash
http {
  // ..... \u5176\u4ED6\u7684\u914D\u7F6E
  proxy_cache_path  /data/nuget-cache levels=1:2 keys_zone=nuget-cache:20m max_size=50g inactive=168h;
  server {
    listen  8081;
    server_name  xxx.abc.com;
    location / {
      proxy_pass http://localhost:7878;
      add_header  Cache-Control  max-age=no-cache;
    }
  }
}
\`\`\`

proxy_cache_path \u5404\u4E2A\u914D\u7F6E\u503C\u7684\u542B\u4E49\u89E3\u6790\u5982\u4E0B\uFF1A

- proxy_cache_path \u6307\u7F13\u5B58\u7684\u76EE\u5F55\uFF0C\u76EE\u5F55\u4E3A\uFF1A/data/nuget-cache\u3002
- levels=1:2 \u8868\u793A\u91C7\u7528 2 \u7EA7\u76EE\u5F55\u7ED3\u6784\u3002
- keys_zone \u6307\u7684\u662F\u7F13\u5B58\u7A7A\u95F4\u540D\u79F0\uFF0C\u53EB nuget-cache\u3002\u7F13\u5B58\u5185\u5B58\u7684\u7A7A\u95F4\u4E3A 20M\u3002
- max_size \u6307\u7684\u662F\u7F13\u5B58\u6587\u4EF6\u53EF\u4EE5\u5360\u7528\u7684\u6700\u5927\u7A7A\u95F4\uFF0C\u4E3A 50G\u3002
- inactive=168h; \u9ED8\u8BA4\u8FC7\u671F\u65F6\u95F4\u4E3A 168 \u4E2A\u5C0F\u65F6\u3002\u4E3A 7 \u5929\uFF0C\u4E5F\u53EF\u4EE5\u5199\u6210\uFF1Ainactive=7d; \u8FD9\u6837\u7684\u683C\u5F0F\u3002

3 \u6211\u4EEC\u8FD8\u9700\u8981\u5728 server \u8BBE\u7F6E\u90E8\u5206\u6DFB\u52A0 proxy_cache \u4E0E proxy_cache_valid \u7684\u8BBE\u7F6E\uFF1A

\`\`\`bash
http {
  // ..... \u5176\u4ED6\u7684\u914D\u7F6E
  proxy_cache_path  /data/nuget-cache levels=1:2 keys_zone=nuget-cache:20m max_size=50g inactive=168h;
  server {
    listen  8081;
    server_name  xxx.abc.com;
    location / {
      proxy_pass http://localhost:7878;
      add_header  Cache-Control  max-age=no-cache;
      proxy_cache nuget-cache;
      proxy_cache_valid 168h;
      proxy_ignore_headers Set-Cookie Cache-Control;
      proxy_hide_header Cache-Control;
      proxy_hide_header Set-Cookie;
    }
  }
}
\`\`\`

- proxy_cache \u8BBE\u7F6E\u7684\u662F proxy_cache_path \u4E2D\u7684 keys_zone \u7684\u503C\u3002
- proxy_cache_valid\uFF1A\u8BBE\u7F6E\u7684\u662F\u7F13\u5B58\u8FC7\u671F\u65F6\u95F4\uFF0C\u6BD4\u5982\u8BBE\u7F6E 168 \u4E2A\u5C0F\u65F6\u8FC7\u671F\u3002
- proxy_ignore_headers \u7684\u542B\u4E49\u662F\uFF1A\u5FFD\u7565 Cache-Control \u7684\u8BF7\u6C42\u5934\u63A7\u5236\uFF0C\u4F9D\u7136\u8FDB\u884C\u7F13\u5B58\uFF0C\u6BD4\u5982\u5BF9\u8BF7\u6C42\u5934\u8BBE\u7F6E cookie \u540E\uFF0C\u9ED8\u8BA4\u662F\u4E0D\u7F13\u5B58\u7684\uFF0C\u9700\u8981\u6211\u4EEC\u589E\u52A0\u5FFD\u7565\u914D\u7F6E\u3002  
  \u81F3\u6B64 nginx \u7F13\u5B58\u914D\u7F6E\u5C31\u5B8C\u6210\u4E86\uFF0C\u91CD\u542F nginx\uFF0C\u53D1\u73B0\u5DF2\u7ECF\u53EF\u4EE5\u5B9E\u73B0\u7F13\u5B58\u4E86\u3002
`,contentRendered:`<p>\u2003Nginx\u4F5C\u4E3AWeb\u7F13\u5B58\u670D\u52A1\u5668\uFF0C\u5B83\u4ECB\u4E8E\u5BA2\u6237\u7AEF\u548C\u5E94\u7528\u670D\u52A1\u5668\u4E4B\u95F4\uFF0C\u5F53\u7528\u6237\u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E00\u4E2AURL\u65F6\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u4F1A\u53BB\u5E94\u7528\u670D\u52A1\u5668\u83B7\u53D6\u8981\u5C55\u793A\u7ED9\u7528\u6237\u7684\u5185\u5BB9\uFF0C\u5C06\u5185\u5BB9\u7F13\u5B58\u5230\u81EA\u5DF1\u7684\u670D\u52A1\u5668\u4E0A\uFF0C\u5F53\u4E0B\u4E00\u6B21\u8BF7\u6C42\u5230\u6765\u65F6\uFF0C\u5982\u679C\u8BBF\u95EE\u7684\u662F\u540C\u4E00\u4E2AURL\uFF0Cweb\u7F13\u5B58\u670D\u52A1\u5668\u5C31\u4F1A\u76F4\u63A5\u5C06\u4E4B\u524D\u7F13\u5B58\u7684\u5185\u5BB9\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u800C\u4E0D\u662F\u5411\u5E94\u7528\u670D\u52A1\u5668\u518D\u6B21\u53D1\u9001\u8BF7\u6C42\u3002web\u7F13\u5B58\u964D\u4F4E\u4E86\u5E94\u7528\u670D\u52A1\u5668\u3001\u6570\u636E\u5E93\u7684\u8D1F\u8F7D\uFF0C\u51CF\u5C11\u4E86\u7F51\u7EDC\u5EF6\u8FDF\uFF0C\u63D0\u9AD8\u4E86\u7528\u6237\u8BBF\u95EE\u7684\u54CD\u5E94\u901F\u5EA6\uFF0C\u589E\u5F3A\u4E86\u7528\u6237\u7684\u4F53\u9A8C\u3002</p>
<!-- more -->
<h2 id="\u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u4F5C\u7528\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#\u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u4F5C\u7528\u662F\u4EC0\u4E48" aria-hidden="true">#</a> \u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u4F5C\u7528\u662F\u4EC0\u4E48\uFF1F</h2>
<p>\u20031. \u7F13\u5B58\u53EF\u4EE5\u51CF\u5C11\u5197\u4F59\u7684\u6570\u636E\u4F20\u8F93\u3002\u8282\u7701\u4E86\u7F51\u7EDC\u5E26\u5BBD\uFF0C\u4ECE\u800C\u66F4\u5FEB\u7684\u52A0\u8F7D\u9875\u9762\u3002<br>
\u20032. \u7F13\u5B58\u964D\u4F4E\u4E86\u670D\u52A1\u5668\u7684\u8981\u6C42\uFF0C\u4ECE\u800C\u670D\u52A1\u5668\u66F4\u5FEB\u7684\u54CD\u5E94\u3002</p>
<h2 id="\u7F13\u5B58\u7684\u8D44\u6E90\u6587\u4EF6\u5230\u4EC0\u4E48\u5730\u65B9\u53BB\u4E86\u5462" tabindex="-1"><a class="header-anchor" href="#\u7F13\u5B58\u7684\u8D44\u6E90\u6587\u4EF6\u5230\u4EC0\u4E48\u5730\u65B9\u53BB\u4E86\u5462" aria-hidden="true">#</a> \u7F13\u5B58\u7684\u8D44\u6E90\u6587\u4EF6\u5230\u4EC0\u4E48\u5730\u65B9\u53BB\u4E86\u5462\uFF1F</h2>
<p>\u2003\u6839\u636E\u7F13\u5B58\u7684\u8D44\u6E90\u5B58\u50A8\u7684\u4F4D\u7F6E\u7F13\u5B58\u5206\u4E3A<code v-pre>\u5185\u5B58\u7F13\u5B58(memory cache)</code>\u548C<code v-pre>\u78C1\u76D8\u7F13\u5B58(disk cache)</code> memory cache: \u5B83\u662F\u5C06\u8D44\u6E90\u6587\u4EF6\u7F13\u5B58\u5230\u5185\u5B58\u4E2D\uFF0C\u7B49\u4E0B\u6B21\u8BF7\u6C42\u8BBF\u95EE\u7684\u65F6\u5019\u4E0D\u9700\u8981\u91CD\u65B0\u4E0B\u8F7D\u8D44\u6E90\uFF0C\u800C\u662F\u76F4\u63A5\u4ECE\u5185\u5B58\u4E2D\u8BFB\u53D6\u6570\u636E\u3002disk cache: \u5B83\u662F\u5C06\u8D44\u6E90\u6587\u4EF6\u7F13\u5B58\u5230\u786C\u76D8\u4E2D\uFF0C\u7B49\u4E0B\u6B21\u8BF7\u6C42\u7684\u65F6\u5019\u5B83\u662F\u76F4\u63A5\u4ECE\u786C\u76D8\u4E2D\u8BFB\u53D6\u3002\u4E8C\u8005\u533A\u522B\u5982\u4E0B\uFF1A</p>
<ul>
<li>memory cache(\u5185\u5B58\u7F13\u5B58)\u9000\u51FA\u8FDB\u7A0B\u65F6\u6570\u636E\u4F1A\u88AB\u6E05\u9664\uFF0C\u800C disk cache(\u786C\u76D8\u7F13\u5B58)\u9000\u51FA\u8FDB\u7A0B\u65F6\u6570\u636E\u4E0D\u4F1A\u88AB\u6E05\u9664\u3002\u5185\u5B58\u8BFB\u53D6\u6BD4\u786C\u76D8\u4E2D\u8BFB\u53D6\u7684\u901F\u5EA6\u66F4\u5FEB\u3002\u4F46\u662F\u6211\u4EEC\u4E5F\u4E0D\u80FD\u628A\u6240\u6709\u6570\u636E\u653E\u5728\u5185\u5B58\u4E2D\u7F13\u5B58\u7684\uFF0C\u56E0\u4E3A\u5185\u5B58\u4E5F\u662F\u6709\u9650\u7684\u3002</li>
<li>memory cache(\u5185\u5B58\u7F13\u5B58)\u4E00\u822C\u4F1A\u5C06\u811A\u672C\u3001\u5B57\u4F53\u3001\u56FE\u7247\u4F1A\u5B58\u50A8\u5230\u5185\u5B58\u7F13\u5B58\u4E2D\u3002</li>
<li>disk cache(\u786C\u76D8\u7F13\u5B58) \u4E00\u822C\u975E\u811A\u672C\u4F1A\u5B58\u653E\u5728\u786C\u76D8\u4E2D\uFF0C\u6BD4\u5982 css \u8FD9\u4E9B\u3002</li>
</ul>
<p>\u2003\u7F13\u5B58\u8BFB\u53D6\u7684\u539F\u7406\uFF1A\u5148\u4ECE\u5185\u5B58\u4E2D\u67E5\u627E\u5BF9\u5E94\u7684\u7F13\u5B58\uFF0C\u5982\u679C\u5185\u5B58\u4E2D\u80FD\u627E\u5230\u5C31\u8BFB\u53D6\u5BF9\u5E94\u7684\u7F13\u5B58\uFF0C\u5426\u5219\u7684\u8BDD\u5C31\u4ECE\u786C\u76D8\u4E2D\u67E5\u627E\u5BF9\u5E94\u7684\u7F13\u5B58\uFF0C\u5982\u679C\u6709\u5C31\u8BFB\u53D6\uFF0C\u5426\u5219\u7684\u8BDD\uFF0C\u5C31\u91CD\u65B0\u7F51\u7EDC\u8BF7\u6C42\u3002
\u2003\u6D4F\u89C8\u5668\u7F13\u5B58\u5206\u4E3A\uFF1A<code v-pre>\u5F3A\u5236\u7F13\u5B58\u548C\u534F\u5546\u7F13\u5B58</code><br>
\u2003\u534F\u5546\u7F13\u5B58\u539F\u7406\uFF1A\u5BA2\u6237\u7AEF\u5411\u670D\u52A1\u5668\u7AEF\u53D1\u51FA\u8BF7\u6C42\uFF0C\u670D\u52A1\u7AEF\u4F1A\u68C0\u6D4B\u662F\u5426\u6709\u5BF9\u5E94\u7684\u6807\u8BC6\uFF0C\u5982\u679C\u6CA1\u6709\u5BF9\u5E94\u7684\u6807\u8BC6\uFF0C\u670D\u52A1\u5668\u7AEF\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u5BF9\u5E94\u7684\u6807\u8BC6\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u5BA2\u6237\u7AEF\u4E0B\u6B21\u518D\u6B21\u8BF7\u6C42\u7684\u65F6\u5019\uFF0C\u628A\u8BE5\u6807\u8BC6\u5E26\u8FC7\u53BB\uFF0C\u7136\u540E\u670D\u52A1\u5668\u7AEF\u4F1A\u9A8C\u8BC1\u8BE5\u6807\u8BC6\uFF0C\u5982\u679C\u9A8C\u8BC1\u901A\u8FC7\u4E86\uFF0C\u5219\u4F1A\u54CD\u5E94 304\uFF0C\u544A\u8BC9\u6D4F\u89C8\u5668\u8BFB\u53D6\u7F13\u5B58\u3002\u5982\u679C\u6807\u8BC6\u6CA1\u6709\u901A\u8FC7\uFF0C\u5219\u8FD4\u56DE\u8BF7\u6C42\u7684\u8D44\u6E90\u3002\u90A3\u4E48\u534F\u5546\u7F13\u5B58\u7684\u6807\u8BC6\u53C8\u6709 2 \u79CD\uFF1A<code v-pre>ETag/if-None-Match</code> \u548C <code v-pre>Last-Modified/if-Modify-Since</code></p>
<h2 id="\u534F\u5546\u7F13\u5B58-last-modified-if-modify-since" tabindex="-1"><a class="header-anchor" href="#\u534F\u5546\u7F13\u5B58-last-modified-if-modify-since" aria-hidden="true">#</a> \u534F\u5546\u7F13\u5B58 Last-Modified/if-Modify-Since</h2>
<p>\u2003\u6D4F\u89C8\u5668\u7B2C\u4E00\u6B21\u53D1\u51FA\u8BF7\u6C42\u4E00\u4E2A\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u670D\u52A1\u5668\u4F1A\u8FD4\u56DE\u4E00\u4E2A last-Modify \u5230 hearer \u4E2D. Last-Modify \u542B\u4E49\u662F\u6700\u540E\u7684\u4FEE\u6539\u65F6\u95F4\u3002\u5F53\u6D4F\u89C8\u5668\u518D\u6B21\u8BF7\u6C42\u7684\u65F6\u5019\uFF0Crequest \u7684\u8BF7\u6C42\u5934\u4F1A\u52A0\u4E0A if-Modify-Since\uFF0C\u8BE5\u503C\u4E3A\u7F13\u5B58\u4E4B\u524D\u8FD4\u56DE\u7684 Last-Modify. \u670D\u52A1\u5668\u6536\u5230 if-Modify-Since \u540E\uFF0C\u6839\u636E\u8D44\u6E90\u7684\u6700\u540E\u4FEE\u6539\u65F6\u95F4(last-Modify)\u548C\u8BE5\u503C(if-Modify-Since)\u8FDB\u884C\u6BD4\u8F83\uFF0C\u5982\u679C\u76F8\u7B49\u7684\u8BDD\uFF0C\u5219\u547D\u4E2D\u7F13\u5B58\uFF0C\u8FD4\u56DE 304\uFF0C\u5426\u5219, \u5982\u679C Last-Modify &gt; if-Modify-Since, \u5219\u4F1A\u7ED9\u51FA 200 \u54CD\u5E94\uFF0C\u5E76\u4E14\u66F4\u65B0 Last-Modify \u4E3A\u65B0\u7684\u503C</p>
<h2 id="\u534F\u5546\u7F13\u5B58-etag-if-none-match" tabindex="-1"><a class="header-anchor" href="#\u534F\u5546\u7F13\u5B58-etag-if-none-match" aria-hidden="true">#</a> \u534F\u5546\u7F13\u5B58 ETag/if-None-Match</h2>
<p>\u2003ETag \u7684\u539F\u7406\u548C\u4E0A\u9762\u7684 last-modified \u662F\u7C7B\u4F3C\u7684\u3002ETag \u5219\u662F\u5BF9\u5F53\u524D\u8BF7\u6C42\u7684\u8D44\u6E90\u505A\u4E00\u4E2A\u552F\u4E00\u7684\u6807\u8BC6\u3002\u8BE5\u6807\u8BC6\u53EF\u4EE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u6587\u4EF6\u7684 size,hash \u7B49\u3002\u53EA\u8981\u80FD\u591F\u5408\u7406\u6807\u8BC6\u8D44\u6E90\u7684\u552F\u4E00\u6027\u5E76\u80FD\u9A8C\u8BC1\u662F\u5426\u4FEE\u6539\u8FC7\u5C31\u53EF\u4EE5\u4E86\u3002ETag \u5728\u670D\u52A1\u5668\u54CD\u5E94\u8BF7\u6C42\u7684\u65F6\u5019\uFF0C\u8FD4\u56DE\u5F53\u524D\u8D44\u6E90\u7684\u552F\u4E00\u6807\u8BC6(\u5B83\u662F\u7531\u670D\u52A1\u5668\u751F\u6210\u7684)\u3002\u4F46\u662F\u53EA\u8981\u8D44\u6E90\u6709\u53D8\u5316\uFF0CETag \u4F1A\u91CD\u65B0\u751F\u6210\u7684\u3002\u6D4F\u89C8\u5668\u518D\u4E0B\u4E00\u6B21\u52A0\u8F7D\u7684\u65F6\u5019\u4F1A\u5411\u670D\u52A1\u5668\u53D1\u9001\u8BF7\u6C42\uFF0C\u4F1A\u5C06\u4E0A\u4E00\u6B21\u8FD4\u56DE\u7684 ETag \u503C\u653E\u5230 request header \u91CC\u7684 if-None-Match \u91CC\u9762\u53BB\uFF0C\u670D\u52A1\u5668\u7AEF\u53EA\u8981\u6BD4\u8F83\u5BA2\u6237\u7AEF\u4F20\u6765\u7684 if-None-Match \u503C\u662F\u5426\u548C\u81EA\u5DF1\u670D\u52A1\u5668\u4E0A\u7684 ETag \u662F\u5426\u4E00\u81F4\uFF0C\u5982\u679C\u4E00\u81F4\u8BF4\u660E\u8D44\u6E90\u672A\u4FEE\u6539\u8FC7\uFF0C\u56E0\u6B64\u8FD4\u56DE 304\uFF0C\u5982\u679C\u4E0D\u4E00\u81F4\uFF0C\u8BF4\u660E\u4FEE\u6539\u8FC7\uFF0C\u56E0\u6B64\u8FD4\u56DE 200\u3002\u5E76\u4E14\u628A\u65B0\u7684 Etag \u8D4B\u503C\u7ED9 if-None-Match \u6765\u66F4\u65B0\u8BE5\u503C</p>
<h2 id="last-modified-\u548C-etag-\u4E4B\u95F4\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#last-modified-\u548C-etag-\u4E4B\u95F4\u5BF9\u6BD4" aria-hidden="true">#</a> last-modified \u548C ETag \u4E4B\u95F4\u5BF9\u6BD4</h2>
<ul>
<li>
<ol>
<li>\u5728\u7CBE\u5EA6\u4E0A\uFF0CETag \u8981\u4F18\u5148\u4E8E last-modified\u3002</li>
</ol>
</li>
<li>
<ol start="2">
<li>\u5728\u6027\u80FD\u4E0A\uFF0CEtag \u8981\u900A\u4E8E Last-Modified\uFF0CLast-Modified \u9700\u8981\u8BB0\u5F55\u65F6\u95F4\uFF0C\u800C Etag \u9700\u8981\u670D\u52A1\u5668\u901A\u8FC7\u7B97\u6CD5\u6765\u8BA1\u7B97\u51FA\u4E00\u4E2A hash \u503C\u3002</li>
</ol>
</li>
<li>
<ol start="3">
<li>\u5728\u4F18\u5148\u7EA7\u4E0A\uFF0C\u670D\u52A1\u5668\u6821\u9A8C\u4F18\u5148\u8003\u8651 Etag\u3002</li>
</ol>
</li>
</ul>
<h2 id="\u7406\u89E3\u5F3A\u5236\u7F13\u5B58" tabindex="-1"><a class="header-anchor" href="#\u7406\u89E3\u5F3A\u5236\u7F13\u5B58" aria-hidden="true">#</a> \u7406\u89E3\u5F3A\u5236\u7F13\u5B58</h2>
<p>\u2003\u57FA\u672C\u539F\u7406\uFF1A\u6D4F\u89C8\u5668\u5728\u52A0\u8F7D\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u4F1A\u5148\u6839\u636E\u672C\u5730\u7F13\u5B58\u8D44\u6E90\u7684 header \u4E2D\u7684\u4FE1\u606F(Expires \u548C Cache-Control)\u6765\u5224\u65AD\u662F\u5426\u9700\u8981\u5F3A\u5236\u7F13\u5B58\u3002\u5982\u679C\u547D\u4E2D\u7684\u8BDD\uFF0C\u5219\u4F1A\u76F4\u63A5\u4F7F\u7528\u7F13\u5B58\u4E2D\u7684\u8D44\u6E90\u3002\u5426\u5219\u7684\u8BDD\uFF0C\u4F1A\u7EE7\u7EED\u5411\u670D\u52A1\u5668\u53D1\u9001\u8BF7\u6C42\u3002<br>
\u2003Expires \u662F http1.0 \u7684\u89C4\u8303\uFF0C\u5B83\u7684\u503C\u662F\u4E00\u4E2A\u7EDD\u5BF9\u65F6\u95F4\u7684 GMT \u683C\u5F0F\u7684\u65F6\u95F4\u5B57\u7B26\u4E32\u3002\u8FD9\u4E2A\u65F6\u95F4\u4EE3\u8868\u7684\u8BE5\u8D44\u6E90\u7684\u5931\u6548\u65F6\u95F4\uFF0C\u5982\u679C\u5728\u8BE5\u65F6\u95F4\u4E4B\u524D\u8BF7\u6C42\u7684\u8BDD\uFF0C\u5219\u90FD\u662F\u4ECE\u7F13\u5B58\u91CC\u9762\u8BFB\u53D6\u7684\u3002\u4F46\u662F\u4F7F\u7528\u8BE5\u89C4\u8303\u65F6\uFF0C\u53EF\u80FD\u4F1A\u6709\u4E00\u4E2A\u7F3A\u70B9\u5C31\u662F\u5F53\u670D\u52A1\u5668\u7684\u65F6\u95F4\u548C\u5BA2\u6237\u7AEF\u7684\u65F6\u95F4\u4E0D\u4E00\u6837\u7684\u60C5\u51B5\u4E0B\uFF0C\u4F1A\u5BFC\u81F4\u7F13\u5B58\u5931\u6548\u3002<br>
\u2003Cache-Control \u662F http1.1 \u7684\u89C4\u8303\uFF0C\u5B83\u662F\u5229\u7528\u8BE5\u5B57\u6BB5 max-age \u503C\u8FDB\u884C\u5224\u65AD\u7684\u3002\u8BE5\u503C\u662F\u4E00\u4E2A\u76F8\u5BF9\u65F6\u95F4\uFF0C\u6BD4\u5982 Cache-Control: max-age=3600, \u4EE3\u8868\u8BE5\u8D44\u6E90\u7684\u6709\u6548\u671F\u662F 3600 \u79D2\u3002\u9664\u4E86\u8BE5\u5B57\u6BB5\u5916\uFF0C\u6211\u4EEC\u8FD8\u6709\u5982\u4E0B\u5B57\u6BB5\u53EF\u4EE5\u8BBE\u7F6E\uFF1A</p>
<ul>
<li>
<p>no-cache: \u9700\u8981\u8FDB\u884C\u534F\u5546\u7F13\u5B58\uFF0C\u53D1\u9001\u8BF7\u6C42\u5230\u670D\u52A1\u5668\u786E\u8BA4\u662F\u5426\u4F7F\u7528\u7F13\u5B58\u3002</p>
</li>
<li>
<p>no-store\uFF1A\u7981\u6B62\u4F7F\u7528\u7F13\u5B58\uFF0C\u6BCF\u4E00\u6B21\u90FD\u8981\u91CD\u65B0\u8BF7\u6C42\u6570\u636E\u3002</p>
</li>
<li>
<p>public\uFF1A\u53EF\u4EE5\u88AB\u6240\u6709\u7684\u7528\u6237\u7F13\u5B58\uFF0C\u5305\u62EC\u7EC8\u7AEF\u7528\u6237\u548C CDN \u7B49\u4E2D\u95F4\u4EE3\u7406\u670D\u52A1\u5668\u3002</p>
</li>
<li>
<p>private\uFF1A\u53EA\u80FD\u88AB\u7EC8\u7AEF\u7528\u6237\u7684\u6D4F\u89C8\u5668\u7F13\u5B58\uFF0C\u4E0D\u5141\u8BB8 CDN \u7B49\u4E2D\u7EE7\u7F13\u5B58\u670D\u52A1\u5668\u5BF9\u5176\u7F13\u5B58\u3002</p>
</li>
</ul>
<p>\u2003<strong>\u6CE8\u610F\uFF1ACache-Control \u4E0E Expires \u53EF\u4EE5\u5728\u670D\u52A1\u7AEF\u914D\u7F6E\u540C\u65F6\u542F\u7528\uFF0C\u540C\u65F6\u542F\u7528\u7684\u65F6\u5019 Cache-Control \u4F18\u5148\u7EA7\u9AD8</strong></p>
<h2 id="nginx-\u7F13\u5B58\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#nginx-\u7F13\u5B58\u914D\u7F6E" aria-hidden="true">#</a> nginx \u7F13\u5B58\u914D\u7F6E</h2>
<p>\u2003\u53EF\u4EE5\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\uFF0C\u51CF\u5C11\u670D\u52A1\u5668\u7684\u5904\u7406\u8BF7\u6C42\u538B\u529B\u3002\u6BD4\u5982\u5BF9\u4E00\u4E9B\u56FE\u7247\uFF0C\u5927\u6587\u4EF6\uFF0Ccss \u6216 js \u505A\u4E00\u4E9B\u7F13\u5B58\uFF0C\u90A3\u4E48\u5728\u6BCF\u6B21\u5237\u65B0\u6D4F\u89C8\u5668\u7684\u65F6\u5019\uFF0C\u5C31\u4E0D\u4F1A\u91CD\u65B0\u8BF7\u6C42\u4E86\uFF0C\u800C\u662F\u4ECE\u7F13\u5B58\u91CC\u9762\u8BFB\u53D6\u3002\u8FD9\u6837\u5C31\u53EF\u4EE5\u51CF\u8F7B\u670D\u52A1\u5668\u7684\u538B\u529B\u3002nginx \u53EF\u914D\u7F6E\u7684\u7F13\u5B58\u53C8\u6709 2 \u79CD\uFF1A</p>
<ul>
<li>1 \u5BA2\u6237\u7AEF\u7684\u7F13\u5B58(\u4E00\u822C\u6307\u6D4F\u89C8\u5668\u7684\u7F13\u5B58)\u3002</li>
<li>2 \u670D\u52A1\u7AEF\u7684\u7F13\u5B58(\u4F7F\u7528 proxy-cache \u5B9E\u73B0\u7684)\u3002<br>
<strong>\u6CE8\u610F\uFF1A\u5BA2\u6237\u7AEF\u7684\u7F13\u5B58\u4E00\u822C\u6709\u5982\u4E0B\u4E24\u79CD\u65B9\u5F0F\u5B9E\u73B0\uFF1A\u534F\u5546\u7F13\u5B58\u548C\u5F3A\u7F13\u5B58\u3002</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>server <span class="token punctuation">{</span>
  location ~* <span class="token punctuation">\\</span>.<span class="token punctuation">(</span>html<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
    access_log off<span class="token punctuation">;</span>
    add_header  Cache-Control  max-age<span class="token operator">=</span>no-cache<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  location ~* <span class="token punctuation">\\</span>.<span class="token punctuation">(</span>css<span class="token operator">|</span>js<span class="token operator">|</span>png<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>gif<span class="token operator">|</span>gz<span class="token operator">|</span>svg<span class="token operator">|</span>mp4<span class="token operator">|</span>ogg<span class="token operator">|</span>ogv<span class="token operator">|</span>webm<span class="token operator">|</span>htc<span class="token operator">|</span>xml<span class="token operator">|</span>woff<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
    <span class="token comment"># \u540C\u4E0A\uFF0C\u901A\u914D\u6240\u6709\u4EE5.css/.js/...\u7ED3\u5C3E\u7684\u8BF7\u6C42</span>
    access_log off<span class="token punctuation">;</span>
    add_header    Cache-Control  max-age<span class="token operator">=</span><span class="token number">360000</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>~_ \u7684\u542B\u4E49\u662F\uFF1A\u901A\u914D\u4EFB\u610F\u5B57\u7B26\uFF08\u4E14\u5927\u5C0F\u5199\u4E0D\u654F\u611F\uFF09\uFF0C\\\u8F6C\u4E49\u5B57\u7B26\uFF0C\u56E0\u6B64 ~_ .(html)$\u7684\u542B\u4E49\u662F\uFF1A\u5339\u914D\u6240\u6709\u4EE5.html \u7ED3\u5C3E\u7684\u8BF7\u6C42
access_log off; \u7684\u542B\u4E49\u662F \u5173\u95ED\u65E5\u5FD7\u529F\u80FD\u3002<br>
<strong>add_header Cache-Control max-age=no-cache;</strong> \u7684\u542B\u4E49\uFF1Ahtml \u6587\u4EF6\u4E0D\u8BBE\u7F6E\u5F3A\u5236\u7F13\u5B58\u65F6\u95F4\uFF0C\u534F\u5546\u7F13\u5B58\uFF0C\u4F7F\u7528 Last-Modified\u3002no-cache \u4F1A\u53D1\u8D77\u5F80\u8FD4\u901A\u4FE1\u6765\u9A8C\u8BC1\u7F13\u5B58\u7684\u54CD\u5E94\uFF0C\u4F46\u5982\u679C\u8D44\u6E90\u672A\u53D1\u751F\u53D8\u5316\uFF0C\u5219\u4E0D\u4F1A\u4E0B\u8F7D\uFF0C\u8FD4\u56DE 304<br>
<strong>add_header Cache-Control max-age=360000;</strong> \u7684\u542B\u4E49\u7ED9\u4E0A\u9762\u5339\u914D\u540E\u7F00\u7684\u6587\u4EF6\u8BBE\u7F6E\u5F3A\u5236\u7F13\u5B58\uFF0C\u4E14\u7F13\u5B58\u7684\u65F6\u95F4\u662F 360000 \u79D2\uFF0C\u7B2C\u4E00\u6B21\u8BBF\u95EE\u7684\u65F6\u5019\uFF0C\u4ECE\u670D\u52A1\u5668\u8BF7\u6C42\uFF0C\u5F53\u9664\u4E86\u7B2C\u4E00\u6B21\u4EE5\u5916\uFF0C\u518D\u6B21\u5237\u65B0\u6D4F\u89C8\u5668\uFF0C\u4F1A\u4ECE\u6D4F\u89C8\u5668\u7F13\u5B58\u8BFB\u53D6\uFF0C\u90A3\u4E48\u5F3A\u5236\u7F13\u5B58\u4E00\u822C\u662F\u4ECE\u5185\u5B58\u91CC\u9762\u5148\u8BFB\u53D6\uFF0C\u5982\u679C\u5185\u5B58\u6CA1\u6709\uFF0C\u518D\u4ECE\u786C\u76D8\u8BFB\u53D6\u3002</p>
<p><strong>\u6CE8\u610F\uFF1A\u5982\u4E0A\u53EA\u662F\u4E0D\u5BF9\u53CD\u5411\u4EE3\u7406\u7684\u9875\u9762\u8FDB\u884C\u7F13\u5B58\u8BBE\u7F6E\u7684\uFF0C\u4F46\u662F\u5982\u679C\u662F\u53CD\u5411\u4EE3\u7406\u540E\u7684\u9875\u9762\uFF0C\u5982\u4E0A\u8BBE\u7F6E\u662F\u4E0D\u751F\u6548\u7684\u3002\u6BD4\u5982\u8BF4\u6211 node \u8D77\u4E86\u4E00\u4E2A\u670D\u52A1\uFF0C\u7136\u540E\u901A\u8FC7\u8BBF\u95EE nginx \u53CD\u5411\u4EE3\u7406\u7684\u65B9\u5F0F\u4EE3\u7406\u5230\u6211 node \u670D\u52A1\u6765\uFF0C\u4E0A\u9762\u7684\u914D\u7F6E\u662F\u4E0D\u751F\u6548\u7684\u3002\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u5982\u4E0B\u5904\u7406\u914D\u7F6E</strong></p>
<h2 id="\u89E3\u51B3-nginx-\u53CD\u5411\u4EE3\u7406\u7F13\u5B58\u4E0D\u8D77\u4F5C\u7528\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3-nginx-\u53CD\u5411\u4EE3\u7406\u7F13\u5B58\u4E0D\u8D77\u4F5C\u7528\u7684\u95EE\u9898" aria-hidden="true">#</a> \u89E3\u51B3 nginx \u53CD\u5411\u4EE3\u7406\u7F13\u5B58\u4E0D\u8D77\u4F5C\u7528\u7684\u95EE\u9898</h2>
<p>\u6BD4\u5982\u6211\u4E0A\u9762\u7684 node \u670D\u52A1\u7AEF\u53E3\u662F 7878 \u7AEF\u53E3\u3002nginx \u9700\u8981\u5982\u4E0B\u914D\u7F6E\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>server <span class="token punctuation">{</span>
  listen  <span class="token number">8081</span><span class="token punctuation">;</span>
  server_name  xxx.abc.com<span class="token punctuation">;</span>
  location / <span class="token punctuation">{</span>
    proxy_pass http://localhost:7878<span class="token punctuation">;</span>
    add_header  Cache-Control  max-age<span class="token operator">=</span>no-cache<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1 \u5982\u679C\u6211\u4EEC\u8981\u6DFB\u52A0\u7F13\u5B58\u529F\u80FD\u7684\u8BDD\uFF0C\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u7528\u4E8E\u5B58\u653E\u7F13\u5B58\u6587\u4EF6\u7684\u6587\u4EF6\u5939\u3002\u6BD4\u5982\u6211\u4EEC\u8FD9\u91CC\u4F7F\u7528 /data/nuget-cache\u3002<br>
2 \u7136\u540E\u6211\u4EEC\u9700\u8981\u5728 nginx.conf \u7684 http \u8BBE\u7F6E\u90E8\u5206\u6DFB\u52A0 proxy_cache_path \u7684\u8BBE\u7F6E\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>http <span class="token punctuation">{</span>
  // <span class="token punctuation">..</span><span class="token punctuation">..</span>. \u5176\u4ED6\u7684\u914D\u7F6E
  proxy_cache_path  /data/nuget-cache <span class="token assign-left variable">levels</span><span class="token operator">=</span><span class="token number">1</span>:2 <span class="token assign-left variable">keys_zone</span><span class="token operator">=</span>nuget-cache:20m <span class="token assign-left variable">max_size</span><span class="token operator">=</span>50g <span class="token assign-left variable">inactive</span><span class="token operator">=</span>168h<span class="token punctuation">;</span>
  server <span class="token punctuation">{</span>
    listen  <span class="token number">8081</span><span class="token punctuation">;</span>
    server_name  xxx.abc.com<span class="token punctuation">;</span>
    location / <span class="token punctuation">{</span>
      proxy_pass http://localhost:7878<span class="token punctuation">;</span>
      add_header  Cache-Control  max-age<span class="token operator">=</span>no-cache<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>proxy_cache_path \u5404\u4E2A\u914D\u7F6E\u503C\u7684\u542B\u4E49\u89E3\u6790\u5982\u4E0B\uFF1A</p>
<ul>
<li>proxy_cache_path \u6307\u7F13\u5B58\u7684\u76EE\u5F55\uFF0C\u76EE\u5F55\u4E3A\uFF1A/data/nuget-cache\u3002</li>
<li>levels=1:2 \u8868\u793A\u91C7\u7528 2 \u7EA7\u76EE\u5F55\u7ED3\u6784\u3002</li>
<li>keys_zone \u6307\u7684\u662F\u7F13\u5B58\u7A7A\u95F4\u540D\u79F0\uFF0C\u53EB nuget-cache\u3002\u7F13\u5B58\u5185\u5B58\u7684\u7A7A\u95F4\u4E3A 20M\u3002</li>
<li>max_size \u6307\u7684\u662F\u7F13\u5B58\u6587\u4EF6\u53EF\u4EE5\u5360\u7528\u7684\u6700\u5927\u7A7A\u95F4\uFF0C\u4E3A 50G\u3002</li>
<li>inactive=168h; \u9ED8\u8BA4\u8FC7\u671F\u65F6\u95F4\u4E3A 168 \u4E2A\u5C0F\u65F6\u3002\u4E3A 7 \u5929\uFF0C\u4E5F\u53EF\u4EE5\u5199\u6210\uFF1Ainactive=7d; \u8FD9\u6837\u7684\u683C\u5F0F\u3002</li>
</ul>
<p>3 \u6211\u4EEC\u8FD8\u9700\u8981\u5728 server \u8BBE\u7F6E\u90E8\u5206\u6DFB\u52A0 proxy_cache \u4E0E proxy_cache_valid \u7684\u8BBE\u7F6E\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>http <span class="token punctuation">{</span>
  // <span class="token punctuation">..</span><span class="token punctuation">..</span>. \u5176\u4ED6\u7684\u914D\u7F6E
  proxy_cache_path  /data/nuget-cache <span class="token assign-left variable">levels</span><span class="token operator">=</span><span class="token number">1</span>:2 <span class="token assign-left variable">keys_zone</span><span class="token operator">=</span>nuget-cache:20m <span class="token assign-left variable">max_size</span><span class="token operator">=</span>50g <span class="token assign-left variable">inactive</span><span class="token operator">=</span>168h<span class="token punctuation">;</span>
  server <span class="token punctuation">{</span>
    listen  <span class="token number">8081</span><span class="token punctuation">;</span>
    server_name  xxx.abc.com<span class="token punctuation">;</span>
    location / <span class="token punctuation">{</span>
      proxy_pass http://localhost:7878<span class="token punctuation">;</span>
      add_header  Cache-Control  max-age<span class="token operator">=</span>no-cache<span class="token punctuation">;</span>
      proxy_cache nuget-cache<span class="token punctuation">;</span>
      proxy_cache_valid 168h<span class="token punctuation">;</span>
      proxy_ignore_headers Set-Cookie Cache-Control<span class="token punctuation">;</span>
      proxy_hide_header Cache-Control<span class="token punctuation">;</span>
      proxy_hide_header Set-Cookie<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>proxy_cache \u8BBE\u7F6E\u7684\u662F proxy_cache_path \u4E2D\u7684 keys_zone \u7684\u503C\u3002</li>
<li>proxy_cache_valid\uFF1A\u8BBE\u7F6E\u7684\u662F\u7F13\u5B58\u8FC7\u671F\u65F6\u95F4\uFF0C\u6BD4\u5982\u8BBE\u7F6E 168 \u4E2A\u5C0F\u65F6\u8FC7\u671F\u3002</li>
<li>proxy_ignore_headers \u7684\u542B\u4E49\u662F\uFF1A\u5FFD\u7565 Cache-Control \u7684\u8BF7\u6C42\u5934\u63A7\u5236\uFF0C\u4F9D\u7136\u8FDB\u884C\u7F13\u5B58\uFF0C\u6BD4\u5982\u5BF9\u8BF7\u6C42\u5934\u8BBE\u7F6E cookie \u540E\uFF0C\u9ED8\u8BA4\u662F\u4E0D\u7F13\u5B58\u7684\uFF0C\u9700\u8981\u6211\u4EEC\u589E\u52A0\u5FFD\u7565\u914D\u7F6E\u3002<br>
\u81F3\u6B64 nginx \u7F13\u5B58\u914D\u7F6E\u5C31\u5B8C\u6210\u4E86\uFF0C\u91CD\u542F nginx\uFF0C\u53D1\u73B0\u5DF2\u7ECF\u53EF\u4EE5\u5B9E\u73B0\u7F13\u5B58\u4E86\u3002</li>
</ul>
`,date:"2022-03-14",deps:[],links:[],pathInferred:"/posts/devops/nginx/cache.html",pathLocale:"/",permalink:null,routeMeta:{title:"Nginx Cache\u7F13\u5B58\u914D\u7F6E"},sfcBlocks:[],slug:"cache",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/nginx/cache.md",filePathRelative:"posts/devops/nginx/cache.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/cache.html.vue",componentFilePathRelative:"pages/posts/devops/nginx/cache.html.vue",componentFileChunkName:"v-324dfae9",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/cache.html.js",dataFilePathRelative:"pages/posts/devops/nginx/cache.html.js",dataFileChunkName:"v-324dfae9",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/nginx/cache.html",htmlFilePathRelative:"posts/devops/nginx/cache.html"},title:"Nginx Cache\u7F13\u5B58\u914D\u7F6E"},["/posts/devops/nginx/cache","/posts/devops/nginx/cache.md"]],["v-2b29052d","/posts/devops/nginx/gzip.html",{_blog:{data:{key:"v-2b29052d",path:"/posts/devops/nginx/gzip.html",title:"Nginx Gzip\u8D44\u6E90\u538B\u7F29",lang:"zh-CN",frontmatter:{title:"Nginx Gzip\u8D44\u6E90\u538B\u7F29",date:"2022-03-14T09:34:50.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201100605.jpg",summary:`\u2003Nginx Gzip \u538B\u7F29\u529F\u80FD\uFF0C \u53EF\u4EE5\u4F7F\u7F51\u7AD9\u7684 css\u3001js \u3001xml\u3001html \u7B49\u9759\u6001\u8D44\u6E90\u5728\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\uFF0C\u7ECF\u8FC7 Gzip \u538B\u7F29\u540E\u8D44\u6E90\u53EF\u4EE5\u53D8\u4E3A\u539F\u6765\u7684 30%\u751A\u81F3\u66F4\u5C0F\uFF0C\u5C3D\u7BA1\u8FD9\u6837\u4F1A\u6D88\u8017\u4E00\u5B9A\u7684 cpu \u8D44\u6E90\uFF0C\u4F46\u662F\u4F1A\u8282\u7EA6\u5927\u91CF\u7684\u51FA\u53E3\u5E26\u5BBD\u6765\u63D0\u9AD8\u8BBF\u95EE\u901F\u5EA6
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/gzip.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx Gzip\u8D44\u6E90\u538B\u7F29"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-03-14T09:34:50.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nginx Gzip \u538B\u7F29\u529F\u80FD\uFF0C \u53EF\u4EE5\u4F7F\u7F51\u7AD9\u7684 css\u3001js \u3001xml\u3001html \u7B49\u9759\u6001\u8D44\u6E90\u5728\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\uFF0C\u7ECF\u8FC7 Gzip \u538B\u7F29\u540E\u8D44\u6E90\u53EF\u4EE5\u53D8\u4E3A\u539F\u6765\u7684 30%\u751A\u81F3\u66F4\u5C0F\uFF0C\u5C3D\u7BA1\u8FD9\u6837\u4F1A\u6D88\u8017\u4E00\u5B9A\u7684 cpu \u8D44\u6E90\uFF0C\u4F46\u662F\u4F1A\u8282\u7EA6\u5927\u91CF\u7684\u51FA\u53E3\u5E26\u5BBD\u6765\u63D0\u9AD8\u8BBF\u95EE\u901F\u5EA6</p>
`,headers:[{level:2,title:"Gzip \u538B\u7F29",slug:"gzip-\u538B\u7F29",children:[]},{level:2,title:"Nginx \u5F00\u542F Gzip \u538B\u7F29\u53C2\u6570\u8BF4\u660E",slug:"nginx-\u5F00\u542F-gzip-\u538B\u7F29\u53C2\u6570\u8BF4\u660E",children:[]},{level:2,title:"\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u8FDB\u884C gzip \u538B\u7F29\u7684\u8BF7\u6C42\u548C\u5904\u7406\u8FC7\u7A0B",slug:"\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u8FDB\u884C-gzip-\u538B\u7F29\u7684\u8BF7\u6C42\u548C\u5904\u7406\u8FC7\u7A0B",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/nginx/gzip.md",readingTime:{minutes:6.26,words:1878},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/nginx/gzip.html`},key:"v-2b29052d",path:"/posts/devops/nginx/gzip.html",title:"Nginx Gzip\u8D44\u6E90\u538B\u7F29",lang:"zh-CN",frontmatter:{title:"Nginx Gzip\u8D44\u6E90\u538B\u7F29",date:"2022-03-14T09:34:50.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201100605.jpg",summary:`\u2003Nginx Gzip \u538B\u7F29\u529F\u80FD\uFF0C \u53EF\u4EE5\u4F7F\u7F51\u7AD9\u7684 css\u3001js \u3001xml\u3001html \u7B49\u9759\u6001\u8D44\u6E90\u5728\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\uFF0C\u7ECF\u8FC7 Gzip \u538B\u7F29\u540E\u8D44\u6E90\u53EF\u4EE5\u53D8\u4E3A\u539F\u6765\u7684 30%\u751A\u81F3\u66F4\u5C0F\uFF0C\u5C3D\u7BA1\u8FD9\u6837\u4F1A\u6D88\u8017\u4E00\u5B9A\u7684 cpu \u8D44\u6E90\uFF0C\u4F46\u662F\u4F1A\u8282\u7EA6\u5927\u91CF\u7684\u51FA\u53E3\u5E26\u5BBD\u6765\u63D0\u9AD8\u8BBF\u95EE\u901F\u5EA6
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/gzip.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx Gzip\u8D44\u6E90\u538B\u7F29"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-03-14T09:34:50.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nginx Gzip \u538B\u7F29\u529F\u80FD\uFF0C \u53EF\u4EE5\u4F7F\u7F51\u7AD9\u7684 css\u3001js \u3001xml\u3001html \u7B49\u9759\u6001\u8D44\u6E90\u5728\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\uFF0C\u7ECF\u8FC7 Gzip \u538B\u7F29\u540E\u8D44\u6E90\u53EF\u4EE5\u53D8\u4E3A\u539F\u6765\u7684 30%\u751A\u81F3\u66F4\u5C0F\uFF0C\u5C3D\u7BA1\u8FD9\u6837\u4F1A\u6D88\u8017\u4E00\u5B9A\u7684 cpu \u8D44\u6E90\uFF0C\u4F46\u662F\u4F1A\u8282\u7EA6\u5927\u91CF\u7684\u51FA\u53E3\u5E26\u5BBD\u6765\u63D0\u9AD8\u8BBF\u95EE\u901F\u5EA6</p>
`,headers:[{level:2,title:"Gzip \u538B\u7F29",slug:"gzip-\u538B\u7F29",children:[]},{level:2,title:"Nginx \u5F00\u542F Gzip \u538B\u7F29\u53C2\u6570\u8BF4\u660E",slug:"nginx-\u5F00\u542F-gzip-\u538B\u7F29\u53C2\u6570\u8BF4\u660E",children:[]},{level:2,title:"\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u8FDB\u884C gzip \u538B\u7F29\u7684\u8BF7\u6C42\u548C\u5904\u7406\u8FC7\u7A0B",slug:"\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u8FDB\u884C-gzip-\u538B\u7F29\u7684\u8BF7\u6C42\u548C\u5904\u7406\u8FC7\u7A0B",children:[]}],content:`---
title: Nginx Gzip\u8D44\u6E90\u538B\u7F29
date: 2022-03-14 09:34:50
tag:
  - nginx
category:
  - nginx
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201100605.jpg
---

&emsp;Nginx Gzip \u538B\u7F29\u529F\u80FD\uFF0C \u53EF\u4EE5\u4F7F\u7F51\u7AD9\u7684 css\u3001js \u3001xml\u3001html \u7B49\u9759\u6001\u8D44\u6E90\u5728\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\uFF0C\u7ECF\u8FC7 Gzip \u538B\u7F29\u540E\u8D44\u6E90\u53EF\u4EE5\u53D8\u4E3A\u539F\u6765\u7684 30%\u751A\u81F3\u66F4\u5C0F\uFF0C\u5C3D\u7BA1\u8FD9\u6837\u4F1A\u6D88\u8017\u4E00\u5B9A\u7684 cpu \u8D44\u6E90\uFF0C\u4F46\u662F\u4F1A\u8282\u7EA6\u5927\u91CF\u7684\u51FA\u53E3\u5E26\u5BBD\u6765\u63D0\u9AD8\u8BBF\u95EE\u901F\u5EA6

<!-- more -->

## Gzip \u538B\u7F29

&emsp;Nginx \u5F00\u542F Gzip \u538B\u7F29\u529F\u80FD\uFF0C\u53EF\u4EE5\u4F7F\u7F51\u7AD9\u7684 css\u3001js \u3001xml\u3001html \u6587\u4EF6\u5728\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\uFF0C\u63D0\u9AD8\u7F51\u9875\u7684\u8BBF\u95EE\u901F\u5EA6,\u6709\u6548\u5730\u8282\u7EA6\u5E26\u5BBD,\u8FDB\u800C\u4F18\u5316 Nginx \u6027\u80FD! \u7ECF\u8FC7 Gzip \u538B\u7F29\u540E\u9875\u9762\u5927\u5C0F\u53EF\u4EE5\u53D8\u4E3A\u539F\u6765\u7684 30%\u751A\u81F3\u66F4\u5C0F\uFF0C\u8FD9\u6837\uFF0C\u7528\u6237\u6D4F\u89C8\u9875\u9762\u7684\u65F6\u5019\u901F\u5EA6\u4F1A\u5FEB\u5F97\u591A\u3002Gzip \u7684\u538B\u7F29\u9875\u9762\u9700\u8981\u6D4F\u89C8\u5668\u548C\u670D\u52A1\u5668\u53CC\u65B9\u90FD\u652F\u6301\uFF0C\u5B9E\u9645\u4E0A\u5C31\u662F\u670D\u52A1\u5668\u7AEF\u538B\u7F29\uFF0C\u4F20\u5230\u6D4F\u89C8\u5668\u540E\u6D4F\u89C8\u5668\u89E3\u538B\u5E76\u89E3\u6790\u3002\u6D4F\u89C8\u5668\u90A3\u91CC\u4E0D\u9700\u8981\u6211\u4EEC\u62C5\u5FC3\uFF0C\u56E0\u4E3A\u76EE\u524D\u7684\u5DE8\u5927\u591A\u6570\u6D4F\u89C8\u5668 \u90FD\u652F\u6301\u89E3\u6790 Gzip \u8FC7\u7684\u9875\u9762\u3002  
&emsp;\u5F00\u542F Gzip \u529F\u80FD\u540E\uFF0CNginx \u670D\u52A1\u5668\u4F1A\u6839\u636E\u914D\u7F6E\u7684\u7B56\u7565\u5BF9\u53D1\u9001\u7684\u5185\u5BB9, \u5982 css\u3001js\u3001xml\u3001html \u7B49\u9759\u6001\u8D44\u6E90\u8FDB\u884C\u538B\u7F29, \u4F7F\u5F97\u8FD9\u4E9B\u5185\u5BB9\u5927\u5C0F\u51CF\u5C11\uFF0C\u5728\u7528\u6237\u63A5\u6536\u5230\u8FD4\u56DE\u5185\u5BB9\u4E4B\u524D\u5BF9\u5176\u8FDB\u884C\u5904\u7406\uFF0C\u4EE5\u538B\u7F29\u540E\u7684\u6570\u636E\u5C55\u73B0\u7ED9\u5BA2\u6237\u3002\u8FD9\u6837\u4E0D\u4EC5\u53EF\u4EE5\u8282\u7EA6\u5927\u91CF\u7684\u51FA\u53E3\u5E26\u5BBD\uFF0C\u63D0\u9AD8\u4F20\u8F93\u6548\u7387\uFF0C\u8FD8\u80FD\u63D0\u5347\u7528\u6237\u5FEB\u7684\u611F\u77E5\u4F53\u9A8C, \u4E00\u4E3E\u4E24\u5F97; \u5C3D\u7BA1\u4F1A\u6D88\u8017\u4E00\u5B9A\u7684 cpu \u8D44\u6E90\uFF0C\u4F46\u662F\u4E3A\u4E86\u7ED9\u7528\u6237\u66F4\u597D\u7684\u4F53\u9A8C\u8FD8\u662F\u503C\u5F97\u7684\u3002  
&emsp;Web \u7F51\u7AD9\u4E0A\u7684\u56FE\u7247\uFF0C\u89C6\u9891\u7B49\u5176\u5B83\u591A\u5A92\u4F53\u6587\u4EF6\u4EE5\u53CA\u5927\u6587\u4EF6\uFF0C\u56E0\u4E3A\u538B\u7F29\u524D\u540E\u6587\u4EF6\u5927\u5C0F\u538B\u7F29\u5DEE\u5F02\u4E0D\u5927\uFF0C\u538B\u7F29\u6548\u679C\u4E0D\u597D\uFF0C\u53CD\u800C\u4F1A\u589E\u52A0 cup \u7684\u6D88\u8017\uFF0C\u6240\u4EE5\u5BF9\u4E8E\u56FE\u7247\u6216\u5927\u6587\u4EF6\u6CA1\u6709\u5FC5\u8981\u8FDB\u884C\u538B\u7F29\u3002\u5982\u679C\u60F3\u8981\u4F18\u5316\uFF0C\u53EF\u4EE5\u91C7\u7528\u5BA2\u6237\u7AEF\u7F13\u5B58\u7684\u65B9\u6CD5\u8FDB\u884C\u6027\u80FD\u4F18\u5316\u3002Gzip \u538B\u7F29\u53EF\u4EE5\u914D\u7F6E http,server \u548C location \u6A21\u5757\u4E0B\u3002  
&emsp;\u5BF9\u4E8E\u5B57\u4F53\u7684\u5904\u7406,\u53EA\u9700\u8981\u4E3A ttf\u3001otf \u548C svg \u5B57\u4F53\u542F\u7528 gzip\uFF0C\u5BF9\u5176\u4ED6\u5B57\u4F53\u683C\u5F0F\u8FDB\u884C gzip \u538B\u7F29\u65F6\u6548\u679C\u4E0D\u660E\u663E\u3002\`gzip_types font/ttf font/otf image/svg+xml \`

## Nginx \u5F00\u542F Gzip \u538B\u7F29\u53C2\u6570\u8BF4\u660E

\`\`\`bash
# \u5F00\u542Fgzip\u538B\u7F29\u670D\u52A1
gzip on;

# gzip\u538B\u7F29\u662F\u8981\u7533\u8BF7\u4E34\u65F6\u5185\u5B58\u7A7A\u95F4\u7684\uFF0C\u5047\u8BBE\u524D\u63D0\u662F\u538B\u7F29\u540E\u5927\u5C0F\u662F\u5C0F\u4E8E\u7B49\u4E8E\u538B\u7F29\u524D\u7684\u3002
# \u4F8B\u5982\uFF0C\u5982\u679C\u539F\u59CB\u6587\u4EF6\u5927\u5C0F\u4E3A10K\uFF0C\u90A3\u4E48\u5B83\u8D85\u8FC7\u4E868K\uFF0C\u6240\u4EE5\u5206\u914D\u7684\u5185\u5B58\u662F8 * 2 = 16K;\u518D\u4F8B\u5982\uFF0C
# \u539F\u59CB\u6587\u4EF6\u5927\u5C0F\u4E3A18K\uFF0C\u5F88\u660E\u663E16K\u4E5F\u662F\u4E0D\u591F\u7684\uFF0C\u90A3\u4E48\u6309\u7167 8 * 2 * 2 = 32K\u7684\u5927\u5C0F\u7533\u8BF7\u5185\u5B58\u3002
# \u5982\u679C\u6CA1\u6709\u8BBE\u7F6E\uFF0C\u9ED8\u8BA4\u503C\u662F\u7533\u8BF7\u8DDF\u539F\u59CB\u6570\u636E\u76F8\u540C\u5927\u5C0F\u7684\u5185\u5B58\u7A7A\u95F4\u53BB\u5B58\u50A8gzip\u538B\u7F29\u7ED3\u679C\u3002

# \u8BBE\u7F6E\u7CFB\u7EDF\u83B7\u53D6\u51E0\u4E2A\u5355\u4F4D\u7684\u7F13\u5B58\u7528\u4E8E\u5B58\u50A8gzip\u7684\u538B\u7F29\u7ED3\u679C\u6570\u636E\u6D41\u3002
# \u4F8B\u5982 4 4k \u4EE3\u8868\u4EE54k\u4E3A\u5355\u4F4D\uFF0C\u6309\u7167\u539F\u59CB\u6570\u636E\u5927\u5C0F\u4EE54k\u4E3A\u5355\u4F4D\u76844\u500D\u7533\u8BF7\u5185\u5B58\u3002
# 4 8k \u4EE3\u8868\u4EE58k\u4E3A\u5355\u4F4D\uFF0C\u6309\u7167\u539F\u59CB\u6570\u636E\u5927\u5C0F\u4EE58k\u4E3A\u5355\u4F4D\u76844\u500D\u7533\u8BF7\u5185\u5B58\u3002
# \u5982\u679C\u6CA1\u6709\u8BBE\u7F6E\uFF0C\u9ED8\u8BA4\u503C\u662F\u7533\u8BF7\u8DDF\u539F\u59CB\u6570\u636E\u76F8\u540C\u5927\u5C0F\u7684\u5185\u5B58\u7A7A\u95F4\u53BB\u5B58\u50A8gzip\u538B\u7F29\u7ED3\u679C\u3002
gzip_buffers 2 8k;

# nginx\u5BF9\u4E8E\u9759\u6001\u6587\u4EF6\u7684\u5904\u7406\u6A21\u5757\u3002
# \u8BE5\u6A21\u5757\u53EF\u4EE5\u8BFB\u53D6\u9884\u5148\u538B\u7F29\u7684gz\u6587\u4EF6\uFF0C\u8FD9\u6837\u53EF\u4EE5\u51CF\u5C11\u6BCF\u6B21\u8BF7\u6C42\u8FDB\u884Cgzip\u538B\u7F29\u7684CPU\u8D44\u6E90\u6D88\u8017\u3002
# \u8BE5\u6A21\u5757\u542F\u7528\u540E\uFF0Cnginx\u9996\u5148\u68C0\u67E5\u662F\u5426\u5B58\u5728\u8BF7\u6C42\u9759\u6001\u6587\u4EF6\u7684gz\u7ED3\u5C3E\u7684\u6587\u4EF6\uFF0C\u5982\u679C\u6709\u5219\u76F4\u63A5\u8FD4\u56DE\u8BE5gz\u6587\u4EF6\u5185\u5BB9\u3002
# \u4E3A\u4E86\u8981\u517C\u5BB9\u4E0D\u652F\u6301gzip\u7684\u6D4F\u89C8\u5668\uFF0C\u542F\u7528gzip_static\u6A21\u5757\u5C31\u5FC5\u987B\u540C\u65F6\u4FDD\u7559\u539F\u59CB\u9759\u6001\u6587\u4EF6\u548Cgz\u6587\u4EF6\u3002
# \u8FD9\u6837\u7684\u8BDD\uFF0C\u5728\u6709\u5927\u91CF\u9759\u6001\u6587\u4EF6\u7684\u60C5\u51B5\u4E0B\uFF0C\u5C06\u4F1A\u5927\u5927\u589E\u52A0\u78C1\u76D8\u7A7A\u95F4\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528nginx\u7684\u53CD\u5411\u4EE3\u7406\u529F\u80FD\u5B9E\u73B0\u53EA\u4FDD\u7559gz\u6587\u4EF6\u3002
gzip_static on|off

# \u542F\u7528gzip\u538B\u7F29\u7684\u6700\u5C0F\u6587\u4EF6\uFF0C\u5C0F\u4E8E\u8BBE\u7F6E\u503C\u7684\u6587\u4EF6\u5C06\u4E0D\u4F1A\u538B\u7F29
gzip_min_length 1k;

# gzip\u538B\u7F29\u57FA\u4E8E\u7684http\u534F\u8BAE\u7248\u672C\uFF0C\u9ED8\u8BA4\u5C31\u662FHTTP 1.1
gzip_http_version 1.1;

# gzip \u538B\u7F29\u7EA7\u522B\uFF0C1-10\uFF0C\u6570\u5B57\u8D8A\u5927\u538B\u7F29\u7684\u8D8A\u597D\uFF0C\u4E5F\u8D8A\u5360\u7528CPU\u65F6\u95F4\uFF0C\u540E\u9762\u4F1A\u6709\u8BE6\u7EC6\u8BF4\u660E
gzip_comp_level 2;

# \u9700\u8981\u8FDB\u884Cgzip\u538B\u7F29\u7684Content-Type\u7684Header\u7684\u7C7B\u578B\u3002\u5EFA\u8BAEjs\u3001text\u3001css\u3001xml\u3001json\u90FD\u8981\u8FDB\u884C\u538B\u7F29\uFF1B
# \u56FE\u7247\u5C31\u6CA1\u5FC5\u8981\u4E86\uFF0Cgif\u3001jpge\u6587\u4EF6\u5DF2\u7ECF\u538B\u7F29\u5F97\u5F88\u597D\u4E86\uFF0C\u5C31\u7B97\u518D\u538B\uFF0C\u6548\u679C\u4E5F\u4E0D\u597D\uFF0C\u800C\u4E14\u8FD8\u8017\u8D39cpu\u3002
# javascript\u6709\u591A\u79CD\u5F62\u5F0F\u3002\u5176\u4E2D\u7684\u503C\u53EF\u4EE5\u5728 mime.types \u6587\u4EF6\u4E2D\u627E\u5230\u3002
gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;

# \u9ED8\u8BA4\u503C\uFF1Aoff
# Nginx\u4F5C\u4E3A\u53CD\u5411\u4EE3\u7406\u7684\u65F6\u5019\u542F\u7528\uFF0C\u5F00\u542F\u6216\u8005\u5173\u95ED\u540E\u7AEF\u670D\u52A1\u5668\u8FD4\u56DE\u7684\u7ED3\u679C\uFF0C\u5339\u914D\u7684\u524D\u63D0\u662F\u540E\u7AEF\u670D\u52A1\u5668\u5FC5\u987B\u8981\u8FD4\u56DE\u5305\u542B"Via"\u7684 header\u5934\u3002
# off - \u5173\u95ED\u6240\u6709\u7684\u4EE3\u7406\u7ED3\u679C\u6570\u636E\u7684\u538B\u7F29
# expired - \u542F\u7528\u538B\u7F29\uFF0C\u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Expires" \u5934\u4FE1\u606F
# no-cache - \u542F\u7528\u538B\u7F29\uFF0C\u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Cache-Control:no-cache" \u5934\u4FE1\u606F
# no-store - \u542F\u7528\u538B\u7F29\uFF0C\u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Cache-Control:no-store" \u5934\u4FE1\u606F
# private - \u542F\u7528\u538B\u7F29\uFF0C\u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Cache-Control:private" \u5934\u4FE1\u606F
# no_last_modified - \u542F\u7528\u538B\u7F29,\u5982\u679Cheader\u5934\u4E2D\u4E0D\u5305\u542B "Last-Modified" \u5934\u4FE1\u606F
# no_etag - \u542F\u7528\u538B\u7F29 ,\u5982\u679Cheader\u5934\u4E2D\u4E0D\u5305\u542B "ETag" \u5934\u4FE1\u606F
# auth - \u542F\u7528\u538B\u7F29 , \u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Authorization" \u5934\u4FE1\u606F
# any - \u65E0\u6761\u4EF6\u542F\u7528\u538B\u7F29
gzip_proxied [off|expired|no-cache|no-store|private|no_last_modified|no_etag|auth|any] ...

# \u662F\u5426\u5728http header\u4E2D\u6DFB\u52A0Vary: Accept-Encoding\uFF0C\u5EFA\u8BAE\u5F00\u542F
# \u548Chttp\u5934\u6709\u5173\u7CFB\uFF0C\u52A0\u4E2Avary\u5934\uFF0C\u7ED9\u4EE3\u7406\u670D\u52A1\u5668\u7528\u7684\uFF0C\u6709\u7684\u6D4F\u89C8\u5668\u652F\u6301\u538B\u7F29\uFF0C
# \u6709\u7684\u4E0D\u652F\u6301\uFF0C\u6240\u4EE5\u907F\u514D\u6D6A\u8D39\u4E0D\u652F\u6301\u7684\u4E5F\u538B\u7F29\uFF0C\u6240\u4EE5\u6839\u636E\u5BA2\u6237\u7AEF\u7684HTTP\u5934\u6765\u5224\u65AD\uFF0C\u662F\u5426\u9700\u8981\u538B\u7F29
gzip_vary on;

# \u7981\u7528IE 6 gzip
gzip_disable "MSIE [1-6]\\.";
\`\`\`

## \u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u8FDB\u884C gzip \u538B\u7F29\u7684\u8BF7\u6C42\u548C\u5904\u7406\u8FC7\u7A0B

![](https://cdn.jsdelivr.net/gh/AnyFork/blog-images/main/markdown/202203141006242.png)

- \u6574\u4E2A\u8BF7\u6C42\u8FC7\u7A0B\u6765\u770B\uFF0C\u5F00\u542F gzip \u548C\u4E0D\u5F00\u542F gip \u529F\u80FD\uFF0C\u5176 http \u7684\u8BF7\u6C42\u548C\u8FD4\u56DE\u8FC7\u7A0B\u662F\u4E00\u81F4\u7684\uFF0C\u4E0D\u540C\u7684\u662F\u53C2\u6570\u3002
- \u5F53\u5F00\u542F HTTP \u7684 gzip \u529F\u80FD\u65F6\uFF0C\u5BA2\u6237\u7AEF\u53D1\u51FA http \u8BF7\u6C42\u65F6\uFF0C\u4F1A\u901A\u8FC7 headers \u4E2D\u7684 Accept-Encoding \u5C5E\u6027\u544A\u8BC9\u670D\u52A1\u5668\u201C\u6211\u652F\u6301 gzip \u89E3\u538B\uFF0C\u89E3\u538B\u683C\u5F0F\uFF08\u7B97\u6CD5\uFF09deflate,sdch \u4E3A\uFF1A\u201D\u3002Accept-Encoding:gzip,deflate,sdch\u3002
  \u6CE8\u610F\uFF0C\u4E0D\u662F request \u8BF4\u81EA\u5DF1\u652F\u6301\u89E3\u538B\uFF0CNginx \u8FD4\u56DE response \u6570\u636E\u7684\u65F6\u5019\u5C31\u4E00\u5B9A\u4F1A\u538B\u7F29\u3002\u8FD9\u8FD8\u8981\u770B\u672C\u6B21 Nginx \u8FD4\u56DE\u6570\u636E\u7684\u683C\u5F0F\u662F\u4EC0\u4E48\uFF0C\u5982\u679C\u8FD4\u56DE\u6570\u636E\u7684\u539F\u59CB\u6570\u636E\u683C\u5F0F\uFF0C\u548C\u8BBE\u7F6E\u7684 gzip_types \u76F8\u7B26\u5408\uFF0C\u8FD9\u65F6 Nginx \u624D\u4F1A\u8FDB\u884C\u538B\u7F29\u3002
- Nginx \u8FD4\u56DE response headers \u662F\uFF0C\u5982\u679C\u6570\u636E\u88AB\u538B\u7F29\u4E86\uFF0C\u5C31\u4F1A\u5728 Content-Encoding \u5C5E\u6027\u4E2D\u6807\u793A gzip\uFF0C\u8868\u793A\u63A5\u4E0B\u6765\u8FD4\u56DE\u7684 response
- content \u662F\u7ECF\u8FC7\u538B\u7F29\u7684\uFF1B\u5E76\u4E14\u5728 Content-Type \u5C5E\u6027\u4E2D\u8868\u793A\u6570\u636E\u7684\u539F\u59CB\u683C\u5F0F\u3002\u6700\u540E\u8FD4\u56DE\u7ECF\u8FC7\u538B\u7F29\u7684 response content \u7ED9\u5BA2\u6237\u7AEF\uFF0C\u5BA2\u6237\u7AEF\u518D\u8FDB\u884C\u89E3\u538B\u3002\u8FD9\u91CC\u6CE8\u610F\u4E00\u4E0B\uFF0C\u5728\u5BA2\u6237\u7AEF\u53D1\u9001\u7684 headers \u91CC\u9762\uFF0C\u6709\u4E00\u4E2A deflate,sdch\u3002\u8FD9\u662F\u4E24\u79CD\u538B\u7F29\u7B97\u6CD5\uFF0C\u5982\u679C\u8BFB\u8005\u611F\u5174\u8DA3\uFF0C\u53EF\u4EE5\u67E5\u67E5\u76F8\u5173\u7684\u8D44\u6599\uFF08\u6211\u5EFA\u8BAE\u67E5\u67E5\uFF0C\u4E86\u89E3\u54C8\u5F17\u66FC\u538B\u7F29\u7B97\u6CD5\u5BF9\u6269\u5C55\u81EA\u5DF1\u7684\u67B6\u6784\u601D\u8DEF\u5F88\u6709\u5E2E\u52A9\uFF09
`,contentRendered:`<p>\u2003Nginx Gzip \u538B\u7F29\u529F\u80FD\uFF0C \u53EF\u4EE5\u4F7F\u7F51\u7AD9\u7684 css\u3001js \u3001xml\u3001html \u7B49\u9759\u6001\u8D44\u6E90\u5728\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\uFF0C\u7ECF\u8FC7 Gzip \u538B\u7F29\u540E\u8D44\u6E90\u53EF\u4EE5\u53D8\u4E3A\u539F\u6765\u7684 30%\u751A\u81F3\u66F4\u5C0F\uFF0C\u5C3D\u7BA1\u8FD9\u6837\u4F1A\u6D88\u8017\u4E00\u5B9A\u7684 cpu \u8D44\u6E90\uFF0C\u4F46\u662F\u4F1A\u8282\u7EA6\u5927\u91CF\u7684\u51FA\u53E3\u5E26\u5BBD\u6765\u63D0\u9AD8\u8BBF\u95EE\u901F\u5EA6</p>
<!-- more -->
<h2 id="gzip-\u538B\u7F29" tabindex="-1"><a class="header-anchor" href="#gzip-\u538B\u7F29" aria-hidden="true">#</a> Gzip \u538B\u7F29</h2>
<p>\u2003Nginx \u5F00\u542F Gzip \u538B\u7F29\u529F\u80FD\uFF0C\u53EF\u4EE5\u4F7F\u7F51\u7AD9\u7684 css\u3001js \u3001xml\u3001html \u6587\u4EF6\u5728\u4F20\u8F93\u65F6\u8FDB\u884C\u538B\u7F29\uFF0C\u63D0\u9AD8\u7F51\u9875\u7684\u8BBF\u95EE\u901F\u5EA6,\u6709\u6548\u5730\u8282\u7EA6\u5E26\u5BBD,\u8FDB\u800C\u4F18\u5316 Nginx \u6027\u80FD! \u7ECF\u8FC7 Gzip \u538B\u7F29\u540E\u9875\u9762\u5927\u5C0F\u53EF\u4EE5\u53D8\u4E3A\u539F\u6765\u7684 30%\u751A\u81F3\u66F4\u5C0F\uFF0C\u8FD9\u6837\uFF0C\u7528\u6237\u6D4F\u89C8\u9875\u9762\u7684\u65F6\u5019\u901F\u5EA6\u4F1A\u5FEB\u5F97\u591A\u3002Gzip \u7684\u538B\u7F29\u9875\u9762\u9700\u8981\u6D4F\u89C8\u5668\u548C\u670D\u52A1\u5668\u53CC\u65B9\u90FD\u652F\u6301\uFF0C\u5B9E\u9645\u4E0A\u5C31\u662F\u670D\u52A1\u5668\u7AEF\u538B\u7F29\uFF0C\u4F20\u5230\u6D4F\u89C8\u5668\u540E\u6D4F\u89C8\u5668\u89E3\u538B\u5E76\u89E3\u6790\u3002\u6D4F\u89C8\u5668\u90A3\u91CC\u4E0D\u9700\u8981\u6211\u4EEC\u62C5\u5FC3\uFF0C\u56E0\u4E3A\u76EE\u524D\u7684\u5DE8\u5927\u591A\u6570\u6D4F\u89C8\u5668 \u90FD\u652F\u6301\u89E3\u6790 Gzip \u8FC7\u7684\u9875\u9762\u3002<br>
\u2003\u5F00\u542F Gzip \u529F\u80FD\u540E\uFF0CNginx \u670D\u52A1\u5668\u4F1A\u6839\u636E\u914D\u7F6E\u7684\u7B56\u7565\u5BF9\u53D1\u9001\u7684\u5185\u5BB9, \u5982 css\u3001js\u3001xml\u3001html \u7B49\u9759\u6001\u8D44\u6E90\u8FDB\u884C\u538B\u7F29, \u4F7F\u5F97\u8FD9\u4E9B\u5185\u5BB9\u5927\u5C0F\u51CF\u5C11\uFF0C\u5728\u7528\u6237\u63A5\u6536\u5230\u8FD4\u56DE\u5185\u5BB9\u4E4B\u524D\u5BF9\u5176\u8FDB\u884C\u5904\u7406\uFF0C\u4EE5\u538B\u7F29\u540E\u7684\u6570\u636E\u5C55\u73B0\u7ED9\u5BA2\u6237\u3002\u8FD9\u6837\u4E0D\u4EC5\u53EF\u4EE5\u8282\u7EA6\u5927\u91CF\u7684\u51FA\u53E3\u5E26\u5BBD\uFF0C\u63D0\u9AD8\u4F20\u8F93\u6548\u7387\uFF0C\u8FD8\u80FD\u63D0\u5347\u7528\u6237\u5FEB\u7684\u611F\u77E5\u4F53\u9A8C, \u4E00\u4E3E\u4E24\u5F97; \u5C3D\u7BA1\u4F1A\u6D88\u8017\u4E00\u5B9A\u7684 cpu \u8D44\u6E90\uFF0C\u4F46\u662F\u4E3A\u4E86\u7ED9\u7528\u6237\u66F4\u597D\u7684\u4F53\u9A8C\u8FD8\u662F\u503C\u5F97\u7684\u3002<br>
\u2003Web \u7F51\u7AD9\u4E0A\u7684\u56FE\u7247\uFF0C\u89C6\u9891\u7B49\u5176\u5B83\u591A\u5A92\u4F53\u6587\u4EF6\u4EE5\u53CA\u5927\u6587\u4EF6\uFF0C\u56E0\u4E3A\u538B\u7F29\u524D\u540E\u6587\u4EF6\u5927\u5C0F\u538B\u7F29\u5DEE\u5F02\u4E0D\u5927\uFF0C\u538B\u7F29\u6548\u679C\u4E0D\u597D\uFF0C\u53CD\u800C\u4F1A\u589E\u52A0 cup \u7684\u6D88\u8017\uFF0C\u6240\u4EE5\u5BF9\u4E8E\u56FE\u7247\u6216\u5927\u6587\u4EF6\u6CA1\u6709\u5FC5\u8981\u8FDB\u884C\u538B\u7F29\u3002\u5982\u679C\u60F3\u8981\u4F18\u5316\uFF0C\u53EF\u4EE5\u91C7\u7528\u5BA2\u6237\u7AEF\u7F13\u5B58\u7684\u65B9\u6CD5\u8FDB\u884C\u6027\u80FD\u4F18\u5316\u3002Gzip \u538B\u7F29\u53EF\u4EE5\u914D\u7F6E http,server \u548C location \u6A21\u5757\u4E0B\u3002<br>
\u2003\u5BF9\u4E8E\u5B57\u4F53\u7684\u5904\u7406,\u53EA\u9700\u8981\u4E3A ttf\u3001otf \u548C svg \u5B57\u4F53\u542F\u7528 gzip\uFF0C\u5BF9\u5176\u4ED6\u5B57\u4F53\u683C\u5F0F\u8FDB\u884C gzip \u538B\u7F29\u65F6\u6548\u679C\u4E0D\u660E\u663E\u3002<code v-pre>gzip_types font/ttf font/otf image/svg+xml </code></p>
<h2 id="nginx-\u5F00\u542F-gzip-\u538B\u7F29\u53C2\u6570\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#nginx-\u5F00\u542F-gzip-\u538B\u7F29\u53C2\u6570\u8BF4\u660E" aria-hidden="true">#</a> Nginx \u5F00\u542F Gzip \u538B\u7F29\u53C2\u6570\u8BF4\u660E</h2>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u5F00\u542Fgzip\u538B\u7F29\u670D\u52A1</span>
<span class="token function">gzip</span> on<span class="token punctuation">;</span>

<span class="token comment"># gzip\u538B\u7F29\u662F\u8981\u7533\u8BF7\u4E34\u65F6\u5185\u5B58\u7A7A\u95F4\u7684\uFF0C\u5047\u8BBE\u524D\u63D0\u662F\u538B\u7F29\u540E\u5927\u5C0F\u662F\u5C0F\u4E8E\u7B49\u4E8E\u538B\u7F29\u524D\u7684\u3002</span>
<span class="token comment"># \u4F8B\u5982\uFF0C\u5982\u679C\u539F\u59CB\u6587\u4EF6\u5927\u5C0F\u4E3A10K\uFF0C\u90A3\u4E48\u5B83\u8D85\u8FC7\u4E868K\uFF0C\u6240\u4EE5\u5206\u914D\u7684\u5185\u5B58\u662F8 * 2 = 16K;\u518D\u4F8B\u5982\uFF0C</span>
<span class="token comment"># \u539F\u59CB\u6587\u4EF6\u5927\u5C0F\u4E3A18K\uFF0C\u5F88\u660E\u663E16K\u4E5F\u662F\u4E0D\u591F\u7684\uFF0C\u90A3\u4E48\u6309\u7167 8 * 2 * 2 = 32K\u7684\u5927\u5C0F\u7533\u8BF7\u5185\u5B58\u3002</span>
<span class="token comment"># \u5982\u679C\u6CA1\u6709\u8BBE\u7F6E\uFF0C\u9ED8\u8BA4\u503C\u662F\u7533\u8BF7\u8DDF\u539F\u59CB\u6570\u636E\u76F8\u540C\u5927\u5C0F\u7684\u5185\u5B58\u7A7A\u95F4\u53BB\u5B58\u50A8gzip\u538B\u7F29\u7ED3\u679C\u3002</span>

<span class="token comment"># \u8BBE\u7F6E\u7CFB\u7EDF\u83B7\u53D6\u51E0\u4E2A\u5355\u4F4D\u7684\u7F13\u5B58\u7528\u4E8E\u5B58\u50A8gzip\u7684\u538B\u7F29\u7ED3\u679C\u6570\u636E\u6D41\u3002</span>
<span class="token comment"># \u4F8B\u5982 4 4k \u4EE3\u8868\u4EE54k\u4E3A\u5355\u4F4D\uFF0C\u6309\u7167\u539F\u59CB\u6570\u636E\u5927\u5C0F\u4EE54k\u4E3A\u5355\u4F4D\u76844\u500D\u7533\u8BF7\u5185\u5B58\u3002</span>
<span class="token comment"># 4 8k \u4EE3\u8868\u4EE58k\u4E3A\u5355\u4F4D\uFF0C\u6309\u7167\u539F\u59CB\u6570\u636E\u5927\u5C0F\u4EE58k\u4E3A\u5355\u4F4D\u76844\u500D\u7533\u8BF7\u5185\u5B58\u3002</span>
<span class="token comment"># \u5982\u679C\u6CA1\u6709\u8BBE\u7F6E\uFF0C\u9ED8\u8BA4\u503C\u662F\u7533\u8BF7\u8DDF\u539F\u59CB\u6570\u636E\u76F8\u540C\u5927\u5C0F\u7684\u5185\u5B58\u7A7A\u95F4\u53BB\u5B58\u50A8gzip\u538B\u7F29\u7ED3\u679C\u3002</span>
gzip_buffers <span class="token number">2</span> 8k<span class="token punctuation">;</span>

<span class="token comment"># nginx\u5BF9\u4E8E\u9759\u6001\u6587\u4EF6\u7684\u5904\u7406\u6A21\u5757\u3002</span>
<span class="token comment"># \u8BE5\u6A21\u5757\u53EF\u4EE5\u8BFB\u53D6\u9884\u5148\u538B\u7F29\u7684gz\u6587\u4EF6\uFF0C\u8FD9\u6837\u53EF\u4EE5\u51CF\u5C11\u6BCF\u6B21\u8BF7\u6C42\u8FDB\u884Cgzip\u538B\u7F29\u7684CPU\u8D44\u6E90\u6D88\u8017\u3002</span>
<span class="token comment"># \u8BE5\u6A21\u5757\u542F\u7528\u540E\uFF0Cnginx\u9996\u5148\u68C0\u67E5\u662F\u5426\u5B58\u5728\u8BF7\u6C42\u9759\u6001\u6587\u4EF6\u7684gz\u7ED3\u5C3E\u7684\u6587\u4EF6\uFF0C\u5982\u679C\u6709\u5219\u76F4\u63A5\u8FD4\u56DE\u8BE5gz\u6587\u4EF6\u5185\u5BB9\u3002</span>
<span class="token comment"># \u4E3A\u4E86\u8981\u517C\u5BB9\u4E0D\u652F\u6301gzip\u7684\u6D4F\u89C8\u5668\uFF0C\u542F\u7528gzip_static\u6A21\u5757\u5C31\u5FC5\u987B\u540C\u65F6\u4FDD\u7559\u539F\u59CB\u9759\u6001\u6587\u4EF6\u548Cgz\u6587\u4EF6\u3002</span>
<span class="token comment"># \u8FD9\u6837\u7684\u8BDD\uFF0C\u5728\u6709\u5927\u91CF\u9759\u6001\u6587\u4EF6\u7684\u60C5\u51B5\u4E0B\uFF0C\u5C06\u4F1A\u5927\u5927\u589E\u52A0\u78C1\u76D8\u7A7A\u95F4\u3002\u6211\u4EEC\u53EF\u4EE5\u5229\u7528nginx\u7684\u53CD\u5411\u4EE3\u7406\u529F\u80FD\u5B9E\u73B0\u53EA\u4FDD\u7559gz\u6587\u4EF6\u3002</span>
gzip_static on<span class="token operator">|</span>off

<span class="token comment"># \u542F\u7528gzip\u538B\u7F29\u7684\u6700\u5C0F\u6587\u4EF6\uFF0C\u5C0F\u4E8E\u8BBE\u7F6E\u503C\u7684\u6587\u4EF6\u5C06\u4E0D\u4F1A\u538B\u7F29</span>
gzip_min_length 1k<span class="token punctuation">;</span>

<span class="token comment"># gzip\u538B\u7F29\u57FA\u4E8E\u7684http\u534F\u8BAE\u7248\u672C\uFF0C\u9ED8\u8BA4\u5C31\u662FHTTP 1.1</span>
gzip_http_version <span class="token number">1.1</span><span class="token punctuation">;</span>

<span class="token comment"># gzip \u538B\u7F29\u7EA7\u522B\uFF0C1-10\uFF0C\u6570\u5B57\u8D8A\u5927\u538B\u7F29\u7684\u8D8A\u597D\uFF0C\u4E5F\u8D8A\u5360\u7528CPU\u65F6\u95F4\uFF0C\u540E\u9762\u4F1A\u6709\u8BE6\u7EC6\u8BF4\u660E</span>
gzip_comp_level <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment"># \u9700\u8981\u8FDB\u884Cgzip\u538B\u7F29\u7684Content-Type\u7684Header\u7684\u7C7B\u578B\u3002\u5EFA\u8BAEjs\u3001text\u3001css\u3001xml\u3001json\u90FD\u8981\u8FDB\u884C\u538B\u7F29\uFF1B</span>
<span class="token comment"># \u56FE\u7247\u5C31\u6CA1\u5FC5\u8981\u4E86\uFF0Cgif\u3001jpge\u6587\u4EF6\u5DF2\u7ECF\u538B\u7F29\u5F97\u5F88\u597D\u4E86\uFF0C\u5C31\u7B97\u518D\u538B\uFF0C\u6548\u679C\u4E5F\u4E0D\u597D\uFF0C\u800C\u4E14\u8FD8\u8017\u8D39cpu\u3002</span>
<span class="token comment"># javascript\u6709\u591A\u79CD\u5F62\u5F0F\u3002\u5176\u4E2D\u7684\u503C\u53EF\u4EE5\u5728 mime.types \u6587\u4EF6\u4E2D\u627E\u5230\u3002</span>
gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png<span class="token punctuation">;</span>

<span class="token comment"># \u9ED8\u8BA4\u503C\uFF1Aoff</span>
<span class="token comment"># Nginx\u4F5C\u4E3A\u53CD\u5411\u4EE3\u7406\u7684\u65F6\u5019\u542F\u7528\uFF0C\u5F00\u542F\u6216\u8005\u5173\u95ED\u540E\u7AEF\u670D\u52A1\u5668\u8FD4\u56DE\u7684\u7ED3\u679C\uFF0C\u5339\u914D\u7684\u524D\u63D0\u662F\u540E\u7AEF\u670D\u52A1\u5668\u5FC5\u987B\u8981\u8FD4\u56DE\u5305\u542B"Via"\u7684 header\u5934\u3002</span>
<span class="token comment"># off - \u5173\u95ED\u6240\u6709\u7684\u4EE3\u7406\u7ED3\u679C\u6570\u636E\u7684\u538B\u7F29</span>
<span class="token comment"># expired - \u542F\u7528\u538B\u7F29\uFF0C\u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Expires" \u5934\u4FE1\u606F</span>
<span class="token comment"># no-cache - \u542F\u7528\u538B\u7F29\uFF0C\u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Cache-Control:no-cache" \u5934\u4FE1\u606F</span>
<span class="token comment"># no-store - \u542F\u7528\u538B\u7F29\uFF0C\u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Cache-Control:no-store" \u5934\u4FE1\u606F</span>
<span class="token comment"># private - \u542F\u7528\u538B\u7F29\uFF0C\u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Cache-Control:private" \u5934\u4FE1\u606F</span>
<span class="token comment"># no_last_modified - \u542F\u7528\u538B\u7F29,\u5982\u679Cheader\u5934\u4E2D\u4E0D\u5305\u542B "Last-Modified" \u5934\u4FE1\u606F</span>
<span class="token comment"># no_etag - \u542F\u7528\u538B\u7F29 ,\u5982\u679Cheader\u5934\u4E2D\u4E0D\u5305\u542B "ETag" \u5934\u4FE1\u606F</span>
<span class="token comment"># auth - \u542F\u7528\u538B\u7F29 , \u5982\u679Cheader\u5934\u4E2D\u5305\u542B "Authorization" \u5934\u4FE1\u606F</span>
<span class="token comment"># any - \u65E0\u6761\u4EF6\u542F\u7528\u538B\u7F29</span>
gzip_proxied <span class="token punctuation">[</span>off<span class="token operator">|</span>expired<span class="token operator">|</span>no-cache<span class="token operator">|</span>no-store<span class="token operator">|</span>private<span class="token operator">|</span>no_last_modified<span class="token operator">|</span>no_etag<span class="token operator">|</span>auth<span class="token operator">|</span>any<span class="token punctuation">]</span> <span class="token punctuation">..</span>.

<span class="token comment"># \u662F\u5426\u5728http header\u4E2D\u6DFB\u52A0Vary: Accept-Encoding\uFF0C\u5EFA\u8BAE\u5F00\u542F</span>
<span class="token comment"># \u548Chttp\u5934\u6709\u5173\u7CFB\uFF0C\u52A0\u4E2Avary\u5934\uFF0C\u7ED9\u4EE3\u7406\u670D\u52A1\u5668\u7528\u7684\uFF0C\u6709\u7684\u6D4F\u89C8\u5668\u652F\u6301\u538B\u7F29\uFF0C</span>
<span class="token comment"># \u6709\u7684\u4E0D\u652F\u6301\uFF0C\u6240\u4EE5\u907F\u514D\u6D6A\u8D39\u4E0D\u652F\u6301\u7684\u4E5F\u538B\u7F29\uFF0C\u6240\u4EE5\u6839\u636E\u5BA2\u6237\u7AEF\u7684HTTP\u5934\u6765\u5224\u65AD\uFF0C\u662F\u5426\u9700\u8981\u538B\u7F29</span>
gzip_vary on<span class="token punctuation">;</span>

<span class="token comment"># \u7981\u7528IE 6 gzip</span>
gzip_disable <span class="token string">"MSIE [1-6]\\."</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u8FDB\u884C-gzip-\u538B\u7F29\u7684\u8BF7\u6C42\u548C\u5904\u7406\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u8FDB\u884C-gzip-\u538B\u7F29\u7684\u8BF7\u6C42\u548C\u5904\u7406\u8FC7\u7A0B" aria-hidden="true">#</a> \u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u8FDB\u884C gzip \u538B\u7F29\u7684\u8BF7\u6C42\u548C\u5904\u7406\u8FC7\u7A0B</h2>
<p><img src="https://cdn.jsdelivr.net/gh/AnyFork/blog-images/main/markdown/202203141006242.png" alt=""></p>
<ul>
<li>\u6574\u4E2A\u8BF7\u6C42\u8FC7\u7A0B\u6765\u770B\uFF0C\u5F00\u542F gzip \u548C\u4E0D\u5F00\u542F gip \u529F\u80FD\uFF0C\u5176 http \u7684\u8BF7\u6C42\u548C\u8FD4\u56DE\u8FC7\u7A0B\u662F\u4E00\u81F4\u7684\uFF0C\u4E0D\u540C\u7684\u662F\u53C2\u6570\u3002</li>
<li>\u5F53\u5F00\u542F HTTP \u7684 gzip \u529F\u80FD\u65F6\uFF0C\u5BA2\u6237\u7AEF\u53D1\u51FA http \u8BF7\u6C42\u65F6\uFF0C\u4F1A\u901A\u8FC7 headers \u4E2D\u7684 Accept-Encoding \u5C5E\u6027\u544A\u8BC9\u670D\u52A1\u5668\u201C\u6211\u652F\u6301 gzip \u89E3\u538B\uFF0C\u89E3\u538B\u683C\u5F0F\uFF08\u7B97\u6CD5\uFF09deflate,sdch \u4E3A\uFF1A\u201D\u3002Accept-Encoding:gzip,deflate,sdch\u3002
\u6CE8\u610F\uFF0C\u4E0D\u662F request \u8BF4\u81EA\u5DF1\u652F\u6301\u89E3\u538B\uFF0CNginx \u8FD4\u56DE response \u6570\u636E\u7684\u65F6\u5019\u5C31\u4E00\u5B9A\u4F1A\u538B\u7F29\u3002\u8FD9\u8FD8\u8981\u770B\u672C\u6B21 Nginx \u8FD4\u56DE\u6570\u636E\u7684\u683C\u5F0F\u662F\u4EC0\u4E48\uFF0C\u5982\u679C\u8FD4\u56DE\u6570\u636E\u7684\u539F\u59CB\u6570\u636E\u683C\u5F0F\uFF0C\u548C\u8BBE\u7F6E\u7684 gzip_types \u76F8\u7B26\u5408\uFF0C\u8FD9\u65F6 Nginx \u624D\u4F1A\u8FDB\u884C\u538B\u7F29\u3002</li>
<li>Nginx \u8FD4\u56DE response headers \u662F\uFF0C\u5982\u679C\u6570\u636E\u88AB\u538B\u7F29\u4E86\uFF0C\u5C31\u4F1A\u5728 Content-Encoding \u5C5E\u6027\u4E2D\u6807\u793A gzip\uFF0C\u8868\u793A\u63A5\u4E0B\u6765\u8FD4\u56DE\u7684 response</li>
<li>content \u662F\u7ECF\u8FC7\u538B\u7F29\u7684\uFF1B\u5E76\u4E14\u5728 Content-Type \u5C5E\u6027\u4E2D\u8868\u793A\u6570\u636E\u7684\u539F\u59CB\u683C\u5F0F\u3002\u6700\u540E\u8FD4\u56DE\u7ECF\u8FC7\u538B\u7F29\u7684 response content \u7ED9\u5BA2\u6237\u7AEF\uFF0C\u5BA2\u6237\u7AEF\u518D\u8FDB\u884C\u89E3\u538B\u3002\u8FD9\u91CC\u6CE8\u610F\u4E00\u4E0B\uFF0C\u5728\u5BA2\u6237\u7AEF\u53D1\u9001\u7684 headers \u91CC\u9762\uFF0C\u6709\u4E00\u4E2A deflate,sdch\u3002\u8FD9\u662F\u4E24\u79CD\u538B\u7F29\u7B97\u6CD5\uFF0C\u5982\u679C\u8BFB\u8005\u611F\u5174\u8DA3\uFF0C\u53EF\u4EE5\u67E5\u67E5\u76F8\u5173\u7684\u8D44\u6599\uFF08\u6211\u5EFA\u8BAE\u67E5\u67E5\uFF0C\u4E86\u89E3\u54C8\u5F17\u66FC\u538B\u7F29\u7B97\u6CD5\u5BF9\u6269\u5C55\u81EA\u5DF1\u7684\u67B6\u6784\u601D\u8DEF\u5F88\u6709\u5E2E\u52A9\uFF09</li>
</ul>
`,date:"2022-03-14",deps:[],links:[],pathInferred:"/posts/devops/nginx/gzip.html",pathLocale:"/",permalink:null,routeMeta:{title:"Nginx Gzip\u8D44\u6E90\u538B\u7F29"},sfcBlocks:[],slug:"gzip",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/nginx/gzip.md",filePathRelative:"posts/devops/nginx/gzip.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/gzip.html.vue",componentFilePathRelative:"pages/posts/devops/nginx/gzip.html.vue",componentFileChunkName:"v-2b29052d",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/gzip.html.js",dataFilePathRelative:"pages/posts/devops/nginx/gzip.html.js",dataFileChunkName:"v-2b29052d",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/nginx/gzip.html",htmlFilePathRelative:"posts/devops/nginx/gzip.html"},title:"Nginx Gzip\u8D44\u6E90\u538B\u7F29"},["/posts/devops/nginx/gzip","/posts/devops/nginx/gzip.md"]],["v-00fac020","/posts/devops/nginx/install.html",{_blog:{data:{key:"v-00fac020",path:"/posts/devops/nginx/install.html",title:"Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4",lang:"zh-CN",frontmatter:{title:"Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4",date:"2022-02-18T18:51:45.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201025944.jpg",summary:`\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0Cnginx \u4F7F\u7528\u975E\u5E38\u9891\u7E41\u3002\u4ECA\u65E5\u62BD\u7A7A\uFF0C\u987A\u4FBF\u6574\u7406\u4E00\u4E0B linux \u73AF\u5883\u4E0B nginx \u5E38\u7528\u7684 3 \u79CD\u5B89\u88C5\u65B9\u5F0F(yum,\u6E90\u7801\u7F16\u8BD1\uFF0Cdocker)\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\uFF0C\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u9519\u8BEF\u3002docker \u65B9\u5F0F\u6BD4\u8F83\u7B80\u5355\uFF0C\u4F46\u4E00\u5B9A\u8981\u6CE8\u610F\u6587\u4EF6\u76EE\u5F55\u6302\u8F7D\u914D\u7F6E\uFF0C\u914D\u7F6E\u4E0D\u6B63\u786E\uFF0C\u5373\u4F7F\u5BB9\u5668\u542F\u52A8\u8D77\u6765\uFF0Cnginx \u4E5F\u65E0\u6CD5\u8FD0\u884C\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/install.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-02-18T18:51:45.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0Cnginx \u4F7F\u7528\u975E\u5E38\u9891\u7E41\u3002\u4ECA\u65E5\u62BD\u7A7A\uFF0C\u987A\u4FBF\u6574\u7406\u4E00\u4E0B linux \u73AF\u5883\u4E0B nginx \u5E38\u7528\u7684 3 \u79CD\u5B89\u88C5\u65B9\u5F0F(yum,\u6E90\u7801\u7F16\u8BD1\uFF0Cdocker)\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\uFF0C\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u9519\u8BEF\u3002docker \u65B9\u5F0F\u6BD4\u8F83\u7B80\u5355\uFF0C\u4F46\u4E00\u5B9A\u8981\u6CE8\u610F\u6587\u4EF6\u76EE\u5F55\u6302\u8F7D\u914D\u7F6E\uFF0C\u914D\u7F6E\u4E0D\u6B63\u786E\uFF0C\u5373\u4F7F\u5BB9\u5668\u542F\u52A8\u8D77\u6765\uFF0Cnginx \u4E5F\u65E0\u6CD5\u8FD0\u884C\u3002</p>
`,headers:[{level:2,title:"\u4E00 yum \u5B89\u88C5 nginx",slug:"\u4E00-yum-\u5B89\u88C5-nginx",children:[{level:3,title:"1 \u66F4\u65B0 yum",slug:"_1-\u66F4\u65B0-yum",children:[]},{level:3,title:"2 \u5B89\u88C5 nginx \u6E90",slug:"_2-\u5B89\u88C5-nginx-\u6E90",children:[]},{level:3,title:"3 \u5B89\u88C5 nginx",slug:"_3-\u5B89\u88C5-nginx",children:[]},{level:3,title:"4 \u5F00\u653E 80 \u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899",slug:"_4-\u5F00\u653E-80-\u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899",children:[]},{level:3,title:"5 \u542F\u52A8 nginx",slug:"_5-\u542F\u52A8-nginx",children:[]},{level:3,title:"6 \u5F00\u673A\u81EA\u542F\u52A8",slug:"_6-\u5F00\u673A\u81EA\u542F\u52A8",children:[]},{level:3,title:"7 \u67E5\u770B nginx \u7248\u672C\u548C\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F",slug:"_7-\u67E5\u770B-nginx-\u7248\u672C\u548C\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F",children:[]}]},{level:2,title:"\u4E8C \u6E90\u7801\u7F16\u8BD1\u5B89\u88C5",slug:"\u4E8C-\u6E90\u7801\u7F16\u8BD1\u5B89\u88C5",children:[{level:3,title:"1\u3001\u4E0B\u8F7D Nginx",slug:"_1\u3001\u4E0B\u8F7D-nginx",children:[]},{level:3,title:"2\u3001\u89E3\u538B",slug:"_2\u3001\u89E3\u538B",children:[]},{level:3,title:"3\u3001\u8BD1\u73AF\u5883\u5B89\u88C5",slug:"_3\u3001\u8BD1\u73AF\u5883\u5B89\u88C5",children:[]},{level:3,title:"4\u3001\u9884\u7F16\u8BD1",slug:"_4\u3001\u9884\u7F16\u8BD1",children:[]},{level:3,title:"5\u3001\u7F16\u8BD1",slug:"_5\u3001\u7F16\u8BD1",children:[]},{level:3,title:"6\u3001\u5B89\u88C5",slug:"_6\u3001\u5B89\u88C5",children:[]},{level:3,title:"7\u3001\u521B\u5EFA linux \u5168\u5C40\u8F6F\u8FDE\u63A5",slug:"_7\u3001\u521B\u5EFA-linux-\u5168\u5C40\u8F6F\u8FDE\u63A5",children:[]},{level:3,title:"8\u3001nginx \u547D\u4EE4",slug:"_8\u3001nginx-\u547D\u4EE4",children:[]}]},{level:2,title:"\u4E09 Docker \u5B89\u88C5",slug:"\u4E09-docker-\u5B89\u88C5",children:[{level:3,title:"1\u3001\u62C9\u53D6 nginx \u955C\u50CF",slug:"_1\u3001\u62C9\u53D6-nginx-\u955C\u50CF",children:[]},{level:3,title:"2\u3001\u542F\u52A8 nginx \u5BB9\u5668",slug:"_2\u3001\u542F\u52A8-nginx-\u5BB9\u5668",children:[]},{level:3,title:"3\u3001\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55",slug:"_3\u3001\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55",children:[]},{level:3,title:"4\u3001\u590D\u5236\u5BB9\u5668\u4E2D\u6302\u8F7D\u6587\u4EF6",slug:"_4\u3001\u590D\u5236\u5BB9\u5668\u4E2D\u6302\u8F7D\u6587\u4EF6",children:[]},{level:3,title:"5\u3001\u5220\u9664\u65E7\u7684 nginx \u5BB9\u5668",slug:"_5\u3001\u5220\u9664\u65E7\u7684-nginx-\u5BB9\u5668",children:[]},{level:3,title:"6\u3001\u521B\u5EFA nginx \u6302\u8F7D\u76EE\u5F55\u5BB9\u5668",slug:"_6\u3001\u521B\u5EFA-nginx-\u6302\u8F7D\u76EE\u5F55\u5BB9\u5668",children:[]},{level:3,title:"7\u3001\u67E5\u770B nginx \u5BB9\u5668\u8FD0\u884C\u60C5\u51B5",slug:"_7\u3001\u67E5\u770B-nginx-\u5BB9\u5668\u8FD0\u884C\u60C5\u51B5",children:[]}]},{level:2,title:"\u56DB nginx \u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757",slug:"\u56DB-nginx-\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/nginx/install.md",readingTime:{minutes:8.48,words:2544},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/nginx/install.html`},key:"v-00fac020",path:"/posts/devops/nginx/install.html",title:"Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4",lang:"zh-CN",frontmatter:{title:"Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4",date:"2022-02-18T18:51:45.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201025944.jpg",summary:`\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0Cnginx \u4F7F\u7528\u975E\u5E38\u9891\u7E41\u3002\u4ECA\u65E5\u62BD\u7A7A\uFF0C\u987A\u4FBF\u6574\u7406\u4E00\u4E0B linux \u73AF\u5883\u4E0B nginx \u5E38\u7528\u7684 3 \u79CD\u5B89\u88C5\u65B9\u5F0F(yum,\u6E90\u7801\u7F16\u8BD1\uFF0Cdocker)\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\uFF0C\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u9519\u8BEF\u3002docker \u65B9\u5F0F\u6BD4\u8F83\u7B80\u5355\uFF0C\u4F46\u4E00\u5B9A\u8981\u6CE8\u610F\u6587\u4EF6\u76EE\u5F55\u6302\u8F7D\u914D\u7F6E\uFF0C\u914D\u7F6E\u4E0D\u6B63\u786E\uFF0C\u5373\u4F7F\u5BB9\u5668\u542F\u52A8\u8D77\u6765\uFF0Cnginx \u4E5F\u65E0\u6CD5\u8FD0\u884C\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/install.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-02-18T18:51:45.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0Cnginx \u4F7F\u7528\u975E\u5E38\u9891\u7E41\u3002\u4ECA\u65E5\u62BD\u7A7A\uFF0C\u987A\u4FBF\u6574\u7406\u4E00\u4E0B linux \u73AF\u5883\u4E0B nginx \u5E38\u7528\u7684 3 \u79CD\u5B89\u88C5\u65B9\u5F0F(yum,\u6E90\u7801\u7F16\u8BD1\uFF0Cdocker)\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\uFF0C\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u9519\u8BEF\u3002docker \u65B9\u5F0F\u6BD4\u8F83\u7B80\u5355\uFF0C\u4F46\u4E00\u5B9A\u8981\u6CE8\u610F\u6587\u4EF6\u76EE\u5F55\u6302\u8F7D\u914D\u7F6E\uFF0C\u914D\u7F6E\u4E0D\u6B63\u786E\uFF0C\u5373\u4F7F\u5BB9\u5668\u542F\u52A8\u8D77\u6765\uFF0Cnginx \u4E5F\u65E0\u6CD5\u8FD0\u884C\u3002</p>
`,headers:[{level:2,title:"\u4E00 yum \u5B89\u88C5 nginx",slug:"\u4E00-yum-\u5B89\u88C5-nginx",children:[{level:3,title:"1 \u66F4\u65B0 yum",slug:"_1-\u66F4\u65B0-yum",children:[]},{level:3,title:"2 \u5B89\u88C5 nginx \u6E90",slug:"_2-\u5B89\u88C5-nginx-\u6E90",children:[]},{level:3,title:"3 \u5B89\u88C5 nginx",slug:"_3-\u5B89\u88C5-nginx",children:[]},{level:3,title:"4 \u5F00\u653E 80 \u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899",slug:"_4-\u5F00\u653E-80-\u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899",children:[]},{level:3,title:"5 \u542F\u52A8 nginx",slug:"_5-\u542F\u52A8-nginx",children:[]},{level:3,title:"6 \u5F00\u673A\u81EA\u542F\u52A8",slug:"_6-\u5F00\u673A\u81EA\u542F\u52A8",children:[]},{level:3,title:"7 \u67E5\u770B nginx \u7248\u672C\u548C\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F",slug:"_7-\u67E5\u770B-nginx-\u7248\u672C\u548C\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F",children:[]}]},{level:2,title:"\u4E8C \u6E90\u7801\u7F16\u8BD1\u5B89\u88C5",slug:"\u4E8C-\u6E90\u7801\u7F16\u8BD1\u5B89\u88C5",children:[{level:3,title:"1\u3001\u4E0B\u8F7D Nginx",slug:"_1\u3001\u4E0B\u8F7D-nginx",children:[]},{level:3,title:"2\u3001\u89E3\u538B",slug:"_2\u3001\u89E3\u538B",children:[]},{level:3,title:"3\u3001\u8BD1\u73AF\u5883\u5B89\u88C5",slug:"_3\u3001\u8BD1\u73AF\u5883\u5B89\u88C5",children:[]},{level:3,title:"4\u3001\u9884\u7F16\u8BD1",slug:"_4\u3001\u9884\u7F16\u8BD1",children:[]},{level:3,title:"5\u3001\u7F16\u8BD1",slug:"_5\u3001\u7F16\u8BD1",children:[]},{level:3,title:"6\u3001\u5B89\u88C5",slug:"_6\u3001\u5B89\u88C5",children:[]},{level:3,title:"7\u3001\u521B\u5EFA linux \u5168\u5C40\u8F6F\u8FDE\u63A5",slug:"_7\u3001\u521B\u5EFA-linux-\u5168\u5C40\u8F6F\u8FDE\u63A5",children:[]},{level:3,title:"8\u3001nginx \u547D\u4EE4",slug:"_8\u3001nginx-\u547D\u4EE4",children:[]}]},{level:2,title:"\u4E09 Docker \u5B89\u88C5",slug:"\u4E09-docker-\u5B89\u88C5",children:[{level:3,title:"1\u3001\u62C9\u53D6 nginx \u955C\u50CF",slug:"_1\u3001\u62C9\u53D6-nginx-\u955C\u50CF",children:[]},{level:3,title:"2\u3001\u542F\u52A8 nginx \u5BB9\u5668",slug:"_2\u3001\u542F\u52A8-nginx-\u5BB9\u5668",children:[]},{level:3,title:"3\u3001\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55",slug:"_3\u3001\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55",children:[]},{level:3,title:"4\u3001\u590D\u5236\u5BB9\u5668\u4E2D\u6302\u8F7D\u6587\u4EF6",slug:"_4\u3001\u590D\u5236\u5BB9\u5668\u4E2D\u6302\u8F7D\u6587\u4EF6",children:[]},{level:3,title:"5\u3001\u5220\u9664\u65E7\u7684 nginx \u5BB9\u5668",slug:"_5\u3001\u5220\u9664\u65E7\u7684-nginx-\u5BB9\u5668",children:[]},{level:3,title:"6\u3001\u521B\u5EFA nginx \u6302\u8F7D\u76EE\u5F55\u5BB9\u5668",slug:"_6\u3001\u521B\u5EFA-nginx-\u6302\u8F7D\u76EE\u5F55\u5BB9\u5668",children:[]},{level:3,title:"7\u3001\u67E5\u770B nginx \u5BB9\u5668\u8FD0\u884C\u60C5\u51B5",slug:"_7\u3001\u67E5\u770B-nginx-\u5BB9\u5668\u8FD0\u884C\u60C5\u51B5",children:[]}]},{level:2,title:"\u56DB nginx \u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757",slug:"\u56DB-nginx-\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757",children:[]}],content:`---
title: Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4
date: 2022-02-18 18:51:45
tag:
  - nginx
category:
  - nginx
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201025944.jpg
---

&emsp;\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0Cnginx \u4F7F\u7528\u975E\u5E38\u9891\u7E41\u3002\u4ECA\u65E5\u62BD\u7A7A\uFF0C\u987A\u4FBF\u6574\u7406\u4E00\u4E0B linux \u73AF\u5883\u4E0B nginx \u5E38\u7528\u7684 3 \u79CD\u5B89\u88C5\u65B9\u5F0F(yum,\u6E90\u7801\u7F16\u8BD1\uFF0Cdocker)\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\uFF0C\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u9519\u8BEF\u3002docker \u65B9\u5F0F\u6BD4\u8F83\u7B80\u5355\uFF0C\u4F46\u4E00\u5B9A\u8981\u6CE8\u610F\u6587\u4EF6\u76EE\u5F55\u6302\u8F7D\u914D\u7F6E\uFF0C\u914D\u7F6E\u4E0D\u6B63\u786E\uFF0C\u5373\u4F7F\u5BB9\u5668\u542F\u52A8\u8D77\u6765\uFF0Cnginx \u4E5F\u65E0\u6CD5\u8FD0\u884C\u3002

<!-- more -->

## \u4E00 yum \u5B89\u88C5 nginx

yum \u5B89\u88C5 nginx \u64CD\u4F5C\u7B80\u5355\uFF0C\u65E0\u9700\u7F16\u8BD1\u6E90\u7801\uFF0C\u8FD8\u4F1A\u751F\u6210 nginx \u670D\u52A1\u3002\u5177\u4F53\u6B65\u9AA4\u5982\u4E0B\uFF1A

### 1 \u66F4\u65B0 yum

\`\`\`bash
yum update -y
\`\`\`

### 2 \u5B89\u88C5 nginx \u6E90

\u53EF\u4EE5\u901A\u8FC7\uFF1A<http://nginx.org/packages/centos/7/x86_64/RPMS/>,\u67E5\u627E\u81EA\u5DF1\u60F3\u5B89\u88C5\u7684\u7248\u672C\u3002

\`\`\`bash
#\u5B89\u88C5nginx\u6E90
rpm -ivh http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.20.2-1.el7.ngx.x86_64.rpm
#\u67E5\u770Bnginx\u4FE1\u606F
yum info nginx
\`\`\`

### 3 \u5B89\u88C5 nginx

\`\`\`bash
yum install nginx -y
\`\`\`

### 4 \u5F00\u653E 80 \u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899

\`\`\`bash
# \u5F00\u53D180\u7AEF\u53E3
firewall-cmd --zone=public --add-port=80/tcp --permanent
# \u91CD\u65B0\u52A0\u8F7D
firewall-cmd --reload
#\u6216\u76F4\u63A5\u5173\u95ED\u9632\u706B\u5899
systemctl stop firewalld
\`\`\`

### 5 \u542F\u52A8 nginx

\`\`\`bash
# \u542F\u52A8nginx
systemctl start nginx
\`\`\`

### 6 \u5F00\u673A\u81EA\u542F\u52A8

\`\`\`bash
systemctl enable nginx
\`\`\`

### 7 \u67E5\u770B nginx \u7248\u672C\u548C\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F

\`\`\`bash
#nginx\u7248\u672C\u4FE1\u606F
nginx -v
#nginx\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F,\u5305\u62EC\u5B89\u88C5\u4F4D\u7F6E\u4EE5\u53CA\u5404\u79CD\u914D\u7F6E\u6587\u4EF6\u4FE1\u606F\u3002
nginx -V
\`\`\`

**nginx \u76F8\u5173\u914D\u7F6E\u4FE1\u606F\uFF1A**
![](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203181052935.png)

**yum \u65B9\u5F0F\u5B89\u88C5\u7684\u9ED8\u8BA4\u5730\u5740\u548C\u914D\u7F6E\u7684\u9ED8\u8BA4\u5730\u5740**

\`\`\`bash
#yum\u65B9\u5F0F\u5B89\u88C5\u540E\u9ED8\u8BA4\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84
/etc/nginx/nginx.conf
#nginx\u7F51\u7AD9\u9ED8\u8BA4\u5B58\u653E\u76EE\u5F55
/usr/share/nginx/html
#\u7F51\u7AD9\u9ED8\u8BA4\u4E3B\u9875\u8DEF\u5F84
/usr/share/nginx/html/index.html
\`\`\`

## \u4E8C \u6E90\u7801\u7F16\u8BD1\u5B89\u88C5

### 1\u3001\u4E0B\u8F7D Nginx

&emsp;Nginx \u5B98\u7F51\u5730\u5740\uFF1A<https://nginx.org/en/download.html>\uFF0C\u9009\u62E9\u5BF9\u5E94\u7684 linux \u7248\u672C\uFF0C\u901A\u8FC7\`wget\`\u8FDB\u884C\u4E0B\u8F7D\u3002

\`\`\`bash
wget http://nginx.org/download/nginx-1.20.1.tar.gz
\`\`\`

**\u6CE8\u610F**\uFF1A\u5982\u679C\`wget\`\u6CA1\u6709\u5B89\u88C5\uFF0C\u8BF7\u6267\u884C\`yum -y install wget\` \u8FDB\u884C\u5B89\u88C5\u3002

### 2\u3001\u89E3\u538B

\u901A\u8FC7\`tar\`\u547D\u4EE4\u8FDB\u884C\u89E3\u538B

\`\`\`bash
tar -zvxf nginx-1.20.1.tar.gz
cd nginx-1.12.1
\`\`\`

### 3\u3001\u8BD1\u73AF\u5883\u5B89\u88C5

**gcc \u5B89\u88C5**\uFF1A\u5B89\u88C5 nginx \u9700\u8981\u5148\u5C06\u5B98\u7F51\u4E0B\u8F7D\u7684\u6E90\u7801\u8FDB\u884C\u7F16\u8BD1\uFF0C\u7F16\u8BD1\u4F9D\u8D56 gcc \u73AF\u5883\uFF0C\u5982\u679C\u6CA1\u6709 gcc \u73AF\u5883\uFF0C\u5219\u9700\u8981\u5B89\u88C5

\`\`\`bash
# gcc \u5B89\u88C5
yum install gcc-c++
\`\`\`

**PCRE pcre-devel \u5B89\u88C5**\uFF1APCRE(Perl Compatible Regular Expressions) \u662F\u4E00\u4E2A Perl \u5E93\uFF0C\u5305\u62EC perl \u517C\u5BB9\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u5E93\u3002nginx \u7684 http \u6A21\u5757\u4F7F\u7528 pcre \u6765\u89E3\u6790\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u6240\u4EE5\u9700\u8981\u5728 linux \u4E0A\u5B89\u88C5 pcre \u5E93\uFF0Cpcre-devel \u662F\u4F7F\u7528 pcre \u5F00\u53D1\u7684\u4E00\u4E2A\u4E8C\u6B21\u5F00\u53D1\u5E93\uFF0Cnginx \u4E5F\u9700\u8981\u6B64\u5E93\u3002

\`\`\`bash
yum install -y pcre pcre-devel
\`\`\`

**zlib \u5B89\u88C5**\uFF1Azlib \u5E93\u63D0\u4F9B\u4E86\u5F88\u591A\u79CD\u538B\u7F29\u548C\u89E3\u538B\u7F29\u7684\u65B9\u5F0F\uFF0C nginx \u4F7F\u7528 zlib \u5BF9 http \u5305\u7684\u5185\u5BB9\u8FDB\u884C gzip \uFF0C\u6240\u4EE5\u9700\u8981\u5728 Centos \u4E0A\u5B89\u88C5 zlib \u5E93\u3002

\`\`\`bash
yum install -y zlib zlib-devel
\`\`\`

**OpenSSL \u5B89\u88C5**\uFF1AOpenSSL \u662F\u4E00\u4E2A\u5F3A\u5927\u7684\u5B89\u5168\u5957\u63A5\u5B57\u5C42\u5BC6\u7801\u5E93\uFF0C\u56CA\u62EC\u4E3B\u8981\u7684\u5BC6\u7801\u7B97\u6CD5\u3001\u5E38\u7528\u7684\u5BC6\u94A5\u548C\u8BC1\u4E66\u5C01\u88C5\u7BA1\u7406\u529F\u80FD\u53CA SSL \u534F\u8BAE\uFF0C\u5E76\u63D0\u4F9B\u4E30\u5BCC\u7684\u5E94\u7528\u7A0B\u5E8F\u4F9B\u6D4B\u8BD5\u6216\u5176\u5B83\u76EE\u7684\u4F7F\u7528\u3002
nginx \u4E0D\u4EC5\u652F\u6301 http \u534F\u8BAE\uFF0C\u8FD8\u652F\u6301 https\uFF08\u5373\u5728 ssl \u534F\u8BAE\u4E0A\u4F20\u8F93 http\uFF09\uFF0C\u6240\u4EE5\u9700\u8981\u5728 Centos \u5B89\u88C5 OpenSSL \u5E93\u3002

\`\`\`bash
yum install -y openssl openssl-devel
\`\`\`

### 4\u3001\u9884\u7F16\u8BD1

\u8FDB\u5165\u89E3\u538B\u540E\u7684\u76EE\u5F55 nginx-1.20.1 \u8FDB\u884C\u9884\u7F16\u8BD1\u3002\u6CE8\u610F\uFF1A--prefix \u662F\u6307\u5B9A\u5B89\u88C5\u76EE\u5F55\uFF0C\u9ED8\u8BA4\`/usr/local/nginx\`

\`\`\`bash
./configure --prefix=/opt/nginx --with-http_ssl_module   --with-http_flv_module  --with-http_stub_status_module  --with-http_gzip_static_module   --with-http_realip_module
\`\`\`

### 5\u3001\u7F16\u8BD1

\u901A\u8FC7\`make\`\u547D\u4EE4\u8FDB\u884C\u6E90\u7801\u7F16\u8BD1\uFF1B\u5982\u679C\`make\`\u547D\u4EE4\u4E0D\u5B58\u5728\uFF0C\u901A\u8FC7\`yum -y install make autoconf \`\u5B89\u88C5

\`\`\`bash
make
\`\`\`

### 6\u3001\u5B89\u88C5

\`\`\`bash
make install
\`\`\`

\u5B89\u88C5\u5B8C\u6210\u540E\u8FDB\u5165\`/opt/nginx/sbin\`\u76EE\u5F55\uFF0C\u7136\u540E\u542F\u52A8\`./nginx\` \u8FD9\u6761\u547D\u4EE4\u6210\u529F\u6CA1\u6709\u8F93\u51FA\u3002\u901A\u8FC7\u4E00\u4E0B\u547D\u4EE4\u67E5\u770B\`nginx\`\u662F\u5426\u542F\u52A8\u6210\u529F\uFF1A

\`\`\`bash
ps -ef |grep nginx
\`\`\`

\u5982\u679C\u51FA\u73B0\`nginx\`\u8FDB\u7A0B\uFF0C\u5219\u8868\u793A\u542F\u52A8\u6210\u529F
![nginx](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041716374.png)

\u6253\u5F00\u6D4F\u89C8\u5668\uFF0C\u8F93\u5165\`nginx\`\u5730\u5740\uFF0C\u9ED8\u8BA4\u76D1\u542C 80 \u7AEF\u53E3\uFF0C\u5982\u4E0B\u56FE\uFF1A
![nginxWeb](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041715335.png)

\u5982\u679C\u51FA\u73B0\u8BBF\u95EE\u4E0D\u4E86\uFF0C\u5C1D\u8BD5\u5173\u95ED\u9632\u706B\u5899\`systemctl stop firewalld.service\`\u6216\u8005\u6C38\u4E45\u5173\u95ED\u9632\u706B\u5899\`systemctl disable firewalld.service\`

### 7\u3001\u521B\u5EFA linux \u5168\u5C40\u8F6F\u8FDE\u63A5

::: tip
\u901A\u8FC7\u8F6F\u94FE\u63A5\u7684\u65B9\u5F0F\u8BBE\u7F6E nginx \u4E3A\u5168\u5C40\u53D8\u91CF\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u5168\u5C40\u4EFB\u4F55\u5730\u65B9\u901A\u8FC7 nginx \u76F8\u5173\u547D\u4EE4\u64CD\u4F5C nginx \u4E0D\u7528\u5230 nginx \u5B89\u88C5\u76EE\u5F55\u6216\u8005 nginx \u5168\u8DEF\u5F84\u8FDB\u884C\u547D\u4EE4\u6267\u884C\uFF0C\u4F7F\u64CD\u4F5C\u53D8\u5F97\u66F4\u52A0\u7B80\u5355\u3002
:::

\`\`\`bash
ln -s /opt/nginx/sbin/nginx  /usr/bin/nginx
\`\`\`

**\u4E0A\u9762\u7684\uFF1A/opt/nginx/sbin/nginx \u4E3A\u6211\u4EEC\u7684 nginx \u5B89\u88C5\u76EE\u5F55\uFF0C\u82E5\u4F60\u7684\u5B89\u88C5\u76EE\u5F55\u548C\u6211\u7684\u4E0D\u4E00\u6837\uFF0C\u81EA\u884C\u4FEE\u6539\u4E3A\u4F60\u7684\u5B89\u88C5\u76EE\u5F55\u4FBF\u53EF\uFF0C\u5EFA\u7ACB\u8F6F\u94FE\u63A5\u540E\uFF0C\u6211\u4EEC\u4FBF\u53EF\u4EE5\u5728\u4EFB\u610F\u76EE\u5F55\u6267\u884C nginx \u547D\u4EE4\u4E86**

### 8\u3001nginx \u547D\u4EE4

\u9996\u5148\u9700\u8981\u8FDB\u5165 nginx \u5B89\u88C5\u76EE\u5F55\uFF1A\`cd /opt/nginx/sbin/\`

**\u542F\u52A8\u547D\u4EE4**\uFF1A\`./nginx\`

**\u9000\u51FA\u547D\u4EE4**: \`./nginx -s quit\`\uFF0C\u6B64\u65B9\u5F0F\u505C\u6B62\u6B65\u9AA4\u662F\u5F85 nginx \u8FDB\u7A0B\u5904\u7406\u4EFB\u52A1\u5B8C\u6BD5\u8FDB\u884C\u505C\u6B62\u3002

**\u505C\u6B62\u547D\u4EE4**\uFF1A\`./nginx -s stop\`\uFF0C\u6B64\u65B9\u5F0F\u76F8\u5F53\u4E8E\u5148\u67E5\u51FA nginx \u8FDB\u7A0B id \u518D\u4F7F\u7528 kill \u547D\u4EE4\u5F3A\u5236\u6740\u6389\u8FDB\u7A0B\u3002

**\u5355\u7EAF\u91CD\u542F\u547D\u4EE4**\uFF1A\u5148\u505C\u6B62\u518D\u542F\u52A8(\u63A8\u8350)\uFF0C\u5BF9 nginx \u8FDB\u884C\u91CD\u542F\u76F8\u5F53\u4E8E\u5148\u505C\u6B62\u518D\u542F\u52A8\uFF0C\u5373\u5148\u6267\u884C\u505C\u6B62\u547D\u4EE4\u518D\u6267\u884C\u542F\u52A8\u547D\u4EE4\u3002

\`\`\`bash
./nginx -s quit
./nginx
\`\`\`

**\u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6**\uFF1A\u5F53 nginx \u7684\u914D\u7F6E\u6587\u4EF6 nginx.conf \u4FEE\u6539\u540E\uFF0C\u8981\u60F3\u8BA9\u914D\u7F6E\u751F\u6548\u9700\u8981\u91CD\u542F nginx\uFF0C\u4F7F\u7528 ./nginx -s reload \u4E0D\u7528\u5148\u505C\u6B62 nginx \u518D\u542F\u52A8 nginx, \u5373\u53EF\u5C06\u914D\u7F6E\u4FE1\u606F\u5728 nginx \u4E2D\u751F\u6548\uFF0C\u5982\u4E0B\uFF1A

\`\`\`bash
./nginx -s reload
\`\`\`

**\u6307\u5B9A\u914D\u7F6E\u6587\u4EF6\u542F\u52A8**: /opt/nginx/sbin/nginx -c /opt/nginx/conf/nginx.conf

**\u6307\u5B9A\u914D\u7F6E\u6587\u4EF6\u91CD\u542F**: /opt/nginx/sbin/nginx -s reload -c /opt/nginx/conf/nginx.conf

**\u6D4B\u8BD5 nginx \u914D\u7F6E\u6587\u4EF6\u662F\u5426\u6B63\u786E**\uFF1A/nginx -t -c /opt/nginx/conf/nginx.conf

**\u5F00\u542F\u81EA\u542F\u52A8**

1\u3001\u5728/etc/rc.d/rc.local \u4E2D\u6DFB\u52A0 nginx \u542F\u52A8\u547D\u4EE4\u884C\uFF1A

\`\`\`bash
vi /etc/rc.d/rc.local
/opt/nginx/sbin/nginx
\`\`\`

2\u3001\u6388\u6743\uFF1A\`chmod +x /etc/rc.d/rc.local\`

3\u3001\u91CD\u542F\uFF1A\`reboot\`,\u901A\u8FC7\u547D\u4EE4\`ps -ef | grep nginx\`\u67E5\u770B nginx \u662F\u5426\u5F00\u673A\u81EA\u542F\u52A8\u6210\u529F

**\u4E0A\u9762\u8FD9\u79CD\u662F\u6700\u7B80\u5355\u7684 nginx \u5F00\u673A\u81EA\u542F\u52A8\u7684\uFF0C\u63A8\u8350\u5927\u5BB6\u4F7F\u7528**\u3002

## \u4E09 Docker \u5B89\u88C5

### 1\u3001\u62C9\u53D6 nginx \u955C\u50CF

\`\`\`bash
docker pull nginx
\`\`\`

### 2\u3001\u542F\u52A8 nginx \u5BB9\u5668

\`\`\`bash
docker run --name nginx -p 80:80 -d nginx
\`\`\`

\u81F3\u6B64\u4E00\u4E2A\u7B80\u5355\u7684 nginx \u5BB9\u5668\u5C31\u542F\u52A8\u6210\u529F\u4E86\uFF0C\u4E0B\u9762\u914D\u7F6E\u6302\u8F7D\u76EE\u5F55\u3002

### 3\u3001\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55

\`\`\`bash
mkdir -p /opt/nginx
mkdir -p /opt/nginx/html
mkdir -p /opt/nginx/conf.d
mkdir -p /opt/nginx/logs
\`\`\`

### 4\u3001\u590D\u5236\u5BB9\u5668\u4E2D\u6302\u8F7D\u6587\u4EF6

\`\`\`bash
docker cp 67e:/etc/nginx/nginx.conf /opt/nginx/
docker cp 67e:/etc/nginx/conf.d /opt/nginx/conf.d/
docker cp 67e:/usr/share/nginx/html/ /opt/nginx/html/
docker cp 67e:/var/log/nginx/ /opt/nginx/logs/
\u6CE8\uFF1Adocker cp 67e \u4E2D\u7684 "67e" \u4E3A\u5BB9\u5668ID\u524D\u7F00\uFF0C\u53EA\u8981\u552F\u4E00\u5C31\u597D\u4E86
\`\`\`

### 5\u3001\u5220\u9664\u65E7\u7684 nginx \u5BB9\u5668

\`\`\`bash
# \u505C\u6B62\u5BB9\u5668
docker stop 67e
# \u79FB\u9664\u5BB9\u5668
docker rm 67e
#\u6216\u8005\u5F3A\u5236\u5220\u9664\u5BB9\u5668
docker rm -f 67e
\`\`\`

### 6\u3001\u521B\u5EFA nginx \u6302\u8F7D\u76EE\u5F55\u5BB9\u5668

\`\`\`bash
docker run -d --name nginx -p 80:80 -p 443:443 -v /opt/nginx/nginx.conf:/etc/nginx/nginx.conf \\
-v /opt/nginx/html:/usr/share/nginx/html -v /opt/nginx/logs:/var/log/nginx \\
-v /opt/nginx/conf.d:/etc/nginx/conf.d --privileged=true --restart=always nginx
\`\`\`

\`--privileged=true\`: \u4F7F\u7528\u8BE5\u53C2\u6570\uFF0Ccontainer \u5185\u7684 root \u62E5\u6709\u771F\u6B63\u7684 root \u6743\u9650\u3002\u5426\u5219\uFF0Ccontainer \u5185\u7684 root \u53EA\u662F\u5916\u90E8\u7684\u4E00\u4E2A\u666E\u901A\u7528\u6237\u6743\u9650\u3002privileged \u542F\u52A8\u7684\u5BB9\u5668\uFF0C\u53EF\u4EE5\u770B\u5230\u5F88\u591A host \u4E0A\u7684\u8BBE\u5907\uFF0C\u5E76\u4E14\u53EF\u4EE5\u6267\u884C mount\u3002\u751A\u81F3\u5141\u8BB8\u4F60\u5728 docker \u5BB9\u5668\u4E2D\u542F\u52A8 docker \u5BB9\u5668  
\`--restart=always\`: \u5F53 Docker \u91CD\u542F\u65F6\uFF0C\u5BB9\u5668\u81EA\u52A8\u542F\u52A8\u3002  
\u4FEE\u6539\u8FD0\u884C\u4E2D\u7684\u5BB9\u5668\u81EA\u542F\u52A8\uFF1A\`docker container update --restart=always \u5BB9\u5668\u540D\u5B57\`  
\u6784\u5EFA\u5BB9\u5668\u81EA\u542F\u52A8\uFF1A\u542F\u52A8\u547D\u4EE4\u989D\u5916\u52A0\u4E0A\`--restart=always\`

### 7\u3001\u67E5\u770B nginx \u5BB9\u5668\u8FD0\u884C\u60C5\u51B5

\`\`\`bash
# \u547D\u4EE4\u67E5\u770B\u5F53\u524D\u8FD0\u884C\u7684\u5BB9\u5668
docker ps
# \u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE80\u7AEF\u53E3\uFF0C\u67E5\u770B\u662F\u5426\u663E\u793A\u6B63\u5E38\u9875\u9762
http:ip/

\`\`\`

\u5982\u679C\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E0D\u4E86\uFF0C\u5E94\u8BE5\u662F\u9632\u706B\u5899\u7684\u539F\u56E0\u3002\u53EF\u4EE5\u901A\u8FC7\u547D\u4EE4\`systemctl stop firewalld\`\u5173\u95ED\u9632\u706B\u5899\u6216\u8005\u5F00\u901A\u5BF9\u5E94\u7684\u7AEF\u53E3\`80\`\u548C\`443\`\uFF0C\u7AEF\u53E3\u5F00\u901A\u547D\u4EE4\u53C2\u8003\uFF1A[linux \u5E38\u7528\u6307\u4EE4](../../others/linux/basecommand.html#_6-centos-\u7AEF\u53E3\u5F00\u901A)

## \u56DB nginx \u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757

&emsp;nginx \u6587\u4EF6\u975E\u5E38\u5C0F\u4F46\u662F\u6027\u80FD\u975E\u5E38\u7684\u9AD8\u6548,\u8FD9\u65B9\u9762\u5B8C\u80DC apache,nginx \u6587\u4EF6\u5C0F\u7684\u4E00\u4E2A\u539F\u56E0\u4E4B\u4E00\u662F nginx \u81EA\u5E26\u7684\u529F\u80FD\u76F8\u5BF9\u8F83\u5C11,\u597D\u5728 nginx \u5141\u8BB8\u7B2C\u4E09\u65B9\u6A21\u5757,\u7B2C\u4E09\u65B9\u6A21\u5757\u4F7F\u5F97 nginx \u8D8A\u53D1\u7684\u5F3A\u5927. \u5728\u5B89\u88C5\u6A21\u5757\u65B9\u9762,nginx \u663E\u5F97\u6CA1\u6709 apache \u5B89\u88C5\u6A21\u5757\u65B9\u4FBF\uFF0C\u5F53\u7136\u4E5F\u6CA1\u6709 php \u5B89\u88C5\u6269\u5C55\u65B9\u4FBF.\u5728\u539F\u751F\u7684 nginx,\u4ED6\u4E0D\u53EF\u4EE5\u52A8\u6001\u52A0\u8F7D\u6A21\u5757,\u6240\u4EE5\u5F53\u4F60\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757\u7684\u65F6\u5019\u9700\u8981\u8986\u76D6 nginx \u6587\u4EF6.\u63A5\u4E0B\u6765\u770B\u770B\u5982\u4F55\u5B89\u88C5 nginx \u7B2C\u4E09\u6A21\u5757\u5427\u3002

nginx \u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u65B9\u6CD5\uFF1A\`./configure --prefix=/\u4F60\u7684\u5B89\u88C5\u76EE\u5F55 --add-module=/\u7B2C\u4E09\u65B9\u6A21\u5757\u8DEF\u5F84\`\u3002\u4E0B\u9762\u4EE5\`nginx-upsync-module\`\u7B2C\u4E09\u65B9\u6A21\u5757\u4E3A\u4F8B\u5B50\u3002

- \u5982\u679C\u7B2C\u4E00\u6B21\u5B89\u88C5 nginx \u5E76\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757\uFF1A

\`\`\`bash
#\u8FDB\u5165\u6E90\u7801\u6587\u4EF6\u76EE\u5F55
cd nginx-1.19
#\u8FDB\u884C\u9884\u7F16\u8BD1
./configure --prefix=/opt/nginx --with-http_ssl_module   --with-http_flv_module  --with-http_stub_status_module  --with-http_gzip_static_module   --with-http_realip_module    --with-pcre --add-module=../nginx-upsync-module-master
#\u7F16\u8BD1
make
#\u5B89\u88C5
make install
\`\`\`

- \u5982\u679C\u5DF2\u7ECF\u5B89\u88C5 nginx \u5E76\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757\uFF1A

\`\`\`bash
#\u5982\u679C\u6CA1\u6709\u5DF2\u5B89\u88C5\u597D\u7684nginx\u6E90\u7801\u76EE\u5F55\uFF0C\u9700\u8981\u4ECEnginx\u5B98\u7F51\u4E0B\u8F7D\u76F8\u540C\u7248\u672C\u7684\u6E90\u7801\uFF0C\u5728\u6E90\u7801\u57FA\u7840\u4E0A\u91CD\u65B0\u5B89\u88C5nginx,\u8FDB\u5165\u6E90\u7801\u6587\u4EF6\u76EE\u5F55
cd nginx-1.19
#\u8FDB\u884C\u9884\u7F16\u8BD1
./configure --prefix=/opt/nginx  --with-http_ssl_module    --with-http_ssl_module   --with-http_flv_module  --with-http_stub_status_module  --with-http_gzip_static_module   --with-http_realip_module    --with-pcre --add-module=../nginx-upsync-module-master
#\u7F16\u8BD1
make
#\u5C06\u7F16\u8BD1\u597D\u7684\u6587\u4EF6\u8986\u76D6\u539F\u6765\u7684nginx\u6587\u4EF6\uFF0C\u5728nginx\u6E90\u7801\u76EE\u5F55\u4E0B\u7684objs\u6587\u4EF6\u5728
cp objs/nginx /opt/nginx/sbin/nginx
\`\`\`

\u603B\u7ED3,\u5B89\u88C5 nginx \u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757\u5B9E\u9645\u4E0A\u662F\u4F7F\u7528--add-module \u91CD\u65B0\u5B89\u88C5\u4E00\u6B21 nginx\uFF0C\u4E0D\u8981 make install \u800C\u662F\u76F4\u63A5\u628A\u7F16\u8BD1\u76EE\u5F55\u4E0B objs/nginx \u6587\u4EF6\u76F4\u63A5\u8986\u76D6\u8001\u7684 nginx \u6587\u4EF6\u3002\u5982\u679C\u4F60\u9700\u8981\u5B89\u88C5\u591A\u4E2A nginx \u7B2C\u4E09\u65B9\u6A21\u5757,\u4F60\u53EA\u9700\u8981\u591A\u6307\u5B9A\u51E0\u4E2A\u76F8\u5E94\u7684--add-module \u5373\u53EF\u3002\u6CE8\u610F\uFF1A\u91CD\u65B0\u7F16\u8BD1\u7684\u65F6\u5019\uFF0C\u8BB0\u5F97\u4E00\u5B9A\u8981\u628A\u4EE5\u524D\u7F16\u8BD1\u8FC7\u7684\u6A21\u5757\u4E00\u540C\u52A0\u5230 configure \u53C2\u6570\u91CC\u9762\u3002

nginx \u63D0\u4F9B\u4E86\u975E\u5E38\u591A\u7684\u7B2C\u4E09\u65B9\u6A21\u5757\uFF1A<https://www.nginx.com/resources/wiki/modules/>
`,contentRendered:`<p>\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0Cnginx \u4F7F\u7528\u975E\u5E38\u9891\u7E41\u3002\u4ECA\u65E5\u62BD\u7A7A\uFF0C\u987A\u4FBF\u6574\u7406\u4E00\u4E0B linux \u73AF\u5883\u4E0B nginx \u5E38\u7528\u7684 3 \u79CD\u5B89\u88C5\u65B9\u5F0F(yum,\u6E90\u7801\u7F16\u8BD1\uFF0Cdocker)\uFF0C\u4EE5\u5907\u65E5\u540E\u4F7F\u7528\uFF0C\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u9519\u8BEF\u3002docker \u65B9\u5F0F\u6BD4\u8F83\u7B80\u5355\uFF0C\u4F46\u4E00\u5B9A\u8981\u6CE8\u610F\u6587\u4EF6\u76EE\u5F55\u6302\u8F7D\u914D\u7F6E\uFF0C\u914D\u7F6E\u4E0D\u6B63\u786E\uFF0C\u5373\u4F7F\u5BB9\u5668\u542F\u52A8\u8D77\u6765\uFF0Cnginx \u4E5F\u65E0\u6CD5\u8FD0\u884C\u3002</p>
<!-- more -->
<h2 id="\u4E00-yum-\u5B89\u88C5-nginx" tabindex="-1"><a class="header-anchor" href="#\u4E00-yum-\u5B89\u88C5-nginx" aria-hidden="true">#</a> \u4E00 yum \u5B89\u88C5 nginx</h2>
<p>yum \u5B89\u88C5 nginx \u64CD\u4F5C\u7B80\u5355\uFF0C\u65E0\u9700\u7F16\u8BD1\u6E90\u7801\uFF0C\u8FD8\u4F1A\u751F\u6210 nginx \u670D\u52A1\u3002\u5177\u4F53\u6B65\u9AA4\u5982\u4E0B\uFF1A</p>
<h3 id="_1-\u66F4\u65B0-yum" tabindex="-1"><a class="header-anchor" href="#_1-\u66F4\u65B0-yum" aria-hidden="true">#</a> 1 \u66F4\u65B0 yum</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum update <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-\u5B89\u88C5-nginx-\u6E90" tabindex="-1"><a class="header-anchor" href="#_2-\u5B89\u88C5-nginx-\u6E90" aria-hidden="true">#</a> 2 \u5B89\u88C5 nginx \u6E90</h3>
<p>\u53EF\u4EE5\u901A\u8FC7\uFF1A<a href="http://nginx.org/packages/centos/7/x86_64/RPMS/" target="_blank" rel="noopener noreferrer">http://nginx.org/packages/centos/7/x86_64/RPMS/<ExternalLinkIcon/></a>,\u67E5\u627E\u81EA\u5DF1\u60F3\u5B89\u88C5\u7684\u7248\u672C\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u5B89\u88C5nginx\u6E90</span>
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.20.2-1.el7.ngx.x86_64.rpm
<span class="token comment">#\u67E5\u770Bnginx\u4FE1\u606F</span>
yum info nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u5B89\u88C5-nginx" tabindex="-1"><a class="header-anchor" href="#_3-\u5B89\u88C5-nginx" aria-hidden="true">#</a> 3 \u5B89\u88C5 nginx</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum <span class="token function">install</span> nginx <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-\u5F00\u653E-80-\u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899" tabindex="-1"><a class="header-anchor" href="#_4-\u5F00\u653E-80-\u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899" aria-hidden="true">#</a> 4 \u5F00\u653E 80 \u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u5F00\u53D180\u7AEF\u53E3</span>
firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment"># \u91CD\u65B0\u52A0\u8F7D</span>
firewall-cmd <span class="token parameter variable">--reload</span>
<span class="token comment">#\u6216\u76F4\u63A5\u5173\u95ED\u9632\u706B\u5899</span>
systemctl stop firewalld
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-\u542F\u52A8-nginx" tabindex="-1"><a class="header-anchor" href="#_5-\u542F\u52A8-nginx" aria-hidden="true">#</a> 5 \u542F\u52A8 nginx</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u542F\u52A8nginx</span>
systemctl start nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-\u5F00\u673A\u81EA\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#_6-\u5F00\u673A\u81EA\u542F\u52A8" aria-hidden="true">#</a> 6 \u5F00\u673A\u81EA\u542F\u52A8</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_7-\u67E5\u770B-nginx-\u7248\u672C\u548C\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_7-\u67E5\u770B-nginx-\u7248\u672C\u548C\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F" aria-hidden="true">#</a> 7 \u67E5\u770B nginx \u7248\u672C\u548C\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#nginx\u7248\u672C\u4FE1\u606F</span>
nginx <span class="token parameter variable">-v</span>
<span class="token comment">#nginx\u7F16\u8BD1\u53C2\u6570\u4FE1\u606F,\u5305\u62EC\u5B89\u88C5\u4F4D\u7F6E\u4EE5\u53CA\u5404\u79CD\u914D\u7F6E\u6587\u4EF6\u4FE1\u606F\u3002</span>
nginx <span class="token parameter variable">-V</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>nginx \u76F8\u5173\u914D\u7F6E\u4FE1\u606F\uFF1A</strong>
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202203181052935.png" alt=""></p>
<p><strong>yum \u65B9\u5F0F\u5B89\u88C5\u7684\u9ED8\u8BA4\u5730\u5740\u548C\u914D\u7F6E\u7684\u9ED8\u8BA4\u5730\u5740</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#yum\u65B9\u5F0F\u5B89\u88C5\u540E\u9ED8\u8BA4\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84</span>
/etc/nginx/nginx.conf
<span class="token comment">#nginx\u7F51\u7AD9\u9ED8\u8BA4\u5B58\u653E\u76EE\u5F55</span>
/usr/share/nginx/html
<span class="token comment">#\u7F51\u7AD9\u9ED8\u8BA4\u4E3B\u9875\u8DEF\u5F84</span>
/usr/share/nginx/html/index.html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8C-\u6E90\u7801\u7F16\u8BD1\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u4E8C-\u6E90\u7801\u7F16\u8BD1\u5B89\u88C5" aria-hidden="true">#</a> \u4E8C \u6E90\u7801\u7F16\u8BD1\u5B89\u88C5</h2>
<h3 id="_1\u3001\u4E0B\u8F7D-nginx" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u4E0B\u8F7D-nginx" aria-hidden="true">#</a> 1\u3001\u4E0B\u8F7D Nginx</h3>
<p>\u2003Nginx \u5B98\u7F51\u5730\u5740\uFF1A<a href="https://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">https://nginx.org/en/download.html<ExternalLinkIcon/></a>\uFF0C\u9009\u62E9\u5BF9\u5E94\u7684 linux \u7248\u672C\uFF0C\u901A\u8FC7<code v-pre>wget</code>\u8FDB\u884C\u4E0B\u8F7D\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">wget</span> http://nginx.org/download/nginx-1.20.1.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u6CE8\u610F</strong>\uFF1A\u5982\u679C<code v-pre>wget</code>\u6CA1\u6709\u5B89\u88C5\uFF0C\u8BF7\u6267\u884C<code v-pre>yum -y install wget</code> \u8FDB\u884C\u5B89\u88C5\u3002</p>
<h3 id="_2\u3001\u89E3\u538B" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u89E3\u538B" aria-hidden="true">#</a> 2\u3001\u89E3\u538B</h3>
<p>\u901A\u8FC7<code v-pre>tar</code>\u547D\u4EE4\u8FDB\u884C\u89E3\u538B</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">tar</span> <span class="token parameter variable">-zvxf</span> nginx-1.20.1.tar.gz
<span class="token builtin class-name">cd</span> nginx-1.12.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3\u3001\u8BD1\u73AF\u5883\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u8BD1\u73AF\u5883\u5B89\u88C5" aria-hidden="true">#</a> 3\u3001\u8BD1\u73AF\u5883\u5B89\u88C5</h3>
<p><strong>gcc \u5B89\u88C5</strong>\uFF1A\u5B89\u88C5 nginx \u9700\u8981\u5148\u5C06\u5B98\u7F51\u4E0B\u8F7D\u7684\u6E90\u7801\u8FDB\u884C\u7F16\u8BD1\uFF0C\u7F16\u8BD1\u4F9D\u8D56 gcc \u73AF\u5883\uFF0C\u5982\u679C\u6CA1\u6709 gcc \u73AF\u5883\uFF0C\u5219\u9700\u8981\u5B89\u88C5</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># gcc \u5B89\u88C5</span>
yum <span class="token function">install</span> gcc-c++
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>PCRE pcre-devel \u5B89\u88C5</strong>\uFF1APCRE(Perl Compatible Regular Expressions) \u662F\u4E00\u4E2A Perl \u5E93\uFF0C\u5305\u62EC perl \u517C\u5BB9\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u5E93\u3002nginx \u7684 http \u6A21\u5757\u4F7F\u7528 pcre \u6765\u89E3\u6790\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u6240\u4EE5\u9700\u8981\u5728 linux \u4E0A\u5B89\u88C5 pcre \u5E93\uFF0Cpcre-devel \u662F\u4F7F\u7528 pcre \u5F00\u53D1\u7684\u4E00\u4E2A\u4E8C\u6B21\u5F00\u53D1\u5E93\uFF0Cnginx \u4E5F\u9700\u8981\u6B64\u5E93\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> pcre pcre-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>zlib \u5B89\u88C5</strong>\uFF1Azlib \u5E93\u63D0\u4F9B\u4E86\u5F88\u591A\u79CD\u538B\u7F29\u548C\u89E3\u538B\u7F29\u7684\u65B9\u5F0F\uFF0C nginx \u4F7F\u7528 zlib \u5BF9 http \u5305\u7684\u5185\u5BB9\u8FDB\u884C gzip \uFF0C\u6240\u4EE5\u9700\u8981\u5728 Centos \u4E0A\u5B89\u88C5 zlib \u5E93\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> zlib zlib-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>OpenSSL \u5B89\u88C5</strong>\uFF1AOpenSSL \u662F\u4E00\u4E2A\u5F3A\u5927\u7684\u5B89\u5168\u5957\u63A5\u5B57\u5C42\u5BC6\u7801\u5E93\uFF0C\u56CA\u62EC\u4E3B\u8981\u7684\u5BC6\u7801\u7B97\u6CD5\u3001\u5E38\u7528\u7684\u5BC6\u94A5\u548C\u8BC1\u4E66\u5C01\u88C5\u7BA1\u7406\u529F\u80FD\u53CA SSL \u534F\u8BAE\uFF0C\u5E76\u63D0\u4F9B\u4E30\u5BCC\u7684\u5E94\u7528\u7A0B\u5E8F\u4F9B\u6D4B\u8BD5\u6216\u5176\u5B83\u76EE\u7684\u4F7F\u7528\u3002
nginx \u4E0D\u4EC5\u652F\u6301 http \u534F\u8BAE\uFF0C\u8FD8\u652F\u6301 https\uFF08\u5373\u5728 ssl \u534F\u8BAE\u4E0A\u4F20\u8F93 http\uFF09\uFF0C\u6240\u4EE5\u9700\u8981\u5728 Centos \u5B89\u88C5 OpenSSL \u5E93\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> openssl openssl-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4\u3001\u9884\u7F16\u8BD1" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u9884\u7F16\u8BD1" aria-hidden="true">#</a> 4\u3001\u9884\u7F16\u8BD1</h3>
<p>\u8FDB\u5165\u89E3\u538B\u540E\u7684\u76EE\u5F55 nginx-1.20.1 \u8FDB\u884C\u9884\u7F16\u8BD1\u3002\u6CE8\u610F\uFF1A--prefix \u662F\u6307\u5B9A\u5B89\u88C5\u76EE\u5F55\uFF0C\u9ED8\u8BA4<code v-pre>/usr/local/nginx</code></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/opt/nginx --with-http_ssl_module   --with-http_flv_module  --with-http_stub_status_module  --with-http_gzip_static_module   --with-http_realip_module
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5\u3001\u7F16\u8BD1" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u7F16\u8BD1" aria-hidden="true">#</a> 5\u3001\u7F16\u8BD1</h3>
<p>\u901A\u8FC7<code v-pre>make</code>\u547D\u4EE4\u8FDB\u884C\u6E90\u7801\u7F16\u8BD1\uFF1B\u5982\u679C<code v-pre>make</code>\u547D\u4EE4\u4E0D\u5B58\u5728\uFF0C\u901A\u8FC7<code v-pre>yum -y install make autoconf </code>\u5B89\u88C5</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">make</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_6\u3001\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u5B89\u88C5" aria-hidden="true">#</a> 6\u3001\u5B89\u88C5</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5B89\u88C5\u5B8C\u6210\u540E\u8FDB\u5165<code v-pre>/opt/nginx/sbin</code>\u76EE\u5F55\uFF0C\u7136\u540E\u542F\u52A8<code v-pre>./nginx</code> \u8FD9\u6761\u547D\u4EE4\u6210\u529F\u6CA1\u6709\u8F93\u51FA\u3002\u901A\u8FC7\u4E00\u4E0B\u547D\u4EE4\u67E5\u770B<code v-pre>nginx</code>\u662F\u5426\u542F\u52A8\u6210\u529F\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span><span class="token function">grep</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u51FA\u73B0<code v-pre>nginx</code>\u8FDB\u7A0B\uFF0C\u5219\u8868\u793A\u542F\u52A8\u6210\u529F
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041716374.png" alt="nginx"></p>
<p>\u6253\u5F00\u6D4F\u89C8\u5668\uFF0C\u8F93\u5165<code v-pre>nginx</code>\u5730\u5740\uFF0C\u9ED8\u8BA4\u76D1\u542C 80 \u7AEF\u53E3\uFF0C\u5982\u4E0B\u56FE\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209041715335.png" alt="nginxWeb"></p>
<p>\u5982\u679C\u51FA\u73B0\u8BBF\u95EE\u4E0D\u4E86\uFF0C\u5C1D\u8BD5\u5173\u95ED\u9632\u706B\u5899<code v-pre>systemctl stop firewalld.service</code>\u6216\u8005\u6C38\u4E45\u5173\u95ED\u9632\u706B\u5899<code v-pre>systemctl disable firewalld.service</code></p>
<h3 id="_7\u3001\u521B\u5EFA-linux-\u5168\u5C40\u8F6F\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u521B\u5EFA-linux-\u5168\u5C40\u8F6F\u8FDE\u63A5" aria-hidden="true">#</a> 7\u3001\u521B\u5EFA linux \u5168\u5C40\u8F6F\u8FDE\u63A5</h3>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>\u901A\u8FC7\u8F6F\u94FE\u63A5\u7684\u65B9\u5F0F\u8BBE\u7F6E nginx \u4E3A\u5168\u5C40\u53D8\u91CF\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u5168\u5C40\u4EFB\u4F55\u5730\u65B9\u901A\u8FC7 nginx \u76F8\u5173\u547D\u4EE4\u64CD\u4F5C nginx \u4E0D\u7528\u5230 nginx \u5B89\u88C5\u76EE\u5F55\u6216\u8005 nginx \u5168\u8DEF\u5F84\u8FDB\u884C\u547D\u4EE4\u6267\u884C\uFF0C\u4F7F\u64CD\u4F5C\u53D8\u5F97\u66F4\u52A0\u7B80\u5355\u3002</p>
</div>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">ln</span> <span class="token parameter variable">-s</span> /opt/nginx/sbin/nginx  /usr/bin/nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u4E0A\u9762\u7684\uFF1A/opt/nginx/sbin/nginx \u4E3A\u6211\u4EEC\u7684 nginx \u5B89\u88C5\u76EE\u5F55\uFF0C\u82E5\u4F60\u7684\u5B89\u88C5\u76EE\u5F55\u548C\u6211\u7684\u4E0D\u4E00\u6837\uFF0C\u81EA\u884C\u4FEE\u6539\u4E3A\u4F60\u7684\u5B89\u88C5\u76EE\u5F55\u4FBF\u53EF\uFF0C\u5EFA\u7ACB\u8F6F\u94FE\u63A5\u540E\uFF0C\u6211\u4EEC\u4FBF\u53EF\u4EE5\u5728\u4EFB\u610F\u76EE\u5F55\u6267\u884C nginx \u547D\u4EE4\u4E86</strong></p>
<h3 id="_8\u3001nginx-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_8\u3001nginx-\u547D\u4EE4" aria-hidden="true">#</a> 8\u3001nginx \u547D\u4EE4</h3>
<p>\u9996\u5148\u9700\u8981\u8FDB\u5165 nginx \u5B89\u88C5\u76EE\u5F55\uFF1A<code v-pre>cd /opt/nginx/sbin/</code></p>
<p><strong>\u542F\u52A8\u547D\u4EE4</strong>\uFF1A<code v-pre>./nginx</code></p>
<p><strong>\u9000\u51FA\u547D\u4EE4</strong>: <code v-pre>./nginx -s quit</code>\uFF0C\u6B64\u65B9\u5F0F\u505C\u6B62\u6B65\u9AA4\u662F\u5F85 nginx \u8FDB\u7A0B\u5904\u7406\u4EFB\u52A1\u5B8C\u6BD5\u8FDB\u884C\u505C\u6B62\u3002</p>
<p><strong>\u505C\u6B62\u547D\u4EE4</strong>\uFF1A<code v-pre>./nginx -s stop</code>\uFF0C\u6B64\u65B9\u5F0F\u76F8\u5F53\u4E8E\u5148\u67E5\u51FA nginx \u8FDB\u7A0B id \u518D\u4F7F\u7528 kill \u547D\u4EE4\u5F3A\u5236\u6740\u6389\u8FDB\u7A0B\u3002</p>
<p><strong>\u5355\u7EAF\u91CD\u542F\u547D\u4EE4</strong>\uFF1A\u5148\u505C\u6B62\u518D\u542F\u52A8(\u63A8\u8350)\uFF0C\u5BF9 nginx \u8FDB\u884C\u91CD\u542F\u76F8\u5F53\u4E8E\u5148\u505C\u6B62\u518D\u542F\u52A8\uFF0C\u5373\u5148\u6267\u884C\u505C\u6B62\u547D\u4EE4\u518D\u6267\u884C\u542F\u52A8\u547D\u4EE4\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>./nginx <span class="token parameter variable">-s</span> quit
./nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6</strong>\uFF1A\u5F53 nginx \u7684\u914D\u7F6E\u6587\u4EF6 nginx.conf \u4FEE\u6539\u540E\uFF0C\u8981\u60F3\u8BA9\u914D\u7F6E\u751F\u6548\u9700\u8981\u91CD\u542F nginx\uFF0C\u4F7F\u7528 ./nginx -s reload \u4E0D\u7528\u5148\u505C\u6B62 nginx \u518D\u542F\u52A8 nginx, \u5373\u53EF\u5C06\u914D\u7F6E\u4FE1\u606F\u5728 nginx \u4E2D\u751F\u6548\uFF0C\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>./nginx <span class="token parameter variable">-s</span> reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u6307\u5B9A\u914D\u7F6E\u6587\u4EF6\u542F\u52A8</strong>: /opt/nginx/sbin/nginx -c /opt/nginx/conf/nginx.conf</p>
<p><strong>\u6307\u5B9A\u914D\u7F6E\u6587\u4EF6\u91CD\u542F</strong>: /opt/nginx/sbin/nginx -s reload -c /opt/nginx/conf/nginx.conf</p>
<p><strong>\u6D4B\u8BD5 nginx \u914D\u7F6E\u6587\u4EF6\u662F\u5426\u6B63\u786E</strong>\uFF1A/nginx -t -c /opt/nginx/conf/nginx.conf</p>
<p><strong>\u5F00\u542F\u81EA\u542F\u52A8</strong></p>
<p>1\u3001\u5728/etc/rc.d/rc.local \u4E2D\u6DFB\u52A0 nginx \u542F\u52A8\u547D\u4EE4\u884C\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">vi</span> /etc/rc.d/rc.local
/opt/nginx/sbin/nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2\u3001\u6388\u6743\uFF1A<code v-pre>chmod +x /etc/rc.d/rc.local</code></p>
<p>3\u3001\u91CD\u542F\uFF1A<code v-pre>reboot</code>,\u901A\u8FC7\u547D\u4EE4<code v-pre>ps -ef | grep nginx</code>\u67E5\u770B nginx \u662F\u5426\u5F00\u673A\u81EA\u542F\u52A8\u6210\u529F</p>
<p><strong>\u4E0A\u9762\u8FD9\u79CD\u662F\u6700\u7B80\u5355\u7684 nginx \u5F00\u673A\u81EA\u542F\u52A8\u7684\uFF0C\u63A8\u8350\u5927\u5BB6\u4F7F\u7528</strong>\u3002</p>
<h2 id="\u4E09-docker-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u4E09-docker-\u5B89\u88C5" aria-hidden="true">#</a> \u4E09 Docker \u5B89\u88C5</h2>
<h3 id="_1\u3001\u62C9\u53D6-nginx-\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u62C9\u53D6-nginx-\u955C\u50CF" aria-hidden="true">#</a> 1\u3001\u62C9\u53D6 nginx \u955C\u50CF</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">docker</span> pull nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2\u3001\u542F\u52A8-nginx-\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u542F\u52A8-nginx-\u5BB9\u5668" aria-hidden="true">#</a> 2\u3001\u542F\u52A8 nginx \u5BB9\u5668</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-d</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u81F3\u6B64\u4E00\u4E2A\u7B80\u5355\u7684 nginx \u5BB9\u5668\u5C31\u542F\u52A8\u6210\u529F\u4E86\uFF0C\u4E0B\u9762\u914D\u7F6E\u6302\u8F7D\u76EE\u5F55\u3002</p>
<h3 id="_3\u3001\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55" aria-hidden="true">#</a> 3\u3001\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/nginx
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/nginx/html
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/nginx/conf.d
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/nginx/logs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4\u3001\u590D\u5236\u5BB9\u5668\u4E2D\u6302\u8F7D\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u590D\u5236\u5BB9\u5668\u4E2D\u6302\u8F7D\u6587\u4EF6" aria-hidden="true">#</a> 4\u3001\u590D\u5236\u5BB9\u5668\u4E2D\u6302\u8F7D\u6587\u4EF6</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">cp</span> 67e:/etc/nginx/nginx.conf /opt/nginx/
<span class="token function">docker</span> <span class="token function">cp</span> 67e:/etc/nginx/conf.d /opt/nginx/conf.d/
<span class="token function">docker</span> <span class="token function">cp</span> 67e:/usr/share/nginx/html/ /opt/nginx/html/
<span class="token function">docker</span> <span class="token function">cp</span> 67e:/var/log/nginx/ /opt/nginx/logs/
\u6CE8\uFF1Adocker <span class="token function">cp</span> 67e \u4E2D\u7684 <span class="token string">"67e"</span> \u4E3A\u5BB9\u5668ID\u524D\u7F00\uFF0C\u53EA\u8981\u552F\u4E00\u5C31\u597D\u4E86
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5\u3001\u5220\u9664\u65E7\u7684-nginx-\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u5220\u9664\u65E7\u7684-nginx-\u5BB9\u5668" aria-hidden="true">#</a> 5\u3001\u5220\u9664\u65E7\u7684 nginx \u5BB9\u5668</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u505C\u6B62\u5BB9\u5668</span>
<span class="token function">docker</span> stop 67e
<span class="token comment"># \u79FB\u9664\u5BB9\u5668</span>
<span class="token function">docker</span> <span class="token function">rm</span> 67e
<span class="token comment">#\u6216\u8005\u5F3A\u5236\u5220\u9664\u5BB9\u5668</span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> 67e
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6\u3001\u521B\u5EFA-nginx-\u6302\u8F7D\u76EE\u5F55\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u521B\u5EFA-nginx-\u6302\u8F7D\u76EE\u5F55\u5BB9\u5668" aria-hidden="true">#</a> 6\u3001\u521B\u5EFA nginx \u6302\u8F7D\u76EE\u5F55\u5BB9\u5668</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-p</span> <span class="token number">443</span>:443 <span class="token parameter variable">-v</span> /opt/nginx/nginx.conf:/etc/nginx/nginx.conf <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /opt/nginx/html:/usr/share/nginx/html <span class="token parameter variable">-v</span> /opt/nginx/logs:/var/log/nginx <span class="token punctuation">\\</span>
<span class="token parameter variable">-v</span> /opt/nginx/conf.d:/etc/nginx/conf.d <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token parameter variable">--restart</span><span class="token operator">=</span>always nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code v-pre>--privileged=true</code>: \u4F7F\u7528\u8BE5\u53C2\u6570\uFF0Ccontainer \u5185\u7684 root \u62E5\u6709\u771F\u6B63\u7684 root \u6743\u9650\u3002\u5426\u5219\uFF0Ccontainer \u5185\u7684 root \u53EA\u662F\u5916\u90E8\u7684\u4E00\u4E2A\u666E\u901A\u7528\u6237\u6743\u9650\u3002privileged \u542F\u52A8\u7684\u5BB9\u5668\uFF0C\u53EF\u4EE5\u770B\u5230\u5F88\u591A host \u4E0A\u7684\u8BBE\u5907\uFF0C\u5E76\u4E14\u53EF\u4EE5\u6267\u884C mount\u3002\u751A\u81F3\u5141\u8BB8\u4F60\u5728 docker \u5BB9\u5668\u4E2D\u542F\u52A8 docker \u5BB9\u5668<br>
<code v-pre>--restart=always</code>: \u5F53 Docker \u91CD\u542F\u65F6\uFF0C\u5BB9\u5668\u81EA\u52A8\u542F\u52A8\u3002<br>
\u4FEE\u6539\u8FD0\u884C\u4E2D\u7684\u5BB9\u5668\u81EA\u542F\u52A8\uFF1A<code v-pre>docker container update --restart=always \u5BB9\u5668\u540D\u5B57</code><br>
\u6784\u5EFA\u5BB9\u5668\u81EA\u542F\u52A8\uFF1A\u542F\u52A8\u547D\u4EE4\u989D\u5916\u52A0\u4E0A<code v-pre>--restart=always</code></p>
<h3 id="_7\u3001\u67E5\u770B-nginx-\u5BB9\u5668\u8FD0\u884C\u60C5\u51B5" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u67E5\u770B-nginx-\u5BB9\u5668\u8FD0\u884C\u60C5\u51B5" aria-hidden="true">#</a> 7\u3001\u67E5\u770B nginx \u5BB9\u5668\u8FD0\u884C\u60C5\u51B5</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u547D\u4EE4\u67E5\u770B\u5F53\u524D\u8FD0\u884C\u7684\u5BB9\u5668</span>
<span class="token function">docker</span> <span class="token function">ps</span>
<span class="token comment"># \u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE80\u7AEF\u53E3\uFF0C\u67E5\u770B\u662F\u5426\u663E\u793A\u6B63\u5E38\u9875\u9762</span>
http:ip/

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E0D\u4E86\uFF0C\u5E94\u8BE5\u662F\u9632\u706B\u5899\u7684\u539F\u56E0\u3002\u53EF\u4EE5\u901A\u8FC7\u547D\u4EE4<code v-pre>systemctl stop firewalld</code>\u5173\u95ED\u9632\u706B\u5899\u6216\u8005\u5F00\u901A\u5BF9\u5E94\u7684\u7AEF\u53E3<code v-pre>80</code>\u548C<code v-pre>443</code>\uFF0C\u7AEF\u53E3\u5F00\u901A\u547D\u4EE4\u53C2\u8003\uFF1A<RouterLink to="/posts/others/linux/basecommand.html#_6-centos-%E7%AB%AF%E5%8F%A3%E5%BC%80%E9%80%9A">linux \u5E38\u7528\u6307\u4EE4</RouterLink></p>
<h2 id="\u56DB-nginx-\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#\u56DB-nginx-\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757" aria-hidden="true">#</a> \u56DB nginx \u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757</h2>
<p>\u2003nginx \u6587\u4EF6\u975E\u5E38\u5C0F\u4F46\u662F\u6027\u80FD\u975E\u5E38\u7684\u9AD8\u6548,\u8FD9\u65B9\u9762\u5B8C\u80DC apache,nginx \u6587\u4EF6\u5C0F\u7684\u4E00\u4E2A\u539F\u56E0\u4E4B\u4E00\u662F nginx \u81EA\u5E26\u7684\u529F\u80FD\u76F8\u5BF9\u8F83\u5C11,\u597D\u5728 nginx \u5141\u8BB8\u7B2C\u4E09\u65B9\u6A21\u5757,\u7B2C\u4E09\u65B9\u6A21\u5757\u4F7F\u5F97 nginx \u8D8A\u53D1\u7684\u5F3A\u5927. \u5728\u5B89\u88C5\u6A21\u5757\u65B9\u9762,nginx \u663E\u5F97\u6CA1\u6709 apache \u5B89\u88C5\u6A21\u5757\u65B9\u4FBF\uFF0C\u5F53\u7136\u4E5F\u6CA1\u6709 php \u5B89\u88C5\u6269\u5C55\u65B9\u4FBF.\u5728\u539F\u751F\u7684 nginx,\u4ED6\u4E0D\u53EF\u4EE5\u52A8\u6001\u52A0\u8F7D\u6A21\u5757,\u6240\u4EE5\u5F53\u4F60\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757\u7684\u65F6\u5019\u9700\u8981\u8986\u76D6 nginx \u6587\u4EF6.\u63A5\u4E0B\u6765\u770B\u770B\u5982\u4F55\u5B89\u88C5 nginx \u7B2C\u4E09\u6A21\u5757\u5427\u3002</p>
<p>nginx \u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u65B9\u6CD5\uFF1A<code v-pre>./configure --prefix=/\u4F60\u7684\u5B89\u88C5\u76EE\u5F55 --add-module=/\u7B2C\u4E09\u65B9\u6A21\u5757\u8DEF\u5F84</code>\u3002\u4E0B\u9762\u4EE5<code v-pre>nginx-upsync-module</code>\u7B2C\u4E09\u65B9\u6A21\u5757\u4E3A\u4F8B\u5B50\u3002</p>
<ul>
<li>\u5982\u679C\u7B2C\u4E00\u6B21\u5B89\u88C5 nginx \u5E76\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757\uFF1A</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u8FDB\u5165\u6E90\u7801\u6587\u4EF6\u76EE\u5F55</span>
<span class="token builtin class-name">cd</span> nginx-1.19
<span class="token comment">#\u8FDB\u884C\u9884\u7F16\u8BD1</span>
./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/opt/nginx --with-http_ssl_module   --with-http_flv_module  --with-http_stub_status_module  --with-http_gzip_static_module   --with-http_realip_module    --with-pcre --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/nginx-upsync-module-master
<span class="token comment">#\u7F16\u8BD1</span>
<span class="token function">make</span>
<span class="token comment">#\u5B89\u88C5</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>\u5982\u679C\u5DF2\u7ECF\u5B89\u88C5 nginx \u5E76\u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757\uFF1A</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u5982\u679C\u6CA1\u6709\u5DF2\u5B89\u88C5\u597D\u7684nginx\u6E90\u7801\u76EE\u5F55\uFF0C\u9700\u8981\u4ECEnginx\u5B98\u7F51\u4E0B\u8F7D\u76F8\u540C\u7248\u672C\u7684\u6E90\u7801\uFF0C\u5728\u6E90\u7801\u57FA\u7840\u4E0A\u91CD\u65B0\u5B89\u88C5nginx,\u8FDB\u5165\u6E90\u7801\u6587\u4EF6\u76EE\u5F55</span>
<span class="token builtin class-name">cd</span> nginx-1.19
<span class="token comment">#\u8FDB\u884C\u9884\u7F16\u8BD1</span>
./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/opt/nginx  --with-http_ssl_module    --with-http_ssl_module   --with-http_flv_module  --with-http_stub_status_module  --with-http_gzip_static_module   --with-http_realip_module    --with-pcre --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/nginx-upsync-module-master
<span class="token comment">#\u7F16\u8BD1</span>
<span class="token function">make</span>
<span class="token comment">#\u5C06\u7F16\u8BD1\u597D\u7684\u6587\u4EF6\u8986\u76D6\u539F\u6765\u7684nginx\u6587\u4EF6\uFF0C\u5728nginx\u6E90\u7801\u76EE\u5F55\u4E0B\u7684objs\u6587\u4EF6\u5728</span>
<span class="token function">cp</span> objs/nginx /opt/nginx/sbin/nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u603B\u7ED3,\u5B89\u88C5 nginx \u5B89\u88C5\u7B2C\u4E09\u65B9\u6A21\u5757\u5B9E\u9645\u4E0A\u662F\u4F7F\u7528--add-module \u91CD\u65B0\u5B89\u88C5\u4E00\u6B21 nginx\uFF0C\u4E0D\u8981 make install \u800C\u662F\u76F4\u63A5\u628A\u7F16\u8BD1\u76EE\u5F55\u4E0B objs/nginx \u6587\u4EF6\u76F4\u63A5\u8986\u76D6\u8001\u7684 nginx \u6587\u4EF6\u3002\u5982\u679C\u4F60\u9700\u8981\u5B89\u88C5\u591A\u4E2A nginx \u7B2C\u4E09\u65B9\u6A21\u5757,\u4F60\u53EA\u9700\u8981\u591A\u6307\u5B9A\u51E0\u4E2A\u76F8\u5E94\u7684--add-module \u5373\u53EF\u3002\u6CE8\u610F\uFF1A\u91CD\u65B0\u7F16\u8BD1\u7684\u65F6\u5019\uFF0C\u8BB0\u5F97\u4E00\u5B9A\u8981\u628A\u4EE5\u524D\u7F16\u8BD1\u8FC7\u7684\u6A21\u5757\u4E00\u540C\u52A0\u5230 configure \u53C2\u6570\u91CC\u9762\u3002</p>
<p>nginx \u63D0\u4F9B\u4E86\u975E\u5E38\u591A\u7684\u7B2C\u4E09\u65B9\u6A21\u5757\uFF1A<a href="https://www.nginx.com/resources/wiki/modules/" target="_blank" rel="noopener noreferrer">https://www.nginx.com/resources/wiki/modules/<ExternalLinkIcon/></a></p>
`,date:"2022-02-18",deps:[],links:[{raw:"../../others/linux/basecommand.html#_6-centos-%E7%AB%AF%E5%8F%A3%E5%BC%80%E9%80%9A",relative:"posts/others/linux/basecommand.html",absolute:"/blog-docs/posts/others/linux/basecommand.html"}],pathInferred:"/posts/devops/nginx/install.html",pathLocale:"/",permalink:null,routeMeta:{title:"Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4"},sfcBlocks:[],slug:"install",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/nginx/install.md",filePathRelative:"posts/devops/nginx/install.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/install.html.vue",componentFilePathRelative:"pages/posts/devops/nginx/install.html.vue",componentFileChunkName:"v-00fac020",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/install.html.js",dataFilePathRelative:"pages/posts/devops/nginx/install.html.js",dataFileChunkName:"v-00fac020",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/nginx/install.html",htmlFilePathRelative:"posts/devops/nginx/install.html"},title:"Nginx \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\u4EE5\u53CA\u7B2C\u4E09\u65B9\u6A21\u5757\u5B89\u88C5\u6B65\u9AA4"},["/posts/devops/nginx/install","/posts/devops/nginx/install.md"]],["v-2e2615a9","/posts/devops/nginx/kill.html",{_blog:{data:{key:"v-2e2615a9",path:"/posts/devops/nginx/kill.html",title:"Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5",lang:"zh-CN",frontmatter:{title:"Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5",date:"2022-07-23T18:51:45.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207232148622.jpg",summary:`\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0C\u5F53\u6211\u4EEC\u9700\u8981kill\u6389Nginx\u8FDB\u7A0B\u65F6\uFF0C\u901A\u8FC7\u67E5\u770BNginx\u7AEF\u53E3\u7ED1\u5B9A\u7684\u8FDB\u7A0B\uFF0C\u7136\u540E\u53BB\u6740\u6B7B\u76F8\u5E94\u8FDB\u7A0B\uFF0C\u53D1\u73B0\u4F1A\u6709\u65B0\u7684\u8FDB\u7A0B\u7ED1\u5B9A\uFF0C\u4F7F\u7528kill -9\u6740\u5B8C\u4E86\u5C31\u6709\u65B0\u7684\u8FDB\u7A0B\u51FA\u73B0\uFF0C\u539F\u56E0\u662F\uFF1A nginx\u7684\u8FDB\u7A0B\u5206\u4E3AMaster\u8FDB\u7A0B\u548CWorker\u8FDB\u7A0B\uFF0CWorker\u8FDB\u7A0B\u662FMaster\u6D3E\u751F\u51FA\u6765\u7684\u5B50\u8FDB\u7A0B\uFF0C\u5176\u6570\u91CF\u59CB\u7EC8\u7EF4\u6301\u5728\u4E00\u4E2A\u6570\u91CF\u4E0A\uFF0C\u5F53\u7F3A\u5C11\u4E00\u4E2AWorker\u8FDB\u7A0B\u662F\uFF0CMaster\u5C31\u4F1A\u6D3E\u751F\u4E00\u4E2A\u65B0\u7684\u5B50\u8FDB\u7A0B\u3002\u6240\u4EE5\u4F60\u6740worker\u8FDB\u7A0B\u662F\u6740\u4E0D\u5B8C\u7684\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/kill.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-07-23T18:51:45.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0C\u5F53\u6211\u4EEC\u9700\u8981kill\u6389Nginx\u8FDB\u7A0B\u65F6\uFF0C\u901A\u8FC7\u67E5\u770BNginx\u7AEF\u53E3\u7ED1\u5B9A\u7684\u8FDB\u7A0B\uFF0C\u7136\u540E\u53BB\u6740\u6B7B\u76F8\u5E94\u8FDB\u7A0B\uFF0C\u53D1\u73B0\u4F1A\u6709\u65B0\u7684\u8FDB\u7A0B\u7ED1\u5B9A\uFF0C\u4F7F\u7528kill -9\u6740\u5B8C\u4E86\u5C31\u6709\u65B0\u7684\u8FDB\u7A0B\u51FA\u73B0\uFF0C\u539F\u56E0\u662F\uFF1A nginx\u7684\u8FDB\u7A0B\u5206\u4E3AMaster\u8FDB\u7A0B\u548CWorker\u8FDB\u7A0B\uFF0CWorker\u8FDB\u7A0B\u662FMaster\u6D3E\u751F\u51FA\u6765\u7684\u5B50\u8FDB\u7A0B\uFF0C\u5176\u6570\u91CF\u59CB\u7EC8\u7EF4\u6301\u5728\u4E00\u4E2A\u6570\u91CF\u4E0A\uFF0C\u5F53\u7F3A\u5C11\u4E00\u4E2AWorker\u8FDB\u7A0B\u662F\uFF0CMaster\u5C31\u4F1A\u6D3E\u751F\u4E00\u4E2A\u65B0\u7684\u5B50\u8FDB\u7A0B\u3002\u6240\u4EE5\u4F60\u6740worker\u8FDB\u7A0B\u662F\u6740\u4E0D\u5B8C\u7684\u3002</p>
`,headers:[{level:2,title:"\u65B9\u5F0F\u4E00\uFF1A",slug:"\u65B9\u5F0F\u4E00",children:[]},{level:2,title:"\u65B9\u5F0F\u4E8C\uFF1A",slug:"\u65B9\u5F0F\u4E8C",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/nginx/kill.md",readingTime:{minutes:.84,words:252},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/nginx/kill.html`},key:"v-2e2615a9",path:"/posts/devops/nginx/kill.html",title:"Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5",lang:"zh-CN",frontmatter:{title:"Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5",date:"2022-07-23T18:51:45.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207232148622.jpg",summary:`\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0C\u5F53\u6211\u4EEC\u9700\u8981kill\u6389Nginx\u8FDB\u7A0B\u65F6\uFF0C\u901A\u8FC7\u67E5\u770BNginx\u7AEF\u53E3\u7ED1\u5B9A\u7684\u8FDB\u7A0B\uFF0C\u7136\u540E\u53BB\u6740\u6B7B\u76F8\u5E94\u8FDB\u7A0B\uFF0C\u53D1\u73B0\u4F1A\u6709\u65B0\u7684\u8FDB\u7A0B\u7ED1\u5B9A\uFF0C\u4F7F\u7528kill -9\u6740\u5B8C\u4E86\u5C31\u6709\u65B0\u7684\u8FDB\u7A0B\u51FA\u73B0\uFF0C\u539F\u56E0\u662F\uFF1A nginx\u7684\u8FDB\u7A0B\u5206\u4E3AMaster\u8FDB\u7A0B\u548CWorker\u8FDB\u7A0B\uFF0CWorker\u8FDB\u7A0B\u662FMaster\u6D3E\u751F\u51FA\u6765\u7684\u5B50\u8FDB\u7A0B\uFF0C\u5176\u6570\u91CF\u59CB\u7EC8\u7EF4\u6301\u5728\u4E00\u4E2A\u6570\u91CF\u4E0A\uFF0C\u5F53\u7F3A\u5C11\u4E00\u4E2AWorker\u8FDB\u7A0B\u662F\uFF0CMaster\u5C31\u4F1A\u6D3E\u751F\u4E00\u4E2A\u65B0\u7684\u5B50\u8FDB\u7A0B\u3002\u6240\u4EE5\u4F60\u6740worker\u8FDB\u7A0B\u662F\u6740\u4E0D\u5B8C\u7684\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/kill.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-07-23T18:51:45.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0C\u5F53\u6211\u4EEC\u9700\u8981kill\u6389Nginx\u8FDB\u7A0B\u65F6\uFF0C\u901A\u8FC7\u67E5\u770BNginx\u7AEF\u53E3\u7ED1\u5B9A\u7684\u8FDB\u7A0B\uFF0C\u7136\u540E\u53BB\u6740\u6B7B\u76F8\u5E94\u8FDB\u7A0B\uFF0C\u53D1\u73B0\u4F1A\u6709\u65B0\u7684\u8FDB\u7A0B\u7ED1\u5B9A\uFF0C\u4F7F\u7528kill -9\u6740\u5B8C\u4E86\u5C31\u6709\u65B0\u7684\u8FDB\u7A0B\u51FA\u73B0\uFF0C\u539F\u56E0\u662F\uFF1A nginx\u7684\u8FDB\u7A0B\u5206\u4E3AMaster\u8FDB\u7A0B\u548CWorker\u8FDB\u7A0B\uFF0CWorker\u8FDB\u7A0B\u662FMaster\u6D3E\u751F\u51FA\u6765\u7684\u5B50\u8FDB\u7A0B\uFF0C\u5176\u6570\u91CF\u59CB\u7EC8\u7EF4\u6301\u5728\u4E00\u4E2A\u6570\u91CF\u4E0A\uFF0C\u5F53\u7F3A\u5C11\u4E00\u4E2AWorker\u8FDB\u7A0B\u662F\uFF0CMaster\u5C31\u4F1A\u6D3E\u751F\u4E00\u4E2A\u65B0\u7684\u5B50\u8FDB\u7A0B\u3002\u6240\u4EE5\u4F60\u6740worker\u8FDB\u7A0B\u662F\u6740\u4E0D\u5B8C\u7684\u3002</p>
`,headers:[{level:2,title:"\u65B9\u5F0F\u4E00\uFF1A",slug:"\u65B9\u5F0F\u4E00",children:[]},{level:2,title:"\u65B9\u5F0F\u4E8C\uFF1A",slug:"\u65B9\u5F0F\u4E8C",children:[]}],content:`---
title: Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5
date: 2022-07-23 18:51:45
tag:
  - nginx
category:
  - nginx
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207232148622.jpg
---

&emsp;\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0C\u5F53\u6211\u4EEC\u9700\u8981kill\u6389Nginx\u8FDB\u7A0B\u65F6\uFF0C\u901A\u8FC7\u67E5\u770BNginx\u7AEF\u53E3\u7ED1\u5B9A\u7684\u8FDB\u7A0B\uFF0C\u7136\u540E\u53BB\u6740\u6B7B\u76F8\u5E94\u8FDB\u7A0B\uFF0C\u53D1\u73B0\u4F1A\u6709\u65B0\u7684\u8FDB\u7A0B\u7ED1\u5B9A\uFF0C\u4F7F\u7528kill -9\u6740\u5B8C\u4E86\u5C31\u6709\u65B0\u7684\u8FDB\u7A0B\u51FA\u73B0\uFF0C\u539F\u56E0\u662F\uFF1A nginx\u7684\u8FDB\u7A0B\u5206\u4E3AMaster\u8FDB\u7A0B\u548CWorker\u8FDB\u7A0B\uFF0CWorker\u8FDB\u7A0B\u662FMaster\u6D3E\u751F\u51FA\u6765\u7684\u5B50\u8FDB\u7A0B\uFF0C\u5176\u6570\u91CF\u59CB\u7EC8\u7EF4\u6301\u5728\u4E00\u4E2A\u6570\u91CF\u4E0A\uFF0C\u5F53\u7F3A\u5C11\u4E00\u4E2AWorker\u8FDB\u7A0B\u662F\uFF0CMaster\u5C31\u4F1A\u6D3E\u751F\u4E00\u4E2A\u65B0\u7684\u5B50\u8FDB\u7A0B\u3002\u6240\u4EE5\u4F60\u6740worker\u8FDB\u7A0B\u662F\u6740\u4E0D\u5B8C\u7684\u3002

<!-- more -->

## \u65B9\u5F0F\u4E00\uFF1A

\u76F8\u5173nginx\u8FDB\u884C\u5168\u90E8\u6740\u6389:
\`\`\`js
killall -9 nginx
\`\`\`
## \u65B9\u5F0F\u4E8C\uFF1A

\u67E5\u8BE2\u6240\u6709\u7684nginx\u7684\u8FDB\u7A0B\uFF1Aps -A | grep nginx\uFF0C\u7136\u540E\u5168\u90E8\u6740\u6389
\`\`\`js
[root@VM-0-12-centos /]# ps -A | grep nginx
 105248 ?        00:00:00 nginx
 105249 ?        00:00:00 nginx
 105250 ?        00:00:00 nginx
[root@VM-0-12-centos /]# kill -9 105248 and kill -9 105249 and kill -9 105250 
\`\`\`
`,contentRendered:`<p>\u2003\u65E5\u5E38\u5DE5\u4F5C\u4E2D\uFF0C\u5F53\u6211\u4EEC\u9700\u8981kill\u6389Nginx\u8FDB\u7A0B\u65F6\uFF0C\u901A\u8FC7\u67E5\u770BNginx\u7AEF\u53E3\u7ED1\u5B9A\u7684\u8FDB\u7A0B\uFF0C\u7136\u540E\u53BB\u6740\u6B7B\u76F8\u5E94\u8FDB\u7A0B\uFF0C\u53D1\u73B0\u4F1A\u6709\u65B0\u7684\u8FDB\u7A0B\u7ED1\u5B9A\uFF0C\u4F7F\u7528kill -9\u6740\u5B8C\u4E86\u5C31\u6709\u65B0\u7684\u8FDB\u7A0B\u51FA\u73B0\uFF0C\u539F\u56E0\u662F\uFF1A nginx\u7684\u8FDB\u7A0B\u5206\u4E3AMaster\u8FDB\u7A0B\u548CWorker\u8FDB\u7A0B\uFF0CWorker\u8FDB\u7A0B\u662FMaster\u6D3E\u751F\u51FA\u6765\u7684\u5B50\u8FDB\u7A0B\uFF0C\u5176\u6570\u91CF\u59CB\u7EC8\u7EF4\u6301\u5728\u4E00\u4E2A\u6570\u91CF\u4E0A\uFF0C\u5F53\u7F3A\u5C11\u4E00\u4E2AWorker\u8FDB\u7A0B\u662F\uFF0CMaster\u5C31\u4F1A\u6D3E\u751F\u4E00\u4E2A\u65B0\u7684\u5B50\u8FDB\u7A0B\u3002\u6240\u4EE5\u4F60\u6740worker\u8FDB\u7A0B\u662F\u6740\u4E0D\u5B8C\u7684\u3002</p>
<!-- more -->
<h2 id="\u65B9\u5F0F\u4E00" tabindex="-1"><a class="header-anchor" href="#\u65B9\u5F0F\u4E00" aria-hidden="true">#</a> \u65B9\u5F0F\u4E00\uFF1A</h2>
<p>\u76F8\u5173nginx\u8FDB\u884C\u5168\u90E8\u6740\u6389:</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>killall <span class="token operator">-</span><span class="token number">9</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u65B9\u5F0F\u4E8C" tabindex="-1"><a class="header-anchor" href="#\u65B9\u5F0F\u4E8C" aria-hidden="true">#</a> \u65B9\u5F0F\u4E8C\uFF1A</h2>
<p>\u67E5\u8BE2\u6240\u6709\u7684nginx\u7684\u8FDB\u7A0B\uFF1Aps -A | grep nginx\uFF0C\u7136\u540E\u5168\u90E8\u6740\u6389</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token punctuation">[</span>root@<span class="token constant">VM</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span>centos <span class="token operator">/</span><span class="token punctuation">]</span># ps <span class="token operator">-</span><span class="token constant">A</span> <span class="token operator">|</span> grep nginx
 <span class="token number">105248</span> <span class="token operator">?</span>        <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> nginx
 <span class="token number">105249</span> <span class="token operator">?</span>        <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> nginx
 <span class="token number">105250</span> <span class="token operator">?</span>        <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> nginx
<span class="token punctuation">[</span>root@<span class="token constant">VM</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span>centos <span class="token operator">/</span><span class="token punctuation">]</span># kill <span class="token operator">-</span><span class="token number">9</span> <span class="token number">105248</span> and kill <span class="token operator">-</span><span class="token number">9</span> <span class="token number">105249</span> and kill <span class="token operator">-</span><span class="token number">9</span> <span class="token number">105250</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-07-23",deps:[],links:[],pathInferred:"/posts/devops/nginx/kill.html",pathLocale:"/",permalink:null,routeMeta:{title:"Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5"},sfcBlocks:[],slug:"kill",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/nginx/kill.md",filePathRelative:"posts/devops/nginx/kill.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/kill.html.vue",componentFilePathRelative:"pages/posts/devops/nginx/kill.html.vue",componentFileChunkName:"v-2e2615a9",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/kill.html.js",dataFilePathRelative:"pages/posts/devops/nginx/kill.html.js",dataFileChunkName:"v-2e2615a9",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/nginx/kill.html",htmlFilePathRelative:"posts/devops/nginx/kill.html"},title:"Nginx\u8FDB\u7A0B\u6740\u4E0D\u5B8C\u89E3\u51B3\u65B9\u6CD5"},["/posts/devops/nginx/kill","/posts/devops/nginx/kill.md"]],["v-267068b2","/posts/devops/nginx/location.html",{_blog:{data:{key:"v-267068b2",path:"/posts/devops/nginx/location.html",title:"Nginx location\u5339\u914D\u89C4\u5219",lang:"zh-CN",frontmatter:{title:"Nginx location\u5339\u914D\u89C4\u5219",date:"2022-03-14T11:29:50.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201031629.jpg",summary:`\u2003nginx \u7684 location \u6307\u4EE4\u7684\u4F5C\u7528\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u7684 URI \u6765\u6267\u884C\u4E0D\u540C\u7684\u5E94\u7528\uFF0CURI \u5C31\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u5230\u7684\u7F51\u5740 URL \u8FDB\u884C\u5339\u914D\uFF0C\u5339\u914D\u6210\u529F\u4E86\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u4E00\u4E2A location \u53EF\u4EE5\u7528 prefix string(\u524D\u7F00\u5B57\u7B26\u4E32)\u5B9A\u4E49\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7 regular expression\uFF08\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5B9A\u4E49\uFF09\u3002\u901A\u4FD7\u7684\u8BF4\u4E5F\u5C31\u662F\uFF1A\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4E0D\u540C\u7684\u524D\u7F00\uFF0C\u8868\u8FBE\u4E0D\u540C\u7684\u542B\u4E49\uFF0C\u5BF9\u4E8E\u4E0D\u540C\u7684\u524D\u7F00\u53EF\u4EE5\u5206\u4E3A\u4E24\u5927\u7C7B\uFF1A\u666E\u901A location \u548C\u6B63\u5219 location
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/location.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx location\u5339\u914D\u89C4\u5219"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-03-14T11:29:50.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003nginx \u7684 location \u6307\u4EE4\u7684\u4F5C\u7528\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u7684 URI \u6765\u6267\u884C\u4E0D\u540C\u7684\u5E94\u7528\uFF0CURI \u5C31\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u5230\u7684\u7F51\u5740 URL \u8FDB\u884C\u5339\u914D\uFF0C\u5339\u914D\u6210\u529F\u4E86\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u4E00\u4E2A location \u53EF\u4EE5\u7528 prefix string(\u524D\u7F00\u5B57\u7B26\u4E32)\u5B9A\u4E49\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7 regular expression\uFF08\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5B9A\u4E49\uFF09\u3002\u901A\u4FD7\u7684\u8BF4\u4E5F\u5C31\u662F\uFF1A\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4E0D\u540C\u7684\u524D\u7F00\uFF0C\u8868\u8FBE\u4E0D\u540C\u7684\u542B\u4E49\uFF0C\u5BF9\u4E8E\u4E0D\u540C\u7684\u524D\u7F00\u53EF\u4EE5\u5206\u4E3A\u4E24\u5927\u7C7B\uFF1A\u666E\u901A location \u548C\u6B63\u5219 location</p>
`,headers:[{level:2,title:"location",slug:"location",children:[]},{level:2,title:"location \u5339\u914D\u89C4\u5219\u987A\u5E8F\u56FE",slug:"location-\u5339\u914D\u89C4\u5219\u987A\u5E8F\u56FE",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/nginx/location.md",readingTime:{minutes:2.62,words:787},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/nginx/location.html`},key:"v-267068b2",path:"/posts/devops/nginx/location.html",title:"Nginx location\u5339\u914D\u89C4\u5219",lang:"zh-CN",frontmatter:{title:"Nginx location\u5339\u914D\u89C4\u5219",date:"2022-03-14T11:29:50.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201031629.jpg",summary:`\u2003nginx \u7684 location \u6307\u4EE4\u7684\u4F5C\u7528\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u7684 URI \u6765\u6267\u884C\u4E0D\u540C\u7684\u5E94\u7528\uFF0CURI \u5C31\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u5230\u7684\u7F51\u5740 URL \u8FDB\u884C\u5339\u914D\uFF0C\u5339\u914D\u6210\u529F\u4E86\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u4E00\u4E2A location \u53EF\u4EE5\u7528 prefix string(\u524D\u7F00\u5B57\u7B26\u4E32)\u5B9A\u4E49\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7 regular expression\uFF08\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5B9A\u4E49\uFF09\u3002\u901A\u4FD7\u7684\u8BF4\u4E5F\u5C31\u662F\uFF1A\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4E0D\u540C\u7684\u524D\u7F00\uFF0C\u8868\u8FBE\u4E0D\u540C\u7684\u542B\u4E49\uFF0C\u5BF9\u4E8E\u4E0D\u540C\u7684\u524D\u7F00\u53EF\u4EE5\u5206\u4E3A\u4E24\u5927\u7C7B\uFF1A\u666E\u901A location \u548C\u6B63\u5219 location
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/location.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx location\u5339\u914D\u89C4\u5219"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-03-14T11:29:50.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003nginx \u7684 location \u6307\u4EE4\u7684\u4F5C\u7528\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u7684 URI \u6765\u6267\u884C\u4E0D\u540C\u7684\u5E94\u7528\uFF0CURI \u5C31\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u5230\u7684\u7F51\u5740 URL \u8FDB\u884C\u5339\u914D\uFF0C\u5339\u914D\u6210\u529F\u4E86\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u4E00\u4E2A location \u53EF\u4EE5\u7528 prefix string(\u524D\u7F00\u5B57\u7B26\u4E32)\u5B9A\u4E49\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7 regular expression\uFF08\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5B9A\u4E49\uFF09\u3002\u901A\u4FD7\u7684\u8BF4\u4E5F\u5C31\u662F\uFF1A\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4E0D\u540C\u7684\u524D\u7F00\uFF0C\u8868\u8FBE\u4E0D\u540C\u7684\u542B\u4E49\uFF0C\u5BF9\u4E8E\u4E0D\u540C\u7684\u524D\u7F00\u53EF\u4EE5\u5206\u4E3A\u4E24\u5927\u7C7B\uFF1A\u666E\u901A location \u548C\u6B63\u5219 location</p>
`,headers:[{level:2,title:"location",slug:"location",children:[]},{level:2,title:"location \u5339\u914D\u89C4\u5219\u987A\u5E8F\u56FE",slug:"location-\u5339\u914D\u89C4\u5219\u987A\u5E8F\u56FE",children:[]}],content:`---
title: Nginx location\u5339\u914D\u89C4\u5219
date: 2022-03-14 11:29:50
tag:
  - nginx
category:
  - nginx
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201031629.jpg
---

&emsp;nginx \u7684 location \u6307\u4EE4\u7684\u4F5C\u7528\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u7684 URI \u6765\u6267\u884C\u4E0D\u540C\u7684\u5E94\u7528\uFF0CURI \u5C31\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u5230\u7684\u7F51\u5740 URL \u8FDB\u884C\u5339\u914D\uFF0C\u5339\u914D\u6210\u529F\u4E86\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u4E00\u4E2A location \u53EF\u4EE5\u7528 prefix string(\u524D\u7F00\u5B57\u7B26\u4E32)\u5B9A\u4E49\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7 regular expression\uFF08\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5B9A\u4E49\uFF09\u3002\u901A\u4FD7\u7684\u8BF4\u4E5F\u5C31\u662F\uFF1A\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4E0D\u540C\u7684\u524D\u7F00\uFF0C\u8868\u8FBE\u4E0D\u540C\u7684\u542B\u4E49\uFF0C\u5BF9\u4E8E\u4E0D\u540C\u7684\u524D\u7F00\u53EF\u4EE5\u5206\u4E3A\u4E24\u5927\u7C7B\uFF1A\u666E\u901A location \u548C\u6B63\u5219 location

<!-- more -->

## location

&emsp;\u5BF9\u4E8E\u4E0D\u540C\u7684\u524D\u7F00\u53EF\u4EE5\u5206\u4E3A\u4E24\u5927\u7C7B\uFF1A\u666E\u901A location \u548C\u6B63\u5219 location\u3002\u7B26\u53F7\uFF1A\u201D~\u201D\u8868\u793A uri \u5305\u542B\u6B63\u5219\uFF0C\u5E76\u4E14\u533A\u5206\u5927\u5C0F\u5199\u3002\u7B26\u53F7\uFF1A\u201C~\\*\u201D\u8868\u793A uri \u5305\u542B\u6B63\u5219\uFF0C\u4F46\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u3002Nginx \u670D\u52A1\u5668\u4F1A\u9996\u5148\u4F1A\u68C0\u67E5\u591A\u4E2A location \u4E2D\u662F\u5426\u6709\u666E\u901A\u7684 uri \u5339\u914D\uFF0C\u5982\u679C\u6709\u591A\u4E2A\u5339\u914D\uFF0C\u4F1A\u5148\u8BB0\u4F4F\u5339\u914D\u5EA6\u6700\u9AD8\u7684\u90A3\u4E2A\u3002\u7136\u540E\u518D\u68C0\u67E5\u6B63\u5219\u5339\u914D\uFF0C\u8FD9\u91CC\u5207\u8BB0\u6B63\u5219\u5339\u914D\u662F\u6709\u987A\u5E8F\u7684\uFF0C\u4ECE\u4E0A\u5230\u4E0B\u4F9D\u6B21\u5339\u914D\uFF0C\u4E00\u65E6\u5339\u914D\u6210\u529F\uFF0C\u5219\u7ED3\u675F\u68C0\u67E5\uFF0C\u5E76\u5C31\u4F1A\u4F7F\u7528\u8FD9\u4E2A location \u5757\u5904\u7406\u6B64\u8BF7\u6C42\u3002\u5982\u679C\u6B63\u5219\u5339\u914D\u5168\u90E8\u5931\u8D25\uFF0C\u5C31\u4F1A\u4F7F\u7528\u521A\u624D\u8BB0\u5F55\u666E\u901A uri \u5339\u914D\u5EA6\u6700\u9AD8\u7684\u90A3\u4E2A location \u5757\u5904\u7406\u6B64\u8BF7\u6C42\u3002\u5F53\u666E\u901A\u5339\u914D\u7684\u6700\u957F\u524D\u7F00\u5339\u914D\u6709\u7B26\u53F7\u201C^~\u201D\u7684\u65F6\u5019\uFF0C\u5C31\u4E0D\u4F1A\u5728\u5339\u914D\u6B63\u5219\u3002\u76F4\u63A5\u4F7F\u7528\u5F53\u524D\u5339\u914D\u7684\u8FD9\u4E2A location \u5757\u5904\u7406\u6B64\u8BF7\u6C42\u3002\u4F7F\u7528\u7B26\u53F7\u201C=\u201D\u4FEE\u9970\u7B26\u53EF\u4EE5\u5B9A\u4E49\u4E00\u4E2A\u7CBE\u786E\u5339\u914D\u7684 URI \u548C\u4F4D\u7F6E\uFF0C\u5982\u679C\u627E\u5230\u4E86\u4E00\u4E2A\u7CBE\u786E\u7684\u5339\u914D\uFF0C\u5219\u641C\u7D22\u7EC8\u6B62\uFF0C\u4F8B\u5982\uFF0C\u5982\u679C\u4E00\u4E2A\u201D/\u201D\u8BF7\u6C42\u9891\u7E41\u53D1\u751F\uFF0C\u5B9A\u4E49\u201Clocation =/\u201D\u5C06\u52A0\u5FEB\u8FD9\u4E9B\u8BF7\u6C42\u7684\u5904\u7406\uFF0C\u4E00\u65E6\u7CBE\u786E\u5339\u914D\u53EA\u6709\u5C31\u7ED3\u675F\uFF0C\u8FD9\u6837\u7684 location \u663E\u7136\u4E0D\u80FD\u5305\u542B\u5D4C\u5957 location\u3002

\u8FD9\u91CC\u6211\u4EEC\u8BF4\u4E00\u4E0B location / {} \u548C location =/ {}\u7684\u533A\u522B\uFF1A

\u201Clocation / {}\u201D\u662F\u666E\u901A\u7684\u6700\u5927\u524D\u7F00\u5339\u914D\uFF0C\u4EFB\u4F55\u7684 uri \u80AF\u5B9A\u662F\u4EE5\u201C/\u201D\u5F00\u5934\uFF0C\u6240\u4EE5 location / {} \u53EF\u4EE5\u8BF4\u662F\u9ED8\u8BA4\u5339\u914D\uFF0C\u5F53\u5176\u4ED6\u90FD\u4E0D\u5339\u914D\u4E86\uFF0C\u5219\u5339\u914D\u9ED8\u8BA4\u5339\u914D\u3002  
\u6839\u636E\u4E0A\u8FF0\u5B98\u7F51\u5185\u5BB9\u8FDB\u884C\u603B\u7ED3
a. \u201D=\u201D\u7528\u4E8E\u666E\u901A uri \u524D\uFF0C\u8981\u6C42\u7CBE\u786E\u5339\u914D\uFF0C\u5982\u679C\u5339\u914D\u6210\u529F\uFF0C\u5219\u505C\u6B62\u641C\u7D22\u5E76\u7528\u5F53\u524D location \u5904\u7406\u6B64\u8BF7\u6C42

b. \u201D~\u201D \u8868\u793A uri \u5305\u542B\u6B63\u5219\uFF0C\u5E76\u4E14\u533A\u5206\u5927\u5C0F\u5199

c. \u201C~\\*\u201D\u8868\u793A uri \u5305\u542B\u6B63\u5219\uFF0C\u4F46\u4E0D\u533A\u5206\u5927\u5C0F\u5199

d. \u201D^~\u201D\u8868\u793A\u5728\u666E\u901A uri \u524D\u8981\u6C42 Nginx \u670D\u52A1\u5668\u627E\u5230\u666E\u901A uri \u5339\u914D\u5EA6\u6700\u9AD8\u7684\u90A3\u4E2A location \u540E\uFF0C\u7ACB\u5373\u5904\u7406\u6B64\u8BF7\u6C42\uFF0C\u5E76\u4E0D\u518D\u8FDB\u884C\u6B63\u5219\u5339\u914D\u3002

e. \u201D^~\u201D\u548C\u201C=\u201D\u90FD\u53EF\u4EE5\u963B\u6B62\u7EE7\u7EED\u5339\u914D\u6B63\u5219 location \u4E24\u8005\u7684\u533A\u522B\uFF1A\u201C^~\u201D\u4F9D\u7136\u9075\u5B88\u6700\u5927\u524D\u7F00\u539F\u5219\uFF0C\u7136\u540E\u201C=\u201D\u662F\u9700\u8981\u4E25\u683C\u5339\u914D\u3002

\u6CE8\u610F\uFF1A\u5982\u679C\u662F\u666E\u901A uri \u5339\u914D\uFF0C\u8FD9\u4E2A\u65F6\u5019\u662F\u6CA1\u6709\u987A\u5E8F\u7684\uFF0C\u4F46\u662F\u6B63\u5219\u5339\u914D\u5219\u662F\u6709\u987A\u5E8F\u7684\uFF0C\u662F\u4ECE\u4E0A\u5230\u4E0B\u4F9D\u6B21\u5339\u914D\uFF0C\u4E00\u65E6\u6709\u5339\u914D\u6210\u529F\uFF0C\u5219\u505C\u6B62\u540E\u9762\u7684\u5339\u914D\u3002

## location \u5339\u914D\u89C4\u5219\u987A\u5E8F\u56FE

![](https://cdn.jsdelivr.net/gh/AnyFork/blog-images/markdown/202203141144181.png)

\u6587\u7AE0\u53C2\u8003\u6765\u6E90\uFF1A<https://www.cnblogs.com/zhaof/p/5945576.html>`,contentRendered:`<p>\u2003nginx \u7684 location \u6307\u4EE4\u7684\u4F5C\u7528\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u7684 URI \u6765\u6267\u884C\u4E0D\u540C\u7684\u5E94\u7528\uFF0CURI \u5C31\u662F\u6839\u636E\u7528\u6237\u8BF7\u6C42\u5230\u7684\u7F51\u5740 URL \u8FDB\u884C\u5339\u914D\uFF0C\u5339\u914D\u6210\u529F\u4E86\u8FDB\u884C\u76F8\u5173\u7684\u64CD\u4F5C\u3002\u4E00\u4E2A location \u53EF\u4EE5\u7528 prefix string(\u524D\u7F00\u5B57\u7B26\u4E32)\u5B9A\u4E49\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7 regular expression\uFF08\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5B9A\u4E49\uFF09\u3002\u901A\u4FD7\u7684\u8BF4\u4E5F\u5C31\u662F\uFF1A\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4E0D\u540C\u7684\u524D\u7F00\uFF0C\u8868\u8FBE\u4E0D\u540C\u7684\u542B\u4E49\uFF0C\u5BF9\u4E8E\u4E0D\u540C\u7684\u524D\u7F00\u53EF\u4EE5\u5206\u4E3A\u4E24\u5927\u7C7B\uFF1A\u666E\u901A location \u548C\u6B63\u5219 location</p>
<!-- more -->
<h2 id="location" tabindex="-1"><a class="header-anchor" href="#location" aria-hidden="true">#</a> location</h2>
<p>\u2003\u5BF9\u4E8E\u4E0D\u540C\u7684\u524D\u7F00\u53EF\u4EE5\u5206\u4E3A\u4E24\u5927\u7C7B\uFF1A\u666E\u901A location \u548C\u6B63\u5219 location\u3002\u7B26\u53F7\uFF1A\u201D~\u201D\u8868\u793A uri \u5305\u542B\u6B63\u5219\uFF0C\u5E76\u4E14\u533A\u5206\u5927\u5C0F\u5199\u3002\u7B26\u53F7\uFF1A\u201C~*\u201D\u8868\u793A uri \u5305\u542B\u6B63\u5219\uFF0C\u4F46\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u3002Nginx \u670D\u52A1\u5668\u4F1A\u9996\u5148\u4F1A\u68C0\u67E5\u591A\u4E2A location \u4E2D\u662F\u5426\u6709\u666E\u901A\u7684 uri \u5339\u914D\uFF0C\u5982\u679C\u6709\u591A\u4E2A\u5339\u914D\uFF0C\u4F1A\u5148\u8BB0\u4F4F\u5339\u914D\u5EA6\u6700\u9AD8\u7684\u90A3\u4E2A\u3002\u7136\u540E\u518D\u68C0\u67E5\u6B63\u5219\u5339\u914D\uFF0C\u8FD9\u91CC\u5207\u8BB0\u6B63\u5219\u5339\u914D\u662F\u6709\u987A\u5E8F\u7684\uFF0C\u4ECE\u4E0A\u5230\u4E0B\u4F9D\u6B21\u5339\u914D\uFF0C\u4E00\u65E6\u5339\u914D\u6210\u529F\uFF0C\u5219\u7ED3\u675F\u68C0\u67E5\uFF0C\u5E76\u5C31\u4F1A\u4F7F\u7528\u8FD9\u4E2A location \u5757\u5904\u7406\u6B64\u8BF7\u6C42\u3002\u5982\u679C\u6B63\u5219\u5339\u914D\u5168\u90E8\u5931\u8D25\uFF0C\u5C31\u4F1A\u4F7F\u7528\u521A\u624D\u8BB0\u5F55\u666E\u901A uri \u5339\u914D\u5EA6\u6700\u9AD8\u7684\u90A3\u4E2A location \u5757\u5904\u7406\u6B64\u8BF7\u6C42\u3002\u5F53\u666E\u901A\u5339\u914D\u7684\u6700\u957F\u524D\u7F00\u5339\u914D\u6709\u7B26\u53F7\u201C^~\u201D\u7684\u65F6\u5019\uFF0C\u5C31\u4E0D\u4F1A\u5728\u5339\u914D\u6B63\u5219\u3002\u76F4\u63A5\u4F7F\u7528\u5F53\u524D\u5339\u914D\u7684\u8FD9\u4E2A location \u5757\u5904\u7406\u6B64\u8BF7\u6C42\u3002\u4F7F\u7528\u7B26\u53F7\u201C=\u201D\u4FEE\u9970\u7B26\u53EF\u4EE5\u5B9A\u4E49\u4E00\u4E2A\u7CBE\u786E\u5339\u914D\u7684 URI \u548C\u4F4D\u7F6E\uFF0C\u5982\u679C\u627E\u5230\u4E86\u4E00\u4E2A\u7CBE\u786E\u7684\u5339\u914D\uFF0C\u5219\u641C\u7D22\u7EC8\u6B62\uFF0C\u4F8B\u5982\uFF0C\u5982\u679C\u4E00\u4E2A\u201D/\u201D\u8BF7\u6C42\u9891\u7E41\u53D1\u751F\uFF0C\u5B9A\u4E49\u201Clocation =/\u201D\u5C06\u52A0\u5FEB\u8FD9\u4E9B\u8BF7\u6C42\u7684\u5904\u7406\uFF0C\u4E00\u65E6\u7CBE\u786E\u5339\u914D\u53EA\u6709\u5C31\u7ED3\u675F\uFF0C\u8FD9\u6837\u7684 location \u663E\u7136\u4E0D\u80FD\u5305\u542B\u5D4C\u5957 location\u3002</p>
<p>\u8FD9\u91CC\u6211\u4EEC\u8BF4\u4E00\u4E0B location / {} \u548C location =/ {}\u7684\u533A\u522B\uFF1A</p>
<p>\u201Clocation / {}\u201D\u662F\u666E\u901A\u7684\u6700\u5927\u524D\u7F00\u5339\u914D\uFF0C\u4EFB\u4F55\u7684 uri \u80AF\u5B9A\u662F\u4EE5\u201C/\u201D\u5F00\u5934\uFF0C\u6240\u4EE5 location / {} \u53EF\u4EE5\u8BF4\u662F\u9ED8\u8BA4\u5339\u914D\uFF0C\u5F53\u5176\u4ED6\u90FD\u4E0D\u5339\u914D\u4E86\uFF0C\u5219\u5339\u914D\u9ED8\u8BA4\u5339\u914D\u3002<br>
\u6839\u636E\u4E0A\u8FF0\u5B98\u7F51\u5185\u5BB9\u8FDB\u884C\u603B\u7ED3
a. \u201D=\u201D\u7528\u4E8E\u666E\u901A uri \u524D\uFF0C\u8981\u6C42\u7CBE\u786E\u5339\u914D\uFF0C\u5982\u679C\u5339\u914D\u6210\u529F\uFF0C\u5219\u505C\u6B62\u641C\u7D22\u5E76\u7528\u5F53\u524D location \u5904\u7406\u6B64\u8BF7\u6C42</p>
<p>b. \u201D~\u201D \u8868\u793A uri \u5305\u542B\u6B63\u5219\uFF0C\u5E76\u4E14\u533A\u5206\u5927\u5C0F\u5199</p>
<p>c. \u201C~*\u201D\u8868\u793A uri \u5305\u542B\u6B63\u5219\uFF0C\u4F46\u4E0D\u533A\u5206\u5927\u5C0F\u5199</p>
<p>d. \u201D^~\u201D\u8868\u793A\u5728\u666E\u901A uri \u524D\u8981\u6C42 Nginx \u670D\u52A1\u5668\u627E\u5230\u666E\u901A uri \u5339\u914D\u5EA6\u6700\u9AD8\u7684\u90A3\u4E2A location \u540E\uFF0C\u7ACB\u5373\u5904\u7406\u6B64\u8BF7\u6C42\uFF0C\u5E76\u4E0D\u518D\u8FDB\u884C\u6B63\u5219\u5339\u914D\u3002</p>
<p>e. \u201D^~\u201D\u548C\u201C=\u201D\u90FD\u53EF\u4EE5\u963B\u6B62\u7EE7\u7EED\u5339\u914D\u6B63\u5219 location \u4E24\u8005\u7684\u533A\u522B\uFF1A\u201C^~\u201D\u4F9D\u7136\u9075\u5B88\u6700\u5927\u524D\u7F00\u539F\u5219\uFF0C\u7136\u540E\u201C=\u201D\u662F\u9700\u8981\u4E25\u683C\u5339\u914D\u3002</p>
<p>\u6CE8\u610F\uFF1A\u5982\u679C\u662F\u666E\u901A uri \u5339\u914D\uFF0C\u8FD9\u4E2A\u65F6\u5019\u662F\u6CA1\u6709\u987A\u5E8F\u7684\uFF0C\u4F46\u662F\u6B63\u5219\u5339\u914D\u5219\u662F\u6709\u987A\u5E8F\u7684\uFF0C\u662F\u4ECE\u4E0A\u5230\u4E0B\u4F9D\u6B21\u5339\u914D\uFF0C\u4E00\u65E6\u6709\u5339\u914D\u6210\u529F\uFF0C\u5219\u505C\u6B62\u540E\u9762\u7684\u5339\u914D\u3002</p>
<h2 id="location-\u5339\u914D\u89C4\u5219\u987A\u5E8F\u56FE" tabindex="-1"><a class="header-anchor" href="#location-\u5339\u914D\u89C4\u5219\u987A\u5E8F\u56FE" aria-hidden="true">#</a> location \u5339\u914D\u89C4\u5219\u987A\u5E8F\u56FE</h2>
<p><img src="https://cdn.jsdelivr.net/gh/AnyFork/blog-images/markdown/202203141144181.png" alt=""></p>
<p>\u6587\u7AE0\u53C2\u8003\u6765\u6E90\uFF1A<a href="https://www.cnblogs.com/zhaof/p/5945576.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zhaof/p/5945576.html<ExternalLinkIcon/></a></p>
`,date:"2022-03-14",deps:[],links:[],pathInferred:"/posts/devops/nginx/location.html",pathLocale:"/",permalink:null,routeMeta:{title:"Nginx location\u5339\u914D\u89C4\u5219"},sfcBlocks:[],slug:"location",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/nginx/location.md",filePathRelative:"posts/devops/nginx/location.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/location.html.vue",componentFilePathRelative:"pages/posts/devops/nginx/location.html.vue",componentFileChunkName:"v-267068b2",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/location.html.js",dataFilePathRelative:"pages/posts/devops/nginx/location.html.js",dataFileChunkName:"v-267068b2",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/nginx/location.html",htmlFilePathRelative:"posts/devops/nginx/location.html"},title:"Nginx location\u5339\u914D\u89C4\u5219"},["/posts/devops/nginx/location","/posts/devops/nginx/location.md"]],["v-147a0632","/posts/devops/nginx/log.html",{_blog:{data:{key:"v-147a0632",path:"/posts/devops/nginx/log.html",title:"Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3",lang:"zh-CN",frontmatter:{title:"Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3",date:"2022-03-14T12:02:50.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201036989.jpg",summary:`\u2003Nginx \u65E5\u5FD7\u5BF9\u4E8E\u7EDF\u8BA1\u3001\u7CFB\u7EDF\u670D\u52A1\u6392\u9519\u5F88\u6709\u7528\u3002Nginx \u65E5\u5FD7\u4E3B\u8981\u5206\u4E3A\u4E24\u79CD\uFF1Aaccess_log(\u8BBF\u95EE\u65E5\u5FD7)\u548C error_log(\u9519\u8BEF\u65E5\u5FD7)\u3002\u901A\u8FC7\u8BBF\u95EE\u65E5\u5FD7\u6211\u4EEC\u53EF\u4EE5\u5F97\u5230\u7528\u6237\u7684 IP \u5730\u5740\u3001\u6D4F\u89C8\u5668\u7684\u4FE1\u606F\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u65F6\u95F4\u7B49\u4FE1\u606F\u3002\u9519\u8BEF\u65E5\u5FD7\u8BB0\u5F55\u4E86\u8BBF\u95EE\u51FA\u9519\u7684\u4FE1\u606F\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5B9A\u4F4D\u9519\u8BEF\u7684\u539F\u56E0\u3002\u672C\u6587\u5C06\u8BE6\u7EC6\u63CF\u8FF0\u4E00\u4E0B\u5982\u4F55\u914D\u7F6E Nginx \u65E5\u5FD7\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/log.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-03-14T12:02:50.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nginx \u65E5\u5FD7\u5BF9\u4E8E\u7EDF\u8BA1\u3001\u7CFB\u7EDF\u670D\u52A1\u6392\u9519\u5F88\u6709\u7528\u3002Nginx \u65E5\u5FD7\u4E3B\u8981\u5206\u4E3A\u4E24\u79CD\uFF1Aaccess_log(\u8BBF\u95EE\u65E5\u5FD7)\u548C error_log(\u9519\u8BEF\u65E5\u5FD7)\u3002\u901A\u8FC7\u8BBF\u95EE\u65E5\u5FD7\u6211\u4EEC\u53EF\u4EE5\u5F97\u5230\u7528\u6237\u7684 IP \u5730\u5740\u3001\u6D4F\u89C8\u5668\u7684\u4FE1\u606F\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u65F6\u95F4\u7B49\u4FE1\u606F\u3002\u9519\u8BEF\u65E5\u5FD7\u8BB0\u5F55\u4E86\u8BBF\u95EE\u51FA\u9519\u7684\u4FE1\u606F\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5B9A\u4F4D\u9519\u8BEF\u7684\u539F\u56E0\u3002\u672C\u6587\u5C06\u8BE6\u7EC6\u63CF\u8FF0\u4E00\u4E0B\u5982\u4F55\u914D\u7F6E Nginx \u65E5\u5FD7\u3002</p>
`,headers:[{level:2,title:"\u8BBE\u7F6E access_log",slug:"\u8BBE\u7F6E-access-log",children:[{level:3,title:"\u4F7F\u7528 log_format \u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F",slug:"\u4F7F\u7528-log-format-\u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F",children:[]}]},{level:2,title:"\u8BBE\u7F6E error_log",slug:"\u8BBE\u7F6E-error-log",children:[]},{level:2,title:"open_log_file_cache",slug:"open-log-file-cache",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/nginx/log.md",readingTime:{minutes:4.41,words:1322},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/nginx/log.html`},key:"v-147a0632",path:"/posts/devops/nginx/log.html",title:"Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3",lang:"zh-CN",frontmatter:{title:"Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3",date:"2022-03-14T12:02:50.000Z",tag:["nginx"],category:["nginx","\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201036989.jpg",summary:`\u2003Nginx \u65E5\u5FD7\u5BF9\u4E8E\u7EDF\u8BA1\u3001\u7CFB\u7EDF\u670D\u52A1\u6392\u9519\u5F88\u6709\u7528\u3002Nginx \u65E5\u5FD7\u4E3B\u8981\u5206\u4E3A\u4E24\u79CD\uFF1Aaccess_log(\u8BBF\u95EE\u65E5\u5FD7)\u548C error_log(\u9519\u8BEF\u65E5\u5FD7)\u3002\u901A\u8FC7\u8BBF\u95EE\u65E5\u5FD7\u6211\u4EEC\u53EF\u4EE5\u5F97\u5230\u7528\u6237\u7684 IP \u5730\u5740\u3001\u6D4F\u89C8\u5668\u7684\u4FE1\u606F\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u65F6\u95F4\u7B49\u4FE1\u606F\u3002\u9519\u8BEF\u65E5\u5FD7\u8BB0\u5F55\u4E86\u8BBF\u95EE\u51FA\u9519\u7684\u4FE1\u606F\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5B9A\u4F4D\u9519\u8BEF\u7684\u539F\u56E0\u3002\u672C\u6587\u5C06\u8BE6\u7EC6\u63CF\u8FF0\u4E00\u4E0B\u5982\u4F55\u914D\u7F6E Nginx \u65E5\u5FD7\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/nginx/log.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"nginx"}],["meta",{property:"article:published_time",content:"2022-03-14T12:02:50.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Nginx \u65E5\u5FD7\u5BF9\u4E8E\u7EDF\u8BA1\u3001\u7CFB\u7EDF\u670D\u52A1\u6392\u9519\u5F88\u6709\u7528\u3002Nginx \u65E5\u5FD7\u4E3B\u8981\u5206\u4E3A\u4E24\u79CD\uFF1Aaccess_log(\u8BBF\u95EE\u65E5\u5FD7)\u548C error_log(\u9519\u8BEF\u65E5\u5FD7)\u3002\u901A\u8FC7\u8BBF\u95EE\u65E5\u5FD7\u6211\u4EEC\u53EF\u4EE5\u5F97\u5230\u7528\u6237\u7684 IP \u5730\u5740\u3001\u6D4F\u89C8\u5668\u7684\u4FE1\u606F\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u65F6\u95F4\u7B49\u4FE1\u606F\u3002\u9519\u8BEF\u65E5\u5FD7\u8BB0\u5F55\u4E86\u8BBF\u95EE\u51FA\u9519\u7684\u4FE1\u606F\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5B9A\u4F4D\u9519\u8BEF\u7684\u539F\u56E0\u3002\u672C\u6587\u5C06\u8BE6\u7EC6\u63CF\u8FF0\u4E00\u4E0B\u5982\u4F55\u914D\u7F6E Nginx \u65E5\u5FD7\u3002</p>
`,headers:[{level:2,title:"\u8BBE\u7F6E access_log",slug:"\u8BBE\u7F6E-access-log",children:[{level:3,title:"\u4F7F\u7528 log_format \u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F",slug:"\u4F7F\u7528-log-format-\u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F",children:[]}]},{level:2,title:"\u8BBE\u7F6E error_log",slug:"\u8BBE\u7F6E-error-log",children:[]},{level:2,title:"open_log_file_cache",slug:"open-log-file-cache",children:[]}],content:`---
title: Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3
date: 2022-03-14 12:02:50
tag:
  - nginx
category:
  - nginx
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202207201036989.jpg
---

&emsp;Nginx \u65E5\u5FD7\u5BF9\u4E8E\u7EDF\u8BA1\u3001\u7CFB\u7EDF\u670D\u52A1\u6392\u9519\u5F88\u6709\u7528\u3002Nginx \u65E5\u5FD7\u4E3B\u8981\u5206\u4E3A\u4E24\u79CD\uFF1Aaccess_log(\u8BBF\u95EE\u65E5\u5FD7)\u548C error_log(\u9519\u8BEF\u65E5\u5FD7)\u3002\u901A\u8FC7\u8BBF\u95EE\u65E5\u5FD7\u6211\u4EEC\u53EF\u4EE5\u5F97\u5230\u7528\u6237\u7684 IP \u5730\u5740\u3001\u6D4F\u89C8\u5668\u7684\u4FE1\u606F\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u65F6\u95F4\u7B49\u4FE1\u606F\u3002\u9519\u8BEF\u65E5\u5FD7\u8BB0\u5F55\u4E86\u8BBF\u95EE\u51FA\u9519\u7684\u4FE1\u606F\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5B9A\u4F4D\u9519\u8BEF\u7684\u539F\u56E0\u3002\u672C\u6587\u5C06\u8BE6\u7EC6\u63CF\u8FF0\u4E00\u4E0B\u5982\u4F55\u914D\u7F6E Nginx \u65E5\u5FD7\u3002

<!-- more -->

## \u8BBE\u7F6E access_log

&emsp;\u8BBF\u95EE\u65E5\u5FD7\u4E3B\u8981\u8BB0\u5F55\u5BA2\u6237\u7AEF\u7684\u8BF7\u6C42\u3002\u5BA2\u6237\u7AEF\u5411 Nginx \u670D\u52A1\u5668\u53D1\u8D77\u7684\u6BCF\u4E00\u6B21\u8BF7\u6C42\u90FD\u8BB0\u5F55\u5728\u8FD9\u91CC\u3002\u5BA2\u6237\u7AEF IP\uFF0C\u6D4F\u89C8\u5668\u4FE1\u606F\uFF0Creferer\uFF0C\u8BF7\u6C42\u5904\u7406\u65F6\u95F4\uFF0C\u8BF7\u6C42 URL \u7B49\u90FD\u53EF\u4EE5\u5728\u8BBF\u95EE\u65E5\u5FD7\u4E2D\u5F97\u5230\u3002\u5F53\u7136\u5177\u4F53\u8981\u8BB0\u5F55\u54EA\u4E9B\u4FE1\u606F\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 log_format \u6307\u4EE4\u5B9A\u4E49\u3002

\u8BED\u6CD5\u5982\u4E0B\uFF1A

\`\`\`bash
# \u8BBE\u7F6E\u8BBF\u95EE\u65E5\u5FD7
access_log path [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]];
# \u5173\u95ED\u8BBF\u95EE\u65E5\u5FD7
access_log off;
\`\`\`

- path \u6307\u5B9A\u65E5\u5FD7\u7684\u5B58\u653E\u4F4D\u7F6E\u3002
- format \u6307\u5B9A\u65E5\u5FD7\u7684\u683C\u5F0F\u3002\u9ED8\u8BA4\u4F7F\u7528\u9884\u5B9A\u4E49\u7684 combined\u3002
- buffer \u7528\u6765\u6307\u5B9A\u65E5\u5FD7\u5199\u5165\u65F6\u7684\u7F13\u5B58\u5927\u5C0F\u3002\u9ED8\u8BA4\u662F 64k\u3002
- gzip \u65E5\u5FD7\u5199\u5165\u524D\u5148\u8FDB\u884C\u538B\u7F29\u3002\u538B\u7F29\u7387\u53EF\u4EE5\u6307\u5B9A\uFF0C\u4ECE 1 \u5230 9 \u6570\u503C\u8D8A\u5927\u538B\u7F29\u6BD4\u8D8A\u9AD8\uFF0C\u540C\u65F6\u538B\u7F29\u7684\u901F\u5EA6\u4E5F\u8D8A\u6162\u3002\u9ED8\u8BA4\u662F 1\u3002
- flush \u8BBE\u7F6E\u7F13\u5B58\u7684\u6709\u6548\u65F6\u95F4\u3002\u5982\u679C\u8D85\u8FC7 flush \u6307\u5B9A\u7684\u65F6\u95F4\uFF0C\u7F13\u5B58\u4E2D\u7684\u5185\u5BB9\u5C06\u88AB\u6E05\u7A7A\u3002
- if \u6761\u4EF6\u5224\u65AD\u3002\u5982\u679C\u6307\u5B9A\u7684\u6761\u4EF6\u8BA1\u7B97\u4E3A 0 \u6216\u7A7A\u5B57\u7B26\u4E32\uFF0C\u90A3\u4E48\u8BE5\u8BF7\u6C42\u4E0D\u4F1A\u5199\u5165\u65E5\u5FD7\u3002

\u53E6\u5916\uFF0C\u8FD8\u6709\u4E00\u4E2A\u7279\u6B8A\u7684\u503C off\u3002\u5982\u679C\u6307\u5B9A\u4E86\u8BE5\u503C\uFF0C\u5F53\u524D\u4F5C\u7528\u57DF\u4E0B\u7684\u6240\u6709\u7684\u8BF7\u6C42\u65E5\u5FD7\u90FD\u88AB\u5173\u95ED\u3002  
\u4F5C\u7528\u57DF\uFF1A\u53EF\u4EE5\u5E94\u7528 access_log \u6307\u4EE4\u7684\u4F5C\u7528\u57DF\u5206\u522B\u6709 http\uFF0Cserver\uFF0Clocation\uFF0Climit_except\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5728\u8FD9\u51E0\u4E2A\u4F5C\u7528\u57DF\u5916\u4F7F\u7528\u8BE5\u6307\u4EE4\uFF0CNginx \u4F1A\u62A5\u9519\u3002  
\u57FA\u672C\u7528\u6CD5\uFF1A

\`\`\`bash
#\u8BE5\u4F8B\u5B50\u6307\u5B9A\u65E5\u5FD7\u7684\u5199\u5165\u8DEF\u5F84\u4E3A/var/logs/nginx-access.log\uFF0C\u65E5\u5FD7\u683C\u5F0F\u4F7F\u7528\u9ED8\u8BA4\u7684combined\u3002
access_log /var/logs/nginx-access.log
#\u6216
#\u8BE5\u4F8B\u5B50\u6307\u5B9A\u65E5\u5FD7\u7684\u5199\u5165\u8DEF\u5F84\u4E3A/var/logs/nginx-access.log\uFF0C\u65E5\u5FD7\u683C\u5F0F\u4F7F\u7528\u9ED8\u8BA4\u7684combined\uFF0C\u6307\u5B9A\u65E5\u5FD7\u7684\u7F13\u5B58\u5927\u5C0F\u4E3A32k\uFF0C\u65E5\u5FD7\u5199\u5165\u524D\u542F\u7528gzip\u8FDB\u884C\u538B\u7F29\uFF0C\u538B\u7F29\u6BD4\u4F7F\u7528\u9ED8\u8BA4\u503C1\uFF0C\u7F13\u5B58\u6570\u636E\u6709\u6548\u65F6\u95F4\u4E3A1\u5206\u949F\u3002
access_log /var/logs/nginx-access.log buffer=32k gzip flush=1m
\`\`\`

### \u4F7F\u7528 log_format \u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F

Nginx \u9884\u5B9A\u4E49\u4E86\u540D\u4E3A combined \u65E5\u5FD7\u683C\u5F0F\uFF0C\u5982\u679C\u6CA1\u6709\u660E\u786E\u6307\u5B9A\u65E5\u5FD7\u683C\u5F0F\u9ED8\u8BA4\u4F7F\u7528\u8BE5\u683C\u5F0F\uFF1A

\`\`\`bash
log_format combined '$remote_addr - $remote_user [$time_local] ''"$request" $status $body_bytes_sent ''"$http_referer" "$http_user_agent"';
\`\`\`

\u5982\u679C\u4E0D\u60F3\u4F7F\u7528 Nginx \u9884\u5B9A\u4E49\u7684\u683C\u5F0F\uFF0C\u53EF\u4EE5\u901A\u8FC7 log_format \u6307\u4EE4\u6765\u81EA\u5B9A\u4E49\uFF1A\`log_format name [escape=default|json] string ...; \`

- name \u683C\u5F0F\u540D\u79F0\u3002\u5728 access_log \u6307\u4EE4\u4E2D\u5F15\u7528\u3002
- escape \u8BBE\u7F6E\u53D8\u91CF\u4E2D\u7684\u5B57\u7B26\u7F16\u7801\u65B9\u5F0F\u662F json \u8FD8\u662F default\uFF0C\u9ED8\u8BA4\u662F default\u3002
- string \u8981\u5B9A\u4E49\u7684\u65E5\u5FD7\u683C\u5F0F\u5185\u5BB9\u3002\u8BE5\u53C2\u6570\u53EF\u4EE5\u6709\u591A\u4E2A\u3002\u53C2\u6570\u4E2D\u53EF\u4EE5\u4F7F\u7528 Nginx \u53D8\u91CF\u3002

\u4E0B\u9762\u6F14\u793A\u4E00\u4E0B\u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F\u7684\u4F7F\u7528:

\`\`\`bash
access_log /var/logs/nginx-access.log main
log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                  '$status $body_bytes_sent "$http_referer" '
                  '"$http_user_agent" "$http_x_forwarded_for"';

\`\`\`

## \u8BBE\u7F6E error_log

\u9519\u8BEF\u65E5\u5FD7\u5728 Nginx \u4E2D\u662F\u901A\u8FC7 error_log \u6307\u4EE4\u5B9E\u73B0\u7684\u3002\u8BE5\u6307\u4EE4\u8BB0\u5F55\u670D\u52A1\u5668\u548C\u8BF7\u6C42\u5904\u7406\u8FC7\u7A0B\u4E2D\u7684\u9519\u8BEF\u4FE1\u606F\u3002\u914D\u7F6E\u9519\u8BEF\u65E5\u5FD7\u6587\u4EF6\u7684\u8DEF\u5F84\u548C\u65E5\u5FD7\u7EA7\u522B\uFF1A

\`\`\`bash
error_log file [level];
Default:
error_log logs/error.log error;
\`\`\`

\u7B2C\u4E00\u4E2A\u53C2\u6570\u6307\u5B9A\u65E5\u5FD7\u7684\u5199\u5165\u4F4D\u7F6E\u3002

\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6307\u5B9A\u65E5\u5FD7\u7684\u7EA7\u522B\u3002level \u53EF\u4EE5\u662F debug, info, notice, warn, error, crit, alert,emerg \u4E2D\u7684\u4EFB\u610F\u503C\u3002\u53EF\u4EE5\u770B\u5230\u5176\u53D6\u503C\u8303\u56F4\u662F\u6309\u7D27\u6025\u7A0B\u5EA6\u4ECE\u4F4E\u5230\u9AD8\u6392\u5217\u7684\u3002\u53EA\u6709\u65E5\u5FD7\u7684\u9519\u8BEF\u7EA7\u522B\u7B49\u4E8E\u6216\u9AD8\u4E8E level \u6307\u5B9A\u7684\u503C\u624D\u4F1A\u5199\u5165\u9519\u8BEF\u65E5\u5FD7\u4E2D\u3002\u9ED8\u8BA4\u503C\u662F error\u3002

\u57FA\u672C\u7528\u6CD5\uFF1A\`error_log /var/logs/nginx/nginx-error.log\`\u3002\u5B83\u53EF\u4EE5\u914D\u7F6E\u5728\uFF1Amain\uFF0C http, mail, stream, server, location \u4F5C\u7528\u57DF\u3002\u4F8B\u5B50\u4E2D\u6307\u5B9A\u4E86\u9519\u8BEF\u65E5\u5FD7\u7684\u8DEF\u5F84\u4E3A\uFF1A/var/logs/nginx/nginx-error.log\uFF0C\u65E5\u5FD7\u7EA7\u522B\u4F7F\u7528\u9ED8\u8BA4\u7684 error

## open_log_file_cache

\u6BCF\u4E00\u6761\u65E5\u5FD7\u8BB0\u5F55\u7684\u5199\u5165\u90FD\u662F\u5148\u6253\u5F00\u6587\u4EF6\u518D\u5199\u5165\u8BB0\u5F55\uFF0C\u7136\u540E\u5173\u95ED\u65E5\u5FD7\u6587\u4EF6\u3002\u5982\u679C\u4F60\u7684\u65E5\u5FD7\u6587\u4EF6\u8DEF\u5F84\u4E2D\u4F7F\u7528\u4E86\u53D8\u91CF\uFF0C\u5982 access_log /var/logs/$host/nginx-access.log\uFF0C\u4E3A\u63D0\u9AD8\u6027\u80FD\uFF0C\u53EF\u4EE5\u4F7F\u7528 open_log_file_cache \u6307\u4EE4\u8BBE\u7F6E\u65E5\u5FD7\u6587\u4EF6\u63CF\u8FF0\u7B26\u7684\u7F13\u5B58\u3002
\u8BED\u6CD5\uFF1A\`open_log_file_cache max=N [inactive=time] [min_uses=N] [valid=time];\`

- max \u8BBE\u7F6E\u7F13\u5B58\u4E2D\u6700\u591A\u5BB9\u7EB3\u7684\u6587\u4EF6\u63CF\u8FF0\u7B26\u6570\u91CF\uFF0C\u5982\u679C\u88AB\u5360\u6EE1\uFF0C\u91C7\u7528 LRU \u7B97\u6CD5\u5C06\u63CF\u8FF0\u7B26\u5173\u95ED\u3002
- inactive \u8BBE\u7F6E\u7F13\u5B58\u5B58\u6D3B\u65F6\u95F4\uFF0C\u9ED8\u8BA4\u662F 10s\u3002
- min_uses \u5728 inactive \u65F6\u95F4\u6BB5\u5185\uFF0C\u65E5\u5FD7\u6587\u4EF6\u6700\u5C11\u4F7F\u7528\u51E0\u6B21\uFF0C\u8BE5\u65E5\u5FD7\u6587\u4EF6\u63CF\u8FF0\u7B26\u8BB0\u5165\u7F13\u5B58\uFF0C\u9ED8\u8BA4\u662F 1 \u6B21\u3002
- valid\uFF1A\u8BBE\u7F6E\u591A\u4E45\u5BF9\u65E5\u5FD7\u6587\u4EF6\u540D\u8FDB\u884C\u68C0\u67E5\uFF0C\u770B\u662F\u5426\u53D1\u751F\u53D8\u5316\uFF0C\u9ED8\u8BA4\u662F 60s\u3002
- off\uFF1A\u4E0D\u4F7F\u7528\u7F13\u5B58\u3002\u9ED8\u8BA4\u4E3A off\u3002

\u57FA\u672C\u7528\u6CD5\uFF1A\`open_log_file_cache max=1000 inactive=20s valid=1m min_uses=2;\`\u3002\u5B83\u53EF\u4EE5\u914D\u7F6E\u5728 http\u3001server\u3001location \u4F5C\u7528\u57DF\u4E2D\u3002\u4F8B\u5B50\u4E2D\uFF0C\u8BBE\u7F6E\u7F13\u5B58\u6700\u591A\u7F13\u5B58 1000 \u4E2A\u65E5\u5FD7\u6587\u4EF6\u63CF\u8FF0\u7B26\uFF0C20s \u5185\u5982\u679C\u7F13\u5B58\u4E2D\u7684\u65E5\u5FD7\u6587\u4EF6\u63CF\u8FF0\u7B26\u81F3\u5C11\u88AB\u88AB\u8BBF\u95EE 2 \u6B21\uFF0C\u624D\u4E0D\u4F1A\u88AB\u7F13\u5B58\u5173\u95ED\u3002\u6BCF\u9694 1 \u5206\u949F\u68C0\u67E5\u7F13\u5B58\u4E2D\u7684\u6587\u4EF6\u63CF\u8FF0\u7B26\u7684\u6587\u4EF6\u540D\u662F\u5426\u8FD8\u5B58\u5728\u3002
`,contentRendered:`<p>\u2003Nginx \u65E5\u5FD7\u5BF9\u4E8E\u7EDF\u8BA1\u3001\u7CFB\u7EDF\u670D\u52A1\u6392\u9519\u5F88\u6709\u7528\u3002Nginx \u65E5\u5FD7\u4E3B\u8981\u5206\u4E3A\u4E24\u79CD\uFF1Aaccess_log(\u8BBF\u95EE\u65E5\u5FD7)\u548C error_log(\u9519\u8BEF\u65E5\u5FD7)\u3002\u901A\u8FC7\u8BBF\u95EE\u65E5\u5FD7\u6211\u4EEC\u53EF\u4EE5\u5F97\u5230\u7528\u6237\u7684 IP \u5730\u5740\u3001\u6D4F\u89C8\u5668\u7684\u4FE1\u606F\uFF0C\u8BF7\u6C42\u7684\u5904\u7406\u65F6\u95F4\u7B49\u4FE1\u606F\u3002\u9519\u8BEF\u65E5\u5FD7\u8BB0\u5F55\u4E86\u8BBF\u95EE\u51FA\u9519\u7684\u4FE1\u606F\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5B9A\u4F4D\u9519\u8BEF\u7684\u539F\u56E0\u3002\u672C\u6587\u5C06\u8BE6\u7EC6\u63CF\u8FF0\u4E00\u4E0B\u5982\u4F55\u914D\u7F6E Nginx \u65E5\u5FD7\u3002</p>
<!-- more -->
<h2 id="\u8BBE\u7F6E-access-log" tabindex="-1"><a class="header-anchor" href="#\u8BBE\u7F6E-access-log" aria-hidden="true">#</a> \u8BBE\u7F6E access_log</h2>
<p>\u2003\u8BBF\u95EE\u65E5\u5FD7\u4E3B\u8981\u8BB0\u5F55\u5BA2\u6237\u7AEF\u7684\u8BF7\u6C42\u3002\u5BA2\u6237\u7AEF\u5411 Nginx \u670D\u52A1\u5668\u53D1\u8D77\u7684\u6BCF\u4E00\u6B21\u8BF7\u6C42\u90FD\u8BB0\u5F55\u5728\u8FD9\u91CC\u3002\u5BA2\u6237\u7AEF IP\uFF0C\u6D4F\u89C8\u5668\u4FE1\u606F\uFF0Creferer\uFF0C\u8BF7\u6C42\u5904\u7406\u65F6\u95F4\uFF0C\u8BF7\u6C42 URL \u7B49\u90FD\u53EF\u4EE5\u5728\u8BBF\u95EE\u65E5\u5FD7\u4E2D\u5F97\u5230\u3002\u5F53\u7136\u5177\u4F53\u8981\u8BB0\u5F55\u54EA\u4E9B\u4FE1\u606F\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 log_format \u6307\u4EE4\u5B9A\u4E49\u3002</p>
<p>\u8BED\u6CD5\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u8BBE\u7F6E\u8BBF\u95EE\u65E5\u5FD7</span>
access_log path <span class="token punctuation">[</span>format <span class="token punctuation">[</span>buffer<span class="token operator">=</span>size<span class="token punctuation">]</span> <span class="token punctuation">[</span>gzip<span class="token punctuation">[</span><span class="token operator">=</span>level<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>flush<span class="token operator">=</span>time<span class="token punctuation">]</span> <span class="token punctuation">[</span>if<span class="token operator">=</span>condition<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># \u5173\u95ED\u8BBF\u95EE\u65E5\u5FD7</span>
access_log off<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>path \u6307\u5B9A\u65E5\u5FD7\u7684\u5B58\u653E\u4F4D\u7F6E\u3002</li>
<li>format \u6307\u5B9A\u65E5\u5FD7\u7684\u683C\u5F0F\u3002\u9ED8\u8BA4\u4F7F\u7528\u9884\u5B9A\u4E49\u7684 combined\u3002</li>
<li>buffer \u7528\u6765\u6307\u5B9A\u65E5\u5FD7\u5199\u5165\u65F6\u7684\u7F13\u5B58\u5927\u5C0F\u3002\u9ED8\u8BA4\u662F 64k\u3002</li>
<li>gzip \u65E5\u5FD7\u5199\u5165\u524D\u5148\u8FDB\u884C\u538B\u7F29\u3002\u538B\u7F29\u7387\u53EF\u4EE5\u6307\u5B9A\uFF0C\u4ECE 1 \u5230 9 \u6570\u503C\u8D8A\u5927\u538B\u7F29\u6BD4\u8D8A\u9AD8\uFF0C\u540C\u65F6\u538B\u7F29\u7684\u901F\u5EA6\u4E5F\u8D8A\u6162\u3002\u9ED8\u8BA4\u662F 1\u3002</li>
<li>flush \u8BBE\u7F6E\u7F13\u5B58\u7684\u6709\u6548\u65F6\u95F4\u3002\u5982\u679C\u8D85\u8FC7 flush \u6307\u5B9A\u7684\u65F6\u95F4\uFF0C\u7F13\u5B58\u4E2D\u7684\u5185\u5BB9\u5C06\u88AB\u6E05\u7A7A\u3002</li>
<li>if \u6761\u4EF6\u5224\u65AD\u3002\u5982\u679C\u6307\u5B9A\u7684\u6761\u4EF6\u8BA1\u7B97\u4E3A 0 \u6216\u7A7A\u5B57\u7B26\u4E32\uFF0C\u90A3\u4E48\u8BE5\u8BF7\u6C42\u4E0D\u4F1A\u5199\u5165\u65E5\u5FD7\u3002</li>
</ul>
<p>\u53E6\u5916\uFF0C\u8FD8\u6709\u4E00\u4E2A\u7279\u6B8A\u7684\u503C off\u3002\u5982\u679C\u6307\u5B9A\u4E86\u8BE5\u503C\uFF0C\u5F53\u524D\u4F5C\u7528\u57DF\u4E0B\u7684\u6240\u6709\u7684\u8BF7\u6C42\u65E5\u5FD7\u90FD\u88AB\u5173\u95ED\u3002<br>
\u4F5C\u7528\u57DF\uFF1A\u53EF\u4EE5\u5E94\u7528 access_log \u6307\u4EE4\u7684\u4F5C\u7528\u57DF\u5206\u522B\u6709 http\uFF0Cserver\uFF0Clocation\uFF0Climit_except\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5728\u8FD9\u51E0\u4E2A\u4F5C\u7528\u57DF\u5916\u4F7F\u7528\u8BE5\u6307\u4EE4\uFF0CNginx \u4F1A\u62A5\u9519\u3002<br>
\u57FA\u672C\u7528\u6CD5\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u8BE5\u4F8B\u5B50\u6307\u5B9A\u65E5\u5FD7\u7684\u5199\u5165\u8DEF\u5F84\u4E3A/var/logs/nginx-access.log\uFF0C\u65E5\u5FD7\u683C\u5F0F\u4F7F\u7528\u9ED8\u8BA4\u7684combined\u3002</span>
access_log /var/logs/nginx-access.log
<span class="token comment">#\u6216</span>
<span class="token comment">#\u8BE5\u4F8B\u5B50\u6307\u5B9A\u65E5\u5FD7\u7684\u5199\u5165\u8DEF\u5F84\u4E3A/var/logs/nginx-access.log\uFF0C\u65E5\u5FD7\u683C\u5F0F\u4F7F\u7528\u9ED8\u8BA4\u7684combined\uFF0C\u6307\u5B9A\u65E5\u5FD7\u7684\u7F13\u5B58\u5927\u5C0F\u4E3A32k\uFF0C\u65E5\u5FD7\u5199\u5165\u524D\u542F\u7528gzip\u8FDB\u884C\u538B\u7F29\uFF0C\u538B\u7F29\u6BD4\u4F7F\u7528\u9ED8\u8BA4\u503C1\uFF0C\u7F13\u5B58\u6570\u636E\u6709\u6548\u65F6\u95F4\u4E3A1\u5206\u949F\u3002</span>
access_log /var/logs/nginx-access.log <span class="token assign-left variable">buffer</span><span class="token operator">=</span>32k <span class="token function">gzip</span> <span class="token assign-left variable">flush</span><span class="token operator">=</span>1m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4F7F\u7528-log-format-\u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-log-format-\u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F" aria-hidden="true">#</a> \u4F7F\u7528 log_format \u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F</h3>
<p>Nginx \u9884\u5B9A\u4E49\u4E86\u540D\u4E3A combined \u65E5\u5FD7\u683C\u5F0F\uFF0C\u5982\u679C\u6CA1\u6709\u660E\u786E\u6307\u5B9A\u65E5\u5FD7\u683C\u5F0F\u9ED8\u8BA4\u4F7F\u7528\u8BE5\u683C\u5F0F\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>log_format combined <span class="token string">'$remote_addr - $remote_user [$time_local] '</span>'<span class="token string">"<span class="token variable">$request</span>"</span> <span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> <span class="token string">''</span><span class="token string">"<span class="token variable">$http_referer</span>"</span> <span class="token string">"<span class="token variable">$http_user_agent</span>"</span>'<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u4E0D\u60F3\u4F7F\u7528 Nginx \u9884\u5B9A\u4E49\u7684\u683C\u5F0F\uFF0C\u53EF\u4EE5\u901A\u8FC7 log_format \u6307\u4EE4\u6765\u81EA\u5B9A\u4E49\uFF1A<code v-pre>log_format name [escape=default|json] string ...; </code></p>
<ul>
<li>name \u683C\u5F0F\u540D\u79F0\u3002\u5728 access_log \u6307\u4EE4\u4E2D\u5F15\u7528\u3002</li>
<li>escape \u8BBE\u7F6E\u53D8\u91CF\u4E2D\u7684\u5B57\u7B26\u7F16\u7801\u65B9\u5F0F\u662F json \u8FD8\u662F default\uFF0C\u9ED8\u8BA4\u662F default\u3002</li>
<li>string \u8981\u5B9A\u4E49\u7684\u65E5\u5FD7\u683C\u5F0F\u5185\u5BB9\u3002\u8BE5\u53C2\u6570\u53EF\u4EE5\u6709\u591A\u4E2A\u3002\u53C2\u6570\u4E2D\u53EF\u4EE5\u4F7F\u7528 Nginx \u53D8\u91CF\u3002</li>
</ul>
<p>\u4E0B\u9762\u6F14\u793A\u4E00\u4E0B\u81EA\u5B9A\u4E49\u65E5\u5FD7\u683C\u5F0F\u7684\u4F7F\u7528:</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>access_log /var/logs/nginx-access.log main
log_format  main  <span class="token string">'$remote_addr - $remote_user [$time_local] "$request" '</span>
                  <span class="token string">'$status $body_bytes_sent "$http_referer" '</span>
                  <span class="token string">'"$http_user_agent" "$http_x_forwarded_for"'</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8BBE\u7F6E-error-log" tabindex="-1"><a class="header-anchor" href="#\u8BBE\u7F6E-error-log" aria-hidden="true">#</a> \u8BBE\u7F6E error_log</h2>
<p>\u9519\u8BEF\u65E5\u5FD7\u5728 Nginx \u4E2D\u662F\u901A\u8FC7 error_log \u6307\u4EE4\u5B9E\u73B0\u7684\u3002\u8BE5\u6307\u4EE4\u8BB0\u5F55\u670D\u52A1\u5668\u548C\u8BF7\u6C42\u5904\u7406\u8FC7\u7A0B\u4E2D\u7684\u9519\u8BEF\u4FE1\u606F\u3002\u914D\u7F6E\u9519\u8BEF\u65E5\u5FD7\u6587\u4EF6\u7684\u8DEF\u5F84\u548C\u65E5\u5FD7\u7EA7\u522B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>error_log <span class="token function">file</span> <span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">;</span>
Default:
error_log logs/error.log error<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E00\u4E2A\u53C2\u6570\u6307\u5B9A\u65E5\u5FD7\u7684\u5199\u5165\u4F4D\u7F6E\u3002</p>
<p>\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6307\u5B9A\u65E5\u5FD7\u7684\u7EA7\u522B\u3002level \u53EF\u4EE5\u662F debug, info, notice, warn, error, crit, alert,emerg \u4E2D\u7684\u4EFB\u610F\u503C\u3002\u53EF\u4EE5\u770B\u5230\u5176\u53D6\u503C\u8303\u56F4\u662F\u6309\u7D27\u6025\u7A0B\u5EA6\u4ECE\u4F4E\u5230\u9AD8\u6392\u5217\u7684\u3002\u53EA\u6709\u65E5\u5FD7\u7684\u9519\u8BEF\u7EA7\u522B\u7B49\u4E8E\u6216\u9AD8\u4E8E level \u6307\u5B9A\u7684\u503C\u624D\u4F1A\u5199\u5165\u9519\u8BEF\u65E5\u5FD7\u4E2D\u3002\u9ED8\u8BA4\u503C\u662F error\u3002</p>
<p>\u57FA\u672C\u7528\u6CD5\uFF1A<code v-pre>error_log /var/logs/nginx/nginx-error.log</code>\u3002\u5B83\u53EF\u4EE5\u914D\u7F6E\u5728\uFF1Amain\uFF0C http, mail, stream, server, location \u4F5C\u7528\u57DF\u3002\u4F8B\u5B50\u4E2D\u6307\u5B9A\u4E86\u9519\u8BEF\u65E5\u5FD7\u7684\u8DEF\u5F84\u4E3A\uFF1A/var/logs/nginx/nginx-error.log\uFF0C\u65E5\u5FD7\u7EA7\u522B\u4F7F\u7528\u9ED8\u8BA4\u7684 error</p>
<h2 id="open-log-file-cache" tabindex="-1"><a class="header-anchor" href="#open-log-file-cache" aria-hidden="true">#</a> open_log_file_cache</h2>
<p>\u6BCF\u4E00\u6761\u65E5\u5FD7\u8BB0\u5F55\u7684\u5199\u5165\u90FD\u662F\u5148\u6253\u5F00\u6587\u4EF6\u518D\u5199\u5165\u8BB0\u5F55\uFF0C\u7136\u540E\u5173\u95ED\u65E5\u5FD7\u6587\u4EF6\u3002\u5982\u679C\u4F60\u7684\u65E5\u5FD7\u6587\u4EF6\u8DEF\u5F84\u4E2D\u4F7F\u7528\u4E86\u53D8\u91CF\uFF0C\u5982 access_log /var/logs/$host/nginx-access.log\uFF0C\u4E3A\u63D0\u9AD8\u6027\u80FD\uFF0C\u53EF\u4EE5\u4F7F\u7528 open_log_file_cache \u6307\u4EE4\u8BBE\u7F6E\u65E5\u5FD7\u6587\u4EF6\u63CF\u8FF0\u7B26\u7684\u7F13\u5B58\u3002
\u8BED\u6CD5\uFF1A<code v-pre>open_log_file_cache max=N [inactive=time] [min_uses=N] [valid=time];</code></p>
<ul>
<li>max \u8BBE\u7F6E\u7F13\u5B58\u4E2D\u6700\u591A\u5BB9\u7EB3\u7684\u6587\u4EF6\u63CF\u8FF0\u7B26\u6570\u91CF\uFF0C\u5982\u679C\u88AB\u5360\u6EE1\uFF0C\u91C7\u7528 LRU \u7B97\u6CD5\u5C06\u63CF\u8FF0\u7B26\u5173\u95ED\u3002</li>
<li>inactive \u8BBE\u7F6E\u7F13\u5B58\u5B58\u6D3B\u65F6\u95F4\uFF0C\u9ED8\u8BA4\u662F 10s\u3002</li>
<li>min_uses \u5728 inactive \u65F6\u95F4\u6BB5\u5185\uFF0C\u65E5\u5FD7\u6587\u4EF6\u6700\u5C11\u4F7F\u7528\u51E0\u6B21\uFF0C\u8BE5\u65E5\u5FD7\u6587\u4EF6\u63CF\u8FF0\u7B26\u8BB0\u5165\u7F13\u5B58\uFF0C\u9ED8\u8BA4\u662F 1 \u6B21\u3002</li>
<li>valid\uFF1A\u8BBE\u7F6E\u591A\u4E45\u5BF9\u65E5\u5FD7\u6587\u4EF6\u540D\u8FDB\u884C\u68C0\u67E5\uFF0C\u770B\u662F\u5426\u53D1\u751F\u53D8\u5316\uFF0C\u9ED8\u8BA4\u662F 60s\u3002</li>
<li>off\uFF1A\u4E0D\u4F7F\u7528\u7F13\u5B58\u3002\u9ED8\u8BA4\u4E3A off\u3002</li>
</ul>
<p>\u57FA\u672C\u7528\u6CD5\uFF1A<code v-pre>open_log_file_cache max=1000 inactive=20s valid=1m min_uses=2;</code>\u3002\u5B83\u53EF\u4EE5\u914D\u7F6E\u5728 http\u3001server\u3001location \u4F5C\u7528\u57DF\u4E2D\u3002\u4F8B\u5B50\u4E2D\uFF0C\u8BBE\u7F6E\u7F13\u5B58\u6700\u591A\u7F13\u5B58 1000 \u4E2A\u65E5\u5FD7\u6587\u4EF6\u63CF\u8FF0\u7B26\uFF0C20s \u5185\u5982\u679C\u7F13\u5B58\u4E2D\u7684\u65E5\u5FD7\u6587\u4EF6\u63CF\u8FF0\u7B26\u81F3\u5C11\u88AB\u88AB\u8BBF\u95EE 2 \u6B21\uFF0C\u624D\u4E0D\u4F1A\u88AB\u7F13\u5B58\u5173\u95ED\u3002\u6BCF\u9694 1 \u5206\u949F\u68C0\u67E5\u7F13\u5B58\u4E2D\u7684\u6587\u4EF6\u63CF\u8FF0\u7B26\u7684\u6587\u4EF6\u540D\u662F\u5426\u8FD8\u5B58\u5728\u3002</p>
`,date:"2022-03-14",deps:[],links:[],pathInferred:"/posts/devops/nginx/log.html",pathLocale:"/",permalink:null,routeMeta:{title:"Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3"},sfcBlocks:[],slug:"log",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/nginx/log.md",filePathRelative:"posts/devops/nginx/log.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/log.html.vue",componentFilePathRelative:"pages/posts/devops/nginx/log.html.vue",componentFileChunkName:"v-147a0632",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/nginx/log.html.js",dataFilePathRelative:"pages/posts/devops/nginx/log.html.js",dataFileChunkName:"v-147a0632",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/nginx/log.html",htmlFilePathRelative:"posts/devops/nginx/log.html"},title:"Nginx\u65E5\u5FD7\u914D\u7F6E\u8BE6\u89E3"},["/posts/devops/nginx/log","/posts/devops/nginx/log.md"]],["v-359ac851","/posts/devops/other/frp.html",{_blog:{data:{key:"v-359ac851",path:"/posts/devops/other/frp.html",title:"Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA",lang:"zh-CN",frontmatter:{title:"Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA",description:"\u642D\u5EFA\u4E00\u6B3E\u5C5E\u4E8E\u81EA\u5DF1\u7684\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u5668\u3002",date:"2022-09-11T15:53:03.000Z",sidebar:"auto",tag:["\u5185\u7F51\u7A7F\u900F"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111209061.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/other/frp.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA"}],["meta",{property:"og:description",content:"\u642D\u5EFA\u4E00\u6B3E\u5C5E\u4E8E\u81EA\u5DF1\u7684\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u5668\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5185\u7F51\u7A7F\u900F"}],["meta",{property:"article:published_time",content:"2022-09-11T15:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003frp \u662F\u4E00\u4E2A\u4E13\u6CE8\u4E8E\u5185\u7F51\u7A7F\u900F\u7684\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u652F\u6301 TCP\u3001UDP\u3001HTTP\u3001HTTPS \u7B49\u591A\u79CD\u534F\u8BAE\u3002\u53EF\u4EE5\u5C06\u5185\u7F51\u670D\u52A1\u4EE5\u5B89\u5168\u3001\u4FBF\u6377\u7684\u65B9\u5F0F\u901A\u8FC7\u5177\u6709\u516C\u7F51 IP \u8282\u70B9\u7684\u4E2D\u8F6C\u66B4\u9732\u5230\u516C\u7F51\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001Frp \u7B80\u4ECB",slug:"\u4E00\u3001frp-\u7B80\u4ECB",children:[{level:3,title:"1 Frp \u662F\u4EC0\u4E48\uFF1F",slug:"_1-frp-\u662F\u4EC0\u4E48",children:[]},{level:3,title:"2 \u4E3A\u4EC0\u4E48\u4F7F\u7528 frp\uFF1F",slug:"_2-\u4E3A\u4EC0\u4E48\u4F7F\u7528-frp",children:[]},{level:3,title:"3 \u539F\u7406",slug:"_3-\u539F\u7406",children:[]}]},{level:2,title:"\u4E8C\u3001Frp \u5B89\u88C5",slug:"\u4E8C\u3001frp-\u5B89\u88C5",children:[{level:3,title:"1 \u670D\u52A1\u7AEF frps \u5B89\u88C5",slug:"_1-\u670D\u52A1\u7AEF-frps-\u5B89\u88C5",children:[]},{level:3,title:"2 \u5BA2\u6237\u7AEF frpc \u5B89\u88C5",slug:"_2-\u5BA2\u6237\u7AEF-frpc-\u5B89\u88C5",children:[]}]},{level:2,title:"\u4E09 nginx \u53CD\u5411\u4EE3\u7406\u914D\u7F6E",slug:"\u4E09-nginx-\u53CD\u5411\u4EE3\u7406\u914D\u7F6E",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/other/frp.md",readingTime:{minutes:8.17,words:2452},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/other/frp.html`},key:"v-359ac851",path:"/posts/devops/other/frp.html",title:"Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA",lang:"zh-CN",frontmatter:{title:"Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA",description:"\u642D\u5EFA\u4E00\u6B3E\u5C5E\u4E8E\u81EA\u5DF1\u7684\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u5668\u3002",date:"2022-09-11T15:53:03.000Z",sidebar:"auto",tag:["\u5185\u7F51\u7A7F\u900F"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111209061.jpg",head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/other/frp.html"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA"}],["meta",{property:"og:description",content:"\u642D\u5EFA\u4E00\u6B3E\u5C5E\u4E8E\u81EA\u5DF1\u7684\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u5668\u3002"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"\u5185\u7F51\u7A7F\u900F"}],["meta",{property:"article:published_time",content:"2022-09-11T15:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003frp \u662F\u4E00\u4E2A\u4E13\u6CE8\u4E8E\u5185\u7F51\u7A7F\u900F\u7684\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u652F\u6301 TCP\u3001UDP\u3001HTTP\u3001HTTPS \u7B49\u591A\u79CD\u534F\u8BAE\u3002\u53EF\u4EE5\u5C06\u5185\u7F51\u670D\u52A1\u4EE5\u5B89\u5168\u3001\u4FBF\u6377\u7684\u65B9\u5F0F\u901A\u8FC7\u5177\u6709\u516C\u7F51 IP \u8282\u70B9\u7684\u4E2D\u8F6C\u66B4\u9732\u5230\u516C\u7F51\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001Frp \u7B80\u4ECB",slug:"\u4E00\u3001frp-\u7B80\u4ECB",children:[{level:3,title:"1 Frp \u662F\u4EC0\u4E48\uFF1F",slug:"_1-frp-\u662F\u4EC0\u4E48",children:[]},{level:3,title:"2 \u4E3A\u4EC0\u4E48\u4F7F\u7528 frp\uFF1F",slug:"_2-\u4E3A\u4EC0\u4E48\u4F7F\u7528-frp",children:[]},{level:3,title:"3 \u539F\u7406",slug:"_3-\u539F\u7406",children:[]}]},{level:2,title:"\u4E8C\u3001Frp \u5B89\u88C5",slug:"\u4E8C\u3001frp-\u5B89\u88C5",children:[{level:3,title:"1 \u670D\u52A1\u7AEF frps \u5B89\u88C5",slug:"_1-\u670D\u52A1\u7AEF-frps-\u5B89\u88C5",children:[]},{level:3,title:"2 \u5BA2\u6237\u7AEF frpc \u5B89\u88C5",slug:"_2-\u5BA2\u6237\u7AEF-frpc-\u5B89\u88C5",children:[]}]},{level:2,title:"\u4E09 nginx \u53CD\u5411\u4EE3\u7406\u914D\u7F6E",slug:"\u4E09-nginx-\u53CD\u5411\u4EE3\u7406\u914D\u7F6E",children:[]}],content:`---
title: Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA
description: \u642D\u5EFA\u4E00\u6B3E\u5C5E\u4E8E\u81EA\u5DF1\u7684\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u5668\u3002
date: 2022-9-11 15:53:03
sidebar: 'auto'
tag:
  - \u5185\u7F51\u7A7F\u900F
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111209061.jpg
---

&emsp;frp \u662F\u4E00\u4E2A\u4E13\u6CE8\u4E8E\u5185\u7F51\u7A7F\u900F\u7684\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u652F\u6301 TCP\u3001UDP\u3001HTTP\u3001HTTPS \u7B49\u591A\u79CD\u534F\u8BAE\u3002\u53EF\u4EE5\u5C06\u5185\u7F51\u670D\u52A1\u4EE5\u5B89\u5168\u3001\u4FBF\u6377\u7684\u65B9\u5F0F\u901A\u8FC7\u5177\u6709\u516C\u7F51 IP \u8282\u70B9\u7684\u4E2D\u8F6C\u66B4\u9732\u5230\u516C\u7F51\u3002

<!-- more -->

## \u4E00\u3001Frp \u7B80\u4ECB

&emsp;\`\u5185\u7F51\u7A7F\u900F\`\u5728\u65E5\u5E38\u5DE5\u4F5C\u4E2D\u5E94\u7528\u8FD8\u662F\u6BD4\u8F83\u5E7F\u6CDB\u7684\uFF0C\u53EF\u4EE5\u5C06\u6211\u4EEC\u672C\u5730\u5185\u7F51\u5E94\u7528\u670D\u52A1\u6620\u5C04\u5230\u516C\u7F51\u4E0A\uFF0C\u4F9B\u5176\u4ED6\u4EBA\u8BBF\u95EE\u4F7F\u7528\u3002Frp \u76F8\u5BF9\u5176\u4ED6\`\u5185\u7F51\u7A7F\u900F\`\u5DE5\u5177\u800C\u8A00\uFF0C\u4E0D\u4EC5\u514D\u8D39\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u81EA\u5DF1\u90E8\u7F72\uFF0C\u914D\u7F6E\u7B80\u5355\uFF0C\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u90E8\u7F72\u524D\u63D0\u662F\u9700\u8981\u4E00\u53F0\u5177\u6709\u516C\u7F51 IP \u7684\u4E91\u670D\u52A1\u5668\u3002\u4E0B\u9762\u662F Frp \u5B98\u7F51\u4FE1\u606F\u548C\u8F6F\u4EF6\u4E0B\u8F7D\u5730\u5740\uFF1A
:::tip
1\u3001Frp \u5B98\u7F51\u5730\u5740\uFF1A<https://gofrp.org/><br>
2\u3001Frp Github \u5730\u5740\uFF1A<https://gofrp.org/><br>
3\u3001Frp \u5B89\u88C5\u5305\u4E0B\u8F7D\u5730\u5740\uFF1A<https://github.com/fatedier/frp/releases/><br>
:::

### 1 Frp \u662F\u4EC0\u4E48\uFF1F

&emsp;frp \u662F\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5F00\u6E90\u7684\u5185\u7F51\u7A7F\u900F\u5DE5\u5177\u3002\u4E13\u6CE8\u4E8E\u5185\u7F51\u7A7F\u900F\u7684\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u652F\u6301 TCP\u3001UDP\u3001HTTP\u3001HTTPS \u7B49\u591A\u79CD\u534F\u8BAE\u3002\u53EF\u4EE5\u5C06\u5185\u7F51\u670D\u52A1\u4EE5\u5B89\u5168\u3001\u4FBF\u6377\u7684\u65B9\u5F0F\u901A\u8FC7\u5177\u6709\u516C\u7F51 IP \u8282\u70B9\u7684\u4E2D\u8F6C\u66B4\u9732\u5230\u516C\u7F51\u3002\u91C7\u7528\`go\`\u8BED\u8A00\u8FDB\u884C\u5F00\u53D1\uFF0C\u7531\u5BA2\u6237\u7AEF\`frpc\`\u548C\u670D\u52A1\u7AEF\`frps\`2 \u90E8\u5206\u7EC4\u6210\uFF0C\u914D\u7F6E\u7B80\u5355\uFF0C\u5BB9\u6613\u4E0A\u624B\uFF0C\u91CD\u8981\u7684\u662F\u514D\u8D39\uFF0C\u81EA\u5DF1\u53EF\u4EE5\u8FDB\u884C\u90E8\u7F72\u3002

### 2 \u4E3A\u4EC0\u4E48\u4F7F\u7528 frp\uFF1F

&emsp;\u901A\u8FC7\u5728\u5177\u6709\u516C\u7F51 IP \u7684\u8282\u70B9\u4E0A\u90E8\u7F72 frp \u670D\u52A1\u7AEF\uFF0C\u53EF\u4EE5\u8F7B\u677E\u5730\u5C06\u5185\u7F51\u670D\u52A1\u7A7F\u900F\u5230\u516C\u7F51\uFF0C\u540C\u65F6\u63D0\u4F9B\u8BF8\u591A\u4E13\u4E1A\u7684\u529F\u80FD\u7279\u6027\uFF1A

- \u5BA2\u6237\u7AEF\u670D\u52A1\u7AEF\u901A\u4FE1\u652F\u6301 TCP\u3001KCP \u4EE5\u53CA Websocket \u7B49\u591A\u79CD\u534F\u8BAE\u3002
- \u91C7\u7528 TCP \u8FDE\u63A5\u6D41\u5F0F\u590D\u7528\uFF0C\u5728\u5355\u4E2A\u8FDE\u63A5\u95F4\u627F\u8F7D\u66F4\u591A\u8BF7\u6C42\uFF0C\u8282\u7701\u8FDE\u63A5\u5EFA\u7ACB\u65F6\u95F4\u3002
- \u4EE3\u7406\u7EC4\u95F4\u7684\u8D1F\u8F7D\u5747\u8861\u3002
- \u7AEF\u53E3\u590D\u7528\uFF0C\u591A\u4E2A\u670D\u52A1\u901A\u8FC7\u540C\u4E00\u4E2A\u670D\u52A1\u7AEF\u7AEF\u53E3\u66B4\u9732\u3002
- \u591A\u4E2A\u539F\u751F\u652F\u6301\u7684\u5BA2\u6237\u7AEF\u63D2\u4EF6\uFF08\u9759\u6001\u6587\u4EF6\u67E5\u770B\uFF0CHTTP\u3001SOCK5 \u4EE3\u7406\u7B49\uFF09\uFF0C\u4FBF\u4E8E\u72EC\u7ACB\u4F7F\u7528 frp \u5BA2\u6237\u7AEF\u5B8C\u6210\u67D0\u4E9B\u5DE5\u4F5C\u3002
- \u9AD8\u5EA6\u6269\u5C55\u6027\u7684\u670D\u52A1\u7AEF\u63D2\u4EF6\u7CFB\u7EDF\uFF0C\u65B9\u4FBF\u7ED3\u5408\u81EA\u8EAB\u9700\u6C42\u8FDB\u884C\u529F\u80FD\u6269\u5C55\u3002
- \u670D\u52A1\u7AEF\u548C\u5BA2\u6237\u7AEF UI \u9875\u9762\u3002

### 3 \u539F\u7406

&emsp;frp \u4E3B\u8981\u7531 \u5BA2\u6237\u7AEF(frpc) \u548C \u670D\u52A1\u7AEF(frps) \u7EC4\u6210\uFF0C\u670D\u52A1\u7AEF\u901A\u5E38\u90E8\u7F72\u5728\u5177\u6709\u516C\u7F51 IP \u7684\u673A\u5668\u4E0A\uFF0C\u5BA2\u6237\u7AEF\u901A\u5E38\u90E8\u7F72\u5728\u9700\u8981\u7A7F\u900F\u7684\u5185\u7F51\u670D\u52A1\u6240\u5728\u7684\u673A\u5668\u4E0A\u3002\u5185\u7F51\u670D\u52A1\u7531\u4E8E\u6CA1\u6709\u516C\u7F51 IP\uFF0C\u4E0D\u80FD\u88AB\u975E\u5C40\u57DF\u7F51\u5185\u7684\u5176\u4ED6\u7528\u6237\u8BBF\u95EE\u3002\u7528\u6237\u901A\u8FC7\u8BBF\u95EE\u670D\u52A1\u7AEF\u7684 frps\uFF0C\u7531 frp \u8D1F\u8D23\u6839\u636E\u8BF7\u6C42\u7684\u7AEF\u53E3\u6216\u5176\u4ED6\u4FE1\u606F\u5C06\u8BF7\u6C42\u8DEF\u7531\u5230\u5BF9\u5E94\u7684\u5185\u7F51\u673A\u5668\uFF0C\u4ECE\u800C\u5B9E\u73B0\u901A\u4FE1\u3002

## \u4E8C\u3001Frp \u5B89\u88C5

&emsp;Frp \u670D\u52A1\u9700\u8981\u5B89\u88C5\u670D\u52A1\u7AEF\`frps\`\u548C\u5BA2\u6237\u7AEF\`frpc\` 2 \u90E8\u5206\u3002\u8F6F\u4EF6\u4E0B\u8F7D\u524D\u5F80[\u5B98\u7F51]\uFF08https://github.com/fatedier/frp/releases\uFF09\u4E0B\u8F7D\uFF0C\u4E00\u822C\u670D\u52A1\u7AEF\u90E8\u7F72\u5728linux\uFF0C\u5BA2\u6237\u7AEF\u90E8\u7F72\u5728window\u3002\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u4E0B\u8F7D\u5BF9\u5E94\u7CFB\u7EDF\u7684\u5B89\u88C5\u5305\u3002\u4E0B\u9762\u662F\`frps\`\u548C\`frpc\`\u5B89\u88C5\u8FC7\u7A0B\uFF1A

### 1 \u670D\u52A1\u7AEF frps \u5B89\u88C5

- \u4E0B\u8F7D\u5B89\u88C5\u5305  
  &emsp;\u76EE\u524D\u53EF\u4EE5\u5728 Github \u7684 [Release](https://github.com/fatedier/frp/releases) \u9875\u9762\u4E2D\u4E0B\u8F7D\u5230\u6700\u65B0\u7248\u672C\u7684\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\u4E8C\u8FDB\u5236\u6587\u4EF6\uFF0C\u6240\u6709\u6587\u4EF6\u88AB\u6253\u5305\u5728\u4E00\u4E2A\u538B\u7F29\u5305\u4E2D\u3002\u6839\u636E\u81EA\u8EAB\u670D\u52A1\u5668\u60C5\u51B5\u9009\u62E9 linux \u6216 windows \u7248\u672C\uFF0C\u7136\u540E\u628A\u5BF9\u5E94\u7684\u538B\u7F29\u5305\u5305\u4E0A\u4F20\u81F3\u516C\u7F51\u4E91\u670D\u52A1\u5668\u3002

- \u4E0A\u4F20\u5B89\u88C5\u5305\uFF0C\u5E76\u89E3\u538B  
  &emsp;\u89E3\u538B\u7F29\u4E0B\u8F7D\u7684\u538B\u7F29\u5305\uFF0C\u5C06\u5176\u4E2D\u7684 frpc \u62F7\u8D1D\u5230\u5185\u7F51\u670D\u52A1\u6240\u5728\u7684\u673A\u5668\u4E0A\uFF0C\u5C06 frps \u62F7\u8D1D\u5230\u5177\u6709\u516C\u7F51 IP \u7684\u673A\u5668\u4E0A\uFF0C\u653E\u7F6E\u5728\u4EFB\u610F\u76EE\u5F55

- systemd \u90E8\u7F72 frps \u670D\u52A1  
  &emsp;\u5728 Linux \u7CFB\u7EDF\u4E0B\uFF0C\u4F7F\u7528 systemd \u53EF\u4EE5\u65B9\u4FBF\u5730\u63A7\u5236 frp \u670D\u52A1\u7AEF frps \u7684\u542F\u52A8\u548C\u505C\u6B62\u3001\u914D\u7F6E\u540E\u53F0\u8FD0\u884C\u548C\u5F00\u542F\u81EA\u542F\u3002\u8981\u4F7F\u7528 systemd \u6765\u63A7\u5236 frps\uFF0C\u9700\u8981\u5148\u5B89\u88C5 systemd\uFF0C\u7136\u540E\u5728 /etc/systemd/system \u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A frps.service \u6587\u4EF6\u3002

1 \u5982 Linux \u670D\u52A1\u7AEF\u4E0A\u6CA1\u6709\u5B89\u88C5 systemd\uFF0C\u53EF\u4EE5\u4F7F\u7528 yum \u6216 apt \u7B49\u547D\u4EE4\u5B89\u88C5 systemd.

\`\`\`bash
# yum
yum install systemd
# apt
apt install systemd
\`\`\`

2 \u4F7F\u7528\u6587\u672C\u7F16\u8F91\u5668\uFF0C\u5982 vim \u521B\u5EFA\u5E76\u7F16\u8F91 frps.service \u6587\u4EF6\u3002

\`\`\`bash
$ vim /etc/systemd/system/frps.service
\`\`\`

\u5199\u5165\u5185\u5BB9

\`\`\`bash
[Unit]
# \u670D\u52A1\u540D\u79F0\uFF0C\u53EF\u81EA\u5B9A\u4E49
Description = frp server
After = network.target syslog.target
Wants = network.target

[Service]
Type = simple
# \u542F\u52A8frps\u7684\u547D\u4EE4\uFF0C\u9700\u4FEE\u6539\u4E3A\u60A8\u7684frps\u7684\u5B89\u88C5\u8DEF\u5F84
ExecStart = /path/to/frps -c /path/to/frps.ini

[Install]
WantedBy = multi-user.target
\`\`\`

3 \u4F7F\u7528 systemd \u547D\u4EE4\uFF0C\u7BA1\u7406 frps\u3002

\`\`\`bash
# \u542F\u52A8frp
systemctl start frps
# \u505C\u6B62frp
systemctl stop frps
# \u91CD\u542Ffrp
systemctl restart frps
# \u67E5\u770Bfrp\u72B6\u6001
systemctl status frps
\`\`\`

4 \u914D\u7F6E frps \u5F00\u673A\u81EA\u542F\u3002

\`\`\`bash
systemctl enable frps
\`\`\`

- frps \u914D\u7F6E

&emsp;\u8FDB\u5165 frps \u5B89\u88C5\u76EE\u5F55\uFF0C\u7F16\u8F91\`frps.ini\`\u6587\u4EF6\uFF0C\u914D\u7F6E\u670D\u52A1\u5668\u7AEF\u53C2\u6570\u548C\u7AEF\u53E3\uFF0C\u7B80\u5355\u914D\u7F6E\u5982\u4E0B\uFF1A

\`\`\`bash
[common]
# frp\u76D1\u542C\u7684\u7AEF\u53E3\uFF0C\u9ED8\u8BA4\u662F7000\uFF0C\u53EF\u4EE5\u6539\u6210\u5176\u4ED6\u7684
bind_port = 7000
# \u6388\u6743\u7801\uFF0C\u8BF7\u6539\u6210\u66F4\u590D\u6742\u7684
token = 52010
# http \u7AEF\u53E3
vhost_http_port =8081
# https \u7AEF\u53E3
vhost_https_port =8080

# frp\u7BA1\u7406\u540E\u53F0\u7AEF\u53E3\uFF0C\u8BF7\u6309\u81EA\u5DF1\u9700\u6C42\u66F4\u6539
dashboard_port = 7500
# frp\u7BA1\u7406\u540E\u53F0\u7528\u6237\u540D\u548C\u5BC6\u7801\uFF0C\u8BF7\u6539\u6210\u81EA\u5DF1\u7684
dashboard_user = admin
dashboard_pwd = admin
enable_prometheus = true

# frp\u65E5\u5FD7\u914D\u7F6E
log_file = /www/wwwroot/frp-server/log/frps.log
log_level = info
log_max_days = 3

\`\`\`

\u8BE6\u7EC6\u53C2\u6570\u53C2\u8003[\u670D\u52A1\u7AEF\u914D\u7F6E](https://gofrp.org/docs/reference/server-configures/)

- 5 frps \u670D\u52A1\u542F\u52A8

&emsp;frps.ini \u914D\u7F6E\u5B8C\u6210\u540E\uFF0C\u901A\u8FC7\`systemctl restart frps\`\u91CD\u542F\u670D\u52A1\u6216\u8005\`systemctl start frps\`,\`systemctl status frps\`\u67E5\u770B frps \u542F\u52A8\u72B6\u6001\uFF0C\u5F53\u8FD0\u884C\u72B6\u6001\u662F\`active\`\u65F6\uFF0C\u8BF4\u660E\u670D\u52A1\u542F\u52A8\u6B63\u5E38\u3002
\u6B64\u65F6\u53EF\u4EE5\u901A\u8FC7\`http://43.143.18.xx:7500/static/#/\`\u5730\u5740\uFF0C\u8BBF\u95EE frps \u670D\u52A1\u7AEF\`dashboard\`\u9762\u677F\u3002\u754C\u9762\u5982\u4E0B\uFF1A
![dashboard\u9762\u677F](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111519311.png)

### 2 \u5BA2\u6237\u7AEF frpc \u5B89\u88C5

&emsp;\u6839\u636E\u5185\u7F51\u670D\u52A1\u5668\u7CFB\u7EDF\u4E0B\u8F7D\u76F8\u5E94\u7684\u5B89\u88C5\u5305\uFF0C\u7136\u540E\u89E3\u538B\u653E\u5728\u4EFB\u610F\u76EE\u5F55\u4E0B\uFF0C\u6838\u5FC3\u6587\u4EF6\`frpc.exe\`\u548C\`frpc.ini\`\u5176\u4ED6\u6587\u4EF6\u4E0D\u60F3\u8981\u53EF\u4EE5\u76F4\u63A5\u5220\u9664\u3002

- frpc.ini \u6587\u4EF6\u914D\u7F6E

\`\`\`bash
[common]
# \u670D\u52A1\u7AEF\u8EAB\u4EFD\u9A8C\u8BC1token
token = 52010
# \u670D\u52A1\u7AEF\u5730\u5740
server_addr = 43.143.18.120
# \u670D\u52A1\u7AEF\u7AEF\u53E3
server_port = 7000
# \u5BA2\u6237\u7AEFadminUi\u5730\u5740
admin_addr = 127.0.0.1
# \u5BA2\u6237\u7AEFadminUi\u7AEF\u53E3
admin_port = 7400
# \u5BA2\u6237\u7AEFadminUi\u8D26\u53F7
admin_user = admin
# \u5BA2\u6237\u7AEFadminUi\u5BC6\u7801
admin_pwd = admin

[web]
type = https
custom_domains = frp.anyfork.top
plugin = https2http
plugin_local_addr = 127.0.0.1:9527
# HTTPS \u8BC1\u4E66\u76F8\u5173\u7684\u914D\u7F6E
plugin_crt_path = ./frp.anyfork.top_bundle.crt
plugin_key_path = ./frp.anyfork.top.key
plugin_host_header_rewrite = 127.0.0.1
plugin_header_X-From-Where = frp

[web2]
type = http
#\u5185\u7F51\u542F\u52A8\u5BA2\u6237\u7AEFip
local_ip = 127.0.0.1
#\u672C\u5730\u670D\u52A1\u5F00\u542F\u7684\u7AEF\u53E3
local_port = 9527
custom_domains = frp.anyfork.top
\`\`\`

\`[web]\`\u548C\`[web2]\`\u4E3A\u914D\u7684\u7684 2 \u4E2A\u4EE3\u7406\u8282\u70B9\uFF0C\u524D\u8005\u91C7\u7528 https \u534F\u8BAE\uFF0C\u540E\u8005\u91C7\u7528 http \u534F\u8BAE\u3002\u5728\u4F7F\u7528 https \u6216\u8005 http \u534F\u8BAE\u524D\uFF0C\u9700\u8981\u5728\u670D\u52A1\u5668 frps.ini \u6587\u4EF6\u4E2D\u914D\u7F6E\u5BF9\u5E94\u7684 http \u548C https \u8BBF\u95EE\u7AEF\u53E3\u53C2\u6570\`vhost_http_port =8081\`\u548C\`vhost_https_port =8080\`,\u5E76\u5728\u4E91\u670D\u52A1\u5668\u5B89\u5168\u7EC4\u5F00\u53D1\u5BF9\u5916\u7AEF\u53E3\uFF0C\u5177\u4F53\u7AEF\u53E3\u53EF\u4EE5\u81EA\u5B9A\u4E49\u3002

- \u542F\u52A8 frpc \u670D\u52A1

&emsp;\u5F53 frpc.ini \u914D\u7F6E\u5B8C\u6210\u65F6\uFF0C\u4EE5 windows \u7CFB\u7EDF\u4E3A\u4F8B\uFF0Ccmd \u8FDB\u5165 frpc \u76EE\u5F55\uFF0C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF0C\u542F\u52A8 frpc \u670D\u52A1

\`\`\`bash
frpc.exe -c frpc.ini
\`\`\`

\u5F53\u63A7\u5236\u53F0\u6253\u5370\u542F\u52A8\u6210\u529F\u540E\uFF0C\u8868\u793A\u5BA2\u6237\u7AEF\u542F\u52A8\u6210\u529F\u3002\u6B64\u65F6\u542F\u52A8\u672C\u5730\u5185\u7F51\u9700\u8981\u4EE3\u7406\u7684\u670D\u52A1\u5E94\u7528\uFF0C\u901A\u8FC7\u5BF9\u5E94\u7684 http \u8BF7\u6C42\uFF1A\`http://frp.anyfork.top:8081\` \u6216\u8005 \`https://frp.anyfork.top:8080\`\u8FDB\u884C\u8BBF\u95EE\uFF0C\u4FBF\u53EF\u4EE5\u6620\u5C04\u5230\u672C\u5730\u5185\u7F51\u670D\u52A1\u3002

- admin UI \u754C\u9762

&emsp;\u5F53\u5BA2\u6237\u7AEF\u670D\u52A1\u542F\u52A8\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7\`http://127.0.0.1:7400\`\u8BBF\u95EE\u5BA2\u6237\u7AEF Admin UI \u754C\u9762\uFF0C\u6B64\u754C\u9762\u5C55\u793A\u5BA2\u6237\u7AEF\u4EE3\u7406\u8282\u70B9\u548C\u914D\u7F6E\u6587\u4EF6\u4FE1\u606F\uFF0C\u53EF\u4EE5\u52A8\u6001\u66F4\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u5728\u7EBF\u52A8\u6001\u5237\u65B0\u914D\u7F6E\u3002\u5177\u4F53\u754C\u9762\u5982\u4E0B\uFF1A
![adminUi\u754C\u9762](https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111542667.png)

## \u4E09 nginx \u53CD\u5411\u4EE3\u7406\u914D\u7F6E

&emsp;frp \u672C\u6765\u5C31\u662F\u4E00\u6B3E\u53CD\u5411\u4EE3\u7406\u5E94\u7528\u670D\u52A1\u5668\uFF0C\u652F\u6301\u591A\u79CD\u534F\u8BAE\u3002\u670D\u52A1\u5668\u7AEF\u901A\u8FC7\u8BBE\u7F6E\`vhost_http_port\`\u548C\`vhost_https_port\`2 \u4E2A\u7AEF\u53E3\u53C2\u6570\uFF0C\u5BA2\u6237\u7AEF\u901A\u8FC7\u914D\u7F6E http \u548C https(\u4F9D\u8D56\u63D2\u4EF6\`https2http\`)\u534F\u8BAE\u8282\u70B9\uFF0C\u53EF\u4EE5\u5B9E\u73B0 http \u548C https \u8BBF\u95EE\u3002\u65E0\u9700\u501F\u52A9 nginx \u7B49\u5176\u4ED6\u53CD\u5411\u4EE3\u7406\u5DE5\u5177\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5B9E\u73B0 http \u548C https \u529F\u80FD\u3002\u672C\u9879\u76EE\u4FBF\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\`http://frp.anyfork.top:8081\` \u6216\u8005 \`https://frp.anyfork.top:8080\`\u8FDB\u884C\u76F4\u63A5\u8BBF\u95EE\u3002\u5982\u679C\u4F60\u670D\u52A1\u5668 80 \u548C 443 \u7AEF\u53E3\u672A\u88AB\u5360\u7528\uFF0C\u53EF\u4EE5\u76F4\u63A5\u914D\u7F6E\`vhost_http_port=80\`\u548C\`vhost_https_port=443\`\uFF0C\u8FD9\u6837\u8BBF\u95EE\u65F6\u5C31\u65E0\u9700\u52A0\u7AEF\u53E3\u8BBF\u95EE\u3002\u5982\u679C\u4F60\u670D\u52A1\u5668 80 \u548C 443 \u7AEF\u53E3\u88AB\u5360\u7528\uFF0C\u53C8\u4E0D\u60F3\u50CF\u4E0A\u9762\u54EA\u6837\u901A\u8FC7\`\u57DF\u540D+\u7AEF\u53E3\`\u65B9\u5F0F\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u91C7\u7528 nginx \u8FDB\u884C\u53CD\u5411\u4EE3\u7406\uFF0C\u9690\u85CF\u7AEF\u53E3\u3002\u5177\u4F53\u914D\u7F6E\u5982\u4E0B\uFF1A
:::danger
\u901A\u8FC7 nginx \u53CD\u5411\u4EE3\u7406\u9690\u85CF\u8BBF\u95EE\u7AEF\u53E3\u7684\u65B9\u5F0F\u76EE\u524D\u53EA\u652F\u6301 frpc \u5BA2\u6237\u7AEF http \u534F\u8BAE\uFF0C\u5BF9\u4E8E https \u534F\u8BAE nginx \u8BBF\u95EE\u8FD4\u56DE 502,\u5177\u4F53\u539F\u56E0\u8FD8\u4E0D\u6E05\u695A\u3002
:::

\`\`\`nginx
server {
    listen 80;
    listen 443 ssl http2;
    server_name frp.anyfork.top;
    if ($server_port !~ 443){
        rewrite ^(/.*)$ https://$host$1 permanent;
    }
    #HTTP_TO_HTTPS_END
    ssl_certificate    /www/server/panel/vhost/cert/frp_server/fullchain.pem;
    ssl_certificate_key    /www/server/panel/vhost/cert/frp_server/privkey.pem;
    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    add_header Strict-Transport-Security "max-age=31536000";
    error_page 497  https://$host$request_uri;
    #SSL-END
    location / {
        proxy_pass http://127.0.0.1:8081;
        proxy_set_header Host $host:$server_port;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header REMOTE-HOST $remote_addr;
        add_header X-Cache $upstream_cache_status;
        proxy_set_header X-Host $host:$server_port;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 30s;
        proxy_read_timeout 86400s;
        proxy_send_timeout 30s;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
    # HTTP\u53CD\u5411\u4EE3\u7406\u76F8\u5173\u914D\u7F6E\u7ED3\u675F <<<

    access_log  /www/wwwlogs/frps.log;
    error_log  /www/wwwlogs/frps.error.log;
}


\`\`\`

\u4E0A\u9762\u7684\u914D\u7F6E\u9488\u5BF9 frpc \u5BA2\u6237\u7AEF http \u8282\u70B9\u8FDB\u884C\u4E86\u53CD\u5411\u4EE3\u7406\uFF0C\u5E76\u914D\u7F6E\u4E86 ssl \u8BC1\u4E66\uFF0C\u5E76\u53CD\u5411\u4EE3\u7406 frpc \u914D\u7F6E\u7684 http \u76D1\u542C\u7684\u7AEF\u53E3 8081\uFF0C\u5B9E\u73B0\u4E86 https \u8BBF\u95EE\u3002\u5BF9\u4E8E frpc \u5BA2\u6237\u7AEF https \u8282\u70B9\uFF0C\u4E0D\u80FD\u901A\u8FC7\u914D\u7F6E\u53CD\u5411\u4EE3\u7801\u6620\u5C04\u5230 8080 \u7AEF\u53E3\uFF0C\u5177\u4F53\u539F\u56E0\u8FD8\u4E0D\u6E05\u695A\u3002\u901A\u8FC7\u6B64\u65B9\u6CD5 frpc \u5C31\u53EF\u4EE5\u4E0D\u7528\u914D\u7F6E https \u534F\u8BAE\u8282\u70B9\uFF0C\u76F4\u63A5\u901A\u8FC7 http \u534F\u8BAE\u8282\u70B9\u548C nginx \u53CD\u5411\u4EE3\u7406\u5C31\u53EF\u4EE5\u5B9E\u73B0 https \u529F\u80FD\u3002
`,contentRendered:`<p>\u2003frp \u662F\u4E00\u4E2A\u4E13\u6CE8\u4E8E\u5185\u7F51\u7A7F\u900F\u7684\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u652F\u6301 TCP\u3001UDP\u3001HTTP\u3001HTTPS \u7B49\u591A\u79CD\u534F\u8BAE\u3002\u53EF\u4EE5\u5C06\u5185\u7F51\u670D\u52A1\u4EE5\u5B89\u5168\u3001\u4FBF\u6377\u7684\u65B9\u5F0F\u901A\u8FC7\u5177\u6709\u516C\u7F51 IP \u8282\u70B9\u7684\u4E2D\u8F6C\u66B4\u9732\u5230\u516C\u7F51\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001frp-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001frp-\u7B80\u4ECB" aria-hidden="true">#</a> \u4E00\u3001Frp \u7B80\u4ECB</h2>
<p>\u2003<code v-pre>\u5185\u7F51\u7A7F\u900F</code>\u5728\u65E5\u5E38\u5DE5\u4F5C\u4E2D\u5E94\u7528\u8FD8\u662F\u6BD4\u8F83\u5E7F\u6CDB\u7684\uFF0C\u53EF\u4EE5\u5C06\u6211\u4EEC\u672C\u5730\u5185\u7F51\u5E94\u7528\u670D\u52A1\u6620\u5C04\u5230\u516C\u7F51\u4E0A\uFF0C\u4F9B\u5176\u4ED6\u4EBA\u8BBF\u95EE\u4F7F\u7528\u3002Frp \u76F8\u5BF9\u5176\u4ED6<code v-pre>\u5185\u7F51\u7A7F\u900F</code>\u5DE5\u5177\u800C\u8A00\uFF0C\u4E0D\u4EC5\u514D\u8D39\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u81EA\u5DF1\u90E8\u7F72\uFF0C\u914D\u7F6E\u7B80\u5355\uFF0C\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u90E8\u7F72\u524D\u63D0\u662F\u9700\u8981\u4E00\u53F0\u5177\u6709\u516C\u7F51 IP \u7684\u4E91\u670D\u52A1\u5668\u3002\u4E0B\u9762\u662F Frp \u5B98\u7F51\u4FE1\u606F\u548C\u8F6F\u4EF6\u4E0B\u8F7D\u5730\u5740\uFF1A</p>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001Frp \u5B98\u7F51\u5730\u5740\uFF1A<a href="https://gofrp.org/" target="_blank" rel="noopener noreferrer">https://gofrp.org/<ExternalLinkIcon/></a><br>
2\u3001Frp Github \u5730\u5740\uFF1A<a href="https://gofrp.org/" target="_blank" rel="noopener noreferrer">https://gofrp.org/<ExternalLinkIcon/></a><br>
3\u3001Frp \u5B89\u88C5\u5305\u4E0B\u8F7D\u5730\u5740\uFF1A<a href="https://github.com/fatedier/frp/releases/" target="_blank" rel="noopener noreferrer">https://github.com/fatedier/frp/releases/<ExternalLinkIcon/></a><br></p>
</div>
<h3 id="_1-frp-\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1-frp-\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1 Frp \u662F\u4EC0\u4E48\uFF1F</h3>
<p>\u2003frp \u662F\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5F00\u6E90\u7684\u5185\u7F51\u7A7F\u900F\u5DE5\u5177\u3002\u4E13\u6CE8\u4E8E\u5185\u7F51\u7A7F\u900F\u7684\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u652F\u6301 TCP\u3001UDP\u3001HTTP\u3001HTTPS \u7B49\u591A\u79CD\u534F\u8BAE\u3002\u53EF\u4EE5\u5C06\u5185\u7F51\u670D\u52A1\u4EE5\u5B89\u5168\u3001\u4FBF\u6377\u7684\u65B9\u5F0F\u901A\u8FC7\u5177\u6709\u516C\u7F51 IP \u8282\u70B9\u7684\u4E2D\u8F6C\u66B4\u9732\u5230\u516C\u7F51\u3002\u91C7\u7528<code v-pre>go</code>\u8BED\u8A00\u8FDB\u884C\u5F00\u53D1\uFF0C\u7531\u5BA2\u6237\u7AEF<code v-pre>frpc</code>\u548C\u670D\u52A1\u7AEF<code v-pre>frps</code>2 \u90E8\u5206\u7EC4\u6210\uFF0C\u914D\u7F6E\u7B80\u5355\uFF0C\u5BB9\u6613\u4E0A\u624B\uFF0C\u91CD\u8981\u7684\u662F\u514D\u8D39\uFF0C\u81EA\u5DF1\u53EF\u4EE5\u8FDB\u884C\u90E8\u7F72\u3002</p>
<h3 id="_2-\u4E3A\u4EC0\u4E48\u4F7F\u7528-frp" tabindex="-1"><a class="header-anchor" href="#_2-\u4E3A\u4EC0\u4E48\u4F7F\u7528-frp" aria-hidden="true">#</a> 2 \u4E3A\u4EC0\u4E48\u4F7F\u7528 frp\uFF1F</h3>
<p>\u2003\u901A\u8FC7\u5728\u5177\u6709\u516C\u7F51 IP \u7684\u8282\u70B9\u4E0A\u90E8\u7F72 frp \u670D\u52A1\u7AEF\uFF0C\u53EF\u4EE5\u8F7B\u677E\u5730\u5C06\u5185\u7F51\u670D\u52A1\u7A7F\u900F\u5230\u516C\u7F51\uFF0C\u540C\u65F6\u63D0\u4F9B\u8BF8\u591A\u4E13\u4E1A\u7684\u529F\u80FD\u7279\u6027\uFF1A</p>
<ul>
<li>\u5BA2\u6237\u7AEF\u670D\u52A1\u7AEF\u901A\u4FE1\u652F\u6301 TCP\u3001KCP \u4EE5\u53CA Websocket \u7B49\u591A\u79CD\u534F\u8BAE\u3002</li>
<li>\u91C7\u7528 TCP \u8FDE\u63A5\u6D41\u5F0F\u590D\u7528\uFF0C\u5728\u5355\u4E2A\u8FDE\u63A5\u95F4\u627F\u8F7D\u66F4\u591A\u8BF7\u6C42\uFF0C\u8282\u7701\u8FDE\u63A5\u5EFA\u7ACB\u65F6\u95F4\u3002</li>
<li>\u4EE3\u7406\u7EC4\u95F4\u7684\u8D1F\u8F7D\u5747\u8861\u3002</li>
<li>\u7AEF\u53E3\u590D\u7528\uFF0C\u591A\u4E2A\u670D\u52A1\u901A\u8FC7\u540C\u4E00\u4E2A\u670D\u52A1\u7AEF\u7AEF\u53E3\u66B4\u9732\u3002</li>
<li>\u591A\u4E2A\u539F\u751F\u652F\u6301\u7684\u5BA2\u6237\u7AEF\u63D2\u4EF6\uFF08\u9759\u6001\u6587\u4EF6\u67E5\u770B\uFF0CHTTP\u3001SOCK5 \u4EE3\u7406\u7B49\uFF09\uFF0C\u4FBF\u4E8E\u72EC\u7ACB\u4F7F\u7528 frp \u5BA2\u6237\u7AEF\u5B8C\u6210\u67D0\u4E9B\u5DE5\u4F5C\u3002</li>
<li>\u9AD8\u5EA6\u6269\u5C55\u6027\u7684\u670D\u52A1\u7AEF\u63D2\u4EF6\u7CFB\u7EDF\uFF0C\u65B9\u4FBF\u7ED3\u5408\u81EA\u8EAB\u9700\u6C42\u8FDB\u884C\u529F\u80FD\u6269\u5C55\u3002</li>
<li>\u670D\u52A1\u7AEF\u548C\u5BA2\u6237\u7AEF UI \u9875\u9762\u3002</li>
</ul>
<h3 id="_3-\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3-\u539F\u7406" aria-hidden="true">#</a> 3 \u539F\u7406</h3>
<p>\u2003frp \u4E3B\u8981\u7531 \u5BA2\u6237\u7AEF(frpc) \u548C \u670D\u52A1\u7AEF(frps) \u7EC4\u6210\uFF0C\u670D\u52A1\u7AEF\u901A\u5E38\u90E8\u7F72\u5728\u5177\u6709\u516C\u7F51 IP \u7684\u673A\u5668\u4E0A\uFF0C\u5BA2\u6237\u7AEF\u901A\u5E38\u90E8\u7F72\u5728\u9700\u8981\u7A7F\u900F\u7684\u5185\u7F51\u670D\u52A1\u6240\u5728\u7684\u673A\u5668\u4E0A\u3002\u5185\u7F51\u670D\u52A1\u7531\u4E8E\u6CA1\u6709\u516C\u7F51 IP\uFF0C\u4E0D\u80FD\u88AB\u975E\u5C40\u57DF\u7F51\u5185\u7684\u5176\u4ED6\u7528\u6237\u8BBF\u95EE\u3002\u7528\u6237\u901A\u8FC7\u8BBF\u95EE\u670D\u52A1\u7AEF\u7684 frps\uFF0C\u7531 frp \u8D1F\u8D23\u6839\u636E\u8BF7\u6C42\u7684\u7AEF\u53E3\u6216\u5176\u4ED6\u4FE1\u606F\u5C06\u8BF7\u6C42\u8DEF\u7531\u5230\u5BF9\u5E94\u7684\u5185\u7F51\u673A\u5668\uFF0C\u4ECE\u800C\u5B9E\u73B0\u901A\u4FE1\u3002</p>
<h2 id="\u4E8C\u3001frp-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001frp-\u5B89\u88C5" aria-hidden="true">#</a> \u4E8C\u3001Frp \u5B89\u88C5</h2>
<p>\u2003Frp \u670D\u52A1\u9700\u8981\u5B89\u88C5\u670D\u52A1\u7AEF<code v-pre>frps</code>\u548C\u5BA2\u6237\u7AEF<code v-pre>frpc</code> 2 \u90E8\u5206\u3002\u8F6F\u4EF6\u4E0B\u8F7D\u524D\u5F80[\u5B98\u7F51]\uFF08https://github.com/fatedier/frp/releases\uFF09\u4E0B\u8F7D\uFF0C\u4E00\u822C\u670D\u52A1\u7AEF\u90E8\u7F72\u5728linux\uFF0C\u5BA2\u6237\u7AEF\u90E8\u7F72\u5728window\u3002\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u4E0B\u8F7D\u5BF9\u5E94\u7CFB\u7EDF\u7684\u5B89\u88C5\u5305\u3002\u4E0B\u9762\u662F<code v-pre>frps</code>\u548C<code v-pre>frpc</code>\u5B89\u88C5\u8FC7\u7A0B\uFF1A</p>
<h3 id="_1-\u670D\u52A1\u7AEF-frps-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_1-\u670D\u52A1\u7AEF-frps-\u5B89\u88C5" aria-hidden="true">#</a> 1 \u670D\u52A1\u7AEF frps \u5B89\u88C5</h3>
<ul>
<li>
<p>\u4E0B\u8F7D\u5B89\u88C5\u5305<br>
\u2003\u76EE\u524D\u53EF\u4EE5\u5728 Github \u7684 <a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener noreferrer">Release<ExternalLinkIcon/></a> \u9875\u9762\u4E2D\u4E0B\u8F7D\u5230\u6700\u65B0\u7248\u672C\u7684\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\u4E8C\u8FDB\u5236\u6587\u4EF6\uFF0C\u6240\u6709\u6587\u4EF6\u88AB\u6253\u5305\u5728\u4E00\u4E2A\u538B\u7F29\u5305\u4E2D\u3002\u6839\u636E\u81EA\u8EAB\u670D\u52A1\u5668\u60C5\u51B5\u9009\u62E9 linux \u6216 windows \u7248\u672C\uFF0C\u7136\u540E\u628A\u5BF9\u5E94\u7684\u538B\u7F29\u5305\u5305\u4E0A\u4F20\u81F3\u516C\u7F51\u4E91\u670D\u52A1\u5668\u3002</p>
</li>
<li>
<p>\u4E0A\u4F20\u5B89\u88C5\u5305\uFF0C\u5E76\u89E3\u538B<br>
\u2003\u89E3\u538B\u7F29\u4E0B\u8F7D\u7684\u538B\u7F29\u5305\uFF0C\u5C06\u5176\u4E2D\u7684 frpc \u62F7\u8D1D\u5230\u5185\u7F51\u670D\u52A1\u6240\u5728\u7684\u673A\u5668\u4E0A\uFF0C\u5C06 frps \u62F7\u8D1D\u5230\u5177\u6709\u516C\u7F51 IP \u7684\u673A\u5668\u4E0A\uFF0C\u653E\u7F6E\u5728\u4EFB\u610F\u76EE\u5F55</p>
</li>
<li>
<p>systemd \u90E8\u7F72 frps \u670D\u52A1<br>
\u2003\u5728 Linux \u7CFB\u7EDF\u4E0B\uFF0C\u4F7F\u7528 systemd \u53EF\u4EE5\u65B9\u4FBF\u5730\u63A7\u5236 frp \u670D\u52A1\u7AEF frps \u7684\u542F\u52A8\u548C\u505C\u6B62\u3001\u914D\u7F6E\u540E\u53F0\u8FD0\u884C\u548C\u5F00\u542F\u81EA\u542F\u3002\u8981\u4F7F\u7528 systemd \u6765\u63A7\u5236 frps\uFF0C\u9700\u8981\u5148\u5B89\u88C5 systemd\uFF0C\u7136\u540E\u5728 /etc/systemd/system \u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A frps.service \u6587\u4EF6\u3002</p>
</li>
</ul>
<p>1 \u5982 Linux \u670D\u52A1\u7AEF\u4E0A\u6CA1\u6709\u5B89\u88C5 systemd\uFF0C\u53EF\u4EE5\u4F7F\u7528 yum \u6216 apt \u7B49\u547D\u4EE4\u5B89\u88C5 systemd.</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># yum</span>
yum <span class="token function">install</span> systemd
<span class="token comment"># apt</span>
<span class="token function">apt</span> <span class="token function">install</span> systemd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2 \u4F7F\u7528\u6587\u672C\u7F16\u8F91\u5668\uFF0C\u5982 vim \u521B\u5EFA\u5E76\u7F16\u8F91 frps.service \u6587\u4EF6\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ <span class="token function">vim</span> /etc/systemd/system/frps.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5199\u5165\u5185\u5BB9</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token comment"># \u670D\u52A1\u540D\u79F0\uFF0C\u53EF\u81EA\u5B9A\u4E49</span>
Description <span class="token operator">=</span> frp server
After <span class="token operator">=</span> network.target syslog.target
Wants <span class="token operator">=</span> network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
Type <span class="token operator">=</span> simple
<span class="token comment"># \u542F\u52A8frps\u7684\u547D\u4EE4\uFF0C\u9700\u4FEE\u6539\u4E3A\u60A8\u7684frps\u7684\u5B89\u88C5\u8DEF\u5F84</span>
ExecStart <span class="token operator">=</span> /path/to/frps <span class="token parameter variable">-c</span> /path/to/frps.ini

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
WantedBy <span class="token operator">=</span> multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3 \u4F7F\u7528 systemd \u547D\u4EE4\uFF0C\u7BA1\u7406 frps\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u542F\u52A8frp</span>
systemctl start frps
<span class="token comment"># \u505C\u6B62frp</span>
systemctl stop frps
<span class="token comment"># \u91CD\u542Ffrp</span>
systemctl restart frps
<span class="token comment"># \u67E5\u770Bfrp\u72B6\u6001</span>
systemctl status frps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4 \u914D\u7F6E frps \u5F00\u673A\u81EA\u542F\u3002</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> frps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>frps \u914D\u7F6E</li>
</ul>
<p>\u2003\u8FDB\u5165 frps \u5B89\u88C5\u76EE\u5F55\uFF0C\u7F16\u8F91<code v-pre>frps.ini</code>\u6587\u4EF6\uFF0C\u914D\u7F6E\u670D\u52A1\u5668\u7AEF\u53C2\u6570\u548C\u7AEF\u53E3\uFF0C\u7B80\u5355\u914D\u7F6E\u5982\u4E0B\uFF1A</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>common<span class="token punctuation">]</span>
<span class="token comment"># frp\u76D1\u542C\u7684\u7AEF\u53E3\uFF0C\u9ED8\u8BA4\u662F7000\uFF0C\u53EF\u4EE5\u6539\u6210\u5176\u4ED6\u7684</span>
bind_port <span class="token operator">=</span> <span class="token number">7000</span>
<span class="token comment"># \u6388\u6743\u7801\uFF0C\u8BF7\u6539\u6210\u66F4\u590D\u6742\u7684</span>
token <span class="token operator">=</span> <span class="token number">52010</span>
<span class="token comment"># http \u7AEF\u53E3</span>
vhost_http_port <span class="token operator">=</span><span class="token number">8081</span>
<span class="token comment"># https \u7AEF\u53E3</span>
vhost_https_port <span class="token operator">=</span><span class="token number">8080</span>

<span class="token comment"># frp\u7BA1\u7406\u540E\u53F0\u7AEF\u53E3\uFF0C\u8BF7\u6309\u81EA\u5DF1\u9700\u6C42\u66F4\u6539</span>
dashboard_port <span class="token operator">=</span> <span class="token number">7500</span>
<span class="token comment"># frp\u7BA1\u7406\u540E\u53F0\u7528\u6237\u540D\u548C\u5BC6\u7801\uFF0C\u8BF7\u6539\u6210\u81EA\u5DF1\u7684</span>
dashboard_user <span class="token operator">=</span> admin
dashboard_pwd <span class="token operator">=</span> admin
enable_prometheus <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token comment"># frp\u65E5\u5FD7\u914D\u7F6E</span>
log_file <span class="token operator">=</span> /www/wwwroot/frp-server/log/frps.log
log_level <span class="token operator">=</span> info
log_max_days <span class="token operator">=</span> <span class="token number">3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE6\u7EC6\u53C2\u6570\u53C2\u8003<a href="https://gofrp.org/docs/reference/server-configures/" target="_blank" rel="noopener noreferrer">\u670D\u52A1\u7AEF\u914D\u7F6E<ExternalLinkIcon/></a></p>
<ul>
<li>5 frps \u670D\u52A1\u542F\u52A8</li>
</ul>
<p>\u2003frps.ini \u914D\u7F6E\u5B8C\u6210\u540E\uFF0C\u901A\u8FC7<code v-pre>systemctl restart frps</code>\u91CD\u542F\u670D\u52A1\u6216\u8005<code v-pre>systemctl start frps</code>,<code v-pre>systemctl status frps</code>\u67E5\u770B frps \u542F\u52A8\u72B6\u6001\uFF0C\u5F53\u8FD0\u884C\u72B6\u6001\u662F<code v-pre>active</code>\u65F6\uFF0C\u8BF4\u660E\u670D\u52A1\u542F\u52A8\u6B63\u5E38\u3002
\u6B64\u65F6\u53EF\u4EE5\u901A\u8FC7<code v-pre>http://43.143.18.xx:7500/static/#/</code>\u5730\u5740\uFF0C\u8BBF\u95EE frps \u670D\u52A1\u7AEF<code v-pre>dashboard</code>\u9762\u677F\u3002\u754C\u9762\u5982\u4E0B\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111519311.png" alt="dashboard\u9762\u677F"></p>
<h3 id="_2-\u5BA2\u6237\u7AEF-frpc-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_2-\u5BA2\u6237\u7AEF-frpc-\u5B89\u88C5" aria-hidden="true">#</a> 2 \u5BA2\u6237\u7AEF frpc \u5B89\u88C5</h3>
<p>\u2003\u6839\u636E\u5185\u7F51\u670D\u52A1\u5668\u7CFB\u7EDF\u4E0B\u8F7D\u76F8\u5E94\u7684\u5B89\u88C5\u5305\uFF0C\u7136\u540E\u89E3\u538B\u653E\u5728\u4EFB\u610F\u76EE\u5F55\u4E0B\uFF0C\u6838\u5FC3\u6587\u4EF6<code v-pre>frpc.exe</code>\u548C<code v-pre>frpc.ini</code>\u5176\u4ED6\u6587\u4EF6\u4E0D\u60F3\u8981\u53EF\u4EE5\u76F4\u63A5\u5220\u9664\u3002</p>
<ul>
<li>frpc.ini \u6587\u4EF6\u914D\u7F6E</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>common<span class="token punctuation">]</span>
<span class="token comment"># \u670D\u52A1\u7AEF\u8EAB\u4EFD\u9A8C\u8BC1token</span>
token <span class="token operator">=</span> <span class="token number">52010</span>
<span class="token comment"># \u670D\u52A1\u7AEF\u5730\u5740</span>
server_addr <span class="token operator">=</span> <span class="token number">43.143</span>.18.120
<span class="token comment"># \u670D\u52A1\u7AEF\u7AEF\u53E3</span>
server_port <span class="token operator">=</span> <span class="token number">7000</span>
<span class="token comment"># \u5BA2\u6237\u7AEFadminUi\u5730\u5740</span>
admin_addr <span class="token operator">=</span> <span class="token number">127.0</span>.0.1
<span class="token comment"># \u5BA2\u6237\u7AEFadminUi\u7AEF\u53E3</span>
admin_port <span class="token operator">=</span> <span class="token number">7400</span>
<span class="token comment"># \u5BA2\u6237\u7AEFadminUi\u8D26\u53F7</span>
admin_user <span class="token operator">=</span> admin
<span class="token comment"># \u5BA2\u6237\u7AEFadminUi\u5BC6\u7801</span>
admin_pwd <span class="token operator">=</span> admin

<span class="token punctuation">[</span>web<span class="token punctuation">]</span>
<span class="token builtin class-name">type</span> <span class="token operator">=</span> https
custom_domains <span class="token operator">=</span> frp.anyfork.top
plugin <span class="token operator">=</span> https2http
plugin_local_addr <span class="token operator">=</span> <span class="token number">127.0</span>.0.1:9527
<span class="token comment"># HTTPS \u8BC1\u4E66\u76F8\u5173\u7684\u914D\u7F6E</span>
plugin_crt_path <span class="token operator">=</span> ./frp.anyfork.top_bundle.crt
plugin_key_path <span class="token operator">=</span> ./frp.anyfork.top.key
plugin_host_header_rewrite <span class="token operator">=</span> <span class="token number">127.0</span>.0.1
plugin_header_X-From-Where <span class="token operator">=</span> frp

<span class="token punctuation">[</span>web2<span class="token punctuation">]</span>
<span class="token builtin class-name">type</span> <span class="token operator">=</span> http
<span class="token comment">#\u5185\u7F51\u542F\u52A8\u5BA2\u6237\u7AEFip</span>
local_ip <span class="token operator">=</span> <span class="token number">127.0</span>.0.1
<span class="token comment">#\u672C\u5730\u670D\u52A1\u5F00\u542F\u7684\u7AEF\u53E3</span>
local_port <span class="token operator">=</span> <span class="token number">9527</span>
custom_domains <span class="token operator">=</span> frp.anyfork.top
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code v-pre>[web]</code>\u548C<code v-pre>[web2]</code>\u4E3A\u914D\u7684\u7684 2 \u4E2A\u4EE3\u7406\u8282\u70B9\uFF0C\u524D\u8005\u91C7\u7528 https \u534F\u8BAE\uFF0C\u540E\u8005\u91C7\u7528 http \u534F\u8BAE\u3002\u5728\u4F7F\u7528 https \u6216\u8005 http \u534F\u8BAE\u524D\uFF0C\u9700\u8981\u5728\u670D\u52A1\u5668 frps.ini \u6587\u4EF6\u4E2D\u914D\u7F6E\u5BF9\u5E94\u7684 http \u548C https \u8BBF\u95EE\u7AEF\u53E3\u53C2\u6570<code v-pre>vhost_http_port =8081</code>\u548C<code v-pre>vhost_https_port =8080</code>,\u5E76\u5728\u4E91\u670D\u52A1\u5668\u5B89\u5168\u7EC4\u5F00\u53D1\u5BF9\u5916\u7AEF\u53E3\uFF0C\u5177\u4F53\u7AEF\u53E3\u53EF\u4EE5\u81EA\u5B9A\u4E49\u3002</p>
<ul>
<li>\u542F\u52A8 frpc \u670D\u52A1</li>
</ul>
<p>\u2003\u5F53 frpc.ini \u914D\u7F6E\u5B8C\u6210\u65F6\uFF0C\u4EE5 windows \u7CFB\u7EDF\u4E3A\u4F8B\uFF0Ccmd \u8FDB\u5165 frpc \u76EE\u5F55\uFF0C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF0C\u542F\u52A8 frpc \u670D\u52A1</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>frpc.exe <span class="token parameter variable">-c</span> frpc.ini
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5F53\u63A7\u5236\u53F0\u6253\u5370\u542F\u52A8\u6210\u529F\u540E\uFF0C\u8868\u793A\u5BA2\u6237\u7AEF\u542F\u52A8\u6210\u529F\u3002\u6B64\u65F6\u542F\u52A8\u672C\u5730\u5185\u7F51\u9700\u8981\u4EE3\u7406\u7684\u670D\u52A1\u5E94\u7528\uFF0C\u901A\u8FC7\u5BF9\u5E94\u7684 http \u8BF7\u6C42\uFF1A<code v-pre>http://frp.anyfork.top:8081</code> \u6216\u8005 <code v-pre>https://frp.anyfork.top:8080</code>\u8FDB\u884C\u8BBF\u95EE\uFF0C\u4FBF\u53EF\u4EE5\u6620\u5C04\u5230\u672C\u5730\u5185\u7F51\u670D\u52A1\u3002</p>
<ul>
<li>admin UI \u754C\u9762</li>
</ul>
<p>\u2003\u5F53\u5BA2\u6237\u7AEF\u670D\u52A1\u542F\u52A8\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7<code v-pre>http://127.0.0.1:7400</code>\u8BBF\u95EE\u5BA2\u6237\u7AEF Admin UI \u754C\u9762\uFF0C\u6B64\u754C\u9762\u5C55\u793A\u5BA2\u6237\u7AEF\u4EE3\u7406\u8282\u70B9\u548C\u914D\u7F6E\u6587\u4EF6\u4FE1\u606F\uFF0C\u53EF\u4EE5\u52A8\u6001\u66F4\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u5728\u7EBF\u52A8\u6001\u5237\u65B0\u914D\u7F6E\u3002\u5177\u4F53\u754C\u9762\u5982\u4E0B\uFF1A
<img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111542667.png" alt="adminUi\u754C\u9762"></p>
<h2 id="\u4E09-nginx-\u53CD\u5411\u4EE3\u7406\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E09-nginx-\u53CD\u5411\u4EE3\u7406\u914D\u7F6E" aria-hidden="true">#</a> \u4E09 nginx \u53CD\u5411\u4EE3\u7406\u914D\u7F6E</h2>
<p>\u2003frp \u672C\u6765\u5C31\u662F\u4E00\u6B3E\u53CD\u5411\u4EE3\u7406\u5E94\u7528\u670D\u52A1\u5668\uFF0C\u652F\u6301\u591A\u79CD\u534F\u8BAE\u3002\u670D\u52A1\u5668\u7AEF\u901A\u8FC7\u8BBE\u7F6E<code v-pre>vhost_http_port</code>\u548C<code v-pre>vhost_https_port</code>2 \u4E2A\u7AEF\u53E3\u53C2\u6570\uFF0C\u5BA2\u6237\u7AEF\u901A\u8FC7\u914D\u7F6E http \u548C https(\u4F9D\u8D56\u63D2\u4EF6<code v-pre>https2http</code>)\u534F\u8BAE\u8282\u70B9\uFF0C\u53EF\u4EE5\u5B9E\u73B0 http \u548C https \u8BBF\u95EE\u3002\u65E0\u9700\u501F\u52A9 nginx \u7B49\u5176\u4ED6\u53CD\u5411\u4EE3\u7406\u5DE5\u5177\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5B9E\u73B0 http \u548C https \u529F\u80FD\u3002\u672C\u9879\u76EE\u4FBF\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7<code v-pre>http://frp.anyfork.top:8081</code> \u6216\u8005 <code v-pre>https://frp.anyfork.top:8080</code>\u8FDB\u884C\u76F4\u63A5\u8BBF\u95EE\u3002\u5982\u679C\u4F60\u670D\u52A1\u5668 80 \u548C 443 \u7AEF\u53E3\u672A\u88AB\u5360\u7528\uFF0C\u53EF\u4EE5\u76F4\u63A5\u914D\u7F6E<code v-pre>vhost_http_port=80</code>\u548C<code v-pre>vhost_https_port=443</code>\uFF0C\u8FD9\u6837\u8BBF\u95EE\u65F6\u5C31\u65E0\u9700\u52A0\u7AEF\u53E3\u8BBF\u95EE\u3002\u5982\u679C\u4F60\u670D\u52A1\u5668 80 \u548C 443 \u7AEF\u53E3\u88AB\u5360\u7528\uFF0C\u53C8\u4E0D\u60F3\u50CF\u4E0A\u9762\u54EA\u6837\u901A\u8FC7<code v-pre>\u57DF\u540D+\u7AEF\u53E3</code>\u65B9\u5F0F\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u91C7\u7528 nginx \u8FDB\u884C\u53CD\u5411\u4EE3\u7406\uFF0C\u9690\u85CF\u7AEF\u53E3\u3002\u5177\u4F53\u914D\u7F6E\u5982\u4E0B\uFF1A</p>
<div class="custom-container danger"><p class="custom-container-title">\u8B66\u544A</p>
<p>\u901A\u8FC7 nginx \u53CD\u5411\u4EE3\u7406\u9690\u85CF\u8BBF\u95EE\u7AEF\u53E3\u7684\u65B9\u5F0F\u76EE\u524D\u53EA\u652F\u6301 frpc \u5BA2\u6237\u7AEF http \u534F\u8BAE\uFF0C\u5BF9\u4E8E https \u534F\u8BAE nginx \u8BBF\u95EE\u8FD4\u56DE 502,\u5177\u4F53\u539F\u56E0\u8FD8\u4E0D\u6E05\u695A\u3002</p>
</div>
<div class="language-nginx ext-nginx line-numbers-mode"><pre v-pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl http2</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> frp.anyfork.top</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$server_port</span> !~ 443)</span><span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">rewrite</span> ^(/.*)$ https://<span class="token variable">$host</span><span class="token variable">$1</span> permanent</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">#HTTP_TO_HTTPS_END</span>
    <span class="token directive"><span class="token keyword">ssl_certificate</span>    /www/server/panel/vhost/cert/frp_server/fullchain.pem</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_certificate_key</span>    /www/server/panel/vhost/cert/frp_server/privkey.pem</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.1 TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_ciphers</span> EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_session_cache</span> shared:SSL:10m</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_session_timeout</span> <span class="token number">10m</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> Strict-Transport-Security <span class="token string">"max-age=31536000"</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">error_page</span> <span class="token number">497</span>  https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
    <span class="token comment">#SSL-END</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8081</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span>:<span class="token variable">$server_port</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> REMOTE-HOST <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> X-Cache <span class="token variable">$upstream_cache_status</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Host <span class="token variable">$host</span>:<span class="token variable">$server_port</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Scheme <span class="token variable">$scheme</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">30s</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">86400s</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_send_timeout</span> <span class="token number">30s</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_http_version</span> 1.1</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Connection <span class="token string">"upgrade"</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># HTTP\u53CD\u5411\u4EE3\u7406\u76F8\u5173\u914D\u7F6E\u7ED3\u675F &lt;&lt;&lt;</span>

    <span class="token directive"><span class="token keyword">access_log</span>  /www/wwwlogs/frps.log</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">error_log</span>  /www/wwwlogs/frps.error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u914D\u7F6E\u9488\u5BF9 frpc \u5BA2\u6237\u7AEF http \u8282\u70B9\u8FDB\u884C\u4E86\u53CD\u5411\u4EE3\u7406\uFF0C\u5E76\u914D\u7F6E\u4E86 ssl \u8BC1\u4E66\uFF0C\u5E76\u53CD\u5411\u4EE3\u7406 frpc \u914D\u7F6E\u7684 http \u76D1\u542C\u7684\u7AEF\u53E3 8081\uFF0C\u5B9E\u73B0\u4E86 https \u8BBF\u95EE\u3002\u5BF9\u4E8E frpc \u5BA2\u6237\u7AEF https \u8282\u70B9\uFF0C\u4E0D\u80FD\u901A\u8FC7\u914D\u7F6E\u53CD\u5411\u4EE3\u7801\u6620\u5C04\u5230 8080 \u7AEF\u53E3\uFF0C\u5177\u4F53\u539F\u56E0\u8FD8\u4E0D\u6E05\u695A\u3002\u901A\u8FC7\u6B64\u65B9\u6CD5 frpc \u5C31\u53EF\u4EE5\u4E0D\u7528\u914D\u7F6E https \u534F\u8BAE\u8282\u70B9\uFF0C\u76F4\u63A5\u901A\u8FC7 http \u534F\u8BAE\u8282\u70B9\u548C nginx \u53CD\u5411\u4EE3\u7406\u5C31\u53EF\u4EE5\u5B9E\u73B0 https \u529F\u80FD\u3002</p>
`,date:"2022-09-11",deps:[],links:[],pathInferred:"/posts/devops/other/frp.html",pathLocale:"/",permalink:null,routeMeta:{title:"Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA"},sfcBlocks:[],slug:"frp",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/other/frp.md",filePathRelative:"posts/devops/other/frp.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/other/frp.html.vue",componentFilePathRelative:"pages/posts/devops/other/frp.html.vue",componentFileChunkName:"v-359ac851",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/other/frp.html.js",dataFilePathRelative:"pages/posts/devops/other/frp.html.js",dataFileChunkName:"v-359ac851",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/other/frp.html",htmlFilePathRelative:"posts/devops/other/frp.html"},title:"Frp\u5185\u7F51\u7A7F\u900F\u670D\u52A1\u642D\u5EFA"},["/posts/devops/other/frp","/posts/devops/other/frp.md"]],["v-614bc111","/posts/devops/redis/",{_blog:{data:{key:"v-614bc111",path:"/posts/devops/redis/",title:"Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",lang:"zh-CN",frontmatter:{title:"Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",date:"2022-04-22T15:53:03.000Z",tag:["Redis"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204221600458.jpg",sticky:6,summary:`\u2003Redis(Remote Dictionary Server)\uFF0C\u5373\u8FDC\u7A0B\u5B57\u5178\u670D\u52A1\uFF0C\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u4F7F\u7528 ANSI C \u8BED\u8A00\u7F16\u5199\u3001\u652F\u6301\u7F51\u7EDC\u3001\u53EF\u57FA\u4E8E\u5185\u5B58\u4EA6\u53EF\u6301\u4E45\u5316\u7684\u65E5\u5FD7\u578B\u3001Key-Value \u6570\u636E\u5E93\uFF0C\u5E76\u63D0\u4F9B\u591A\u79CD\u8BED\u8A00\u7684 API\u3002redis \u7684\u5B98\u7F51\u5730\u5740\uFF0C\u975E\u5E38\u597D\u8BB0\uFF0C\u662F redis.io\u3002(\u57DF\u540D\u540E\u7F00 io \u5C5E\u4E8E\u56FD\u5BB6\u57DF\u540D\uFF0C\u662F british Indian Ocean territory\uFF0C\u5373\u82F1\u5C5E\u5370\u5EA6\u6D0B\u9886\u5730\uFF09\uFF0CVmware \u5728\u8D44\u52A9\u7740 redis \u9879\u76EE\u7684\u5F00\u53D1\u548C\u7EF4\u62A4\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/redis/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Redis"}],["meta",{property:"article:published_time",content:"2022-04-22T15:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Redis(Remote Dictionary Server)\uFF0C\u5373\u8FDC\u7A0B\u5B57\u5178\u670D\u52A1\uFF0C\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u4F7F\u7528 ANSI C \u8BED\u8A00\u7F16\u5199\u3001\u652F\u6301\u7F51\u7EDC\u3001\u53EF\u57FA\u4E8E\u5185\u5B58\u4EA6\u53EF\u6301\u4E45\u5316\u7684\u65E5\u5FD7\u578B\u3001Key-Value \u6570\u636E\u5E93\uFF0C\u5E76\u63D0\u4F9B\u591A\u79CD\u8BED\u8A00\u7684 API\u3002redis \u7684\u5B98\u7F51\u5730\u5740\uFF0C\u975E\u5E38\u597D\u8BB0\uFF0C\u662F redis.io\u3002(\u57DF\u540D\u540E\u7F00 io \u5C5E\u4E8E\u56FD\u5BB6\u57DF\u540D\uFF0C\u662F british Indian Ocean territory\uFF0C\u5373\u82F1\u5C5E\u5370\u5EA6\u6D0B\u9886\u5730\uFF09\uFF0CVmware \u5728\u8D44\u52A9\u7740 redis \u9879\u76EE\u7684\u5F00\u53D1\u548C\u7EF4\u62A4\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001Redis \u7B80\u4ECB",slug:"\u4E00\u3001redis-\u7B80\u4ECB",children:[]},{level:2,title:"\u4E8C\u3001Redis \u5B89\u88C5",slug:"\u4E8C\u3001redis-\u5B89\u88C5",children:[{level:3,title:"1\u3001Yum \u65B9\u5F0F\u5B89\u88C5 Redis",slug:"_1\u3001yum-\u65B9\u5F0F\u5B89\u88C5-redis",children:[]},{level:3,title:"2\u3001\u6E90\u7801\u65B9\u5F0F\u5B89\u88C5 Redis",slug:"_2\u3001\u6E90\u7801\u65B9\u5F0F\u5B89\u88C5-redis",children:[]}]},{level:2,title:"\u4E09\u3001Redis \u76F8\u5173\u914D\u7F6E",slug:"\u4E09\u3001redis-\u76F8\u5173\u914D\u7F6E",children:[]},{level:2,title:"\u56DB\u3001Redis \u76F8\u5173\u547D\u4EE4",slug:"\u56DB\u3001redis-\u76F8\u5173\u547D\u4EE4",children:[]}],git:{updatedTime:1663507058e3,contributors:[{name:"anyfork",email:"874957743@qq.com",commits:1}]},filePathRelative:"posts/devops/redis/README.md",readingTime:{minutes:7.56,words:2269},copyright:`\u8457\u4F5C\u6743\u5F52\u5C0F\u7D2B\u5FF5\u6C81\u6240\u6709
\u539F\u6587\u94FE\u63A5\uFF1Ahttps://anyfork.github.io/blog-docs/blog-docs/posts/devops/redis/`},key:"v-614bc111",path:"/posts/devops/redis/",title:"Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",lang:"zh-CN",frontmatter:{title:"Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F",date:"2022-04-22T15:53:03.000Z",tag:["Redis"],category:["\u8FD0\u7EF4"],image:"https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204221600458.jpg",sticky:6,summary:`\u2003Redis(Remote Dictionary Server)\uFF0C\u5373\u8FDC\u7A0B\u5B57\u5178\u670D\u52A1\uFF0C\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u4F7F\u7528 ANSI C \u8BED\u8A00\u7F16\u5199\u3001\u652F\u6301\u7F51\u7EDC\u3001\u53EF\u57FA\u4E8E\u5185\u5B58\u4EA6\u53EF\u6301\u4E45\u5316\u7684\u65E5\u5FD7\u578B\u3001Key-Value \u6570\u636E\u5E93\uFF0C\u5E76\u63D0\u4F9B\u591A\u79CD\u8BED\u8A00\u7684 API\u3002redis \u7684\u5B98\u7F51\u5730\u5740\uFF0C\u975E\u5E38\u597D\u8BB0\uFF0C\u662F redis.io\u3002(\u57DF\u540D\u540E\u7F00 io \u5C5E\u4E8E\u56FD\u5BB6\u57DF\u540D\uFF0C\u662F british Indian Ocean territory\uFF0C\u5373\u82F1\u5C5E\u5370\u5EA6\u6D0B\u9886\u5730\uFF09\uFF0CVmware \u5728\u8D44\u52A9\u7740 redis \u9879\u76EE\u7684\u5F00\u53D1\u548C\u7EF4\u62A4\u3002
`,head:[["meta",{property:"og:url",content:"https://anyfork.github.io/blog-docs/posts/devops/redis/"}],["meta",{property:"og:site_name",content:"\u6280\u672F\u7ECF\u9A8C\u603B\u7ED3"}],["meta",{property:"og:title",content:"Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-09-18T13:17:38.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:author",content:"\u5C0F\u7D2B\u5FF5\u6C81"}],["meta",{property:"article:tag",content:"Redis"}],["meta",{property:"article:published_time",content:"2022-04-22T15:53:03.000Z"}],["meta",{property:"article:modified_time",content:"2022-09-18T13:17:38.000Z"}]]},excerpt:`<p>\u2003Redis(Remote Dictionary Server)\uFF0C\u5373\u8FDC\u7A0B\u5B57\u5178\u670D\u52A1\uFF0C\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u4F7F\u7528 ANSI C \u8BED\u8A00\u7F16\u5199\u3001\u652F\u6301\u7F51\u7EDC\u3001\u53EF\u57FA\u4E8E\u5185\u5B58\u4EA6\u53EF\u6301\u4E45\u5316\u7684\u65E5\u5FD7\u578B\u3001Key-Value \u6570\u636E\u5E93\uFF0C\u5E76\u63D0\u4F9B\u591A\u79CD\u8BED\u8A00\u7684 API\u3002redis \u7684\u5B98\u7F51\u5730\u5740\uFF0C\u975E\u5E38\u597D\u8BB0\uFF0C\u662F redis.io\u3002(\u57DF\u540D\u540E\u7F00 io \u5C5E\u4E8E\u56FD\u5BB6\u57DF\u540D\uFF0C\u662F british Indian Ocean territory\uFF0C\u5373\u82F1\u5C5E\u5370\u5EA6\u6D0B\u9886\u5730\uFF09\uFF0CVmware \u5728\u8D44\u52A9\u7740 redis \u9879\u76EE\u7684\u5F00\u53D1\u548C\u7EF4\u62A4\u3002</p>
`,headers:[{level:2,title:"\u4E00\u3001Redis \u7B80\u4ECB",slug:"\u4E00\u3001redis-\u7B80\u4ECB",children:[]},{level:2,title:"\u4E8C\u3001Redis \u5B89\u88C5",slug:"\u4E8C\u3001redis-\u5B89\u88C5",children:[{level:3,title:"1\u3001Yum \u65B9\u5F0F\u5B89\u88C5 Redis",slug:"_1\u3001yum-\u65B9\u5F0F\u5B89\u88C5-redis",children:[]},{level:3,title:"2\u3001\u6E90\u7801\u65B9\u5F0F\u5B89\u88C5 Redis",slug:"_2\u3001\u6E90\u7801\u65B9\u5F0F\u5B89\u88C5-redis",children:[]}]},{level:2,title:"\u4E09\u3001Redis \u76F8\u5173\u914D\u7F6E",slug:"\u4E09\u3001redis-\u76F8\u5173\u914D\u7F6E",children:[]},{level:2,title:"\u56DB\u3001Redis \u76F8\u5173\u547D\u4EE4",slug:"\u56DB\u3001redis-\u76F8\u5173\u547D\u4EE4",children:[]}],content:`---
title: Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F
date: 2022-4-22 15:53:03
tag:
  - Redis
category:
  - \u8FD0\u7EF4
image: https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202204221600458.jpg
sticky: 6
---

&emsp;Redis(Remote Dictionary Server)\uFF0C\u5373\u8FDC\u7A0B\u5B57\u5178\u670D\u52A1\uFF0C\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u4F7F\u7528 ANSI C \u8BED\u8A00\u7F16\u5199\u3001\u652F\u6301\u7F51\u7EDC\u3001\u53EF\u57FA\u4E8E\u5185\u5B58\u4EA6\u53EF\u6301\u4E45\u5316\u7684\u65E5\u5FD7\u578B\u3001Key-Value \u6570\u636E\u5E93\uFF0C\u5E76\u63D0\u4F9B\u591A\u79CD\u8BED\u8A00\u7684 API\u3002redis \u7684\u5B98\u7F51\u5730\u5740\uFF0C\u975E\u5E38\u597D\u8BB0\uFF0C\u662F redis.io\u3002(\u57DF\u540D\u540E\u7F00 io \u5C5E\u4E8E\u56FD\u5BB6\u57DF\u540D\uFF0C\u662F british Indian Ocean territory\uFF0C\u5373\u82F1\u5C5E\u5370\u5EA6\u6D0B\u9886\u5730\uFF09\uFF0CVmware \u5728\u8D44\u52A9\u7740 redis \u9879\u76EE\u7684\u5F00\u53D1\u548C\u7EF4\u62A4\u3002

<!-- more -->

## \u4E00\u3001Redis \u7B80\u4ECB


&emsp;redis \u662F\u4E00\u4E2A key-value \u5B58\u50A8\u7CFB\u7EDF\u3002\u548C Memcached \u7C7B\u4F3C\uFF0C\u5B83\u652F\u6301\u5B58\u50A8\u7684 value \u7C7B\u578B\u76F8\u5BF9\u66F4\u591A\uFF0C\u5305\u62EC string(\u5B57\u7B26\u4E32)\u3001list(\u94FE\u8868)\u3001set(\u96C6\u5408)\u3001zset(sorted set --\u6709\u5E8F\u96C6\u5408)\u548C hash\uFF08\u54C8\u5E0C\u7C7B\u578B\uFF09\u3002\u8FD9\u4E9B\u6570\u636E\u7C7B\u578B\u90FD\u652F\u6301 push/pop\u3001add/remove \u53CA\u53D6\u4EA4\u96C6\u5E76\u96C6\u548C\u5DEE\u96C6\u53CA\u66F4\u4E30\u5BCC\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8FD9\u4E9B\u64CD\u4F5C\u90FD\u662F\u539F\u5B50\u6027\u7684\u3002\u5728\u6B64\u57FA\u7840\u4E0A\uFF0Credis \u652F\u6301\u5404\u79CD\u4E0D\u540C\u65B9\u5F0F\u7684\u6392\u5E8F\u3002\u4E0E memcached \u4E00\u6837\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u6548\u7387\uFF0C\u6570\u636E\u90FD\u662F\u7F13\u5B58\u5728\u5185\u5B58\u4E2D\u3002\u533A\u522B\u7684\u662F redis \u4F1A\u5468\u671F\u6027\u7684\u628A\u66F4\u65B0\u7684\u6570\u636E\u5199\u5165\u78C1\u76D8\u6216\u8005\u628A\u4FEE\u6539\u64CD\u4F5C\u5199\u5165\u8FFD\u52A0\u7684\u8BB0\u5F55\u6587\u4EF6\uFF0C\u5E76\u4E14\u5728\u6B64\u57FA\u7840\u4E0A\u5B9E\u73B0\u4E86 master-slave(\u4E3B\u4ECE)\u540C\u6B65\u3002<br>
&emsp;Redis \u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 key-value \u6570\u636E\u5E93\u3002 redis \u7684\u51FA\u73B0\uFF0C\u5F88\u5927\u7A0B\u5EA6\u8865\u507F\u4E86 memcached \u8FD9\u7C7B key/value \u5B58\u50A8\u7684\u4E0D\u8DB3\uFF0C\u5728\u90E8 \u5206\u573A\u5408\u53EF\u4EE5\u5BF9\u5173\u7CFB\u6570\u636E\u5E93\u8D77\u5230\u5F88\u597D\u7684\u8865\u5145\u4F5C\u7528\u3002\u5B83\u63D0\u4F9B\u4E86 Java\uFF0CC/C++\uFF0CC#\uFF0CPHP\uFF0CJavaScript\uFF0CPerl\uFF0CObject-C\uFF0CPython\uFF0CRuby\uFF0CErlang \u7B49\u5BA2\u6237\u7AEF\uFF0C\u4F7F\u7528\u5F88\u65B9\u4FBF\u3002<br>
&emsp;Redis \u652F\u6301\u4E3B\u4ECE\u540C\u6B65\u3002\u6570\u636E\u53EF\u4EE5\u4ECE\u4E3B\u670D\u52A1\u5668\u5411\u4EFB\u610F\u6570\u91CF\u7684\u4ECE\u670D\u52A1\u5668\u4E0A\u540C\u6B65\uFF0C\u4ECE\u670D\u52A1\u5668\u53EF\u4EE5\u662F\u5173\u8054\u5176\u4ED6\u4ECE\u670D\u52A1\u5668\u7684\u4E3B\u670D\u52A1\u5668\u3002\u8FD9\u4F7F\u5F97 Redis \u53EF\u6267\u884C\u5355\u5C42\u6811\u590D\u5236\u3002\u5B58\u76D8\u53EF\u4EE5\u6709\u610F\u65E0\u610F\u7684\u5BF9\u6570\u636E\u8FDB\u884C\u5199\u64CD\u4F5C\u3002\u7531\u4E8E\u5B8C\u5168\u5B9E\u73B0\u4E86\u53D1\u5E03/\u8BA2\u9605\u673A\u5236\uFF0C\u4F7F\u5F97\u4ECE\u6570\u636E\u5E93\u5728\u4EFB\u4F55\u5730\u65B9\u540C\u6B65\u6811\u65F6\uFF0C\u53EF\u8BA2\u9605\u4E00\u4E2A\u9891\u9053\u5E76\u63A5\u6536\u4E3B\u670D\u52A1\u5668\u5B8C\u6574\u7684\u6D88\u606F\u53D1\u5E03\u8BB0\u5F55\u3002\u540C\u6B65\u5BF9\u8BFB\u53D6\u64CD\u4F5C\u7684\u53EF\u6269\u5C55\u6027\u548C\u6570\u636E\u5197\u4F59\u5F88\u6709\u5E2E\u52A9\u3002

:::tip
1\u3001Reids \u5B98\u7F51\u5730\u5740\uFF1A<https://redis.io/><br>
2\u3001Redis \u4E0B\u8F7D\u5730\u5740\uFF1A<https://redis.io/download/><br>
3\u3001redis \u5386\u53F2\u7248\u672C\u5730\u5740\uFF1A<https://download.redis.io/releases/><br>
:::

## \u4E8C\u3001Redis \u5B89\u88C5

&emsp;\u672C\u6587\u4E3B\u8981\u8BB2\u8FF0\`yum\`\u5B89\u88C5\uFF0C\u6E90\u7801\u5B89\u88C5\u548C \`Docker\` \u5B89\u88C5 3 \u79CD\u65B9\u5F0F\u3002\u63A8\u8350\u4F7F\u7528\u6E90\u7801\u6216\u8005 docker \u65B9\u5F0F\u5B89\u88C5 Redis\uFF0C\u53EF\u4EE5\u9009\u62E9\u6BD4\u8F83\u65B0\u800C\u4E14\u7A33\u5B9A\u7684\u7248\u672C\u3002

### 1\u3001Yum \u65B9\u5F0F\u5B89\u88C5 Redis

\`yum\`\u65B9\u5F0F\u5B89\u88C5\u8F6F\u4EF6\uFF0C\u6BD4\u8F83\u65B9\u4FBF\uFF0C\u5FEB\u6377\uFF0C\u4E0D\u7528\u8003\u8651\u5B89\u88C5\u4F9D\u8D56\u5305\uFF0C\u65E0\u9700\u624B\u52A8\u7F16\u8BD1\uFF0C\u4F46\u65E0\u6CD5\u4EBA\u4E3A\u5E72\u9884\u5B89\u88C5\u8FC7\u7A0B\u4EE5\u53CA\u8F6F\u4EF6\u5B89\u88C5\u4F4D\u7F6E\u3002\u76F8\u5173\`yum\`\u7528\u6CD5\u8BF7\u53C2\u8003\uFF1A\u3002

- **\u4E0B\u8F7D epel \u4ED3\u5E93**

\`\`\`bash
yum install epel-release -y
\`\`\`

- **\u4E0B\u8F7D redis \u6570\u636E\u5E93**

\`\`\`bash
yum install redis -y
\`\`\`

- **\u542F\u52A8 Redis \u670D\u52A1**

\`\`\`bash
systemctl start redis
\`\`\`

- **Redis \u670D\u52A1\u5F00\u673A\u81EA\u542F\u52A8**

\`\`\`bash
systemctl enable redis
\u6216
chkconfig redis on
\`\`\`

- **\u5F00\u653E\u7AEF\u53E3**

\`\`\`bash
#\u5F00\u653E6379\u7AEF\u53E3
firewall-cmd --zone=public --add-port=6379/tcp --permanent
#\u914D\u7F6E\u7ACB\u5373\u751F\u6548
firewall-cmd --reload
\`\`\`

- **Redis \u670D\u52A1\u5E38\u89C1\u547D\u4EE4**

\`\`\`bash
#\u67E5\u770B\u670D\u52A1\u72B6\u6001
systemctl status redis
#\u505C\u6B62\u670D\u52A1
systemctl stop redis
#\u91CD\u542F\u670D\u52A1
systemctl restart redis
\`\`\`

### 2\u3001\u6E90\u7801\u65B9\u5F0F\u5B89\u88C5 Redis

- **\u4E0B\u8F7D Redis \u6E90\u7801\u5305**
  \u9009\u62E9\u4E00\u4E2A\u7A33\u5B9A\u7248\u672C\uFF1A<https://download.redis.io/releases/>

\`\`\`bash
#\u9ED8\u8BA4\u4E0B\u8F7D\u5B89\u88C5\u5230/opt\u76EE\u5F55
cd /opt/
#\u76EE\u524DRedis-6.2.6\u662F\u6700\u65B0\u7684\u7A33\u5B9A\u7248\u672C\uFF1B
wget https://download.redis.io/releases/redis-6.2.6.tar.gz
\`\`\`

- **\u89E3\u538B\u5E76\u91CD\u547D\u540D**

\`\`\`bash
# \u89E3\u538B\u7F29
tar -zxvf redis-6.2.6.tar.gz
# \u91CD\u547D\u540D
mv redis-6.2.6.tar.gz redis
# \u5220\u9664\u538B\u7F29\u5305
rm -rf redis-6.2.6.tar.gz
\`\`\`

- **\u7F16\u8BD1**

\`\`\`bash
#\u8FDB\u5165\u76EE\u5F55
cd redis
#\u7F16\u8BD1,\u5982\u679C\u62A5\u9519\uFF0C\u9700\u8981\u5B89\u88C5gcc\u73AF\u5883
make
\`\`\`

- **\u5B89\u88C5**

&emsp;\u5173\u952E\u5B57 \`PREFIX\`\u7684\u4F5C\u7528\u662F\u7F16\u8BD1\u7684\u65F6\u5019\u7528\u4E8E\u6307\u5B9A\u7A0B\u5E8F\u5B58\u653E\u7684\u8DEF\u5F84\u3002\u6BD4\u5982\u6211\u4EEC\u73B0\u5728\u5C31\u662F\u6307\u5B9A\u4E86 redis \u5FC5\u987B\u5B58\u653E\u5728/opt/redis \u76EE\u5F55\u3002\u5047\u8BBE\u4E0D\u6DFB\u52A0\u8BE5\u5173\u952E\u5B57 Linux \u4F1A\u5C06\u53EF\u6267\u884C\u6587\u4EF6\u5B58\u653E\u5728/usr/local/bin \u76EE\u5F55\uFF0C\u5E93\u6587\u4EF6\u4F1A\u5B58\u653E\u5728/usr/local/lib \u76EE\u5F55\u3002\u914D\u7F6E\u6587\u4EF6\u4F1A\u5B58\u653E\u5728/usr/local/etc \u76EE\u5F55\u3002\u5176\u4ED6\u7684\u8D44\u6E90\u6587\u4EF6\u4F1A\u5B58\u653E\u5728 usr/local/share \u76EE\u5F55\u3002\u8FD9\u91CC\u6307\u5B9A\u53F7\u76EE\u5F55\u4E5F\u65B9\u4FBF\u540E\u7EED\u7684\u5378\u8F7D\uFF0C\u540E\u7EED\u76F4\u63A5 rm -rf /opt/redis \u5373\u53EF\u5220\u9664 redis

\`\`\`bash
make PREFIX=/opt/redis install
\`\`\`

- **\u542F\u52A8 Redis**

&emsp;\u4E8C\u8FDB\u5236\u6587\u4EF6\u662F\u7F16\u8BD1\u5B89\u88C5\u5B8C\u6210\u540E\u5728 src \u4E0B\u9762\u7684 bin \u76EE\u5F55\uFF0C\u901A\u8FC7\u4E0B\u9762\u7684\u547D\u4EE4\u542F\u52A8 Redis \u670D\u52A1

\`\`\`bash
./bin/redis-server ./redis.conf
\`\`\`

- **\u5F00\u653E\u7AEF\u53E3**

\`\`\`bash
#\u5F00\u653E6379\u7AEF\u53E3
firewall-cmd --zone=public --add-port=6379/tcp --permanent
#\u914D\u7F6E\u7ACB\u5373\u751F\u6548
firewall-cmd --reload
\`\`\`

- **\u914D\u7F6E Redis \u670D\u52A1**

&emsp;Redis \u5B89\u88C5\u5B8C\u6210\u540E\uFF0C\u6BCF\u6B21\u542F\u52A8\u6216\u8005\u505C\u6B62\u90FD\u9700\u8981\u8FDB\u5165\u5B89\u88C5\u76EE\u5F55\u4E0B\u6267\u884C\u547D\u4EE4\uFF0C\u76F8\u5BF9\u6BD4\u8F83\u9EBB\u70E6\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u65B9\u6CD5\uFF0C\u914D\u7F6E Redis \u670D\u52A1\uFF0C\u4E0B\u6B21\u542F\u52A8\u548C\u505C\u6B62\u975E\u5E38\u7B80\u5355\u3002<br>
1\u3001\u5728 redis \u76EE\u5F55\u4E0B\u627E\u5230 utils/redis_init_script \u590D\u5236\u5230 /etc/init.d/redis \u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u4FEE\u6539

\`\`\`bash
cp /opt/redis/redis_init_script /etc/init.d/redis
\`\`\`

2\u3001\u8FDB\u5165/etc/init.d,\u7F16\u8F91\u914D\u7F6E\u6587\u4EF6 redis

\`\`\`bash
cd /etc/init.d/
vim redis
#\u4EE3\u7801\u5982\u4E0B
#!/bin/sh
REDISPORT=6379
EXEC=/opt/redis/bin/redis-server
CLIEXEC=/opt/redis/bin/redis-cli

PIDFILE=/var/run/redis_\${REDISPORT}.pid
CONF="/opt/redis/\${REDISPORT}.conf"

case "$1" in
    start)
        if [ -f $PIDFILE ]
        then
                echo "$PIDFILE exists, process is already running or crashed"
        else
                echo "Starting Redis server..."
                $EXEC $CONF
        fi
        ;;
    stop)
        if [ ! -f $PIDFILE ]
        then
                echo "$PIDFILE does not exist, process is not running"
        else
                PID=$(cat $PIDFILE)
                echo "Stopping ..."
                $CLIEXEC -p $REDISPORT shutdown
                while [ -x /proc/\${PID} ]
                do
                    echo "Waiting for Redis to shutdown ..."
                    sleep 1
                done
                echo "Redis stopped"
        fi
        ;;
    *)
        echo "Please use start or stop as first argument"
        ;;
esac
\`\`\`

\u4E3B\u8981\u7F16\u8F91\u524D 4 \u884C\`redis-server,redis-cli,redis.conf,pdi\`\u6587\u4EF6\u771F\u5B9E\u5B89\u88C5\u8DEF\u5F84\uFF0C\u7F16\u8F91\u5B8C\uFF0C\u4FDD\u5B58\u9000\u51FA\u3002

- **\u6587\u4EF6\u6388\u6743**

\`\`\`bash
#/etc/init.d/redis\u6587\u4EF6\u8D4B\u4E88\u53EF\u6267\u884C\u6743\u9650\u3002
chmod +x /etc/init.d/redis
\`\`\`

- **\u8BBE\u7F6E\u5F00\u673A\u81EA\u542F\u52A8**

\u5728 /etc/init.d/\u76EE\u5F55\u4E0B\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4

\`\`\`bash
#\u8BBE\u7F6E\u5F00\u673A\u81EA\u542F\u52A8
chkconfig redis on
#\u5173\u95ED\u5F00\u673A\u81EA\u542F\u52A8
chkconfig redis off
\`\`\`

- **\u542F\u52A8\u505C\u6B62\u547D\u4EE4**

\`\`\`bash
#\u5F00\u542Fredis\u670D\u52A1
service redis start
#\u5173\u95EDredis\u670D\u52A1
service redis stop
\`\`\`

## \u4E09\u3001Redis \u76F8\u5173\u914D\u7F6E

Redis \u7684\u914D\u7F6E\u6587\u4EF6\u4F4D\u4E8E/opt/redis/\u76EE\u5F55\u4E0B\uFF0C\u53EF\u4EE5\u66F4\u6539\u914D\u7F6E\u6587\u4EF6\u53C2\u6570\uFF0C\u5E38\u7528\u53C2\u6570\u542B\u4E49\u5982\u4E0B\uFF1A
| \u914D\u7F6E\u9879\u540D\u79F0 | \u914D\u7F6E\u9879\u503C\u8303\u56F4 | \u8BF4\u660E |
| ---- | ---- | ---- |
| daemonize | yes/no | yes \u8868\u793A\u542F\u7528\u5B88\u62A4\u8FDB\u7A0B\uFF0C\u9ED8\u8BA4\u662F no \u5373\u4E0D\u4EE5\u5B88\u62A4\u8FDB\u7A0B\u65B9\u5F0F\u8FD0\u884C\u3002\u5176\u4E2D Windows \u7CFB\u7EDF\u4E0B\u4E0D\u652F\u6301\u542F\u7528\u5B88\u62A4\u8FDB\u7A0B\u65B9\u5F0F\u8FD0\u884C |
| port | | \u6307\u5B9A Redis \u76D1\u542C\u7AEF\u53E3\uFF0C\u9ED8\u8BA4\u7AEF\u53E3\u4E3A 6379 |
| bind | | \u7ED1\u5B9A\u8BBF\u95EE Ip,\u9650\u5236\u9664\u7ED1\u5B9A IP \u5916\u7684\u5176\u4ED6 IP \u8BBF\u95EE\u3002\u5982\u679C\u4E0D\u9650\u5236\u53EF\u4EE5\u6CE8\u91CA\u6389\u6216\u8005 bind 0.0.0.0 \u3002\u8FD9\u4E2A\u5C5E\u6027\u548C\u4E0B\u9762\u7684 protected-mode \u63A7\u5236\u4E86\u662F\u5426\u53EF\u4EE5\u8FDC\u7A0B\u8BBF\u95EE |
| protected-mode | yse/no | \u4FDD\u62A4\u6A21\u5F0F\uFF0C\u8BE5\u6A21\u5F0F\u63A7\u5236\u5916\u90E8\u7F51\u662F\u5426\u53EF\u4EE5\u8FDE\u63A5 redis \u670D\u52A1\uFF0C\u9ED8\u8BA4\u662F yes,\u6240\u4EE5\u9ED8\u8BA4\u6211\u4EEC\u5916\u7F51\u662F\u65E0\u6CD5\u8BBF\u95EE\u7684\uFF0C\u5982\u9700\u5916\u7F51\u8FDE\u63A5 rendis \u670D\u52A1\u5219\u9700\u8981\u5C06\u6B64\u5C5E\u6027\u6539\u4E3A no |
| timeout | 300 | \u5F53\u5BA2\u6237\u7AEF\u95F2\u7F6E\u591A\u957F\u65F6\u95F4\u540E\u5173\u95ED\u8FDE\u63A5\uFF0C\u5982\u679C\u6307\u5B9A\u4E3A 0\uFF0C\u8868\u793A\u5173\u95ED\u8BE5\u529F\u80FD |
| loglevel | debug\u3001verbose\u3001notice\u3001warning | \u65E5\u5FD7\u7EA7\u522B\uFF0C\u9ED8\u8BA4\u4E3A notice |
| databases | 16 | \u8BBE\u7F6E\u6570\u636E\u5E93\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u7684\u6570\u636E\u5E93\u662F 0\u3002\u6574\u4E2A\u901A\u8FC7\u5BA2\u6237\u7AEF\u5DE5\u5177\u53EF\u4EE5\u770B\u5F97\u5230 |
| rdbcompression | yes/no | \u6307\u5B9A\u5B58\u50A8\u81F3\u672C\u5730\u6570\u636E\u5E93\u65F6\u662F\u5426\u538B\u7F29\u6570\u636E\uFF0C\u9ED8\u8BA4\u4E3A yes\uFF0CRedis \u91C7\u7528 LZF \u538B\u7F29\uFF0C\u5982\u679C\u4E3A\u4E86\u8282\u7701 CPU \u65F6\u95F4\uFF0C\u53EF\u4EE5\u5173\u95ED\u8BE5\u9009\u9879\uFF0C\u4F46\u4F1A\u5BFC\u81F4\u6570\u636E\u5E93\u6587\u4EF6\u53D8\u7684\u5DE8\u5927\u3002 |
| dbfilename | dump.rdb | \u6307\u5B9A\u672C\u5730\u6570\u636E\u5E93\u6587\u4EF6\u540D\uFF0C\u9ED8\u8BA4\u503C\u4E3A dump.rdb |
| dir | | \u6307\u5B9A\u672C\u5730\u6570\u636E\u5E93\u5B58\u653E\u76EE\u5F55 |
| requirepass | | \u8BBE\u7F6E Redis \u8FDE\u63A5\u5BC6\u7801\uFF0C\u5982\u679C\u914D\u7F6E\u4E86\u8FDE\u63A5\u5BC6\u7801\uFF0C\u5BA2\u6237\u7AEF\u5728\u8FDE\u63A5 Redis \u65F6\u9700\u8981\u901A\u8FC7 AUTH \`<password>\` \u547D\u4EE4\u63D0\u4F9B\u5BC6\u7801\uFF0C\u9ED8\u8BA4\u5173\u95ED |
| maxclients | 0 | \u8BBE\u7F6E\u540C\u4E00\u65F6\u95F4\u6700\u5927\u5BA2\u6237\u7AEF\u8FDE\u63A5\u6570\uFF0C\u9ED8\u8BA4\u65E0\u9650\u5236\uFF0CRedis \u53EF\u4EE5\u540C\u65F6\u6253\u5F00\u7684\u5BA2\u6237\u7AEF\u8FDE\u63A5\u6570\u4E3A Redis \u8FDB\u7A0B\u53EF\u4EE5\u6253\u5F00\u7684\u6700\u5927\u6587\u4EF6\u63CF\u8FF0\u7B26\u6570\uFF0C\u5982\u679C\u8BBE\u7F6E maxclients 0\uFF0C\u8868\u793A\u4E0D\u4F5C\u9650\u5236\u3002\u5F53\u5BA2\u6237\u7AEF\u8FDE\u63A5\u6570\u5230\u8FBE\u9650\u5236\u65F6\uFF0CRedis \u4F1A\u5173\u95ED\u65B0\u7684\u8FDE\u63A5\u5E76\u5411\u5BA2\u6237\u7AEF\u8FD4\u56DE max number of clients reached \u9519\u8BEF\u4FE1\u606F\u3002|
| maxmemory | \`XXX <bytes>\`| \u6307\u5B9A Redis \u6700\u5927\u5185\u5B58\u9650\u5236\uFF0CRedis \u5728\u542F\u52A8\u65F6\u4F1A\u628A\u6570\u636E\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D\uFF0C\u8FBE\u5230\u6700\u5927\u5185\u5B58\u540E\uFF0CRedis \u4F1A\u5148\u5C1D\u8BD5\u6E05\u9664\u5DF2\u5230\u671F\u6216\u5373\u5C06\u5230\u671F\u7684 Key\uFF0C\u5F53\u6B64\u65B9\u6CD5\u5904\u7406 \u540E\uFF0C\u4ECD\u7136\u5230\u8FBE\u6700\u5927\u5185\u5B58\u8BBE\u7F6E\uFF0C\u5C06\u65E0\u6CD5\u518D\u8FDB\u884C\u5199\u5165\u64CD\u4F5C\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8FDB\u884C\u8BFB\u53D6\u64CD\u4F5C\u3002Redis \u65B0\u7684 vm \u673A\u5236\uFF0C\u4F1A\u628A Key \u5B58\u653E\u5185\u5B58\uFF0CValue \u4F1A\u5B58\u653E\u5728 swap \u533A\u3002\u914D\u7F6E\u9879\u503C\u8303\u56F4\u5217\u91CC XXX \u4E3A\u6570\u503C\u3002|

## \u56DB\u3001Redis \u76F8\u5173\u547D\u4EE4

1\u3001\u67E5\u770B Redis \u7248\u672C

\`\`\`bash
#\u8FDB\u5165redis-cli\u76EE\u5F55\u4E0B
redis-cli --version
#\u6216\u8005\u8FDE\u63A5\u4E0Aredis
redis-cli
#\u8F93\u51FA\u8BE6\u7EC6\u4FE1\u606F
info
\`\`\`

2\u3001\u67E5\u770B Redis \u8FDB\u7A0B\u548C\u7AEF\u53E3

\`\`\`bash
#\u67E5\u770B\u8FDB\u7A0B\u662F\u5426\u8FD0\u884C
ps -ef | grep redis
#\u67E5\u770B\u7AEF\u53E3\u8FDB\u7A0B
netstat -tunlp | grep 6379
\`\`\`

3\u3001\u6CE8\u518C\u4E3A service \u670D\u52A1\u542F\u52A8\u505C\u6B62\u547D\u4EE4

\`\`\`bash
#\u5F00\u542Fredis\u670D\u52A1
service redis start
#\u5173\u95EDredis\u670D\u52A1
service redis stop
\`\`\`

4\u3001Yum \u5B89\u88C5\u670D\u52A1\u542F\u52A8\u505C\u6B62\u547D\u4EE4

\`\`\`bash
#\u67E5\u770B\u670D\u52A1\u72B6\u6001
systemctl status redis
#\u505C\u6B62\u670D\u52A1
systemctl stop redis
#\u91CD\u542F\u670D\u52A1
systemctl restart redis
\`\`\`
`,contentRendered:`<p>\u2003Redis(Remote Dictionary Server)\uFF0C\u5373\u8FDC\u7A0B\u5B57\u5178\u670D\u52A1\uFF0C\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u4F7F\u7528 ANSI C \u8BED\u8A00\u7F16\u5199\u3001\u652F\u6301\u7F51\u7EDC\u3001\u53EF\u57FA\u4E8E\u5185\u5B58\u4EA6\u53EF\u6301\u4E45\u5316\u7684\u65E5\u5FD7\u578B\u3001Key-Value \u6570\u636E\u5E93\uFF0C\u5E76\u63D0\u4F9B\u591A\u79CD\u8BED\u8A00\u7684 API\u3002redis \u7684\u5B98\u7F51\u5730\u5740\uFF0C\u975E\u5E38\u597D\u8BB0\uFF0C\u662F redis.io\u3002(\u57DF\u540D\u540E\u7F00 io \u5C5E\u4E8E\u56FD\u5BB6\u57DF\u540D\uFF0C\u662F british Indian Ocean territory\uFF0C\u5373\u82F1\u5C5E\u5370\u5EA6\u6D0B\u9886\u5730\uFF09\uFF0CVmware \u5728\u8D44\u52A9\u7740 redis \u9879\u76EE\u7684\u5F00\u53D1\u548C\u7EF4\u62A4\u3002</p>
<!-- more -->
<h2 id="\u4E00\u3001redis-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001redis-\u7B80\u4ECB" aria-hidden="true">#</a> \u4E00\u3001Redis \u7B80\u4ECB</h2>
<p>\u2003redis \u662F\u4E00\u4E2A key-value \u5B58\u50A8\u7CFB\u7EDF\u3002\u548C Memcached \u7C7B\u4F3C\uFF0C\u5B83\u652F\u6301\u5B58\u50A8\u7684 value \u7C7B\u578B\u76F8\u5BF9\u66F4\u591A\uFF0C\u5305\u62EC string(\u5B57\u7B26\u4E32)\u3001list(\u94FE\u8868)\u3001set(\u96C6\u5408)\u3001zset(sorted set --\u6709\u5E8F\u96C6\u5408)\u548C hash\uFF08\u54C8\u5E0C\u7C7B\u578B\uFF09\u3002\u8FD9\u4E9B\u6570\u636E\u7C7B\u578B\u90FD\u652F\u6301 push/pop\u3001add/remove \u53CA\u53D6\u4EA4\u96C6\u5E76\u96C6\u548C\u5DEE\u96C6\u53CA\u66F4\u4E30\u5BCC\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u8FD9\u4E9B\u64CD\u4F5C\u90FD\u662F\u539F\u5B50\u6027\u7684\u3002\u5728\u6B64\u57FA\u7840\u4E0A\uFF0Credis \u652F\u6301\u5404\u79CD\u4E0D\u540C\u65B9\u5F0F\u7684\u6392\u5E8F\u3002\u4E0E memcached \u4E00\u6837\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u6548\u7387\uFF0C\u6570\u636E\u90FD\u662F\u7F13\u5B58\u5728\u5185\u5B58\u4E2D\u3002\u533A\u522B\u7684\u662F redis \u4F1A\u5468\u671F\u6027\u7684\u628A\u66F4\u65B0\u7684\u6570\u636E\u5199\u5165\u78C1\u76D8\u6216\u8005\u628A\u4FEE\u6539\u64CD\u4F5C\u5199\u5165\u8FFD\u52A0\u7684\u8BB0\u5F55\u6587\u4EF6\uFF0C\u5E76\u4E14\u5728\u6B64\u57FA\u7840\u4E0A\u5B9E\u73B0\u4E86 master-slave(\u4E3B\u4ECE)\u540C\u6B65\u3002<br>
\u2003Redis \u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 key-value \u6570\u636E\u5E93\u3002 redis \u7684\u51FA\u73B0\uFF0C\u5F88\u5927\u7A0B\u5EA6\u8865\u507F\u4E86 memcached \u8FD9\u7C7B key/value \u5B58\u50A8\u7684\u4E0D\u8DB3\uFF0C\u5728\u90E8 \u5206\u573A\u5408\u53EF\u4EE5\u5BF9\u5173\u7CFB\u6570\u636E\u5E93\u8D77\u5230\u5F88\u597D\u7684\u8865\u5145\u4F5C\u7528\u3002\u5B83\u63D0\u4F9B\u4E86 Java\uFF0CC/C++\uFF0CC#\uFF0CPHP\uFF0CJavaScript\uFF0CPerl\uFF0CObject-C\uFF0CPython\uFF0CRuby\uFF0CErlang \u7B49\u5BA2\u6237\u7AEF\uFF0C\u4F7F\u7528\u5F88\u65B9\u4FBF\u3002<br>
\u2003Redis \u652F\u6301\u4E3B\u4ECE\u540C\u6B65\u3002\u6570\u636E\u53EF\u4EE5\u4ECE\u4E3B\u670D\u52A1\u5668\u5411\u4EFB\u610F\u6570\u91CF\u7684\u4ECE\u670D\u52A1\u5668\u4E0A\u540C\u6B65\uFF0C\u4ECE\u670D\u52A1\u5668\u53EF\u4EE5\u662F\u5173\u8054\u5176\u4ED6\u4ECE\u670D\u52A1\u5668\u7684\u4E3B\u670D\u52A1\u5668\u3002\u8FD9\u4F7F\u5F97 Redis \u53EF\u6267\u884C\u5355\u5C42\u6811\u590D\u5236\u3002\u5B58\u76D8\u53EF\u4EE5\u6709\u610F\u65E0\u610F\u7684\u5BF9\u6570\u636E\u8FDB\u884C\u5199\u64CD\u4F5C\u3002\u7531\u4E8E\u5B8C\u5168\u5B9E\u73B0\u4E86\u53D1\u5E03/\u8BA2\u9605\u673A\u5236\uFF0C\u4F7F\u5F97\u4ECE\u6570\u636E\u5E93\u5728\u4EFB\u4F55\u5730\u65B9\u540C\u6B65\u6811\u65F6\uFF0C\u53EF\u8BA2\u9605\u4E00\u4E2A\u9891\u9053\u5E76\u63A5\u6536\u4E3B\u670D\u52A1\u5668\u5B8C\u6574\u7684\u6D88\u606F\u53D1\u5E03\u8BB0\u5F55\u3002\u540C\u6B65\u5BF9\u8BFB\u53D6\u64CD\u4F5C\u7684\u53EF\u6269\u5C55\u6027\u548C\u6570\u636E\u5197\u4F59\u5F88\u6709\u5E2E\u52A9\u3002</p>
<div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p>
<p>1\u3001Reids \u5B98\u7F51\u5730\u5740\uFF1A<a href="https://redis.io/" target="_blank" rel="noopener noreferrer">https://redis.io/<ExternalLinkIcon/></a><br>
2\u3001Redis \u4E0B\u8F7D\u5730\u5740\uFF1A<a href="https://redis.io/download/" target="_blank" rel="noopener noreferrer">https://redis.io/download/<ExternalLinkIcon/></a><br>
3\u3001redis \u5386\u53F2\u7248\u672C\u5730\u5740\uFF1A<a href="https://download.redis.io/releases/" target="_blank" rel="noopener noreferrer">https://download.redis.io/releases/<ExternalLinkIcon/></a><br></p>
</div>
<h2 id="\u4E8C\u3001redis-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001redis-\u5B89\u88C5" aria-hidden="true">#</a> \u4E8C\u3001Redis \u5B89\u88C5</h2>
<p>\u2003\u672C\u6587\u4E3B\u8981\u8BB2\u8FF0<code v-pre>yum</code>\u5B89\u88C5\uFF0C\u6E90\u7801\u5B89\u88C5\u548C <code v-pre>Docker</code> \u5B89\u88C5 3 \u79CD\u65B9\u5F0F\u3002\u63A8\u8350\u4F7F\u7528\u6E90\u7801\u6216\u8005 docker \u65B9\u5F0F\u5B89\u88C5 Redis\uFF0C\u53EF\u4EE5\u9009\u62E9\u6BD4\u8F83\u65B0\u800C\u4E14\u7A33\u5B9A\u7684\u7248\u672C\u3002</p>
<h3 id="_1\u3001yum-\u65B9\u5F0F\u5B89\u88C5-redis" tabindex="-1"><a class="header-anchor" href="#_1\u3001yum-\u65B9\u5F0F\u5B89\u88C5-redis" aria-hidden="true">#</a> 1\u3001Yum \u65B9\u5F0F\u5B89\u88C5 Redis</h3>
<p><code v-pre>yum</code>\u65B9\u5F0F\u5B89\u88C5\u8F6F\u4EF6\uFF0C\u6BD4\u8F83\u65B9\u4FBF\uFF0C\u5FEB\u6377\uFF0C\u4E0D\u7528\u8003\u8651\u5B89\u88C5\u4F9D\u8D56\u5305\uFF0C\u65E0\u9700\u624B\u52A8\u7F16\u8BD1\uFF0C\u4F46\u65E0\u6CD5\u4EBA\u4E3A\u5E72\u9884\u5B89\u88C5\u8FC7\u7A0B\u4EE5\u53CA\u8F6F\u4EF6\u5B89\u88C5\u4F4D\u7F6E\u3002\u76F8\u5173<code v-pre>yum</code>\u7528\u6CD5\u8BF7\u53C2\u8003\uFF1A\u3002</p>
<ul>
<li><strong>\u4E0B\u8F7D epel \u4ED3\u5E93</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum <span class="token function">install</span> epel-release <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li><strong>\u4E0B\u8F7D redis \u6570\u636E\u5E93</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>yum <span class="token function">install</span> redis <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li><strong>\u542F\u52A8 Redis \u670D\u52A1</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>systemctl start redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li><strong>Redis \u670D\u52A1\u5F00\u673A\u81EA\u542F\u52A8</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> redis
\u6216
<span class="token function">chkconfig</span> redis on
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>\u5F00\u653E\u7AEF\u53E3</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u5F00\u653E6379\u7AEF\u53E3</span>
firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">6379</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment">#\u914D\u7F6E\u7ACB\u5373\u751F\u6548</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>Redis \u670D\u52A1\u5E38\u89C1\u547D\u4EE4</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u770B\u670D\u52A1\u72B6\u6001</span>
systemctl status redis
<span class="token comment">#\u505C\u6B62\u670D\u52A1</span>
systemctl stop redis
<span class="token comment">#\u91CD\u542F\u670D\u52A1</span>
systemctl restart redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2\u3001\u6E90\u7801\u65B9\u5F0F\u5B89\u88C5-redis" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u6E90\u7801\u65B9\u5F0F\u5B89\u88C5-redis" aria-hidden="true">#</a> 2\u3001\u6E90\u7801\u65B9\u5F0F\u5B89\u88C5 Redis</h3>
<ul>
<li><strong>\u4E0B\u8F7D Redis \u6E90\u7801\u5305</strong>
\u9009\u62E9\u4E00\u4E2A\u7A33\u5B9A\u7248\u672C\uFF1A<a href="https://download.redis.io/releases/" target="_blank" rel="noopener noreferrer">https://download.redis.io/releases/<ExternalLinkIcon/></a></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u9ED8\u8BA4\u4E0B\u8F7D\u5B89\u88C5\u5230/opt\u76EE\u5F55</span>
<span class="token builtin class-name">cd</span> /opt/
<span class="token comment">#\u76EE\u524DRedis-6.2.6\u662F\u6700\u65B0\u7684\u7A33\u5B9A\u7248\u672C\uFF1B</span>
<span class="token function">wget</span> https://download.redis.io/releases/redis-6.2.6.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>\u89E3\u538B\u5E76\u91CD\u547D\u540D</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># \u89E3\u538B\u7F29</span>
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> redis-6.2.6.tar.gz
<span class="token comment"># \u91CD\u547D\u540D</span>
<span class="token function">mv</span> redis-6.2.6.tar.gz redis
<span class="token comment"># \u5220\u9664\u538B\u7F29\u5305</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> redis-6.2.6.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>\u7F16\u8BD1</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u8FDB\u5165\u76EE\u5F55</span>
<span class="token builtin class-name">cd</span> redis
<span class="token comment">#\u7F16\u8BD1,\u5982\u679C\u62A5\u9519\uFF0C\u9700\u8981\u5B89\u88C5gcc\u73AF\u5883</span>
<span class="token function">make</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>\u5B89\u88C5</strong></li>
</ul>
<p>\u2003\u5173\u952E\u5B57 <code v-pre>PREFIX</code>\u7684\u4F5C\u7528\u662F\u7F16\u8BD1\u7684\u65F6\u5019\u7528\u4E8E\u6307\u5B9A\u7A0B\u5E8F\u5B58\u653E\u7684\u8DEF\u5F84\u3002\u6BD4\u5982\u6211\u4EEC\u73B0\u5728\u5C31\u662F\u6307\u5B9A\u4E86 redis \u5FC5\u987B\u5B58\u653E\u5728/opt/redis \u76EE\u5F55\u3002\u5047\u8BBE\u4E0D\u6DFB\u52A0\u8BE5\u5173\u952E\u5B57 Linux \u4F1A\u5C06\u53EF\u6267\u884C\u6587\u4EF6\u5B58\u653E\u5728/usr/local/bin \u76EE\u5F55\uFF0C\u5E93\u6587\u4EF6\u4F1A\u5B58\u653E\u5728/usr/local/lib \u76EE\u5F55\u3002\u914D\u7F6E\u6587\u4EF6\u4F1A\u5B58\u653E\u5728/usr/local/etc \u76EE\u5F55\u3002\u5176\u4ED6\u7684\u8D44\u6E90\u6587\u4EF6\u4F1A\u5B58\u653E\u5728 usr/local/share \u76EE\u5F55\u3002\u8FD9\u91CC\u6307\u5B9A\u53F7\u76EE\u5F55\u4E5F\u65B9\u4FBF\u540E\u7EED\u7684\u5378\u8F7D\uFF0C\u540E\u7EED\u76F4\u63A5 rm -rf /opt/redis \u5373\u53EF\u5220\u9664 redis</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">make</span> <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/opt/redis <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li><strong>\u542F\u52A8 Redis</strong></li>
</ul>
<p>\u2003\u4E8C\u8FDB\u5236\u6587\u4EF6\u662F\u7F16\u8BD1\u5B89\u88C5\u5B8C\u6210\u540E\u5728 src \u4E0B\u9762\u7684 bin \u76EE\u5F55\uFF0C\u901A\u8FC7\u4E0B\u9762\u7684\u547D\u4EE4\u542F\u52A8 Redis \u670D\u52A1</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>./bin/redis-server ./redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li><strong>\u5F00\u653E\u7AEF\u53E3</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u5F00\u653E6379\u7AEF\u53E3</span>
firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">6379</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment">#\u914D\u7F6E\u7ACB\u5373\u751F\u6548</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>\u914D\u7F6E Redis \u670D\u52A1</strong></li>
</ul>
<p>\u2003Redis \u5B89\u88C5\u5B8C\u6210\u540E\uFF0C\u6BCF\u6B21\u542F\u52A8\u6216\u8005\u505C\u6B62\u90FD\u9700\u8981\u8FDB\u5165\u5B89\u88C5\u76EE\u5F55\u4E0B\u6267\u884C\u547D\u4EE4\uFF0C\u76F8\u5BF9\u6BD4\u8F83\u9EBB\u70E6\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u65B9\u6CD5\uFF0C\u914D\u7F6E Redis \u670D\u52A1\uFF0C\u4E0B\u6B21\u542F\u52A8\u548C\u505C\u6B62\u975E\u5E38\u7B80\u5355\u3002<br>
1\u3001\u5728 redis \u76EE\u5F55\u4E0B\u627E\u5230 utils/redis_init_script \u590D\u5236\u5230 /etc/init.d/redis \u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u4FEE\u6539</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">cp</span> /opt/redis/redis_init_script /etc/init.d/redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2\u3001\u8FDB\u5165/etc/init.d,\u7F16\u8F91\u914D\u7F6E\u6587\u4EF6 redis</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">cd</span> /etc/init.d/
<span class="token function">vim</span> redis
<span class="token comment">#\u4EE3\u7801\u5982\u4E0B</span>
<span class="token comment">#!/bin/sh</span>
<span class="token assign-left variable">REDISPORT</span><span class="token operator">=</span><span class="token number">6379</span>
<span class="token assign-left variable">EXEC</span><span class="token operator">=</span>/opt/redis/bin/redis-server
<span class="token assign-left variable">CLIEXEC</span><span class="token operator">=</span>/opt/redis/bin/redis-cli

<span class="token assign-left variable">PIDFILE</span><span class="token operator">=</span>/var/run/redis_<span class="token variable">\${REDISPORT}</span>.pid
<span class="token assign-left variable">CONF</span><span class="token operator">=</span><span class="token string">"/opt/redis/<span class="token variable">\${REDISPORT}</span>.conf"</span>

<span class="token keyword">case</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token keyword">in</span>
    start<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token variable">$PIDFILE</span> <span class="token punctuation">]</span>
        <span class="token keyword">then</span>
                <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$PIDFILE</span> exists, process is already running or crashed"</span>
        <span class="token keyword">else</span>
                <span class="token builtin class-name">echo</span> <span class="token string">"Starting Redis server..."</span>
                <span class="token variable">$EXEC</span> <span class="token variable">$CONF</span>
        <span class="token keyword">fi</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> <span class="token variable">$PIDFILE</span> <span class="token punctuation">]</span>
        <span class="token keyword">then</span>
                <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$PIDFILE</span> does not exist, process is not running"</span>
        <span class="token keyword">else</span>
                <span class="token assign-left variable">PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> $PIDFILE<span class="token variable">)</span></span>
                <span class="token builtin class-name">echo</span> <span class="token string">"Stopping ..."</span>
                <span class="token variable">$CLIEXEC</span> <span class="token parameter variable">-p</span> <span class="token variable">$REDISPORT</span> <span class="token function">shutdown</span>
                <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> /proc/<span class="token variable">\${PID}</span> <span class="token punctuation">]</span>
                <span class="token keyword">do</span>
                    <span class="token builtin class-name">echo</span> <span class="token string">"Waiting for Redis to shutdown ..."</span>
                    <span class="token function">sleep</span> <span class="token number">1</span>
                <span class="token keyword">done</span>
                <span class="token builtin class-name">echo</span> <span class="token string">"Redis stopped"</span>
        <span class="token keyword">fi</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Please use start or stop as first argument"</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3B\u8981\u7F16\u8F91\u524D 4 \u884C<code v-pre>redis-server,redis-cli,redis.conf,pdi</code>\u6587\u4EF6\u771F\u5B9E\u5B89\u88C5\u8DEF\u5F84\uFF0C\u7F16\u8F91\u5B8C\uFF0C\u4FDD\u5B58\u9000\u51FA\u3002</p>
<ul>
<li><strong>\u6587\u4EF6\u6388\u6743</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#/etc/init.d/redis\u6587\u4EF6\u8D4B\u4E88\u53EF\u6267\u884C\u6743\u9650\u3002</span>
<span class="token function">chmod</span> +x /etc/init.d/redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>\u8BBE\u7F6E\u5F00\u673A\u81EA\u542F\u52A8</strong></li>
</ul>
<p>\u5728 /etc/init.d/\u76EE\u5F55\u4E0B\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u8BBE\u7F6E\u5F00\u673A\u81EA\u542F\u52A8</span>
<span class="token function">chkconfig</span> redis on
<span class="token comment">#\u5173\u95ED\u5F00\u673A\u81EA\u542F\u52A8</span>
<span class="token function">chkconfig</span> redis off
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><strong>\u542F\u52A8\u505C\u6B62\u547D\u4EE4</strong></li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u5F00\u542Fredis\u670D\u52A1</span>
<span class="token function">service</span> redis start
<span class="token comment">#\u5173\u95EDredis\u670D\u52A1</span>
<span class="token function">service</span> redis stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E09\u3001redis-\u76F8\u5173\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001redis-\u76F8\u5173\u914D\u7F6E" aria-hidden="true">#</a> \u4E09\u3001Redis \u76F8\u5173\u914D\u7F6E</h2>
<p>Redis \u7684\u914D\u7F6E\u6587\u4EF6\u4F4D\u4E8E/opt/redis/\u76EE\u5F55\u4E0B\uFF0C\u53EF\u4EE5\u66F4\u6539\u914D\u7F6E\u6587\u4EF6\u53C2\u6570\uFF0C\u5E38\u7528\u53C2\u6570\u542B\u4E49\u5982\u4E0B\uFF1A</p>
<table>
<thead>
<tr>
<th>\u914D\u7F6E\u9879\u540D\u79F0</th>
<th>\u914D\u7F6E\u9879\u503C\u8303\u56F4</th>
<th>\u8BF4\u660E</th>
</tr>
</thead>
<tbody>
<tr>
<td>daemonize</td>
<td>yes/no</td>
<td>yes \u8868\u793A\u542F\u7528\u5B88\u62A4\u8FDB\u7A0B\uFF0C\u9ED8\u8BA4\u662F no \u5373\u4E0D\u4EE5\u5B88\u62A4\u8FDB\u7A0B\u65B9\u5F0F\u8FD0\u884C\u3002\u5176\u4E2D Windows \u7CFB\u7EDF\u4E0B\u4E0D\u652F\u6301\u542F\u7528\u5B88\u62A4\u8FDB\u7A0B\u65B9\u5F0F\u8FD0\u884C</td>
</tr>
<tr>
<td>port</td>
<td></td>
<td>\u6307\u5B9A Redis \u76D1\u542C\u7AEF\u53E3\uFF0C\u9ED8\u8BA4\u7AEF\u53E3\u4E3A 6379</td>
</tr>
<tr>
<td>bind</td>
<td></td>
<td>\u7ED1\u5B9A\u8BBF\u95EE Ip,\u9650\u5236\u9664\u7ED1\u5B9A IP \u5916\u7684\u5176\u4ED6 IP \u8BBF\u95EE\u3002\u5982\u679C\u4E0D\u9650\u5236\u53EF\u4EE5\u6CE8\u91CA\u6389\u6216\u8005 bind 0.0.0.0 \u3002\u8FD9\u4E2A\u5C5E\u6027\u548C\u4E0B\u9762\u7684 protected-mode \u63A7\u5236\u4E86\u662F\u5426\u53EF\u4EE5\u8FDC\u7A0B\u8BBF\u95EE</td>
</tr>
<tr>
<td>protected-mode</td>
<td>yse/no</td>
<td>\u4FDD\u62A4\u6A21\u5F0F\uFF0C\u8BE5\u6A21\u5F0F\u63A7\u5236\u5916\u90E8\u7F51\u662F\u5426\u53EF\u4EE5\u8FDE\u63A5 redis \u670D\u52A1\uFF0C\u9ED8\u8BA4\u662F yes,\u6240\u4EE5\u9ED8\u8BA4\u6211\u4EEC\u5916\u7F51\u662F\u65E0\u6CD5\u8BBF\u95EE\u7684\uFF0C\u5982\u9700\u5916\u7F51\u8FDE\u63A5 rendis \u670D\u52A1\u5219\u9700\u8981\u5C06\u6B64\u5C5E\u6027\u6539\u4E3A no</td>
</tr>
<tr>
<td>timeout</td>
<td>300</td>
<td>\u5F53\u5BA2\u6237\u7AEF\u95F2\u7F6E\u591A\u957F\u65F6\u95F4\u540E\u5173\u95ED\u8FDE\u63A5\uFF0C\u5982\u679C\u6307\u5B9A\u4E3A 0\uFF0C\u8868\u793A\u5173\u95ED\u8BE5\u529F\u80FD</td>
</tr>
<tr>
<td>loglevel</td>
<td>debug\u3001verbose\u3001notice\u3001warning</td>
<td>\u65E5\u5FD7\u7EA7\u522B\uFF0C\u9ED8\u8BA4\u4E3A notice</td>
</tr>
<tr>
<td>databases</td>
<td>16</td>
<td>\u8BBE\u7F6E\u6570\u636E\u5E93\u7684\u6570\u91CF\uFF0C\u9ED8\u8BA4\u7684\u6570\u636E\u5E93\u662F 0\u3002\u6574\u4E2A\u901A\u8FC7\u5BA2\u6237\u7AEF\u5DE5\u5177\u53EF\u4EE5\u770B\u5F97\u5230</td>
</tr>
<tr>
<td>rdbcompression</td>
<td>yes/no</td>
<td>\u6307\u5B9A\u5B58\u50A8\u81F3\u672C\u5730\u6570\u636E\u5E93\u65F6\u662F\u5426\u538B\u7F29\u6570\u636E\uFF0C\u9ED8\u8BA4\u4E3A yes\uFF0CRedis \u91C7\u7528 LZF \u538B\u7F29\uFF0C\u5982\u679C\u4E3A\u4E86\u8282\u7701 CPU \u65F6\u95F4\uFF0C\u53EF\u4EE5\u5173\u95ED\u8BE5\u9009\u9879\uFF0C\u4F46\u4F1A\u5BFC\u81F4\u6570\u636E\u5E93\u6587\u4EF6\u53D8\u7684\u5DE8\u5927\u3002</td>
</tr>
<tr>
<td>dbfilename</td>
<td>dump.rdb</td>
<td>\u6307\u5B9A\u672C\u5730\u6570\u636E\u5E93\u6587\u4EF6\u540D\uFF0C\u9ED8\u8BA4\u503C\u4E3A dump.rdb</td>
</tr>
<tr>
<td>dir</td>
<td></td>
<td>\u6307\u5B9A\u672C\u5730\u6570\u636E\u5E93\u5B58\u653E\u76EE\u5F55</td>
</tr>
<tr>
<td>requirepass</td>
<td></td>
<td>\u8BBE\u7F6E Redis \u8FDE\u63A5\u5BC6\u7801\uFF0C\u5982\u679C\u914D\u7F6E\u4E86\u8FDE\u63A5\u5BC6\u7801\uFF0C\u5BA2\u6237\u7AEF\u5728\u8FDE\u63A5 Redis \u65F6\u9700\u8981\u901A\u8FC7 AUTH <code v-pre>&lt;password&gt;</code> \u547D\u4EE4\u63D0\u4F9B\u5BC6\u7801\uFF0C\u9ED8\u8BA4\u5173\u95ED</td>
</tr>
<tr>
<td>maxclients</td>
<td>0</td>
<td>\u8BBE\u7F6E\u540C\u4E00\u65F6\u95F4\u6700\u5927\u5BA2\u6237\u7AEF\u8FDE\u63A5\u6570\uFF0C\u9ED8\u8BA4\u65E0\u9650\u5236\uFF0CRedis \u53EF\u4EE5\u540C\u65F6\u6253\u5F00\u7684\u5BA2\u6237\u7AEF\u8FDE\u63A5\u6570\u4E3A Redis \u8FDB\u7A0B\u53EF\u4EE5\u6253\u5F00\u7684\u6700\u5927\u6587\u4EF6\u63CF\u8FF0\u7B26\u6570\uFF0C\u5982\u679C\u8BBE\u7F6E maxclients 0\uFF0C\u8868\u793A\u4E0D\u4F5C\u9650\u5236\u3002\u5F53\u5BA2\u6237\u7AEF\u8FDE\u63A5\u6570\u5230\u8FBE\u9650\u5236\u65F6\uFF0CRedis \u4F1A\u5173\u95ED\u65B0\u7684\u8FDE\u63A5\u5E76\u5411\u5BA2\u6237\u7AEF\u8FD4\u56DE max number of clients reached \u9519\u8BEF\u4FE1\u606F\u3002</td>
</tr>
<tr>
<td>maxmemory</td>
<td><code v-pre>XXX &lt;bytes&gt;</code></td>
<td>\u6307\u5B9A Redis \u6700\u5927\u5185\u5B58\u9650\u5236\uFF0CRedis \u5728\u542F\u52A8\u65F6\u4F1A\u628A\u6570\u636E\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D\uFF0C\u8FBE\u5230\u6700\u5927\u5185\u5B58\u540E\uFF0CRedis \u4F1A\u5148\u5C1D\u8BD5\u6E05\u9664\u5DF2\u5230\u671F\u6216\u5373\u5C06\u5230\u671F\u7684 Key\uFF0C\u5F53\u6B64\u65B9\u6CD5\u5904\u7406 \u540E\uFF0C\u4ECD\u7136\u5230\u8FBE\u6700\u5927\u5185\u5B58\u8BBE\u7F6E\uFF0C\u5C06\u65E0\u6CD5\u518D\u8FDB\u884C\u5199\u5165\u64CD\u4F5C\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8FDB\u884C\u8BFB\u53D6\u64CD\u4F5C\u3002Redis \u65B0\u7684 vm \u673A\u5236\uFF0C\u4F1A\u628A Key \u5B58\u653E\u5185\u5B58\uFF0CValue \u4F1A\u5B58\u653E\u5728 swap \u533A\u3002\u914D\u7F6E\u9879\u503C\u8303\u56F4\u5217\u91CC XXX \u4E3A\u6570\u503C\u3002</td>
</tr>
</tbody>
</table>
<h2 id="\u56DB\u3001redis-\u76F8\u5173\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001redis-\u76F8\u5173\u547D\u4EE4" aria-hidden="true">#</a> \u56DB\u3001Redis \u76F8\u5173\u547D\u4EE4</h2>
<p>1\u3001\u67E5\u770B Redis \u7248\u672C</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u8FDB\u5165redis-cli\u76EE\u5F55\u4E0B</span>
redis-cli <span class="token parameter variable">--version</span>
<span class="token comment">#\u6216\u8005\u8FDE\u63A5\u4E0Aredis</span>
redis-cli
<span class="token comment">#\u8F93\u51FA\u8BE6\u7EC6\u4FE1\u606F</span>
info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2\u3001\u67E5\u770B Redis \u8FDB\u7A0B\u548C\u7AEF\u53E3</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u770B\u8FDB\u7A0B\u662F\u5426\u8FD0\u884C</span>
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> redis
<span class="token comment">#\u67E5\u770B\u7AEF\u53E3\u8FDB\u7A0B</span>
<span class="token function">netstat</span> <span class="token parameter variable">-tunlp</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">6379</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3\u3001\u6CE8\u518C\u4E3A service \u670D\u52A1\u542F\u52A8\u505C\u6B62\u547D\u4EE4</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u5F00\u542Fredis\u670D\u52A1</span>
<span class="token function">service</span> redis start
<span class="token comment">#\u5173\u95EDredis\u670D\u52A1</span>
<span class="token function">service</span> redis stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4\u3001Yum \u5B89\u88C5\u670D\u52A1\u542F\u52A8\u505C\u6B62\u547D\u4EE4</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment">#\u67E5\u770B\u670D\u52A1\u72B6\u6001</span>
systemctl status redis
<span class="token comment">#\u505C\u6B62\u670D\u52A1</span>
systemctl stop redis
<span class="token comment">#\u91CD\u542F\u670D\u52A1</span>
systemctl restart redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,date:"2022-04-22",deps:[],links:[],pathInferred:"/posts/devops/redis/",pathLocale:"/",permalink:null,routeMeta:{title:"Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"},sfcBlocks:[],slug:"README",filePath:"/home/runner/work/blog-docs/blog-docs/docs/posts/devops/redis/README.md",filePathRelative:"posts/devops/redis/README.md",componentFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/redis/index.html.vue",componentFilePathRelative:"pages/posts/devops/redis/index.html.vue",componentFileChunkName:"v-614bc111",dataFilePath:"/home/runner/work/blog-docs/blog-docs/docs/.vuepress/.temp/pages/posts/devops/redis/index.html.js",dataFilePathRelative:"pages/posts/devops/redis/index.html.js",dataFileChunkName:"v-614bc111",htmlFilePath:"/home/runner/work/blog-docs/blog-docs/dist/posts/devops/redis/index.html",htmlFilePathRelative:"posts/devops/redis/index.html"},title:"Redis \u591A\u79CD\u5B89\u88C5\u65B9\u5F0F"},["/posts/devops/redis/index.html","/posts/devops/redis/README.md"]],["v-3706649a","/404.html",{title:""},["/404"]],["v-5bc93818","/category/",{title:"Categories"},["/category/index.html"]],["v-744d024e","/tag/",{title:"Tags"},["/tag/index.html"]],["v-e52c881c","/article/",{title:"Articles"},["/article/index.html"]],["v-01560935","/timeline/",{title:"Timeline"},["/timeline/index.html"]],["v-5831b135","/category/java/",{title:"Category java"},["/category/java/index.html"]],["v-05b88e01","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/",{title:"Tag \u8BBE\u8BA1\u6A21\u5F0F"},["/tag/\u8BBE\u8BA1\u6A21\u5F0F/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html"]],["v-9c48d85a","/category/linux/",{title:"Category linux"},["/category/linux/index.html"]],["v-211f44ee","/tag/linux/",{title:"Tag linux"},["/tag/linux/index.html"]],["v-5e0b61bd","/category/%E6%95%B0%E6%8D%AE%E5%BA%93/",{title:"Category \u6570\u636E\u5E93"},["/category/\u6570\u636E\u5E93/","/category/%E6%95%B0%E6%8D%AE%E5%BA%93/index.html"]],["v-1bee38ca","/tag/mysql/",{title:"Tag MySql"},["/tag/mysql/index.html"]],["v-58702955","/category/node/",{title:"Category Node"},["/category/node/index.html"]],["v-28e050df","/tag/node/",{title:"Tag Node"},["/tag/node/index.html"]],["v-58733074","/category/nuxt/",{title:"Category Nuxt"},["/category/nuxt/index.html"]],["v-28e357fe","/tag/nuxt/",{title:"Tag Nuxt"},["/tag/nuxt/index.html"]],["v-4110d7ce","/category/%E8%BF%90%E7%BB%B4/",{title:"Category \u8FD0\u7EF4"},["/category/\u8FD0\u7EF4/","/category/%E8%BF%90%E7%BB%B4/index.html"]],["v-1eec4968","/tag/algolia/",{title:"Tag Algolia"},["/tag/algolia/index.html"]],["v-13b66e9c","/category/%E5%85%B6%E4%BB%96/",{title:"Category \u5176\u4ED6"},["/category/\u5176\u4ED6/","/category/%E5%85%B6%E4%BB%96/index.html"]],["v-3a134560","/tag/%E5%8D%9A%E5%AE%A2/",{title:"Tag \u535A\u5BA2"},["/tag/\u535A\u5BA2/","/tag/%E5%8D%9A%E5%AE%A2/index.html"]],["v-9f17d77e","/category/%E7%9B%97%E9%93%BE/",{title:"Category \u76D7\u94FE"},["/category/\u76D7\u94FE/","/category/%E7%9B%97%E9%93%BE/index.html"]],["v-200bf6bc","/tag/%E5%85%B6%E4%BB%96/",{title:"Tag \u5176\u4ED6"},["/tag/\u5176\u4ED6/","/tag/%E5%85%B6%E4%BB%96/index.html"]],["v-2d060772","/category/%E5%9B%BE%E5%BA%8A/",{title:"Category \u56FE\u5E8A"},["/category/\u56FE\u5E8A/","/category/%E5%9B%BE%E5%BA%8A/index.html"]],["v-aac522f2","/tag/github-pages/",{title:"Tag Github Pages"},["/tag/github-pages/index.html"]],["v-726261d4","/category/%E7%BD%91%E7%BB%9C%E8%B5%84%E6%BA%90/",{title:"Category \u7F51\u7EDC\u8D44\u6E90"},["/category/\u7F51\u7EDC\u8D44\u6E90/","/category/%E7%BD%91%E7%BB%9C%E8%B5%84%E6%BA%90/index.html"]],["v-36b75823","/tag/waline/",{title:"Tag waline"},["/tag/waline/index.html"]],["v-27fb5a12","/category/docker/",{title:"Category docker"},["/category/docker/index.html"]],["v-6106c001","/tag/docker/",{title:"Tag docker"},["/tag/docker/index.html"]],["v-95b29426","/category/nginx/",{title:"Category nginx"},["/category/nginx/index.html"]],["v-13275df4","/tag/gitlab/",{title:"Tag Gitlab"},["/tag/gitlab/index.html"]],["v-1a8900ba","/tag/nginx/",{title:"Tag nginx"},["/tag/nginx/index.html"]],["v-179b645c","/tag/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/",{title:"Tag \u5185\u7F51\u7A7F\u900F"},["/tag/\u5185\u7F51\u7A7F\u900F/","/tag/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/index.html"]],["v-0d1f4c3c","/tag/redis/",{title:"Tag Redis"},["/tag/redis/index.html"]]];export{n as p};
