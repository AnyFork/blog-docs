import{_ as p,o as i,c as o,a as s,X as e,v as n,b as t,a2 as r}from"./anyfork.js";const l={},c=s("p",null,"\u2003frp \u662F\u4E00\u4E2A\u4E13\u6CE8\u4E8E\u5185\u7F51\u7A7F\u900F\u7684\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u652F\u6301 TCP\u3001UDP\u3001HTTP\u3001HTTPS \u7B49\u591A\u79CD\u534F\u8BAE\u3002\u53EF\u4EE5\u5C06\u5185\u7F51\u670D\u52A1\u4EE5\u5B89\u5168\u3001\u4FBF\u6377\u7684\u65B9\u5F0F\u901A\u8FC7\u5177\u6709\u516C\u7F51 IP \u8282\u70B9\u7684\u4E2D\u8F6C\u66B4\u9732\u5230\u516C\u7F51\u3002",-1),d=s("h2",{id:"\u4E00\u3001frp-\u7B80\u4ECB",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u4E00\u3001frp-\u7B80\u4ECB","aria-hidden":"true"},"#"),n(" \u4E00\u3001Frp \u7B80\u4ECB")],-1),u=s("p",null,[n("\u2003"),s("code",null,"\u5185\u7F51\u7A7F\u900F"),n("\u5728\u65E5\u5E38\u5DE5\u4F5C\u4E2D\u5E94\u7528\u8FD8\u662F\u6BD4\u8F83\u5E7F\u6CDB\u7684\uFF0C\u53EF\u4EE5\u5C06\u6211\u4EEC\u672C\u5730\u5185\u7F51\u5E94\u7528\u670D\u52A1\u6620\u5C04\u5230\u516C\u7F51\u4E0A\uFF0C\u4F9B\u5176\u4ED6\u4EBA\u8BBF\u95EE\u4F7F\u7528\u3002Frp \u76F8\u5BF9\u5176\u4ED6"),s("code",null,"\u5185\u7F51\u7A7F\u900F"),n("\u5DE5\u5177\u800C\u8A00\uFF0C\u4E0D\u4EC5\u514D\u8D39\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u81EA\u5DF1\u90E8\u7F72\uFF0C\u914D\u7F6E\u7B80\u5355\uFF0C\u5BB9\u6613\u4E0A\u624B\uFF0C\u4F46\u90E8\u7F72\u524D\u63D0\u662F\u9700\u8981\u4E00\u53F0\u5177\u6709\u516C\u7F51 IP \u7684\u4E91\u670D\u52A1\u5668\u3002\u4E0B\u9762\u662F Frp \u5B98\u7F51\u4FE1\u606F\u548C\u8F6F\u4EF6\u4E0B\u8F7D\u5730\u5740\uFF1A")],-1),v={class:"custom-container tip"},m=s("p",{class:"custom-container-title"},"\u63D0\u793A",-1),k=n("1\u3001Frp \u5B98\u7F51\u5730\u5740\uFF1A"),b={href:"https://gofrp.org/",target:"_blank",rel:"noopener noreferrer"},h=n("https://gofrp.org/"),_=s("br",null,null,-1),f=n(" 2\u3001Frp Github \u5730\u5740\uFF1A"),g={href:"https://gofrp.org/",target:"_blank",rel:"noopener noreferrer"},y=n("https://gofrp.org/"),w=s("br",null,null,-1),x=n(" 3\u3001Frp \u5B89\u88C5\u5305\u4E0B\u8F7D\u5730\u5740\uFF1A"),T={href:"https://github.com/fatedier/frp/releases/",target:"_blank",rel:"noopener noreferrer"},S=n("https://github.com/fatedier/frp/releases/"),E=s("br",null,null,-1),P=t('<h3 id="_1-frp-\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1-frp-\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1 Frp \u662F\u4EC0\u4E48\uFF1F</h3><p>\u2003frp \u662F\u4E00\u4E2A\u514D\u8D39\u7684\uFF0C\u5F00\u6E90\u7684\u5185\u7F51\u7A7F\u900F\u5DE5\u5177\u3002\u4E13\u6CE8\u4E8E\u5185\u7F51\u7A7F\u900F\u7684\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u652F\u6301 TCP\u3001UDP\u3001HTTP\u3001HTTPS \u7B49\u591A\u79CD\u534F\u8BAE\u3002\u53EF\u4EE5\u5C06\u5185\u7F51\u670D\u52A1\u4EE5\u5B89\u5168\u3001\u4FBF\u6377\u7684\u65B9\u5F0F\u901A\u8FC7\u5177\u6709\u516C\u7F51 IP \u8282\u70B9\u7684\u4E2D\u8F6C\u66B4\u9732\u5230\u516C\u7F51\u3002\u91C7\u7528<code>go</code>\u8BED\u8A00\u8FDB\u884C\u5F00\u53D1\uFF0C\u7531\u5BA2\u6237\u7AEF<code>frpc</code>\u548C\u670D\u52A1\u7AEF<code>frps</code>2 \u90E8\u5206\u7EC4\u6210\uFF0C\u914D\u7F6E\u7B80\u5355\uFF0C\u5BB9\u6613\u4E0A\u624B\uFF0C\u91CD\u8981\u7684\u662F\u514D\u8D39\uFF0C\u81EA\u5DF1\u53EF\u4EE5\u8FDB\u884C\u90E8\u7F72\u3002</p><h3 id="_2-\u4E3A\u4EC0\u4E48\u4F7F\u7528-frp" tabindex="-1"><a class="header-anchor" href="#_2-\u4E3A\u4EC0\u4E48\u4F7F\u7528-frp" aria-hidden="true">#</a> 2 \u4E3A\u4EC0\u4E48\u4F7F\u7528 frp\uFF1F</h3><p>\u2003\u901A\u8FC7\u5728\u5177\u6709\u516C\u7F51 IP \u7684\u8282\u70B9\u4E0A\u90E8\u7F72 frp \u670D\u52A1\u7AEF\uFF0C\u53EF\u4EE5\u8F7B\u677E\u5730\u5C06\u5185\u7F51\u670D\u52A1\u7A7F\u900F\u5230\u516C\u7F51\uFF0C\u540C\u65F6\u63D0\u4F9B\u8BF8\u591A\u4E13\u4E1A\u7684\u529F\u80FD\u7279\u6027\uFF1A</p><ul><li>\u5BA2\u6237\u7AEF\u670D\u52A1\u7AEF\u901A\u4FE1\u652F\u6301 TCP\u3001KCP \u4EE5\u53CA Websocket \u7B49\u591A\u79CD\u534F\u8BAE\u3002</li><li>\u91C7\u7528 TCP \u8FDE\u63A5\u6D41\u5F0F\u590D\u7528\uFF0C\u5728\u5355\u4E2A\u8FDE\u63A5\u95F4\u627F\u8F7D\u66F4\u591A\u8BF7\u6C42\uFF0C\u8282\u7701\u8FDE\u63A5\u5EFA\u7ACB\u65F6\u95F4\u3002</li><li>\u4EE3\u7406\u7EC4\u95F4\u7684\u8D1F\u8F7D\u5747\u8861\u3002</li><li>\u7AEF\u53E3\u590D\u7528\uFF0C\u591A\u4E2A\u670D\u52A1\u901A\u8FC7\u540C\u4E00\u4E2A\u670D\u52A1\u7AEF\u7AEF\u53E3\u66B4\u9732\u3002</li><li>\u591A\u4E2A\u539F\u751F\u652F\u6301\u7684\u5BA2\u6237\u7AEF\u63D2\u4EF6\uFF08\u9759\u6001\u6587\u4EF6\u67E5\u770B\uFF0CHTTP\u3001SOCK5 \u4EE3\u7406\u7B49\uFF09\uFF0C\u4FBF\u4E8E\u72EC\u7ACB\u4F7F\u7528 frp \u5BA2\u6237\u7AEF\u5B8C\u6210\u67D0\u4E9B\u5DE5\u4F5C\u3002</li><li>\u9AD8\u5EA6\u6269\u5C55\u6027\u7684\u670D\u52A1\u7AEF\u63D2\u4EF6\u7CFB\u7EDF\uFF0C\u65B9\u4FBF\u7ED3\u5408\u81EA\u8EAB\u9700\u6C42\u8FDB\u884C\u529F\u80FD\u6269\u5C55\u3002</li><li>\u670D\u52A1\u7AEF\u548C\u5BA2\u6237\u7AEF UI \u9875\u9762\u3002</li></ul><h3 id="_3-\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3-\u539F\u7406" aria-hidden="true">#</a> 3 \u539F\u7406</h3><p>\u2003frp \u4E3B\u8981\u7531 \u5BA2\u6237\u7AEF(frpc) \u548C \u670D\u52A1\u7AEF(frps) \u7EC4\u6210\uFF0C\u670D\u52A1\u7AEF\u901A\u5E38\u90E8\u7F72\u5728\u5177\u6709\u516C\u7F51 IP \u7684\u673A\u5668\u4E0A\uFF0C\u5BA2\u6237\u7AEF\u901A\u5E38\u90E8\u7F72\u5728\u9700\u8981\u7A7F\u900F\u7684\u5185\u7F51\u670D\u52A1\u6240\u5728\u7684\u673A\u5668\u4E0A\u3002\u5185\u7F51\u670D\u52A1\u7531\u4E8E\u6CA1\u6709\u516C\u7F51 IP\uFF0C\u4E0D\u80FD\u88AB\u975E\u5C40\u57DF\u7F51\u5185\u7684\u5176\u4ED6\u7528\u6237\u8BBF\u95EE\u3002\u7528\u6237\u901A\u8FC7\u8BBF\u95EE\u670D\u52A1\u7AEF\u7684 frps\uFF0C\u7531 frp \u8D1F\u8D23\u6839\u636E\u8BF7\u6C42\u7684\u7AEF\u53E3\u6216\u5176\u4ED6\u4FE1\u606F\u5C06\u8BF7\u6C42\u8DEF\u7531\u5230\u5BF9\u5E94\u7684\u5185\u7F51\u673A\u5668\uFF0C\u4ECE\u800C\u5B9E\u73B0\u901A\u4FE1\u3002</p><h2 id="\u4E8C\u3001frp-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001frp-\u5B89\u88C5" aria-hidden="true">#</a> \u4E8C\u3001Frp \u5B89\u88C5</h2><p>\u2003Frp \u670D\u52A1\u9700\u8981\u5B89\u88C5\u670D\u52A1\u7AEF<code>frps</code>\u548C\u5BA2\u6237\u7AEF<code>frpc</code> 2 \u90E8\u5206\u3002\u8F6F\u4EF6\u4E0B\u8F7D\u524D\u5F80[\u5B98\u7F51]\uFF08https://github.com/fatedier/frp/releases\uFF09\u4E0B\u8F7D\uFF0C\u4E00\u822C\u670D\u52A1\u7AEF\u90E8\u7F72\u5728linux\uFF0C\u5BA2\u6237\u7AEF\u90E8\u7F72\u5728window\u3002\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u4E0B\u8F7D\u5BF9\u5E94\u7CFB\u7EDF\u7684\u5B89\u88C5\u5305\u3002\u4E0B\u9762\u662F<code>frps</code>\u548C<code>frpc</code>\u5B89\u88C5\u8FC7\u7A0B\uFF1A</p><h3 id="_1-\u670D\u52A1\u7AEF-frps-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_1-\u670D\u52A1\u7AEF-frps-\u5B89\u88C5" aria-hidden="true">#</a> 1 \u670D\u52A1\u7AEF frps \u5B89\u88C5</h3>',10),H=n("\u4E0B\u8F7D\u5B89\u88C5\u5305"),C=s("br",null,null,-1),$=n(" \u2003\u76EE\u524D\u53EF\u4EE5\u5728 Github \u7684 "),A={href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"},F=n("Release"),I=n(" \u9875\u9762\u4E2D\u4E0B\u8F7D\u5230\u6700\u65B0\u7248\u672C\u7684\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\u4E8C\u8FDB\u5236\u6587\u4EF6\uFF0C\u6240\u6709\u6587\u4EF6\u88AB\u6253\u5305\u5728\u4E00\u4E2A\u538B\u7F29\u5305\u4E2D\u3002\u6839\u636E\u81EA\u8EAB\u670D\u52A1\u5668\u60C5\u51B5\u9009\u62E9 linux \u6216 windows \u7248\u672C\uFF0C\u7136\u540E\u628A\u5BF9\u5E94\u7684\u538B\u7F29\u5305\u5305\u4E0A\u4F20\u81F3\u516C\u7F51\u4E91\u670D\u52A1\u5668\u3002"),D=s("li",null,[s("p",null,[n("\u4E0A\u4F20\u5B89\u88C5\u5305\uFF0C\u5E76\u89E3\u538B"),s("br"),n(" \u2003\u89E3\u538B\u7F29\u4E0B\u8F7D\u7684\u538B\u7F29\u5305\uFF0C\u5C06\u5176\u4E2D\u7684 frpc \u62F7\u8D1D\u5230\u5185\u7F51\u670D\u52A1\u6240\u5728\u7684\u673A\u5668\u4E0A\uFF0C\u5C06 frps \u62F7\u8D1D\u5230\u5177\u6709\u516C\u7F51 IP \u7684\u673A\u5668\u4E0A\uFF0C\u653E\u7F6E\u5728\u4EFB\u610F\u76EE\u5F55")])],-1),U=s("li",null,[s("p",null,[n("systemd \u90E8\u7F72 frps \u670D\u52A1"),s("br"),n(" \u2003\u5728 Linux \u7CFB\u7EDF\u4E0B\uFF0C\u4F7F\u7528 systemd \u53EF\u4EE5\u65B9\u4FBF\u5730\u63A7\u5236 frp \u670D\u52A1\u7AEF frps \u7684\u542F\u52A8\u548C\u505C\u6B62\u3001\u914D\u7F6E\u540E\u53F0\u8FD0\u884C\u548C\u5F00\u542F\u81EA\u542F\u3002\u8981\u4F7F\u7528 systemd \u6765\u63A7\u5236 frps\uFF0C\u9700\u8981\u5148\u5B89\u88C5 systemd\uFF0C\u7136\u540E\u5728 /etc/systemd/system \u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A frps.service \u6587\u4EF6\u3002")])],-1),L=t(`<p>1 \u5982 Linux \u670D\u52A1\u7AEF\u4E0A\u6CA1\u6709\u5B89\u88C5 systemd\uFF0C\u53EF\u4EE5\u4F7F\u7528 yum \u6216 apt \u7B49\u547D\u4EE4\u5B89\u88C5 systemd.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># yum</span>
yum <span class="token function">install</span> systemd
<span class="token comment"># apt</span>
<span class="token function">apt</span> <span class="token function">install</span> systemd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2 \u4F7F\u7528\u6587\u672C\u7F16\u8F91\u5668\uFF0C\u5982 vim \u521B\u5EFA\u5E76\u7F16\u8F91 frps.service \u6587\u4EF6\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">vim</span> /etc/systemd/system/frps.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5199\u5165\u5185\u5BB9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token comment"># \u670D\u52A1\u540D\u79F0\uFF0C\u53EF\u81EA\u5B9A\u4E49</span>
Description <span class="token operator">=</span> frp server
After <span class="token operator">=</span> network.target syslog.target
Wants <span class="token operator">=</span> network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
Type <span class="token operator">=</span> simple
<span class="token comment"># \u542F\u52A8frps\u7684\u547D\u4EE4\uFF0C\u9700\u4FEE\u6539\u4E3A\u60A8\u7684frps\u7684\u5B89\u88C5\u8DEF\u5F84</span>
ExecStart <span class="token operator">=</span> /path/to/frps <span class="token parameter variable">-c</span> /path/to/frps.ini

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
WantedBy <span class="token operator">=</span> multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3 \u4F7F\u7528 systemd \u547D\u4EE4\uFF0C\u7BA1\u7406 frps\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u542F\u52A8frp</span>
systemctl start frps
<span class="token comment"># \u505C\u6B62frp</span>
systemctl stop frps
<span class="token comment"># \u91CD\u542Ffrp</span>
systemctl restart frps
<span class="token comment"># \u67E5\u770Bfrp\u72B6\u6001</span>
systemctl status frps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4 \u914D\u7F6E frps \u5F00\u673A\u81EA\u542F\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> frps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>frps \u914D\u7F6E</li></ul><p>\u2003\u8FDB\u5165 frps \u5B89\u88C5\u76EE\u5F55\uFF0C\u7F16\u8F91<code>frps.ini</code>\u6587\u4EF6\uFF0C\u914D\u7F6E\u670D\u52A1\u5668\u7AEF\u53C2\u6570\u548C\u7AEF\u53E3\uFF0C\u7B80\u5355\u914D\u7F6E\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>common<span class="token punctuation">]</span>
<span class="token comment"># frp\u76D1\u542C\u7684\u7AEF\u53E3\uFF0C\u9ED8\u8BA4\u662F7000\uFF0C\u53EF\u4EE5\u6539\u6210\u5176\u4ED6\u7684</span>
bind_port <span class="token operator">=</span> <span class="token number">7000</span>
<span class="token comment"># \u6388\u6743\u7801\uFF0C\u8BF7\u6539\u6210\u66F4\u590D\u6742\u7684</span>
token <span class="token operator">=</span> <span class="token number">52010</span>
<span class="token comment"># http \u7AEF\u53E3</span>
vhost_http_port <span class="token operator">=</span><span class="token number">8081</span>
<span class="token comment"># https \u7AEF\u53E3</span>
vhost_https_port <span class="token operator">=</span><span class="token number">8080</span>

<span class="token comment"># frp\u7BA1\u7406\u540E\u53F0\u7AEF\u53E3\uFF0C\u8BF7\u6309\u81EA\u5DF1\u9700\u6C42\u66F4\u6539</span>
dashboard_port <span class="token operator">=</span> <span class="token number">7500</span>
<span class="token comment"># frp\u7BA1\u7406\u540E\u53F0\u7528\u6237\u540D\u548C\u5BC6\u7801\uFF0C\u8BF7\u6539\u6210\u81EA\u5DF1\u7684</span>
dashboard_user <span class="token operator">=</span> admin
dashboard_pwd <span class="token operator">=</span> admin
enable_prometheus <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token comment"># frp\u65E5\u5FD7\u914D\u7F6E</span>
log_file <span class="token operator">=</span> /www/wwwroot/frp-server/log/frps.log
log_level <span class="token operator">=</span> info
log_max_days <span class="token operator">=</span> <span class="token number">3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13),X=n("\u8BE6\u7EC6\u53C2\u6570\u53C2\u8003"),N={href:"https://gofrp.org/docs/reference/server-configures/",target:"_blank",rel:"noopener noreferrer"},R=n("\u670D\u52A1\u7AEF\u914D\u7F6E"),q=t(`<ul><li>5 frps \u670D\u52A1\u542F\u52A8</li></ul><p>\u2003frps.ini \u914D\u7F6E\u5B8C\u6210\u540E\uFF0C\u901A\u8FC7<code>systemctl restart frps</code>\u91CD\u542F\u670D\u52A1\u6216\u8005<code>systemctl start frps</code>,<code>systemctl status frps</code>\u67E5\u770B frps \u542F\u52A8\u72B6\u6001\uFF0C\u5F53\u8FD0\u884C\u72B6\u6001\u662F<code>active</code>\u65F6\uFF0C\u8BF4\u660E\u670D\u52A1\u542F\u52A8\u6B63\u5E38\u3002 \u6B64\u65F6\u53EF\u4EE5\u901A\u8FC7<code>http://43.143.18.xx:7500/static/#/</code>\u5730\u5740\uFF0C\u8BBF\u95EE frps \u670D\u52A1\u7AEF<code>dashboard</code>\u9762\u677F\u3002\u754C\u9762\u5982\u4E0B\uFF1A <img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111519311.png" alt="dashboard\u9762\u677F"></p><h3 id="_2-\u5BA2\u6237\u7AEF-frpc-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_2-\u5BA2\u6237\u7AEF-frpc-\u5B89\u88C5" aria-hidden="true">#</a> 2 \u5BA2\u6237\u7AEF frpc \u5B89\u88C5</h3><p>\u2003\u6839\u636E\u5185\u7F51\u670D\u52A1\u5668\u7CFB\u7EDF\u4E0B\u8F7D\u76F8\u5E94\u7684\u5B89\u88C5\u5305\uFF0C\u7136\u540E\u89E3\u538B\u653E\u5728\u4EFB\u610F\u76EE\u5F55\u4E0B\uFF0C\u6838\u5FC3\u6587\u4EF6<code>frpc.exe</code>\u548C<code>frpc.ini</code>\u5176\u4ED6\u6587\u4EF6\u4E0D\u60F3\u8981\u53EF\u4EE5\u76F4\u63A5\u5220\u9664\u3002</p><ul><li>frpc.ini \u6587\u4EF6\u914D\u7F6E</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>common<span class="token punctuation">]</span>
<span class="token comment"># \u670D\u52A1\u7AEF\u8EAB\u4EFD\u9A8C\u8BC1token</span>
token <span class="token operator">=</span> <span class="token number">52010</span>
<span class="token comment"># \u670D\u52A1\u7AEF\u5730\u5740</span>
server_addr <span class="token operator">=</span> <span class="token number">43.143</span>.18.120
<span class="token comment"># \u670D\u52A1\u7AEF\u7AEF\u53E3</span>
server_port <span class="token operator">=</span> <span class="token number">7000</span>
<span class="token comment"># \u5BA2\u6237\u7AEFadminUi\u5730\u5740</span>
admin_addr <span class="token operator">=</span> <span class="token number">127.0</span>.0.1
<span class="token comment"># \u5BA2\u6237\u7AEFadminUi\u7AEF\u53E3</span>
admin_port <span class="token operator">=</span> <span class="token number">7400</span>
<span class="token comment"># \u5BA2\u6237\u7AEFadminUi\u8D26\u53F7</span>
admin_user <span class="token operator">=</span> admin
<span class="token comment"># \u5BA2\u6237\u7AEFadminUi\u5BC6\u7801</span>
admin_pwd <span class="token operator">=</span> admin

<span class="token punctuation">[</span>web<span class="token punctuation">]</span>
<span class="token builtin class-name">type</span> <span class="token operator">=</span> https
custom_domains <span class="token operator">=</span> frp.anyfork.top
plugin <span class="token operator">=</span> https2http
plugin_local_addr <span class="token operator">=</span> <span class="token number">127.0</span>.0.1:9527
<span class="token comment"># HTTPS \u8BC1\u4E66\u76F8\u5173\u7684\u914D\u7F6E</span>
plugin_crt_path <span class="token operator">=</span> ./frp.anyfork.top_bundle.crt
plugin_key_path <span class="token operator">=</span> ./frp.anyfork.top.key
plugin_host_header_rewrite <span class="token operator">=</span> <span class="token number">127.0</span>.0.1
plugin_header_X-From-Where <span class="token operator">=</span> frp

<span class="token punctuation">[</span>web2<span class="token punctuation">]</span>
<span class="token builtin class-name">type</span> <span class="token operator">=</span> http
<span class="token comment">#\u5185\u7F51\u542F\u52A8\u5BA2\u6237\u7AEFip</span>
local_ip <span class="token operator">=</span> <span class="token number">127.0</span>.0.1
<span class="token comment">#\u672C\u5730\u670D\u52A1\u5F00\u542F\u7684\u7AEF\u53E3</span>
local_port <span class="token operator">=</span> <span class="token number">9527</span>
custom_domains <span class="token operator">=</span> frp.anyfork.top
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>[web]</code>\u548C<code>[web2]</code>\u4E3A\u914D\u7684\u7684 2 \u4E2A\u4EE3\u7406\u8282\u70B9\uFF0C\u524D\u8005\u91C7\u7528 https \u534F\u8BAE\uFF0C\u540E\u8005\u91C7\u7528 http \u534F\u8BAE\u3002\u5728\u4F7F\u7528 https \u6216\u8005 http \u534F\u8BAE\u524D\uFF0C\u9700\u8981\u5728\u670D\u52A1\u5668 frps.ini \u6587\u4EF6\u4E2D\u914D\u7F6E\u5BF9\u5E94\u7684 http \u548C https \u8BBF\u95EE\u7AEF\u53E3\u53C2\u6570<code>vhost_http_port =8081</code>\u548C<code>vhost_https_port =8080</code>,\u5E76\u5728\u4E91\u670D\u52A1\u5668\u5B89\u5168\u7EC4\u5F00\u53D1\u5BF9\u5916\u7AEF\u53E3\uFF0C\u5177\u4F53\u7AEF\u53E3\u53EF\u4EE5\u81EA\u5B9A\u4E49\u3002</p><ul><li>\u542F\u52A8 frpc \u670D\u52A1</li></ul><p>\u2003\u5F53 frpc.ini \u914D\u7F6E\u5B8C\u6210\u65F6\uFF0C\u4EE5 windows \u7CFB\u7EDF\u4E3A\u4F8B\uFF0Ccmd \u8FDB\u5165 frpc \u76EE\u5F55\uFF0C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF0C\u542F\u52A8 frpc \u670D\u52A1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>frpc.exe <span class="token parameter variable">-c</span> frpc.ini
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5F53\u63A7\u5236\u53F0\u6253\u5370\u542F\u52A8\u6210\u529F\u540E\uFF0C\u8868\u793A\u5BA2\u6237\u7AEF\u542F\u52A8\u6210\u529F\u3002\u6B64\u65F6\u542F\u52A8\u672C\u5730\u5185\u7F51\u9700\u8981\u4EE3\u7406\u7684\u670D\u52A1\u5E94\u7528\uFF0C\u901A\u8FC7\u5BF9\u5E94\u7684 http \u8BF7\u6C42\uFF1A<code>http://frp.anyfork.top:8081</code> \u6216\u8005 <code>https://frp.anyfork.top:8080</code>\u8FDB\u884C\u8BBF\u95EE\uFF0C\u4FBF\u53EF\u4EE5\u6620\u5C04\u5230\u672C\u5730\u5185\u7F51\u670D\u52A1\u3002</p><ul><li>admin UI \u754C\u9762</li></ul><p>\u2003\u5F53\u5BA2\u6237\u7AEF\u670D\u52A1\u542F\u52A8\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7<code>http://127.0.0.1:7400</code>\u8BBF\u95EE\u5BA2\u6237\u7AEF Admin UI \u754C\u9762\uFF0C\u6B64\u754C\u9762\u5C55\u793A\u5BA2\u6237\u7AEF\u4EE3\u7406\u8282\u70B9\u548C\u914D\u7F6E\u6587\u4EF6\u4FE1\u606F\uFF0C\u53EF\u4EE5\u52A8\u6001\u66F4\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u5728\u7EBF\u52A8\u6001\u5237\u65B0\u914D\u7F6E\u3002\u5177\u4F53\u754C\u9762\u5982\u4E0B\uFF1A <img src="https://cdn.staticaly.com/gh/AnyFork/blog-images/main/markdown/202209111542667.png" alt="adminUi\u754C\u9762"></p><h2 id="\u4E09-nginx-\u53CD\u5411\u4EE3\u7406\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E09-nginx-\u53CD\u5411\u4EE3\u7406\u914D\u7F6E" aria-hidden="true">#</a> \u4E09 nginx \u53CD\u5411\u4EE3\u7406\u914D\u7F6E</h2><p>\u2003frp \u672C\u6765\u5C31\u662F\u4E00\u6B3E\u53CD\u5411\u4EE3\u7406\u5E94\u7528\u670D\u52A1\u5668\uFF0C\u652F\u6301\u591A\u79CD\u534F\u8BAE\u3002\u670D\u52A1\u5668\u7AEF\u901A\u8FC7\u8BBE\u7F6E<code>vhost_http_port</code>\u548C<code>vhost_https_port</code>2 \u4E2A\u7AEF\u53E3\u53C2\u6570\uFF0C\u5BA2\u6237\u7AEF\u901A\u8FC7\u914D\u7F6E http \u548C https(\u4F9D\u8D56\u63D2\u4EF6<code>https2http</code>)\u534F\u8BAE\u8282\u70B9\uFF0C\u53EF\u4EE5\u5B9E\u73B0 http \u548C https \u8BBF\u95EE\u3002\u65E0\u9700\u501F\u52A9 nginx \u7B49\u5176\u4ED6\u53CD\u5411\u4EE3\u7406\u5DE5\u5177\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5B9E\u73B0 http \u548C https \u529F\u80FD\u3002\u672C\u9879\u76EE\u4FBF\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7<code>http://frp.anyfork.top:8081</code> \u6216\u8005 <code>https://frp.anyfork.top:8080</code>\u8FDB\u884C\u76F4\u63A5\u8BBF\u95EE\u3002\u5982\u679C\u4F60\u670D\u52A1\u5668 80 \u548C 443 \u7AEF\u53E3\u672A\u88AB\u5360\u7528\uFF0C\u53EF\u4EE5\u76F4\u63A5\u914D\u7F6E<code>vhost_http_port=80</code>\u548C<code>vhost_https_port=443</code>\uFF0C\u8FD9\u6837\u8BBF\u95EE\u65F6\u5C31\u65E0\u9700\u52A0\u7AEF\u53E3\u8BBF\u95EE\u3002\u5982\u679C\u4F60\u670D\u52A1\u5668 80 \u548C 443 \u7AEF\u53E3\u88AB\u5360\u7528\uFF0C\u53C8\u4E0D\u60F3\u50CF\u4E0A\u9762\u54EA\u6837\u901A\u8FC7<code>\u57DF\u540D+\u7AEF\u53E3</code>\u65B9\u5F0F\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u91C7\u7528 nginx \u8FDB\u884C\u53CD\u5411\u4EE3\u7406\uFF0C\u9690\u85CF\u7AEF\u53E3\u3002\u5177\u4F53\u914D\u7F6E\u5982\u4E0B\uFF1A</p><div class="custom-container danger"><p class="custom-container-title">\u8B66\u544A</p><p>\u901A\u8FC7 nginx \u53CD\u5411\u4EE3\u7406\u9690\u85CF\u8BBF\u95EE\u7AEF\u53E3\u7684\u65B9\u5F0F\u76EE\u524D\u53EA\u652F\u6301 frpc \u5BA2\u6237\u7AEF http \u534F\u8BAE\uFF0C\u5BF9\u4E8E https \u534F\u8BAE nginx \u8BBF\u95EE\u8FD4\u56DE 502,\u5177\u4F53\u539F\u56E0\u8FD8\u4E0D\u6E05\u695A\u3002</p></div><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl http2</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> frp.anyfork.top</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$server_port</span> !~ 443)</span><span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">rewrite</span> ^(/.*)$ https://<span class="token variable">$host</span><span class="token variable">$1</span> permanent</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">#HTTP_TO_HTTPS_END</span>
    <span class="token directive"><span class="token keyword">ssl_certificate</span>    /www/server/panel/vhost/cert/frp_server/fullchain.pem</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_certificate_key</span>    /www/server/panel/vhost/cert/frp_server/privkey.pem</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1.1 TLSv1.2 TLSv1.3</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_ciphers</span> EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_session_cache</span> shared:SSL:10m</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_session_timeout</span> <span class="token number">10m</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> Strict-Transport-Security <span class="token string">&quot;max-age=31536000&quot;</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">error_page</span> <span class="token number">497</span>  https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
    <span class="token comment">#SSL-END</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8081</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span>:<span class="token variable">$server_port</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> REMOTE-HOST <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> X-Cache <span class="token variable">$upstream_cache_status</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Host <span class="token variable">$host</span>:<span class="token variable">$server_port</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Scheme <span class="token variable">$scheme</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">30s</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">86400s</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_send_timeout</span> <span class="token number">30s</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_http_version</span> 1.1</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Connection <span class="token string">&quot;upgrade&quot;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># HTTP\u53CD\u5411\u4EE3\u7406\u76F8\u5173\u914D\u7F6E\u7ED3\u675F &lt;&lt;&lt;</span>

    <span class="token directive"><span class="token keyword">access_log</span>  /www/wwwlogs/frps.log</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">error_log</span>  /www/wwwlogs/frps.error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u914D\u7F6E\u9488\u5BF9 frpc \u5BA2\u6237\u7AEF http \u8282\u70B9\u8FDB\u884C\u4E86\u53CD\u5411\u4EE3\u7406\uFF0C\u5E76\u914D\u7F6E\u4E86 ssl \u8BC1\u4E66\uFF0C\u5E76\u53CD\u5411\u4EE3\u7406 frpc \u914D\u7F6E\u7684 http \u76D1\u542C\u7684\u7AEF\u53E3 8081\uFF0C\u5B9E\u73B0\u4E86 https \u8BBF\u95EE\u3002\u5BF9\u4E8E frpc \u5BA2\u6237\u7AEF https \u8282\u70B9\uFF0C\u4E0D\u80FD\u901A\u8FC7\u914D\u7F6E\u53CD\u5411\u4EE3\u7801\u6620\u5C04\u5230 8080 \u7AEF\u53E3\uFF0C\u5177\u4F53\u539F\u56E0\u8FD8\u4E0D\u6E05\u695A\u3002\u901A\u8FC7\u6B64\u65B9\u6CD5 frpc \u5C31\u53EF\u4EE5\u4E0D\u7528\u914D\u7F6E https \u534F\u8BAE\u8282\u70B9\uFF0C\u76F4\u63A5\u901A\u8FC7 http \u534F\u8BAE\u8282\u70B9\u548C nginx \u53CD\u5411\u4EE3\u7406\u5C31\u53EF\u4EE5\u5B9E\u73B0 https \u529F\u80FD\u3002</p>`,18);function B(O,V){const a=r("ExternalLinkIcon");return i(),o("div",null,[c,d,u,s("div",v,[m,s("p",null,[k,s("a",b,[h,e(a)]),_,f,s("a",g,[y,e(a)]),w,x,s("a",T,[S,e(a)]),E])]),P,s("ul",null,[s("li",null,[s("p",null,[H,C,$,s("a",A,[F,e(a)]),I])]),D,U]),L,s("p",null,[X,s("a",N,[R,e(a)])]),q])}var G=p(l,[["render",B],["__file","frp.html.vue"]]);export{G as default};
